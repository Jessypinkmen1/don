(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3725],{89644:function(e,t,n){e.exports=n(25644)},70353:function(e,t,n){"use strict";var i=n(93044),r=n(86955),s=n(92233),o=n(68030),l=n(97948),a=n(51875),c=n(60842),d=n(88618);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||c(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},25644:function(e,t,n){"use strict";var i=n(93044),r=n(73644),s=n(62215),o=n(92937);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(1439));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(13148),a.CancelToken=n(34089),a.isCancel=n(98041),a.all=function(e){return Promise.all(e)},a.spread=n(70783),a.isAxiosError=n(65587),e.exports=a,e.exports.default=a},13148:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},34089:function(e,t,n){"use strict";var i=n(13148);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},98041:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},62215:function(e,t,n){"use strict";var i=n(93044),r=n(68030),s=n(946),o=n(6895),l=n(92937),a=n(17525),c=a.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var d=[o,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(s),t=Promise.resolve(e);d.length;)t=t.then(d.shift(),d.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},d.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){d.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=d},946:function(e,t,n){"use strict";var i=n(93044);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},97948:function(e,t,n){"use strict";var i=n(99192),r=n(48762);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},88618:function(e,t,n){"use strict";var i=n(11935);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},6895:function(e,t,n){"use strict";var i=n(93044),r=n(38556),s=n(98041),o=n(1439);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},11935:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},92937:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function c(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,c),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var d=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===d.indexOf(e)});return i.forEach(u,c),n}},86955:function(e,t,n){"use strict";var i=n(88618);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},38556:function(e,t,n){"use strict";var i=n(93044),r=n(1439);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},1439:function(e,t,n){"use strict";var i,r=n(34406),s=n(93044),o=n(98868),l=n(11935),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?i=n(70353):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(i=n(70353)),i),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e))?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(s.isString(e))try{return(0,JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw l(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){d.headers[e]={}}),s.forEach(["post","put","patch"],function(e){d.headers[e]=s.merge(a)}),e.exports=d},73644:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},68030:function(e,t,n){"use strict";var i=n(93044);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},48762:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},92233:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},99192:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},65587:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},60842:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},98868:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},51875:function(e,t,n){"use strict";var i=n(93044),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},70783:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},17525:function(e,t,n){"use strict";var i=n(19521),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},93044:function(e,t,n){"use strict";var i=n(73644),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function d(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)d(arguments[i],n);return t},extend:function(e,t,n){return d(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},6185:function(e){var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),c=0;c<11;++c)a[c]=n(.1*c,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,c=i(l,e,o);return c>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===c?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},10161:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,s),!0;case 6:return d.fn.call(d.context,t,i,r,s,o),!0}for(c=1,a=Array(u-1);c<u;c++)a[c-1]=arguments[c];d.fn.apply(d.context,a)}else{var h,x=d.length;for(c=0;c<x;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];d[c].fn.apply(d[c].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,c=[],d=l.length;a<d;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&c.push(l[a]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},41857:function(e){"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},68642:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},84538:function(e,t,n){"use strict";n.d(t,{N:function(){return eg}});var i=n(52322),r=n(69251),s=n(30523),o=n(28535),l=n(42946),a=n(5879),c=n(2784),d=n(46692),u=n(51535),h=n(13867),x=n(91309),p=n(71383),m=n(93199),f=n(17993),g=n(5740),j=n(43297),v=n(29117),C=n(77533),b=n(54933),y=n(49929),k=n(78456),w=n(95647),S=n(43574);let E=(0,c.memo)(()=>{let[e]=(0,w.Ns)("editorMode"),t=(0,k.A)(S.c);return(0,i.jsxs)(f.g,{spacing:3,align:"stretch",children:[(0,i.jsx)(o.xu,{fontSize:"sm",children:(0,i.jsx)(a.cC,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(I,{title:t.freeform.label(),icon:t.freeform.icon,children:(0,i.jsx)(a.cC,{id:"ELg7Zs",values:{0:t.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{title:t.structured.label(),icon:t.structured.icon,children:(0,i.jsx)(a.cC,{id:"iKG7iK",values:{0:t.structured.label()}})}),(0,i.jsx)(I,{title:(0,i.jsx)(a.cC,{id:"+mgW41"}),icon:l.Yai,children:(0,i.jsx)(a.cC,{id:"oGNrqw",components:{0:(0,i.jsx)(g.T,{})}})}),(0,i.jsx)(I,{title:(0,i.jsx)(a.cC,{id:"1Nr9Bi"}),icon:b.BDt,children:(0,i.jsx)(a.cC,{id:"5cPTto",components:{0:(0,i.jsx)(g.T,{})}})})]})]})});E.displayName="AIGeneratorTips";let I=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.xu,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(j.K,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(v.U,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(y.G,{icon:t}),(0,i.jsx)(C.x,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(C.x,{fontSize:"sm",children:r})]})})};var A=n(96023),_=n(15550),T=n(74090),O=n(87651),D=n(62614);let R=(0,c.memo)(()=>{let e=(0,p.TL)(),t=(0,p.qr)(),n=(0,p.CG)(m.Zm),r=(0,p.CG)(m.d_),s=(0,p.CG)(m.Vn),d=(0,w.o7)(),u=(0,c.useCallback)(()=>{let n=(0,m.jj)(t.getState()).find(e=>e.isDraft);n&&e((0,m.J7)({num:n.num}))},[e,t]);return(0,i.jsx)(o.xu,{children:n&&(0,i.jsx)(O.U,{in:s,children:(0,i.jsxs)(j.K,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(v.U,{flex:"1",children:[(0,i.jsx)(y.G,{icon:l.On6}),(0,i.jsxs)(j.K,{spacing:0,children:[(0,i.jsx)(C.x,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(a.cC,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(C.x,{children:(0,i.jsx)(a.cC,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(D.z,{variant:"solid",colorScheme:"primary",onClick:d,children:(0,i.jsx)(a.cC,{id:"u52q7m"})}),(0,i.jsx)(D.z,{onClick:u,variant:"plain",children:(0,i.jsx)(a.cC,{id:"dEgA5A"})})]})})})});R.displayName="OverrideDraftWarning";var P=n(75768),L=n(32899),z=n(10625),G=n(67046),N=n(332),M=n(99058),U=n(44035),F=n(39237),W=n(27599),H=n(64253),q=n(18149),B=n.n(q);let V={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},K=(0,c.memo)(()=>{let e=(0,p.qr)(),t=(0,p.TL)(),n=(0,w.vS)(),r=(0,p.CG)(m.jj,(e,t)=>B()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:d}=(0,H.o5)(),u=(0,p.CG)(m.Zm),h=(0,c.useCallback)(()=>{t((0,m.ly)()),n((0,m.au)(e.getState()),!1)},[t,n,e]),x=(0,c.useCallback)(()=>{t((0,m.np)()),n((0,m.au)(e.getState()),!1)},[t,n,e]),f=(0,c.useCallback)(i=>{t((0,m.J7)({num:i})),n((0,m.au)(e.getState()),!1)},[t,n,e]);if(0===r.length)return null;let g=r.findIndex(e=>e.isCurrent),j=r[g],v=g<r.length-1;return u?(0,i.jsxs)(P.h,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(L.h,{display:{base:"none",md:"inline-flex"},isDisabled:!(g>0),"aria-label":"previous version",onClick:x,...V,icon:(0,i.jsx)(y.G,{icon:l.A35,fixedWidth:!0})}),(0,i.jsxs)(z.v,{closeOnSelect:!0,children:[(0,i.jsx)(d,{children:(0,i.jsx)(H.kH,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(G.j,{colorScheme:"gray",minW:"10",size:"sm",as:D.z,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(N.h,{children:(0,i.jsxs)(M.q,{maxW:"260px",children:[(0,i.jsx)(U._,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(F.i,{value:String(e.num),onClick:()=>{f(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(C.x,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(W.R,{}),(0,i.jsx)(o.xu,{py:1,px:2,children:(0,i.jsx)(C.x,{fontSize:"xs",children:(0,i.jsx)(a.cC,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(L.h,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...V,icon:(0,i.jsx)(y.G,{icon:l._tD,fixedWidth:!0})})]}):null});K.displayName="VersionSwitcher";var Z=n(67109),Y=n(49259),J=n(74008),X=n(85408),Q=n(26112),$=n(35183),ee=n(97166),et=n(29494),en=n(82655),ei=n(87254),er=n(79385),es=n(72396),eo=n(6476),el=n(85652);let ea=(0,c.memo)(()=>{let[e,t]=(0,w.ip)(),[n,r]=(0,w.Ns)("cardDimensions"),[s,o]=(0,w.Ns)("cardWidth"),l=(0,k.A)(eo._J);return(0,i.jsx)(el.j,{label:(0,i.jsx)(a.cC,{id:"kI1qVD"}),colorScheme:"orchid",icon:b.Y$l,values:[l[e].label()],children:(0,i.jsxs)(f.g,{spacing:4,align:"start",children:[(0,i.jsxs)($.NI,{children:[(0,i.jsx)(eo.FQ,{selectedFormat:e,setSelectedFormat:e=>{t(e);let{cardDimensions:n}=(0,es.sJ)(e);n&&r(n)}}),(0,i.jsx)(el.i,{children:(0,i.jsx)(a.cC,{id:"qJHyoI"})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"mbS8l0"})}),(0,i.jsx)(er.Ft,{cardDimensions:n,updateCardDimensions:r}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"Q3Qdcd"})})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"cPp+Ef"})}),(0,i.jsx)(P.h,{size:"sm",isAttached:!0,width:"100%",children:ec.map(e=>{let t="default"===e.key?void 0:e.key;return(0,i.jsx)(D.z,{variant:t===s?"plainSelected":"plain",leftIcon:(0,i.jsx)(y.G,{icon:e.icon,color:"var(--chakra-colors-trueblue-500)"}),boxShadow:"none",onClick:()=>o(t),width:"100%",children:e.label()},e.key)})}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"LiF+HT"})})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"G57+qO"})}),(0,i.jsx)(ed,{})]})]})})}),ec=[{key:"default",label:()=>ei.ag._({id:"TJBHlP"}),icon:en.pL1},{key:"lg",label:()=>ei.ag._({id:"I5S9ZE"}),icon:en.r9b}];ea.displayName="FormatSettingsGroup";let ed=(0,c.memo)(()=>{let[e,t]=(0,w.Q_)(),n=(0,c.useCallback)(e=>t(e.target.value),[t]);return(0,i.jsx)(et.g,{value:e||"",onChange:n,bg:"white",placeholder:ei.ag._({id:"LLAa/9"}),maxLength:es.V4})});ed.displayName="PromptInput";var eu=n(46669),eh=n(4816);let ex=(0,c.memo)(e=>{let{isLoading:t}=e,n=(0,p.CG)(m.Vn);return(0,i.jsxs)(f.g,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.xu,{fontSize:"sm",children:[(0,i.jsx)(a.cC,{id:"Tz0i8g"})," ",(0,i.jsx)(H.Yq,{label:(0,i.jsx)(a.cC,{id:"FDel/s"})})]}),t?(0,i.jsxs)(j.K,{children:[(0,i.jsx)(Z.O,{height:16}),(0,i.jsx)(Z.O,{height:16}),(0,i.jsx)(Z.O,{height:16})]}):(0,i.jsxs)(Y.U,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:j.K,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(J.i,{}),boxShadow:"sm",children:[(0,i.jsx)(eh.o,{}),(0,i.jsx)(eu.Td,{}),(0,i.jsx)(ea,{})]}),(0,i.jsx)(o.xu,{display:{base:"none",lg:"block"},children:(0,i.jsx)(ep,{})})]})});ex.displayName="AIGeneratorSettings";let ep=(0,c.memo)(()=>{let e=(0,p.CG)(m.mO),{maxTokens:t}=(0,Q.ml)();return(0,i.jsx)(X.H,{charCount:e,max:t,shouldShow:!0})});ep.displayName="AIGeneratorCharacterCount";var em=n(93088),ef=n(75863);let eg=(0,c.memo)(()=>{let[e,t]=(0,c.useState)("outline"),{skipThemeStep:n}=(0,d.Ry)(),f=(0,p.TL)();(0,c.useEffect)(()=>()=>{f((0,m.fB)())},[f]);let g=(0,c.useCallback)(()=>{t("outline")},[]),j="theme"===e?void 0:(0,i.jsx)(a.cC,{id:"opD9db"});return(0,i.jsx)(x.jX,{children:(0,i.jsxs)(A.v4,{children:[(0,i.jsx)(T.D,{onClick:"theme"===e?g:void 0,navIconOverride:"theme"===e?l.acZ:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(a.cC,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:j,rightItem:"outline"===e?(0,i.jsx)(K,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.r,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.P,{area:"overrideWarning",children:(0,i.jsx)(R,{})}),(0,i.jsx)(s.P,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ex,{isLoading:!1})}),(0,i.jsx)(s.P,{area:"editor",h:"100%",children:(0,i.jsx)(_.e,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"}},showContentTip:!0})}),(0,i.jsx)(s.P,{area:"tips",children:(0,i.jsx)(E,{})})]}),(0,i.jsx)(o.xu,{height:"20vh"})," ",(0,i.jsx)(ef.U,{cta:n?(0,i.jsx)(h.j,{children:(0,i.jsx)(a.cC,{id:"ziAjHi"})}):(0,i.jsx)(em.O,{onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(u.O,{}):null]})})});eg.displayName="AIGeneratorPage"},91e3:function(e,t,n){"use strict";n.d(t,{j:function(){return $}});var i=n(52322),r=n(70065),s=n(43297),o=n(28535),l=n(77533),a=n(11082),c=n(17993),d=n(74409),u=n(62614),h=n(17190),x=n(54933),p=n(49929),m=n(5879),f=n(87254),g=n(2784),j=n(69971),v=n(62204),C=n(21829),b=n(25556),y=n(30240),k=n(48714),w=n(71383),S=n(31601),E=n(55898),I=n(98835),A=n(91076),_=n(5632);let T=()=>{let[e]=(0,j.JBp)();return(0,g.useCallback)(async t=>{var n;let{settings:i}=t,r=await e({variables:{input:{workspaceId:(0,A.n_)(),generationType:j.FJd.UploadPptV2,input:{prompt:i.filename,format:j.j6H.Deck,settings:i}}}});if(r.errors)throw Error("Got the following graphql errors:\n\n"+r.errors.map(e=>e.message).join("\n\n"));return null===(n=r.data)||void 0===n?void 0:n.createDocGeneration},[e])},O=()=>{let e=T(),{push:t}=(0,_.useRouter)(),[n,i]=(0,g.useState)(!1),[r,s]=(0,g.useState)(null);return{continueToPptImport:(0,g.useCallback)(async n=>{i(!0);let r={pdfUrl:n.pdfUrl,htmlUrl:n.xhtmlUrl,filename:n.filename,thumbnails:n.thumbnails,fileUrl:n.fileUrl};try{let n=await e({settings:r});if(!n)throw Error("Unable to create doc generation");t("/create/import-ppt/".concat(n.id))}catch(e){s(e.message),i(!1)}},[e,t]),isLoading:n,error:r}};var D=n(2309),R=n(93199),P=n(66266),L=n(74957),z=n(82863),G=n(95405),N=n(96023),M=n(16791),U=n(74090);let F=e=>{let{children:t}=e;return(0,i.jsx)(z.rg,{clientId:G.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsxs)(N.v4,{children:[(0,i.jsx)(U.D,{}),(0,i.jsx)(M.U,{title:(0,i.jsx)(m.cC,{id:"eumYBf"}),subtitle:(0,i.jsx)(m.cC,{id:"7aFH7x"}),icon:(0,i.jsx)(p.G,{icon:x.Vmj}),iconBoxProps:{color:"purple.300"},children:(0,i.jsx)(h.W,{maxW:"4xl",display:"flex",flexDirection:"column",alignItems:"center",children:t})})]})})};var W=n(29117),H=n(36474),q=n(32899),B=n(42946),V=n(64253);let K=e=>{let{importedFile:t,handleDelete:n}=e;return(0,i.jsx)(c.g,{spacing:4,align:"stretch",w:"100%",children:(0,i.jsxs)(W.U,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,i.jsx)(o.xu,{color:"green.500",fontSize:"lg",children:(0,i.jsx)(p.G,{icon:x.f8k})}),(0,i.jsx)(l.x,{noOfLines:1,children:null==t?void 0:t.filename}),(0,i.jsx)(H.L,{}),(0,i.jsx)(V.kH,{placement:"top",label:(0,i.jsx)(m.cC,{id:"cILfnJ"}),children:(0,i.jsx)(q.h,{onClick:n,variant:"ghost",colorScheme:"red","aria-label":f.ag._({id:"cILfnJ"}),icon:(0,i.jsx)(p.G,{icon:B.Vui})})})]})})};var Z=n(82655),Y=n(6476);let J=(0,g.memo)(e=>{let{value:t,onSelect:n}=e;return(0,i.jsxs)(s.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(Y.qe,{label:(0,i.jsx)(m.cC,{id:"hEgO4f"}),icon:Z.JyM,selectedIcon:x.JyM,onClick:()=>{n("text")},isSelected:"text"===t,description:(0,i.jsx)(m.cC,{id:"9GItSL",components:{0:(0,i.jsx)("strong",{})}})})}),(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(Y.qe,{label:(0,i.jsx)(m.cC,{id:"Mm48EF"}),icon:Z.qHV,selectedIcon:x.qHV,onClick:()=>{n("vision")},description:(0,i.jsx)(m.cC,{id:"ApxVH5",components:{0:(0,i.jsx)("strong",{})}}),isSelected:"vision"===t,badge:"Beta"})})]})});J.displayName="PptImportTypeSelector";var X=n(46692);let Q={GoogleDocs:j.FJd.ImportGoogleDoc,GoogleSlides:j.FJd.ImportGoogleSlides,PptxUpload:j.FJd.UploadPpt,DocxUpload:j.FJd.UploadWordFile,WebpageUrl:j.FJd.ImportWebpage,PdfUpload:j.FJd.ImportPdf},$=(0,g.memo)(()=>{let e=(0,w.TL)(),t=(0,S.z$)(),n=(0,r.p)(),[_,T]=(0,g.useState)(!1),{guessSettings:z,isLoading:G}=(0,D.d)({ref:"createImport"}),{goToScreen:N}=(0,X.Ry)(),M=(0,y.ye)("pptImportV2"),U=(0,y.ye)("pyimportPptNonVisualImport"),[W]=(0,j.cmT)(),[H,q]=(0,g.useState)("freeform"),B=(0,w.CG)(R.$Q),V=(null==B?void 0:B.source)==="PptxUpload"||(null==B?void 0:B.source)==="GoogleSlides",[Z,$]=(0,g.useState)("deck"),[ee,et]=(0,g.useState)("text"),en=(0,g.useCallback)(n=>{let{source:i,src:r}=n;e((0,R.c_)(n)),"GoogleSlides"===i||"PptxUpload"===i?q("structured"):q("freeform"),r&&(null==t||t.track(S.AA.DOC_IMPORTED,{source:i,src:r,with_ai:!0,latency:n.latency}))},[e,t]),ei=(0,b.YO)(void 0,"pptImportV2",S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PPT_IMPORT_V2),{continueToPptImport:er,isLoading:es}=O(),eo=G||_||es,el=(0,g.useCallback)(async()=>{if(!B)return;if(T(!0),V&&M&&"vision"===ee){if(!ei())return;await er(B);return}let e=Q[B.source];if(U&&V){try{let{data:t}=await W({variables:{input:{fileUrl:B.fileUrl,workspaceId:(0,A.n_)()}}});if(!(null==t?void 0:t.getPptHtml))throw Error("No data returned from getPptHtml");let n=t.getPptHtml.slideHtml.map(I.B).map(e=>(0,E.c$)(e,void 0,P.G)).join("\n\n---\n\n");await z(e,{format:Z,content:n,settings:{textMode:"generate",editorMode:"structured"}})}catch(e){console.error("[caught] getPptHtml error: ".concat(e)),n({status:"error",title:f.ag._({id:"SlfejT"}),description:f.ag._({id:"lIW942"}),duration:5e3,isClosable:!0})}finally{T(!1)}return}let t=B.markdown;if(!t){let e=(0,I.B)(B.html);t=(0,E.c$)(e,void 0,P.G)}let i="GoogleDocs"===B.source||"DocxUpload"===B.source||"PdfUpload"===B.source||"WebpageUrl"===B.source,r={format:Z,content:t||"",settings:{textMode:i&&"document"!==Z?"condense":i||"document"!==Z?M&&V&&"text"===ee?"generate":"preserve":"generate",editorMode:H}};await z(e,r)},[B,V,M,ee,U,Z,H,z,ei,er,W,n]),ea=(0,g.useCallback)(()=>{e((0,R.c_)(void 0))},[e]);return(0,i.jsxs)(F,{children:[!B&&(0,i.jsxs)(s.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,i.jsx)(k.v,{onImportComplete:en}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(m.cC,{id:"HmmZUO",components:{0:(0,i.jsx)(a.r,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),N("createPaste",{ref:"createImport"})}})}})})})]}),B&&(0,i.jsxs)(c.g,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,i.jsx)(K,{importedFile:B,handleDelete:ea}),(0,i.jsxs)(c.g,{spacing:4,w:"100%",children:[!V&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(Y.FQ,{setSelectedFormat:$,selectedFormat:Z})]}),(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:el,isLoading:eo,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(m.cC,{id:"xGVfLh"})})})]}),V&&(0,i.jsxs)(i.Fragment,{children:[M&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"ETAPks"})}),(0,i.jsx)(J,{value:ee,onSelect:et})]}),"text"===ee&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(Y.FQ,{setSelectedFormat:$,selectedFormat:Z})]}),(0,i.jsxs)(c.g,{spacing:2,width:"100%",children:[(0,i.jsxs)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:el,isLoading:eo,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:[(0,i.jsx)(m.cC,{id:"xGVfLh"}),"vision"===ee&&(0,i.jsx)(C.J,{type:"pptImportV2"})]}),"vision"===ee&&(0,i.jsx)(v.r,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"})]})]})]})]}),(0,i.jsx)(h.W,{maxW:"2xl",pb:"10vw",mt:16,children:(0,i.jsx)(L.F,{generationTypes:[j.FJd.ImportPdf,j.FJd.ImportWebpage,j.FJd.ImportGoogleDoc,j.FJd.ImportGoogleSlides,j.FJd.UploadPpt,j.FJd.UploadPptV2,j.FJd.UploadWordFile]})})]})});$.displayName="CreateImportPage"},56630:function(e,t,n){"use strict";n.d(t,{B:function(){return w}});var i=n(52322),r=n(17190),s=n(43297),o=n(69251),l=n(30523),a=n(11082),c=n(42946),d=n(54933),u=n(49929),h=n(5879),x=n(2784),p=n(36107),m=n(96023),f=n(30240),g=n(71383),j=n(93199),v=n(74957),C=n(16791),b=n(46692),y=n(74090);let k=e=>{let{createGenerateV2Enabled:t}=e,n=f.VH.get("importUrl");return{paste:{label:(0,i.jsx)(h.cC,{id:"Q4xH1Z"}),description:(0,i.jsx)(h.cC,{id:"MxbdK6"}),icon:d.nfZ,colorScheme:"pink",imageUrl:"/_next/static/media/Thumbnail-paste.fdba31f6.svg",transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(h.cC,{id:"ziAjHi"}),description:(0,i.jsx)(h.cC,{id:"anOFr5"}),icon:d.JyM,colorScheme:"trueblue",imageUrl:"/_next/static/media/Thumbnail-generate.8e2e4605.svg",isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(h.cC,{id:"krF+YI"}):(0,i.jsx)(h.cC,{id:"2xoyqj"}),description:n?(0,i.jsx)(h.cC,{id:"fG2B2z"}):(0,i.jsx)(h.cC,{id:"5c5WYH"}),icon:d.Vmj,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-transform.76b5e76e.svg",transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},w=(0,x.memo)(()=>{let e=(0,g.TL)(),{goToScreen:t,navEnabled:n}=(0,b.Ry)(),d=(0,f.ye)("createGenerateV2");return(0,i.jsxs)(m.v4,{children:[n&&(0,i.jsx)(y.D,{}),(0,i.jsx)(C.U,{title:(0,i.jsx)(h.cC,{id:"1zuBj5"}),subtitle:(0,i.jsx)(h.cC,{id:"h0sjMM"}),children:(0,i.jsx)(r.W,{maxW:"4xl",children:(0,i.jsx)(s.K,{spacing:12,align:"center",children:(0,i.jsx)(o.r,{gap:[4,4,2],gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(k({createGenerateV2Enabled:d})).map(n=>{let[r,{label:s,description:o,isPopular:d,colorScheme:x,imageUrl:m,transform:f,screen:g}]=n;return(0,i.jsx)(l.P,{area:r,children:(0,i.jsx)(p.X,{as:a.r,label:s,description:o,isPopular:d,colorScheme:x,imageUrl:m,transform:f,onClick:n=>{e((0,j._8)()),n.preventDefault(),n.stopPropagation(),t(g,{ref:"createWithAI"})},ctaIcon:(0,i.jsx)(u.G,{icon:c.eFW}),ctaLabel:(0,i.jsx)(h.cC,{id:"xGVfLh"})})},r)})})})})}),(0,i.jsx)(r.W,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(v.F,{})})]})});w.displayName="CreatePage"},55655:function(e,t,n){"use strict";n.d(t,{L:function(){return D}});var i=n(52322),r=n(17190),s=n(17993),o=n(28535),l=n(87651),a=n(74409),c=n(62614),d=n(77533),u=n(11082),h=n(42946),x=n(54933),p=n(49929),m=n(64253),f=n(5879),g=n(87254),j=n(2784),v=n(96023),C=n(91309),b=n(92662),y=n(69971),k=n(71383),w=n(15550),S=n(2309),E=n(93199),I=n(96114),A=n(6476),_=n(16791),T=n(46692),O=n(74090);let D=(0,j.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,S.d)({ref:"createPaste"}),n=(0,k.CG)(E.au),[D,R]=(0,j.useState)(!1),[P,L]=(0,j.useState)("deck"),{goToScreen:z}=(0,T.Ry)(),G=(0,j.useCallback)(async()=>{let t=(0,I.Yl)(n),i=(0,I.vE)(n),r=(0,b.J1)(n);await e(y.FJd.PasteText,{format:P,content:n,settings:{textMode:r>=1e3?"document"===P?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform"}})},[e,P,n]);return(0,i.jsx)(C.jX,{children:(0,i.jsxs)(v.v4,{children:[(0,i.jsx)(O.D,{}),(0,i.jsx)(_.U,{title:(0,i.jsx)(f.cC,{id:"RG+JLG"}),subtitle:(0,i.jsx)(f.cC,{id:"v2ydVh"}),icon:(0,i.jsx)(p.G,{icon:x.OEL}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.W,{maxW:"2xl",children:(0,i.jsxs)(s.g,{spacing:4,w:"100%",children:[(0,i.jsx)(s.g,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(w.e,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;R(!t.isEmpty)}})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:D,children:(0,i.jsxs)(s.g,{spacing:4,py:2,w:"100%",children:[(0,i.jsx)(a.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(f.cC,{id:"SjATqV"})}),(0,i.jsx)(A.FQ,{setSelectedFormat:L,selectedFormat:P})]})})}),(0,i.jsx)(m.kH,{label:n?"":(0,i.jsx)(f.cC,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(c.z,{size:"lg",minW:"16em",width:"100%",onClick:G,variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:h.eFW}),isLoading:t,isDisabled:!n,loadingText:g.ag._({id:"qgUvjm"}),children:(0,i.jsx)(f.cC,{id:"xGVfLh"})})})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:!D,children:(0,i.jsx)(d.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(f.cC,{id:"LVQnRo",components:{0:(0,i.jsx)(u.r,{onClick:e=>{e.preventDefault(),z("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});D.displayName="CreatePastePage"},16791:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(52322),r=n(43297),s=n(74409),o=n(28535),l=n(38035);let a=e=>{let{title:t,subtitle:n,icon:a,iconBoxProps:c,children:d}=e;return(0,i.jsxs)(r.K,{alignContent:"center",position:"relative",zIndex:"0",spacing:0,py:{base:"9",md:"8vh"},w:"100%",children:[(0,i.jsxs)(r.K,{spacing:{base:2,md:4},mb:{base:5,md:8},w:"100%",children:[null!==t&&(0,i.jsxs)(s.X,{textAlign:"center",color:"gray.800",fontWeight:"600",fontFamily:"p22-mackinac-pro",w:"100%",size:{base:"xl",md:"2xl"},px:4,children:[a&&(0,i.jsx)(o.xu,{display:"inline",mr:2,...c,children:a}),t]}),n&&(0,i.jsx)(s.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:n})]}),(0,i.jsx)(l.k,{w:"100%",justifyContent:"center",children:d})]})}},52069:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var i=n(52322),r=n(38035),s=n(2784),o=n(93689),l=n(45230),a=n(96023);let c=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=(0,l.HL)({id:t});return s?(0,i.jsx)(r.k,{...a.ZQ,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.AA,{})}):(0,i.jsx)(i.Fragment,{children:n})});c.displayName="LoadDocGenerationPage"},74957:function(e,t,n){"use strict";n.d(t,{F:function(){return G}});var i=n(52322),r=n(17993),s=n(74409),o=n(42822),l=n(67109),a=n(62614),c=n(42946),d=n(49929),u=n(5879),h=n(2784),x=n(69971),p=n(91076),m=n(43297),f=n(28535),g=n(77533),j=n(82554),v=n(36474),C=n(11082),b=n(29117),y=n(87254),k=n(56974),w=n.n(k),S=n(5632),E=n(86290),I=n(92035),A=n(33279),_=n(46692);let T="trueblue",O={[x.FJd.Generate]:(0,i.jsx)(u.cC,{id:"ziAjHi"}),[x.FJd.PasteText]:(0,i.jsx)(u.cC,{id:"yK5KbG"}),[x.FJd.ImportGoogleDoc]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.ImportGoogleSlides]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.ImportPdf]:(0,i.jsx)(u.cC,{id:"+HOkuz"}),[x.FJd.ImportWebpage]:(0,i.jsx)(u.cC,{id:"6gz43w"}),[x.FJd.UploadWordFile]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.UploadPpt]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.UploadPptV2]:(0,i.jsx)(u.cC,{id:"z+pP4d"})},D=e=>{let{count:t}=e;return(0,i.jsx)(i.Fragment,{children:[...Array(t)].map((e,t)=>(0,i.jsx)(z,{children:(0,i.jsxs)(m.K,{spacing:1,w:"100%",children:[(0,i.jsx)(l.O,{height:"1rem",borderRadius:"sm",w:"100%"}),(0,i.jsx)(f.xu,{w:"12rem",children:(0,i.jsx)(l.O,{height:"0.875rem",borderRadius:"sm",w:"100%"})})]})},t))})},R=e=>{for(let t of e){let e=t.replace(/<[^>]*>/g,"");if(0!==e.trim().length&&"---"!==e.trim())return e.trim().replace(/^[#]{1,3}/,"")}return y.ag._({id:"wja8aL"})},P=e=>{let{prompt:t,content:n,generationType:i}=e,r=R(n.split("\n"));return i===x.FJd.Generate&&t?t:i===x.FJd.UploadPptV2&&t?null!=t?t:"imported.pptx":r.slice(0,100)},L=e=>{var t,n,r,s,o,l;let{docGeneration:a}=e,p=(0,S.useRouter)(),{goToScreen:m}=(0,_.Ry)(),C={whitespace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},b=(null===(t=a.draftInput)||void 0===t?void 0:t.prompt)||(null===(r=a.docGenerateInputs)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.prompt),y=(null===(s=a.draftInput)||void 0===s?void 0:s.content)||(null===(l=a.docGenerateInputs)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:o.content)||"",k=P({generationType:a.generationType,prompt:b,content:y}),I=(0,E.BK)(a.updatedTime),D=0===a.docGenerateInputs.length,R=(0,A.Xn)(a,{ref:"createWithAI"}),L=(0,h.useCallback)(()=>{let{generationType:e}=a;if(e===x.FJd.Generate)m("createGenerate",{generateId:a.id,ref:"createWithAI"});else if(e===x.FJd.UploadPptV2){if(a.draftInput)p.push("/create/import-ppt/".concat(a.id));else{let e=w()(a.docGenerateInputs),t=null==e?void 0:e.docId;if(!t)throw Error("No generated docId for PPT import docGeneration.id=".concat(a.id));p.push("/docs/".concat(t))}}else m("promptEditor",{generateId:a.id,ref:"createWithAI"})},[a,m,p]);return(0,i.jsxs)(z,{href:R,onClick:L,children:[(0,i.jsxs)(f.xu,{overflow:"hidden",maxW:"100%",children:[(0,i.jsx)(g.x,{...C,textAlign:"left",fontSize:{base:"sm",md:"md"},mb:[1,1.5],children:k}),(0,i.jsxs)(g.x,{...C,textAlign:"left",maxW:"100%",fontWeight:"400",fontSize:{base:"xs",md:"sm"},color:"gray.700",children:[O[a.generationType]," \xb7 ",I,D&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(j.C,{colorScheme:"teal",children:(0,i.jsx)(u.cC,{id:"eneWvv"})})]})]})]}),(0,i.jsx)(v.L,{}),(0,i.jsx)(f.xu,{fontSize:{base:"sm",md:"md"},color:"blackAlpha.400",_groupHover:{color:"".concat(T,".500")},children:(0,i.jsx)(d.G,{icon:c._tD})})]})},z=e=>{let{children:t,href:n,onClick:r,...s}=e;return(0,i.jsx)(a.z,{as:C.r,href:n||void 0,onClick:e=>{e.preventDefault(),null==r||r()},bg:"white",borderRadius:"lg",display:"flex",border:"1px solid",boxShadow:"sm",borderColor:"white",variant:"plain",fontSize:"lg",py:4,spacing:"3",role:"group",minH:{base:16,md:20},_hover:(0,I.s2)()?{}:{color:"".concat(T,".600"),textDecoration:"none",boxShadow:"md"},...s,children:(0,i.jsx)(b.U,{spacing:"3",w:"100%",children:t})})},G=(0,h.memo)(e=>{var t;let{generationTypes:n}=e,m=(0,p.n_)(),[f,g]=(0,h.useState)(!1),{data:j,fetchMore:v,loading:C}=(0,x.M1N)({variables:{workspaceId:m,first:5,generationTypes:n}}),b=null==j?void 0:j.docGenerations.pageInfo,y=(0,h.useCallback)(()=>{(null==b?void 0:b.hasNextPage)&&(null==b?void 0:b.endCursor)&&(g(!0),v({variables:{after:null==b?void 0:b.endCursor}}).finally(()=>{g(!1)}))},[v,b]),k=(0,h.useMemo)(()=>{var e;return(null==j?void 0:null===(e=j.docGenerations)||void 0===e?void 0:e.edges.map(e=>e.node))||[]},[null==j?void 0:null===(t=j.docGenerations)||void 0===t?void 0:t.edges]);return(0,i.jsxs)(r.g,{align:"stretch",spacing:[2,3],children:[(0,i.jsx)(s.X,{fontSize:["lg","2xl"],mb:[2,3],textAlign:"center",fontWeight:"600",color:"gray.800",fontFamily:"p22-mackinac-pro",children:C?(0,i.jsx)(o.M,{children:(0,i.jsx)(l.O,{w:"50%",h:6})}):0===k.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(u.cC,{id:"yvKMb+"})}),(0,i.jsx)(r.g,{spacing:3,align:"stretch",children:C?(0,i.jsx)(D,{count:5}):(null==k?void 0:k.length)===0?(0,i.jsx)(i.Fragment,{}):k.map(e=>(0,i.jsx)(L,{docGeneration:e},e.id))}),f&&(0,i.jsx)(D,{count:5}),(null==b?void 0:b.hasNextPage)&&(0,i.jsx)(a.z,{leftIcon:(0,i.jsx)(d.G,{icon:c.r8p}),variant:"plain",boxShadow:"none",_hover:{bg:"white"},onClick:()=>y(),isLoading:f,children:(0,i.jsx)(u.cC,{id:"yQ2kGp"})})]})});G.displayName="RecentPrompts"},29944:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});let i="ppt-import"},62225:function(e,t,n){"use strict";n.d(t,{C:function(){return j}});var i=n(52322),r=n(29117),s=n(5740),o=n(77533),l=n(28535),a=n(43297),c=n(74409),d=n(20437),u=n(74008),h=n(62614),x=n(42946),p=n(54933),m=n(49929),f=n(5879);n(2784);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.U,{children:[n.map((e,t)=>(0,i.jsx)(s.T,{padding:1,children:e},t)),(0,i.jsx)(o.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.xu,{children:(0,i.jsxs)(a.K,{spacing:6,children:[(0,i.jsxs)(a.K,{spacing:1,children:[(0,i.jsxs)(r.U,{color:"gray.500",children:[(0,i.jsx)(m.G,{icon:x.UFh})," ",(0,i.jsx)(c.X,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.cC,{id:"h7MgpO"})})]}),(0,i.jsx)(c.X,{size:"md",children:(0,i.jsx)(f.cC,{id:"UodEcE"})})]}),(0,i.jsxs)(d.M,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.acZ},"left"),(0,i.jsx)(m.G,{icon:p.eFW},"right")]}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.i,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.FPD},"up"),(0,i.jsx)(m.G,{icon:p.r5q},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,i.jsx)(h.z,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.cC,{id:"76gPWk"})})]})},"coach-bar")}},56500:function(e,t,n){"use strict";n.d(t,{z:function(){return j}});var i=n(52322),r=n(38035),s=n(87254),o=n(2784),l=n(83693),a=n(71383),c=n(302),d=n(72611),u=n(68539),h=n(21298),x=n(32690);let p={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"left !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},m={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...p,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...x.FC}},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...x.FC},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},g=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...m,...h.dE,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?f:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},j=(0,o.memo)(e=>{let{isEditable:t,notesSx:n,canShowEditHint:h=!1,isDark:x=!1}=e,[p,m]=(0,o.useState)(null),{destroyEditor:f,mountEditor:j}=(0,a.CG)(l.Vy),v=(0,o.useRef)(!1);(0,o.useEffect)(()=>(j&&m(j()),()=>{null==f||f(),m(null)}),[f,j]),(0,o.useEffect)(()=>{p&&t&&!v.current&&(p.commands.focus("end"),v.current=!0)},[t,p]),(0,o.useEffect)(()=>{if(p){if(p.shouldUseLiteMenus=!0,t&&!p.isEditable){p.setEditable(!0);return}if(!t&&p.isEditable){p.setEditable(!1);return}}},[t,p]);let C=t?s.ag._({id:"fnNtuR"}):"Double click to edit",b=h&&p&&p.isEmpty,y=g({isDark:x});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.k,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:x?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...u.BI,content:'"'.concat(C,'"')},...y,...n,_before:b?{...u.BI,top:2,left:2,height:"auto",width:"auto",content:'"'.concat(s.ag._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.k,{flex:1,flexDirection:"column",children:p&&(0,i.jsx)(d.k,{editor:p,className:"highlight-mask",style:{height:"100%"}})})}),p&&(0,i.jsx)(c.uH,{editor:p,appendToSelector:"[data-card-notes-bubble-menu-target]"})]})});j.displayName="CardNotesEditor"},1737:function(e,t,n){"use strict";n.d(t,{nP:function(){return T},tE:function(){return E},vP:function(){return S}});var i=n(52322),r=n(77533),s=n(332),o=n(28535),l=n(74409),a=n(69251),c=n(30523),d=n(19783),u=n(32899),h=n(54933),x=n(49929),p=n(5879),m=n(87254),f=n(87202),g=n(2784),j=n(53650),v=n(62861),C=n(71383),b=n(13675),y=n(65342),k=n(62344);let w=(0,f.ZP)("mod+Escape"),S=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),E=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,b._)(),{editCardInPresentMode:r}=(0,y.l)({editor:i}),s=(0,C.CG)(v.C),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,k._)();return(0,g.useEffect)(function(){if(t)return j.F7.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;switch(S.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault()),e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(w(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},I=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},A={ArrowUp:{icon:h.FPD,label:(0,i.jsx)(p.cC,{id:"VbggDE"}),ariaLabel:()=>m.ag._({id:"VbggDE"}),shortcuts:["↑","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:h.acZ,label:(0,i.jsx)(p.cC,{id:"4jciC3"}),ariaLabel:()=>m.ag._({id:"4jciC3"}),shortcuts:["←","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:h.r5q,label:(0,i.jsx)(p.cC,{id:"e3GOIZ"}),ariaLabel:()=>m.ag._({id:"e3GOIZ"}),shortcuts:["↓","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:h.eFW,label:(0,i.jsx)(p.cC,{id:"ZjQRVw"}),ariaLabel:()=>m.ag._({id:"ZjQRVw"}),shortcuts:["→","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:h.GTX,label:(0,i.jsx)(p.cC,{id:"Xon9jp"}),ariaLabel:()=>m.ag._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},_=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.x,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},T=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.h,{children:(0,i.jsxs)(o.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,i.jsx)(l.X,{children:(0,i.jsx)(p.cC,{id:"wja8aL"})}),(0,i.jsx)(a.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(A).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:a,shortcuts:h,key:p,onClick:m}=e;return(0,i.jsx)(c.P,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(d.u,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.x,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(_,{shortcuts:h})]}),children:(0,i.jsx)(u.h,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:t===p||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,i.jsx)(x.G,{icon:o})})})},p)})})]})})}},65342:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(2784),r=n(71383),s=n(78112);let o=e=>{let{editor:t}=e,n=(0,r.TL)(),o=(0,r.qr)();return{editCardInPresentMode:(0,i.useCallback)(()=>{(0,s.wc)(o.getState())&&(n((0,s.e)({isEditingInSlideView:!0})),n((0,s.Qx)({attached:!1})),n((0,s.kI)()),null==t||t.commands.turnOffSpotlight())},[t,n,o])}}},62344:function(e,t,n){"use strict";n.d(t,{_:function(){return m}});var i=n(2784),r=n(24759),s=n(71383),o=n(52659),l=n(31601),a=n(73281),c=n(27320),d=n(43911),u=n(20706),h=n(78112),x=n(13675);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.cC)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){if(!(i.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else if(!(i.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.R0.MAIN_PRESENT_VIEW,{editor:t}=(0,x._)(),n=(0,l.z$)(),{enabled:o}=(0,c.gZ)(t),m=(0,s.qr)();return{handlePresentNavigationEvent:(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:c="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.k8)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,d.Jg)(t,g)),C=Object.keys((0,h.X9)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.kI)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.Qx)({attached:!1})),!0}case"arrowRight":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_NEXT,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_PREV,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_DOWN,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_UP,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(C[0])return(0,r.p7)(),t.commands.spotlightCardById(C[0]),m.dispatch((0,h.Qx)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.Qx)({attached:!1})),null==n||n.track(l.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j;if(t.commands.expandOrCollapseExpandableNode(e?j:null))return!0;if(e){let e=t.state.doc.resolve(j).parent;if(e&&(0,u.AH)(e))return(0,u.xB)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]),spotlightingByBlock:o}}},55758:function(e,t,n){"use strict";n.d(t,{VN:function(){return p},rJ:function(){return h},us:function(){return x}});var i=n(27875),r=n.n(i),s=n(2784),o=n(30240),l=n(71383),a=n(54563),c=n(78112),d=n(87103);let u="disable-card-size-animations",h=()=>{let e=(0,o.ye)("autoZoomToFit"),t=(0,l.CG)(c.Kk);return(0,s.useEffect)(()=>{t||f()},[t]),null!=t?t:e},x=()=>{let e=(0,l.CG)(c.i2),t=(0,s.useRef)(),n=h(),i=!d.Pv&&!d.Qg&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),n&&setTimeout(()=>{document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.nY))},[e,i])},p=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let n=m(t,e,1);if(n<.9){let i=(1-n)/3;n=m(t,e,n+i)}(0,l.bh)().dispatch((0,c.Ic)({zoomLevel:n}))},m=(e,t,n)=>{e.style.setProperty("--zoom-level",n.toString());let i=e.scrollHeight,s=r()(n*t/i,d.QX?.5:.65,1);return e.style.setProperty("--zoom-level",s.toString()),s},f=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},58847:function(e,t,n){"use strict";n.d(t,{o:function(){return x}});var i=n(21805),r=n(2784),s=n(95405),o=n(8940),l=n(30240),a=n(71383),c=n(91076),d=n(77555),u=n(85048),h=n(32140);let x=e=>{let t=(0,a.CG)(h.yx),n=(0,r.useMemo)(()=>!!i.Z.get(d.ir),[]),x=(0,c.we)(),p=(0,a.TL)(),m=(0,a.CG)(h.fh),f=(0,l.ye)("docEditorForcePublicStatic"),g=window!==window.top,j=(0,r.useMemo)(()=>{var e,i;if(g)return!1;let r=new URLSearchParams(window.location.search);if(r.get("following_id")&&r.get("follow_on_start"))return!0;if(!t)return n;let l=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.v.SHARE_TOKEN))||void 0===e?void 0:e.permission;return l&&[o.y3$.Edit,o.y3$.Comment].includes(l)||x.can(o.y3$.Comment,t)||x.can(o.y3$.Edit,t)||x.can(o.y3$.Manage,t)},[x,t,n,g]);(0,r.useEffect)(()=>{let t=f?u.Z.PUBLIC_STATIC:e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);p((0,h.R8)({docEditorType:t}))},[p,e,f,j]);let v=e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);return m||v}},61002:function(e,t,n){"use strict";n.d(t,{dM:function(){return ph},Ur:function(){return x6},nz:function(){return pk},_i:function(){return tw._i}});var i,r,s,o,l,a=n(52322),c=n(38035),d=n(77533),u=n(28535),h=n(73200),x=n(42946),p=n(49929),m=n(5879),f=n(87254),g=n(97729),j=n.n(g),v=n(2784),C=n(43997),b=n(29201),y=n(1547),k=n(16618),w=n(83404),S=n(89072),E=n(62311),I=n(55478),A=n(43679),_=n(34071),T=n(32899),O=n(39429),D=n(48394),R=n(30733),P=n.n(R),L=n(12436),z=n.n(L),G=n(8848);class N extends G.v{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=z()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let M=P()(()=>new N),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=M(),[i,r]=(0,v.useState)(!1),s=(0,v.useRef)(t);return(0,v.useEffect)(()=>{s.current=t},[t]),(0,v.useEffect)(()=>n.on("move",t=>{s.current||r(e(t))}),[n,e]),i};var F=n(71383),W=n(78112),H=n(32817),q=n(18960),B=n(54913),V=n(51581),K=n(62225);let Z=(0,v.memo)(()=>{let{isOpen:e,onToggle:t,onClose:n}=(0,I.q)(),[i,r]=(0,H.I)(q.H.hasSeenCoachBar,!1),s=(0,F.CG)(W.Tf),o=(0,v.useCallback)(()=>{i||r(!0),n()},[i,n,r]),l=!i||e,c=U((0,v.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,a.jsx)(V.H,{mr:s&&i&&!l&&!c?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,a.jsxs)(A.J,{returnFocusOnClose:!1,isOpen:l,onClose:o,closeOnBlur:!0,children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(T.h,{onClick:()=>{e&&r(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,a.jsx)(p.G,{icon:x.UFh})})}),(0,a.jsx)(O.y,{...B.Ro,children:(0,a.jsx)(D.b,{children:(0,a.jsx)(K.C,{onClose:o})})})]})})});Z.displayName="PresentModeHelpWidget";var Y=n(23691),J=n(10617),X=n(3454),Q=n(66915),$=n(16810);let ee=()=>(0,F.CG)((0,$.CO)("left")),et=()=>(0,F.CG)((0,$.CO)("right")),en=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,i=(0,C.I0)(),r=(0,F.CG)((0,$.OC)(e)),s=(0,v.useCallback)(()=>{i((0,$.uJ)({component:e}))},[e,i]);return(0,X.v)(()=>{!t&&r&&i((0,$.sR)({position:n}))},[r,i,t,n],[t]),{togglePanel:(0,v.useCallback)(s=>{if(!t)return;let o=!r;(null==s?void 0:s.override)==="open"?o=!0:(null==s?void 0:s.override)==="closed"&&(o=!1),o?i((0,$.Yp)({component:e,disableTransition:!!(null==s?void 0:s.disableTransition)})):i((0,$.sR)({position:n}))},[e,n,r,i,t]),initPanel:s,isPanelOpen:r}},ei=()=>{let e=(0,v.useMemo)(()=>new Q.st,[]),t=(0,v.useMemo)(()=>new Q.st,[]),n=(0,v.useMemo)(()=>new Q.st,[]);return(0,v.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),r=t.pipe(n);return()=>{i(),r()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}};var er=n(48929),es=n(36533),eo=n(70965),el=n(55963);let ea=(e,t,n)=>Math.min(Math.max(e,t),n),ec=e=>{let{setWidth:t,width:n,position:i,onClose:r,panelRef:s,initialWidth:o,isDragging:l,setIsDragging:d}=e,h=(0,v.useMemo)(()=>(0,el.n)(),[])>0&&"right"===i,[x,p]=(0,v.useState)(n),[m,f]=(0,v.useState)(null),g=z()(e=>{let t;let n=ea(t="left"===i?e.clientX:-((e.clientX-m)*1)+x,es.pn,es.ZQ);t<=es.Nh?(s.current.style.transitionProperty="width",s.current.style.transitionDuration="var(--chakra-transition-duration-normal)",n=0):n>es.pn&&(s.current.style.transitionProperty="",s.current.style.transitionDuration=""),s.current.style.width="".concat(n,"px")},30),j=()=>{d(!1),f(null);let e=s.current.style.width;"0px"===e?(r(),t(o)):t(parseInt(e.replace("px",""),10)),s.current.style.transitionProperty="",s.current.style.transitionDuration="",window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",j)};(0,v.useEffect)(()=>(m&&(window.addEventListener("mousemove",g),window.addEventListener("mouseup",j)),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",j)}),[m]);let C={};return C="left"===i?{right:-4,position:"absolute"}:h?{position:"relative"}:{left:-4,position:"absolute"},(0,a.jsx)(c.k,{h:"100%",bg:h?"gray.200":l?"blackAlpha.200":"rgba(0,0,0,0)",w:h?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:h?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:e=>{e.preventDefault(),d(!0),f(e.clientX),p(n)},position:"absolute",display:["none","none","none","flex"],...C,children:!h&&(0,a.jsx)(u.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:l?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})})},ed=function(e,t){return{base:t,xl:e}},eu=e=>{var t;let{position:n,panelLifecycle:i}=e,r=(0,v.useRef)(),[s,o]=(0,v.useState)(!1),l=(0,C.I0)(),d=(0,F.CG)((0,$.SL)(n)),u=(0,F.CG)((0,$.Fw)(n)),h=(0,F.CG)((0,$.CO)(n)),x=(0,F.CG)((0,$.eh)(n)),p=null!==(t=null==x?void 0:x.canCollapse)&&void 0!==t&&t,m=(0,v.useCallback)(()=>{l((0,$.sR)({position:n}))},[l,n]),f=(0,v.useCallback)(()=>{l((0,$.Yp)({component:x}))},[x,l]),g=(0,v.useCallback)(e=>{l((0,$.UG)({width:e,position:n})),i.emit("resize",{})},[l,i,n]),j={zIndex:Number((0,er.dQ)("zIndices","overlay"))+1,position:ed("relative","fixed"),top:ed(0,"var(--editor-padding-top)"),bottom:0,[n]:0};u||s||(j.transitionProperty="width",j.transitionDuration="normal"),(0,v.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return r.current.addEventListener("transitionend",e),()=>{r.current&&r.current.removeEventListener("transitionend",e)}},[i,r]);let b=(0,eo.iq)(ed(!0,!1))||!1;return(0,v.useEffect)(()=>{d&&!b&&p&&m()},[b,d,m,p]),(0,a.jsxs)(c.k,{ref:r,...j,style:{width:d||p?h:0},maxW:"100%","data-print-hidden":!0,children:[d&&"right"===n&&(0,a.jsx)(ec,{isDragging:s,setIsDragging:o,position:n,width:h,setWidth:g,panelRef:r,onClose:m,initialWidth:es.Ld}),(0,a.jsx)(Q.Mn.Provider,{value:i,children:x&&(d||p)&&(0,a.jsx)(x,{isDragging:s,isOpen:d,closePanel:m,openPanel:f,panelRef:r,lifecycle:i,hasRoomToOpen:b})}),d&&"left"===n&&(0,a.jsx)(ec,{isDragging:s,setIsDragging:o,position:n,width:h,setWidth:g,panelRef:r,onClose:m,initialWidth:es.X9})]})},eh=(0,v.memo)(e=>(0,a.jsx)(eu,{position:"right",...e}));eh.displayName="RightPanelContainer";let ex=(0,v.memo)(e=>(0,a.jsx)(eu,{position:"left",...e}));ex.displayName="LeftPanelContainer";var ep=n(50019),em=n(29117),ef=n(62614),eg=n(75768),ej=n(64253),ev=n(5632),eC=n(53650),eb=n(92035),ey=n(33279),ek=n(76599);let ew=e=>{let{docId:t}=e,n=(0,F.TL)(),i=(0,ep.ff)("gray.300","gray.800"),r=(0,ep.ff)("white","gray.900"),s=(0,ep.ff)("transparent","transparent"),o=(0,ep.ff)("gray.500","gray.400"),l=(0,ep.ff)("trueblue.50","trueblue.400"),d=(0,ep.ff)("trueblue.500","white"),h=(0,ep.ff)("gray.600","gray.100"),g=(0,ep.ff)("gray.100","gray.700"),j=(0,ep.ff)("trueblue.50","trueblue.400"),C=(0,ep.ff)("trueblue.500","white"),{replace:b}=(0,ev.useRouter)(),y=(0,F.CG)(ek.tv),k=(0,v.useCallback)(()=>{t&&b((0,ey.yQ)({docId:t}),void 0,{shallow:!0})},[t,b]),w=(0,v.useCallback)(e=>{n((0,ek.Tj)({previewSize:e}))},[n]);return(0,v.useEffect)(()=>eC.F7.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&k(),!0)),[k]),(0,a.jsx)(c.k,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,a.jsxs)(em.U,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,a.jsx)(em.U,{spacing:2,flexBasis:"30%",children:!(0,eb.s2)()&&(0,a.jsx)(ef.z,{size:"sm",variant:"plain",onClick:k,children:(0,a.jsx)(em.U,{children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.acZ})})})})}),(0,a.jsxs)(eg.h,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"58m6Qy"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.Z__}),bg:"mobile"===y?l:s,_hover:{color:"mobile"===y?C:h,bg:"mobile"===y?j:g},color:"mobile"===y?d:o,onClick:()=>{w("mobile")}})}),!(0,eb.s2)()&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"fpcKeD"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.ep5}),bg:"tablet"===y?l:s,_hover:{color:"tablet"===y?C:h,bg:"tablet"===y?j:g},color:"tablet"===y?d:o,onClick:()=>{w("tablet")}})}),!(0,eb.s2)()&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"K3p0ar"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.tc$}),bg:"desktop"===y?l:s,_hover:{color:"desktop"===y?C:h,bg:"desktop"===y?j:g},color:"desktop"===y?d:o,onClick:()=>{w("desktop")}})})]}),(0,a.jsx)(em.U,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var eS=n(71184),eE=n(54073),eI=n.n(eE),eA=n(27287),e_=n(80180);let eT=(e,t)=>{let n=(0,F.TL)(),i=(0,F.qr)(),r=!!(0,F.CG)(eA.$U),s=(0,F.CG)(W.wc),o=(0,F.CG)(eA.B$),l=t&&r&&s;(0,v.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,W.yx)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let c=!(0,e_.G0)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:c}),c&&n((0,eA.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,v.useEffect)(()=>{if(!l||!e)return;let t=eI()(()=>{n((0,eA.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var eO=n(41742),eD=n(15222),eR=n(65158),eP=n(92476),eL=n(65068),ez=n(43826),eG=n(3874),eN=n(31601),eM=n(73346),eU=n(37243),eF=n(84636),eW=n.n(eF),eH=n(52659),eq=n(54317),eB=n(28817),eV=n(33945);let eK=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},eZ=(e,t)=>{let n=(0,eH.As)("editor"),[i,r]=(0,v.useState)(null),s=(0,v.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,F.CG)(W.gh),l=(0,F.CG)(W.i2);(0,v.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,F.CG)(W.Q5);(0,v.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,v.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let{height:t}=e.getBoundingClientRect();s.current.scrollTop=e.scrollTop,s.current.containerHeight=t},[n.scrollSelector,s]),(0,v.useEffect)(()=>{let e=eI()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,v.useEffect)(()=>{let e=eI()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,v.useEffect)(()=>{if(!e)return;if(o===eV.q.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;eW()((0,eU.N2)(e.state.doc,eq.KH),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,eB.LY)(r,n.scrollSelector),{offsetHeight:t}=r;return{id:s,...eK(i,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},eY=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,eN.z$)(),[r,s]=(0,v.useState)(15e3);eZ(t,eM.f);let o=(0,v.useCallback)(()=>{eM.f.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,v.useEffect)(()=>{if(!i)return;eM.f.initialize(),eM.f.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(eN.AA.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),eM.f.destroy()}},[i,r,o]),null};var eJ=n(97134),eX=n(29342),eQ=n(83693),e$=n(30240),e0=n(13675),e1=n(81672),e2=n(17993),e5=n(36474),e3=n(54933),e4=n(21829),e6=n(61836),e8=n(86743),e9=n(49206),e7=n(56500),te=n(18149),tt=n.n(te),tn=n(44598),ti=n(43988);let tr=e=>{let t=(0,F.CG)(eQ.AD),{title:n}=(0,tn.T)({cardId:t||void 0}),i=(0,F.CG)(W.pN,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return tt()(...t)}),r=i.indexOf(t||""),s=(0,v.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,eq.Bw)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,ti.vS)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,eH.cC)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var ts=n(86745),to=n(54563);let tl=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,ts.t)(t),r=(0,F.TL)(),s=(0,e$.ye)("cardNotes");(0,v.useEffect)(()=>{if(!t||!s)return;let e=(0,to.AQ)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,ti.Qp)(e.node)){if(n){r((0,eQ.NK)());return}(0,ti.Fi)(t,e.pos)}},[s,r,t,n,i])};var ta=n(90025),tc=n(69964),td=n(41019),tu=n(25556),th=n(13090),tx=n(81363),tp=n(22982),tm=n(84663),tf=n(55898),tg=n(40382);let tj=e=>{let{editor:t,cardId:n}=e,i=(0,F.CG)(W.Wl),r=(0,F.CG)(W.hN),s=(0,e$.ye)("aiCardNotes"),o=(0,v.useCallback)(e=>{if(!t||!n)return;let i=(0,eq.Bw)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,ti.cM)(r);if(!s)return;let o=(0,tf.aT)(e,t.schema),{tr:l}=t.state,a=s.pos+1,c=a+s.node.content.size;l.delete(a,c).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,tg.Z_)(o,200),[a,c]=(0,v.useState)(!1),{generate:d}=(0,tc.jz)("GenerateSpeakerNotes",{onStart(){c(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),c(!1)},timeout:3e4}),u=(0,F.qr)(),h=(0,v.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,eq.Bw)(t,n);if(!e)return;let r=(0,ta.c)(t,e.node),s=(0,td.nZ)(),o=(0,tm.vR)(t,e.pos),l=(0,tp.D)(u);await d({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,th.d)("generateCardNotes",i,s)},[d,i,t,n,u]);return{onClickGenerate:(0,tu.YO)(h,"generateCardNotes",tx.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:s&&r}},tv=e=>{let{closePanel:t}=e,{editor:n}=(0,tw._i)(),i=(0,F.CG)(W.hN),{cardId:r,canGoBack:s,canGoForward:o,title:l,goToNextCard:u,goToPreviousCard:h}=tr(n),g=(0,F.TL)();tl({editor:n,isReadonly:!i}),(0,v.useEffect)(()=>e6.F7.on("keydown","CARD_NOTES_PANEL",e=>{let n=document.activeElement;return!!(n instanceof HTMLElement&&n.closest('[data-panelid="card-notes-panel"]'))&&"Escape"===e.key&&(t(),!0)}),[t,g]);let j=(0,eD.Yy)(),C=j?"gray.900":"white",b=j?"white":"gray.900",y=j?"gray.300":"gray.500",{onClickGenerate:k,isGenerating:w,canGenerateCardNotes:S}=tj({editor:n,cardId:r});return(0,a.jsx)(ej.Wk,{isDark:j,children:(0,a.jsx)(e8.s,{bgColor:C,"data-panelid":"card-notes-panel",color:b,children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",flex:1,children:[(0,a.jsx)(e1.P,{"data-card-notes-close-button":!0,position:"absolute",top:2,right:3,onClick:t}),(0,a.jsxs)(em.U,{px:6,py:4,spacing:4,children:[(0,a.jsx)(e9.V,{children:(0,a.jsx)(m.cC,{id:"1DBGsz"})}),i&&(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"qcPeK2"})})]}),(0,a.jsxs)(e2.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,a.jsxs)(em.U,{align:"end",children:[(0,a.jsx)(d.x,{fontWeight:"600",color:y,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:l}),(0,a.jsx)(e5.L,{}),S&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(em.U,{spacing:0,children:[(0,a.jsx)(m.cC,{id:"GyxUS3"}),(0,a.jsx)(e4.J,{type:"generateCardNotes"})]}),placement:"top",children:(0,a.jsx)(ef.z,{variant:"ghost",onClick:k,isLoading:w,size:"sm","aria-label":f.ag._({id:"ziAjHi"}),rightIcon:(0,a.jsx)(p.G,{icon:e3.JyM}),flexShrink:0,children:(0,a.jsx)(m.cC,{id:"ziAjHi"})})})]}),(0,a.jsx)(e7.z,{isEditable:i,isDark:j}),i&&(0,a.jsxs)(em.U,{children:[(0,a.jsx)(ej.kH,{label:s?(0,a.jsx)(m.cC,{id:"cbqngJ"}):(0,a.jsx)(m.cC,{id:"4OtlnH"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(T.h,{"aria-label":s?f.ag._({id:"cbqngJ"}):f.ag._({id:"4OtlnH"}),icon:(0,a.jsx)(p.G,{icon:x.acZ}),onClick:h,isDisabled:!s,flex:1})})}),(0,a.jsx)(ej.kH,{label:o?(0,a.jsx)(m.cC,{id:"EyUKqu"}):(0,a.jsx)(m.cC,{id:"ggpGEd"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(T.h,{"aria-label":o?f.ag._({id:"EyUKqu"}):f.ag._({id:"ggpGEd"}),icon:(0,a.jsx)(p.G,{icon:x.eFW}),onClick:u,isDisabled:!o,flex:1})})})]})]})]})})})};tv.panelPosition="right",tv.panelName="card-notes";let tC=()=>{let{togglePanel:e,isPanelOpen:t}=en(tv),{editor:n}=(0,e0._)(),i=(0,F.TL)(),r=(0,e$.ye)("cardNotes"),s=(0,F.CG)(W.gh)===eV.q.SLIDE_VIEW;(0,v.useEffect)(()=>{t&&(!r||s)&&e()},[r,t,e,s]),(0,v.useEffect)(()=>{!t&&n&&(i((0,eQ.mK)({isOpen:!1})),n.view.dispatch(n.state.tr))},[i,n,t,e]),(0,v.useEffect)(()=>{if(r&&n)return eX.T.on("toggle",r=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=r;t&&o!==l||(e(s),i((0,eQ.mK)({isOpen:!t})),n.view.dispatch(n.state.tr))})},[i,n,r,t,e])},tb="drag-in-progress",ty=()=>{(0,v.useEffect)(()=>{let e=()=>{document.body.classList.add(tb)},t=()=>{document.body.classList.remove(tb)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var tk=n(85048),tw=n(54349),tS=n(42822),tE=n(43297),tI=n(81540),tA=n(8142),t_=n(27821),tT=n(20435),tO=n(88670),tD=n(85064),tR=n(16882),tP=n(66295),tL=n(69465),tz=n(72658);let tG=e=>"tablet"===e?"768px":"mobile"===e?(0,eb.s2)()?"100vw":"375px":"100vw",tN=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:s}=n;return(0,a.jsxs)(tA.BU,{children:[(0,a.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:tz.W.toString()}}),(0,a.jsx)(t_.cL,{children:(0,a.jsx)(c.k,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,a.jsx)(tM,{...n,editor:i,docId:r}):(0,a.jsx)(u.xu,{flexDirection:"column",w:tG(s),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,a.jsx)(tS.M,{h:"100%",children:(0,a.jsx)(tE.K,{align:"center",children:(0,a.jsx)(tI.$,{})})})})})})]})},tM=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,s=(0,v.useMemo)(()=>(0,tT.e)().concat(tO.F),[]),o=(0,v.useMemo)(()=>n.getJSON(),[n]),l="mobile"===i?"mobile":"desktop",d=(0,tR.j)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:o,extensions:s,editable:!1});d.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:p}=(0,eP.k)({editor:d,instanceId:l,scrollingParentSelector:".".concat(tk.B)}),m=(0,F.CG)(eA.lH),f=(0,F.CG)(W.Pu),g=(0,tL.nT)(m),j=g?ez.ZQ:0,C=tG(i);return(0,a.jsxs)(u.xu,{className:(0,h.cx)("preview-editor-root",x),style:p,w:C,h:"100%",css:{"--editor-width":C,"--doc-padding-top":"".concat(j,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[m&&g&&(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,a.jsx)(tD.n,{theme:f,editable:!1,content:m.navContent},"".concat(t,"__preview-editor-nav__").concat(l,"}"))}),(0,a.jsx)(tP.f,{editor:d},"".concat(t,"__preview-editor__").concat(l,"}"))]})};var tU=n(32140),tF=n(69971),tW=n(53078);let tH=()=>{let e=(0,F.CG)(eA.lH),t=(0,F.CG)(W.Pu),n=(0,F.qr)(),[i]=(0,tF.Iyu)(),r=(0,v.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,eA.lH)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),s=(0,tg.Kt)(r,500);return e?(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:tW.S.siteNav,children:(0,a.jsx)(tD.n,{theme:t,onUpdate:s,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(tk.B)})}):null};var tq=n(78321),tB=n(32981),tV=n(26468),tK=n(73751),tZ=n(2338),tY=n(97217),tJ=n(50250),tX=n(58125),tQ=n(30764),t$=n(93689),t0=n(85336),t1=n(15998),t2=n(25762),t5=n(40802),t3=n(5968),t4=n(23764),t6=n(74216);let t8=v.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function t9(){return(0,v.useContext)(t8)}let t7=e=>{let{children:t}=e,n=(0,v.useRef)(new Map),i=(0,v.useRef)(""),r=(0,v.useRef)((e,t)=>{n.current.set(e,t)}),s=(0,v.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),o=(0,v.useCallback)(e=>{i.current=e},[]);return(0,a.jsx)(t8.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:s.current,userMessage:i.current,setUserMessage:o},children:t})};var ne=n(68785),nt=n(67308),nn=n(56581),ni=n(27917);let nr=e=>{let{cardId:t,onClick:n}=e,i=(0,F.CG)((0,ne.l_)(t)),r=(0,F.CG)(W.Pu);return i?(0,a.jsxs)(tE.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:s,card:o,id:l}=e;return(0,a.jsx)(ns,{theme:r,isSelected:i.selected===l,label:s,card:o,onClick:()=>{n({cardId:t,variationId:l})}},l)}),i.variants.length<2&&(0,a.jsx)(tS.M,{children:(0,a.jsx)(tI.$,{})})]}):null},ns=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:s=()=>{}}=e,o=(0,v.useMemo)(()=>(0,ni.vL)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]);return(0,a.jsxs)(tE.K,{align:"start",children:[(0,a.jsx)(c.k,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:s,children:(0,a.jsx)(c.k,{sx:t3.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,a.jsx)(t3.m,{content:o,theme:i,isThumbnail:!0})})}),(0,a.jsxs)(d.x,{fontSize:"sm",children:[r&&(0,a.jsx)(nn.n,{boxSize:3,mr:2}),t]})]})},no="ai-wizard-editor-root",nl=e=>{let{doc:t,cards:n,theme:i=(0,t1.y)()}=e,r=(0,t6.R5)(i),s=(0,t2.wj)(i),o=(0,t6.wh)(r,s),l=(0,F.TL)(),{registerEditor:d}=t9();return((0,v.useEffect)(()=>()=>{l((0,ne.mc)())},[l]),t)?(0,a.jsxs)(c.k,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:no,...o,children:[(0,a.jsx)(t4.Y,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,a.jsx)(na,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{d(r,e)}},r):null})]}):null},na=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:s}=e,o=(0,F.TL)(),[l,d]=(0,v.useState)(null),{userMessage:u}=t9(),h=(0,nt.b)({editor:l});(0,v.useEffect)(()=>{l&&h({doc:l.state.doc,cardId:t,message:u})},[h,l,t,n,u]);let x=(0,v.useMemo)(()=>(0,t5.vL)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]),p=(0,F.CG)((0,ne.a4)(t));(0,tg.vm)(()=>{if(!l||!p)return;let e=(0,eq.Bw)(l,t);e&&l.commands.command(t=>{let{tr:n}=t,i=tQ.NB.fromJSON(l.schema,p.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[l,p,t],[p]);let m=(0,v.useCallback)(e=>{let{cardId:n,variationId:i}=e;l&&n===t&&o((0,ne.dx)({cardId:t,variantId:i}))},[o,l,t]);return(null==r?void 0:r.id)?(0,a.jsxs)(c.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:t3.n,my:-8,children:[(0,a.jsx)(nr,{cardId:t,onClick:m}),(0,a.jsx)(tT.y,{initialContent:x,onCreate:e=>{let{editor:t}=e;d(t),s(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(no),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var nc=n(27238);let nd=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,nc.M)({id:"cardSuggestionDrawer"}),r=(0,F.CG)(W.Pu),[s]=(0,v.useState)(()=>(0,tX.xC)({reducer:F.Ct}));return(0,a.jsx)(C.zt,{store:s,children:(0,a.jsx)(nu,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},nu=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:s,onOpen:o}=e,[l,c]=(0,v.useState)([]),[d,u]=(0,v.useState)(null),{getAllCards:h,setUserMessage:x}=t9(),p=(0,v.useCallback)(()=>{s(),c([]),u(null)},[s]),f=(0,v.useCallback)(()=>{if(p(),!n)return;let e={type:"document",content:h()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,eq.Bw)(n,d);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===d});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,tQ.NB.fromJSON(n.schema,e)),!0})},[p,n,d,h]),g=(0,v.useCallback)(async(e,t,n)=>{o(),u(t),c(e.toJSON().content[0].content.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),x(n)},[o,x]);return(0,v.useEffect)(()=>{if(n)return t0.T.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;g(n.view.state.doc,t,i)})},[n,g]),(0,a.jsxs)(tB.d,{placement:"bottom",onClose:s,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(tK.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tZ.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,a.jsx)(tY.f,{p:0,h:"100%",children:l.length>0&&t?(0,a.jsx)(nl,{doc:t,cards:l,theme:i}):(0,a.jsx)(t$.AA,{})}),(0,a.jsx)(tJ.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,a.jsxs)(eg.h,{spacing:4,children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:s,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:f,children:(0,a.jsx)(m.cC,{id:"7VpPHA"})})]})})]})]})},(0,v.memo)(e=>(0,a.jsx)(t7,{children:(0,a.jsx)(i,{...e})})));var nh=n(65702),nx=n(75009),np=n(74409),nm=n(77574),nf=n(45075),ng=n(6717),nj={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},nv=n(63416),nC=n(83906),nb=n(10625),ny=n(67046),nk=n(99058),nw=n(44035),nS=n(39237),nE=n(82108),nI=n.n(nE);let nA=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e,s=i===tF.Ux9.Open?f.ag._({id:"Kz1TxG"}):f.ag._({id:"kywJax"});return(0,a.jsxs)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,a.jsx)(e9.V,{children:(0,a.jsx)(m.cC,{id:"eiUA4k",values:{count:t}})}),(0,a.jsxs)(nb.v,{closeOnSelect:!0,children:[(0,a.jsx)(ny.j,{as:ef.z,size:"sm",rightIcon:(0,a.jsx)(nC.v,{}),mr:8,children:nI()(s)}),(0,a.jsx)(nk.q,{zIndex:3,children:(0,a.jsxs)(nw._,{defaultValue:i,title:f.ag._({id:"0cVgUw"}),type:"radio",children:[(0,a.jsx)(nS.i,{onClick:()=>r(tF.Ux9.Open),value:"open",children:(0,a.jsx)(m.cC,{id:"1TNIig"})}),(0,a.jsx)(nS.i,{onClick:()=>r(tF.Ux9.Closed),value:"closed",children:(0,a.jsx)(m.cC,{id:"D87pha"})})]})})]}),(0,a.jsx)(e1.P,{position:"absolute",top:2,right:2,onClick:n,"data-comment-feed-close-button":!0})]})};var n_=n(46625);let nT=e=>{let{user:t,editor:n}=e,[i,r]=(0,v.useState)(()=>{let e=(0,nf.W1)(n,n_.Et);return e&&e.length?e[0]:(0,nf.xN)(()=>n_.Et,n,"")});(0,v.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let s=(0,nf.iZ)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,nf.xN)(()=>n_.Et,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),o=(0,v.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,a.jsx)(nf.Ag,{draftComment:i,user:t,onCommentDraftUpdate:o,onCommentSave:s,commentIdToHighlight:null})},nO=()=>({today:f.ag._({id:"ecUA8p"}),thisWeek:f.ag._({id:"yByRxz"}),earlier:f.ag._({id:"HPqZkW"})}),nD=e=>{var t;let{onClose:n,editor:i}=e,r=(0,F.CG)(W.yx),{isConnected:s}=(0,y.$)(),[o,l]=(0,v.useState)(tF.Ux9.Open),h=null==r?void 0:r.comments,x=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===o),p=(0,F.CG)(W.gh),f=(0,eJ.py)("comment",r)&&s,{user:g}=(0,eJ.SE)(),j=(0,k.$m)(r,g),C=(0,v.useMemo)(()=>(0,nv.yd)({items:x||[],sortBy:nv.Yz,latestTimeGetterFn:nv.z3}),[x]);return h&&r&&i?(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowX:"hidden",className:ng.G,w:"100%",children:[(0,a.jsx)(nA,{commentStatusFilter:o,setCommentStatusFilter:l,count:(null==x?void 0:x.length)||0,onClose:n}),(0,a.jsxs)(c.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,a.jsx)(nm.V,{description:(0,a.jsx)(m.cC,{id:"pQvCbR"}),isConnected:s,mx:6}),j&&!g&&r&&(0,a.jsx)(nf.IZ,{doc:r,accessLink:j}),f&&(0,a.jsx)(u.xu,{px:6,py:2,children:(0,a.jsx)(nT,{user:g,editor:i})}),!(null==x?void 0:x.length)&&(0,a.jsxs)(e2.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,a.jsx)(u.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,a.jsx)(nx.E,{src:nj.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(np.X,{size:"xs",mb:2,children:"open"===o?(0,a.jsx)(m.cC,{id:"W7i5f5"}):(0,a.jsx)(m.cC,{id:"mpDN1V"})}),(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"iB9OEi"})})]})]}),Object.entries(C).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,s]=e;return(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(ej.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:nO()[t]}),(0,a.jsx)(c.k,{direction:"column",children:s.map(e=>(0,a.jsx)(nf.q5,{instanceType:"feed",userCanComment:f,editor:i,comment:e,selfUser:g,docId:null==r?void 0:r.id,editorMode:p,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},nR=e=>{let{closePanel:t}=e,{editor:n}=(0,e0._)();return(0,v.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return nh.pw.on(nh.TI.POPUP_COMMENT_TOGGLED,e),()=>{nh.pw.on(nh.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,v.useEffect)(()=>eC.F7.on("keydown","COMMENT_FEED_PANEL",e=>!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&t(),!0)),[t]),(0,a.jsx)(e8.s,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,a.jsx)(nD,{onClose:t,editor:n})})};nR.panelPosition="right",nR.panelName="comment-feed";let nP=()=>{let{togglePanel:e,isPanelOpen:t}=en(nR);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var nL=n(87202),nz=n(43901),nG=n(39097),nN=n.n(nG),nM=n(62204),nU=n(23186),nF=n(91076);let nW=()=>{var e,t;let n=(0,F.CG)(W.yx),{user:i}=(0,nF.SE)(),r=(0,nF.py)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,ey.Xn)(s)};var nH=n(47443),nq=n(80877),nB=n(74444),nV=n(17689);let nK=e=>{let{onClose:t}=e;return(0,a.jsxs)(tE.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,a.jsx)(nx.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,a.jsx)(nV.K,{children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"jVQv+Q"})})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.g82}),onClick:t,children:(0,a.jsx)(m.cC,{id:"pqZJT2"})})]})},nZ=()=>(0,a.jsxs)(nH.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,a.jsx)(nq.C,{children:(0,a.jsx)(m.cC,{id:"rvbk/4"})}),(0,a.jsx)(nB.X,{children:(0,a.jsx)(m.cC,{id:"XNkIFY"})})]});var nY=n(74105),nJ=n(29494),nX=n(27191),nQ=n(38799);let n$="40px",n0=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:s,resetMessages:o}=e;(0,nQ.F1)(s);let{selection:l,doc:c}=s.state,u=c.textBetween(l.from,l.to,"\n"),h=(0,J.Y)("unlimited_credits"),x=(0,v.useRef)(null),[g,j]=(0,v.useState)(!1),C=l instanceof nX.qv,b=l instanceof nX.Bs,y=C&&"card"===l.node.type.name,k=l.empty||y?f.ag._({id:"XrfE9D"}):C?f.ag._({id:"CsUli9"}):b&&u?f.ag._({id:"+NPPZN",values:{0:u.length>50?u.slice(0,50)+"...":u}}):f.ag._({id:"/fY1js"}),w=(0,v.useCallback)(()=>{x.current&&(x.current.style.height=n$,x.current.style.height="".concat(x.current.scrollHeight,"px"))},[]);return(0,v.useEffect)(()=>(s.on("selectionUpdate",w),()=>{s.off("selectionUpdate",w)}),[s,w]),(0,v.useEffect)(()=>{g?w():setTimeout(()=>{j(!0),w()},400)},[g,k,w,t]),(0,a.jsxs)(em.U,{align:"end",children:[(0,a.jsx)(nY.B,{size:"md",children:(0,a.jsx)(nJ.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:n$,minH:n$,ref:x,resize:"none",maxH:g?32:n$,bg:"white",shadow:"md",autoFocus:!0,placeholder:k,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),pr:12})}),(0,a.jsx)(ej.kH,{placement:"top",label:(0,a.jsxs)(e2.g,{spacing:0,children:[(0,a.jsx)(m.cC,{id:"4k2VbT"}),!h&&(0,a.jsx)(d.x,{color:"gray.400",children:(0,a.jsx)(m.cC,{id:"jxCfNz",components:{0:(0,a.jsx)(e4.J,{type:"chatSuggestion",ml:0})}})}),(0,a.jsx)(ej.f2,{shortcut:"Enter"})]}),children:(0,a.jsx)(T.h,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:n$,w:n$,variant:"solid",icon:(0,a.jsx)(p.G,{icon:e3.FzC,fixedWidth:!0}),onClick:i})})]})};var n1=n(52740),n2=n(98683),n5=n(73145);let n3=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,s]=(0,v.useState)(""),o=(0,e$.ye)("openAiStatus"),l=(0,F.TL)(),d=(0,eH.As)("editor"),u=(0,F.qr)(),h=(0,F.CG)(n2.AZ),f=(0,F.CG)(n2.Q_),[g,j]=(0,v.useState)(null),C=(0,v.useCallback)(()=>(0,n2.AZ)(u.getState()),[u]),b=(0,v.useCallback)(e=>{let t={timestamp:Date.now(),...e};l((0,n2.Hz)({message:t}))},[l]),y=(0,v.useCallback)(()=>{l((0,n2.mc)())},[l]),{status:k,sendMessage:w}=(0,n5.n)({addMessage:b,getMessageHistory:C,editor:t});(0,v.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,h]);let S="idle"!==k;(0,v.useEffect)(()=>{if(!f.length||S)return;let{task:e,id:t}=f[0];!1===e.submit?s(e.message):w({message:e.message}),l((0,n2.VB)({id:t}))},[S,w,l,f]);let E=(0,v.useCallback)(()=>{if(!g||!t)return;let e=document.querySelector('[data-card-id="'.concat(g,'"]')),n=(0,eH.v4)(e,100);null!=n&&n.yAxisInView||d.scrollElementIntoView({element:e})},[t,d,g]),I=(0,v.useCallback)(e=>{E(),w({message:e})},[E,w]),A=(0,v.useCallback)(()=>{I(r),s("")},[I,r]),_=(0,tu.YO)(A,"chatSuggestion",eN.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,v.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,nU.AQ)(t.state.doc,t.state.selection.from);e&&j(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let O=nW();return t?"DOWN"===o?(0,a.jsx)(nK,{onClose:i}):(0,a.jsxs)(c.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===o&&(0,a.jsx)(nZ,{}),(0,a.jsx)(n1.rN,{scrollSelector:n,messages:h,editor:t,sendMessage:I,isLoading:S,onClose:i}),(0,a.jsxs)(tE.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,a.jsx)(n0,{editor:t,value:r,onChange:s,onSubmit:_,isLoading:S,resetMessages:y}),(0,a.jsx)(nM.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:eN.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,a.jsxs)(eg.h,{position:"absolute",left:4,top:1,variant:"ghost",colorScheme:"blackAlpha",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5eg0kp"}),placement:"top",children:(0,a.jsx)(T.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,a.jsx)(p.G,{icon:x.YcH}),onClick:y,isRound:!0})}),O&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),placement:"top",children:(0,a.jsx)(T.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,a.jsx)(p.G,{icon:x.Fzb}),as:nN(),href:O,target:(0,eb.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null},n4=e=>{let{onClose:t}=e;return(0,a.jsx)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,a.jsx)(e1.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},n6="design-partner-panel-wrapper",n8=()=>{let{togglePanel:e,isPanelOpen:t}=en(n9),{editor:n}=(0,e0._)(),i=(0,e$.ye)("aiChat"),r=(0,F.TL)();(0,v.useEffect)(()=>()=>{r((0,n2.mc)())},[]);let s=(0,F.CG)(W.hN);return(0,v.useEffect)(()=>{!s&&t&&e()},[s,t,e]),(0,v.useEffect)(()=>{var e,i;n&&(null===(e=(i=n.commands).setSalOpen)||void 0===e||e.call(i,t))},[n,t]),(0,v.useEffect)(()=>{if(i)return nz.T.on("toggle",t=>{let{config:n}=t;e(n)})},[e,i]),(0,v.useEffect)(()=>{if(i)return nh.pw.on("queueDesignPartnerTask",t=>{r((0,n2.Lj)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[r,i,e]),(0,v.useEffect)(()=>{if(!i||!s)return;let t=(0,nL.ZP)("mod+shift+S");return eC.F7.on("keydown","DESIGN_PARTNER_PANEL",n=>!!t(n)&&(e(),!0))},[e,i,s]),{isDesignPartnerPanelOpen:t}},n9=e=>{let{closePanel:t}=e,{editor:n}=(0,e0._)();return(0,v.useEffect)(()=>eC.F7.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,a.jsx)(e8.s,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:n6,w:"100%",children:[(0,a.jsx)(n4,{onClose:t}),(0,a.jsx)(n3,{editor:n,scrollSelector:".".concat(n6),onClose:t})]})})};n9.panelPosition="right",n9.panelName="chat";let n7=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,a.jsxs)(c.k,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,a.jsxs)(e2.g,{flex:"1",align:"start",spacing:0,children:[(0,a.jsxs)(d.x,{fontWeight:"bold",children:["This ",Y.Yc," is disabled."]}),(0,a.jsx)(d.x,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,a.jsx)(ef.z,{variant:"plain",size:"sm",mr:4,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var ie=n(70065),it=n(26284),ii=n(87651),ir=n(17190),is=n(5361),io=n(58284),il=n(97590),ia=n(21697),ic=n(50828);let id=["90%","360px"],iu=e=>{let{onClose:t,eyebrowText:n,mainText:i,callsToAction:r}=e;return(0,a.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:id,maxW:id,position:"relative",children:[(0,a.jsx)(e1.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(tE.K,{spacing:1,paddingEnd:3,children:[!(0,eb.s2)()&&(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:n}),(0,a.jsx)(d.x,{fontSize:"md",children:i})]}),(0,a.jsx)(u.xu,{w:"100%",children:r})]})]})},ih=e=>{let{onClose:t,startTour:n}=e;return(0,a.jsx)(iu,{eyebrowText:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,a.jsx)(m.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]}),mainText:(0,a.jsx)(m.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,a.jsx)(ef.z,{size:"md",w:"100%",variant:"solid",onClick:()=>{n(0),t()},children:(0,a.jsx)(m.cC,{id:"VzFYDl"})})})};var ix=n(38914);let ip=["90%","360px"],im=e=>{let{onClose:t}=e,[n,i]=(0,v.useState)(!0);return(0,v.useEffect)(()=>{setTimeout(()=>{i(!1)},3e3)},[]),(0,a.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:ip,maxW:ip,position:"relative",children:[(0,a.jsx)(e1.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,a.jsx)(u.xu,{color:"trueblue.300",children:(0,a.jsx)(p.G,{icon:ix.tc$,size:"2x",className:n?"fa-bounce":void 0})}),(0,a.jsxs)(tE.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"eoDgVo"})}),(0,a.jsx)(d.x,{fontSize:"md",children:(0,a.jsx)(m.cC,{id:"p7dFyi"})})]})]})]})},ig="source",ij="desktop-tour-toast",iv="switch-from-mobile-to-desktop-toast",iC=e=>{var t;let{editor:n}=e,i=(0,ie.p)(),r=(0,F.CG)(tU.yx),{startTour:s}=(0,w.c8)(),{user:o,setSettings:l}=(0,eJ.SE)(),[a,c]=(0,v.useState)(!1),d=(0,v.useRef)(!1),u=(0,v.useRef)(!1),h=!!(null==o?void 0:null===(t=o.settings)||void 0===t?void 0:t.needsEditorOnboarding),x=(0,F.CG)((0,il.oH)(null==n?void 0:n.gammaDocId)),p=!!x&&"running"===x.status,m=(0,eH.As)("editor"),[f]=(0,v.useState)(()=>(0,ey.SJ)()[ig]===ia.VY),[g]=(0,v.useState)(()=>f&&(0,eb.s2)());(0,v.useEffect)(()=>{n&&c(!p&&!(0,eb.s2)()&&f&&h)},[n,f,p,h]),(0,ic.j)(ig),(0,v.useEffect)(function(){return u.current||!a||i.isActive(ij)||(u.current=!0,setTimeout(()=>{i({id:ij,position:"bottom-left",render:e=>{let{onClose:t}=e;return ih({onClose:()=>{null==l||l({remove:["needsEditorOnboarding"]}),t()},startTour:s})},isClosable:!0,duration:null})},2e3)),()=>{i.isActive(ij)&&(u.current=!0,i.close(ij))}},[l,a,s,i]),(0,v.useEffect)(function(){if(!(0,eb.s2)()||!g)return;let e="body"===m.scrollSelector?document.documentElement:document.querySelector(m.scrollSelector),t=()=>{e&&(0,eb.s2)()&&(null==e?void 0:e.scrollTop)>=(null==e?void 0:e.scrollHeight)/4&&g&&!i.isActive(iv)&&!d.current&&(d.current=!0,i({id:iv,position:"top",render:e=>{let{onClose:t}=e;return im({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),i.isActive(iv)&&i.close(iv)}},[r,m.scrollSelector,g,i])};var ib=n(8940);let iy=e=>{var t;let{doc:n,site:i,path:r}=e,s=(0,ie.p)(),o=(0,F.TL)(),l=(0,F.CG)(eA.v),[c]=(0,ib.zU5)(),[h]=(0,ib.sIg)(),[f]=(0,ib.odt)(),g=(0,F.CG)(eA.B$),j=null==n?void 0:n.id,C=(0,eO.mn)({domain:null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],path:r}),b=null==i?void 0:i.id,y=(0,v.useCallback)(async()=>{j&&((0,eA.yB)(o)(!0),await (0,eO.iL)(j),await h({variables:{id:j},refetchQueries:["GetDoc","GetSite"]}).then(()=>{s({render:function(){return(0,a.jsx)(u.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(em.U,{spacing:4,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.fV7})}),(0,a.jsx)(d.x,{fontWeight:"semibold",children:(0,a.jsx)(m.cC,{id:"V6Byuz"})}),C&&(0,a.jsx)(ef.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:C,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),children:(0,a.jsx)(m.cC,{id:"Zel0o2"})}),(0,a.jsx)(e1.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,eA.yB)(o)(!1)}))},[o,j,h,s,C]);return{publishSite:(0,v.useCallback)(async()=>{b&&((0,eA.yB)(o)(!0),g&&await (0,eO.iL)(g),await c({variables:{id:b},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:ib.yE1,variables:{id:t.docId}},e=>{var n,i,r;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}:e})})}}).then(()=>{s({render:function(){return(0,a.jsx)(u.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(em.U,{spacing:4,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.fV7})}),(0,a.jsx)(d.x,{fontWeight:"semibold",children:(0,a.jsx)(m.cC,{id:"V6Byuz"})}),C&&(0,a.jsx)(ef.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:C,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),children:(0,a.jsx)(m.cC,{id:"Zel0o2"})}),(0,a.jsx)(e1.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"DD5mqk"}),description:(0,a.jsx)(m.cC,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,eA.yB)(o)(!1)}))},[b,o,g,c,s,C]),publishDoc:y,isPublishing:l}};var ik=n(84538),iw=n(67724),iS=n(91e3),iE=n(56630),iI=n(55655),iA=n(52069),i_=n(46692);let iT=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,v.useState)("createGenerate"),[r,s]=(0,v.useState)([]),[o,l]=(0,v.useState)(void 0),c=(0,v.useMemo)(()=>({goToScreen:(e,t)=>{l(null==t?void 0:t.generateId),s(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),d=(0,v.useMemo)(()=>{switch(n){case"createWithAI":return iE.B;case"createImport":return iS.j;case"createPaste":return iI.L;case"promptEditor":return function(){return(0,a.jsx)(iA.B,{id:o,children:(0,a.jsx)(ik.N,{})})};case"createGenerate":return function(){return o?(0,a.jsx)(iA.B,{id:o,children:(0,a.jsx)(iw.m,{autosetLocale:!1})}):(0,a.jsx)(iw.m,{autosetLocale:!0})};default:throw Error("invalid page")}},[o,n]);return(0,a.jsx)(i_.u$.Provider,{value:c,children:(0,a.jsx)(d,{})})},iO=e=>{let{isOpen:t,onClose:n}=e;return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(tK.s,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,a.jsx)(tZ.o,{zIndex:"sticky"}),(0,a.jsx)(tY.f,{p:0,children:(0,a.jsx)(iT,{onGenerateSuccess:n})})]})]})})},iD=e=>{var t;let{doc:n}=e,i=(0,eD.Yy)(),r=(0,ie.p)(),s=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],o=(0,v.useMemo)(()=>(0,ey.Gn)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==s?void 0:s.token,absolute:!0}),[n,null==s?void 0:s.token]),{onCopy:l}=(0,it.V)(o),c=(0,v.useCallback)(()=>{(0,is.J)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),l(),r({title:(0,a.jsx)(m.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,l,r]),d=nW();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(np.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"bB+DHs"})})," ",(0,a.jsx)(ef.z,{as:nN(),target:(0,eb.Q5)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.r8p}),href:"/create",children:(0,a.jsx)(m.cC,{id:"xFxi2V"})}),d?(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.Fzb}),variant:"plain",as:nN(),target:(0,eb.Q5)()?"_self":"_blank",href:d,children:(0,a.jsx)(m.cC,{id:"550oRP"})}):(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.nNP}),variant:"plain",onClick:c,children:(0,a.jsx)(m.cC,{id:"RGCCrg"})})]})},iR=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,nc.M)({id:"add-page-ai-modal"}),i=(0,F.CG)(eA.lH),r=(0,eO.Vr)(i),{publishSite:s,isPublishing:o}=iy({site:i}),l=(0,eD.Yy)();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(np.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"bB+DHs"})}),(0,a.jsx)(ef.z,{variant:"solid",colorScheme:l?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.r8p}),onClick:n,children:(0,a.jsx)(m.cC,{id:"K3193W"})}),r&&(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.A$k}),variant:"plain",onClick:s,isLoading:o,children:(0,a.jsx)(m.cC,{id:"2uGo/E"})}),(0,a.jsx)(iO,{isOpen:e,onClose:t})]})},iP=()=>(0,a.jsx)(tE.K,{spacing:4,textAlign:"center",children:(0,a.jsx)(np.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"v1HDJV"})})}),iL=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===tF.FJd.UploadPptV2?(0,a.jsx)(iP,{}):i.site?i.site&&!(0,eb.s2)()?(0,a.jsx)(iR,{}):null:(0,a.jsx)(iD,{doc:i}):null};var iz=n(35676),iG=n.n(iz),iN=n(3440),iM=n.n(iN),iU=n(46152),iF=n.n(iU),iW=n(15377);let iH=[{key:"content_quality",category:"content",label:(0,a.jsx)(m.cC,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,a.jsx)(m.cC,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,a.jsx)(m.cC,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,a.jsx)(m.cC,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(m.cC,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,a.jsx)(m.cC,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,a.jsx)(m.cC,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,a.jsx)(m.cC,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,a.jsx)(m.cC,{id:"nTZNkL"})}],iq={key:"other",category:"other",label:(0,a.jsx)(m.cC,{id:"/IX/7x"})},iB=[{key:"missing_content",category:"content",label:(0,a.jsx)(m.cC,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(m.cC,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,a.jsx)(m.cC,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,a.jsx)(m.cC,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,a.jsx)(m.cC,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,a.jsx)(m.cC,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,a.jsx)(m.cC,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,a.jsx)(m.cC,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,a.jsx)(m.cC,{id:"R5upbf"})}],iV=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,s=(0,v.useMemo)(()=>{let e=i===tF.FJd.UploadPptV2?iB:iH;return iG()(iF()(iM()(iF()(e),"category"))).concat([iq])},[i]),o=(0,v.useCallback)(e=>{(0,td.fM)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),l=(0,v.useCallback)((e,n,s)=>{(0,td.XH)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,a.jsx)(iW.Cn,{feedbackTags:s,trackRating:o,trackFeedback:l,isDark:n})};var iK=n(29944),iZ=n(36660),iY=n(55891);let iJ=e=>{let[t]=(0,v.useState)(()=>(0,ey.SJ)()[e]);return(0,v.useEffect)(()=>{setTimeout(()=>{(0,iZ.lO)({query:{...(0,ey.SJ)(),[e]:void 0},emitChange:!1})})},[]),t},iX=e=>{var t,n,i;let{editor:r}=e,s=r&&null!==(n=null===(t=(0,iY.VA)(r))||void 0===t?void 0:t.generateInfo)&&void 0!==n?n:{},o=iJ("source"),l=(0,F.CG)((0,il.oH)(null==r?void 0:r.gammaDocId)),a=null,c=!0;return o===ia.VY?l&&("complete"===l.status||"error"===l.status)&&(a=l.id,c=!0):o===iK.u&&(c=!0,a=null!==(i=s.interactionId)&&void 0!==i?i:null),{showDocWizardFooter:c,source:o,interactionId:a}},iQ=(0,v.memo)(e=>{var t,n,i;let{interactionId:r}=e,s=(0,F.CG)(tU.yx),o=(0,eD.Yy)(),l=null==s?void 0:null===(n=s.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,[d,u]=(0,v.useState)(!1),h=(0,ie.p)(),x=null==s?void 0:null===(i=s.accessLinks)||void 0===i?void 0:i[0],p=(0,v.useMemo)(()=>(0,ey.Gn)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==x?void 0:x.token,absolute:!0}),[s,null==x?void 0:x.token]),{onCopy:f}=(0,it.V)(p);(0,v.useCallback)(()=>{(0,is.J)({docId:null==s?void 0:s.id,source:"docWizardFooter",type:"tokenUrl"}),f(),h({title:(0,a.jsx)(m.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==s?void 0:s.id,f,h]);let g=(0,v.useCallback)(()=>{u(!0)},[]);nW();let j=o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return s?(0,a.jsx)(ej.Wk,{isDark:o,children:(0,a.jsx)(c.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,eb.s2)()?void 0:"-".concat(io.m),children:(0,a.jsx)(ii.U,{in:!d,style:{width:"100%"},unmountOnExit:!0,children:(0,a.jsx)(c.k,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...j,children:(0,a.jsx)(ir.W,{maxW:"450px",children:(0,a.jsxs)(tE.K,{spacing:8,children:[(0,a.jsx)(iL,{doc:s}),(0,a.jsx)(iV,{docId:s.id,isDark:o,interactionId:r,generationType:l}),(0,a.jsx)(tS.M,{pt:[0,0,4],w:"100%",children:(0,a.jsx)(ef.z,{size:"sm",onClick:g,variant:"text",colorScheme:"blackAlpha",children:(0,a.jsx)(m.cC,{id:"vLyv1R"})})})]})})})})})}):null});iQ.displayName="DocWizardFooterInner";let i$=e=>{let{editor:t}=e;iC({editor:t});let{showDocWizardFooter:n,interactionId:i}=iX({editor:t});return n&&i?(0,a.jsx)(iQ,{interactionId:i}):null};var i0=n(98537),i1=n.n(i0),i2=n(11082),i5=n(71733);let i3=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,a.jsx)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{mr:1,children:[(0,a.jsx)(m.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(ef.z,{variant:"solid",onClick:t,children:(0,a.jsx)(m.cC,{id:"he3ygx"})})]}):(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{mr:1,children:[(0,a.jsx)(m.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,GAMMA_PROPER_NOUN:Y.N6},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(nN(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(ef.z,{as:i2.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,a.jsx)(m.cC,{id:"e+RpCP"})})})]})})},i4=e=>{let t=!(0,eb.s2)(),{user:n}=(0,eJ.SE)(),i=(0,ie.p)(),r=(0,v.useRef)(),s=(0,i5.e)(),o=(0,v.useCallback)(()=>{e&&(null===eN.co||void 0===eN.co||eN.co.track(eN.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,v.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,v.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,c=!!n;(0,tg.vm)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>i3({onCloneClick:l,isLoggedIn:c,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,c],[a,c])};var i6=n(73281),i8=n(27320),i9=n(24391);let i7="sessionId1",re=eU.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=i1()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:i7})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),rt=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s}=e,o=(0,F.CG)(tU.yx);i4(o);let[l]=(0,v.useState)(()=>[tO.F,i8.$1.configure({scrollerSelector:r}),re,i6._g]),{user:d,anonymousUser:h,isUserLoading:x,color:p}=(0,eJ.SE)(),[m,f]=(0,v.useState)(),{data:g,loading:j,error:C}=(0,tF.EDv)({variables:{docId:n,snapshotId:i},skip:!i});(0,v.useEffect)(()=>{!x&&m&&m.commands.user({id:(null==d?void 0:d.id)||h.id,color:p.value,sessionId:i7,idleSince:null,name:(null==d?void 0:d.displayName)||h.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!x})},[m,d,p,x,h]);let b=g&&void 0!==g.snapshot&&!j&&o;return(0,a.jsxs)(u.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!b||C?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!b&&(0,a.jsx)(tI.$,{}),C&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",C.message]})]}):(0,a.jsx)(u.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:b?1:0,children:(0,a.jsx)(eR.yE,{doc:o,editorId:"main",docId:n,extensions:l,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=g.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,a.jsx)(i9.m,{forceShow:!0,abuseReportingEnabled:!1})]})};var rn=n(71485),ri=n(332),rr=n(86290);let rs=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,v.useMemo)(()=>({fromNow:(0,rr.Km)(i),calendar:(0,rr.p6)(i,"PPpp")}),[i]);return(0,a.jsx)(m.cC,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,a.jsx)(ej.kH,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,a.jsx)(d.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},ro=e=>{let t=(0,F.CG)(eA.lH),n=(0,eO.k2)(t),i=!(0,eO.Vr)(t),r=(0,F.CG)(eA.RM),s=(0,F.CG)(eA.rc),{icon:o,text:l,color:c}=(0,v.useCallback)(()=>e?{icon:(0,a.jsx)(p.G,{icon:x.LM3,height:13,width:13}),text:(0,a.jsx)(m.cC,{id:"mkk40+"}),color:"gray.500"}:i?{icon:(0,a.jsx)(p.G,{icon:x.byT,height:13,width:13}),text:(0,a.jsx)(m.cC,{id:"r5OY1d"}),color:"gray.500"}:n?r>0||s?{icon:(0,a.jsx)(p.G,{icon:x.Pvm,height:13,width:13}),text:(0,a.jsx)(m.cC,{id:"eVV2pl"}),color:"orange.500"}:{icon:(0,a.jsx)(p.G,{icon:x.kd8,height:13,width:13}),text:(0,a.jsx)(m.cC,{id:"Rgbxkx"}),color:"green.500"}:{icon:(0,a.jsx)(p.G,{icon:x.g4A,height:13,width:13}),text:(0,a.jsx)(m.cC,{id:"tpB6bH"}),color:"gray.700"},[e,i,n,r,s])(),d=e?null:i?(0,a.jsx)(m.cC,{id:"u8Rqhk"}):!1===n?(0,a.jsx)(m.cC,{id:"Ys0XoA"}):r>0||s?(0,a.jsx)(m.cC,{id:"Ys0XoA"}):null,u=!1===i&&!e;return{statusText:l,statusIcon:o,statusColor:c,detailText:d,needsPublish:!n||s||r>0,lastPublishedTime:t?(0,a.jsx)(rs,{site:t}):null,publishEnabled:u}},rl=e=>{let{context:t,openSiteSettings:n}=e,i=(0,F.CG)(eA.lH),r=(0,rn.O1)(),{publishSite:s,isPublishing:o}=iy({site:i}),{statusText:l,detailText:c,needsPublish:u,publishEnabled:h}=ro(o),f=(0,ep.ff)(!1,!0);return("pages"!==t||u||o)&&r&&i&&(0,eO.Vr)(i)?(0,a.jsx)(ir.W,{px:0,children:(0,a.jsxs)(tE.K,{w:"100%",bg:f?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,a.jsxs)(e2.g,{spacing:0,color:f?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,a.jsx)(d.x,{fontWeight:"500",fontSize:"sm",children:l}),c&&(0,a.jsx)(d.x,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:c})]}),"pages"!==t&&(0,a.jsx)(e5.L,{}),(0,a.jsx)(ef.z,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,a.jsx)(p.G,{icon:x.A$k}),isDisabled:!h,onClick:s,isLoading:o,children:(0,a.jsx)(m.cC,{id:"1EeNDU"})}),"pages"===t&&(0,a.jsx)(ef.z,{textAlign:"left",color:f?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,a.jsx)(m.cC,{id:"WtsmDd"})})]})}):null};var ra=n(27599),rc=n(25481),rd=n(80934),ru=n(69024),rh=n(29705),rx=n(92850),rp=n(22226),rm=n(54326);let rf=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:s}=(0,ev.useRouter)(),o=(0,ie.p)(),[l,{data:u,loading:h}]=(0,tF.jUI)(),x=null==u?void 0:null===(t=u.archiveSite)||void 0===t?void 0:t.archived,p=(0,v.useCallback)(async()=>{if(null==r?void 0:r.id)try{await l({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),o({title:(0,a.jsx)(m.cC,{id:"aBvGpM"}),description:(0,a.jsx)(m.cC,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l,null==r?void 0:r.id,o]);return((0,v.useEffect)(()=>{x&&(n(),s("/#sites"),o({title:(0,a.jsx)(m.cC,{id:"oGP1Fe"}),description:(0,a.jsx)(m.cC,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[x,n,s,o,r]),h||x)?(0,a.jsx)(ri.h,{children:(0,a.jsx)(c.k,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,a.jsx)(t$.AA,{})})}):(0,a.jsxs)(rx.u_,{onClose:n,isOpen:i,size:"lg",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tZ.o,{isDisabled:h}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Y.aq},components:{0:(0,a.jsx)(i2.r,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,a.jsx)(rh.h,{mx:"2px"})}})})]})}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:n,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",color:"red.600",onClick:p,isLoading:h,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})]})]})},rg=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,I.q)({id:"trash-site-modal"}),[s]=(0,tF.sJX)(),o=(0,rn.O1)(),l=null==t?void 0:t.archived,c=(0,v.useCallback)(()=>{(null==t?void 0:t.id)&&s({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,s]);return o&&t?l?(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:e3.XnX}),onClick:c,children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{color:"red.500",icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.XAH}),onClick:()=>{i()},children:(0,a.jsx)(m.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),n&&(0,a.jsx)(rf,{isOpen:n,onClose:r,site:t})]}):(0,a.jsx)(a.Fragment,{})},rj=()=>({[eV.q.DOC_VIEW]:{buttonLabel:(0,a.jsx)(m.cC,{id:"eZb+lw"}),shortcutIcon:e3.zc,shortcutKeys:(0,ej.cE)("Mod+Enter"),shortcutLabel:(0,a.jsx)(m.cC,{id:"tbDuNX"})},[eV.q.SLIDE_VIEW]:{buttonLabel:(0,a.jsx)(m.cC,{id:"ydzS9x"}),shortcutIcon:e3.Bg$,shortcutKeys:"Esc",shortcutLabel:(0,a.jsx)(m.cC,{id:"5Rfo7J"})}});var rv=n(65610),rC=n(62861),rb=n(1384),ry=n(42616),rk=n(20706),rw=n(48105);let rS=(0,nL.ZP)("mod+Enter"),rE=(0,nL.ZP)("Esc"),rI=(0,nL.ZP)("mod+Esc"),rA=(0,nL.ZP)("shift+mod+Enter"),r_=e=>function(t){t((0,W.Qx)({attached:!1})),t((0,W.PM)({mode:e}))},rT=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},rO=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.TL)(),[r,s]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1),{editor:a}=(0,tw._i)(),c=(0,F.CG)(W.gh),d=(0,v.useRef)(c);(0,v.useEffect)(()=>{d.current=c},[c]);let u=(0,F.CG)(W.yq),h=(0,F.CG)(W.JA),x=(0,F.CG)(rC.C),p=(0,eN.z$)(),m=(0,v.useCallback)(e=>{a&&!a.isDestroyed&&(e===eV.q.SLIDE_VIEW?((0,ry.E0)(a.state.doc,i),(0,rk.U6)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),rT(a,n)),i(r_(e)))},[i,a,n]),f=(0,v.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),g=(0,v.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),j=(0,e$.ye)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:b}=(0,rb.wK)(j),y=(0,v.useCallback)(e=>{let{fullscreen:t=!1}=e;d.current!==eV.q.SLIDE_VIEW&&(m(eV.q.SLIDE_VIEW),t&&f(),null==p||p.trackDocEvent(eN.AA.PRESENT_MODE_ENTERED),b({isFullscreen:t}),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[m,b,f,d,p]),k=(0,v.useCallback)(()=>{d.current!==eV.q.DOC_VIEW&&(m(eV.q.DOC_VIEW),r&&g(),null==p||p.trackDocEvent(eN.AA.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[m,r,g,C,d,p]);return(0,v.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||o||k(),null!==document.webkitCurrentFullScreenElement||o||k(),s(e=>!e),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[o,k,g]),(0,rv.r)(()=>{a&&!a.isDestroyed&&c===eV.q.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof rw.c&&a.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[a,c]),(0,v.useEffect)(()=>eC.F7.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=d.current===eV.q.SLIDE_VIEW;if(!x){if(rS(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!1}),!0}if(rA(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!0}),!0}if(rI(e)&&r)return k(),!0;if(rE(e)&&r&&!u&&!h){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return k(),!0}}}),[y,k,f,u,h,t,x]),{enterSlideView:y,exitSlideView:k,enterFullscreen:f,exitFullscreen:g,exitedFullscreenByClick:o,isFullscreen:r,setIsFullscreen:s,setExitedFullscreenByClick:l}},rD=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.CG)(W.gh),r=(0,e$.ye)("presentFullScreen"),{shortcutIcon:s,shortcutKeys:o,buttonLabel:l}=rj()[i],{enterSlideView:c,exitSlideView:d}=rO({editorWrapperEl:t,scrollingParentSelector:n});return(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:s,fixedWidth:!0}),command:o,onClick:()=>{i===eV.q.SLIDE_VIEW?d():c({fullscreen:r})},children:l})};var rR=n(74008),rP=n(78695),rL=n(67109),rz=n(30191),rG=n(34308);let rN="gray.700";var rM=n(52929);let rU=e=>{let{error:t,refetch:n,...i}=e;return(0,a.jsx)(u.xu,{px:6,py:4,...i,children:(0,a.jsxs)(nH.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,a.jsx)(rM.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,a.jsx)(nq.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(m.cC,{id:"uNQm3r"})}),(0,a.jsx)(nB.X,{maxWidth:"md",children:t.message}),(0,a.jsx)(ef.z,{mt:4,onClick:()=>n(),children:(0,a.jsx)(m.cC,{id:"6gRgw8"})})]})})};var rF=n(89099);let rW=()=>f.ag._({id:"QbrUIo"}),rH=()=>f.ag._({id:"FbBkvL"}),rq=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:s}=e;return n?(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"ZlwDi6"})}):(0,a.jsxs)(c.k,{direction:"column",flex:1,children:[(0,a.jsx)(rm.x,{children:t?(0,a.jsx)(rB,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.cC,{id:"ZlwDi6"}),(0,a.jsxs)(e2.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,a.jsxs)(rF.E,{children:[(0,a.jsx)(rF.U,{children:(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e3.Ma4,"aria-label":rW()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":rN,onClick:()=>r("deckView"),children:rW()})}),(0,a.jsx)(rF.U,{children:(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e3.AGo,"aria-label":rH()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":rN,onClick:()=>r("cardEngagement"),children:rH()})})]})]})]})}),(0,a.jsx)(tZ.o,{})]})},rB=()=>(0,a.jsxs)(e2.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(rL.O,{h:12,width:"30%"}),(0,a.jsx)(rL.O,{h:4,width:"80%"})]});var rV=n(98621),rK=n.n(rV),rZ=n(71600);let rY=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return rK()("#e5e0df").toHex8String();let s=rK()(i).toHsl(),o=rK()(r).toHsl();return rK()({h:(0,rZ.t7)(s.h,o.h,t),s:(0,rZ.t7)(s.s,o.s,t),l:(0,rZ.t7)(s.l,o.l,t),a:n}).toHex8String()},rJ=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),rX=(e,t)=>{let n=0;for(let r in e){var i;n+=(null!==(i=t[r])&&void 0!==i?i:0)+rX(e[r],t)}return n},rQ=(e,t)=>{let n=0;for(let r in e){var i;n=Math.max((null!==(i=t[r])&&void 0!==i?i:0)+rX(e[r],t),n)}return n};var r$=n(25195),r0=n(62349),r1=n.n(r0);let r2=e=>{let{cardsViewed:t,totalCards:n}=e,i=rY({degree:t/n}),r=n>0;return(0,a.jsxs)(em.U,{spacing:3,children:[(0,a.jsxs)(c.k,{flex:1,position:"relative",children:[(0,a.jsx)(r$.E,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,a.jsx)(r3,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,a.jsx)(d.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,a.jsx)(m.cC,{id:"8Va3Pt"})})]})},r5=e=>{let{cardCount:t}=e,n=(0,v.useMemo)(()=>r1()(1,t),[t]);return(0,a.jsxs)(em.U,{spacing:3,filter:"blur(3px)",children:[(0,a.jsx)(c.k,{flex:1,position:"relative",children:(0,a.jsx)(r$.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,a.jsxs)(d.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},r3=e=>{let{...t}=e;return(0,a.jsx)(u.Cd,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,a.jsx)(p.G,{icon:e3.LEp,"aria-label":f.ag._({id:"y886Ns"}),size:"xs"})})},r4=e=>t=>(0,rZ.t7)(0,100,t/e),r6=e=>{let{cards:t,isColorized:n=!1,scaleToMax:i=!1,includeChildren:r,showViewersPercent:s=!1,leftLabel:o,rightLabel:l,tooltipLabel:c,cardLookupTable:d,onAnalyticsPanelClose:h}=e,x=r4(r?rQ(t,d):Math.max(...Object.values(d))),p=(0,v.useCallback)(e=>x(e),[x]);return(0,a.jsxs)(u.xu,{mt:6,mb:4,children:[(0,a.jsxs)(em.U,{mb:3,children:[(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.NZ,{children:o})}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.kH,{placement:"top",label:c,children:(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:l})})})})]}),(0,a.jsx)(u.xu,{width:"100%",children:Object.entries(t).map(e=>{var t;let[o,l]=e;return(0,a.jsx)(r8,{id:o,childCards:l,percentage:null!==(t=d[o])&&void 0!==t?t:0,calculatePercentageScale:p,isColorized:n,cardLookupTable:d,scaleToMax:i,includeChildren:r,showViewersPercent:s,onAnalyticsPanelClose:h},o)})})]})},r8=e=>{let{id:t,cardLookupTable:n,childCards:i,percentage:r,calculatePercentageScale:s,isColorized:o,scaleToMax:l,includeChildren:h,showViewersPercent:f,onAnalyticsPanelClose:g}=e,[j,C]=(0,v.useState)(!1),b=(0,v.useCallback)(()=>{C(!j)},[j]),{title:y}=(0,tn.T)({cardId:t}),k=Object.values(i).length>0,w=0===r,S=h?r+rX(i,n):r,E=j?S:0,I=l?s(S):Math.min(100,E),A=j?r:S,_=l?s(A):Math.min(100,A),O={startColor:"#F6AD55",endColor:"#68D391"},D=o?rY({degree:I/100,...O}):"trueblue.50",R=o?rY({degree:_/100,...O}):"trueblue.100";return(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(c.k,{direction:"column",children:(0,a.jsxs)(c.k,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,a.jsxs)(em.U,{pos:"absolute",zIndex:1,children:[k&&(0,a.jsx)(T.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,a.jsx)(p.G,{icon:x._tD}),transform:j?"rotate(90deg)":"",onClick:b,_focus:{shadow:"none"}}),!k&&(0,a.jsx)(c.k,{w:6,justifyContent:"center",alignItems:"center",children:w?(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"s+PDNe"}),children:(0,a.jsx)(u.xu,{color:"blackAlpha.500",children:(0,a.jsx)(p.G,{icon:e3.Aq,size:"sm"})})}):(0,a.jsx)(u.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,a.jsx)(p.G,{icon:e3.nZ9,size:"sm"})})}),(0,a.jsx)(d.x,{color:w?"blackAlpha.500":void 0,noOfLines:1,children:y||(0,a.jsx)(m.cC,{id:"wja8aL"})})]}),(0,a.jsxs)(u.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,a.jsx)(u.xu,{position:"absolute",h:"100%",bg:w?"blackAlpha.200":D,w:"".concat(I,"%")}),(0,a.jsx)(u.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:w?"blackAlpha.300":R,w:"".concat(_,"%")})]}),o&&100===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.L,{}),(0,a.jsx)(r3,{alignSelf:"center",zIndex:1})]})]})}),(0,a.jsx)(u.xu,{pl:8,children:k&&Object.entries(i).map(e=>{var t;let[i,r]=e;return(0,a.jsx)(ii.U,{in:j,children:(0,a.jsx)(r8,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:s,scaleToMax:l,isColorized:o,includeChildren:h,showViewersPercent:f,onAnalyticsPanelClose:g})},i)})})]})},r9=()=>(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(m.cC,{id:"QXJTby",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{}),2:(0,a.jsx)(d.x,{})}})}),r7=e=>{let{timeInMS:t}=e;return void 0===t?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(m.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},se=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,a.jsx)(m.cC,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"})}:{chartDescription:(0,a.jsx)(m.cC,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(m.cC,{id:"kTgCTO"}),rightLabel:(0,a.jsx)(m.cC,{id:"AKDcmS"})},st=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,s=(0,F.qr)().getState(),o=(0,W.X9)(s),{data:l,error:c,loading:d,refetch:h}=(0,tF.IrH)({variables:{docId:t}}),[f,g]=(0,v.useState)("viewTimePercent"),{chartDescription:j,rightLabel:C,leftLabel:b}=se(f,i),y="viewersOnly"===n?"viewers":"everyone",k=(0,e$.ye)("cardViewedThreshold"),w=(0,v.useMemo)(()=>{var e;return(null==l?void 0:null===(e=l.docCardsStats)||void 0===e?void 0:e[y])||[]},[null==l?void 0:l.docCardsStats,y]),S=(0,v.useMemo)(()=>rJ(w,f),[w,f]),E=(0,v.useCallback)(()=>g("viewTimePercent"),[]),I=(0,v.useCallback)(()=>g("viewersPercent"),[]);return(0,a.jsxs)(u.xu,{children:[(0,a.jsxs)(em.U,{my:4,children:[(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.SZw,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===f?"trueblue.50":"transparent",color:"viewTimePercent"===f?"trueblue.500":rN,onClick:E,children:(0,a.jsx)(m.cC,{id:"XyvAeS"})}),(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e3.jGC,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===f?"trueblue.50":"transparent",color:"viewersPercent"===f?"trueblue.500":rN,onClick:I,children:(0,a.jsx)(m.cC,{id:"vXtpAZ"})})]}),(0,a.jsx)(si,{description:j}),c&&(0,a.jsx)(rU,{error:c,refetch:h}),d&&!c&&(0,a.jsx)(sn,{}),!d&&!c&&(0,a.jsx)(r6,{cards:o.tree,cardLookupTable:S,scaleToMax:"viewTimePercent"===f,isColorized:"viewersPercent"===f,includeChildren:"viewTimePercent"===f,showViewersPercent:"viewersPercent"===f,rightLabel:C,leftLabel:b,tooltipLabel:"viewTimePercent"===f?(0,a.jsx)(r9,{}):(0,a.jsx)(r7,{timeInMS:k}),onAnalyticsPanelClose:r})]})},sn=e=>{let{includeDescription:t=!1}=e;return(0,a.jsx)(c.k,{direction:"column",mt:6,mb:4,children:(0,a.jsxs)(e2.g,{align:"stretch",children:[t&&(0,a.jsx)(rL.O,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(rL.O,{h:8},t))]})})},si=e=>{let{description:t}=e;return(0,a.jsx)(d.x,{color:rN,children:t})};var sr=n(89364),ss=n(78534),so=n(80774),sl=n(5832),sa=n(64565),sc=n(70189),sd=n(66983),su=n(79443),sh=n(109),sx=n(16556),sp=n(829),sm=n.n(sp);let sf=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,e$.ye)("cardViewedThreshold");return(0,a.jsx)(ss.h,{children:(0,a.jsxs)(so.Tr,{children:[(0,a.jsx)(sg,{label:(0,a.jsx)(m.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,a.jsx)(m.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,a.jsx)(sg,{label:(0,a.jsx)(m.cC,{id:"pRGfP3"}),width:"35%"}),(0,a.jsx)(sg,{label:(0,a.jsx)(m.cC,{id:"QfqHuz"}),tooltip:(0,a.jsx)(r7,{timeInMS:i}),width:"25%"})]})})},sg=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,a.jsx)(sl.Th,{w:n,children:(0,a.jsx)(d.x,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,a.jsx)(ej.kH,{placement:"top",label:i,children:r}):r},sj=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],sv=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:s,cardCount:o,handleTableRowClick:l,hasIndividualAnalytics:c}=e,{user:u}=(0,eJ.SE)(),h=c?t:sm()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==u?void 0:u.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,a.jsx)(sa.x,{children:(0,a.jsxs)(sc.i,{colorScheme:"blackAlpha",children:[(0,a.jsx)(sf,{uniqueViewers:n,docCreatedDate:i}),(0,a.jsx)(sd.p,{children:h.map((e,n)=>{let{user:i,lastOpened:h,visitorId:x}=e,p=(null==i?void 0:i.id)===r,m=s.some(e=>e.user.id===(null==i?void 0:i.id)),g=i?i.displayName+(i.id===(null==u?void 0:u.id)?" "+f.ag._({id:"dDUgzP"}):"")||"":f.ag._({id:"VmjbJY"}),j=h?nI()((0,nv.P9)(h)):f.ag._({id:"/JO3xr"}),v={name:g,id:(null==i?void 0:i.id)||x||"",email:null==i?void 0:i.email,isCreator:p,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:j},C=n===t.length-1,b=(null==i?void 0:i.id)===(null==u?void 0:u.id),y=!c&&!b;return(0,a.jsxs)(so.Tr,{cursor:"pointer",onClick:()=>l(v),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,a.jsx)(su.Td,{borderBottom:C?"0 none":void 0,children:(0,a.jsx)(sC,{name:g,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:p,isAnonymous:!i})}),(0,a.jsx)(su.Td,{borderBottom:C?"0 none":void 0,children:y?(0,a.jsx)(d.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:sj[n%sj.length]}):(0,a.jsx)(d.x,{fontSize:"sm",children:j})}),(0,a.jsx)(su.Td,{borderBottom:C?"0 none":void 0,children:y?(0,a.jsx)(r5,{cardCount:o}):(0,a.jsx)(r2,{cardsViewed:e.cardsViewed||0,totalCards:o||0})})]},(null==i?void 0:i.id)||x)})})]})})},sC=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:s=!1,isAnonymous:o=!1,...l}=e;return(0,a.jsxs)(em.U,{...l,children:[(0,a.jsx)(sh.q,{size:"sm",name:t,src:n}),(0,a.jsxs)(tE.K,{spacing:.5,children:[(0,a.jsxs)(d.x,{children:[t,o&&(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),ml:2})]}),(0,a.jsxs)(em.U,{mt:1,children:[(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:i}),(r||s)&&(0,a.jsx)(sx.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,a.jsx)(m.cC,{id:"UE2beD"}):(0,a.jsx)(m.cC,{id:"3L51iw"})})]})]})]})},sb=e=>{var t,n,i,r;let{user:s,onBackClick:o,docId:l,onAnalyticsPanelClose:c}=e,d=(0,F.qr)().getState(),h=(0,W.X9)(d),{data:x,error:p,loading:f,refetch:g}=(0,tF.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),j=null!==(r=null==x?void 0:null===(n=x.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,C=null==x?void 0:null===(i=x.docCardsStats)||void 0===i?void 0:i.cardCount,b=(0,v.useMemo)(()=>{var e;return(null==x?void 0:null===(e=x.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==x?void 0:x.docCardsStats]),y=(0,v.useMemo)(()=>rJ(b,"viewTimePercent"),[b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(ef.z,{"aria-label":"Back",leftIcon:(0,a.jsx)(sr.R,{}),variant:"ghost",onClick:o,children:(0,a.jsx)(m.cC,{id:"iH8pgl"})})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rR.i,{}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(sy,{user:s,showLastOpened:!0}),C&&(0,a.jsx)(si,{description:(0,a.jsx)(m.cC,{id:"YJOrjl",values:{cardsViewed:j,totalCards:C}})}),f&&!p&&(0,a.jsx)(sn,{includeDescription:!0}),p&&(0,a.jsx)(rU,{error:p,refetch:g}),!p&&!f&&(0,a.jsx)(r6,{cards:h.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"}),cardLookupTable:y,tooltipLabel:(0,a.jsx)(r9,{}),onAnalyticsPanelClose:c})]})})]})},sy=e=>{let{user:t,showLastOpened:n}=e;return(0,a.jsxs)(em.U,{align:"center",my:6,children:[(0,a.jsx)(sC,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,a.jsxs)(e2.g,{align:"flex-start",spacing:0,children:[(0,a.jsx)(ej.NZ,{children:(0,a.jsx)(m.cC,{id:"pRGfP3"})}),(0,a.jsx)(d.x,{children:t.lastOpened})]})]})},sk=(e,t,n)=>"everyone"===e?f.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?f.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):f.ag._({id:"V9JX7d"}),sw={everyone:e3.NdV,viewersOnly:e3.Mdf,accessLinkOnly:e3.uWk},sS=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,a.jsxs)(nb.v,{children:[(0,a.jsx)(ny.j,{leftIcon:(0,a.jsx)(p.G,{size:"xs",icon:sw[t]}),as:ef.z,size:"md",rightIcon:(0,a.jsx)(p.G,{size:"xs",icon:x.ptq}),children:sk(t,i,r)}),(0,a.jsx)(nk.q,{zIndex:2,maxW:"380px",children:(0,a.jsxs)(nw._,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,a.jsx)(nS.i,{value:"everyone",isDisabled:0===i,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(p.G,{icon:sw.everyone,size:"xs"}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(d.x,{children:sk("everyone",i,r)}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),(0,a.jsx)(nS.i,{value:"viewersOnly",isDisabled:0===r,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(p.G,{icon:sw.viewersOnly,size:"xs"}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(d.x,{children:sk("viewersOnly",i,r)}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),!1]})})]})};var sE=n(18e3),sI=n(52521),sA=n(18526),s_=n(6802),sT=n(70258),sO=n(80237),sD=n(59309),sR=n(2574),sP=n(92638),sL=n(33951),sz=n(10897),sG=n(14582),sN=n(75715),sM=n(96492),sU=n(14141),sF=n(40837);let sW={top:55,right:20,bottom:40,left:24},sH=e=>Math.round(e).toString(),sq=e=>Math.max(...e.map(e=>(0,sN.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),sB={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},sV="var(--chakra-colors-gray-500)",sK="var(--chakra-colors-gray-200)",sZ=e=>e.map(e=>e.x),sY=e=>e.map(e=>e.y),sJ=e=>{let{width:t,height:n,margin:i=sW,chartData:r,TooltipInner:s,showZero:o,shouldRoundYValues:l,showMaxAndMiddle:c,barColor:d,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:p,tooltipOpen:m,tooltipLeft:f,tooltipTop:g,tooltipData:j,hideTooltip:C}=(0,sM.Z)(),b=(0,v.useRef)(),y=(0,v.useRef)();(0,v.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)},[]);let k=sY(r),w=Math.max(...k),S=[w,Math.round(w/2)],E=sq(c?S:k),I=i.left+E,A=t-I-i.right,_=n-i.top-i.bottom,T={...sU.j,...sB,...h},O=(0,v.useMemo)(()=>(0,sP.Z)({range:[0,A],domain:sZ(r),padding:.3}),[A,r]),D=(0,v.useMemo)(()=>(0,sL.Z)({range:[_,0],round:!0,domain:[0,w]}),[_,w]),R=o?D(Math.min(...k.filter(e=>0!==e))):_,P=o&&_-R>6;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.xu,{children:(0,a.jsxs)("svg",{width:t,height:n,children:[(0,a.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,a.jsx)(sD.Z,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,s="bar-".concat(r,"-").concat(i),l=O.bandwidth(),c=_-(null!==(t=D(i))&&void 0!==t?t:0),u=P&&0===c?6:c,h=null!==(n=O(r))&&void 0!==n?n:0,m=_-u;return(0,a.jsxs)(sD.Z,{children:[(0,a.jsx)(sz.Z,{x:h,y:m,width:l,height:u,radius:5,topLeft:!0,topRight:!0,fill:o&&0===i?sK:d,onMouseLeave:()=>{b.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let n=(0,sO.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,a.jsx)(sG.Z,{x:h,y:0,width:l,height:Math.max(0,_-u),opacity:0,onMouseLeave:()=>{y.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let n=(0,sO.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},s)})}),(0,a.jsx)(s_.Z,{top:i.top,left:I,scale:D,stroke:sK,strokeWidth:2,tickValues:c?S:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:l?sH:void 0,tickLength:6,tickStroke:sK,tickLabelProps:()=>({fill:sV,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,a.jsx)(sT.Z,{top:_+i.top,left:I,scale:O,stroke:sK,numTicks:4,tickStroke:sK,tickLabelProps:()=>({fill:sV,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),m&&j&&(0,a.jsx)(sF.Z,{top:g,left:f,style:T,children:(0,a.jsx)(s,{x:j.x,y:j.y})})]})},sX=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:s=!0,data:o,barColor:l="var(--chakra-colors-trueblue-200)",customTooltipStyles:c,onClick:h=()=>{},...x}=e;return(0,a.jsxs)(u.xu,{position:"relative",height:"300px",...x,children:[(0,a.jsx)(d.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,a.jsx)(sR.Z,{children:e=>{let{width:t,height:d}=e;return t<10?null:(0,a.jsx)(sJ,{width:t,height:d,showZero:i,chartData:o,barColor:l,customTooltipStyles:c,onClick:h,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:s})}})]})},sQ=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,sE.Z)(e);if(!(0,sI.Z)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var c=(0,sA.Z)(n.getDate(),2),d=(0,sA.Z)(n.getMonth()+1,2),u=(0,sA.Z)(n.getFullYear(),4);o="".concat(u).concat(a).concat(d).concat(a).concat(c)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,sA.Z)(Math.floor(x/60),2),m=(0,sA.Z)(x%60,2);l="".concat(h<0?"+":"-").concat(p,":").concat(m)}else l="Z";var f=(0,sA.Z)(n.getHours(),2),g=(0,sA.Z)(n.getMinutes(),2),j=(0,sA.Z)(n.getSeconds(),2),v=""===o?"":"T",C=[f,g,j].join("extended"===r?":":"");o="".concat(o).concat(v).concat(C).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,rr.p6)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,rr.p6)(o,n),y:0})}return r},s$=e=>{let{viewData:t,dayCount:n}=e,i=sQ(t,n);return(0,a.jsx)(sX,{data:i,my:3,chartTitle:(0,a.jsx)(m.cC,{id:"mSEibf"}),TooltipInner:s0})},s0=e=>{let{x:t,y:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{children:t}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"6MKtHx",values:{y:n}})})]})},s1=e=>e.every(e=>0===e.uniqueVisitors),s2=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],s5=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},s3=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:s,canShare:o}=e,{loading:l,data:d,error:u,refetch:h}=(0,tF.xls)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:x}=(0,eJ.SE)(),[p,g]=(0,v.useState)("deckView"),[j,C]=(0,v.useState)(null),[b,y]=(0,v.useState)("everyone"),k=(0,rr.p6)(i.createdTime,"PPP"),w=i.title||(0,a.jsx)(m.cC,{id:"wja8aL"}),S=(null==d?void 0:d.memoStats.viewers)||[],E=(null==d?void 0:null===(t=d.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,I=s2(b,null==d?void 0:d.memoStats),A=(0,J.Y)("individual_analytics",i.organization),{openUpsellModal:_}=(0,rG.z)(),T=s1(I),O=S.filter(e=>{var t;return"everyone"===b||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),D=s5(i,b,null==d?void 0:d.memoStats),R=(0,v.useCallback)(e=>{y(e)},[]),P=(0,v.useCallback)(e=>{g(e)},[]),L=(0,v.useCallback)(e=>{if(!A&&e.id!==(null==x?void 0:x.id)){_({segmentEvent:eN.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}C(e)},[_,A,x]),z=(0,v.useCallback)(()=>{C(null)},[]),G=void 0!==u;return(0,a.jsxs)(a.Fragment,{children:[j&&(0,a.jsx)(sb,{user:j,onBackClick:z,docId:i.id,onAnalyticsPanelClose:s}),!j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rq,{hasError:G,isAnalyticsLoading:l,setView:P,view:p,description:(0,a.jsx)(m.cC,{id:"uEtUah",values:{docTitle:w,docCreatedDate:k}})}),G&&(0,a.jsx)(rU,{error:u,refetch:h}),!G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rR.i,{}),(0,a.jsxs)(tY.f,{children:[l&&(0,a.jsx)(s4,{}),!l&&S.length<=1&&o&&(0,a.jsx)(s6,{handleSharePanelOpen:r}),!l&&(0,a.jsxs)(tE.K,{direction:"column",mt:4,spacing:4,children:[(0,a.jsxs)(c.k,{direction:"row",justify:"space-between",align:"center",children:[(0,a.jsx)(np.X,{as:"h2",size:"md",children:"cardEngagement"===p?rH():rW()}),(0,a.jsx)(sS,{selected:b,handleMenuItemChange:R,everyoneCount:s5(i,"everyone",null==d?void 0:d.memoStats),viewersOnlyCount:s5(i,"viewersOnly",null==d?void 0:d.memoStats)})]}),"deckView"===p&&T&&(0,a.jsx)(s8,{handleSharePanelOpen:r,dayCount:E}),"deckView"===p&&!T&&(0,a.jsx)(s$,{viewData:I,dayCount:E}),"cardEngagement"===p&&(0,a.jsx)(st,{docId:i.id,viewerFilter:b,currentViewerFilterCount:D,onAnalyticsPanelClose:s}),(0,a.jsx)(sv,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:O,currentViewerFilterCount:D,docCreatedDate:k,contributors:i.editors||[],cardCount:(null==d?void 0:d.memoStats.cardCount)||0,handleTableRowClick:L,hasIndividualAnalytics:A}),O.length>3&&!A&&(0,a.jsx)(ef.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>_({segmentEvent:eN.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,a.jsx)(m.cC,{id:"BKBX4n",values:{0:O.length-3}})}),!A&&(0,a.jsx)(rz.m,{segmentEvent:eN.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:f.ag._({id:"GYgPBy"})})]})]})]})]})]})},s4=()=>(0,a.jsxs)(c.k,{direction:"column",py:2,children:[(0,a.jsx)(rL.O,{h:10,width:"40%",mb:4}),(0,a.jsx)(rL.O,{h:40,mb:4}),(0,a.jsx)(e2.g,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(rL.O,{h:12},t))})]}),s6=e=>{let{handleSharePanelOpen:t}=e;return(0,a.jsx)(c.k,{p:3,px:4,mt:2,bg:"gray.100",color:rN,borderRadius:"base",children:(0,a.jsxs)(c.k,{align:"baseline",fontSize:"sm",children:[(0,a.jsx)(u.xu,{pr:2,children:(0,a.jsx)(p.G,{icon:e3.ILF,"aria-label":"user-icon",size:"sm"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"FNMh4I",components:{0:(0,a.jsx)(d.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},s8=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,a.jsxs)(nH.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,a.jsx)(u.Cd,{size:"30px",bg:"gray.500",children:(0,a.jsx)(p.G,{icon:e3.ImE,color:"white"})}),(0,a.jsx)(nq.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(m.cC,{id:"2OzAI5"})}),n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nB.X,{maxWidth:"sm",children:(0,a.jsx)(m.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,a.jsx)(ef.z,{mt:4,onClick:t,children:(0,a.jsx)(m.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})},s9=e=>{var t,n,i,r,s,o;let{doc:l,onAnalyticsPanelClose:c}=e,h=(0,F.qr)().getState(),x=(0,W.X9)(h),{user:p}=(0,eJ.SE)(),{data:f,error:g,loading:j,refetch:C}=(0,tF.IrH)({variables:{docId:l.id,userId:null==p?void 0:p.id},skip:!(null==p?void 0:p.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),b=null!==(o=null==f?void 0:null===(n=f.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==o?o:0,y=null==f?void 0:null===(i=f.docCardsStats)||void 0===i?void 0:i.cardCount,k=(0,v.useMemo)(()=>{var e;return(null==f?void 0:null===(e=f.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==f?void 0:f.docCardsStats]),w=(0,v.useMemo)(()=>rJ(k,"viewTimePercent"),[k]);if(!p)return null;let S=p.id===(null===(r=l.createdBy)||void 0===r?void 0:r.id),E=null===(s=l.editors)||void 0===s?void 0:s.some(e=>e.user.id===p.id),I={name:p.displayName,id:p.id,profileImg:p.profileImageUrl,email:p.email,isContributor:E,isCreator:S};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rm.x,{children:[(0,a.jsx)(m.cC,{id:"ZlwDi6"}),(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,a.jsx)(m.cC,{id:"wja8aL"})})]}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rR.i,{}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(sy,{user:I}),void 0!==y&&(0,a.jsx)(si,{description:(0,a.jsx)(m.cC,{id:"YJOrjl",values:{cardsViewed:b,totalCards:y}})}),j&&!g&&(0,a.jsx)(sn,{includeDescription:!0}),g&&(0,a.jsx)(rU,{error:g,refetch:C,px:0}),!g&&!j&&(0,a.jsx)(r6,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,a.jsx)(r9,{}),onAnalyticsPanelClose:c}),(0,a.jsxs)(nH.b,{children:[(0,a.jsx)(rM.z,{}),(0,a.jsx)(m.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:Y.N6,GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]})]})})]})},s7=(0,rP.Z)(e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:s}=e,o=(0,eo.iq)({base:"sm",md:"2xl",lg:"4xl"}),l=!!s&&"full"==n,d=(0,v.useCallback)(()=>{s&&(s(),r())},[s,r]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(rx.u_,{onClose:r,isOpen:i,size:o,blockScrollOnMount:!1,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{mx:2,minW:0,children:["full"===n?(0,a.jsx)(s3,{doc:t,handleSharePanelOpen:d,onAnalyticsPanelClose:r,canShare:l}):(0,a.jsx)(s9,{doc:t,onAnalyticsPanelClose:r}),(0,a.jsx)(rR.i,{my:4}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(c.k,{justifyContent:l?"space-between":"flex-end",flex:1,children:[l&&(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.zBy}),variant:"ghost",onClick:d,children:(0,a.jsx)(m.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:r,children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})]})})]})]})})}),oe=e=>{let{doc:t,mode:n}=e,i=(0,eN.z$)(),{isOpen:r,onClose:s,onOpen:o}=(0,nc.M)({id:"analyticsPanelDisclosure"}),l=(0,v.useCallback)(()=>{null==i||i.track(eN.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),o()},[i,null==t?void 0:t.id,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.Ma4,fixedWidth:!0}),onClick:l,children:(0,a.jsx)(m.cC,{id:"ZlwDi6"})}),t&&r&&(0,a.jsx)(s7,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:s,mode:n})]})},ot=e=>{let{toggleCommentsPanel:t}=e;return(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.Mzg,fixedWidth:!0}),onClick:t,children:(0,a.jsx)(m.cC,{id:"VbyRUy"})})};var on=n(82554),oi=n(35183),or=n(97166),os=n(99793),oo=n(16003);let ol=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:s,language:o,...l}=e,[c,d]=(0,v.useState)(i),[h,x]=(0,v.useState)(null),p=(0,tg.Kt)(r,100),[m,f]=(0,v.useState)();(0,v.useEffect)(()=>{"css"===o?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(e=>{f(e.css())}):"html"===o&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(e=>{f(e.html())})},[o]),(0,tg.vm)(()=>{x(null),p(c)},[c,p],[c]);let g=[m].filter(Boolean);return(0,a.jsxs)(oi.NI,{isInvalid:!!h,children:[(0,a.jsx)(or.l,{children:t}),h&&(0,a.jsx)(os.J1,{children:h}),s&&(0,a.jsx)(oi.Q6,{children:s}),(0,a.jsx)(u.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,a.jsx)(v.Suspense,{fallback:(0,a.jsx)("span",{}),children:(0,a.jsx)(oo.B,{value:c,extensions:g,onChange:d,...l})})})]})};var oa=n(55338);let oc=(0,v.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,oa.A)(i),{bodyStart:s}=(0,F.CG)(W.$p),o=(0,v.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,a.jsx)(tV.Z,{background:"none"}),(0,a.jsxs)(tK.s,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"E16GGw"})}),(0,a.jsx)(tY.f,{overflowX:"hidden",children:(0,a.jsx)(ol,{label:f.ag._({id:"fC5kYg"}),helperText:f.ag._({id:"0AZNtw"}),initialValue:s,updateValue:o,language:"html",height:"600px"})}),(0,a.jsx)(tJ.m,{children:(0,a.jsx)(ef.z,{w:"100%",variant:"solid",onClick:n,children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})})]})]})})});oc.displayName="CustomCodeDrawer";let od=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,nc.M)({id:"codeEditor"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.dT$,fixedWidth:!0}),onClick:i,children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(m.cC,{id:"cnlGIm"}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(on.C,{colorScheme:"green",ml:2,children:(0,a.jsx)(m.cC,{id:"YBt9YP"})})]})}),(0,a.jsx)(oc,{editor:t,isOpen:n,onClose:r})]})},ou=e=>{let{doc:t}=e,[n]=(0,tF.LT4)(),[i]=(0,tF.iX9)(),r=(0,v.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.ZeM,fixedWidth:!0}),onClick:r(!1),children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsx)(rc.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:r(!0),children:(0,a.jsx)(m.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})};var oh=n(45441),ox=n(1997),op=n(91998);let om=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,oh.Z)((0,ox.Z)(i.createdTime),"PPP"),s=(0,op.$)(null==i?void 0:i.title);return(0,a.jsxs)(u.xu,{px:4,py:2,maxW:"300px",children:[(0,a.jsx)(d.x,{noOfLines:6,children:s}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:r}})}),(0,a.jsx)(ej.kH,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},of=e=>{let{doc:t,editor:n}=e,i=(0,i5.e)(),r=(0,v.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,eb.Q5)()})},[t.id,i,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(m.cC,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})})};var og=n(41521);let oj=()=>(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.kwI,fixedWidth:!0}),onClick:()=>{og.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(m.cC,{id:"U8WPSi"})}),ov=e=>{let{site:t,path:n}=e,i=(0,eO.AR)({site:t,path:n});return i?(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"kcKqQj"}),placement:"top",children:(0,a.jsx)(T.h,{ml:-1,href:i,as:nN(),target:"_blank","aria-label":f.ag._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,a.jsx)(p.G,{icon:x.ZE5}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},oC=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:s}=e,o=(0,op.$)(null==i?void 0:i.title),l=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),c=(0,eO.jl)(i,r);return(0,a.jsxs)(u.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsxs)(em.U,{align:"start",children:[(0,a.jsx)(d.x,{noOfLines:2,children:o}),c&&(0,a.jsx)(ov,{site:r,path:null==l?void 0:l.path})]}),l&&(0,a.jsx)(ob,{path:l.path}),s&&"createdTime"in i&&(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,a.jsx)(m.cC,{id:"oJFw5Q",values:{0:(0,rr.Dw)(i.createdTime)}})}),"createdBy"in i&&s&&(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},ob=e=>{let{path:t}=e;return"/"===t?(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"wFCbbC"})}):(0,a.jsx)(d.x,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})};var oy=n(24772),ok=n(36371),ow=n(73582),oS=n(2969),oE=n(3181),oI=n(13272),oA=n(41098),o_=n(82729),oT=n(7715),oO=n(6510),oD=n(79385);let oR=e=>{let{updateDocSetting:t,editor:n}=e,{animationsEnabled:i,defaultFullBleed:r,defaultContentWidth:s,presentBackdrop:o,cardDimensions:l,verticalAlign:c}=(0,F.CG)(W.US),u=(0,oD.l)(l),h=c||u.defaultVerticalAlign;return(0,a.jsxs)(tE.K,{spacing:5,mt:4,divider:(0,a.jsx)(rR.i,{}),children:[(0,a.jsx)(oP,{title:f.ag._({id:"jBvtuq"}),description:f.ag._({id:"Q3Qdcd"}),icon:x.qnl,control:(0,a.jsx)(oD.Ft,{cardDimensions:l,updateCardDimensions:e=>t("cardDimensions",e)})}),(0,a.jsx)(oP,{title:f.ag._({id:"lklIf1"}),description:f.ag._({id:"aJ+ISV"}),icon:x.dH7,value:"lg"===s,onChange:e=>{t("defaultContentWidth",e?"lg":void 0),n.commands.resetCardSettings({container:{width:void 0}})}}),(0,a.jsx)(oP,{title:f.ag._({id:"vUBA/H"}),description:f.ag._({id:"n68eVZ"}),icon:x.elf,children:(0,a.jsx)(oO.e,{alignment:h,setAlignment:e=>{t("verticalAlign",e)}})}),(0,a.jsx)(oP,{title:f.ag._({id:"lsVq2Z"}),description:f.ag._({id:"u/0NJZ"}),icon:x.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0),n.commands.resetCardSettings({cardSize:"default"})}}),(0,a.jsx)(oP,{title:f.ag._({id:"7VfbQM"}),description:f.ag._({id:"XZHPlI"}),icon:x.UHQ,value:o,onChange:e=>t("presentBackdrop",e)}),(0,a.jsx)(oP,{title:f.ag._({id:"HgWdP3"}),description:f.ag._({id:"X3TlS6"}),icon:x.kq2,value:(0,oT.C)({animationsEnabled:i}),onChange:e=>{t("animationsEnabled",e)}}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ymPKi7"})}),(0,a.jsxs)(em.U,{alignItems:"flex-start",spacing:"4",children:[(0,a.jsx)(oz,{label:f.ag._({id:"wl99H6"}),alignment:h,cardDimensions:u,isWide:"lg"===s,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,a.jsx)(oz,{label:f.ag._({id:"GWjDlt"}),alignment:h,cardDimensions:u,isWide:"lg"===s,showBackdrop:o&&"full"!==r,scaleCardUp:!o||"full"===r})]})]})]})},oP=e=>{let{title:t,description:n,icon:i,children:r,helpDescription:s,value:o,onChange:l,control:c,direction:u="row"}=e;return(0,a.jsxs)(tE.K,{alignItems:"flex-start",spacing:2,direction:u,children:[i&&(0,a.jsx)(d.x,{fontSize:"lg",width:8,maxW:8,children:(0,a.jsx)(p.G,{icon:i,fixedWidth:!0})}),(0,a.jsx)(tE.K,{spacing:4,flex:1,children:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsxs)(np.X,{size:"sm",fontWeight:"semibold",children:[t," ",s?(0,a.jsx)(ej.Yq,{label:s,ml:1}):null]}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.600",children:n}),c]})}),r,l&&(0,a.jsx)(oA.r,{isChecked:o,onChange:e=>l(e.target.checked)})]})},oL=e=>{let{hideExtraLines:t}=e;return(0,a.jsxs)(tE.K,{w:"100%",py:2,px:2.5,children:[(0,a.jsx)(u.xu,{w:20,h:1.5,bg:"gray.200"}),(0,a.jsxs)(em.U,{flex:"1",alignItems:"flex-start",children:[(0,a.jsx)(o_.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,a.jsx)(u.xu,{fontSize:"lg",children:(0,a.jsx)(p.G,{icon:x.VmB})})}),(0,a.jsxs)(tE.K,{flex:"1",spacing:"1",children:[(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,a.jsx)(u.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},oz=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:s,alignment:o}=e,l={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(s?"scale(1.15)":"none")};return(0,a.jsxs)(tE.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,a.jsx)(c.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,a.jsx)(o_.o,{...l,ratio:t.aspectRatio,children:(0,a.jsx)(u.xu,{display:"flex",alignItems:o,style:{alignItems:o},children:(0,a.jsx)(oL,{hideExtraLines:i})})}):(0,a.jsx)(tE.K,{...l,children:(0,a.jsx)(oL,{hideExtraLines:i})})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.700",children:r})]})};var oG=n(61652),oN=n(11457),oM=n(19783);let oU=e=>{let{title:t,description:n,icon:i,children:r,value:s,onChange:o}=e;return(0,a.jsxs)(tE.K,{alignItems:"center",spacing:2,direction:"row",children:[i&&(0,a.jsx)(d.x,{fontSize:"lg",width:8,maxW:8,children:(0,a.jsx)(p.G,{icon:i,fixedWidth:!0})}),(0,a.jsxs)(tE.K,{flex:1,direction:"row",children:[(0,a.jsx)(np.X,{size:"sm",fontWeight:"semibold",children:t}),n&&(0,a.jsx)(oM.u,{label:n,placement:"top",children:(0,a.jsx)(d.x,{fontSize:"sm",cursor:"help",color:"gray.400",children:(0,a.jsx)(p.G,{icon:x.sqG})})})]}),r,o&&(0,a.jsx)(oA.r,{isChecked:s,onChange:e=>o(e.target.checked)})]})},oF=e=>{let{updateDocSetting:t,cardDimensionsKey:n,verticalAlign:i,defaultFullBleed:r,defaultContentWidth:s}=e,o="fluid"===n;return(0,a.jsxs)(tE.K,{spacing:5,my:3,children:[(0,a.jsx)(oU,{title:f.ag._({id:"jBvtuq"}),description:f.ag._({id:"Q3Qdcd"}),icon:x.qnl,children:(0,a.jsx)(oD.Ft,{cardDimensions:n,updateCardDimensions:e=>t("cardDimensions",e)})}),o?(0,a.jsx)(oU,{title:f.ag._({id:"vUBA/H"}),description:f.ag._({id:"n68eVZ"}),icon:x.elf,children:(0,a.jsx)(oO.e,{alignment:i,setAlignment:e=>{t("verticalAlign",e)}})}):(0,a.jsx)(oU,{title:f.ag._({id:"cPp+Ef"}),icon:x.hz8,children:(0,a.jsx)(oN.p,{contentWidth:s,setWidth:e=>{t("defaultContentWidth",e)}})}),(0,a.jsx)(oU,{title:f.ag._({id:"lsVq2Z"}),description:f.ag._({id:"a1DIUk"}),icon:x.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0)}})]})},oW=e=>{let{onClick:t,isSelected:n,icon:i,label:r,description:s,tooltip:o}=e,l=(0,a.jsxs)(tE.K,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:n?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:n?"trueblue.500":"gray.200",color:n?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,a.jsx)(u.xu,{pb:"0",fontSize:"md",children:(0,a.jsx)(p.G,{icon:i})}),(0,a.jsx)(d.x,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),s&&(0,a.jsx)(d.x,{fontSize:"xs",color:"blackAlpha.600",children:s})]});return o?(0,a.jsx)(oM.u,{label:o,placement:"top",children:l}):(0,a.jsx)(a.Fragment,{children:l})},oH=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:n,onSelectNewStyle:i,onSelectCustomStyle:r}=e;return(0,a.jsxs)(a.Fragment,{children:[t.map(e=>{let t=oG.AH[e];return(0,a.jsx)(oW,{label:t.label(),icon:t.icon,isSelected:n===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>i(e)},e)}),(0,a.jsx)(oW,{label:f.ag._({id:"8Tg/JR"}),icon:x.cRF,isSelected:"custom"===n,onClick:r})]})},oq=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:n,savedVerticalAlign:i,savedDefaultContentWidth:r,savedFontSize:s}=e,o=oG.AH[t],l=oG.AH[n],a=(null==o?void 0:o.docSettings.cardDimensions)==="fluid";return{...l.docSettings,styleTemplate:n,verticalAlign:a?l.docSettings.verticalAlign:i,defaultContentWidth:a&&"custom"!==t?r:l.docSettings.defaultContentWidth,fontSize:null!=s?s:l.docSettings.fontSize}},oB=e=>{let{updateDocAttribute:t,bulkUpdateDocSettings:n,updateDocSetting:i}=e,{defaultContentWidth:r,verticalAlign:s,styleTemplate:o,fontSize:l,cardDimensions:c,defaultFullBleed:h}=(0,F.CG)(W.US),{format:m}=(0,F.CG)(W.Bk),f=m||"deck",g=oG.Gd[f],j=o||g.styleTemplates[0];return(0,a.jsx)(tE.K,{spacing:5,mt:4,divider:(0,a.jsx)(rR.i,{}),children:(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(or.l,{children:"Page style"}),(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(nb.v,{children:[(0,a.jsx)(ny.j,{textAlign:"left",fontWeight:"400",as:ef.z,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,a.jsx)(p.G,{icon:x.gc2}),leftIcon:(0,a.jsx)(p.G,{icon:g.icon}),w:"100%",children:g.name()}),(0,a.jsx)(nk.q,{children:(0,a.jsx)(nw._,{title:"Format",children:Object.keys(oG.Gd).map(e=>{let i=oG.Gd[e];return(0,a.jsxs)(rc.s,{onClick:()=>{t("format",e);let r=i.styleTemplates[0],s=oG.AH[r].docSettings;n({styleTemplate:i.styleTemplates[0],...s})},children:[(0,a.jsx)(p.G,{icon:i.icon,fixedWidth:!0}),(0,a.jsx)(u.xu,{flex:1,ml:2,children:(0,a.jsx)(d.x,{children:i.name()})}),e===f&&(0,a.jsx)(p.G,{icon:x.LEp})]},e)})})})]}),(0,a.jsx)(rF.E,{children:(0,a.jsx)(oH,{styleTemplateKeys:g.styleTemplates,onSelectNewStyle:function(e){n(oq({selectedStyleTemplateKey:j,newTemplateKey:e,savedVerticalAlign:s,savedDefaultContentWidth:r,savedFontSize:l}))},onSelectCustomStyle:function(){i("styleTemplate","custom")},selectedStyleTemplateKey:j})}),"custom"===j&&(0,a.jsx)(oF,{cardDimensionsKey:c,verticalAlign:s,defaultFullBleed:h,updateDocSetting:i,defaultContentWidth:r}),(0,a.jsx)(rR.i,{})]})]})})};var oV=n(47055),oK=n(51088);let oZ=e=>{let{editor:t}=e,n=(0,F.CG)(W.Pu),i=(0,F.CG)(W.XV),r=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,a.jsx)(oK.o,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,a.jsxs)(nH.b,{children:[(0,a.jsx)(rM.z,{}),(0,a.jsx)(m.cC,{id:"dyXYfJ"})]}),isDark:(0,t2.wj)(n),isValidSource:oV.Rr})};var oY=n(85573);let oJ=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,a.jsxs)(d.x,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,a.jsx)(p.G,{icon:e3.e7M})," ",t,"/",n]})};var oX=n(40914),oQ=n(77742),o$=n(69419),o0=n(92768),o1=n(37733),o2=n(12194),o5=n(35534);let o3=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},o4=()=>{let e=(0,ie.p)(),[t,n]=(0,v.useState)(!1),{openPageSetup:i}=(0,tq.AA)(),r=(0,o5._O)(),s=(0,F.CG)(tU.yx),o=(0,F.CG)(eA.lH),[l,{loading:c}]=(0,tF.qbt)(),h=o3(o,null==s?void 0:s.id),[x,p]=(0,v.useState)(()=>(0,eO.es)(h||"")),[f,g]=(0,v.useState)(()=>(0,eO.es)(h||"")),j=(0,eO.gT)({routes:(null==o?void 0:o.routes)||[],path:(0,eO.fJ)(x),docId:null==s?void 0:s.id}),C=!!j,b=f!==x&&!C,y=(0,v.useCallback)(()=>{p(f)},[f]),k=(0,v.useCallback)(()=>{if(!b)return;if(!(null==o?void 0:o.id)||!(null==s?void 0:s.id)){console.error("Missing site or doc");return}let t=(0,eO.Is)(x);l({variables:{input:{siteId:o.id,docId:s.id,path:t}},refetchQueries:["GetSite"]}).then(()=>{g((0,eO.es)(t)),p((0,eO.es)(t)),n(!0)}).catch(t=>{e({status:"error",title:(0,a.jsx)(m.cC,{id:"dl5vwx"}),description:t.message}),console.error("[UrlSlugForm] Error setting route",t.message)})},[b,null==s?void 0:s.id,x,l,null==o?void 0:o.id,e]);return r?(0,a.jsxs)(tE.K,{pb:6,children:[(0,a.jsx)(tE.K,{direction:"row",children:(0,a.jsxs)(d.x,{children:[(0,a.jsx)(m.cC,{id:"dq8+qI"})," "]})}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(em.U,{spacing:1,children:(0,a.jsxs)(oi.NI,{as:"fieldset",isInvalid:C,children:[(0,a.jsx)(em.U,{children:(0,a.jsxs)(nY.B,{children:[(0,a.jsx)(o0.Ui,{children:"/"}),(0,a.jsx)(oY.I,{isDisabled:c,bg:"white",flex:2,value:x,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),k())},onChange:e=>{p((0,o2.IR)(e.currentTarget.value))}}),(0,a.jsx)(o1.R,{in:b,unmountOnExit:!0,children:(0,a.jsx)(u.xu,{ml:2,children:(0,a.jsxs)(eg.h,{w:"100%",children:[(0,a.jsx)(ef.z,{variant:"solid",isLoading:c,isDisabled:C,onClick:k,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})}),(0,a.jsx)(ef.z,{onClick:y,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})})]})})})]})}),j?(0,a.jsx)(os.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,a.jsx)(d.x,{fontSize:"xs",children:(0,a.jsx)(m.cC,{id:"DQaTdC",components:{0:(0,a.jsx)(i2.r,{textDecoration:"underline",onClick:()=>i(j.docId,"preview")})}})})}):(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(oi.Q6,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"ZMlbHK"})}),t&&(0,a.jsxs)(nH.b,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,a.jsx)(rM.z,{}),(0,a.jsx)(nB.X,{children:(0,a.jsx)(m.cC,{id:"ZyBxCy"})})]})]})]})})})]}):(0,a.jsx)(a.Fragment,{})},o6=e=>{let{updateDocSetting:t}=e,{metaDescription:n}=(0,F.CG)(W.US),i=(0,F.CG)(W.yx),r=(0,F.CG)((0,oX.cn)(null==i?void 0:i.id)),s=(0,F.CG)(oX.$4),[o,l]=(0,v.useState)(()=>(null==i?void 0:i.title)||""),[c,h]=(0,v.useState)(()=>n||""),x=i&&!!i.site&&(0,eO.Vr)(i.site),[p]=(0,tF.D1_)(),g=(0,v.useCallback)(e=>{i&&p({variables:{id:i.id,title:e,titleEdited:!0}})},[i,p]),j=(0,tg.Kt)(g,300),C=(0,v.useCallback)(e=>{l(e.target.value.substring(0,o$.S8)),j(e.target.value.substring(0,o$.S8))},[j]),b=(0,v.useCallback)(e=>{t("metaDescription",e)},[t]),y=(0,tg.Kt)(b,300),k=(0,F.CG)(oX.NN),w=null==k?void 0:k.previewUrl,E=(0,J.dU)(null==i?void 0:i.organization),I=(0,S.U)(o||r,E),A=(0,S.V)(c||s,E);return(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(oi.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"MHrjPM"})}),(0,a.jsx)(oJ,{length:o.length||0,idealLength:o$.si,maxLength:o$.S8})]}),(0,a.jsx)(oY.I,{value:o,placeholder:r||f.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&g(o)},onChange:C,"data-title-input":!0})]}),(null==i?void 0:i.site)&&(0,a.jsx)(o4,{}),(0,a.jsxs)(oi.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"Nu4oKW"})}),(0,a.jsx)(oJ,{length:c.length||0,idealLength:o$.cl,maxLength:o$.Us})]}),(0,a.jsx)(nJ.g,{bg:"white",rows:4,value:c,placeholder:(null==s?void 0:s.trim())||f.ag._({id:"2VBqT4"}),onChange:e=>{h(e.target.value.substring(0,o$.Us)),y(e.target.value.substring(0,o$.Us))}})]}),(0,a.jsxs)(u.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,a.jsxs)(tE.K,{spacing:2,mb:4,children:[(0,a.jsx)(d.x,{size:"sm",children:(0,a.jsx)(m.cC,{id:"h8sMnd"})}),(0,a.jsx)(o8,{title:I,description:A,screenshotUrl:w})]}),x&&(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(rR.i,{}),(0,a.jsx)(d.x,{size:"sm",children:(0,a.jsx)(m.cC,{id:"d3xOlk"})}),(0,a.jsx)(o9,{title:I,description:A,screenshotUrl:w}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"Ubf8D8"})})]})]}),(0,a.jsx)(oQ.V,{label:(0,a.jsx)(m.cC,{id:"SDyz5I"}),segmentEvent:tx.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:i})]})},o8=e=>{let{title:t,description:n,screenshotUrl:i}=e;return(0,a.jsxs)(u.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,a.jsx)(o_.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,a.jsx)(u.xu,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative"})}),(0,a.jsxs)(tE.K,{px:4,py:3,spacing:1,children:[(0,a.jsx)(d.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,a.jsx)(d.x,{fontSize:"xs",noOfLines:2,children:n})]})]})},o9=e=>{let{title:t,description:n}=e;return(0,a.jsxs)(tE.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,a.jsx)(d.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,a.jsx)(d.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},o7=["cards","background","preview"],le=e=>{let{editor:t}=e,n=(0,F.CG)(W.ke),{isOpen:i,onClose:r,onOpen:s}=(0,nc.M)({id:"pageSetupDisclosure"}),[o,l]=(0,v.useState)(0),c=(0,e$.ye)("cardPageStyles");(0,v.useEffect)(()=>{let e=e=>{l(o7.indexOf(e)),s()},t=og.T.on("openPageSetup",e),n=nh.pw.on(nh.TI.OPEN_PAGE_SETUP,e);return()=>{t(),n()}},[s,r]);let d=(0,oa.A)(t),h=(0,v.useCallback)((e,n)=>{null==t||t.commands.updateAttributesAtPos(0,{[e]:n})},[t]),f=(0,v.useCallback)((e,n)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:{[e]:n}})},[t]),g=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:e})},[t]),j=(0,oy.S)({base:"calc(100% - 1rem)",lg:"auto"}),C=(0,oy.S)({base:"bottom",lg:"right"})||"right";return t?(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,isOpen:i,placement:C,onClose:r,size:"md",blockScrollOnMount:!1,children:[(0,a.jsx)(tV.Z,{background:{base:void 0,lg:"none"}}),(0,a.jsxs)(tK.s,{"data-testid":"page-setup-drawer",onKeyDown:d,h:j,children:[(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"fvaOtb"})}),(0,a.jsx)(tY.f,{overflowX:"hidden",children:(0,a.jsxs)(ok.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:o,onChange:l,children:[(0,a.jsxs)(ow.t,{children:[(0,a.jsxs)(oS.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.s2})}),(0,a.jsx)(m.cC,{id:"Ccpbzh"})]}),(0,a.jsxs)(oS.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.UHQ})}),(0,a.jsx)(m.cC,{id:"GtJbUa"})]}),(0,a.jsxs)(oS.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.g4A})}),(0,a.jsx)(m.cC,{id:"rdUucN"})]})]}),(0,a.jsxs)(oE.n,{children:[(0,a.jsx)(oI.x,{p:2,mt:4,children:c?(0,a.jsx)(oB,{editor:t,updateDocSetting:f,bulkUpdateDocSettings:g,updateDocAttribute:h},n):(0,a.jsx)(oR,{editor:t,updateDocSetting:f},n)}),(0,a.jsx)(oI.x,{p:2,mt:4,children:(0,a.jsx)(oZ,{editor:t,updateDocSetting:f},n)}),(0,a.jsx)(oI.x,{p:2,mt:4,children:(0,a.jsx)(o6,{editor:t,updateDocSetting:f},n)})]})]})})]})]})}):null},lt=e=>{let{editor:t,withDrawer:n=!1,onClick:i,icon:r,label:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:r||(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),onClick:i||(()=>{og.T.emit("openPageSetup","cards")}),children:s||(0,a.jsx)(m.cC,{id:"Kx2GmY"})}),n&&(0,a.jsx)(le,{editor:t})]})},ln=e=>{let{site:t}=e,n=(0,oh.Z)((0,ox.Z)(t.createdTime),"PPP");return(0,a.jsxs)(u.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsx)(d.x,{noOfLines:6,children:t.name}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:n}})})]})};var li=n(4476);let lr=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,a.jsxs)(rx.u_,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T3exbL",values:{domainName:n}})})})}),(0,a.jsx)(tY.f,{children:(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"DkFGZj"})})})}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"red",isLoading:r,onClick:i,loadingText:f.ag._({id:"EF2EU9"}),children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})]})]})};var ls=n(56453),lo=n(75397),ll=n(97010),la=n(44438);let lc=e=>{let{code:t,data:n}=e;switch(t){case tF.ec5.AddARecord:return(0,a.jsx)(m.cC,{id:"ZIfa5n",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(la.E,{})}});case tF.ec5.AddCnameRecordSubdomain:return(0,a.jsx)(m.cC,{id:"edcjuc",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(la.E,{}),2:(0,a.jsx)(la.E,{})}});case tF.ec5.EditCnameRecordSubdomain:return(0,a.jsx)(m.cC,{id:"ngCUo8",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)(la.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(la.E,{})}});case tF.ec5.RemoveARecord:return(0,a.jsx)(m.cC,{id:"GLzRh5",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(la.E,{})}});case tF.ec5.RemoveAaaaRecord:return(0,a.jsx)(m.cC,{id:"g1KLfp",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(la.E,{})}});case tF.ec5.AddCnameRecordWww:return(0,a.jsx)(m.cC,{id:"hFQUqJ",values:{0:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(la.E,{})}});case tF.ec5.EditCnameRecordWww:return(0,a.jsx)(m.cC,{id:"LmV2TD",values:{0:n.cnameDomain},components:{0:(0,a.jsx)(la.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(la.E,{})}});case tF.ec5.ContactGammaSupport:return(0,a.jsx)(m.cC,{id:"pGrCiS"});case tF.ec5.SslModeFullCloudflare:return(0,a.jsx)(m.cC,{id:"D61i6v"});case tF.ec5.CheckDnsCloudflare:return(0,a.jsx)(m.cC,{id:"gYfbYc"})}return(0,a.jsx)(a.Fragment,{})},ld=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,s=(0,ie.p)(),o=null==i?void 0:i.name,l=null==o?void 0:o.split(".")[0].split("-").slice(-1)[0],[c,u]=(0,v.useState)(null==o?void 0:o.split(".")[0].split("-").slice(0,-1).join("-")),h=null==o?void 0:o.split(".").slice(1).join("."),[x,{loading:p}]=(0,tF.gVY)(),g=(0,v.useCallback)(()=>{x({variables:{input:{siteId:r,name:c}}}).then(()=>{s({title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"YoFYYT"}),description:(0,a.jsx)(m.cC,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[x,r,c,s,n]);return(0,a.jsxs)(rx.u_,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"VMKg48"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(oi.NI,{children:[(0,a.jsxs)(em.U,{children:[(0,a.jsx)(oY.I,{value:c,onKeyDown:e=>{"Enter"===e.key&&g()},onChange:e=>{u((0,o2.IR)(e.target.value))},placeholder:f.ag._({id:"dcSbw0"})}),(0,a.jsxs)(or.l,{whiteSpace:"nowrap",children:["-",l,".",h]})]}),(0,a.jsx)(oi.Q6,{lineHeight:"normal",children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"bvN4Vx"})})})]})}),(0,a.jsxs)(tJ.m,{children:[(0,a.jsx)(ef.z,{onClick:n,mr:3,variant:"ghost",children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:g,isLoading:p,isDisabled:c.length<3,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})]})]})]})},lu={pending:{tooltip:(0,a.jsx)(m.cC,{id:"/BjVEU"}),badgeText:(0,a.jsx)(m.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,a.jsx)(m.cC,{id:"7Bj3x9"}),badgeText:(0,a.jsx)(m.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},lh=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:s}=lu[t];return(0,a.jsx)(ej.kH,{label:i,placement:"top",children:(0,a.jsx)(on.C,{display:"flex",justifyContent:"center",colorScheme:s,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},lx=e=>{var t,n,i;let{domain:r,onDomainSetupClick:s,path:o,onDeleteClick:l,numDomains:c,siteId:h}=e,g=(0,eO.mn)({domain:r,path:o}),j=(0,ie.p)(),C=!r.builtin,b=r.builtin,y=C&&("verified"!==r.status||"verified"===r.status&&c>1),[k]=(0,tF.NEQ)(),{data:w}=(0,tF.pKQ)({variables:{name:r.name},skip:r.builtin||"failed"===r.status}),S=(0,v.useCallback)(async()=>{await k({variables:{id:r.id}}),j({title:(0,a.jsx)(m.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[k,r.id,j]),{isOpen:E,onOpen:A,onClose:_}=(0,I.q)({id:"edit-domain-modal"});return(0,a.jsxs)(ls.Z,{variant:"outline",children:[(0,a.jsx)(lo.e,{children:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsxs)(em.U,{children:[(0,a.jsx)(tE.K,{children:"verified"===r.status?(0,a.jsx)(ej.kH,{label:g,placement:"top",children:(0,a.jsx)(ef.z,{as:i2.r,variant:"link",href:g,wordBreak:"break-all",target:"_blank",rightIcon:(0,a.jsx)(u.xu,{ml:2,children:(0,a.jsx)(p.G,{icon:e3.wlW,size:"xs"})}),whiteSpace:"normal",children:r.name})}):(0,a.jsx)(d.x,{children:r.name})}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(em.U,{children:(0,a.jsx)(lh,{status:r.status,onClick:"failed"===r.status?S:null})}),(0,a.jsxs)(eg.h,{children:[b&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"VMKg48"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:A,"aria-label":f.ag._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,a.jsx)(p.G,{icon:x.Xcf})})}),C&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"UqSZMD"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:()=>{s(r.name)},"aria-label":f.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,a.jsx)(p.G,{icon:x.DBf})})}),y&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"C2YqXi"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:()=>{l(null==r?void 0:r.id)},"aria-label":f.ag._({id:"C2YqXi"}),size:"sm",variant:"ghost",colorScheme:"red",icon:(0,a.jsx)(p.G,{icon:x.Vui})})})]})]}),b&&(0,a.jsx)(u.xu,{children:(0,a.jsxs)(d.x,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,a.jsx)(m.cC,{id:"Zzuxg+"})," ",(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"FdwjYK"})})]})}),(null==w?void 0:w.checkDomain)&&(null===(t=w.checkDomain.actions)||void 0===t?void 0:t.length)&&(null===(i=w.checkDomain)||void 0===i?void 0:null===(n=i.dns)||void 0===n?void 0:n.status)!==tF.lK9.Ok&&(0,a.jsxs)(tE.K,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,a.jsxs)(d.x,{children:[(0,a.jsx)(m.cC,{id:"ezr3/E"})," "]}),(0,a.jsx)(ll.QI,{pl:"0",spacing:"2",children:((null==w?void 0:w.checkDomain.actions)||[]).map(e=>(0,a.jsx)(ll.HC,{sx:{code:{fontSize:"xxs",bg:"gray.100",color:"gray.800"}},children:lc(e)},e.code))})]})]})}),(0,a.jsx)(ld,{isOpen:E,onClose:_,domain:r,siteId:h})]})},lp=()=>{let e=(0,v.useRef)(!1),[t,n]=(0,v.useState)(()=>void 0!==window.entri);return(0,tg.Gq)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}},lm=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},lf=async()=>{let e=await lm();if(!window.entri)throw Error("Entri not found");let{dnsRecords:t}=(0,eO.Yd)(""),n={applicationId:"gamma",token:e,dnsRecords:t};return console.log("[launchEntri] Purchasing Entri with config",n),window.entri.purchaseDomain(n),lj()},lg=async e=>{let t=await lm(),{domain:n,dnsRecords:i}=(0,eO.Yd)(e),r={applicationId:"gamma",token:t,prefilledDomain:n,dnsRecords:i};return console.log("[launchEntri] Launching Entri with config",r),window.entri.showEntri(r),lj()},lj=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s,o;t((null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error)?"".concat((null===(s=i.detail.error)||void 0===s?void 0:s.title)?"".concat(i.detail.error.title,": "):""," ").concat((null===(o=i.detail.error)||void 0===o?void 0:o.details)?i.detail.error.details:""):void 0)}};window.addEventListener("onEntriClose",n,!1)}),lv=e=>{let{siteId:t}=e,n=(0,eN.z$)(),{entriReady:i}=lp(),r=(0,ie.p)(),[s,o]=(0,v.useState)(!1),[l,{loading:c}]=(0,tF.kui)(),d=(0,v.useCallback)(async()=>{t&&(o(!0),lf().then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(eN.AA.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),l({variables:{input:{name:i,siteId:t,method:tF.Q0V.Purchase}}}).then(()=>{null==n||n.track(eN.AA.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),r({title:(0,a.jsx)(m.cC,{id:"5Ae0kE"}),description:(0,a.jsx)(m.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),r({title:(0,a.jsx)(m.cC,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),r({title:e?(0,a.jsx)(m.cC,{id:"H7PVmT"}):(0,a.jsx)(m.cC,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{o(!1)}))},[l,n,t,r]);return t?(0,a.jsx)(ef.z,{variant:"outline",size:"md",onClick:d,isLoading:s,isDisabled:!i,children:(0,a.jsx)(m.cC,{id:"+VODT0"})}):null},lC=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:s,domainToTransfer:o,isTransferring:l}=e,c=(0,v.useCallback)(()=>{s(),n()},[n,s]),u=(0,v.useCallback)(async()=>{r(),n()},[n,r]);return o?(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(rx.u_,{isOpen:t,onClose:c,size:"lg",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"hqplvI"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(d.x,{children:o.siteArchived?(0,a.jsx)(m.cC,{id:"SeHn75",values:{domainName:i,0:o.siteName}}):(0,a.jsx)(m.cC,{id:"tX38ij",values:{domainName:i,0:o.siteName}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"rKH6wM"})})]})}),(0,a.jsxs)(tJ.m,{children:[(0,a.jsx)(ef.z,{variant:"ghost",mr:3,onClick:c,children:(0,a.jsx)(m.cC,{id:"yz7wBu"})}),(0,a.jsx)(ef.z,{isLoading:l,variant:"ghost",colorScheme:"red",onClick:u,children:(0,a.jsx)(m.cC,{id:"vTZxnA"})})]})]})]})}):(0,a.jsx)(a.Fragment,{})},lb=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:s,isAddingDomain:o,refetchSites:l}=e,c=(0,e$.ye)("purchaseDomain"),u=(0,ie.p)(),{currentWorkspace:h}=(0,eJ.SE)(),[x,p]=(0,v.useState)(),[g,j]=(0,v.useState)(),[C,b]=(0,v.useState)(""),{isOpen:y,onOpen:k,onClose:w}=(0,I.q)({id:"delete-domain-modal"}),{isOpen:S,onOpen:E,onClose:A}=(0,nc.M)({id:"transferDomainModal"}),[_,{loading:T}]=(0,tF.KtP)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),O=n.domains.find(e=>e.id===x),D=(0,eO.m6)(C)&&void 0===n.domains.find(e=>e.name===C),[R,{loading:P}]=(0,tF.Yqv)(),[L,{loading:z}]=(0,tF.dLz)(),[G,N]=(0,v.useState)(void 0),M=(0,v.useCallback)(async e=>{var t;let i=await _({variables:{name:e,workspaceId:null==h?void 0:h.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,o=null==r?void 0:r[0];if(n&&o){j(o),E();return}s(e),j(void 0),b("")},[null==h?void 0:h.id,_,s,E,n]);(0,tg.vm)(()=>{x?N(null==O?void 0:O.name):N(void 0)},[x,null==O?void 0:O.name],[x]);let U=(0,v.useCallback)(()=>{w(),p(()=>void 0)},[w]),F=(0,v.useCallback)(async()=>{O&&(await R({variables:{id:x}}),await l(),u({title:(0,a.jsx)(m.cC,{id:"V4fbcv",values:{0:O.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),U())},[l,R,x,O,U,u]),W=(0,o5.Y)("custom_domains"),H=W&&c,q=(0,eO.Zz)(n.domains),B=(0,v.useCallback)(()=>{j(void 0)},[]),V=(0,v.useCallback)(async()=>{g&&(await L({variables:{id:null==g?void 0:g.id,siteId:n.id},refetchQueries:["GetSite"]}),u({title:(0,a.jsx)(m.cC,{id:"dHhDGG",values:{0:g.name}}),position:"top",status:"success",duration:5e3}),b(""),j(void 0))},[g,n.id,u,L]);return(0,a.jsxs)(tE.K,{spacing:8,p:2,children:[W&&(0,a.jsxs)(tE.K,{spacing:4,mb:2,children:[H&&(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontSize:"md",children:(0,a.jsx)(m.cC,{id:"gBiND0"})}),(0,a.jsx)(lv,{siteId:null==n?void 0:n.id})]}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{children:H?(0,a.jsx)(m.cC,{id:"9UtMWk"}):(0,a.jsx)(m.cC,{id:"ssWCSl"})}),(0,a.jsxs)(em.U,{children:[(0,a.jsx)(oY.I,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?f.ag._({id:"jt/2Ky"}):f.ag._({id:"1y9z1r"}),value:C,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"===e.key&&D&&(e.preventDefault(),M(C))}}),(0,a.jsx)(tE.K,{children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:D,children:(0,a.jsx)(ef.z,{isDisabled:!D,variant:"plain",onClick:()=>{M(C)},isLoading:o||T,children:(0,a.jsx)(m.cC,{id:"EdEpYN"})})})})]})]})]}),(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(m.cC,{id:"bwl+tv"}),q.map(e=>(0,a.jsx)(lx,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{p(e),k()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!W&&(0,a.jsx)(rz.m,{segmentEvent:eN.AA.GAMMA_PRO_UPSELL_DOMAINS,title:(0,a.jsx)(m.cC,{id:"m6aLo0"}),description:(0,a.jsx)(m.cC,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:Y.x8,GAMMA_PROPER_NOUN:Y.N6}})}),y&&(0,a.jsx)(lr,{onClose:U,onDelete:F,domainName:G,isDeleting:P}),(0,a.jsx)(lC,{isOpen:S,onClose:A,onTransferCancel:B,domainName:C,domainToTransfer:g,onTransferConfirm:V,isTransferring:z})]})};var ly=n(12483);let lk=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[s,o]=(0,v.useState)("initial"),{entriReady:l}=lp(),[u,h]=(0,v.useState)(!1),f=(0,ie.p)(),{dnsRecords:g,isRootDomain:j,subdomain:C}=(0,v.useMemo)(()=>(0,eO.Yd)(i||""),[i]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(rx.u_,{isOpen:t,onClose:n,size:"3xl",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"xQMU8T",values:{domainName:i}})}),(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(tY.f,{children:["initial"===s&&(0,a.jsx)(ls.Z,{variant:"filled",children:(0,a.jsx)(lo.e,{children:(0,a.jsxs)(tE.K,{spacing:4,py:4,mx:"auto",children:[(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(d.x,{textAlign:"center",fontSize:"2xl",children:(0,a.jsx)(p.G,{icon:x.g4A,size:"lg"})}),(0,a.jsx)(d.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,a.jsx)(m.cC,{id:"w5l5pM"})})]}),(0,a.jsx)(d.x,{textAlign:"center",maxW:"unset",children:(0,a.jsx)(m.cC,{id:"MhdvBQ"})})]}),(0,a.jsx)(c.k,{align:"center",justify:"center",w:"100%",children:(0,a.jsxs)(tE.K,{w:64,maxW:"100%",children:[(0,a.jsx)(ef.z,{size:"md",variant:"solid",isDisabled:!l,isLoading:u,onClick:()=>{i&&(h(!0),lg(i).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&ly.Tb("[entri.showEntri] Error setting up domain: ".concat(e)),f({title:e?(0,a.jsx)(m.cC,{id:"l/2jzv"}):(0,a.jsx)(m.cC,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{h(!1)}))},children:(0,a.jsx)(m.cC,{id:"qu+sXe"})}),(0,a.jsxs)(em.U,{children:[(0,a.jsx)(rR.i,{}),(0,a.jsx)(d.x,{color:"gray.600",children:(0,a.jsx)(m.cC,{id:"BzEFor"})}),(0,a.jsx)(rR.i,{})]}),(0,a.jsx)(ef.z,{size:"md",variant:"plain",onClick:()=>{o("manualSetup")},children:(0,a.jsx)(m.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===s&&(0,a.jsx)(ls.Z,{variant:"filled",children:(0,a.jsx)(lo.e,{children:(0,a.jsxs)(tE.K,{spacing:6,children:[(0,a.jsx)(d.x,{fontWeight:"semibold",fontSize:"lg",children:(0,a.jsx)(m.cC,{id:"L5N7HX"})}),(0,a.jsxs)(sc.i,{variant:"simple",children:[(0,a.jsx)(ss.h,{children:(0,a.jsxs)(so.Tr,{children:[(0,a.jsx)(sl.Th,{children:(0,a.jsx)(m.cC,{id:"6YtxFj"})}),(0,a.jsx)(sl.Th,{children:(0,a.jsx)(m.cC,{id:"+zy2Nq"})}),(0,a.jsx)(sl.Th,{isNumeric:!0,children:(0,a.jsx)(m.cC,{id:"HKH+W+"})})]})}),(0,a.jsx)(sd.p,{children:(g||[]).map(e=>(0,a.jsxs)(so.Tr,{children:[(0,a.jsx)(su.Td,{fontFamily:"mono",children:e.host}),(0,a.jsx)(su.Td,{fontFamily:"mono",children:e.type}),(0,a.jsx)(su.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,a.jsxs)(nH.b,{status:"info",colorScheme:"orange",children:[(0,a.jsx)(rM.z,{}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontWeight:"bold",fontSize:"md",children:(0,a.jsx)(m.cC,{id:"NxHkkp"})}),(0,a.jsxs)(ll.GS,{pl:"4",spacing:"2",children:[j?1===o$.Co.length?(0,a.jsx)(ll.HC,{children:(0,a.jsx)(m.cC,{id:"wz2Cgq",values:{0:o$.Co[0]},components:{0:(0,a.jsx)(la.E,{colorScheme:"gray"}),1:(0,a.jsx)(la.E,{colorScheme:"gray"})}})}):(0,a.jsx)(ll.HC,{children:(0,a.jsx)(m.cC,{id:"+kOqFW",values:{0:o$.Co.slice(0,-1).map(e=>(0,a.jsx)(la.E,{colorScheme:"gray",children:e},e)),1:o$.Co.slice(-1)[0]},components:{0:(0,a.jsx)(la.E,{colorScheme:"gray"}),1:(0,a.jsx)(em.U,{display:"inline",divider:(0,a.jsx)("span",{children:", "})}),2:(0,a.jsx)(la.E,{colorScheme:"gray"})}})}):null,j&&(0,a.jsx)(ll.HC,{children:(0,a.jsx)(m.cC,{id:"vLov0O",components:{0:(0,a.jsx)(la.E,{colorScheme:"gray"}),1:(0,a.jsx)(la.E,{colorScheme:"gray"})}})}),(0,a.jsx)(ll.HC,{children:(0,a.jsx)(m.cC,{id:"Jmb6Yp",values:{subdomain:C,GAMMA_SITES_HOST:o$.ax},components:{0:(0,a.jsx)(la.E,{colorScheme:"gray"}),1:(0,a.jsx)(la.E,{colorScheme:"gray"}),2:(0,a.jsx)(la.E,{colorScheme:"gray"})}})})]})]})]}),r&&(0,a.jsxs)(em.U,{justifyContent:"space-between",children:[(0,a.jsx)(ef.z,{variant:"plain",onClick:()=>o("initial"),children:(0,a.jsx)(m.cC,{id:"iH8pgl"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,a.jsx)(m.cC,{id:"RyhVuk"})})]})]})})})]}),(0,a.jsx)(tJ.m,{})]})]})})},lw=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,a.jsx)(ir.W,{py:16,maxW:"container.md",children:t}):(0,a.jsx)(a.Fragment,{children:t})},lS=e=>{let{showHeadings:t=!0}=e,n=(0,eN.z$)(),i=(0,F.CG)(eA.lH),r=(0,ie.p)(),{refetch:s}=(0,ib.ZUZ)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:o,onOpen:l,onClose:u}=(0,nc.M)({id:"domainSetupModal"}),h=null==i?void 0:i.domains.find(e=>"pending"===e.status),[x,p]=(0,v.useState)(null),[f,{loading:g}]=(0,ib.kui)(),[j,C]=(0,v.useState)();(0,v.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{s()},1e4);return()=>{clearInterval(e)}},[h,s,i]);let b=(0,v.useCallback)(e=>{C(e),l()},[l]),y=(0,v.useCallback)(e=>{let{domainName:t,source:s}=e;"addDomain"===x&&f({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===s?ib.Q0V.Automatic:ib.Q0V.Manual}}}).then(()=>{null==n||n.track(eN.AA.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:s}),r({title:(0,a.jsx)(m.cC,{id:"p8Oc6N"}),description:(0,a.jsx)(m.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),u()})},[f,n,x,u,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",mt:4,children:(0,a.jsxs)(lw,{shouldWrap:t,children:[t&&(0,a.jsxs)(tE.K,{spacing:1,mb:4,children:[(0,a.jsx)(np.X,{children:(0,a.jsx)(m.cC,{id:"AZ4xlc"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"KuoJwF"})})]}),i?(0,a.jsx)(lb,{site:i,onDomainSetupClick:b,onAddDomain:e=>{l(),C(e),p("addDomain")},isAddingDomain:g,refetchSites:s}):(0,a.jsx)(t$.AA,{}),o&&j&&(0,a.jsx)(lk,{domainName:j,isOpen:o,onClose:()=>{u(),p(null)},onDomainConfirmed:x?y:null})]})})};var lE=n(20437),lI=n(72842),lA=n(9355),l_=n(62935),lT={src:"/_next/static/media/no-navbar.e9d28333.png"},lO={src:"/_next/static/media/top-navbar.97a69a83.png"};let lD=e=>{let t=(0,F.CG)(eA.lH);return t?(0,a.jsx)(lR,{site:t,...e}):null},lR=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,ie.p)(),s=(0,e$.ye)("sitesNav"),[o,l]=(0,v.useState)(t.name),[u,h]=(0,v.useState)(t.gtmContainerId),[g,j]=(0,v.useState)(t.navEnabled),[C,b]=(0,v.useState)(!1),[y,k]=(0,v.useState)(!1),[w,S]=(0,v.useState)(null),{currentWorkspace:E}=(0,eJ.SE)(),[I]=(0,tF.Iyu)(),A=(0,v.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;b(!0);let e={siteId:null==t?void 0:t.id,name:o,navEnabled:g,gtmContainerId:u};!g||(null==t?void 0:t.navContent)||(e.navContent=(0,ez.JB)()),await I({variables:{input:e}}),r({title:(0,a.jsx)(m.cC,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),b(!1)},[u,o,g,t,r,I]),_=(0,v.useCallback)(async e=>{(null==t?void 0:t.id)&&(k(!0),await I({variables:{input:{siteId:null==t?void 0:t.id,faviconUrl:e}}}),r({title:e?(0,a.jsx)(m.cC,{id:"64GEyu"}):(0,a.jsx)(m.cC,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),k(!1))},[null==t?void 0:t.id,r,I]),O=o!==(null==t?void 0:t.name)||g!==(null==t?void 0:t.navEnabled)||u!==(null==t?void 0:t.gtmContainerId);return(0,a.jsxs)(c.k,{w:"100%",flex:1,direction:"column",px:2,children:[(0,a.jsxs)(lw,{shouldWrap:n,children:[n&&(0,a.jsx)(np.X,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,a.jsx)(m.cC,{id:"Tz0i8g"})}),(0,a.jsxs)(tE.K,{spacing:4,mt:6,children:[(0,a.jsxs)(oi.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"Lve3H6"})})}),(0,a.jsx)(oY.I,{onChange:e=>{l(e.currentTarget.value)},placeholder:f.ag._({id:"ZiMSMQ"}),value:o})]}),(0,a.jsxs)(oi.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"+Qaboy"})})}),(0,a.jsx)(c.k,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,a.jsx)(nx.E,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"XyBdok"}),children:(0,a.jsx)(T.h,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:y,size:"sm",icon:(0,a.jsx)(p.G,{icon:x.XAH}),"aria-label":f.ag._({id:"XyBdok"}),onClick:()=>_(null)})})]}):y||w===lA.D.Uploading?(0,a.jsx)(tI.$,{}):(0,a.jsx)(lI.un,{orgId:null==E?void 0:E.id,uploadType:"icon",editType:"icon",dropHereText:f.ag._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{S(lA.D.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await _(n),S(lA.D.Done))},onUploadFailed:e=>{S(lA.D.Error),r({title:(0,a.jsx)(m.cC,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(m.cC,{id:"ifTGl2"})})]}),s&&(0,a.jsxs)(oi.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"UxKoFf"})})}),(0,a.jsxs)(lE.M,{columns:2,spacing:6,flex:1,children:[(0,a.jsx)(lP,{name:f.ag._({id:"Nom9QG"}),src:lO.src,isSelected:g,onClick:()=>{j(!0)}}),(0,a.jsx)(lP,{name:f.ag._({id:"BvDFuc"}),src:lT.src,isSelected:!g,onClick:()=>{j(!1)}})]})]}),(0,a.jsxs)(oi.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"d4WWfP"})})}),(0,a.jsxs)(c.k,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,a.jsx)(c.k,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==u?void 0:u.length)?"gray.800":"gray.500",fontWeight:"400",h:10,pl:4}),(0,a.jsx)(oY.I,{pl:16,placeholder:"XXXXXX",value:u||"",onChange:e=>{h(l_.R.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(m.cC,{id:"6LEeiE",components:{0:(0,a.jsx)("br",{}),1:(0,a.jsx)(ef.z,{"aria-label":"Learn more about Google Tag Manager",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"xs",rightIcon:(0,a.jsx)(rh.h,{ml:-1})})}})})]}),i&&(0,a.jsx)(oQ.V,{label:(0,a.jsx)(m.cC,{id:"SDyz5I"}),segmentEvent:tx.AA.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,a.jsxs)(c.k,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,a.jsx)(e5.L,{}),(0,a.jsx)(ef.z,{variant:"solid",isDisabled:!O,onClick:A,isLoading:C,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})]})})]})},lP=e=>{let{name:t,src:n,onClick:i,isSelected:r,...s}=e;return(0,a.jsxs)(tE.K,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...s,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,a.jsx)(u.xu,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,a.jsx)(nx.E,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,a.jsxs)(em.U,{children:[r&&(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.LEp})}),(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"500",children:t})]})]})},lL=(0,v.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,F.CG)(W.$p),i=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,a.jsx)(ol,{label:f.ag._({id:"fC5kYg"}),helperText:f.ag._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});lL.displayName="CustomCodePanel";let lz=(0,v.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,e$.ye)("docCustomCode");return(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(tE.K,{spacing:8,children:(0,a.jsxs)(eg.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.ovd,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,a.jsx)(m.cC,{id:"AZ4xlc"})}),(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,a.jsx)(m.cC,{id:"Tz0i8g"})}),i&&(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.dT$,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,a.jsx)(m.cC,{id:"E16GGw"})})]})})})});lz.displayName="SettingsPanelHeader";var lG=n(37164);let lN=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,o2.IR)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,lG.x0)(6))),r},lM={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},lU=e=>{let{sites:t}=e,n=(0,F.CG)(W.yx),i=(0,eN.z$)(),{currentWorkspace:r}=(0,eJ.SE)(),[s]=(0,tF.qbt)(),[o,l]=(0,v.useState)(!1),u=(0,ie.p)(),{push:h,reload:f}=(0,ev.useRouter)(),g=(0,v.useCallback)(async e=>{if(!n)return;l(!0);let o=null==t?void 0:t.find(t=>t.id===e),c=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let d=lN({title:n.title,site:o});if(await (0,eO.iL)(c),!c){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(eN.AA.DOC_MOVED_TO_SITE,{doc_id:c,site_id:e}),s({variables:{input:{siteId:e,docId:c,path:d}},refetchQueries:["GetSite"]}).then(()=>{(0,ey.yQ)({docId:c}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",c),u({position:"top",title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"rYG2u6"}),status:"success",duration:5e3}),f()}).catch(e=>{u({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),l(!1)}).finally(()=>{l(!1)})},[i,null==r?void 0:r.id,n,f,s,t,u]);return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)(c.k,{w:"100",h:"400px",maxH:"30vh",children:(0,a.jsx)(t$.AA,{})}),!o&&(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(tE.K,{pt:2,pb:2,children:(0,a.jsxs)(d.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,a.jsx)(m.cC,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ",(0,a.jsxs)(i2.r,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,a.jsx)(m.cC,{id:"Px95UX"}),(0,a.jsx)(rh.h,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,a.jsx)(m.cC,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),null==t?void 0:t.map(e=>(0,a.jsx)(ls.Z,{onClick:()=>g(e.id),onKeyPress:t=>{"Enter"===t.key&&g(e.id)},...lM,children:(0,a.jsx)(lo.e,{children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsxs)(em.U,{children:[e.faviconUrl&&(0,a.jsx)(nx.E,{w:"4",src:e.faviconUrl}),(0,a.jsx)(d.x,{fontWeight:"600",children:e.name})]})}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(p.G,{icon:x.eFW})]})})},e.id))]})]})]})},lF=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,nc.M)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,eJ.SE)(),{data:r,loading:s}=(0,tF.bBo)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),o=null==r?void 0:r.sites;return s?(0,a.jsx)(tI.$,{size:"xs"}):o&&0===o.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.z,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,a.jsx)(m.cC,{id:"hsMvVQ"})}),(0,a.jsxs)(rx.u_,{isOpen:e,onClose:n,size:"3xl",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"i4b0iJ"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tY.f,{maxH:"80vh",overflowY:"auto",children:(0,a.jsx)(lU,{sites:o})}),(0,a.jsx)(tJ.m,{children:(0,a.jsx)(ef.z,{mr:3,onClick:n,children:(0,a.jsx)(m.cC,{id:"yz7wBu"})})})]})]})]})},lW=e=>{let{onEnable:t,isLoading:n}=e;return(0,a.jsxs)(tE.K,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,a.jsx)(nx.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,a.jsx)(np.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",textAlign:"center",css:{textWrap:"pretty"},children:(0,a.jsx)(m.cC,{id:"0864Ii",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"dapHcS",components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)("code",{})}})}),(0,a.jsxs)(tE.K,{w:"100%",children:[(0,a.jsx)(ef.z,{variant:"solid",onClick:t,isLoading:n,children:(0,a.jsx)(m.cC,{id:"oL6HHo"})}),(0,a.jsx)(lF,{})]}),(0,a.jsx)(ef.z,{as:i2.r,variant:"ghost",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,a.jsx)(p.G,{icon:x.gJF,size:"sm"}),children:(0,a.jsx)(m.cC,{id:"Px95UX"})})]})};var lH=n(28165),lq=n(38045),lB=n(25925);let lV=(0,lq.E)(u.xu),lK={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},lZ=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:s,disabledText:o}=e;return(0,a.jsxs)(c.k,{cursor:r?"not-allowed":"pointer",className:(0,h.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,a.jsx)(u.xu,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,a.jsx)(lB.M,{initial:!1,children:t?(0,a.jsx)(lV,{as:"span",position:"absolute",...lK,children:(0,a.jsx)(tI.$,{size:"sm"})},"loading"):i?(0,a.jsx)(lV,{as:"span",position:"absolute",...lK,children:s},"checked"):(0,a.jsx)(lV,{as:"span",position:"absolute",...lK,children:o},"unchecked")})}),(0,a.jsxs)(u.xu,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,a.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,a.jsx)("span",{className:"slider round"})]})]})},lY=(0,lH.F4)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lJ=(0,lH.F4)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lX=(0,lH.F4)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),lQ=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:s="gray.800"}=e;return(0,a.jsx)(u.Cd,{color:s,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(lX," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lY," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lJ," 2.7s infinite")}:{}},children:n?(0,a.jsxs)("span",{className:"fa-stack",children:[(0,a.jsx)(p.G,{icon:x.u6k,className:"fa-stack-1x"}),(0,a.jsx)(p.G,{icon:t,className:"fa-stack-1x"})]}):(0,a.jsx)(p.G,{size:"1x",icon:t})})},l$=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:s}=e,o=(0,eO.Vr)(n),l=(0,rn.Lu)(),h=(0,eJ.py)("manage",s),p=l||h,f=!!(t||r||!p),g=(0,eO.k2)(n),j=p?r||(t?(0,a.jsx)(m.cC,{id:"mkk40+"}):o?(0,a.jsx)(m.cC,{id:"f4CBNf"}):(0,a.jsx)(m.cC,{id:"5G4vd5"})):(0,a.jsx)(m.cC,{id:"Z2uNdQ"});return n?(0,a.jsxs)(em.U,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,a.jsx)(u.xu,{children:(0,a.jsxs)(c.k,{alignItems:"center",children:[(0,a.jsx)(lQ,{shouldPulse:g,bg:g?"#6910D1":"gray.200",color:g?"white":"gray.800",icon:g?x.cL$:x.g4A}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(em.U,{children:(0,a.jsx)(d.x,{children:g?(0,a.jsx)(m.cC,{id:"MuDTSp"}):o?(0,a.jsx)(m.cC,{id:"AAm5jh"}):(0,a.jsx)(m.cC,{id:"HzFHhy"})})}),(0,a.jsx)(c.k,{align:"center",children:(0,a.jsx)(em.U,{spacing:1,align:"center",children:(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&g?(0,a.jsx)(rs,{site:n}):o?(0,a.jsx)(m.cC,{id:"N4VTXP"}):(0,a.jsx)(m.cC,{id:"1bmqGL"})})})})]})]})}),(0,a.jsx)(u.xu,{children:(0,a.jsx)(ej.kH,{label:j,placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(lZ,{isChecked:o,isDisabled:f,isLoading:t,onChange:i})})})]}):null},l0=e=>{var t,n;let{doc:i,isOpen:r,onOpen:s,onPublishSettingsClose:o}=e,l=(0,ie.p)(),d=(0,F.TL)(),u=(0,F.CG)(eA.lH),h=(0,F.CG)(eA.$U),{editor:x}=(0,tw._i)(),{currentWorkspace:p}=(0,eJ.SE)(),[f,g]=(0,v.useState)(!1),[j]=(0,tF.V$$)(),[C]=(0,tF.cxO)(),[b]=(0,tF.A0Z)(),[y]=(0,tF.UoQ)(),[k,w]=(0,v.useState)("domains"),S=i.id,E=i.title,I=null==p?void 0:p.id,A=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,_=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",T=(null==u?void 0:u.archived)?(0,a.jsx)(m.cC,{id:"VAyYv6"}):null,{query:O}=(0,ev.useRouter)();(0,ic.j)("showDomains"),(0,v.useEffect)(()=>{let e=og.T.on("openSiteSettings",e=>{w(e),s()});return()=>{e()}},[s]),(0,v.useEffect)(()=>{"true"===O.showDomains&&og.T.emit("openSiteSettings","domains")},[]);let D=(0,v.useCallback)(async()=>{if(I){g(!0),y({variables:{id:S,themeId:null}});try{await j({variables:{input:{workspaceId:I,name:E,themeId:A,routes:[{docId:S,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,eA.zs)(d)({site:null==t?void 0:t.createSite,docId:S})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),l({title:(0,a.jsx)(m.cC,{id:"Pdboh4"}),description:(0,a.jsx)(m.cC,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[j,d,S,E,A,l,y,I]),R=(0,v.useCallback)(async()=>{if(h){g(!0);try{await C({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:tF.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),l({title:(0,a.jsx)(m.cC,{id:"ksq4sM"}),description:(0,a.jsx)(m.cC,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[C,S,h,l]),P=(0,v.useCallback)(async()=>{if(h){g(!0);try{await b({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:tF.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),l({title:(0,a.jsx)(m.cC,{id:"aQnYTJ"}),description:(0,a.jsx)(m.cC,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[S,b,h,l]),L=(0,v.useCallback)(()=>{null===_?D():"enabled"===_?R():"disabled"===_&&P()},[D,R,P,_]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsx)(tB.d,{isOpen:r,onClose:o,size:"md",children:(0,a.jsxs)(tK.s,{p:0,shadow:"xl",children:[(0,a.jsxs)(rm.x,{children:[(0,a.jsx)(m.cC,{id:"WtsmDd"})," ",(0,a.jsx)(on.C,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"YBt9YP"})})]}),(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(tY.f,{children:[(0,a.jsxs)(e2.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(l$,{isLoading:f,site:u,doc:i,onChange:L,disabledText:T}),!!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rl,{context:"settings"}),(0,a.jsx)(rR.i,{}),"disabled"===_&&(0,a.jsxs)(nH.b,{status:"warning",mb:6,children:[(0,a.jsx)(rM.z,{}),(0,a.jsx)(m.cC,{id:"CHu+l0"})]}),(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(lz,{selectedPanel:k,setSelectedPanel:w}),"website"===k?(0,a.jsx)(lD,{showHeadings:!1,doc:i}):"domains"===k?(0,a.jsx)(lS,{showHeadings:!1}):"code"===k?(0,a.jsx)(lL,{editor:x}):null]})]})]}),!u&&(0,a.jsx)(lW,{onEnable:L,isLoading:f})]})]})})})},l1=e=>{let{doc:t,label:n=(0,a.jsx)(m.cC,{id:"sAalO9"}),showUpsellBadge:i}=e,{isOpen:r,onClose:s,onOpen:o}=(0,nc.M)({id:"PublishSettingsDisclosure"}),{openUpsellModal:l}=(0,rG.z)(),c=(0,v.useCallback)(()=>l({segmentEvent:eN.AA.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.g4A,fixedWidth:!0}),onClick:i?c:o,children:(0,a.jsxs)(em.U,{justifyContent:"space-between",alignItems:"center",children:[n,i&&(0,a.jsx)(u.xu,{children:(0,a.jsx)(li.ER,{})})]})}),t&&(0,a.jsx)(l0,{isOpen:r,onOpen:o,doc:t,onPublishSettingsClose:s})]})};var l2=n(32099),l5=n(93593);let l3=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},l4=()=>({today:f.ag._({id:"ecUA8p"}),thisWeek:f.ag._({id:"yByRxz"}),earlier:f.ag._({id:"HGg4T/"})}),l6=()=>(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(rL.O,{w:"max(350px, 30%)",h:10}),(0,a.jsx)(rL.O,{w:"max(320px, 22%)",h:5})]}),l8=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:s,paywallCount:o}=e;if(!n||!n.length)return(0,a.jsx)(a.Fragment,{});let l=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,a.jsxs)(oS.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:l,maskImage:l},border:"none",isDisabled:s,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,a.jsxs)(c.k,{w:"100%",direction:"column",children:[(0,a.jsx)(d.x,{fontSize:"sm",children:nI()((0,nv.P9)(t))}),(0,a.jsx)(d.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,a.jsx)(on.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,a.jsx)(m.cC,{id:"wL3cK8"})})]});return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.kH,{placement:"top",isDisabled:!s,label:s?(0,a.jsx)(m.cC,{id:"PYTBm5",values:{paywallCount:o}}):void 0,children:(0,a.jsx)(u.xu,{mb:4,children:h})}),(0,a.jsx)(rz.m,{isNarrow:!0,segmentEvent:eN.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,a.jsx)(m.cC,{id:"mVKYtH"})})]}):h},l9=e=>{var t;let n=[];return{groupedSnapshots:(0,v.useMemo)(()=>(0,nv.yd)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},l7=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:s,onFetchMoreClick:o,isFetchingMore:l}=e;return(0,a.jsxs)(ow.t,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[s,o]=e;return(0,a.jsxs)(v.Fragment,{children:[(0,a.jsx)(ej.NZ,{px:4,py:2,mx:0,mt:2,children:l4()[s]}),o.map((e,s)=>{let{createdTime:o,editors:l,id:c}=e;return(0,a.jsx)(l8,{onClick:()=>r(c),isLatest:0===t&&0===s,createdTime:o,editors:l,showPaywall:n===c,paywallCount:i},c)})]},s)}),s&&(0,a.jsx)(ef.z,{isLoading:l,onClick:o,children:(0,a.jsx)(m.cC,{id:"yQ2kGp"})})]})},ae=()=>(0,a.jsxs)(ow.t,{w:"100%",children:[(0,a.jsx)(rL.O,{h:16}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2}),(0,a.jsx)(rL.O,{h:16,mt:2})]}),at=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{mt:1,children:(0,a.jsx)(m.cC,{id:"yf//Op",values:{numSnapshots:r,0:(0,rr.Dw)(i),1:(0,rr.Dw)(i)}})}),(0,a.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,rr.p6)(i,"PPp")}})})]})},an="snapshot-editor-root",ai=e=>{let{id:t,doc:n,content:i}=e,r=(0,v.useMemo)(()=>{if(i)return l3(i,e=>e.type===to.W4).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,l2.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,a.jsx)(eR.fb,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(an),isInsideDrawer:!0},t)},ar=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,s=(0,ie.p)(),{getCollaborativeEditorInstance:o}=(0,tw._i)(),[l,d]=(0,v.useState)(!1),[h,{data:x}]=(0,tF.e8E)();(0,tg.vm)(()=>{h({variables:{id:r.id}})},[r.id,h,n],[n]);let p=null==x?void 0:null===(t=x.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:f,data:g,called:j,fetchMore:C}=(0,tF.pfN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[b,{loading:y,data:k}]=(0,tF.opq)({nextFetchPolicy:"cache-only"}),w=(null==g?void 0:g.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I}=l9(w),A=null==g?void 0:g.snapshots.pageInfo,_=!!(!E&&j&&(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)),T=(0,v.useCallback)(()=>{(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)&&(d(!0),C({variables:{after:A.endCursor}}).finally(()=>{d(!1)}))},[C,null==A?void 0:A.endCursor,null==A?void 0:A.hasNextPage]),O=w[0];(0,v.useEffect)(()=>{(null==O?void 0:O.id)&&b({variables:{snapshotId:O.id,docId:r.id}})},[r.id,b,null==O?void 0:O.id]);let D=(0,op.$)(null==r?void 0:r.title),R="createdBy"in r?r.createdBy:void 0,P=null==r?void 0:r.createdTime,L=null==k?void 0:k.snapshot,z=L&&L.id===p,G=(0,oy.S)(l5._o);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(tK.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(rm.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[f&&(0,a.jsx)(l6,{}),!f&&r&&w&&(0,a.jsx)(at,{numSnapshots:(null==w?void 0:w.length)||0,createdBy:R,createdTime:P,title:D})]}),(0,a.jsx)(tY.f,{p:0,h:"100%",children:(0,a.jsxs)(c.k,{direction:"row",h:"100%",children:[(0,a.jsx)(u.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,a.jsxs)(ok.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[f&&(0,a.jsx)(ae,{}),!f&&w&&(0,a.jsx)(l7,{onClick:e=>{b({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I,showFetchMore:_,onFetchMoreClick:T,isFetchingMore:l})]})}),(0,a.jsx)(c.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:an,css:{"--editor-width":"100%","--editor-font-size":G},children:(0,a.jsxs)(c.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,a.jsx)(t4.Y,{}),(!L||y)&&(0,a.jsx)(t$.AA,{}),L&&!y&&(0,a.jsx)(ai,{id:L.id,doc:r,content:null==L?void 0:L.content.default})]})})]})}),(0,a.jsx)(tJ.m,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,a.jsxs)(eg.h,{spacing:4,children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:i,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.kH,{label:z?(0,a.jsx)(m.cC,{id:"HJo72u"}):(0,a.jsx)(m.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,a.jsx)(ef.z,{variant:"solid",isDisabled:!L||z,onClick:()=>{var e;if(!L)return;let t=null==w?void 0:null===(e=w.find(e=>e.id===L.id))||void 0===e?void 0:e.createdTime,n=o();if(!n)return;n.commands.setContent(L.content.default,!0);let{annotationsAbsolute:r}=L.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),s({title:(0,a.jsx)(m.cC,{id:"7ovf4C"}),description:(0,a.jsx)(m.cC,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:t?(0,rr.p6)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})})})]})})]})]})})},as=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,nc.M)({id:"snapshotsDrawer"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.SZw,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(m.cC,{id:"6Z5x06"})}),t&&(0,a.jsx)(ar,{doc:t,isOpen:n,onClose:i})]})},ao=()=>{let e=nW();return e?(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.Fzb,fixedWidth:!0}),as:i2.r,textDecoration:"none !important",href:e,target:(0,eb.Q5)()?"_self":"_blank",children:(0,a.jsx)(m.cC,{id:"7U0bM7"})}):null},al=()=>(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.q2v,fixedWidth:!0}),onClick:()=>nh.pw.emit(nh.TI.OPEN_THEME_DRAWER,{}),children:(0,a.jsx)(m.cC,{id:"90/Rx7"})}),aa=e=>{let{editor:t}=e,n=(0,v.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.paY,fixedWidth:!0}),onClick:n,command:(0,ej.cE)("Mod+Z"),children:(0,a.jsx)(m.cC,{id:"9uI/rE"})})},ac=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:s,isInOfflineMode:o}=(0,y.$)(),l=(0,e$.ye)("editDocAI"),{user:c}=(0,eJ.SE)(),d=(0,eJ.py)("view",t),h=(0,eJ.py)("comment",t),x=(0,eJ.py)("edit",t),p=(0,eJ.py)("manage",t),f=(0,F.CG)(eA.lH),g=(0,rn.lP)(),{editor:j}=(0,e0._)(),v=(0,F.CG)(W.hN),C=!!l||!p,b=!!c&&C&&!t.site,k=!!l&&h,w=!!(c&&0!==c.workspaceMemberships.length&&!t.site),S=(0,e$.ye)("docCustomCode")&&x,E=x&&j;if(!s){let e=E&&o,i=v&&o,r=i||e||k;return(0,a.jsx)(ad,{children:(0,a.jsxs)(ru.k,{children:[f?(0,a.jsx)(u.xu,{pt:2,children:(0,a.jsx)(ln,{site:f})}):(0,a.jsx)(om,{doc:t}),r&&(0,a.jsx)(ra.R,{}),i&&(0,a.jsx)(aa,{editor:j}),e&&(0,a.jsx)(lt,{editor:j,withDrawer:!0}),k&&(0,a.jsx)(ot,{toggleCommentsPanel:n})]})})}let I=t.site?(0,a.jsx)(m.cC,{id:"gKmuNS"}):void 0;return(0,a.jsxs)(nk.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsxs)(ru.k,{children:[f?(0,a.jsx)(oC,{doc:t,site:f}):(0,a.jsx)(om,{doc:t}),(0,a.jsx)(ra.R,{}),v&&(0,a.jsx)(aa,{editor:j}),x&&(0,a.jsx)(as,{doc:t}),t.site&&(0,a.jsx)(rD,{editorWrapperEl:i,scrollingParentSelector:r}),(0,a.jsx)(ao,{}),g&&(0,a.jsx)(al,{}),E&&(0,a.jsx)(lt,{editor:j,withDrawer:!0}),d&&!!c&&(0,a.jsx)(oj,{}),S&&(0,a.jsx)(od,{editor:j})]}),f?(0,a.jsx)(ra.R,{}):null,(0,a.jsxs)(ru.k,{children:[f&&(0,a.jsx)(ln,{site:f}),f?null:(0,a.jsx)(ra.R,{}),k&&(0,a.jsx)(ot,{toggleCommentsPanel:n}),b&&(0,a.jsx)(oe,{doc:t,mode:p?"full":"personal"}),p&&(0,a.jsx)(l1,{doc:t,label:I}),w&&(0,a.jsx)(of,{doc:t,editor:j}),p&&(0,a.jsx)(rg,{site:f}),!t.site&&p?(0,a.jsx)(ou,{doc:t}):null]})]})},ad=e=>{let{children:t}=e;return(0,a.jsxs)(nk.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsx)(nm.V,{description:(0,a.jsx)(m.cC,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})},au=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,a.jsx)(ej.kH,{placement:"top",label:(0,a.jsx)(m.cC,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,a.jsx)(rc.s,{icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.PQh,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,a.jsxs)(c.k,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,a.jsx)(m.cC,{id:"jNnwuI"}),i&&(0,a.jsx)(tI.$,{size:"xs"})]})})})},ah=e=>{let{title:t,path:n}=e;return(0,a.jsxs)(a.Fragment,{children:[t?"".concat(t," "):"",n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(la.E,{as:"span",fontFamily:"mono",children:n})," "]})]})},ax=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:s}=(0,ev.useRouter)(),[o,{loading:l}]=(0,tF.nRC)(),c=(0,ie.p)(),u=(0,F.CG)(eA.B$),h=(0,v.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await o({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),c({title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"gw6aHP",components:{0:(0,a.jsx)(ah,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),u===n.id){let e=(0,ey.hm)({site:i,docId:n.id});e&&await s(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,u,o,c,r,t,s]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(rx.u_,{onClose:t,isOpen:!0,size:"xl",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"kbKU/5"})}),(0,a.jsx)(tZ.o,{isDisabled:l}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,a.jsx)(la.E,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,a.jsx)(d.x,{color:"red.500",children:(0,a.jsx)(m.cC,{id:"2xOCJW"})})]})}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:t,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"red",onClick:h,isLoading:l,children:(0,a.jsx)(m.cC,{id:"O1M1zi"})})]})})]})]})})},ap=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:s,onOpen:o,onClose:l}=(0,I.q)({id:"confirm-remove-page-modal"}),c=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(ax,{site:n,doc:i,path:r,onClose:l}),(0,a.jsx)(ej.kH,{placement:"top",isDisabled:c,label:(0,a.jsx)(m.cC,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,a.jsx)(rc.s,{color:"red.500",isDisabled:!c,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0})}),onClick:o,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})})]})},am=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:s,onToggleOffline:o,...l}=e,c=(0,rd.b)(),{openPageSetup:d}=(0,tq.AA)(),{editor:h}=(0,e0._)(),{replace:f}=(0,ev.useRouter)(),{isConnected:g}=(0,y.$)(),j=(null==n?void 0:n.id)&&(0,eO.Rh)({site:t,docId:n.id}),{publishDoc:C,isPublishing:b}=iy({doc:n,site:t,path:j}),k=(0,eO.Vr)(t),w=(0,F.CG)(W.yx),S=(0,eJ.py)("edit",w),E=(0,eJ.py)("edit",w),I=(0,eJ.py)("manage",w),A=(0,rn.O1)(),_=(0,F.CG)(W.hN),T=(0,v.useCallback)(()=>{(null==n?void 0:n.id)&&c({path:"".concat((0,eO.Is)(i.path),"-copy"),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[c,null==n?void 0:n.id,i.path,t.id,t.routes]);return g?(0,a.jsx)(ri.h,{children:n&&(0,a.jsxs)(nk.q,{...l,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:[(0,a.jsx)(oC,{doc:n,site:t,showCreatedInfo:!0}),(0,a.jsx)(ra.R,{}),E&&h&&(0,a.jsx)(lt,{icon:(0,a.jsx)(p.G,{icon:x.Lc0,fixedWidth:!0}),onClick:()=>d(i.docId,"preview"),label:(0,a.jsx)(m.cC,{id:"aBZSpm"}),editor:h}),E&&h&&(0,a.jsx)(lt,{onClick:()=>d(i.docId,"cards"),withDrawer:r,editor:h})," ",(0,a.jsx)(ra.R,{}),A&&!i.offline&&(s||b)&&(0,a.jsx)(au,{onClick:C,isDisabled:!k,isPublishing:b}),(0,a.jsx)(rc.s,{icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:e3.sl_,fixedWidth:!0})}),onClick:()=>{f((0,ey.yQ)({docId:n.id,preview:!0}),void 0,{shallow:!0})},children:(0,a.jsx)(m.cC,{id:"rdUucN"})}),!!o&&(0,a.jsx)(rc.s,{onClick:o,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:i.offline?x.gMD:x.uoY,fixedWidth:!0})}),children:i.offline?(0,a.jsx)(m.cC,{id:"i/zQgj"}):(0,a.jsx)(m.cC,{id:"ySCSAn"})}),(0,a.jsx)(ra.R,{}),E&&h&&(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:T,children:(0,a.jsx)(m.cC,{id:"IVskn1"})}),_&&r&&(0,a.jsx)(aa,{editor:h}),S&&r&&(0,a.jsx)(as,{doc:n}),I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ra.R,{}),(0,a.jsx)(ap,{site:t,doc:n,path:j})]})]})}):(0,a.jsx)(ad,{})},af=e=>{if(!e)return{path:"untitled-page",title:f.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:f.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},ag=e=>{let{site:t}=e,n=(0,rd.b)(),{isOpen:i,onClose:r,onOpen:s}=(0,nc.M)({id:"add-page-ai-modal"}),[o,l]=(0,v.useState)(!1),c=(0,v.useCallback)(()=>{s()},[s]),u=(0,v.useCallback)(()=>{let{path:e}=af(null==t?void 0:t.routes);l(!0),n({path:(0,eO.Is)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{l(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,a.jsxs)(nb.v,{children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"yLRlZm"}),placement:"bottom",children:(0,a.jsx)(ny.j,{as:T.h,isRound:!0,size:"xs",isLoading:o,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,a.jsx)(p.G,{icon:x.r8p}),sx:{span:{flexGrow:0}}})}),(0,a.jsx)(ri.h,{children:(0,a.jsx)(nk.q,{maxW:"350px",zIndex:"tooltip",children:(0,a.jsxs)(ru.k,{title:f.ag._({id:"yLRlZm"}),children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:e3.JyM,fixedWidth:!0}),onClick:c,children:(0,a.jsxs)(em.U,{align:"flex-start",children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"OppH33"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"P/o+t+"})})]}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(on.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,a.jsx)(m.cC,{id:"jsQZMk"})})]})}),(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.r8p,fixedWidth:!0}),onClick:u,children:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"SSZKB9"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"S65lUr"})})]})})]})})}),(0,a.jsx)(iO,{isOpen:i,onClose:r})]})},aj=e=>{if(!e)return{path:"untitled-page",title:f.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:f.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},av=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,rd.b)(),[s,o]=(0,v.useState)(()=>aj(null==i?void 0:i.routes).title),[l,c]=(0,v.useState)(()=>aj(null==i?void 0:i.routes).path),u=(0,v.useRef)(null),[h,x]=(0,v.useState)(!1),p=((null==i?void 0:i.routes.map(e=>e.path))||[]).includes("/".concat(l)),g=(0,ep.ff)("gray.900","gray.50"),j=(0,v.useCallback)(()=>{h||p||(x(!0),r({title:s,path:(0,eO.Is)(l),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{x(!1),n()}))},[r,p,h,n,l,null==i?void 0:i.id,null==i?void 0:i.routes,s]);return((0,v.useEffect)(()=>{t&&setTimeout(()=>{u.current&&u.current.select()},50)},[t]),i)?(0,a.jsxs)(rx.u_,{isOpen:t,onClose:n,size:"xl",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{color:g,children:[(0,a.jsx)(rm.x,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"yLRlZm"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"7TUZvz"})})]})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tY.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(oi.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"MHrjPM"})}),(0,a.jsx)(oJ,{length:s.length||0,idealLength:o$.si,maxLength:o$.S8})]}),(0,a.jsx)(oY.I,{ref:u,value:s,onChange:e=>{o(e.target.value),c((0,o2.IR)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&j()}})]}),(0,a.jsxs)(oi.NI,{isInvalid:p,children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(or.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"dq8+qI"})})}),(0,a.jsxs)(nY.B,{children:[(0,a.jsx)(o0.Ui,{children:"/"}),(0,a.jsx)(oY.I,{fontFamily:"mono",value:l,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>{c((0,o2.IR)(e.target.value))},placeholder:f.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),p&&!h&&(0,a.jsx)(os.J1,{children:(0,a.jsx)(m.cC,{id:"hw1fjn"})})]})]})}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{onClick:j,isDisabled:p,variant:"solid",isLoading:h,children:(0,a.jsx)(m.cC,{id:"yLRlZm"})})]})})]})]}):(0,a.jsx)(a.Fragment,{})},aC=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,I.q)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.xu,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"6TCEnS"})}),(0,a.jsx)(d.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,a.jsx)(i2.r,{color:"trueblue.600",href:"#",onClick:r,children:(0,a.jsx)(m.cC,{id:"S0WoXy"})})})]}),n&&(0,a.jsx)(av,{isOpen:n,onClose:i,site:t})]})},ab=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,s=(0,v.useRef)(null),o=(0,ep.ff)("gray.600","gray.50"),l=(0,ep.ff)("trueblue.50","whiteAlpha.100"),c=(0,ep.ff)("gray.900","gray.50"),d=(0,ep.ff)("blackAlpha.50","whiteAlpha.100"),h=(0,ep.ff)("gray.600","gray.50"),x=(0,ep.ff)("trueblue.400","trueblue.200");(0,v.useEffect)(()=>{if(!n||!(null==s?void 0:s.current))return;let{inView:e}=(0,eH.v4)(s.current)||{};e||s.current.scrollIntoView()},[n]);let p=(0,v.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,a.jsx)(nN(),{href:r,passHref:!0,shallow:!0,children:(0,a.jsx)(ef.z,{ref:s,onClick:p,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?c:o,bgColor:n?l:"transparent",_hover:{bgColor:n?l:d,color:n?c:h},h:"auto",py:1.5,px:2,role:"group",children:(0,a.jsxs)(em.U,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,a.jsx)(u.xu,{color:n?x:o,mt:"0.2em",w:4,children:t}),(0,a.jsx)(tE.K,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},ay=e=>{let{title:t,children:n}=e;return(0,a.jsxs)(em.U,{justify:"space-between",children:[(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},ak=(e,t,n)=>n?(0,a.jsx)(tI.$,{size:"xs"}):e?(0,a.jsx)(p.G,{icon:x.t22,fixedWidth:!0}):t?(0,a.jsx)(p.G,{icon:x.BKg,fixedWidth:!0}):(0,a.jsx)(p.G,{icon:x.gMD,fixedWidth:!0}),aw=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:s,onToggleOffline:o}=e,l=(0,ep.ff)("trueblue.50","whiteAlpha.200"),c=(0,ep.ff)("trueblue.100","whiteAlpha.200");return(0,a.jsx)(nb.v,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ny.j,{"data-id":"sidebar-item-menu-button",ml:3,as:T.h,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?c:l},icon:(0,a.jsx)(u.xu,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:d?1:0,children:(0,a.jsx)(p.G,{icon:x.S6C,fixedWidth:!0})})}),(0,a.jsx)(ri.h,{children:(0,a.jsx)(am,{site:t,doc:i,route:r,hasChanges:s,"data-id":"sidebar-item-menu-list",onToggleOffline:o})})]})}})},aS=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:s,doc:o}=n,l=(0,tg.gF)(),u=(0,F.CG)(eA.lH),h=(0,F.CG)((0,eA.hZ)(s)),x=(0,v.useRef)(null),p=(0,F.CG)(eA.B$),[f,{loading:g}]=(0,tF.qbt)(),j=ak(i,h,g),C="currentColor",b=(0,ep.ff)("gray.500","gray.400"),y=(0,ep.ff)("trueblue.400","trueblue.200"),k=(0,v.useCallback)(async()=>{if(!(null==o?void 0:o.id)||!u)return;let e=!(null==n?void 0:n.offline);await f({variables:{input:{siteId:u.id,docId:o.id,offline:e,path:null==n?void 0:n.path}}})},[null==o?void 0:o.id,n,f,u]);(0,v.useEffect)(()=>{if(!x.current||p!==s)return;let{inView:e}=(0,eH.v4)(x.current)||{};e||x.current.scrollIntoView()},[p,s]);let w=(0,ey.yQ)({docId:s});return(0,a.jsxs)(ab,{icon:j,"data-sidebar-doc":s,isSelected:r,href:w,children:[(0,a.jsxs)(tE.K,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,a.jsx)(d.x,{textAlign:"left",color:r?y:C,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,op.$)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,a.jsxs)(em.U,{color:b,children:[h&&!n.offline?(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"cFW7WD"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"whiteAlpha.700",children:(0,a.jsx)(m.cC,{id:"qliBJ3"})})]}),placement:"top",children:(0,a.jsx)(c.k,{bg:r?y:C,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,a.jsx)(d.x,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",children:i?(0,a.jsx)(m.cC,{id:"i0qMbr"}):n.path})]})]}),k&&l&&u&&(0,a.jsx)(aw,{site:u,doc:o,route:n,hasChanges:h,isSelected:r,onToggleOffline:k})]})},aE=()=>{let e=(0,F.CG)(eA.lH),{openSiteSettings:t}=(0,tq.AA)(),n=(0,F.CG)(eA.B$),{onlineRoutes:i,offlineRoutes:r}=(0,v.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,a.jsxs)(tE.K,{spacing:2,w:"100%",p:0,children:[(0,a.jsx)(rl,{context:"pages",openSiteSettings:()=>t("website")}),(0,a.jsxs)(ay,{title:(0,a.jsx)(m.cC,{id:"wRR604"}),children:[(0,a.jsx)(e5.L,{}),(0,a.jsx)(ag,{site:e})]}),(0,a.jsxs)(tE.K,{spacing:1,px:0,children:[0===i.length&&(0,a.jsx)(aC,{site:e}),i.map(e=>{let t=e.docId===n;return(0,a.jsx)(aS,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ay,{title:(0,a.jsx)(m.cC,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,a.jsx)(aS,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,a.jsx)(a.Fragment,{})},aI=()=>{let e=(0,eD.Yy)();return(0,a.jsx)(ej.Wk,{isDark:e,children:(0,a.jsx)(e8.s,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,a.jsx)(aE,{})})})};aI.panelPosition="left",aI.panelName="pages";let aA=()=>{let{togglePanel:e,isPanelOpen:t}=en(aI,(0,rn.O1)()),n=(0,C.v9)(W.gh),i=(0,F.CG)(eA.lH),{editor:r}=(0,tw._i)(),s=(0,F.CG)(ek.tv),o=!!(i&&!(null!==s)&&i.routes.length>1&&r);return(0,tg.vm)(()=>{o&&e({override:"open",disableTransition:!1})},[e,o],[o]),(0,v.useEffect)(()=>{n===eV.q.SLIDE_VIEW&&e({override:"closed",disableTransition:!0})},[n,e]),{togglePagesPanel:e,isPagesPanelOpen:t}};var a_=n(20816),aT=n(71508);let aO=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],aD={duration:400,easing:"ease-in-out"},aR=e=>{var t;let{docId:n}=e,{onClose:i}=(0,I.q)(),{onPasswordSubmitted:r}=(0,e0._)(),[s,o]=(0,v.useState)(!1),[l,u]=(0,v.useState)(""),[h,g]=(0,v.useState)(!1),[j,C]=(0,v.useState)(""),b=(0,v.useRef)(null),[y,{data:k}]=(0,tF.VEy)();(0,v.useEffect)(()=>{y({variables:{docId:n}})},[n,y]);let w=(0,v.useCallback)(()=>{h||null==r||r(l).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?g(!0):(b.current&&b.current.animate(aO,aD),C(f.ag._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})))})},[l,h,C,g,r]);return(0,a.jsxs)(rx.u_,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{ref:b,p:8,children:[(0,a.jsx)(rm.x,{children:(0,a.jsxs)(tE.K,{alignItems:"center",children:[(0,a.jsx)(sh.q,{src:(null==k?void 0:null===(t=k.publicDoc)||void 0===t?void 0:t.logoUrl)||aT.Z.src,size:"lg"}),(0,a.jsx)(np.X,{children:(0,a.jsx)(m.cC,{id:"GZ6qi2"})}),(0,a.jsx)(d.x,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,a.jsx)(m.cC,{id:"rp/zfh"})})]})}),(0,a.jsx)(tY.f,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsx)(tE.K,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),l.length&&w()},w:"100%",children:(0,a.jsxs)(oi.NI,{isInvalid:!!j,children:[(0,a.jsx)(or.l,{children:(0,a.jsx)(m.cC,{id:"8ZsakT"})}),(0,a.jsxs)(nY.B,{children:[(0,a.jsx)(oY.I,{type:s?"text":"password",placeholder:"Enter the password",value:l,onChange:e=>{u(e.target.value)},borderColor:j?"red":"gray.200"}),(0,a.jsx)(a_.x,{children:(0,a.jsx)(T.h,{variant:"ghost",size:"sm",onClick:()=>o(!s),"aria-label":f.ag._({id:"tniYMG"}),icon:s?(0,a.jsx)(p.G,{icon:x.Aq}):(0,a.jsx)(p.G,{icon:x.Mdf}),_focus:{outline:"none"}})})]}),j&&(0,a.jsx)(os.J1,{children:j}),!j&&(0,a.jsx)(oi.Q6,{color:"gray.600",children:(0,a.jsx)(m.cC,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})}),(0,a.jsx)(tJ.m,{flex:1,w:"100%",children:(0,a.jsx)(c.k,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,a.jsx)(ef.z,{w:"100%",variant:"solid",isDisabled:!l.length,onClick:w,children:(0,a.jsx)(m.cC,{id:"xGVfLh"})})})})]})]})};var aP=n(12971);let aL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,F.TL)(),i=(0,eH.As)("editor"),r=ee(),s=(0,F.CG)(W.yn,tt()),o=(0,F.CG)(W.k8,tt()),l=!!(null==o?void 0:o.pos);(0,v.useEffect)(()=>{if(!e)return;let t=eI()(()=>{s&&n((0,W.Qx)({attached:!1}))},500,{leading:!0}),i=(0,eB.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,F.CG)(W.ks,tt());(0,v.useEffect)(()=>{if(!e||a)return;let t=eI()(()=>{if(i.inProgress)return;let t=(0,aP.lI)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,W.Us)(t))},250,{trailing:!0,maxWait:500}),s=eI()(()=>{if(e.state.selection instanceof rw.c)return;let t=document.querySelector(i.scrollSelector||""),r=null==t?void 0:t.getBoundingClientRect(),s=e.state.selection.from,o=(0,aP.Sh)(e,s);if(!t||!r||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(s).top-l.y)/l.height).toFixed(2));n((0,W.Us)({pos:s,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},az=()=>{let e=(0,ie.p)(),t=(0,F.TL)();return(0,v.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:s}=n,o={attached:!0};r?s?o.following=null:e.closeAll():(o.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sh.q,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:rK()(i.color).isDark()?"white":"black",bg:i.color}),(0,a.jsx)(d.x,{ml:2,children:(0,a.jsx)(m.cC,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(o)),t((0,W.Qx)(o))},[e,t])},aG=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,v.useRef)(!1),s=az(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,v.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},aN="sessionId1",aM=eU.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=i1()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:aN})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),aU=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s,theme:o,hideMadeWithGammaBadge:l=!1}=e,[d]=(0,v.useState)(()=>[tO.F,i8.$1.configure({scrollerSelector:r}),aM,i6._g]),{user:h,isUserLoading:x,anonymousUser:p,color:m}=(0,eJ.SE)(),[f]=(0,H.I)(q.H.gammaDocPasswords,{}),[g,j]=(0,v.useState)(),{data:C,loading:b,error:y}=(0,tF.EDv)({variables:{docId:n,snapshotId:i,password:f[n]},skip:!i}),k=(0,F.CG)(tU.yx);(0,v.useEffect)(()=>{!x&&g&&g.commands.user({id:(null==h?void 0:h.id)||p.id,color:m.value,sessionId:aN,idleSince:null,name:(null==h?void 0:h.displayName)||p.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[g,h,m,x,p]);let w=C&&void 0!==C.snapshot&&!b&&k;return(0,a.jsxs)(u.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!w||y?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!w&&(0,a.jsx)(tI.$,{}),y&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",y.message]})]}):(0,a.jsx)(u.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:w?1:0,children:(0,a.jsx)(eR.yE,{doc:k,editorId:"main",docId:n,theme:o||void 0,extensions:d,onCreate:e=>{let{editor:t}=e;j(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),g&&(0,a.jsx)(eY,{editor:g,backoffFactor:2}),!l&&(0,a.jsx)(i9.m,{docWorkspace:null==k?void 0:k.organization})]})},aF={[eV.q.DOC_VIEW]:"doc",[eV.q.SLIDE_VIEW]:"present"},aW=e=>{let t=(0,C.I0)(),n=(0,ey.SJ)().mode,i=(0,F.CG)(W.gh),r=(0,v.useCallback)(e=>{let t=e||i,{mode:n}=(0,ey.SJ)(),r=aF[t];n!==r&&(0,iZ.lO)({query:{...(0,ey.SJ)(),mode:r},emitChange:!1})},[i]);(0,rv.r)(r,[i]),(0,v.useEffect)(()=>iZ.fI.on("changed",()=>r()),[r]),(0,tg.vm)(function(){if(!e)return;let i=n===aF.SLIDE_VIEW?eV.q.SLIDE_VIEW:eV.q.DOC_VIEW,{cardId:s}=(0,ey.sY)();i===eV.q.SLIDE_VIEW&&(s?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",s),e.commands.spotlightCardById(s)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,W.PM)({mode:i})),r(i)},[e,t,n,r],[e])};var aH=n(76643),aq=n(62344);let aB=e=>{let t=(0,F.CG)(W.uD),n=(0,F.CG)(W.e0),{handlePresentNavigationEvent:i}=(0,aq._)(tx.R0.PRESENTER_VIEW_POPUP);(0,v.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let{payload:e}=JSON.parse(r),{action:t,eventKey:s,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==n?void 0:n.sessionId)||a!==(null==n?void 0:n.id))return;switch(t){case"goToCard":{let{cardId:n}=e;if(!n)break;i({eventType:t,eventKey:s,method:o,payload:{cardId:n}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:t,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},aV=e=>{let{editor:t,enabled:n}=e,i=(0,F.TL)(),r=(0,v.useRef)(null),[s,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)([0,0]),[c,d]=(0,v.useState)("bottom"),u=(0,F.CG)(W.Od),h=(0,v.useCallback)(()=>{o(!1)},[]),x=(0,v.useCallback)(()=>{a([0,0]),d("bottom")},[]),p=(0,v.useCallback)(e=>{o(!0),a(e)},[]),m=(0,v.useCallback)(e=>{var t;e.preventDefault(),p([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?d("top"):i&&s?d("center"):d("bottom")},[r,p]);(0,v.useEffect)(()=>{u||o(!1)},[u]),(0,v.useEffect)(()=>{if(t&&n)return nh.pw.on(nh.TI.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;m(t),i((0,W.$B)({pos:n,cardId:r}))})},[t,n,m,i]);let f=(0,v.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===c&&i?"translateY(".concat(i,"px)"):"top"===c?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[c,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:m,menuRootStyles:f,clearPositioning:x}};var aK=n(55758),aZ=n(1737),aY=n(27988),aJ=n(65342);let aX=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rc.s,{icon:n,onClick:i,...s,children:t})},aQ=(0,v.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l}=e,[c,d]=(0,v.useState)(null),u=(0,aY.q)(t,d),{pos:h,cardId:f}=(0,F.CG)(W.OH),{enabled:g}=(0,i8.gZ)(n),{editCardInPresentMode:j}=(0,aJ.l)({editor:n}),C=(0,eD.Yy)(),b=(0,v.useCallback)(()=>{g?null==n||n.commands.turnOffSpotlight():h?null==n||n.commands.spotlightNodeAtPos(h):f&&(null==n||n.commands.spotlightNextBlock()),r()},[g,h,f,r,null==n?void 0:n.commands]);return(0,v.useEffect)(()=>{var e;null==c||null===(e=c.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[c]),(0,a.jsx)(ri.h,{children:(0,a.jsx)(ej.Wk,{isDark:C,children:(0,a.jsx)(nb.v,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,a.jsxs)(nk.q,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:u,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[(0,a.jsx)(aX,{"data-testid":"present-mode-menu-item-edit",command:(0,ej.cE)("E"),shouldHide:s,icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.TzT}),onClick:j,children:(0,a.jsx)(m.cC,{id:"IkOuqb"})}),(0,a.jsx)(aX,{"data-testid":"present-mode-menu-item-spotlight",command:(0,ej.cE)("S"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.QMW}),onClick:b,children:g?(0,a.jsx)(m.cC,{id:"CzYGrQ"}):h?(0,a.jsx)(m.cC,{id:"LoLA00"}):f?(0,a.jsx)(m.cC,{id:"X1FNEK"}):null})]})})})})});aQ.displayName="PresentModeContextMenuComponent";let a$=(0,v.memo)(aQ);var a0=n(63176),a1=n(19376),a2=(0,n(76801).m)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});a2.displayName="CircularProgressLabel";var a5=n(6185),a3=n.n(a5),a4=n(68642),a6=n(27875),a8=n.n(a6),a9=n(65050);let a7={easeOutLinear:rZ.gA,easeOutSine:rZ.vh,easeOutCubic:rZ.w2,easeOutCirc:rZ.ei,easeOutQuad:rZ.hl,easeOutQuart:rZ.Y3,easeOutExpo:rZ.ad,bezierCustom1:a3()(.13,.97,.035,.73),bezierCustom2:a3()(.105,1.15,.15,.355)},ce={UP:"up",DOWN:"down"},ct=e=>e?+new Date-+new Date(e):1/0,cn=(e,t)=>{let n=(0,v.useMemo)(()=>new a4.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,eH.As)("editor"),l=(0,F.CG)(W.i2),a=(0,v.useRef)(null),c=(0,v.useRef)(null),d=(0,v.useRef)(null),u=(0,v.useRef)(!1),h=(0,v.useRef)(null),x=(0,v.useRef)(null),[p,m]=(0,v.useState)(!1),[f,g]=(0,v.useState)(!1),j=(0,v.useRef)({counterTarget:0,counterCurrent:0,direction:ce.DOWN}),C=(0,v.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=j.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),b=(0,v.useCallback)(()=>{let e=d.current,t=c.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=j.current.counterCurrent/s,l=(550>ct(x.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*a7[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)},[i,s]),y=(0,v.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;if(e=n,.1>Math.abs(j.current.counterTarget-j.current.counterCurrent)){j.current.counterCurrent=j.current.counterTarget,b(),u.current=!1;return}j.current.counterCurrent=(0,rZ.t7)(j.current.counterCurrent,j.current.counterTarget,a8()(60/(i?1e3/i:60)*.3,.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),k=(0,v.useCallback)(()=>{j.current.counterTarget=0,m(!1),g(!1),C(),y()},[y,C]);return(0,v.useEffect)(()=>{let t,i;if(!l||!e)return k();let a=document.querySelector((0,a9.U8)(l));if(!a)return k();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===d.current||null===c.current)return;let a=ct(h.current);if(a<500||a<1e3&&!1===l)return;let u=ct(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?j.current.direction:t.deltaY>0?ce.DOWN:ce.UP;if(!("down"===p?o.isAtBottom():o.isAtTop()))return;clearTimeout(i);let f=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,v=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(f?r:1);if(p!==j.current.direction){j.current.direction=p,k();return}g(p===ce.DOWN),m(p===ce.UP),j.current.counterTarget+=v,j.current.direction=p,j.current.counterTarget/s>=1?(e.commands.spotlightNextCard(p===ce.UP,p===ce.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{k(),C()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(k,500),y(),C()},p=()=>{h.current=+new Date,clearTimeout(t),k(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),C(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,y,i,r,s,o,C,b,k,l]),{debugRef:a,nextCardRef:d,prevCardRef:c,showNextCard:f,showPrevCard:p}},ci=e=>{let{editor:t}=e,n=(0,e$.ye)("debugLogging"),[i,r]=(0,v.useState)("easeOutExpo"),[s,o]=(0,v.useState)(1.5),[l,c]=(0,v.useState)(1200),{debugRef:d,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:p}=cn(t,{easing:i,touchpadFactor:s,triggerThreshold:l}),{prevCard:m,nextCard:f}=(0,F.CG)(e=>{let t=(0,W.i2)(e)||"",n=(0,W.X9)(e),i=Object.keys((n.parents[t]||[]).reduce((e,t)=>e[t],n.tree)),r=null,s=null;return i.forEach((e,o)=>{if(e!==t)return;let l=n.parents[t];0===o?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:i[o-1],isSibling:!0},o===i.length-1?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:i[o+1],isSibling:!0}}),{prevCard:r,nextCard:s}},tt()),g=null==f?void 0:f.cardId,j=null==m?void 0:m.cardId,C=(0,v.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,eq.KH)(t)||(t.attrs.id===j?e=t:t.attrs.id===g&&(n=t),!!(!e&&j)||!!(!n&&g))),{prev:e,next:n}},[t,g,j]);return(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(cr,{ref:d,setEasing:r,setTouchpadFactor:o,setTriggerThreshold:c}),(0,a.jsx)(cs,{ref:h,direction:"up",node:C.prev,enabled:p,offset:16}),(0,a.jsx)(cs,{ref:u,direction:"down",node:C.next,enabled:x,offset:24})]})},cr=v.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,a.jsxs)(c.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,a.jsxs)(nb.v,{closeOnSelect:!1,children:[(0,a.jsx)(ny.j,{as:ef.z,colorScheme:"trueblue",children:"Options"}),(0,a.jsxs)(nk.q,{minWidth:"240px",children:[(0,a.jsx)(ej.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,a.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,a.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,a.jsxs)(a0.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,a.jsx)(a0.zu,{}),(0,a.jsxs)(a0.Fi,{children:[(0,a.jsx)(a0.WQ,{}),(0,a.jsx)(a0.Y_,{})]})]}),(0,a.jsx)(ra.R,{}),(0,a.jsx)(ej.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,a.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,a.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,a.jsxs)(a0.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,a.jsx)(a0.zu,{}),(0,a.jsxs)(a0.Fi,{children:[(0,a.jsx)(a0.WQ,{}),(0,a.jsx)(a0.Y_,{})]})]}),(0,a.jsx)(ra.R,{}),(0,a.jsxs)(nw._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,a.jsx)(nS.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,a.jsx)(nS.i,{value:"easeOutSine",children:"easeOutSine"}),(0,a.jsx)(nS.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,a.jsx)(nS.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,a.jsx)(nS.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,a.jsx)(nS.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,a.jsx)(nS.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,a.jsx)(nS.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,a.jsx)(nS.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,a.jsx)(c.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,a.jsx)(a1.D,{value:40,color:"trueblue.500",children:(0,a.jsx)(a2,{})})})]})});cr.displayName="PeekDebugger";let cs=v.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:s}=e,[o,l]=(0,v.useState)(!1),[u,h]=(0,v.useState)(r);(0,v.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1),h(r)},550);return()=>{clearTimeout(e)}},[r]);let m=(0,v.useMemo)(()=>u?(0,l2.getCardTitle)(u.toJSON()):"",[u]),f=!!u;return(0,a.jsx)(c.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(s,"px"):"inherit",bottom:"down"===n?"".concat(s,"px"):"inherit",children:(0,a.jsxs)(c.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,a.jsx)(a1.D,{display:f?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,a.jsx)(a2,{visibility:o?"visible":"hidden",children:(0,a.jsx)(p.G,{icon:x.fV7,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),f||"up"!==n?f||"down"!==n?null:(0,a.jsx)(p.G,{icon:x.m5q,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,a.jsx)(p.G,{icon:x.ytF,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,a.jsx)(c.k,{width:1}),(0,a.jsx)(d.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:f?"gray.800":"gray.600",px:2,children:f?m:"down"===n?"End of presentation":"Start of presentation"})]})})});cs.displayName="PeekCardTab";let co=()=>{let[e,t]=(0,v.useState)(["",[],{}]),n=(0,F.qr)();return(0,v.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,W.X9)(e),r=(0,W.i2)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},cl=()=>{let[e,t,n]=co(),i=Object.keys(n);return(0,a.jsx)(em.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map((r,s)=>{let o=[...t,e][0],l=i.indexOf(o),c=n[o],d=0,u=100;return e&&c&&-1===i.indexOf(e)&&(d=(c.indexOf(e)+1)/c.length*100,u=1/c.length*100),(0,a.jsx)(cd,{cardId:r,state:s===l?"current":s<=l?"prev":"next",percent:d,unit:u},r)})})},ca="var(--chakra-colors-trueblue-200)",cc="var(--chakra-colors-trueblue-100)",cd=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,s="linear-gradient(to right, ".concat(ca," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(cc," ").concat(i+r,"% 100%)");return(0,a.jsx)(c.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?s:"prev"===n?ca:cc},t)},cu=(0,nL.ZP)("Esc"),ch=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,v.useState)(null),s=(0,C.v9)(W.JA),o=(0,v.useRef)(s),l=(0,C.I0)(),u=(0,nQ.Br)("edit"),h=(0,aZ.tE)({enabled:!s,setActiveKey:r});aB(t);let{menuRef:x,isPresentModeMenuOpen:p,onPresentModeMenuClose:f,menuRootStyles:g,clearPositioning:j}=aV({editor:t,enabled:!0});return(0,v.useEffect)(()=>(l((0,W.e)({isEditingInSlideView:!1})),()=>{l((0,W.e)({isEditingInSlideView:!1}))}),[l]),o.current=s,(0,v.useEffect)(()=>eC.F7.on("keydown","SLIDE_VIEW",e=>!!(o.current&&cu(e))&&(l((0,W.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[l]),(0,aK.us)(),(0,aH.O)({ref:x,enabled:p,handler(e){e instanceof MouseEvent&&2!==e.button&&f()}}),(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(a$,{ref:x,editor:t,readOnly:!u,isOpen:p,onClose:f,clearPositioning:j,rootStyles:g}),(0,a.jsx)(ci,{editor:t}),(0,a.jsx)(cl,{}),(0,a.jsx)(c.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,a.jsxs)(c.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:s?1:0,pointerEvents:s?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:s?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,a.jsx)(d.x,{size:"sm",mr:3,children:(0,a.jsx)(m.cC,{id:"DjD/sG"})}),(0,a.jsx)(ef.z,{size:"sm",variant:"solid",onClick:()=>l((0,W.e)({isEditingInSlideView:!1})),children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})]})}),n&&(0,a.jsx)(aZ.nP,{activeKey:i,spotlightingByBlock:h})]})};var cx=n(50423);let cp=tW.S.filmstrip,cm=tW.S.filmstrip-1,cf={duration:.25,delay:.75},cg={duration:.25},cj="filmstrip-root",cv=".".concat(cj),cC="filmstrip-scroller",cb=".".concat(cC),cy=v.createContext({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")}}),ck=e=>{let{children:t}=e,[n,i]=(0,v.useState)({navItemPreviewRefMap:{}}),r=(0,v.useMemo)(()=>{let e=[],t=null,r=()=>{let r;t=null;let s={...n.navItemPreviewRefMap},o=!1;for(;r=e.shift();){let[e,t]=r;s[e]!==t&&(s[e]=t,o=!0)}o&&i(e=>({...e,navItemPreviewRefMap:s}))},s=()=>{t&&(clearTimeout(t),t=null)};return(n,i)=>{s(),e.push([n,i]),t=setTimeout(r,0)}},[n.navItemPreviewRefMap]);return(0,a.jsx)(cy.Provider,{value:{state:n,setNavItemPreviewRef:r},children:t})};function cw(){return(0,v.useContext)(cy)}var cS=n(9340);let cE=(0,v.createContext)(null);var cI=n(3105),cA=n(44866),c_=n(65339);let cT=(0,v.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,cI.h)(()=>(0,lq.E)(t)),a=[],c=(0,v.useRef)(!1);return(0,cS.k)(!!r,"Reorder.Group must be provided a values prop"),(0,v.useEffect)(()=>{c.current=!1}),v.createElement(l,{...s,ref:o},v.createElement(cE.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(cD))},updateOrder:(e,t,n)=>{if(c.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,c=(0,c_.C)(a.min,a.max,.5);return 1===s&&l.layout.max+n>c||-1===s&&l.layout.min+n<c?(0,cA.uo)(e,r,r+s):e}(a,e,t,n);a!==s&&(c.current=!0,i(s.map(cO).filter(e=>-1!==r.indexOf(e))))}}},e))});function cO(e){return e.value}function cD(e,t){return e.layout.min-t.layout.min}var cR=n(40226),cP=n(60976);function cL(e){let t=(0,cI.h)(()=>(0,cR.B)(e)),{isStatic:n}=(0,v.useContext)(cP._);if(n){let[,n]=(0,v.useState)(e);(0,v.useEffect)(()=>t.on("change",n),[])}return t}var cz=n(83972);let cG=e=>"object"==typeof e&&e.mix,cN=e=>cG(e)?e.mix:void 0;var cM=n(23617),cU=n(58387);function cF(e,t){let n=(0,cI.h)(()=>[]);return function(e,t){var n,i;let r=cL(t()),s=()=>r.set(t());return s(),n=()=>cU.Z_.update(s,!1,!0),i=()=>cU.qY.update(s),(0,cM.L)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var cW=n(15815);function cH(e,t=0){return(0,cW.i)(e)?e:cL(t)}let cq={Group:cT,Item:(0,v.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,cI.h)(()=>(0,lq.E)(i)),c=(0,v.useContext)(cE),d={x:cH(t.x),y:cH(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,cz.s)(r,s,{mixer:cN(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?cF(e,r):cF([e],([e])=>r(e))}([d.x,d.y],([e,t])=>e||t?1:"unset"),h=(0,v.useRef)(null);(0,cS.k)(!!c,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:p,updateOrder:m}=c;return(0,v.useEffect)(()=>{p(n,h.current)},[c]),v.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&m(n,d[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)})};var cB=n(39871),cV=n(50645),cK=n(67154),cZ=n(48380);let cY=e=>{let{content:t,selection:n}=(0,cK.i)(e),i=!!(null==t?void 0:t.content),r=(0,v.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;return s&&(null===(t=e.attrs)||void 0===t?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,i]),s=(0,F.CG)(cZ.ZD,(e,t)=>tt()(e,t)).map(e=>r.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,F.CG)(cZ.Ae);return{isDragging:o,cards:o?s:r,editorContent:t,selection:n,isLoaded:i}};var cJ=n(9237);let cX=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),cQ=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r}=e,s="list"===i,{activeButtonColor:o,inactiveButtonColor:l,backgroundColor:d,closeButtonColorScheme:u}=cX(n),h=(0,eN.z$)(),g=(0,v.useCallback)(e=>()=>{r(e),null==h||h.track(eN.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})},[h,r]);return(0,a.jsxs)(c.k,{p:"8px",pb:"2px",children:[(0,a.jsxs)(em.U,{spacing:0,bg:d,p:.5,borderRadius:"md",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"Rv+zkJ"}),children:(0,a.jsx)(ef.z,{size:"xs",variant:s?"ghost":"plain",color:s?l:o,onClick:g("film"),"data-testid":"filmstrip-view-button",children:(0,a.jsx)(em.U,{children:(0,a.jsx)(p.G,{icon:x.CjD})})})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5NZpX8"}),children:(0,a.jsx)(ef.z,{size:"xs",variant:s?"plain":"ghost",color:s?o:l,onClick:g("list"),"data-testid":"list-view-button",children:(0,a.jsx)(em.U,{children:(0,a.jsx)(p.G,{icon:x.Zrf})})})})]}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,a.jsx)(T.h,{variant:"ghost","aria-label":f.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:u,isRound:!0,size:"xs",icon:(0,a.jsx)(p.G,{icon:x.g82}),outlineOffset:"0px",ml:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:cJ.br})})]})};var c$=n(29803),c0=n(8839),c1=n(38564),c2=n(56143),c5=n(25779),c3=n(50381),c4=n.n(c3),c6=n(9850),c8=n.n(c6),c9=n(39198),c7=n(68498),de=n(66490),dt=n(46577),dn=n(48972),di=n(51161);let dr=(e,t)=>{let n=c1.Gk.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},ds=e=>{let t=(0,F.CG)(cB.wg),n=(0,F.CG)(cB.zq),i=(0,F.TL)(),r=(0,ie.p)(),s=(0,v.useCallback)(n=>{var i;if(!e)return;let s=(0,eq.Lz)(e,t);if(!s.length)return;let o=tQ.HY.from(s),l=(0,dn.G8)(o,e.schema);if(!l){r({title:n?(0,a.jsx)(m.cC,{id:"33a+2Q"}):(0,a.jsx)(m.cC,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),c4()(l,{format:"text/html"});let c=de.Z.getState(e.state);c&&!n&&c.clearCutData(),r({title:n?(0,a.jsx)(m.cC,{id:"VG4BD6",values:{0:s.length,1:s.length}}):(0,a.jsx)(m.cC,{id:"GtH+14",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})},[e,t,r]),o=(0,v.useCallback)(()=>{s(!1)},[s]),l=(0,v.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,cB.ym)((0,F.bh)().getState());i((0,cB.jf)()),e.commands.deleteCardsById(t,n),dr(e,r)},[i,e,t]),c=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,eq.Bw)(e,t[0]);i&&(n=(0,c5.getCardTitle)(i.node.toJSON())||"")}l();let i=n?'"'.concat(n,'"'):f.ag._({id:"FyJPFh"}),s=r({title:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(d.x,{noOfLines:1,children:(0,a.jsx)(m.cC,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,a.jsx)(i2.r,{textDecoration:"underline",onClick:()=>{(0,c2.Yw)(e.state),r.close(s)},children:(0,a.jsx)(m.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[l,e,t,r]),u=(0,v.useCallback)(()=>{0!==t.length&&(s(!0),l(!0))},[l,s,t]),h=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let s=(0,eq.Lz)(e,t);if(s.length){let t=(0,eq.Bw)(e,n),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=s.map(e=>(0,e_.hs)(c8()(e.toJSON()))).map(e=>(0,dt.Zs)(e)),c=(0,cB.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,l,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,di.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(c7.k,!0),!0}).scrollIntoView().run(),dr(e,c),i((0,cB.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),r({title:(0,a.jsx)(m.cC,{id:"ClnFsQ",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,r,t]);return{handleAddCard:(0,v.useCallback)(()=>{if(!e)return;let t=(0,cB.zq)((0,F.bh)().getState()),n=(0,eq.Bw)(e,t);if(!n)return;let{pos:r}=n,s=e.view.state.doc.nodeAt(r);if(!s){console.error("[Filmstrip] Cannot append card. Node unknown");return}let o=r+s.nodeSize,l=(0,c9.e1)().blankCard;(0,c9.ZT)({key:"blankCard",nodeName:"card"},tx.fe.FILMSTRIP_CARD_MENU);let a=(0,cB.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,(0,dt.Zs)(l),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,di.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(c7.k,!0),!0}).scrollIntoView().run(),dr(e,a),i((0,cB.xi)({beforeCardId:null==n?void 0:n.node.attrs.id,cardCount:1}))},[i,e]),handleCopy:o,handleDelete:c,handleCut:u,handleDuplicate:h}},dl=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rc.s,{icon:n,onClick:i,...s,children:t})},da=(0,v.memo)(e=>{let{isDark:t}=e;return(0,a.jsxs)(u.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.lCX}),(0,a.jsx)(p.G,{icon:e3.diR,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,a.jsx)(p.G,{icon:e3.diR,transform:"shrink-7 right-6 down-4"}),(0,a.jsx)(p.G,{icon:e3.r8p,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});da.displayName="AddCardIcon";let dc=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,eq.Bw)(t,e[0]);return n?(0,l2.getCardTitle)(n.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},dd=(0,v.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l,isDark:c}=e,u=(0,F.CG)(W.yx),h=(0,ie.p)(),{handleCopy:f,handleDelete:g,handleCut:j,handleDuplicate:C,handleAddCard:b}=ds(n),y=(0,F.CG)(cB.wg),k=1===y.length,w=(0,v.useMemo)(()=>k?(0,ey.gq)({cardId:y[0],docId:null==u?void 0:u.id,isPresentMode:!1}):"",[null==u?void 0:u.id,k,y]),{onCopy:S}=(0,it.V)(w),E=(0,v.useCallback)(()=>{S(),h({title:(0,a.jsx)(m.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[S,h]),I=(0,c0.K)(),A=(0,v.useMemo)(()=>dc(y,n),[n,y]),_=(0,v.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]);return(0,a.jsx)(nb.v,{isOpen:i,onClose:r,children:(0,a.jsxs)(nk.q,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{pl:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:A}),(0,a.jsx)(ra.R,{})]}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:s,command:(0,ej.cE)("Mod+X"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.EQg}),onClick:j,children:(0,a.jsx)(m.cC,{id:"cCd8Bs"})}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:s,command:(0,ej.cE)("Mod+C"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.kZ_}),onClick:f,children:(0,a.jsx)(m.cC,{id:"he3ygx"})}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:s,command:(0,ej.cE)("Mod+D"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.WM4}),onClick:C,children:(0,a.jsx)(m.cC,{id:"euc6Ns"})}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:s,icon:(0,a.jsx)(da,{isDark:c}),onClick:b,sx:_,children:(0,a.jsx)(m.cC,{id:"90n2YU"})}),!s&&(0,a.jsx)(ra.R,{}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!k,icon:(0,a.jsx)(c$.x,{isLocked:!I,isDark:c}),onClick:E,children:(0,a.jsx)(m.cC,{id:"F0YmUY"})}),(0,a.jsx)(dl,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:g,shouldHide:s,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})});dd.displayName="FilmstripCardMenuComponent";let du=(0,v.memo)(dd);var dh=n(58763),dx=n(3194);let dp=(0,lq.E)(u.xu),dm=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:s,isDragInProgress:o,index:l}=e;return(0,a.jsxs)(c.k,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,children:[(0,a.jsx)(df,{shouldFixHeight:!i&&o,cardId:r}),(0,a.jsx)(lB.M,{children:!i&&!s&&(0,a.jsx)(dp,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,a.jsx)(d.x,{children:l})},l)})]})},df=e=>{let{cardId:t,shouldFixHeight:n}=e,{setNavItemPreviewRef:i}=cw(),r=(0,F.CG)(W.Pu),s=(0,dh.J)(r,!1),o=(0,v.useRef)(null);return(0,v.useEffect)(()=>{o.current&&(n?o.current.style.height="".concat(o.current.offsetHeight,"px"):o.current.style.height="")},[n]),(0,a.jsx)(c.k,{ref:o,className:"filmstrip-nav-item-wrapper",sx:t3.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(dx.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,a.jsx)("div",{className:"ProseMirror",children:(0,a.jsx)(c.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:s,inert:"true",children:(0,a.jsx)("div",{style:{width:"100%"},ref:e=>{e&&i(t,e)}})})})})},dg=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r}=e,{title:s}=(0,tn.T)({cardId:t});return(0,a.jsxs)(c.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,a.jsxs)(c.k,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,a.jsx)(u.xu,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,a.jsx)(u.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,a.jsx)(p.G,{icon:x.Okg})})]}),(0,a.jsx)(c.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",children:(0,a.jsx)(d.x,{noOfLines:1,children:s||(0,a.jsx)(m.cC,{id:"wja8aL"})})})]})},dj=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,editor:s,isAnimating:o}=e,l=(0,eH.As)("filmstrip"),a=(0,F.CG)(cB.DM);(0,v.useEffect)(()=>{t.current&&n===r&&(((null==s?void 0:s.isFocused)||(null==s?void 0:s.isThumbnail))&&!o?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=Math.max(0,o+s-l.scroller.clientHeight+4);l.scrollTo({top:e})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,s,a,i,l,t,o])},dv=()=>{let e=(0,eo.iq)({lg:100,xl:125,"2xl":150})||100,t=(0,F.CG)(cB.K5),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/dx.DB}},dC=(0,lq.E)(c.k),db=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:s,isFilmstripSelected:o,readOnly:l,shouldHide:c,isDragInProgress:h,numberOfCardsDragging:x,onContextClick:p,editor:m,isAnimating:f,showTextOnly:g}=e,{cardId:j,isDragging:C}=t,b=(0,v.useRef)(null);dj({filmstripItemRef:b,cardId:j,isFilmstripSelected:o,currentFocusedCard:s,editor:m,isAnimating:f});let y=(0,F.TL)(),{previewWidth:k}=dv(),w=(0,v.useCallback)(e=>{if(!j)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!l)y((0,cB.YC)({id:j,currentFocusedCard:s}));else if(n&&!l)y((0,cB.sY)({id:j}));else{if(h)return;y((0,cB.Ti)({id:j})),y((0,W.Qx)({attached:!1})),m&&(0,nU.YS)({cardId:j,editor:m})}},[j,l,y,s,h,m]);return(0,a.jsxs)(u.xu,{className:"filmstrip-item",ref:b,pos:"relative",pt:g?void 0:1,mt:g?1.5:i?void 0:1,onClick:w,onContextMenu:p,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:c?"none":void 0,"data-filmstrip-selected":o,"data-filmstrip-view":g?"list":"filmstrip",css:{"--editor-width":"".concat(k,"px")},children:[g&&(0,a.jsx)(dg,{cardId:j,index:n,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(dm,{shouldHide:c||g,cardId:j,index:n,isDraggingCard:C,isDragInProgress:h,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(lB.M,{children:x&&(0,a.jsx)(u.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,a.jsx)(dC,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,a.jsx)(d.x,{children:x})},"badge-number")})})]})};var dy=n(28316),dk=n(34584),dw=n(3939),dS=n(27210),dE=n(82098);let dI=(0,v.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,dE.c)(n);return(0,a.jsx)(C.zt,{store:r,children:(0,a.jsx)(dA,{ref:t,...i})})}),dA=(0,v.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r}=e,s=(0,v.useMemo)(()=>(0,tT.e)(),[]),o=(0,F.TL)();(0,v.useEffect)(()=>{o((0,W.Dc)({theme:i||null})),o((0,W.iS)({isAllowedToEdit:!1})),o((0,W.Nr)({animationsEnabled:!1}))},[i,o]);let l=(0,dS.jE)({extensions:s,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(l):t.current=l),l.isThumbnail=!0,(0,v.useEffect)(()=>{var e;let t=n.getJSON();t&&l&&(l.commands.setContent(t),l.commands.command(()=>((0,ry.E0)(l.state.doc,o),!0)),null===(e=dk.S.getState(l.state))||void 0===e||e.compute(l.state.doc).processChanges(o))},[n,l,o]),(0,c7.M)({sourceEditor:n,targetEditor:l}),(0,a.jsx)(u.xu,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:dw.Y,children:(0,a.jsx)(dS.kg,{editor:l,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})});var d_=n(31335);let dT=(0,v.memo)(e=>{let{content:t,theme:n}=e,[i,r]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),i)?(0,a.jsx)(t3.m,{theme:n,content:t,isThumbnail:!0,portalComponent:dD}):null}),dO=(0,v.memo)((0,v.forwardRef)((e,t)=>{let{parent:n,theme:i}=e,[r,s]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{requestAnimationFrame(()=>{s(!0)})},[]),r)?(0,a.jsx)(dI,{parent:n,theme:i,portalComponent:dD,ref:t}):null}));dO.displayName="TransactionalFilmstripPreviewEditor";let dD=e=>{let{renderers:t}=e,{state:{navItemPreviewRefMap:n}}=cw();return(0,a.jsx)(a.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e,r=i.props.node;if("document"===r.type.name)return null;let s=(0,d_.KH)(r)?n[r.attrs.id]:null;return dy.createPortal(i.reactElement,s||i.element,t)})})};dT.displayName="FilmstripPreviewEditor";var dR=n(88786);let dP=(0,v.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r}=e,{previewWidth:s}=dv(),o=(0,v.useRef)(null),l=(0,v.useRef)(s),d=(0,v.useRef)(null),h=(0,F.TL)(),x=(0,v.useCallback)(e=>{if(e.preventDefault(),!o.current||!l.current||!d.current)return;let{width:n,x:i}=o.current,r=e.clientX-i;if(n+r<=30){t();return}let s=a8()(n+r,90,200);s!==l.current&&(l.current=s,d.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(s,"px;\n          }"))},[t]),p=(0,dR.Z_)(x,30),m=(0,v.useCallback)(e=>{e.preventDefault(),o.current={x:e.clientX,width:l.current},r(!0);let t=()=>{o.current=null,d.current&&(d.current.innerHTML=""),h((0,cB.lh)({width:l.current})),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",t)},[h,r,p]);return(0,a.jsxs)(c.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:m,zIndex:cm,children:[(0,a.jsx)("style",{ref:d}),(0,a.jsx)(u.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});dP.displayName="FilmstripResizer";let dL=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),dz=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,eq.KH)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},dG=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(cv))},dN=()=>{let e=(0,v.useRef)(null),[t,n]=(0,v.useState)(!1),[i,r]=(0,v.useState)([0,0]),[s,o]=(0,v.useState)("bottom"),l=(0,F.TL)(),a=(0,v.useCallback)(()=>{n(!1)},[]),c=(0,v.useCallback)(()=>{r([0,0]),o("bottom")},[]),d=(0,v.useCallback)(e=>{n(!0),r(e)},[]),u=(0,v.useCallback)(t=>n=>{var i;n.preventDefault(),l((0,cB.uu)({id:t})),d([n.clientX,n.clientY]);let r=null===(i=e.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,a=n.clientY<r;s&&!a?o("top"):s&&a?o("center"):o("bottom")},[l,e,d]),h=(0,v.useMemo)(()=>{var t;let n=i[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,o=r?window.innerHeight-(n+r+8):void 0,l="center"===s&&o?"translateY(".concat(o,"px)"):"top"===s?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:l,transformOrigin:"top"}},[s,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:h,clearPositioning:c}},dM=eI()(to.YS,200),dU=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:c}=ds(r),d=(0,F.TL)(),u=(0,F.qr)();(0,v.useEffect)(()=>e6.F7.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return d((0,cZ.vL)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d((0,cB.td)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{d((0,cB.ut)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,cB.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(dM({cardId:t,editor:r}),d((0,W.Qx)({attached:!1}))),!0}case"ArrowUp":{d((0,cB.ut)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,cB.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(dM({cardId:t,editor:r}),d((0,W.Qx)({attached:!1}))),!0}default:return!1}}),[d,i,t,s,l,o,c,a,n,r,u])};var dF=n(50738);let dW=e=>{let t=(0,F.qr)(),n=(0,ie.p)(),i=(0,F.TL)();(0,v.useEffect)(()=>{let r=r=>{var s;let o=t.getState();if(!e||!dG()||!(0,W.hN)(o))return;let l=null===(s=r.clipboardData)||void 0===s?void 0:s.getData("text/html");if(!l)return;let{content:c}=(0,dF.T)(l,e.schema),d=c.content.filter(e=>(0,d_.KH)(e));if(d.length){let t=(0,eq.Bw)(e,(0,cB.zq)(o)),s=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=d.map(e=>(0,e_.hs)(c8()(e.toJSON()))).map(e=>(0,dt.Zs)(e)),c=(0,cB.ym)((0,F.bh)().getState());e.chain().insertContentAt(s,l,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:s});let n=(0,di.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),dr(e,c),i((0,cB.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),n({title:(0,a.jsx)(m.cC,{id:"3viq5b",values:{0:d.length,1:d.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class dH{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let dq=()=>new dH,dB=()=>{let e=(0,cI.h)(dq),t=(0,v.useRef)(null),n=(0,v.useRef)(),i=(0,v.useRef)(),r=(0,v.useRef)(),s=(0,v.useCallback)(e=>{if(!r.current)return;let t=dK(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current.top;t.y=i.current-o},[]),o=(0,v.useCallback)((e,i)=>{var r,s;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=i.point.y,c=e.target;if(!(c instanceof Element))return;let d=c.closest("[draggable]"),u=null==d?void 0:d.parentElement;u&&(a<l.top+25&&(d!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!==(s=null===(r=n.current)||void 0===r?void 0:r.height)&&void 0!==s?s:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,v.useCallback)(()=>{let s=t.current,o=dV(e);if(!s||!o)return;r.current=o,n.current={top:s.scrollTop,height:s.scrollHeight};let l=dK(o);l&&(i.current=l.y)},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,v.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[])}},dV=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},dK=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},dZ=(0,lq.E)(c.k),dY=(0,lq.E)(u.xu),dJ="data-".concat(nQ.dh),dX=e=>({initial:{x:-e},animate:{x:0,transition:cf},exit:{x:-e,transition:cg}}),dQ=e=>{let{onClose:t,editor:n,readOnly:i}=e,[r,s]=(0,v.useState)(null),[o,l]=(0,v.useState)(!1),[d,h]=(0,H.I)(q.H.filmstripViewPreference,"film"),x=(0,e$.ye)("transactionalFilmstrip"),p=(0,v.useRef)(null),{cards:m,editorContent:f,isDragging:g,selection:j,isLoaded:C}=cY(x?null!=r?r:void 0:n),{id:b}=(0,v.useMemo)(()=>dz(j,n),[n,j]),y=(0,F.TL)(),k=(0,F.CG)(cB.wg),w=(0,F.CG)(cZ.pe),S=(0,F.CG)(cZ.u9),E=(0,F.CG)(cZ.K3),[I,A]=(0,v.useState)(!1),{menuRef:_,isFilmstripCardMenuOpen:T,onFilmstripCardMenuClose:O,clearPositioning:D,handleContextMenu:R,menuRootStyles:P}=dN(),L=(0,v.useCallback)(()=>{if(O(),o){var e;null===(e=p.current)||void 0===e||e.focus()}},[o,O]),{scrollerRef:z,onScroll:G,dragControls:N,onDrag:M,onDragStart:U,onDragEnd:B}=dB(),V=(0,v.useCallback)(e=>()=>{if(A(!0),U(),z.current){let e=z.current.getBoundingClientRect().height;z.current.style.height="".concat(e,"px")}let t=k.includes(e)?k:[e];y((0,cB.WF)({selectedCardIdsToDrag:t})),y((0,cZ.CA)({cardIds:m.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[m,y,k,U,z]),K=(0,v.useCallback)(()=>{n&&(n.commands.rearrangeCardsById(m.map(e=>e.cardId),S),y((0,cZ.vL)()),B())},[m,y,n,S,B]),Z=(0,v.useCallback)(()=>{z.current&&(z.current.style.height=""),A(!1)},[z]);dW(n),dU({isFocused:o,readOnly:i,firstFocusedCardId:b,editor:n,isDragging:g}),(0,aH.O)({ref:p,handler(e){_.current&&_.current.contains(e.target)||(T&&O(),y((0,cB.Mt)()))}});let Y=(0,F.CG)(W.Pu),J=(0,ep.ff)("whiteAlpha.600","whiteAlpha.100"),X=(0,ep.ff)("#F9FAFBDD","gray.900"),Q=(0,ep.ff)("gray.800","gray.200"),$=(0,ep.ff)("blackAlpha.400","whiteAlpha.500"),{colorMode:ee}=(0,ep.If)(),et="dark"===ee,en=(0,v.useMemo)(()=>dL(et),[et]),[ei,er]=(0,v.useState)(!1),{width:es}=dv(),eo=dX(es),el=(0,v.useMemo)(()=>{let e=S.length;return g&&e>1?e:null},[g,S.length]),[ea,ec]=(0,v.useState)(!1),ed=(0,eH.As)("filmstrip");(0,v.useEffect)(()=>{ed.setScrollSelector(cb)},[ed]);let eu=(0,cV.WD)(),eh=!!eu.src,ex=x?r:n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:14,bottom:eh?"".concat(eu.height+2*eu.paddingY,"px"):2,justifyContent:"center",color:Q,children:[n&&x?(0,a.jsx)(dO,{parent:n,theme:Y,ref:s}):(0,a.jsx)(dT,{theme:Y,content:f}),(0,a.jsxs)(u.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:ea?0:1}},maxHeight:"100%",children:[(0,a.jsxs)(dZ,{ref:p,"data-guider-highlight":"filmstrip",className:cj,[dJ]:!0,pos:"relative",direction:"column",zIndex:cp,...eo,onAnimationStart:()=>{ec(!0)},onAnimationComplete:()=>{ec(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{l(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;p.current&&(null===(t=p.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=_.current)||void 0===n?void 0:n.contains(e.relatedTarget))||l(!1)},borderRadius:"md",bg:X,borderWidth:"1px",borderColor:J,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,a.jsx)(cQ,{isDark:et,onClose:t,viewPreference:d,setViewPreference:h}),(0,a.jsx)(dY,{className:cC,layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:$,borderRadius:"full"},...en},ref:z,onScroll:G,p:"8px",pt:0,children:(0,a.jsx)(cq.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);y((0,cZ.k)({reorderedCardIds:t}))},values:m,axis:"y",children:ex&&n&&C&&m.map((e,t)=>{let{cardId:r,displayBehavior:s}=e,o=k.includes(r),l=E===r;return(0,a.jsx)(cq.Item,{drag:!i&&"y",value:e,onDragStart:V(r),onDragEnd:K,onDragTransitionEnd:Z,className:"reorder-item",dragControls:N,transition:{layout:{duration:ei?0:void 0}},onDrag:M,style:{position:"relative",listStyle:"none"},children:(0,a.jsx)(db,{readOnly:i,editor:ex,card:e,index:g&&void 0!==w[r]?w[r]:t+1,isFirst:0===t,shouldHide:"hidden"===s,isDragInProgress:I,isEditorFocused:b===r&&n.isFocused,isFilmstripSelected:!!o,currentFocusedCard:b,numberOfCardsDragging:l?el:null,onContextClick:R(r),isAnimating:ea,showTextOnly:"list"===d})},r)})})})]}),(0,a.jsx)(dP,{onClose:t,isDark:et,isResizing:ei,setIsResizing:er})]})]}),n&&(0,a.jsx)(du,{ref:_,editor:n,readOnly:i,isOpen:T,onClose:L,clearPositioning:D,rootStyles:P,isDark:et})]})},d$=()=>{let e=(0,F.TL)(),t=(0,F.CG)(cB.GX),n=(0,eo.iq)({base:!1,lg:!0})||!1,[i,r]=(0,v.useState)(!1),[s,o]=(0,v.useState)(!1),l=(0,v.useCallback)(()=>{e((0,cB.dQ)({isOpen:!1})),e((0,cB.Mt)()),o(!0)},[e]),a=(0,v.useCallback)(()=>{n||r(!0),e((0,cB.dQ)({isOpen:!0}))},[n,e]),c=!n&&i;return(0,v.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,cB.dQ)({isOpen:!1})):r&&e((0,cB.dQ)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&c)}},d0=(0,lq.E)(ef.z),d1=(0,v.memo)(()=>{let{editor:e}=(0,tw._i)(),{isOpen:t,onClose:n,onOpen:i}=d$(),r=(0,nQ.Br)("edit"),s=(0,F.CG)(W.hN),o=(0,eD.Yy)(),[l,d]=(0,v.useState)(!1),u=(0,v.useCallback)(()=>{d(!0),setTimeout(()=>{i()}),setTimeout(()=>{d(!1)},750)},[i]);return(0,v.useEffect)(()=>e6.F7.on("keydown","FILMSTRIP",e=>!!(0,nL.ZP)("Mod+\\")(e)&&(t?n():u(),!0)),[t,n,u]),(0,a.jsx)(ck,{children:(0,a.jsx)(ej.Wk,{isDark:o,children:(0,a.jsx)(lB.M,{children:t?(0,a.jsx)(dQ,{onClose:n,editor:e,readOnly:!r||!s},"filmstrip"):(0,a.jsx)(ej.kH,{placement:"top-end",label:(0,a.jsx)(m.cC,{id:"7ShgZt"}),isDisabled:l,shortcut:"Mod+\\",children:(0,a.jsxs)(d0,{initial:{opacity:0},animate:{opacity:1,transition:cg},exit:{opacity:0,transition:cf},zIndex:cp,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:u,children:[(0,a.jsx)(cx.TX,{children:(0,a.jsx)(m.cC,{id:"7ShgZt"})}),l?(0,a.jsx)(c.k,{children:(0,a.jsx)(tI.$,{size:"sm"})}):(0,a.jsx)(p.G,{icon:x.CjD})]},"filmstrip-opener")})})})})});d1.displayName="Filmstrip";var d2=n(94207),d5=n(62502),d3=n(42156);let d4=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,s=(0,ie.p)(),o=(0,v.useRef)(null),[l,c]=(0,v.useState)(""),[d,{loading:u}]=(0,tF.D1_)(),h=()=>{d({variables:{id:r,title:l}}).then(()=>{c(()=>""),i()}).catch(e=>{console.error(e),s({title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,a.jsxs)(rx.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:o,children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tY.f,{children:(0,a.jsx)(oY.I,{ref:o,value:l,required:!0,placeholder:(0,op.$)(),onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()}})}),(0,a.jsx)(tJ.m,{children:(0,a.jsx)(tE.K,{spacing:2,direction:"row",align:"center",children:(0,a.jsx)(ef.z,{isLoading:u,isDisabled:u||!l||!l.length,onClick:()=>{h()},children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})})})]})]})},d6=(0,v.memo)(e=>{let{doc:t}=e,n=(0,v.useCallback)(()=>og.T.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:s}=(0,nc.M)({id:"analyticsModalDisclosure"}),{isOpen:o,onOpen:l,onClose:d}=(0,nc.M)({id:"titleModalDisclosure"}),{isInOfflineMode:u}=(0,y.$)(),h=(0,eN.z$)(),{user:g}=(0,eJ.SE)(),j=(0,eJ.py)("manage",t)&&!!g,C=(0,e$.ye)("editDocAI"),b=(0,v.useCallback)(()=>{t&&(t.title&&""!==t.title?n():l())},[t,n,l]),k=(0,v.useCallback)(e=>()=>{null==h||h.track(eN.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()},[h,null==t?void 0:t.id,s]);return j&&t&&!C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(m.cC,{id:"YaUqUV"}),children:(0,a.jsx)(d3.r,{"data-guider-highlight":"view-analytics-button","aria-label":f.ag._({id:"YaUqUV"}),isDisabled:u,onMouseDown:cJ.br,onClick:k("toolbar_analytics_block"),icon:(0,a.jsx)(p.G,{icon:x.Ma4})})})}),o&&(0,a.jsx)(d4,{onClose:d,isOpen:o,onSaveSuccess:()=>{d(),n()},docId:null==t?void 0:t.id}),i&&(0,a.jsx)(s7,{doc:t,onSharePanelOpen:b,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var d8=n(58905),d9=n(75230),d7=n(64951),ue=n(25215),ut=n(58450),un=n(41421),ui=n(14304),ur=n.n(ui),us=n(48869),uo=n(19210);let ul=(0,lq.E)(c.k),ua=e=>{let{doc:t}=e;return(0,a.jsx)(ul,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(lB.M,{initial:!1,children:(0,a.jsx)(ux,{doc:t})})})},uc=(0,v.memo)(e=>{let{doc:t}=e,{editor:n}=(0,tw._i)(),{isConnected:i}=(0,y.$)(),r=(0,ie.p)(),s=(0,v.useRef)(null),o=(0,v.useRef)(null),[l,{loading:c}]=(0,tF.D1_)(),[d,h]=(0,v.useState)(null),[x,p]=(0,v.useState)(!1),[g,j]=(0,v.useState)(!1),C=(0,eJ.py)("edit",t),b=C?300:500,k=(0,v.useCallback)(()=>{if(!n)return"";let[e]=(0,eU.N2)(n.state.doc,eq.KH);return e&&(0,l2.getCardTitle)(e.node.toJSON())||""},[n]);(0,v.useEffect)(()=>{!t||x||c||(h(t.title||""),j(!!t.titleEdited))},[t,x,c]);let w=()=>{s.current.style.width=o.current.offsetWidth+0+"px"},S=(0,ep.ff)("gray.800","gray.200");return(0,a.jsx)(ej.kH,{label:C?i?(0,a.jsx)(m.cC,{id:"2wxgft"}):(0,a.jsx)(m.cC,{id:"Cb+Bgk"}):null,"aria-label":f.ag._({id:"2wxgft"}),children:(0,a.jsxs)(d8.C,{value:d||"",placeholder:d||k(),isDisabled:c||!C||!i,isPreviewFocusable:C,maxW:b,width:"100%",fontWeight:"normal",onCancel:()=>{w(),p(!1)},onFocus:()=>{w(),t&&!c&&p(!0)},onChange:e=>{w(),x&&(h(e),j(!!e))},onSubmit:()=>{if(!t||c)return;p(!1);let e=d||k();l({variables:{id:t.id,title:e,titleEdited:g}}).catch(e=>{console.error(e),r({title:(0,a.jsx)(m.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,a.jsx)(d9.w,{px:1,py:.5,display:x?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:g?S:"inherit"}),(0,a.jsx)(d7.V,{ref:s,px:1,py:.5,color:g?S:"inherit",maxW:b,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,a.jsx)(u.xu,{ref:o,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:ur().sanitize((d||"").replace(/\s/g,"&nbsp;"))}})]})})});uc.displayName="EditableDocTitle";let ud=e=>{let{cardId:t,isEllipsis:n,value:i,onClick:r}=e,s=(0,tn.c)(t);if(n)return(0,a.jsx)(p.G,{icon:x.cNd});if(!t&&!i)return null;let o=i||(null==s?void 0:s.title)||"";return(0,a.jsx)(d.x,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:o})},uu=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,W.gh)(e),i=(0,W.i2)(e)||"",r=(0,W.X9)(e).parents[i]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];let s=r[0],o=r[r.length-1];return[{isHome:!0},r.length>1?{cardId:s}:null,r.length>2?{isEllipsis:!0}:null,r.length>0?{cardId:o}:null,{cardId:i}]}},uh=()=>{let e=(0,e$.ye)("presentModeFlat");return(0,F.CG)(uu({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},ux=(0,v.memo)(e=>{let{doc:t}=e,n=uh(),[i]=(0,uo.X)(q.H.lastHomeUrl,"/"),{user:r}=(0,eJ.SE)(),{isConnected:s,isInOfflineMode:o}=(0,y.$)(),{confirmNavigation:l}=(0,tw._i)(),{push:h}=(0,ev.useRouter)(),g=(0,eo.iq)({base:"xs",sm:"sm"}),j=(0,ep.ff)("gray.500","gray.400"),v=(0,ep.ff)("gray.800","gray.100");return(0,a.jsxs)(em.U,{spacing:0,as:ef.z,textAlign:"left",px:0,_hover:{color:v},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,a.jsx)(ue.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:g,spacing:["4px","8px"],separator:(0,a.jsx)(u.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,a.jsx)(p.G,{icon:x._tD})}),children:n.map((e,s)=>{if(!e)return null;let o=s===n.length-1,{cardId:c,isEllipsis:d,isDocTitle:u,isHome:m,value:f}=e,g=m?"home":d?"ellipsis":c||f||s;if(m&&!r)return null;let v={as:nN(),href:i||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,a.jsx)(ut.g,{children:(0,a.jsx)(ul,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,a.jsx)(un.A,{isCurrentPage:o,pointerEvents:o&&!u?"none":"inherit",color:o?j:"inherit",...m?{...v}:{},children:u?(0,a.jsx)(uc,{doc:t}):m?(0,a.jsx)(i2.r,{ml:-3,as:d3.h,href:v.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),l().then(()=>{h(v.href)}))},mr:-1,children:(0,a.jsx)(p.G,{size:"1x",icon:x.J9Y})}):(0,a.jsx)(ud,{cardId:c,value:f,isEllipsis:d,onClick:()=>{c&&(0,us.D)({cardId:c,method:"push"})}})})},g)},g)})}),!s&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{mr:2,children:(0,a.jsx)(m.cC,{id:"ysdDIA"})}),o&&(0,a.jsx)(d.x,{color:"gray.300",children:(0,a.jsx)(m.cC,{id:"+QNhGE"})})]}),"aria-label":f.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",pr:3,children:(0,a.jsx)(p.G,{icon:x.bKP})})})]})});ux.displayName="BreadcrumbGroup";var up=n(82642),um=n(62453),uf=n(93274),ug=n(3422);let uj=(0,v.createContext)(null);var uv=n(85886);let uC=e=>!e.isLayoutDirty&&e.willUpdate(!1),ub=e=>!0===e,uy=e=>ub(!0===e)||"id"===e,uk=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,v.useContext)(ug.p),s=(0,v.useContext)(uj),[o,l]=(0,uv.N)(),a=(0,v.useRef)(null),c=r.id||s;null===a.current&&(uy(i)&&c&&(t=t?c+"-"+t:c),a.current={id:t,group:ub(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(uC);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let d=(0,v.useMemo)(()=>({...a.current,forceRender:o}),[l]);return v.createElement(ug.p.Provider,{value:d},e)},uw=()=>{let{user:e,anonymousUser:t}=(0,eJ.SE)(),n=(0,C.I0)(),i=(0,ie.p)(),{editor:r}=(0,tw._i)(),{collaborators:s,followers:o}=(0,C.v9)((0,W._h)((null==e?void 0:e.id)||t.id));aG({editor:r,collaborators:s,user:e});let l=(0,C.v9)(W.Ok),u=(0,C.v9)(W.e0),h=(0,C.v9)(W.yn),x=(0,C.v9)(W.gs),p=(0,C.v9)(W.JA);(0,v.useEffect)(()=>{l.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sh.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:rK()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,a.jsx)(d.x,{ml:2,children:(0,a.jsx)(m.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[l,i]),(0,v.useEffect)(()=>{let e=!h&&x&&!p;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(d.x,{size:"sm",mr:6,children:(0,a.jsx)(m.cC,{id:"PjodLp"})}),(0,a.jsxs)(eg.h,{size:"sm",alignItems:"center",children:[(0,a.jsx)(ef.z,{onClick:()=>{n((0,W.Qx)({attached:!0}))},variant:"solid",children:(0,a.jsx)(m.cC,{id:"f/C2ic"})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5JWVnj"}),children:(0,a.jsx)(T.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":f.ag._({id:"5JWVnj"}),icon:(0,a.jsx)(up.T,{}),onClick:()=>{n((0,W.Qx)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,h,x,p,i,n]),(0,v.useEffect)(()=>{x||!r||r.isDestroyed||n((0,W.Qx)({following:null}))},[r,x,n]);let g=(0,eo.iq)({base:4,md:6,xl:8})||6,j=g/(o.length?2:1),b=g/(s.length?2:1);return(0,a.jsx)(c.k,{children:(0,a.jsxs)(em.U,{divider:(0,a.jsx)(um.c,{borderColor:"gray.200"}),children:[o.length&&(0,a.jsx)(uS,{type:"FOLLOWERS",collaborators:o,max:b,isEveryone:0===s.length,localCollaborator:u,localIsAttached:h}),s.length&&(0,a.jsx)(uS,{type:"COLLABORATORS",collaborators:s,max:j,isEveryone:0===o.length,localCollaborator:u,localIsAttached:h})]})})};(r=o||(o={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";let uS=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:s,isEveryone:o}=e,l=az(),u="FOLLOWERS"===r,h=t.length>s,x=h?t.slice(0,s-1):t,p=h?t.length-s+1:0,g=e=>{let{localIsFollowing:t,collaborator:n}=e;u||l({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,a.jsx)(uk,{children:(0,a.jsxs)(uf.H,{size:"sm",spacing:u?-2:0,children:[u&&(0,a.jsx)(uE,{isEveryone:o}),x.map((e,t)=>{var r;let s=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,o=!!e.idleSince,l=!u&&(h||x.length-1!==t);return(0,a.jsx)(ej.Vw,{ignoreFallback:!0,name:e.name,label:(0,a.jsxs)(c.k,{direction:"column",justify:"center",align:"center",children:[(0,a.jsx)(d.x,{children:e.name}),(0,a.jsx)(d.x,{fontSize:"xs",children:u?(0,a.jsx)(m.cC,{id:"iRohzP"}):s&&i?(0,a.jsx)(m.cC,{id:"1QTvS5"}):(0,a.jsx)(m.cC,{id:"2Ldadb"})})]}),pointerEvents:o?"none":"auto",opacity:o?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:s&&i,bg:e.color,shadow:"base",color:rK()(e.color).isDark()?"white":"black",cursor:u?"":"pointer",boxProps:l?{marginEnd:-2}:{},onClick:()=>g({localIsFollowing:s,collaborator:e})},e.sessionId)}),p>0&&(0,a.jsxs)(ej.Z9,{tooltipLabel:f.ag._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id);g({localIsFollowing:!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId),collaborator:r})},avatars:t,count:p,disabled:u,children:[(0,a.jsx)(d.x,{px:2,children:u?(0,a.jsx)(m.cC,{id:"vliZud",values:{0:t.length}}):(0,a.jsx)(m.cC,{id:"sC4bhw",values:{0:t.length}})}),!u&&(0,a.jsx)(d.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"miJbY4"})}),(0,a.jsx)(ra.R,{})]})]})})},uE=e=>{let{isEveryone:t}=e,[n,i]=(0,v.useState)(!1),[r,s]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{!n&&t&&(s(!0),i(!0),setTimeout(()=>{s(!1)},3e3))},[t,n]),t)?(0,a.jsx)(u.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"w7dTyp"}),isOpen:o||r,children:(0,a.jsx)(u.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a.jsx)(p.G,{icon:x.Mdf})})})}):(0,a.jsx)(u.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,a.jsx)(p.G,{icon:x.Mdf})})};var uI=n(46164),uA=n(10001);let u_=(0,lq.E)(u.xu),uT=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,a.jsx)(tE.K,{p:2,children:(0,a.jsx)(lB.M,{initial:!1,children:t.map(e=>(0,a.jsx)(u_,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,a.jsx)(uA.q,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var uO=n(56666);function uD(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function uR(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){uD(s,i,r,o,l,"next",e)}function l(e){uD(s,i,r,o,l,"throw",e)}o(void 0)})}}var uP=n(89644),uL=n.n(uP),uz=n(41857);function uG(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function uN(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){uG(s,i,r,o,l,"next",e)}function l(e){uG(s,i,r,o,l,"throw",e)}o(void 0)})}}function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function uU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uF="axios-retry";function uW(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&uz(e)}var uH=["get","head","options"],uq=uH.concat(["put","delete"]);function uB(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function uV(e){return!!e.config&&uB(e)&&-1!==uq.indexOf(e.config.method)}function uK(e){return uW(e)||uV(e)}function uZ(){return 0}function uY(e){var t=e[uF]||{};return t.retryCount=t.retryCount||0,e[uF]=t,t}function uJ(){return(uJ=uN(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function uX(e,t){var n;e.interceptors.request.use(e=>(uY(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=uN(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=uK,retryDelay:o=uZ,shouldResetTimeout:l=!1}=uU(uU({},t),i[uF]),a=uY(i);if(yield function(e,t,n,i){return uJ.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var c=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var d=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-d-c,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),c))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}uX.isNetworkError=uW,uX.isSafeRequestError=function(e){return!!e.config&&uB(e)&&-1!==uH.indexOf(e.config.method)},uX.isIdempotentRequestError=uV,uX.isNetworkOrIdempotentRequestError=uK,uX.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()},uX.isRetryableError=uB;var uQ=n(31003);class u${constructor(e){(0,uO.Z)(this,"host",void 0),(0,uO.Z)(this,"apiKey",void 0),(0,uO.Z)(this,"userToken",void 0),(0,uO.Z)(this,"axiosClient",void 0),(0,uO.Z)(this,"socket",void 0),(0,uO.Z)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=uL().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new uQ.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),uX(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:uX.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return uR(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!uX.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}var u0=n(10161),u1=n.n(u0);function u2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u2(Object(n),!0).forEach(function(t){(0,uO.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(s=l||(l={})).loading="loading",s.fetchMore="fetchMore",s.ready="ready",s.error="error";var u3={shouldSetPage:!0,shouldAppend:!1};function u4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u4(Object(n),!0).forEach(function(t){(0,uO.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u4(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class u8{constructor(e,t,n){this.knock=e,this.feedId=t,(0,uO.Z)(this,"apiClient",void 0),(0,uO.Z)(this,"userFeedId",void 0),(0,uO.Z)(this,"channelConnected",!1),(0,uO.Z)(this,"channel",void 0),(0,uO.Z)(this,"broadcaster",void 0),(0,uO.Z)(this,"defaultOptions",void 0),(0,uO.Z)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:l.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===l.loading})),setResult:function(t){var{entries:n,meta:i,page_info:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u3;return e(e=>{var t;return{items:s.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:s.shouldSetPage?r:e.pageInfo,loading:!1,networkStatus:l.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>u5(u5({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?u5(u5({},e),i[e.id]):e)}))}})),this.broadcaster=new(u1()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return uR(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return uR(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return uR(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return uR(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return uR(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,c=o.filter(e=>!e.read_at).length,d=u6(u6({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-c});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:d,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(d),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return uR(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return uR(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:r}=t.store,{networkStatus:s}=r();if(![l.loading,l.fetchMore].includes(s)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:l.loading)});var o=u6(u6({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:o});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(l.error)),{status:a.statusCode,data:a.error||a.body};var c={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var d={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(c,d))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(c,u))}else i(e=>e.setResult(c));return t.broadcast("messages.new",c),{data:c,status:a.statusCode}}})()}fetchNextPage(){var e=this;return uR(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:l.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return uR(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(u6(u6({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return uR(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}}class u9{constructor(e){(0,uO.Z)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new u8(this.instance,e,t)}}var u7="default";function he(e){return"object"==typeof e?e:{subscribed:e}}class ht{constructor(e){(0,uO.Z)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return uR(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return uR(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||u7,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return uR(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||u7,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return uR(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||u7,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return uR(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||u7,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return uR(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||u7,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return uR(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||u7,s=he(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return uR(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||u7,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return uR(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||u7,s=he(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}}class hn{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,uO.Z)(this,"host",void 0),(0,uO.Z)(this,"userToken",void 0),(0,uO.Z)(this,"apiClient",null),(0,uO.Z)(this,"userId",void 0),(0,uO.Z)(this,"feeds",new u9(this)),(0,uO.Z)(this,"preferences",new ht(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new u$({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}}var hi=n(95405);let hr=e=>!!e.comment&&null!==e.timeout,hs=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,ie.p)(),l=null==t?void 0:t.id,a=(0,v.useMemo)(()=>{if(!l)return null;let e=new hn(hi.v.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[c,d]=(0,v.useState)({}),u=(0,v.useRef)(!0),h=(0,v.useRef)(r);h.current=r,(0,v.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,v.useCallback)(()=>d({}),[]),p=(0,v.useCallback)(e=>{d(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n;return(!0===e?-1===r.timeout:i===e)||(t[i]=r),t},{}))},[]);(0,v.useEffect)(()=>{r||p(!0)},[p,r]),(0,v.useEffect)(()=>{Object.entries(c).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?d(e=>{let n={...e};return n[t].timeout=-1,n}):p(t))},s);d(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[c,i,s,p]),(0,v.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(hi.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(d(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:m}=(0,y.$)();return(0,v.useEffect)(()=>{if(!a||!n)return;let e=a.client();m?e.connectSocket():e.disconnectSocket()},[n,m,a]),{reset:x,comments:Object.values(c).filter(hr).map(e=>e.comment)}},ho=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:s}=e,{user:o}=(0,eJ.SE)(),{editor:l}=(0,tw._i)(),c=(0,e$.ye)("editDocAI"),[d,u]=(0,tg.XI)(),{comments:h,reset:m}=hs({user:o,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),f=!!(l&&r&&r.comments);(0,v.useEffect)(()=>{if(!f)return;let{commentId:e}=(0,ey.sY)();e&&nh.pw.emit(nh.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[f]),(0,v.useEffect)(()=>{(i||s===eV.q.SLIDE_VIEW)&&m()},[i,m,s]);let g=!!h.length&&!i&&s!==eV.q.SLIDE_VIEW,j=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===tF.Ux9.Open).length)||0;return c&&0===j?null:(0,a.jsxs)(A.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:g,placement:"bottom",children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(d3.h,{onMouseDown:cJ.br,onClick:n,icon:(0,a.jsx)(p.G,{icon:x.Mzg}),isActive:i,"aria-label":i?"Hide comments":"Show comments",borderRadius:5,children:j})}),(0,a.jsx)(ri.h,{children:r&&(0,a.jsxs)(O.y,{bg:"white",shadow:"lg",border:"none",ref:d,children:[(0,a.jsx)(uI.Q,{bg:"white"}),(0,a.jsx)(uT,{editor:l,user:o,commentFeedItems:h,doc:r})]})})]})},hl=()=>{let{isInOfflineMode:e}=(0,y.$)();return(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(m.cC,{id:"EVnzPs"}),children:(0,a.jsx)(d3.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",isDisabled:e,onClick:()=>{nz.T.emit("toggle",{})},icon:(0,a.jsx)(p.G,{icon:x.JyM})})})})};var ha=n(82655);let hc=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},hd=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...s}=e,o=(0,v.useRef)(null),l=(0,ep.ff)("gray.200","gray.700"),c=(0,ep.ff)("trueblue.400","trueblue.300"),d=(0,ep.ff)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,v.useEffect)(()=>{let e,i;let s=o.current;if(!s||!r)return;hc(s,0);let l=r=>{e||(e=r);let o=Math.min(100,(r-e)/(10*t));hc(s,o),o<100?i=requestAnimationFrame(l):null==n||n()};return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,a.jsx)(u.xu,{ref:o,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:l}},...s,children:(0,a.jsx)(a1.D,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,a.jsx)(a2,{children:(0,a.jsx)(p.G,{icon:x.g82,fontSize:"14px",style:{color:d,borderRadius:"6px"}})})})})};var hu=n(77692),hh=n(96114),hx=n(69274),hp=n(13312),hm=n(78180),hf=n(65927),hg=n(2529),hj=n(96443),hv=n(98082);let hC=()=>{let{generate:e}=(0,tc.jz)("EditCardParallel",{}),{generate:t}=(0,tc.jz)("TranslateCardParallel",{});return(0,v.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},hb=e=>{var t;let{editor:n}=e,i=hC(),r=(0,F.CG)(W.yx),s=(0,F.CG)(W.Pu),o=(0,F.qr)(),l=(0,F.CG)(ne.oh),a=(0,tm.W7)(),c=(0,iY.VA)(n),d=(0,v.useCallback)(async e=>{var t;let{instructions:n="",inputHtml:l,operation:d}=e,u=(null==a?void 0:a.format)||"deck",h=(null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||e$.VH.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let x=r.organization.id,p=(0,td.nZ)(),m=performance.now(),f=(0,tp.D)(o),g={interface:"edit-card-parallel",interactionId:p,inputContent:l,inputMessage:n,inputData:{custom:!!d,operation:null==d?void 0:d.key,operationGroup:null==d?void 0:d.group,format:u,imageProvider:h},product:(0,hg.K9)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:l,request:n,format:u,outline:f,imageProvider:h},interactionId:p},d),t=null==a?void 0:a.settings.imageStyle;!t&&"aiGenerated"===h&&s&&(t=(0,l5.A)(s)),(0,td.hq)(g);let o=await e;console.log("[EditCardParallel] Response",o);let c=(0,hh.Au)(o);return console.log("[EditCardParallel] Parsing HTML",c),{output:await Promise.all(c.map(async e=>(0,hx.sj)(e,{docFormatKey:u,loadImages:!1,context:{workspaceId:x,docId:r.id,interactionId:p},imageOptions:{provider:h,generateStyle:t},theme:s}))),interactionId:p}}catch(e){throw(0,td.pQ)({...g,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-m}),e}},[null==a?void 0:a.format,null==a?void 0:a.settings.imageStyle,null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),u=(0,v.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,eq.Y0)(n.state.doc),s=t||(null==i?void 0:i.instructions);if(r&&s)try{o.dispatch((0,ne.dt)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,ne.t)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,ta.c)(n,t.node))});let t=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await d({instructions:s,operation:i,inputHtml:t});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let c={};r.forEach((e,t)=>{var n;let r=l[t];r.attrs=(0,hv.yH)(e.node.attrs,r.attrs),c[e.node.attrs.id]=r,o.dispatch((0,ne.t)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:s,variants:[{label:f.ag._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(n=i.variationName)||void 0===n?void 0:n.call(i))||f.ag._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),hk(n,c)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,ne.t)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,ne.dt)(!1))}},[n,d,o]);return(0,v.useEffect)(()=>hm.T.on("translate",e=>{let{type:t,language:n}=e,i=hj.xd.find(e=>"edit.translate"===e.key);"doc"===t&&i&&u({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[u]),{editDoc:u,acceptAll:(0,v.useCallback)(()=>{o.dispatch((0,ne.Mq)({}))},[o]),rejectAll:(0,v.useCallback)(()=>{hy(n,o.getState(),!0),o.dispatch((0,ne.Mq)({}))},[n,o]),status:l}},hy=(e,t,n)=>{let i=(0,ne.Ir)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,eq.Bw)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=tQ.NB.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},hk=(e,t)=>{let n=(0,eq.Y0)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=t[n.node.attrs.id];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let r=tQ.NB.fromJSON(e.state.schema,i),s=(0,W.Pu)((0,F.bh)().getState());return(0,hp.eM)(e,r,s),i}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},hw=()=>{let e=!!(0,F.CG)(eA.lH),{isOpen:t,onClose:n,onOpen:i}=(0,nc.M)({id:"TranslateDocDisclosure"}),r=(0,v.useCallback)(e=>{hm.T.emit("translate",{type:"doc",language:e}),n()},[n]);return{translateDocModal:t?(0,a.jsx)(hf.o,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null,onTranslateDocOpen:i}},hS=(0,lq.E)(e2.g),hE=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,y.$)(),{openUpsellModal:i}=(0,rG.z)(),{editDoc:r,status:s,acceptAll:o,rejectAll:l}=hb({editor:t}),d=(0,eD.Yy)(),u=(0,v.useRef)(null),h=(0,v.useRef)(null),x=(0,e$.ye)("editCard2"),g=(0,ep.ff)("gray.200","whiteAlpha.200"),[j,C]=(0,v.useState)(),b=(0,v.useCallback)(()=>C(void 0),[]),k=(0,J.Y)("edit_doc_ai"),{translateDocModal:w,onTranslateDocOpen:S}=hw(),E="loading"===s,I=(0,v.useCallback)(e=>{var t;if(!k){i({segmentEvent:eN.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(o(),C(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){S();return}r(e)},[o,k,r,S,i]);return x?(0,a.jsxs)(ej.Wk,{isDark:d,children:[(0,a.jsx)(nb.v,{placement:"bottom-end",isLazy:!0,initialFocusRef:h,onOpen:()=>{C(void 0)},children:e=>{let{onClose:t,isOpen:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"nIHiKm"}),placement:"bottom",children:(0,a.jsx)(ny.j,{as:d3.r,position:"relative",colorScheme:"trueblue","aria-label":f.ag._({id:"nIHiKm"}),borderRadius:"md",bg:i?g:void 0,isDisabled:E||n,icon:E?(0,a.jsx)(tI.$,{size:"sm"}):(0,a.jsx)(p.G,{icon:ha.JyM})})}),(0,a.jsx)(hA,{currentOperation:j,onConfirm:o,onReject:l,onClose:b})]}),(0,a.jsx)(ri.h,{children:(0,a.jsxs)(nk.q,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,a.jsx)(hu.M,{firstItemRef:u,inputRef:h,editCardIfAllowed:I,onClose:t,isDisabled:E,opacityFadeUpsell:!k,groups:["writing"],showCreditCosts:!1}),(0,a.jsx)(rz.m,{isNarrow:!0,mb:0,segmentEvent:eN.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,a.jsx)(m.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:Y.x8}}),description:(0,a.jsx)(m.cC,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})]})}}),w]}):null},hI={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},hA=e=>{var t,n,i;let{currentOperation:r,onConfirm:s,onReject:o,onClose:l}=e,u=(0,F.CG)(ne.oo),[h,g]=(0,v.useState)(!0),j="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,a.jsx)(m.cC,{id:"MRZxAn"}),C=null!==(n=u.done)&&void 0!==n?n:0,b=null!==(i=u.error)&&void 0!==i?i:0,y=!!((C||b)&&r);(0,v.useEffect)(()=>{y||g(!0)},[y]);let k={activeColor:(0,ep.ff)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,ep.ff)(b?"red.200":"gray.100","whiteAlpha.200"),bg:(0,ep.ff)("white","gray.900"),bgError:(0,ep.ff)("red.100","red.700"),textColor:(0,ep.ff)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,ep.ff)("red.500","red.100"),iconColor:(0,ep.ff)("blackAlpha.800","whiteAlpha.800")};return(0,a.jsx)(lB.M,{children:y&&(0,a.jsxs)(hS,{position:"absolute",bg:b?k.bgError:k.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,right:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>g(!1),...hI,children:[b>0?(0,a.jsxs)(em.U,{spacing:0,children:[(0,a.jsx)(c.k,{mx:2,justifyContent:"center",alignItems:"center",color:k.textErrorColor,children:(0,a.jsx)(p.G,{icon:x.e7M,size:"lg"})}),(0,a.jsxs)(e2.g,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,a.jsx)(d.x,{fontSize:"sm",color:k.textErrorColor,children:(0,a.jsx)(m.cC,{id:"nwtY4N"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:k.textErrorColor,children:(0,a.jsx)(m.cC,{id:"xbrcey"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e2.g,{spacing:0,alignItems:"flex-start",children:[(0,a.jsxs)(c.k,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(p.G,{icon:ha.JyM,color:"var(--chakra-colors-trueblue-400)"}),(0,a.jsx)(d.x,{fontSize:"sm",mx:2,color:k.textColor,children:j})]}),(0,a.jsx)(c.k,{mx:2,children:(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"Dj1qYd",values:{doneCount:C}})})})]}),(0,a.jsxs)(eg.h,{spacing:0,children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"I1yW7+"}),placement:"top",children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,a.jsx)(p.G,{icon:x.X7o}),onClick:o})}),(0,a.jsx)(ej.kH,{label:f.ag._({id:"kOU1RP"}),placement:"top",children:(0,a.jsx)(ef.z,{"aria-label":f.ag._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,a.jsx)(p.G,{icon:x.FFp}),onClick:s,children:(0,a.jsx)(m.cC,{id:"PHWHEO"})})})]})]}),(0,a.jsx)(c.k,{mt:-6,mr:-1,children:(0,a.jsx)(ej.kH,{label:f.ag._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(hd,{onClose:l,enabled:h&&!b,duration:30,borderRadius:"full",_hover:{bg:k.hoverColorCloseButton,color:k.textColor}})})})]},"confirm-edit-doc-toast")})},h_=(0,lq.E)(u.xu),hT=()=>{let e=(0,F.CG)(W.WI),t=(0,F.CG)(W.yn);return(0,a.jsx)(lB.M,{initial:!1,children:e&&t&&(0,a.jsx)(h_,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},hO=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,a.jsxs)(nb.v,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,a.jsx)(ny.j,{as:d3.r,borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:x.cNd}),onMouseDown:cJ.br,"data-testid":"doc-toolbar-menu-button"}),(0,a.jsx)(ri.h,{children:t&&(0,a.jsx)(ac,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},hD=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,F.CG)(W.e0),s=(0,v.useRef)(null),o=(0,ie.p)();return(0,v.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,v.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]),{handlePresentViewClick:(0,v.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,ey.C3)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o])}};var hR=n(73235),hP=n(20737);function hL(){let e=(0,hR._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return hL=function(){return e},e}let hz=e=>({followOnStart:!0,followingId:e}),hG=e=>{switch(e){case"edit":return f.ag._({id:"UZN1cZ"});case"comment":return f.ag._({id:"jFTs0A"});case"view":return f.ag._({id:"Ya6CJ0"});default:return f.ag._({id:"Txd1qM"})}},hN=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:s,onPlayClick:o}=e,{user:l}=(0,eJ.SE)(),{replace:c}=(0,ev.useRouter)(),h=hz(null==l?void 0:l.id),[x,g]=(0,v.useState)(h),j=(0,ey.eo)(s,x),{user:C,color:b}=(0,eJ.SE)(),y=(0,F.CG)(tU.yx),k=null==y?void 0:null===(n=y.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,w=(0,lH.F4)(hL());return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(rx.u_,{isOpen:i,onClose:r,size:"lg",children:[(0,a.jsx)(tV.Z,{}),(0,a.jsxs)(rp.h,{children:[(0,a.jsx)(rm.x,{children:(0,a.jsx)(m.cC,{id:"88XnIQ"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rR.i,{}),(0,a.jsx)(tY.f,{pt:"6",children:(0,a.jsxs)(tE.K,{spacing:"4",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:hG(k)},components:{0:(0,a.jsx)(d.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,a.jsx)(ej.kH,{label:f.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,a.jsx)(u.xu,{mb:"2",children:(0,a.jsx)(hP.I,{url:j,variant:"solid"})}),(0,a.jsxs)(nH.b,{children:[(0,a.jsx)(rM.z,{}),(0,a.jsxs)(em.U,{flexBasis:"100%",alignItems:"top",children:[(0,a.jsx)(d.x,{fontSize:"sm",width:"100%",children:(0,a.jsx)(m.cC,{id:"EApNIe"})}),(0,a.jsxs)(u.xu,{position:"relative",textShadow:"sm",children:[(0,a.jsx)(sh.q,{animation:"".concat(w," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(b.value),shadow:"lg"}),(0,a.jsx)(u.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,a.jsx)(p.G,{icon:e3.qaO,fixedWidth:!0})})]})]})]})]})}),(0,a.jsx)(tJ.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,a.jsx)(m.cC,{id:"DPfwMq"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:()=>{r(),o(),c(j,j,{shallow:!0})},leftIcon:(0,a.jsx)(p.G,{icon:e3.zc}),children:(0,a.jsx)(m.cC,{id:"tbDuNX"})})]})})]})]})})},hM=e=>{var t,n,i,r;let{doc:s,docEditorType:o,isStaticEditor:l,enterSlideView:h,exitSlideView:g,setExitedFullscreenByClick:j,isFullscreen:C,enterFullscreen:b,exitFullscreen:k,shouldHide:w}=e,{onOpen:S,onClose:E,isOpen:I}=(0,nc.M)({id:"meetModal"}),{user:A}=(0,eJ.SE)(),_=(0,F.CG)(W.gh),T=(0,v.useRef)(_);(0,v.useEffect)(()=>{T.current=_},[_]);let{shortcutLabel:O,shortcutIcon:D,shortcutKeys:R,buttonLabel:P}=rj()[_],L=null==s?void 0:null===(n=s.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,z=!!(null==s?void 0:null===(r=s.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),G=(0,eJ.py)("comment",s||void 0),N=(0,eJ.py)("manage",s||void 0),M=!l&&A&&L&&N,U=(0,e$.ye)("cardNotes"),H=_===eV.q.SLIDE_VIEW,q=_===eV.q.DOC_VIEW,B=U&&G&&o!==tk.Z.PUBLIC_STATIC,{isInOfflineMode:V}=(0,y.$)(),{handlePresentViewClick:K}=hD({docId:null==s?void 0:s.id,enabled:U&&H,enterSlideView:h}),Z=(0,e$.ye)("presentFullScreen"),Y="present"===(0,F.CG)(W.e_).primaryAction?"solid":"plain";return(0,a.jsxs)(c.k,{display:w?"none":"flex",children:[(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":H?"slide":"doc",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:O,shortcut:R,children:(0,a.jsx)(d3.h,{fontWeight:"normal",size:"sm",variant:Y,onClick:()=>{H?g():h({fullscreen:Z})},onMouseDown:cJ.br,icon:(0,a.jsx)(p.G,{icon:D}),"data-present-button":!0,children:P})}),(0,a.jsxs)(nb.v,{children:[(0,a.jsx)(ny.j,{variant:Y,as:d3.r,icon:(0,a.jsx)(p.G,{icon:x.ptq})}),(0,a.jsx)(ri.h,{children:(0,a.jsxs)(nk.q,{zIndex:"popover",children:[q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ru.k,{title:f.ag._({id:"tbDuNX"}),children:[B&&(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.s0r,fixedWidth:!0}),onClick:K,isDisabled:V,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T+GUKl"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ACelDx"})})]})}),B&&(0,a.jsx)(ra.R,{}),(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.Rkb,fixedWidth:!0}),command:(0,ej.cE)("Mod+Enter"),onClick:()=>h({fullscreen:!1}),children:(0,a.jsx)(m.cC,{id:"LRFe2O"})}),(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.tc$,fixedWidth:!0}),command:(0,ej.cE)("Mod+Shift+Enter"),onClick:()=>h({fullscreen:!0}),children:(0,a.jsx)(m.cC,{id:"OwIqiD"})})]}),M&&(0,a.jsx)(ra.R,{})]}),H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:e3.Bg$,fixedWidth:!0}),command:(0,ej.cE)("Esc"),onClick:g,children:(0,a.jsx)(m.cC,{id:"5Rfo7J"})}),(B||M)&&(0,a.jsx)(ra.R,{}),B&&(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.s0r,fixedWidth:!0}),onClick:K,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T+GUKl"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ACelDx"})})]})})]}),M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.kH,{isDisabled:z,label:(0,a.jsx)(m.cC,{id:"zk6wKo"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(rc.s,{onClick:()=>{var e;(null==s?void 0:null===(e=s.accessLinks)||void 0===e?void 0:e[0].permission)&&S()},isDisabled:!z||V,icon:(0,a.jsx)(p.G,{icon:x.ASo,fixedWidth:!0}),children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(m.cC,{id:"z7gRub",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,a.jsx)(hN,{isOpen:I,onClose:E,accessLinkUrl:L,onPlayClick:()=>{h({fullscreen:!1})}})]})]})})]})]}),H&&(0,a.jsx)(c.k,{ml:H?2:0,children:(0,a.jsx)(ej.kH,{label:C?"Exit full screen":"Enter full screen",children:(0,a.jsx)(d3.r,{"aria-label":C?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:C?x.Qj4:x.TL5}),onClick:C?()=>{j(!0),k()}:b})})})]})},hU=e=>{switch(e){case tF.X5w.Pending:return{icon:x.rk4,label:f.ag._({id:"JKsafh"})};case tF.X5w.Verified:return{icon:x.LEp,label:f.ag._({id:"DKrUGB"})};case tF.X5w.Failed:return{icon:x.FGl,label:f.ag._({id:"ojSx8e"})}}},hF=e=>{let{domain:t,status:n,isLive:i,site:r,docId:s}=e,o=(0,eO.D5)({site:r,docId:s}),l=(0,v.useMemo)(()=>hU(n),[n]);return r&&s?(0,a.jsxs)(em.U,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,a.jsx)(ej.kH,{label:l.label,placement:"left",children:(0,a.jsx)(T.h,{variant:"ghost",size:"xs",mx:-1,mr:-2,color:"gray.500","aria-label":l.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,a.jsx)(p.G,{icon:l.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:n===tF.X5w.Pending})})}),(0,a.jsx)(ej.kH,{label:t,placement:"top",openDelay:500,closeOnClick:!1,children:(0,a.jsx)(u.xu,{fontSize:"xs",pointerEvents:"auto",children:hW(t,33)})}),i&&n===tF.X5w.Verified&&(0,a.jsx)(ov,{site:r,path:(0,eO.fJ)(o)})]}):null},hW=(e,t)=>{if(e.length<=t)return e;let n=e.replace(/^https?:\/\//,"").split("."),i=n.slice(-2).join("."),r=n.slice(0,-2).join("."),s=t-i.length-3;if(s<=0)return i;let o=r.slice(0,s);return"".concat(o).concat("...").concat(i)},hH=e=>{let{onClick:t,doc:n,isLive:i}=e,r=null==n?void 0:n.site,s=(0,eO.Zz)(null==r?void 0:r.domains),o=i?(0,a.jsx)(m.cC,{id:"3TQHDg",values:{0:s.length}}):(0,a.jsx)(m.cC,{id:"1EeNDU"});return(0,a.jsxs)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.A$k,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[o,r&&(null==n?void 0:n.id)&&s.map(e=>(0,a.jsx)(hF,{domain:e.name,status:e.status,isLive:i,site:r,docId:n.id},e.id))]})},hq=e=>{let{doc:t}=e,{replace:n}=(0,ev.useRouter)(),i=(0,eJ.py)("manage",t),r=(0,F.CG)(eA.lH),s=null==t?void 0:t.id,o=(0,eO.D5)({site:r,docId:s}),{publishDoc:l,publishSite:h,isPublishing:g}=iy({doc:t,site:r,path:o}),{statusText:j,statusIcon:C,statusColor:b,lastPublishedTime:y,needsPublish:k,publishEnabled:w}=ro(g),S=r&&(0,eO.jl)(t,r),E=(0,v.useCallback)(()=>{s&&n((0,ey.yQ)({docId:s,preview:!0}),void 0,{shallow:!0})},[s,n]);if(!r)return null;let I=(0,J.uL)("custom_domains");return(0,a.jsx)(c.k,{children:(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!w,label:k&&!g?(0,a.jsxs)(tE.K,{children:[j,(0,a.jsx)(d.x,{color:"gray.400",children:(0,a.jsx)(m.cC,{id:"FmP7uY"})})]}):(0,a.jsx)(m.cC,{id:"o+bOqE"}),children:(0,a.jsx)(d3.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:h,onMouseDown:cJ.br,isDisabled:!w,isLoading:g,icon:k?(0,a.jsx)(p.G,{icon:x.A$k}):(0,a.jsx)(p.G,{icon:x.LEp}),"data-publish-button":!0,children:k?(0,a.jsx)(m.cC,{id:"EEYbdt"}):(0,a.jsx)(m.cC,{id:"u3wRF+"})})}),(0,a.jsxs)(nb.v,{children:[(0,a.jsx)(ny.j,{variant:"solid",as:d3.r,isDisabled:!w,icon:(0,a.jsx)(p.G,{icon:x.ptq})}),(0,a.jsx)(ri.h,{children:(0,a.jsxs)(nk.q,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,a.jsx)(ru.k,{children:(0,a.jsxs)(e2.g,{alignItems:"flex-start",children:[(0,a.jsxs)(em.U,{px:3,pt:2,alignItems:"center",color:b,children:[C&&(0,a.jsx)(u.xu,{mr:1.5,display:"inline-flex",children:C}),(0,a.jsx)(u.xu,{children:(0,a.jsx)(d.x,{fontWeight:"semibold",children:j})})]}),y&&(null==t?void 0:t.site)&&(0,a.jsxs)(em.U,{pb:2,mt:-1,children:[(0,a.jsx)(e5.L,{mr:2,px:3,w:13}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:S?y:(0,a.jsx)(m.cC,{id:"0bSVwO"})})]})]})}),i&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ra.R,{}),(0,a.jsxs)(ru.k,{title:f.ag._({id:"1EeNDU"}),children:[(0,a.jsx)(hH,{onClick:h,doc:t,isLive:!!S}),(0,a.jsx)(l1,{doc:t,label:(0,a.jsx)(m.cC,{id:"A/QS9E"}),showUpsellBadge:!I})]})]}),(0,a.jsx)(ra.R,{}),(0,a.jsx)(ru.k,{title:f.ag._({id:"Pf2dn/"}),children:(0,a.jsx)(rc.s,{icon:(0,a.jsx)(p.G,{icon:x.PQh,fixedWidth:!0}),onClick:l,alignItems:"baseline",children:(0,a.jsx)(m.cC,{id:"szmTdw"})})}),(0,a.jsx)(ra.R,{}),(0,a.jsx)(ru.k,{title:f.ag._({id:"rdUucN"}),children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"aChIoL"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(rc.s,{onClick:E,icon:(0,a.jsx)(p.G,{icon:e3.sl_,fixedWidth:!0}),alignItems:"baseline",children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(m.cC,{id:"EEOIfz",components:{0:(0,a.jsx)(d.x,{})}})})})})})})]})})]})]})})};var hB=n(17210),hV=n(83235),hK=n(21716),hZ=n(42907);let hY=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:s=!0,showEmbed:o=!0,showButton:l=!0}=e,{isOpen:c,onClose:h,onOpen:x}=(0,nc.M)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,view:j,setView:C}=(0,hV.y)(),{isInOfflineMode:b}=(0,y.$)(),{user:k,currentWorkspace:w}=(0,eJ.SE)(),{editor:S}=(0,tw._i)(),E=(0,eJ.py)("view",i),I=(0,eJ.py)("edit",i),A=(0,eJ.py)("manage",i),_=(0,eN.z$)();(0,v.useEffect)(()=>og.T.on("openSharePanel",e=>{let{view:t}=e;f(),C(t)}),[f,C]);let T=(0,v.useCallback)(()=>{null==_||_.track(eN.AA.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"share_panel",type:A?"full":"personal"}),x()},[_,A,null==i?void 0:i.id,x]);if(!E||!k||!i)return null;let O=i.collaborators||[],D=i.channels||[],R=(0,hZ.Hs)([...O].sort((e,t)=>e.user.id===k.id?-1:t.user.id===k.id?1:0).map(e=>e.user.id===k.id?"You":e.user.displayName||"").concat(i.orgAccess?D.map(e=>{let{name:t}=e;return t||""}):[])),P=(0,hK.h_)(i,k),L=P?(0,hK.Xp)()[P]:null,z=(0,hK.Gi)(i,w);return null===L?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(a.Fragment,{children:[z&&(0,a.jsx)(d.x,{fontWeight:"bold",children:(0,a.jsx)(m.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),L.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,a.jsx)(d.x,{children:L.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,a.jsx)(d.x,{fontSize:"xs",children:L.subtitle?L.subtitle(R||""):""})]}),children:(0,a.jsx)("span",{children:(0,a.jsx)(d3.h,{"data-guider-highlight":"share-button",onMouseDown:cJ.br,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(hB.aA,{visibility:L,isFromOtherOrg:z})}),isDisabled:!I||b,onClick:f,children:(0,a.jsx)(m.cC,{id:"Z8lGw6"})})})}),(0,a.jsx)(hB.G9,{doc:i,editor:S,isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,onAnalyticsPanelOpen:T,view:j,setView:C,showAnalytics:r,showSharePublic:s,showEmbed:o}),c&&(0,a.jsx)(s7,{doc:i,onSharePanelOpen:f,onAnalyticsPanelClose:h,isAnalyticsPanelOpen:c,mode:A?"full":"personal"})]})},hJ=(0,v.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i}=(0,y.$)(),r=(0,e$.ye)("offline"),s=(null==t?void 0:t.title)||"";return(0,a.jsxs)(c.k,{flex:1,w:32,children:[(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"g/+TNk"})}),(0,a.jsx)(d.x,{color:"gray.500",children:(0,a.jsx)(m.cC,{id:"ZfQLKw"})})]}),"aria-label":f.ag._({id:"g/+TNk"}),children:(0,a.jsx)(ef.z,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,a.jsx)(p.G,{icon:x.SCr}),onClick:n,children:(0,a.jsx)(d.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:s})})}),!i&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"ysdDIA"})}),r&&(0,a.jsx)(d.x,{color:"gray.500",children:(0,a.jsx)(m.cC,{id:"+QNhGE"})})]}),"aria-label":f.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",mr:2,children:(0,a.jsx)(p.G,{icon:x.bKP})})})]})});hJ.displayName="EditableDocTitle";let hX=e=>(0,a.jsx)(hQ,{...e}),hQ=(0,v.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,[i]=(0,uo.X)(q.H.lastHomeUrl,"/"),r=(0,F.CG)(eA.lH),{confirmNavigation:s}=(0,tw._i)(),{push:o}=(0,ev.useRouter)(),l={as:nN(),href:i||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},h=(0,ep.ff)("gray.800","gray.100");return(0,a.jsx)(em.U,{flex:1,children:(0,a.jsxs)(em.U,{spacing:2,divider:(0,a.jsx)(u.xu,{border:"none",as:p.G,icon:x._tD,size:"sm",color:"gray.300"}),w:"100%",color:h,children:[(0,a.jsx)(i2.r,{as:d3.h,href:l.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),s().then(()=>{o(l.href)}))},mr:-1,colorScheme:"gray",children:(0,a.jsx)(p.G,{size:"1x",icon:x.J9Y})}),r&&(null==r?void 0:r.routes.length)>1&&(0,a.jsx)(c.k,{flexGrow:0,flexShrink:1,children:(0,a.jsx)(d.x,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==r?void 0:r.name})}),(0,a.jsx)(hJ,{doc:t,onClick:()=>{null==n||n()}})]})})});hQ.displayName="PageBreadcrumbGroup";let h$=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,tw._i)(),i=(0,v.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsxs)(d.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,a.jsx)(d.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,a.jsx)(d3.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{i(),e.target.blur()},icon:(0,a.jsx)(p.G,{icon:x.QMW}),children:"Spotlight"})})})};var h0=n(50582),h1=n(15889),h2=n(61387);let h5=(0,v.memo)(e=>{let{isOpen:t,onClose:n,setDocTheme:i}=e,r=(0,F.CG)(W.Pu),s=(0,v.useCallback)(()=>{nh.pw.emit(nh.TI.OPEN_PAGE_SETUP,"background"),null==n||n()},[n]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,trapFocus:!1,isOpen:t,placement:"right",onClose:n,size:"md",blockScrollOnMount:!1,children:[(0,a.jsx)(tV.Z,{background:"none"}),(0,a.jsxs)(tK.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(rm.x,{pb:4,children:(0,a.jsx)(h2.v,{title:(0,a.jsx)(m.cC,{id:"FEr96N"}),description:(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,a.jsx)(m.cC,{id:"S9uQm/"})}),showDrawerCloseButton:!0,currentTheme:r})}),(0,a.jsx)(tY.f,{overflowX:"hidden","data-theme-picker-scroll-container":!0,children:(0,a.jsx)(h1.t,{currentTheme:r,openBackgroundPanel:s,setTheme:i})})]})]})})});h5.displayName="DocThemeDrawer";let h3=(0,v.memo)(()=>{let e=(0,ie.p)(),[t]=(0,tF.Iyu)(),n=(0,F.CG)(eA.$U),{docId:i,getCollaborativeEditorInstance:r}=(0,tw._i)(),{isOpen:s,onOpen:o,onClose:l}=(0,nc.M)({id:"themeStyleDrawer"}),d=(0,F.CG)(W.Pu),u=r(),h=(0,eN.z$)(),{updateDocThemeWithAccentImages:x}=(0,eD.vi)({docId:i,editor:u}),p=(0,v.useCallback)(e=>{n&&e.id!==d.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:tF.ASj,fragmentName:"DefaultThemeFields"});t.updateQuery({query:tF.BYL,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,d.id,t]),f=(0,v.useCallback)(t=>{t.id!==d.id&&x(t.id).then(()=>{null==h||h.track(eN.AA.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,a.jsx)(m.cC,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[h,d.id,i,e,x]),g=(0,v.useCallback)(e=>n?p(e):f(e),[n,f,p]);return(0,v.useEffect)(()=>{let e=og.T.on("toggleThemeBlock",o),t=nh.pw.on(nh.TI.OPEN_THEME_DRAWER,o);return()=>{e(),t()}},[o]),(0,a.jsxs)(c.k,{children:[(0,a.jsx)(h5,{isOpen:s,onClose:l,setDocTheme:g}),(0,a.jsx)(h0.g,{onThemeCreated:g,getCollaborativeEditorInstance:r})]})}),h4=(0,v.memo)(()=>{let{isConnected:e}=(0,tF.$gs)();return(0,a.jsx)(ej.kH,{label:e?(0,a.jsx)(m.cC,{id:"JkEyR8"}):(0,a.jsx)(m.cC,{id:"GvC+mL",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{color:"gray.300"})}}),"aria-label":f.ag._({id:"JkEyR8"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(d3.h,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{og.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,a.jsx)(p.G,{icon:x.q2v}),"data-testid":"toolbar-theme-button",children:(0,a.jsx)(m.cC,{id:"FEr96N"})})})})});h4.displayName="ThemeToolbarButton";let h6=()=>{let{isConnected:e}=(0,tF.$gs)();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(h3,{}),(0,a.jsx)(h4,{})]})};h3.displayName="ThemeDrawers";let h8=[.5,.8,.9,1,1.1,1.2,1.5,2],h9=e=>"".concat((100*e).toFixed(0),"%"),h7=()=>{let e=(0,e$.ye)("presentZoom"),{editor:t}=(0,tw._i)(),n=(0,eN.z$)(),i=(0,C.I0)(),r=(0,F.CG)(W.SU),s=(0,v.useCallback)(e=>{i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eN.AA.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),o=(0,v.useCallback)(()=>{i((0,W.fT)({enabled:!0}))},[i]),l=(0,v.useCallback)(()=>{let e=Math.min(a9.v4,xe(r)+.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eN.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),c=(0,v.useCallback)(()=>{let e=Math.max(a9.Ou,xe(r)-.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eN.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),u=(0,v.useCallback)(()=>{let e=a9.aX;i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eN.AA.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),h=(0,F.CG)(rC.C),g=(0,aK.rJ)();return((0,v.useEffect)(()=>{if(e)return eC.F7.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,eB.Hx)(e.target);return!(h||!t||(0,aP.KB)(t))&&!n&&((0,nL.ZP)("=")(e)?(l(),e.preventDefault(),!0):(0,nL.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,nL.ZP)("0")(e)?(u(),e.preventDefault(),!0):!!(0,nL.ZP)("9")(e)&&(o(),e.preventDefault(),!0))})},[h,e,t,l,c,u,o]),e)?(0,a.jsxs)(eg.h,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:f.ag._({id:"FjkaiT"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,a.jsx)(p.G,{icon:x.Kl4})})}),(0,a.jsxs)(nb.v,{closeOnSelect:!0,children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"VZ3UQG"}),children:(0,a.jsx)(ny.j,{minW:20,as:ef.z,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,a.jsx)(p.G,{icon:x.ptq}),children:g?(0,a.jsx)(m.cC,{id:"R9Khdg"}):h9(r)})}),(0,a.jsxs)(nk.q,{maxW:"220px",children:[(0,a.jsx)(nw._,{value:g?"auto":r.toString(),type:"radio",children:(0,a.jsx)(nS.i,{value:"auto",onClick:o,children:(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{children:[(0,a.jsx)(m.cC,{id:"R9Khdg"})," ",(0,a.jsx)(d.x,{as:"span",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"P9Cyl9"})})]}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(d.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,a.jsx)(ra.R,{}),(0,a.jsx)(nw._,{value:g?"auto":r.toString(),type:"radio",children:h8.map(e=>(0,a.jsx)(nS.i,{value:(e/100).toString(),onClick:()=>{s(e)},children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(d.x,{children:h9(e)}),(0,a.jsx)(e5.L,{}),e===a9.aX&&(0,a.jsx)(d.x,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:f.ag._({id:"AWOSPo"}),children:(0,a.jsx)(T.h,{fontWeight:"normal","aria-label":f.ag._({id:"AWOSPo"}),onClick:l,icon:(0,a.jsx)(p.G,{icon:x.r8p})})})]}):null},xe=e=>Math.round(10*e)/10,xt=(0,v.memo)(function(e){let{scrollingParentSelector:t,toggleCommentsPanel:i,isCommentsPanelOpen:r,isPagesPanelOpen:s,togglePagesPanel:o,editorWrapperEl:l,docEditorType:d,isDark:u}=e,[h]=(0,d2.a)(["(max-width: 840px)","(min-width: 841px)"]),x=(0,e$.ye)("editDocAI"),p=(0,eo.iq)({base:!0,lg:!1}),m=(0,F.CG)(W.gh),f=(0,F.CG)(tU.yx),g=(0,F.CG)(eA.lH),{editor:j}=(0,tw._i)(),C=(0,eJ.py)("comment",f),b=(0,rn.O1)(),y=(0,rn.lP)(),{enabled:k}=(0,d5.g)(j),w=(0,eO.Vr)(g),S="SLIDE_VIEW"!==m,E=(0,F.CG)(W.hN),I=d!==tk.Z.COLLABORATIVE,A=(0,F.CG)(W.Tf),_=(0,F.CG)((0,$.SL)("left")),T=(0,F.CG)((0,$.SL)("right")),O=(0,e$.ye)("aiChat"),{enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:G}=rO({editorWrapperEl:l,scrollingParentSelector:t});window.exportToPptx=async e=>{if(!j)return;let{exportToPptx:t}=await Promise.all([n.e(4865),n.e(4467),n.e(9928)]).then(n.bind(n,21459));return t(j,e)};let N=U((0,v.useCallback)(e=>{let t=M.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||_||T)||e.clientY<100)},[_,T]),!A),M=(0,v.useRef)(null),H=!(0,eb.s2)();if(!j)return null;let q=!1===x&&!h&&p&&!I&&E&&O;return(0,a.jsx)(ej.Wk,{isDark:u,children:(0,a.jsxs)(c.k,{"data-editor-toolbar":!0,ref:M,bg:u?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:u?"whiteAlpha.100":"blackAlpha.100",zIndex:tW.S.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,gap:2,transform:!A||A&&N?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,a.jsx)(hT,{}),(0,a.jsx)(em.U,{flex:1,children:g?(0,a.jsx)(hX,{doc:f,pagesPanelEnabled:b,isPagesPanelOpen:s,togglePagesPanel:o}):(0,a.jsx)(ua,{doc:f})}),(0,a.jsxs)(em.U,{children:[!h&&(0,a.jsx)(uw,{}),!h&&!S&&(0,a.jsx)(h7,{}),!h&&!S&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h$,{spotlightingByBlock:k})}),!h&&!I&&E&&y&&(0,a.jsx)(h6,{}),!I&&(0,a.jsx)(hY,{doc:f,showButton:!h}),H&&!w&&(0,a.jsx)(hM,{doc:f,isStaticEditor:I,editorWrapperEl:l,scrollingParentSelector:t,enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:G,shouldHide:h,docEditorType:d}),H&&w&&b&&(0,a.jsx)(hq,{doc:f}),!I&&C&&(0,a.jsx)(ho,{doc:f,mode:m,isCommentsPanelOpen:r,toggleCommentsPanel:i}),x&&E?(0,a.jsx)(hE,{editor:j}):q?(0,a.jsx)(hl,{}):null,!h&&!I&&!w&&(0,a.jsx)(d6,{doc:f}),!h&&!I&&(0,a.jsx)(hO,{doc:f,toggleCommentsPanel:i,editorWrapperEl:l,scrollingParentSelector:t}),(0,a.jsx)(c.k,{children:(0,a.jsx)(t$.DY,{showRing:!0})})]})]})})});var xn=n(71355),xi=n(96236);let xr=(0,nL.ZP)("mod+S"),xs=(0,nL.ZP)("mod+shift+O"),xo=()=>{let e=(0,ie.p)();(0,v.useEffect)(()=>{let t=t=>{xr(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,a.jsx)(m.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,eB.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},xl=()=>{let e=(0,F.qr)(),t=(0,F.TL)(),{editor:n}=(0,tw._i)();(0,v.useEffect)(()=>{if(!n)return;let i=i=>{if(!xs(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,W.i2)(r),{total:c,expanded:d,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,W.bj)({disable:!0})),setTimeout(()=>{t((0,W.bj)({disable:!1}))},100);let h=c===d;xa(n,100,!h),(0,ry.Nn)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},xa=(e,t,n)=>{let i;let r=(0,eH.cC)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,aP.Je)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=xc(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,eB.wO)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,c=(0,eB.LY)(o,r.scrollSelector),d=a-c,u=d<0?0:Math.max(d+200,0),h=()=>{if(!o)return;let e=(0,eB.LY)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-c-u)}),+new Date-l<t&&requestAnimationFrame(h)};h()},xc=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,aP.Sh)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,aP.nv)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,eq.KH)(t.node),r=(0,xn.SA)(t.node),l=(0,xi.CU)(t.node),a=i||t.node.isAtom?t.pos:t.start;if(s=(0,aP.Sh)(e,a),!n&&i&&t.depth>2||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var xd=n(95993),xu=n(87920),xh=n(62216),xx=n(25756),xp=n(11310),xm=n(85418),xf=n(91492);class xg extends xd.GJ{constructor(e){super({transform:async(t,n)=>{var i;if("data"!==t.event){n.enqueue(t);return}let{content:r}=t.data,s=r.attrs.id,o=r.content.find(e=>"cardAccentLayoutItem"===e.type);o&&(!o.attrs.background||(null===(i=o.attrs.background)||void 0===i?void 0:i.type)===xf.E.NONE)&&(o.attrs.background=(0,hx.Bv)(e,s),(0,hx.Tm)(r)),n.enqueue(t)}})}}var xj=n(75173),xv=n(75325),xC=n(27003);class xb extends xd.GJ{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,c=await (0,xj.B)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,xv.j6)(o,c),"cardAccentLayoutItem"===o.type.name&&"error"===c.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,hx.Bv)(l,s)});return}requestAnimationFrame(()=>{(0,hp.tf)({editor:t,loadImageId:n,newAttrs:c,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){super({transform:async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,xC.N)(i.data.content,i=>{var r;if("text"===i.type)return;let l=tQ.NB.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,xv.XU)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:c,loadImageParams:d}=a;this.imageAttrs[c]||(this.imageAttrs[c]=l.attrs),this.loadImagePromises[c]||(this.loadImagePromises[c]=this.loadImage({editor:e,loadImageId:c,loadImageParams:d,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[c])&&void 0!==r?r:this.imageAttrs[c]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)}}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var xy=n(91760);let xk=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class xw extends xd.GJ{constructor(e){super({transform:async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,F.bh)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield xk(i,r,s,n)}return}if(!t.content){yield xk(i,r,t,n);return}let s=0;for(let o of t.content){for(let t of e(o,n,i,[...r,s]))yield t;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,il.qn)(e)(i.getState());await xS(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let xS=e=>new Promise(t=>xy.iK(t,e));var xE=n(56655);let xI=e=>{let{enabled:t,type:n}=e,i=(0,xE.As)(n),r=(0,v.useRef)(!0);(0,v.useEffect)(()=>{if(!t)return;let e=i.scroller;if(!e)return;let n=()=>{i.isAtBottom(40)?r.current=!0:r.current=!1},s=()=>{r.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",s)}},[i,t]);let s=(0,v.useCallback)(()=>{if(r.current){var e;null===(e=i.scroller)||void 0===e||e.scrollTo({top:i.scroller.scrollHeight,behavior:"auto"})}},[i]);return(0,dR.Z_)(s,100)};var xA=n(42557);let x_="[CONTENT_FILTER]",xT=()=>(0,a.jsxs)(nH.b,{status:"error",variant:"solid",children:[(0,a.jsx)(rM.z,{}),(0,a.jsx)(nB.X,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(m.cC,{id:"7g5s/N"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"Xp43Ei"})})]})})]}),xO=()=>(0,a.jsxs)(nH.b,{variant:"light",children:[(0,a.jsx)(tI.$,{size:"sm",mr:2}),(0,a.jsxs)(nB.X,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(m.cC,{id:"n2cF1o"})})," ",(0,a.jsx)(m.cC,{id:"BFGwQA"})]})]}),xD=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,eU.N2)(t.state.doc,e=>(0,d_.KH)(e))[0],l=(0,eU.N2)(t.state.doc,e=>(0,d_.KH)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,di.t)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},xR=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}xx.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,xh.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,iY.hx)((0,iY.VA)(s)).key,lazyImages:o,theme:(0,W.Pu)(i.getState())};return(0,xu.Nl)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},xP=(e,t)=>{let n=(0,F.CG)(W.Pu),i=(0,F.qr)(),r=(0,F.TL)(),s=(0,F.CG)(W.KV),o=(0,e$.ye)("streamResumingEnabled"),l=(0,e$.ye)("generatorLazyImages"),a=(0,v.useRef)(!1),c=(0,e$.ye)("generatorLazyImages"),{isStreaming:d,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:p,onAbortStream:m}=xL({docId:e}),f=xI({enabled:d,type:"editor"}),g=(0,v.useCallback)(async r=>{let s,o;if(!t)return;p({editor:t});let l=xz({streamResponse:r,editor:t,store:i,theme:n,docId:e}).getReader();try{for(;!(s=await l.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),f())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,p,f,i,n]);(0,X.v)(()=>{if(!t||!s||d||!e)return;let n=(0,il.oH)(e)(i.getState()),r=(0,il.nl)(i.getState());if(n){"running"===n.status&&g(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,iY.VA)(t);if("streaming"!==a){if(new URLSearchParams(window.location.search).get("restream")){let n=xR({docId:e,aiOptions:u,generateInfo:{interactionId:l.interactionId,streamId:l.streamId,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:c});n&&g(n)}return}let h=(0,W.yx)(i.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let x=xR({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:c});x&&g(x)},[e,t,i,s,p,x,u,h,o,g,d,l,c],[t,s]),(0,v.useEffect)(()=>()=>{let n=(0,il.oH)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,m({editor:t,streamResponse:n}))},[r,e,m,t,i])},xL=e=>{let{docId:t}=e,n=(0,ie.p)(),i=(0,F.TL)(),r=(0,F.qr)(),s=(0,e$.ye)("aiWizardUploadImages"),[o,l]=(0,v.useState)(!1),c=(0,e$.ye)("debugLogging"),d=(0,v.useRef)(null);(0,v.useEffect)(()=>()=>{d.current&&(n.close(d.current),d.current=null)},[n]);let u=(0,v.useCallback)(()=>{d.current||(d.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>xO(),position:"top",duration:null}))},[n]),h=(0,v.useCallback)(e=>{let{editor:t}=e;t&&(l(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),x=(0,v.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:o,index:l,content:a}=n;xD({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:o}),o&&s&&(0,hp.g1)({editor:t,cardId:r})},[s]),p=(0,v.useCallback)(e=>{var t,s,o;let{editor:u,streamResponse:h}=e;if(!u||!h)return;let x=h.id,p=(0,iY.hx)((0,iY.VA)(u)),{aiOptions:f,generateInfo:g}=(0,iY.VA)(u);l(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let j=(0,xm.NV)(),v=j.debugInfo();c&&console.log("[AIStream] ImageStore DEBUG",{imageStore:j,debug:v}),(0,xm.Uu)(),i((0,il.G0)({id:x,status:"complete"}));let C=(0,xA.R)(u),b=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),y=C?C/b.byteLength:void 0;xx.a.trackStreamComplete(r,x,{imageProvider:null===(t=f.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:v.requests.length,imageSearches:v.requests,ydocToJsonRatio:y});let k=(0,W.yx)(r.getState());k&&(null===(s=k.docGenerateInput)||void 0===s?void 0:s.id)?(0,th.d)((null===(o=f.imageOptions)||void 0===o?void 0:o.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",k.organization,x):(0,th.d)("wizardCreation",null==k?void 0:k.organization,x),d.current&&n.update(d.current,{title:(0,a.jsx)(m.cC,{id:"2/LpWt",values:{0:p.generationLabel||p.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,c,r,n]);return{isStreaming:o,onStreamStart:h,onStreamData:x,onStreamError:(0,v.useCallback)(e=>{let{err:s,editor:o,streamResponse:u}=e,h=u.id,{errorMessage:x,errorCode:p}=(0,xp.uS)(s);console.error("StreamError: ",{interactionId:h,errorMessage:x,errorCode:p,stack:s.stack}),c&&console.log("StreamError: (".concat(p,") - ").concat(x),s.stack),l(!1),o.commands.setAIGenerationRunning(!1),o.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,xm.Uu)(),i((0,il.G0)({id:h,status:"error"}));let f=(0,il.Sn)(h)(r.getState());if(f){let{latency:e,...n}=f;(0,td.pQ)({...n,errorName:"StreamError",errorMessage:x,errorCode:p,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:u.isResuming,docId:t})}d.current&&(x===x_?n.update(d.current,{render:xT,position:"top",duration:null,isClosable:!0}):n.update(d.current,{title:(0,a.jsx)(m.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[i,t,c,r,n]),onStreamDone:p,onAbortStream:(0,v.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;l(!1),t.commands.setAIGenerationRunning(!1),xx.a.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,il.Of)({id:s}))},[i,r])}},xz=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new xg(s)).pipeThrough(new xw(t.id)).pipeThrough(new xb({editor:n,theme:s,interactionId:o})).pipeThrough(new xd.GJ({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(x_));return}t.enqueue(e)}})).pipeThrough((0,xu.c1)(e=>{a&&"data"===e.event&&(xx.a.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,hp.JZ)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},xG="doc_archived_warning",xN=(e,t)=>{let n=(0,ie.p)(),[i]=(0,tF.iX9)(),[r]=(0,tF.sJX)(),s=null==e?void 0:e.site;(0,v.useEffect)(()=>()=>{n.close(xG)},[]),(0,v.useEffect)(()=>{if(s&&!s.archived){n.close(xG);return}!e||e.site||e.archived||n.close(xG)});let o=(0,v.useCallback)(async()=>{if((null==s?void 0:s.id)&&await r({variables:{id:s.id},optimisticResponse:{unarchiveSite:{id:s.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,a.jsx)(m.cC,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==s?void 0:s.id,i,r]);(0,v.useEffect)(()=>{e&&t===tk.Z.COLLABORATIVE&&((null==s?void 0:s.archived)||(null==e?void 0:e.archived))&&!n.isActive(xG)&&n({id:xG,title:(0,a.jsxs)(d.x,{"data-testid":"trash-confirmation-toast",children:[(0,a.jsx)(m.cC,{id:"fkHPZu"})," ",(0,a.jsx)(i2.r,{textDecoration:"underline",onClick:o,children:(0,a.jsx)(m.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,o,s,n,i])},xM=()=>{let e=(0,e$.ye)("filmstrip"),t=(0,F.CG)(tU.fh),n=(0,nQ.Br)("comment"),i=(0,F.CG)(W.gh),r=(0,F.CG)((0,$.SL)("left")),s=(0,F.CG)(ek.Lw);return e&&t===tk.Z.COLLABORATIVE&&n&&i===eV.q.DOC_VIEW&&!(0,eb.s2)()&&!r&&!s};var xU=n(27042),xF=n(1613);let xW=()=>{let e=ee(),t=et(),n=xH(),i=(0,eo.iq)({base:!1,lg:!0,[n?"3xl":"2xl"]:!1}),r=(0,F.CG)(W.Hl),s=(0,F.CG)(cB.GX),o=xM(),l=(0,cV.WD)(),a=(0,xU.k)(),c=(0,oy.S)({base:"0px",[xF.K0]:n_.bk})||"0px",{width:d}=dv();return(0,v.useMemo)(()=>({"--doc-padding-left":s&&o&&i?"".concat(d,"px"):l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px","--doc-padding-right":r?c:a?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(t,"px"),"--comment-slide-margin":c}),[d,s,e,r,t,a,i,c,o,l])},xH=()=>{let{editor:e}=(0,tw._i)(),{defaultContentWidth:t}=(0,F.CG)(W.US);if("lg"===t)return!0;if(!e)return!1;let{doc:n}=e.state;return(0,aP.Jn)(n.firstChild.content).some(e=>(0,d_.KH)(e)&&"lg"===e.attrs.container.width)};var xq=n(5668),xB=n(82528),xV=n(76009);let xK=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,a.jsxs)(c.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,a.jsx)(e1.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,a.jsx)(p.G,{icon:ha.xHz,size:"2x"}),(0,a.jsxs)(c.k,{direction:"column",ml:3,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(d.x,{lineHeight:6,fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("b",{})}})})}),(0,a.jsx)(d.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,a.jsx)(m.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)(ef.z,{as:i2.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},xZ="no-snapshot-warning",xY=(e,t)=>{let n=(0,xB.G)(),i=(0,ie.p)(),r=(0,xV.z$)(),s=null==e?void 0:e.id,o=t===tk.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,v.useEffect)(()=>{!o||i.isActive(xZ)||(i({id:xZ,render:xK({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(eN.xW.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},xJ=e=>{let t=(0,F.TL)(),n=(0,F.CG)(cB.GX),i=(0,v.useRef)(!1);(0,v.useEffect)(()=>{!e||i.current||n||(i.current=!0,t((0,cB.dQ)({isOpen:!0})))},[t,n,e])},xX=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,F.TL)(),r=(0,F.qr)(),{asPath:s}=(0,ev.useRouter)(),o=(0,F.CG)(ek.tv),l=(0,v.useRef)(n),a=(0,eO.BZ)(s),c=(0,v.useRef)(t);c.current=t,(0,rv.r)(()=>{let e=(0,$.nm)("pages")(r.getState()),t=c.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,v.useEffect)(()=>{let e=a?(0,eb.s2)()?"mobile":o||"desktop":null;i((0,ek.Tj)({previewSize:e}))},[i,a,o])};var xQ=n(56675);let x$=e=>{let t=(0,xQ.x)(),n=(0,F.CG)((0,oX.cn)(e));(0,v.useEffect)(()=>{n&&t.cache.updateQuery({query:ib.yE1,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])};var x0=n(21562);let x1=(e,t)=>{let{isUnauthorized:n}=(0,e0._)();(0,eN.If)(i=>{!0!==n&&void 0!==n&&(i.track(eN.AA.DOC_VIEWED,{doc_id:e}),t===tk.Z.EXAMPLE_STATIC&&i.track(eN.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,x0.d)();let i=(0,e$.ye)("realUserMetrics"),r=t===tk.Z.COLLABORATIVE&&i,s=(0,e$.ye)("rumKeystrokeSampleRate");(0,rb.lh)(r,s)},x2=e=>{let t=(0,C.I0)(),n=(0,eN.z$)();(0,v.useEffect)(()=>{let i;let r=()=>{let r=(0,F.bh)().getState();i=(0,W.Q5)(r),(0,ry.I7)(e),t((0,W.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(eN.AA.DOC_PRINTED)},s=()=>{t((0,W.lx)({isEditingDisabled:!1})),t((0,W.xn)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},x5="doc-root",x3=e=>{let{isConnected:t}=e;return(0,a.jsx)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,a.jsx)(m.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsxs)(c.k,{m:8,alignItems:"center",direction:"row",children:[(0,a.jsx)(p.G,{icon:x.bKP,size:"4x"}),(0,a.jsx)(d.x,{ml:8,children:(0,a.jsx)(m.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})})]})})},x4=e=>{let{doc:t,user:n,docEditorType:i}=e,r=(0,k.$m)(t,n),s=(0,C.v9)(W.gh),o=i===tk.Z.COLLABORATIVE&&!r,l=o&&s===eV.q.SLIDE_VIEW;return i!==tk.Z.COLLABORATIVE||n?l?(0,a.jsx)(Z,{}):o?(0,a.jsx)(E.C,{showTourReplay:!0}):null:(0,a.jsx)(i9.m,{docWorkspace:null==t?void 0:t.organization})},x6=(0,tw.eT)(e=>{let{docEditorType:t}=e,n=(0,F.TL)(),{docId:i,isUnauthorized:r,passwordRequired:s,setCollaborativeEditorInstance:o,editor:l}=(0,tw._i)(),d=(0,F.CG)(tU.yx),x=(0,F.CG)(eA.lH),p=(0,F.CG)(eA.$U),{isConnected:m}=(0,y.$)(),g=(0,tq.mb)(null==d?void 0:d.id,p),[E,I]=(0,v.useState)(null),A=(0,F.CG)(ek.tv),_=null!==A,T=(0,C.v9)(W.gh),{user:O}=(0,eJ.SE)();(0,w.F3)({isSite:!!(null==d?void 0:d.site)}),xN(d,t),xY(d,t),xP(i,E===i?l:void 0),x$(i),x1(i,t),eT(l,t===tk.Z.COLLABORATIVE),(0,xq.j)(),xo();let{editorAnimationsClass:D,editorAnimationsCSSVars:R}=(0,eP.k)({editor:l,scrollingParentSelector:".".concat(x5),disabledOverride:_});xl(),aL(l,".".concat(x5)),aW(l),ty(),x2(l),(0,k.DD)(d,t===tk.Z.COLLABORATIVE);let P=(0,v.useRef)(null),L=(0,eD.Yy)(),z=(0,v.useMemo)(()=>(0,eL.vu)(L),[L]),G=xM();xJ(G),console.debug("%c[DocEditorComponent] RENDER - ".concat(i),"background-color: gold");let{toggleCommentsPanel:N,isCommentsPanelOpen:M}=nP(),{togglePagesPanel:U,isPagesPanelOpen:H}=aA(),{isDesignPartnerPanelOpen:q}=n8();tC(),(0,v.useEffect)(()=>()=>{n((0,$.qo)()),n((0,eA.mc)())},[n]),xX({togglePagesPanel:U,isPagesPanelOpen:H});let B=(0,eO.Vr)(x)&&(null==x?void 0:x.navEnabled)&&!_&&T!==eV.q.SLIDE_VIEW,V=(0,v.useCallback)(()=>!!(l&&l.state.selection.empty),[l]),{leftPanelLifecycle:K,rightPanelLifecycle:Z,globalPanelLifecycle:Y}=ei(),X=(0,J.dU)(null==d?void 0:d.organization),ee=(0,S.U)(null==d?void 0:d.title,X),et=f.ag._({id:"X6YCwz"}),en=f.ag._({id:"abr3hR"}),er=xW(),es=(0,v.useMemo)(()=>{let e=B?{"--doc-padding-top":ez.ik}:void 0;return{...z,...er,...e}},[z,er,B]),eo=(null==d?void 0:d.disabled)||(null==d?void 0:d.archived)||(null==x?void 0:x.archived)||_,el=!(0,ey.LQ)(window.location.href),ea=_&&p?(0,a.jsx)(ew,{docId:i}):el?(0,a.jsx)(xt,{isDark:L,scrollingParentSelector:".".concat(x5),editorWrapperEl:P.current,docEditorType:t,isPagesPanelOpen:H,togglePagesPanel:U,isCommentsPanelOpen:M,toggleCommentsPanel:N}):null,ec=(ea?49:0)+((null==d?void 0:d.disabled)?63:0);return(0,a.jsx)(tq.DN.Provider,{value:g,children:(0,a.jsx)(b.Sy,{children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",children:[(0,a.jsx)(n7,{disabled:null==d?void 0:d.disabled,docId:i}),(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(j(),{children:(0,a.jsx)("title",{children:ee})}),(0,a.jsx)(nd,{doc:d,editor:l}),(0,a.jsx)(eS.sn,{isEnabledFn:V}),ea,s?(0,a.jsx)(aR,{docId:i}):r?(0,a.jsx)(x3,{isConnected:m}):(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(ec,"px)"),sx:{"--editor-padding-top":"".concat(ec,"px")},"data-testid":"doc-editor-root",ref:P,children:[(0,a.jsx)(ex,{panelLifecycle:K}),(0,a.jsx)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,a.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,h.cx)(x5,D,q&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(et,"'"),"--ai-generating-label":"'".concat(en,"'"),...R},sx:es,children:[_&&(0,a.jsx)(tN,{loading:i!==E,docId:i,editor:l,previewSize:A},"".concat(i,"__preview-editor")),t===tk.Z.PUBLIC_STATIC?(0,a.jsx)(aU,{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(x5),onCreate:o}):t===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(rt,{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(x5),onCreate:o}):(0,a.jsxs)(Q.Mn.Provider,{value:Y,children:[(0,a.jsx)(eR.Ge,{doc:d,docId:i,readOnly:eo,hideForPreview:_,onCreate:e=>{o(e),I(e.gammaDocId),e.on("destroy",()=>{I(null)})},scrollingParentSelector:".".concat(x5),animationsExtensionEnabled:!0},"".concat(i,"__collaborative-editor")),l&&(0,a.jsx)(eY,{editor:l})]}),B&&(0,a.jsx)(tH,{}),!_&&(0,a.jsx)(i$,{editor:l},i)]})}),T===eV.q.SLIDE_VIEW&&(0,a.jsx)(ch,{editor:l}),(0,a.jsx)(eh,{panelLifecycle:Z}),(0,a.jsx)(eG.a,{editorId:"main",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x4,{doc:d,user:O,docEditorType:t}),G&&(0,a.jsx)(d1,{})]})})]})]})})})});var x8=n(69251),x9=n(11881),x7=n(45182);let pe=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:s}=e;return(0,a.jsxs)(u.xu,{gridColumnStart:r+1-s,display:s>r?"none":"block",gridRow:1,as:x9.f,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,a.jsx)(x7.n,{theme:t}),(0,a.jsxs)(tE.K,{direction:"row",spacing:1,pt:1,children:[i&&(0,a.jsx)(nn.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,a.jsx)(d.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};pe.displayName="DemoDocThemePreview";let pt="linen.50",pn=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,s=(0,C.v9)(W.gh)===eV.q.SLIDE_VIEW,[o,l]=(0,v.useState)([]),[d,u]=(0,v.useState)(!1),[h,f]=(0,v.useState)(0),g=(0,eo.iq)({base:3,md:4,lg:5})||3;(0,v.useEffect)(()=>{n.e(7715).then(n.bind(n,67715)).then(e=>{l(e.GLOBAL_THEMES)})},[]);let j=[...t?[t]:[],...o.filter(e=>e.id!==(null==t?void 0:t.id))],b=(0,v.useCallback)(e=>{1===e?f(e=>e+1):f(e=>e-1)},[]);return s?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(ri.h,{children:(0,a.jsxs)(c.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:pt,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,a.jsx)(c.k,{alignItems:"flex-end",justify:"flex-end",children:(0,a.jsx)(ef.z,{variant:"ghost",size:"sm",rightIcon:(0,a.jsx)(p.G,{icon:d?x.gc2:x.onQ}),onClick:()=>u(e=>!e),children:d?(0,a.jsx)(m.cC,{id:"yz7wBu"}):(0,a.jsx)(m.cC,{id:"x6tIe+"})})}),(0,a.jsx)(c.k,{justify:"flex-start",align:"flex-start",bgColor:pt,w:"100%",children:d&&(0,a.jsxs)(tE.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,a.jsx)(T.h,{"aria-label":"Left",onClick:()=>b(-1),variant:"ghost",isDisabled:0===h,icon:(0,a.jsx)(p.G,{icon:x.EyR})}),(0,a.jsx)(x8.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(g,", calc(100% / ").concat(g," - 1em))")],gap:"0 1em",bgColor:pt,children:j.map((e,t)=>(0,a.jsx)(pe,{index:t,startIndex:h,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,a.jsx)(T.h,{"aria-label":"Right",variant:"ghost",isDisabled:h+g>j.length,onClick:()=>b(1),icon:(0,a.jsx)(p.G,{icon:x.yOZ})})]})})]})})};var pi=n(89833),pr=n(18922);let ps=[{description:(0,a.jsx)(m.cC,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,a.jsx)(m.cC,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,a.jsx)(m.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,a.jsx)(m.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,a.jsx)(m.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,a.jsx)(m.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,a.jsx)(m.cC,{id:"K0Oq/D"}),shortcut:"R"}],po=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:s,isFullscreen:o,enterFullscreen:l,exitFullscreen:c}=rO({editorWrapperEl:t,scrollingParentSelector:n}),d=(0,F.CG)(W.gh),u=(0,v.useRef)(d);return(0,v.useEffect)(()=>{u.current=d},[d]),(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(ej.kH,{label:d===eV.q.DOC_VIEW?(0,a.jsx)(m.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(m.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ef.z,{variant:d===eV.q.DOC_VIEW?"solid":"plain",cursor:d===eV.q.SLIDE_VIEW?"pointer":"auto",onClick:()=>{d===eV.q.SLIDE_VIEW&&r()},leftIcon:(0,a.jsx)(p.G,{icon:x.cwv}),children:(0,a.jsx)(m.cC,{id:"7Zdnlq"})})}),(0,a.jsx)(ej.kH,{label:d===eV.q.SLIDE_VIEW?(0,a.jsx)(m.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(m.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ef.z,{variant:d===eV.q.SLIDE_VIEW?"solid":"plain",cursor:d===eV.q.DOC_VIEW?"pointer":"auto",onClick:()=>{d===eV.q.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,a.jsx)(p.G,{icon:x.bgy}),children:(0,a.jsx)(m.cC,{id:"FOoDGS"})})})]}),d===eV.q.SLIDE_VIEW&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rR.i,{orientation:"vertical"}),(0,a.jsx)(ej.kH,{label:o?(0,a.jsx)(m.cC,{id:"IkOhTI"}):(0,a.jsx)(m.cC,{id:"q8ARHN"}),children:(0,a.jsx)(T.h,{size:"sm","aria-label":o?f.ag._({id:"IkOhTI"}):f.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:o?x.Qj4:x.TL5}),onClick:o?()=>{s(!0),c()}:l})}),(0,a.jsxs)(A.J,{children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(ef.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,a.jsx)(m.cC,{id:"77Emn0"})})}),(0,a.jsxs)(O.y,{border:"1px solid #eee !important",children:[(0,a.jsx)(uI.Q,{}),(0,a.jsx)(pi.u,{}),(0,a.jsx)(D.b,{children:(0,a.jsx)(pr.A,{list:ps})})]})]})]})]})},pl=(0,v.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,F.CG)(tU.yx);let i=(0,v.useRef)(null);return(0,a.jsx)(c.k,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,a.jsx)(c.k,{direction:"column",w:"100%",children:(0,a.jsx)(po,{editorWrapperEl:n,scrollingParentSelector:t})})})});var pa=n(21164),pc=n(91148);let pd=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,pc.F)(),s=(0,F.CG)(W.gh),[o,l]=(0,v.useState)(s!==eV.q.SLIDE_VIEW),[a,c]=(0,v.useState)(!1),d=(0,C.I0)();(0,tg.vm)(()=>{n()},[r,t,n,d],[]),(0,tg.vm)(()=>{s===eV.q.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===eV.q.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},pu="doc-root",ph=(0,tw.eT)(e=>{var t;let{docEditorType:n=tk.Z.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:s}=(0,tw._i)(),o=(0,F.CG)(tU.yx);x1(i,n),(0,xq.j)(),xo(),xl(),aL(s,".".concat(pu)),aW(s),ty(),x2(s),(0,k.DD)(o,n===tk.Z.COLLABORATIVE);let l=(0,v.useRef)(null),d=null==o?void 0:o.theme,[h,x]=(0,v.useState)(()=>d),p=(0,F.TL)(),m=(0,v.useRef)(!1),{data:f}=(0,tF.EDv)({variables:{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId},skip:!(null==o?void 0:o.currentSnapshotId)}),g=null==f?void 0:null===(t=f.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,v.useEffect)(()=>{d&&!m.current&&(x(d),m.current=!0)},[d]),(0,v.useEffect)(()=>{if(!s)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){g&&s.commands.setContent(g);return}s.commands.updateThemeAccentImages(e)},[s,h,g]);let{togglePanel:C,isPanelOpen:b,initPanel:y}=en(pa.Q);pd({toggleToCPanel:C,isToCPanelOpen:b,initializeToCPanel:y}),(0,v.useEffect)(()=>()=>{p((0,$.qo)())},[p]);let{leftPanelLifecycle:w}=ei();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(j(),{children:(0,a.jsxs)("title",{children:["".concat(o?(0,op.$)(o.title)+" | ":""),"Gamma"]})}),(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,a.jsx)(ex,{panelLifecycle:w}),(0,a.jsxs)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[s&&(0,a.jsx)(pl,{scrollingParentSelector:".".concat(pu),editorWrapperEl:l.current,setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==d?void 0:d.id),templateTheme:d}),(0,a.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:pu,children:[(0,a.jsx)(aU,{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId,scrollingParentSelector:".".concat(pu),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,a.jsx)(ch,{editor:s,showNavigationControls:!0})]})]}),(0,a.jsx)(pn,{setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==d?void 0:d.id),templateTheme:d})]})]})}),px="body";var pp=n(69205);let pm=e=>{let t=(0,xE.As)(e),[n,i]=(0,v.useState)("up");return(0,v.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let n=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-n)>0,s=e=>e>n&&!(n>0&&0===e)&&!(e>0&&0===n),o=()=>{let t=(null==e?void 0:e.scrollTop)||0;r(t)&&(i(s(t)?"down":"up"),n=t>0?t:0)},l=z()(()=>window.requestAnimationFrame(o),500,{leading:!0});return null==e||e.addEventListener("scroll",l),()=>null==e?void 0:e.removeEventListener("scroll",l)},[t.scrollSelector]),n};var pf=n(80197);let pg=e=>{let t=(0,F.CG)(W.e_),n=(0,F.TL)(),i=(0,v.useCallback)(e=>{n((0,W.Qt)({docAttrs:{format:e}}))},[n]);return(0,a.jsx)(eg.h,{size:"sm",isAttached:!0,my:2,children:oG.nw.map(e=>(0,a.jsx)(ef.z,{isActive:e.key===t.key,onClick:()=>i(e.key),children:nI()(e.label)},e.key))})},pj=(0,v.memo)(()=>(0,a.jsx)(u.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));pj.displayName="MenuDivider";let pv=(0,v.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,a.jsx)(u.xu,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,a.jsxs)(em.U,{children:[t&&(0,a.jsx)(u.xu,{children:t}),(0,a.jsx)(u.xu,{children:n})]})})});pv.displayName="MenuItem";let pC=e=>{var t,n;let{isOpen:i,onClose:r,doc:s,editingEnabled:o}=e,{user:l}=(0,eJ.SE)(),{isConnected:u}=(0,tF.$gs)(),h=(0,i5.e)(),{editor:f}=(0,tw._i)(),g=(0,op.$)(null==s?void 0:s.title),j=(null==s?void 0:s.createdTime)&&(0,oh.Z)((0,ox.Z)(s.createdTime),"PPP"),C=null==s?void 0:s.id,{isOpen:b,onClose:y,onOpen:k}=(0,nc.M)({id:"analyticsPanelDisclosure"}),[w]=(0,tF.LT4)(),[S]=(0,tF.iX9)(),E=(0,eN.z$)(),I=(0,eJ.py)("manage",s)&&!!l,A=(0,eJ.py)("manage",s)&&!!l,_=!!(l&&0!==l.workspaceMemberships.length),T=(0,e$.ye)("docFormats"),O=!!l&&A,D=(0,v.useCallback)(async()=>{if(!f)return;let e=f.getJSON();await h({docId:C,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[C,h,f,r]),R=(0,v.useCallback)(()=>{null==E||E.track(eN.AA.DOC_ANALYTICS_VIEWED,{docId:C,source:"toolbar_doc_menu",type:"personal"}),k()},[E,C,k]),P=(0,v.useCallback)(e=>()=>{if(!C)return;let t={id:C};e?w({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):S({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[w,C,S]);return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(ej.Aj,{isOpen:i,onClose:r,children:(0,a.jsxs)(c.k,{w:"100%",h:i?"100%":void 0,direction:"column",children:[(0,a.jsxs)(em.U,{align:"flex-start",p:6,children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:g}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:j}})}),(0,a.jsx)(ej.kH,{label:null==s?void 0:null===(t=s.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==s?void 0:null===(n=s.createdBy)||void 0===n?void 0:n.displayName}})})})]}),(0,a.jsx)(e5.L,{}),(0,a.jsx)(e1.P,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,a.jsxs)(tE.K,{p:3,pt:0,children:[T&&(0,a.jsx)(pg,{}),(0,a.jsx)(pj,{}),A&&(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.nNP,fixedWidth:!0}),onClick:()=>{r(),og.T.emit("openSharePanel",{view:"invite"})},children:(0,a.jsx)(m.cC,{id:"iyga2M"})}),o&&(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.q2v,fixedWidth:!0}),onClick:()=>{r(),og.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,a.jsx)(m.cC,{id:"W15e8B"})}),(0,a.jsx)(pj,{}),u&&(0,a.jsxs)(a.Fragment,{children:[O&&(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.Ma4,fixedWidth:!0}),onClick:()=>{r(),R()},children:(0,a.jsx)(m.cC,{id:"qcxxQS"})}),_&&(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:D,children:(0,a.jsx)(m.cC,{id:"euc6Ns"})}),I&&(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.kwI,fixedWidth:!0}),onClick:()=>{r(),og.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(m.cC,{id:"U8WPSi"})}),(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),onClick:()=>{r(),og.T.emit("openPageSetup","cards")},children:(0,a.jsx)(m.cC,{id:"Kx2GmY"})}),A&&(0,a.jsx)(pj,{}),A?s.archived?(0,a.jsx)(pv,{icon:(0,a.jsx)(p.G,{icon:x.ZeM,fixedWidth:!0}),onClick:P(!1),children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsx)(pv,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:P(!0),children:(0,a.jsx)(m.cC,{id:"1C/Yjq"})}):null]})]})]})}),s&&b&&(0,a.jsx)(s7,{doc:s,isAnalyticsPanelOpen:b,onAnalyticsPanelClose:y,mode:"full"}),o&&(0,a.jsx)(le,{editor:f}),o&&(0,a.jsx)(h3,{})]})},pb=e=>{var t;let{doc:n,editor:i,commentsEnabled:r,editingEnabled:s,onCommentFeedOpen:o,onTocOpen:l}=e,[c]=(0,uo.X)(q.H.lastHomeUrl,"/"),{user:u}=(0,eJ.SE)(),h=(0,eJ.py)("manage",n)||s,m=(null==n?void 0:null===(t=n.comments)||void 0===t?void 0:t.filter(e=>e.status===tF.Ux9.Open).length)||0,f=pm("editor"),g=(0,C.v9)(W.Pu),j=(0,pf.Jh)(g),b=(0,l5.wj)(g)?"white":"gray.800",y=(0,l5.wj)(g)?"trueblue.300":"trueblue.700",k=(0,v.useCallback)(()=>{i&&i.commands.undo()},[i]),{isOpen:w,onOpen:S,onClose:E}=(0,I.q)();return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pC,{doc:n,isOpen:w,onClose:E,editingEnabled:s}),(0,a.jsxs)(em.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==f?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==f?1:0,zIndex:"sticky",sx:{...(0,pf.Oj)(j,g,!0),border:"none",filter:"none",borderRadius:0},color:b,children:[u&&(0,a.jsx)(nN(),{href:c,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(T.h,{as:i2.r,"aria-label":"Home",color:b,_hover:{bg:"transparent",color:y},icon:(0,a.jsx)(p.G,{icon:x.J9Y,size:"1x"}),variant:"ghost"})}),(0,a.jsx)(d.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:b,children:null==n?void 0:n.title}),(0,a.jsxs)(eg.h,{variant:"ghost",children:[r&&(0,a.jsx)(ef.z,{color:b,_hover:{bg:"transparent",color:y},fontSize:"sm",onClick:o,leftIcon:(0,a.jsx)(p.G,{icon:x.Mzg}),children:m}),s&&(0,a.jsx)(T.h,{color:b,"aria-label":"Undo",onClick:k,_hover:{bg:"transparent",color:y},icon:(0,a.jsx)(p.G,{icon:x.X7o})}),!s&&(0,a.jsx)(T.h,{color:b,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:y},onClick:l,icon:(0,a.jsx)(p.G,{icon:x.xiG})}),h&&(0,a.jsx)(T.h,{color:b,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:y},onClick:S,icon:(0,a.jsx)(p.G,{icon:x.S6C})})]})]})]}):null},py=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,{docId:r,setCollaborativeEditorInstance:s,editor:o}=(0,tw._i)(),{isOpen:l,onOpen:d,onClose:u}=(0,I.q)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:h,onOpen:x,onClose:p}=(0,I.q)({id:"mobile-toc-drawer"}),[m,f]=(0,v.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let g=(0,e$.ye)("mobileEditing"),j=(0,eJ.py)("edit",t),C=g&&j;return(0,a.jsx)(b.Sy,{children:(0,a.jsxs)(c.k,{ref:(0,v.useCallback)(e=>f(e),[]),direction:"column",flex:1,children:[(0,a.jsx)(pb,{doc:t,editor:o,onCommentFeedOpen:d,commentsEnabled:!C&&i,editingEnabled:C,onTocOpen:x}),n===tk.Z.PUBLIC_STATIC?(0,a.jsx)(aU,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:px,onCreate:s}):n===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(rt,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:px,onCreate:s}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.Ge,{doc:t,docId:r,readOnly:!C,onCreate:s,scrollingParentSelector:px}),o&&(0,a.jsx)(eY,{editor:o})]}),i&&l&&(0,a.jsx)(ej.Aj,{isOpen:l,onClose:u,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,a.jsx)(nD,{onClose:u,editor:o})}),h&&(0,a.jsx)(ej.Aj,{isOpen:h,onClose:p,drawerProps:{returnFocusOnClose:!1},children:(0,a.jsx)(pp.o,{rootElement:m,handleClose:p})}),(0,a.jsx)(hY,{doc:t,showButton:!1}),(0,a.jsx)(eG.a,{children:(0,a.jsx)(i$,{editor:o})})]})})},pk=(0,tw.eT)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:s}=(0,tw._i)();x1(n,t);let{editorAnimationsClass:o,editorAnimationsCSSVars:l}=(0,eP.k)({editor:s,scrollingParentSelector:px});xP(n,s),(0,xq.j)();let d=(0,v.useRef)(null),u=(0,F.CG)(tU.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===tk.Z.COLLABORATIVE;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j(),{children:[(0,a.jsxs)("title",{children:["".concat(u?(0,op.$)(u.title)+" | ":""),"Gamma"]}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,a.jsx)(lH.xB,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,a.jsx)(aR,{docId:n}):i?(0,a.jsxs)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",Y.Yc,"."]}):(0,a.jsx)(c.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,flex:"1",className:o,style:{...l},children:(0,a.jsx)(py,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},31003:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return E}),n.d(t,"Serializer",function(){return I}),n.d(t,"Socket",function(){return A}),n.d(t,"LongPoll",function(){return _}),n.d(t,"Ajax",function(){return T}),n.d(t,"Presence",function(){return O});var d="undefined"!=typeof window?window:null,u=("undefined"!=typeof self?self:null)||d||void 0,h="closed",x="errored",p="joined",m="joining",f="leaving",g="phx_close",j="phx_error",v="phx_join",C="phx_reply",b="phx_leave",y=[g,j,v,C,b],k="websocket",w=function(e){return"function"==typeof e?e:function(){return e}},S=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return c(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),E=function(){function e(t,n,i){var r=this;l(this,e),this.state=h,this.topic=t,this.params=w(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new S(this,v,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new D(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=p,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=h,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new S(r,b,w({}),r.timeout).send(),r.state=x,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(C,function(e,t){r.trigger(r.replyEventName(t),e)})}return c(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(g,e)}},{key:"onError",value:function(e){return this.on(j,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new S(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(g,"leave")},i=new S(this,b,w({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return y.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=m,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===h}},{key:"isErrored",value:function(){return this.state===x}},{key:"isJoined",value:function(){return this.state===p}},{key:"isJoining",value:function(){return this.state===m}},{key:"isLeaving",value:function(){return this.state===f}}]),e}(),I={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),c=0;a.setUint8(c++,this.KINDS.push),a.setUint8(c++,t.length),a.setUint8(c++,n.length),a.setUint8(c++,r.length),a.setUint8(c++,i.length),Array.from(t,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(c++,e.charCodeAt(0))});var d=new Uint8Array(l.byteLength+s.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(s),l.byteLength),d.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var c=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:c,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var c=n.decode(e.slice(l,l+r));l+=r;var d=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:c,topic:d,event:C,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},A=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||u.WebSocket||_,this.defaultEncoder=I.encode.bind(I),this.defaultDecoder=I.decode.bind(I),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==_?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),d&&d.addEventListener&&d.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=w(i.params||{}),this.endPoint="".concat(t,"/").concat(k),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new D(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return c(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=T.appendParams(T.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=w(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(j)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new E(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,s,l)&&c.trigger(i,s,o,l)}for(var d=0;d<t.stateChangeCallbacks.message.length;d++)(0,r(t.stateChangeCallbacks.message[d],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),_=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return c(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+k),"$1/longpoll")}},{key:"endpointURL",value:function(){return T.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||T.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;T.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),T=function(){function e(){l(this,e)}return c(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(u.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new u.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();T.states={complete:4};var O=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return c(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),c=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),d=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});c.length>0&&(o[e]=t,o[e].metas=c),d.length>0&&(l[e]=r.clone(n),l[e].metas=d)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),c=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(c)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(c)||s(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),D=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return c(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},e.exports=t()},75461:function(e,t,n){"use strict";n.d(t,{W:function(){return i},w:function(){return r}});var[i,r]=(0,n(9165).k)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},25215:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var i=n(75461),r=n(31053),s=n(25578),o=n(29058),l=n(91982),a=n(84586),c=n(76801),d=n(2784),u=n(52322),h=(0,o.G)(function(e,t){let n=(0,l.jC)("Breadcrumb",e),{children:o,spacing:h="0.5rem",separator:x="/",className:p,listProps:m,...f}=(0,a.Lr)(e),g=(0,s.W)(o),j=g.length,v=g.map((e,t)=>(0,d.cloneElement)(e,{separator:x,spacing:h,isLastChild:j===t+1})),C=(0,r.cx)("chakra-breadcrumb",p);return(0,u.jsx)(c.m.nav,{ref:t,"aria-label":"breadcrumb",className:C,__css:n.container,...f,children:(0,u.jsx)(i.W,{value:n,children:(0,u.jsx)(c.m.ol,{className:"chakra-breadcrumb__list",...m,__css:{display:"flex",alignItems:"center",...n.list},children:v})})})});h.displayName="Breadcrumb"},58450:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(41421),r=n(75461),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{spacing:n,...i}=e,s={mx:n,...(0,r.w)().separator};return(0,l.jsx)(o.m.span,{ref:t,role:"presentation",...i,__css:s})});a.displayName="BreadcrumbSeparator";var c=n(25578),d=n(31053),u=n(2784),h=(0,s.G)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,c.W)(p).map(e=>e.type===i.A?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),j={display:"inline-flex",alignItems:"center",...(0,r.w)().item},v=(0,d.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.m.li,{ref:t,className:v,...f,__css:j,children:[g,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},41421:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(75461),r=n(29058),s=n(76801),o=n(31053),l=n(52322),a=(0,r.G)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:c,...d}=e,u=(0,i.w)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...d};return n?(0,l.jsx)(s.m.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.m.a,{__css:u.link,href:c,...h})});a.displayName="BreadcrumbLink"},75397:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(32388),r=n(31053),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{className:n,...s}=e,a=(0,i.v)();return(0,l.jsx)(o.m.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},32388:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},v:function(){return r}});var[i,r]=(0,n(15706).eC)("Card")},56453:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(32388),r=n(31053),s=n(29058),o=n(84586),l=n(91982),a=n(76801),c=n(52322),d=(0,s.G)(function(e,t){let{className:n,children:s,direction:d="column",justify:u,align:h,...x}=(0,o.Lr)(e),p=(0,l.jC)("Card",e);return(0,c.jsx)(a.m.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:d,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,c.jsx)(i.Y,{value:p,children:s})})})},19521:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=3725-a69448cb33b586a7.js.map