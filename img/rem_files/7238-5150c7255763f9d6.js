(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7238],{91694:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(52322),r=n(38035),o=n(28535),a=n(77533),l=n(64253),s=n(5879);n(2784);let d=e=>{let{createdByName:t,createdByProfileImageUrl:n,createdByYou:d,timestampDescription:c}=e;return(0,i.jsxs)(r.k,{align:"center",children:[(0,i.jsx)(l.Vw,{size:"xs",fontSize:"xs",name:t,src:n,tooltipProps:{placement:"top"}}),(0,i.jsxs)(o.xu,{ml:2,mr:2,w:"100%",children:[(0,i.jsx)(a.x,{noOfLines:1,fontSize:"xs",w:"100%",wordBreak:"break-all",children:d?(0,i.jsx)(s.cC,{id:"WZTg05"}):(0,i.jsx)(s.cC,{id:"pS1F3d",values:{createdByName:t}})}),c&&(0,i.jsx)(a.x,{noOfLines:1,fontSize:"11px",color:"gray.400",children:c})]})]})}},79313:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var i=n(52322),r=n(69251),o=n(25925);n(2784);let a=e=>{let{children:t,...n}=e;return(0,i.jsx)(r.r,{templateColumns:{base:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(3, 1fr)",xl:"repeat(4, 1fr)","2xl":"repeat(5, 1fr)"},gap:6,...n,children:(0,i.jsx)(o.M,{children:t})})}},89786:function(e,t,n){"use strict";n.d(t,{Gd:function(){return i.G},F7:function(){return F},Ot:function(){return P},_6:function(){return O}});var i=n(79313),r=n(52322),o=n(11881),a=n(29117),l=n(75009),s=n(93274),d=n(30523),c=n(38035),u=n(82729),p=n(28535),h=n(77533),m=n(36474),g=n(64253),f=n(87254),x=n(2784),v=n(86290),y=n(92035),b=n(40382),w=n(91998),C=n(91694),k=n(26284),j=n(70065),S=n(55478),A=n(10625),I=n(67046),z=n(32899),L=n(332),E=n(99058),N=n(27599),M=n(25481),_=n(42946),T=n(54933),R=n(49929),H=n(5879);let P=e=>{let{href:t,title:n,createdByName:i,createdByEmail:o,createdTime:a,isDuplicateEnabled:l,isRenameEnabled:s,isShareEnabled:d,isTrashed:c,isFavorited:u,isTrashAndRestoreEnabled:m,isRemoveFromChannelEnabled:f,onDuplicate:x,onFavorite:y,onUnfavorite:b,onTrash:w,onPermanentDelete:C,onRestore:P,onShareClick:O,onRename:D,onRemoveFromChannel:W}=e,{onCopy:F}=(0,k.V)("".concat(window.location.origin).concat(t)),B=(0,j.p)(),{isOpen:G,onOpen:U,onClose:V}=(0,S.q)();return(0,r.jsxs)(A.v,{isLazy:!0,closeOnSelect:!1,modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["bottom","bottom-start","bottom-end","right-start","left-start","right-end","left-end"]}}],children:[(0,r.jsx)(I.j,{"data-dashboard-doc-menu":!0,as:z.h,size:"xs",variant:"ghost",borderRadius:"full",onClick:U,icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.cNd}),color:"gray.400",_hover:{color:"gray.800",bg:"gray.200"},children:(0,r.jsx)(H.cC,{id:"7L01XJ"})}),G&&(0,r.jsx)(L.h,{children:(0,r.jsxs)(E.q,{maxW:"sm",zIndex:"overlay",children:[(0,r.jsxs)(p.xu,{px:4,py:0,wordBreak:"break-word",children:[(0,r.jsx)(h.x,{children:n}),(0,r.jsx)(h.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,r.jsx)(H.cC,{id:"MXSt4t",values:{0:(0,v.p6)(a,"MMMM do, yyyy")}})}),o&&i&&(0,r.jsx)(g.kH,{label:o,children:(0,r.jsx)(h.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,r.jsx)(H.cC,{id:"Wpe4mQ",values:{createdByName:i}})})})]}),(d||s||f)&&(0,r.jsx)(N.R,{}),f&&(0,r.jsx)(M.s,{onClick:W,icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.gPx}),children:(0,r.jsx)(H.cC,{id:"bv+Frh"})}),d&&(0,r.jsx)(M.s,{onClick:O,icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.zBy}),children:(0,r.jsx)(H.cC,{id:"iyga2M"})}),s&&(0,r.jsx)(M.s,{onClick:D,icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.aJJ}),children:(0,r.jsx)(H.cC,{id:"Cg4Iup"})}),(0,r.jsx)(N.R,{}),y?u?(0,r.jsx)(M.s,{icon:(0,r.jsx)(p.xu,{color:"yellow.400",children:(0,r.jsx)(R.G,{fixedWidth:!0,icon:T.Tab})}),onClick:b,children:(0,r.jsx)(H.cC,{id:"T/pF0Z"})}):(0,r.jsx)(M.s,{icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.Tab}),onClick:y,children:(0,r.jsx)(H.cC,{id:"pBsoKL"})}):null,l&&!!x&&(0,r.jsx)(M.s,{icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.WM4}),onClick:x,children:(0,r.jsx)(H.cC,{id:"euc6Ns"})}),(0,r.jsx)(M.s,{icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.tFX}),onClick:()=>{F(),B({title:(0,r.jsx)(H.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},children:(0,r.jsx)(H.cC,{id:"y1eoq1"})}),m&&(0,r.jsx)(N.R,{}),m?c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.s,{icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:T.XnX}),onClick:P,children:(0,r.jsx)(H.cC,{id:"yKu/3Y"})}),C&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.R,{}),(0,r.jsx)(M.s,{color:"red",icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.WA2}),onClick:C,children:(0,r.jsx)(H.cC,{id:"0Lbaux"})})]})]}):(0,r.jsx)(M.s,{color:"red",icon:(0,r.jsx)(R.G,{fixedWidth:!0,icon:_.XAH}),onClick:()=>{V(),null==w||w()},children:(0,r.jsx)(H.cC,{id:"1C/Yjq"})}):null]})})]})},O=e=>{let{isFavorited:t,onFavorite:n,onUnfavorite:i,disableInteractions:o=!1,...a}=e,[l,s]=(0,x.useState)(!1),d=(0,x.useCallback)(()=>{if(!n||!i){console.error("[FavoriteButton] onFavorite or onUnfavorite is not defined");return}t?(s(!1),i()):(s(!0),setTimeout(()=>{s(!1)},1e3),n())},[t,n,i]);return(0,r.jsx)(g.kH,{label:t?(0,r.jsx)(H.cC,{id:"T/pF0Z"}):(0,r.jsx)(H.cC,{id:"pBsoKL"}),placement:"top",children:(0,r.jsx)(z.h,{...a,...o?{tabIndex:-1,pointerEvents:"none"}:{},zIndex:"1","data-favorite-button":!0,"aria-label":f.ag._({id:"pBsoKL"}),className:"star-wrapper ".concat(l?"active":""),onClick:d,variant:"ghost",size:"xs",color:t?"yellow.400":"gray.400",_hover:{color:t?"yellow.500":"gray.400",bg:t?void 0:"blackAlpha.100"},bg:t?"yellow.50":"transparent",borderRadius:"full",icon:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.G,{icon:t?T.Tab:_.Tab}),(0,r.jsxs)(p.xu,{fontSize:"2.5px",children:[(0,r.jsxs)("div",{className:"star",children:[(0,r.jsx)("div",{className:"tl"}),(0,r.jsx)("div",{className:"tr"}),(0,r.jsx)("div",{className:"bl"}),(0,r.jsx)("div",{className:"br"})]}),(0,r.jsx)("div",{className:"ring"}),(0,r.jsx)("div",{className:"circles"})]})]})})})},D=e=>{let{href:t,NextLink:n,target:i,children:a}=e;return n?(0,r.jsx)(n,{href:t,passHref:!0,target:i,legacyBehavior:!0,children:(0,r.jsx)(o.A,{outline:"none",children:a})}):(0,r.jsx)(o.A,{outline:"none",href:t,target:i,children:a})},W=e=>{let{cardThumbnails:t,hoveredIndex:n}=e;return(0,r.jsx)(a.U,{justifyContent:"flex-start",alignItems:"top",w:"100%",position:"absolute",zIndex:2,top:0,spacing:0,children:t.map((e,t)=>(0,r.jsx)(l.E,{className:"thumbnail-scrubber",src:e.previewUrl,fit:"cover",position:"absolute",left:0,pointerEvents:"none",transform:"translate(calc(calc(".concat(t," * 100%) - ").concat(n," * 100%),0px)")},e.id))})},F=x.forwardRef((e,t)=>{let{id:n,title:i,thumbnailImageUrl:a,NextLink:k,href:j,createdByYou:S=!1,createdByName:A,createdByEmail:I,createdTime:z,createdByProfileImageUrl:L,timestampDescription:E,editors:N,isDuplicateEnabled:M=!0,isRenameEnabled:_=!1,isShareEnabled:T=!1,isTrashAndRestoreEnabled:R=!0,isRemoveFromChannelEnabled:H=!1,isTrashed:F=!1,isFavorited:B=!1,onDuplicate:G,onFavorite:U,onUnfavorite:V,onTrash:q,onPermanentDelete:K,onRestore:Y,onShareClick:X,onRename:$,onRemoveFromChannel:Z,cardThumbnails:Q,context:J="grid",tags:ee=[],menuEnabled:et=!1,openInNewWindow:en=!1,activity:ei,isOffline:er,...eo}=e,ea=(0,b.gF)(),el=en?"_blank":void 0,es=N&&N.length>0&&(0,r.jsx)(s.H,{size:"xs",max:5,fontSize:"xs",children:N.map(e=>(0,r.jsx)(g.Vw,{shadow:"md",borderWidth:"1px",name:ea?f.ag._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,v.Km)(e.lastEdited)}}):" ",src:e.user.profileImageUrl,tooltipProps:{placement:"top"}},"".concat(n,"-").concat(e.user.id)))}),[ed,ec]=(0,x.useState)(0),eu=(0,x.useCallback)(e=>{if(!Q)return;let t=e.currentTarget.getBoundingClientRect(),n=(e.pageX-t.left)/t.width;ec(Math.floor(Q.length*n))},[Q]);return(0,r.jsx)(o.f,{overflow:"hidden",ref:t,"data-doc-grid-item-id":n,bg:"linen.50",borderRadius:"5px",shadow:"md",as:d.P,_focusWithin:{shadow:"outline",_hover:{shadow:"outline"}},cursor:"pointer",_hover:{shadow:"lg",bgColor:"popover"===J?"white":"gray.100"},transition:"box-shadow .2s ease",role:"group",onMouseMove:eu,className:"highlight-mask",...eo,children:(0,r.jsxs)(c.k,{direction:"column",wordBreak:"break-word",alignContent:"space-between",height:"100%",children:[a&&(0,r.jsx)(D,{NextLink:k,href:j,target:el,children:(0,r.jsx)(u.o,{ratio:40/21,bgColor:"gray.100",children:(0,r.jsxs)(c.k,{borderBottomWidth:"1px",borderBottomColor:"gray.100",children:[(0,r.jsx)(W,{cardThumbnails:Q||[],hoveredIndex:ed}),(0,r.jsx)(l.E,{src:null==a?void 0:a.src,fallbackSrc:null==a?void 0:a.fallbackSrc,fit:"cover"}),!!es&&(0,r.jsx)(p.xu,{position:"absolute",right:0,bottom:0,borderRadius:"full",p:3,zIndex:1,children:es})]})})}),(0,r.jsxs)(c.k,{p:3,position:"relative",direction:"column",justifyContent:"space-between",h:"100%",alignItems:"flex-start",children:[(0,r.jsx)(D,{NextLink:k,href:j,target:el,children:(0,r.jsx)(h.x,{noOfLines:2,h:12,mb:2,children:(0,w.$)(i)})}),(0,r.jsxs)(c.k,{direction:"column",w:"100%",children:[ee&&ee.length>0&&k&&(0,r.jsx)(g.MY,{tags:ee,NextLink:k,overflowButtonLabel:f.ag._({id:"K0UBDD"}),isDisabled:er}),(0,r.jsxs)(c.k,{mt:2,align:"flex-start",w:"100%",justify:"space-between",children:[ei&&ei,A&&(0,r.jsx)(C.l,{createdByYou:S,createdByName:A,createdByProfileImageUrl:L,timestampDescription:E}),(0,r.jsx)(m.L,{}),et&&(0,r.jsx)(P,{href:j,title:(0,w.$)(i),createdByName:A,createdByEmail:I,createdTime:z,isDuplicateEnabled:M,isRenameEnabled:_,isShareEnabled:T,isTrashAndRestoreEnabled:R,isRemoveFromChannelEnabled:H,isTrashed:F,isFavorited:B,onDuplicate:G,onFavorite:U,onUnfavorite:V,onTrash:q,onPermanentDelete:K,onRestore:Y,onShareClick:X,onRename:$,onRemoveFromChannel:Z})]})]})]}),!!U&&!!V&&(0,r.jsx)(p.xu,{position:"absolute",top:3,right:3,zIndex:3,children:(0,r.jsx)(O,{isFavorited:B,onFavorite:U,onUnfavorite:V,opacity:B?1:(0,y.s2)()?1:0,_groupHover:(0,y.s2)()||er&&!B?void 0:{opacity:1},_focus:er?void 0:{opacity:1,shadow:"outline"},disableInteractions:er})})]})},n)});F.displayName="DocumentGridItem"},8e4:function(e,t,n){"use strict";n.d(t,{d:function(){return l}});var i=n(52322),r=n(50019),o=n(38035),a=n(62614);let l=e=>{let{label:t,leftIcon:n,rightIcon:l,isSticky:s,onClick:d}=e,c=(0,r.ff)("gray.50","gray.800");return(0,i.jsx)(o.k,{mt:2,bg:c,mx:-2,mb:-2,position:s?"sticky":"static",bottom:s?-2:"auto",children:(0,i.jsx)(a.z,{colorScheme:"gray",variant:"link",size:"sm",mx:"auto",leftIcon:n,rightIcon:l,onClick:d,w:"100%",py:3,children:t})})}},16006:function(e,t,n){"use strict";n.d(t,{v:function(){return k}});var i=n(52322),r=n(92850),o=n(26468),a=n(22226),l=n(2338),s=n(97217),d=n(43297),c=n(75009),u=n(74409),p=n(77533),h=n(62614),m=n(29117),g=n(50250),f=n(5879),x=n(2784),v=n(71383),y=n(31601),b=n(27821),w=n(78112),C=n(37276);let k=e=>{let{link:t,confirmFunction:n,onClose:k}=e,j=(0,v.CG)(w.ke),S=(0,y.z$)(),A=(0,x.useRef)(!1),I=(0,b.C7)()?"gamma.site":"gamma.app";return(0,x.useEffect)(()=>{A.current||(A.current=!0,null==S||S.track(y.AA.ABUSE_LINK_INTERCEPT_SHOWN,{docId:j,link:t}))},[S,j,t]),(0,i.jsxs)(r.u_,{isOpen:!0,trapFocus:!1,onClose:()=>k("cancel"),children:[(0,i.jsx)(o.Z,{}),(0,i.jsxs)(a.h,{children:[(0,i.jsx)(l.o,{}),(0,i.jsx)(s.f,{alignItems:"center",textAlign:"center",children:(0,i.jsxs)(d.K,{mt:8,spacing:4,children:[(0,i.jsx)(c.E,{mx:"auto",my:"4",w:16,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e633cfd2f0df4e61a10843305b87943e/optimized/G-3-Color.svg"}),(0,i.jsx)(u.X,{size:"lg",children:(0,i.jsx)(f.cC,{id:"vtMb7+"})}),(0,i.jsx)(f.cC,{id:"EK1l1+",values:{gammaProperty:I},components:{0:(0,i.jsx)(p.x,{}),1:(0,i.jsx)("code",{})}}),(0,i.jsx)(p.x,{fontSize:"sm",py:1,borderRadius:"sm",color:"gray.700",fontFamily:"mono",bg:"blackAlpha.100",children:t}),(0,i.jsx)(d.K,{spacing:2,mt:2,children:(0,i.jsx)(h.z,{variant:"plain",onClick:()=>{n(t),null==S||S.track(y.AA.ABUSE_LINK_INTERCEPT_CONTINUE,{docId:j,link:t}),k("continue")},children:(0,i.jsx)(f.cC,{id:"xGVfLh"})})}),(0,i.jsx)(h.z,{onClick:()=>{null==S||S.track(y.AA.ABUSE_LINK_INTERCEPT_CANCEL,{docId:j,link:t}),k("cancel")},variant:"solid",children:(0,i.jsx)(f.cC,{id:"FLUIeq"})}),(0,i.jsx)(m.U,{pt:2,flex:1,children:(0,i.jsx)(C.E,{docId:j,buttonType:"button",onSubmitReport:()=>k("report")})})]})}),(0,i.jsx)(g.m,{})]})]})}},29201:function(e,t,n){"use strict";n.d(t,{Sy:function(){return s},f_:function(){return d}});var i=n(52322),r=n(2784),o=n(16006);let a=(0,r.createContext)({}),l=e=>{window.open(e,"_blank","noopener")},s=e=>{let{children:t}=e,[n,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(""),[u,p]=(0,r.useState)(()=>l),h=(0,r.useCallback)((e,t)=>{c(e),t&&p(()=>()=>t(e)),s(!0)},[]),m=(0,r.useCallback)(()=>{c(""),p(()=>l),s(!1)},[]),[g,f]=(0,r.useState)({showLinkInterstitial:h,hideLinkInterstitial:m});return(0,i.jsxs)(a.Provider,{value:g,children:[n&&(0,i.jsx)(o.v,{link:d,confirmFunction:u,onClose:m}),t]})},d=()=>(0,r.useContext)(a)},37276:function(e,t,n){"use strict";n.d(t,{E:function(){return _}});var i=n(52322),r=n(55478),o=n(32899),a=n(62614),l=n(70065),s=n(92850),d=n(26468),c=n(22226),u=n(54326),p=n(2338),h=n(97217),m=n(43297),g=n(77533),f=n(7344),x=n(59905),v=n(87651),y=n(29494),b=n(50250),w=n(75768),C=n(54933),k=n(49929),j=n(64253),S=n(5879),A=n(87254),I=n(2784),z=n(8940),L=n(32817),E=n(18960);let N={[z.pyi.DeceptiveOrMisleading]:{title:(0,i.jsx)(S.cC,{id:"Y5QK1F"})},[z.pyi.Explicit]:{title:(0,i.jsx)(S.cC,{id:"Zeb01n"})},[z.pyi.Other]:{title:(0,i.jsx)(S.cC,{id:"/IX/7x"})},[z.pyi.Spam]:{title:(0,i.jsx)(S.cC,{id:"Y5QK1F"})},[z.pyi.Inappropriate]:{title:(0,i.jsx)(S.cC,{id:"Zeb01n"})}},M=[z.pyi.DeceptiveOrMisleading,z.pyi.Explicit,z.pyi.Other],_=e=>{let{docId:t,buttonType:n,onSubmitReport:l}=e,[s]=(0,L.I)(E.H.abuseReports,[]),[d,c]=(0,I.useState)(s.includes(t||"")),{isOpen:u,onOpen:p,onClose:h}=(0,r.q)({id:"report-page-modal"}),m=(0,I.useCallback)(()=>{c(!0),h(),null==l||l()},[h,l]);return d||!t?null:(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)(T,{docId:t,isOpen:!0,onClose:h,onSubmit:m}),"iconRight"===n?(0,i.jsx)(j.kH,{label:(0,i.jsx)(S.cC,{id:"ch68HI"}),children:(0,i.jsx)(o.h,{"aria-label":A.ag._({id:"ch68HI"}),borderLeftWidth:"0px",color:"gray.600",variant:"plain",size:"sm",borderLeftRadius:0,icon:(0,i.jsx)(k.G,{icon:C.L1r,size:"sm"}),onClick:p})}):"button"===n?(0,i.jsx)(a.z,{marginX:"auto",colorScheme:"gray",color:"gray.500",size:"sm",variant:"ghost",leftIcon:(0,i.jsx)(k.G,{icon:C.L1r}),onClick:p,children:(0,i.jsx)(S.cC,{id:"ch68HI"})}):null]})},T=e=>{let{docId:t,isOpen:n,onClose:r,onSubmit:o}=e,[C,k]=(0,L.I)(E.H.abuseReports,[]),[_,T]=(0,I.useState)(),[R]=(0,z.mvg)(),[H,P]=(0,I.useState)(),O=(0,l.p)(),D=(0,I.useCallback)(()=>{_&&R({variables:{input:{docId:t,reason:_,description:H}}}).then(()=>{k([...C,t]),O({title:(0,i.jsx)(S.cC,{id:"7sBcV9"}),description:(0,i.jsx)(S.cC,{id:"m02YqD"}),status:"success",duration:5e3,isClosable:!0,position:"top"}),o()})},[_,R,t,H,k,C,O,o]);return(0,i.jsx)(j.Wk,{isDark:!1,children:(0,i.jsxs)(s.u_,{isOpen:n,onClose:r,trapFocus:!1,children:[(0,i.jsx)(d.Z,{}),(0,i.jsxs)(c.h,{children:[(0,i.jsx)(u.x,{children:(0,i.jsx)(S.cC,{id:"ch68HI"})}),(0,i.jsx)(p.o,{}),(0,i.jsx)(h.f,{children:(0,i.jsxs)(m.K,{spacing:0,children:[(0,i.jsx)(g.x,{mb:6,children:(0,i.jsx)(S.cC,{id:"oNyQYO"})}),(0,i.jsx)(f.E,{onChange:e=>{T(e)},value:_,children:(0,i.jsx)(m.K,{children:M.map(e=>{let t=N[e];return(0,i.jsx)(x.Y,{value:e,children:null==t?void 0:t.title},e)})})}),(0,i.jsx)(v.U,{in:_===z.pyi.Other,children:(0,i.jsx)(y.g,{onChange:e=>{P(e.target.value)},maxLength:200,placeholder:A.ag._({id:"1ULmtx"}),mt:4})})]})}),(0,i.jsx)(b.m,{children:(0,i.jsxs)(w.h,{children:[(0,i.jsx)(a.z,{colorScheme:"gray",onClick:r,variant:"ghost",children:(0,i.jsx)(S.cC,{id:"dEgA5A"})}),(0,i.jsx)(j.kH,{label:(0,i.jsx)(S.cC,{id:"h7+4yF"}),isDisabled:!!_,shouldWrapChildren:!0,children:(0,i.jsx)(a.z,{onClick:D,variant:"plain",colorScheme:"red.400",color:"red",_hover:{color:"red.600"},isDisabled:!_,children:(0,i.jsx)(S.cC,{id:"ovTgfk"})})})]})})]})]})})}},68927:function(e,t,n){"use strict";n.d(t,{x:function(){return g}});var i=n(18149),r=n.n(i),o=n(2784),a=n(30240),l=n(35534),s=n(71383),d=n(27821),c=n(78112),u=n(97134),p=n(87103),h=n(29201),m=n(65133);let g=(e,t)=>{let{showLinkInterstitial:n}=(0,h.f_)(),i=(0,s.CG)(c.Wl),g=(0,s.CG)(c.XF),f=(0,s.CG)(c.b7,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r()(...t)}),x=(0,l.fZ)(i),v=(0,a.ye)("knownGoodHostnames"),y=!!(0,u.SE)().user,b=(0,d.C7)(),w=(null==e?void 0:e.startsWith("/"))||(null==e?void 0:e.startsWith("#")),C=p.cx||x,k=p.cx||g||w,j=b?k:C,S=(0,o.useMemo)(()=>j?"trusted":(0,m.N)(e,f,v),[e,f,v,j]),A=(0,o.useMemo)(()=>j||y&&"unknown"===S?e:(0,m.n)(e,f,v),[j,e,y,S,f,v]);return{interceptLinkClick:(0,o.useCallback)(i=>{if(e&&"trusted"!==S)return y&&"unknown"===S?void 0:((i.preventDefault(),i.stopPropagation(),"untrusted"===S)?console.warn("[interceptLinkClick] Untrusted link clicked",e):null==n||n(e,t),!0)},[e,S,y,n,t]),linkUrlSafe:A,linkTrustLevel:S,linkInterceptEnabled:!1===j,isUntrusted:"untrusted"===S}}},24409:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(2784),r=n(68927);let o=e=>{let{interceptLinkClick:t,linkUrlSafe:n,linkInterceptEnabled:o}=(0,r.x)(e),a=(0,i.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i=>{if(e){if(!o){n||window.open(e,"_blank","noopener");return}t(i)||n||window.open(e,"_blank","noopener")}}},[e,t,o]);return(0,i.useMemo)(()=>({handleOpenNativeLinkWithInterstitial:a(!0),handleOpenLinkWithInterstitial:a(),linkUrlSafe:n}),[a,n])}},65133:function(e,t,n){"use strict";n.d(t,{N:function(){return o},n:function(){return a}});var i=n(27967),r=n(95405);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return"unknown";try{let r=new URL(e),o=(0,i.removeWWWPrefix)(r.hostname);if(n.includes(o))return"trusted";let a=t.find(t=>t.url===e);if(!a)return"unknown";if(3===a.status)return"untrusted";if(2===a.status)return"unknown";if(1===a.status)return"trusted";a.status}catch(t){console.error("[getLinkTrustLevel] Error checking link",e,t)}return"unknown"},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!e)return"";let i=o(e,t,n);return"trusted"===i?e:"untrusted"===i?"".concat(r.v.FRONTEND_URL,"/[untrusted-url]"):"".concat(r.v.FRONTEND_URL,"/external-link?url=[").concat(encodeURIComponent(e),"]")}},27011:function(e,t,n){"use strict";n.d(t,{B:function(){return i}});class i{constructor({key:e,description:t,classifyExamples:n,classifyReply:i,checkEnabled:r}){this.key=e,this.description=t,this.classifyExamples=n,this.classifyReply=i,this.checkEnabled=r}}},43901:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},13430:function(e,t,n){"use strict";n.d(t,{O:function(){return c}});var i=n(9850),r=n.n(i),o=n(27191),a=n(23186),l=n(12971),s=n(31335),d=n(18397);class c{isApplied(e){let t=e.state.tr,n=null;try{n=this.transact(e,t,!1)}catch(e){return console.error("[isModificationActive] Could not transact modificatioon, returning false",e.message),!1}if(!n)return!1;let i=(0,d.m$)(e,this.rangeId);if(!i)return!1;try{let r=e.state.doc.slice(i.from,i.to),o=t.doc.slice(i.from,i.to),a=n.from===i.from&&n.to===i.to;return r.eq(o)&&a}catch(e){}return!1}getPreviewJson(e){let t=e.state.tr;this.transact(e,t);let n=this.getParentCardId(e,t),i=r()(t.doc.toJSON());return(0,d.Y0)(i,n)}getParentCardId(e,t){let n=(0,d.m$)(e,this.rangeId);if(!n)return null;let i=t.doc.resolve(n.from),r=(0,l.Ru)(i,s.KH)[0];return r&&r.node.attrs.id||null}apply(e){let t=e.state.tr;this.transact(e,t),console.debug("[ReplaceContentModification] Applying modification",{modification:this,range:(0,d.m$)(e,this.rangeId)}),e.view.dispatch(t);let n=this.getParentCardId(e,t);(0,a.YS)({editor:e,cardId:n})}transact(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,d.m$)(e,this.rangeId);if(!i)return null;let{state:r}=e;t.replace(i.from,i.to,this.slice).setMeta("applyingAiModification",{rangeId:this.rangeId});let a=t.mapping.map(i.to),l={from:i.from,to:a};if(n){if(r.selection.empty)return t.setSelection(o.Y1.near(t.doc.resolve(i.from))),l;if(r.selection instanceof o.qv)return t.setSelection(o.qv.create(t.doc,i.from)),l;let e=o.Bs.between(t.doc.resolve(i.from),t.doc.resolve(a));t.setSelection(e)}return l}getContentForTracking(){return this.content}constructor(e,t){this.type="replace-content",this.description=t.description,this.rangeId=t.rangeId,this.content=t.content,this.slice=(0,d.Fr)(e,t.content)}}},18397:function(e,t,n){"use strict";n.d(t,{C$:function(){return s},Fr:function(){return l},Y0:function(){return a},m$:function(){return d}});var i=n(30764),r=n(20066),o=n(50738);let a=(e,t)=>{if(!e.content||!e.content[0].content)return null;let n=e.content[0].content.find(e=>e.attrs&&e.attrs.id===t);return n?(e.content[0].content=[n],e):null},l=(e,t)=>{let n=null;if("html"===t.type)n=(0,o.T)(t.html,e.schema).slice;else if("json"===t.type){let r=i.HY.fromJSON(e.schema,t.json);n=new i.p2(r,0,0)}else throw Error("Unsupported Modification content type ".concat(t.type));return n},s=(e,t,n)=>{var i,o;let a=r.i.getState(e.state);return a?(null==a?void 0:a.getExistingRangeId(e.state,n))||null||(null===(i=(o=e.commands).setInteractionRange)||void 0===i||i.call(o,t,n),t):t},d=(e,t)=>{let n=r.i.getState(e.state);return(null==n?void 0:n.getRange(e.state,t))||null}},33266:function(e,t,n){"use strict";n.d(t,{$V:function(){return y},az:function(){return f},w6:function(){return x}});var i=n(87254),r=n(27011),o=n(76417),a=n(18755),l=n(69964),s=n(71030),d=n(69971),c=n(13364),u=n(28036),p=n(13430),h=n(18397),m=n(42791),g=n(63796);let f=()=>i.ag._({id:"HNDdbS"});class x extends r.B{async getResponseMessages(e){let{editor:t,context:n,rangeId:r,response:{raw:o,suggestion:a,message:l}}=e;if(!a)throw new u.$D("[SuggestContentTask] No html provided in prompt response",{chatMessage:l,inputMessage:n.message,resp:o,interactionId:n.interactionId});let d=await (0,s.T)(a,{loadImages:!0});console.debug("[AIChat SuggestContentTask] modify suggestion",{transformedHtml:d,html:a});let c=new p.O(t,{description:i.ag._({id:"nyQWMb"}),content:{type:"html",html:d},rangeId:r}),h={label:i.ag._({id:"nyQWMb"}),modification:c,jsonContentPreview:c.getPreviewJson(t)},m=this.getOriginalModifyContentSuggestion(t,n,r);return{messages:[{from:"Designer",type:"suggestContent",resp:o,message:l||i.ag._({id:"pMSbe+"}),suggestions:[h,m],interactionId:n.interactionId}],suggestionToApply:h}}async runPrompt(e){let t,{input:n,context:i,variables:r,trackFns:o,retries:s=2,history:p}=e;if(this.jsxPrompt&&c.VH.get("aiChatJsx")){let{promise:e}=(0,l.Kk)({variables:{html:r.html,message:r.message,outline:r.outline,history:p.map(e=>({role:e.role===d.XaP.Assistant?"assistant":"user",content:e.content||""}))},interactionId:i.interactionId,workspaceId:i.workspaceId,promptKey:this.jsxPrompt,opts:{timeout:c.VH.get("aiRequestTimeouts").suggestContent}});t=await e}else t=await (0,a.I)(n,i.interactionId,{timeout:c.VH.get("aiRequestTimeouts").suggestContent});if(!t)throw new u.$D("Couldn't get response from prompt",{resp:t,inputMessage:i.message,interactionId:i.interactionId});let h=this.parseResponse(t,r);if(h.shouldRetry){if(s<=0)throw new u.eo("Could not parse response properly after retries",{chatMessage:f(),inputMessage:i.message,resp:t,interactionId:i.interactionId});return o.trackRequestRetry({interactionId:i.interactionId,retriesRemaining:s,resp:t}),this.runPrompt({input:n,context:i,retries:s-1,trackFns:o,variables:r,history:p})}return{parsed:h,resp:t}}async run(e){let{editor:t,context:n,addMessage:i,history:r,trackFns:a,themeModificationController:l,provider:s}=e,{html:d,range:c}=this.determineTaskTarget(n.editorContext);a.trackInputContent({taskContext:n,inputContent:d});let u={message:n.message,html:d,outline:n.editorContext.outline},p=(0,h.C$)(t,n.interactionId,c),m=(0,g.x)(r||[]),f=this.prompt.prepare({variables:u,history:m,interactionId:n.interactionId,params:{provider:s}});console.debug("[AIChat SuggestContentTask] run",{html:u.html,input:f,suggestHistory:m,range:(0,h.m$)(t,p)});let x=await (0,o.oO)(f),{parsed:v,resp:y}=await this.runPrompt({input:x,history:m,context:n,variables:u,trackFns:a,retries:1}),{messages:b,suggestionToApply:w}=await this.getResponseMessages({editor:t,context:n,rangeId:p,response:v,themeModificationController:l});console.debug("[AIChat SuggestContentTask] completed",{suggestion:v.suggestion,resp:y,parsed:v,messages:b,suggestionToApply:w}),this.autoApplySuggestion({context:n,editor:t,suggestionToApply:w,resp:y,trackFns:a,themeModificationController:l}),b.forEach(e=>i(e)),a.trackRequestComplete({taskContext:n,outputMessage:v.message,outputContent:v.suggestion,resp:y})}determineTaskTarget(e){return this.getTaskTarget?this.getTaskTarget(e):e.defaultRange}getOriginalModifyContentSuggestion(e,t,n){let r=new p.O(e,{description:i.ag._({id:"HxF6Fk"}),content:{type:"html",html:this.determineTaskTarget(t.editorContext).html},rangeId:n});return{label:i.ag._({id:"HxF6Fk"}),modification:r,jsonContentPreview:r.getPreviewJson(e)}}autoApplySuggestion(e){let{context:t,editor:n,suggestionToApply:i,resp:r,trackFns:o,themeModificationController:a}=e;if(i){if(i.modification.isApplied(n,a))throw console.debug("[SuggestContentTask] suggestion does not change the content",i),new u.ME("Suggestion does not change content",{resp:r,interactionId:t.interactionId,chatMessage:f()});try{let{modification:e}=i;e.apply(n,a),o.trackSuggestionApplied({interactionId:t.interactionId,suggestionContent:e.getContentForTracking(),suggestionLabel:e.description,suggestionType:e.type,autoApplied:!0})}catch(e){throw new u.An("Could not apply suggestion",{interactionId:t.interactionId})}}}constructor(e){super(e),this.prompt=e.prompt,this.jsxPrompt=e.jsxPrompt,this.parseResponse=e.parseResponse||y,this.getTaskTarget=e.getTaskTarget}}let v=RegExp("(.*?)```[A-Za-z]*\\n(.*?)\\n```(.*?)$","ims"),y=e=>{let t;let n=e.match(v),i=[];if(n)i=[n[1],n[3]],t=n[2];else{let n=e.split("```");if(0===n.length)throw Error("Could not extract code from response");if(1===n.length)return(0,m.y)(n[0])?{suggestion:void 0,raw:e,message:e,shouldRetry:!0}:{suggestion:void 0,raw:e,message:e.replaceAll(/(HTML|code)/gi,"content")};i=[n[0]],t=n[1].trim()}return{suggestion:t,message:i.map(e=>e.trim()).filter(e=>e.length>0).join("\n\n").replaceAll(/(HTML|code)/gi,"content").replaceAll(/(slide)/gi,"card"),raw:e}}},15988:function(e,t,n){"use strict";n.d(t,{L:function(){return a},a:function(){return l}});var i=n(16749),r=n(69971),o=n(33266);let a=new i.V({systemPromptOperation:r.Run.ChangeContentLayoutSystem,userPromptOperation:r.Run.ChangeContentLayoutUser,variables:["html","message"],params:{temperature:.7,maxTokens:1e3}}),l=new o.w6({key:"CHANGE_LAYOUT",description:"Change the display of information to use a different layout (like timeline, bullets, boxes, columns, table) or rearrange elements within a layout",classifyExamples:["turn this into a table","make each bullet into a box","could you split this into columns?","make this a timeline","could you make this more visual?","visualize this as a timeline"],classifyReply:"Sure, I'll start reformatting this as a table...",getTaskTarget:e=>"selectionRange"!==e.selectedDefaultRange?e.defaultRange:0===e.selectionRange.html.trim().length?e.cardContent:e.blockRange,prompt:a})},42791:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=e=>Array.from(new DOMParser().parseFromString(e,"text/html").body.childNodes).some(e=>1===e.nodeType)},63796:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});let i=e=>e.slice(-7).map(e=>"User"===e.from?{role:"user",content:e.message}:e.isClassification?{role:"assistant",content:e.message}:e.resp?{role:"assistant",content:e.resp}:null).filter(e=>!!(null==e?void 0:e.content))},57179:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var i=n(69971),r=n(31691);class o extends r.j{getSystemChatMessage(e){return{role:i.XaP.System,content:a(this.systemPrompt,e)}}getUserChatMessage(e){return{role:i.XaP.User,content:a(this.userPrompt,e)}}constructor({variables:e,systemPrompt:t,userPrompt:n,params:i}){super({params:i}),this.variables=e,this.systemPrompt=t,this.userPrompt=n}}function a(e,t){let n=e;for(let e in t)n=n.replaceAll("{{".concat(e,"}}"),t[e]);return n}},85418:function(e,t,n){"use strict";let i;n.d(t,{NV:function(){return s},Uu:function(){return d}});var r=n(34742),o=n(99604),a=n(97912);class l{getKey(e){let{query:t,provider:n,options:i}=e;return"".concat(n,"__").concat(t,"__").concat(JSON.stringify(i))}markUsed(e){this.usedImages.add(e)}isUsed(e){return this.usedImages.has(e)}async findImage(e){let t,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.loadImageId){let t=this.foundImages.get(e.loadImageId);if(t)return t}await this.loadImageResults(e);let i=this.getKey(e);return this.validImagePromises.has(i)?(t=this.validImagePromises.get(i).then(()=>this.findValidImage(e)),this.validImagePromises.set(i,t)):t=this.findValidImage(e),this.validImagePromises.set(i,t),t.then(t=>(t&&n&&this.markUsed(t.imageUrl),t&&e.loadImageId&&this.foundImages.set(e.loadImageId,t),t))}async findValidImage(e){let t=this.getKey(e);for(let e of this.results.get(t)){let{image:t}=e;if(!this.isUsed(t.imageUrl)&&(void 0===e.isValid&&(e.isValid=await (0,a.KI)(t.imageUrl)),e.isValid))return e.image}return null}async loadImageResults(e){let{query:t,provider:n,options:i,count:r}=e,l=this.getKey({query:t,provider:n,options:i});if(this.results.has(l))return;if(this.requestPromises.has(l)){await this.requestPromises.get(l);return}this.debugRequests.push(l);let s=(0,o.C)({query:t,count:r,options:i,provider:n}).then(e=>e.filter(e=>(0,a.VE)(e.imageUrl))).then(e=>{let t=e.map(e=>({image:e,isValid:void 0}));return this.results.set(l,t),e});this.requestPromises.set(l,s),await s}async generateImage(e,t){let n="aiGenerated__".concat(t.prompt,"__").concat(e);if(this.debugRequests.push(n),this.generateImagePromises.has(e))return this.generateImagePromises.get(e);let i=(0,r.Qz)(t);return this.generateImagePromises.set(e,i),i}debugInfo(){return{requests:this.debugRequests}}constructor(){this.usedImages=new Set,this.results=new Map,this.requestPromises=new Map,this.validImagePromises=new Map,this.debugRequests=[],this.generateImagePromises=new Map,this.foundImages=new Map}}let s=()=>(i||(i=new l),i),d=()=>{i=new l}},69274:function(e,t,n){"use strict";n.d(t,{sj:function(){return z},Tm:function(){return M},Bv:function(){return P}});var i=n(37243),r=n(2284),o=n.n(r),a=n(11618),l=n.n(a),s=n(30764),d=n(34742),c=n(43271),u=n(20435),p=n(48043),h=n(46577),m=n(50738),g=n(75325),f=n(91492),x=n(97134),v=n(23491),y=n(27003),b=n(1313),w=n.n(b);let C=e=>w()(e)(),k=(e,t)=>{let n=Math.floor(w()(t)()*e.length);return e[n]};var j=n(75173),S=n(71030);let A=["gridLayout","gallery","chart"],I=["imagesText","pyramid","funnel","staircase","circleStats","barStats"],z=async(e,t)=>{var n,r;let o;let{cardIndex:a,imageOptions:s,docFormatKey:d,theme:c,loadImages:g}=t,f=await (0,S.T)(e,{imageOptions:s,removeImagesFromLayouts:!0,loadImages:!1}),v=(0,i.J1)((0,u.e)()),{content:y,dom:b}=(0,m.T)(f,v),w=y.toJSON(),C=1===w.length&&"card"===w[0].type?(null===(n=w[0])||void 0===n?void 0:n.content)||[]:w,k=C.some(e=>"cardLayoutItem"===e.type),j=C.find(e=>"cardAccentLayoutItem"===e.type);if(k)(o=w[0]).attrs.layout&&!j&&(o.attrs.layout="blank"),o.attrs.id||(o.attrs.id=h.C2.generate());else{let e=null===(r=b.firstElementChild)||void 0===r?void 0:r.getAttribute("image-layout"),n=e&&p.IT.includes(e)?e:void 0,i=b.textContent?l()(b.textContent).length:void 0;o=_(C,{cardIndex:a,docFormatKey:d,theme:c,cardLayout:n,preserveLayouts:t.preserveLayouts,wordCount:i})}return s&&"aiGenerated"===s.provider&&L(o,v),g&&await N(o,v,{docId:"unknown",workspaceId:(0,x.n_)(),...t.context}),M(o),o},L=(e,t)=>{(0,y.N)(e,e=>{if("text"===e.type)return;let n=s.NB.fromJSON(t,{type:e.type,attrs:e.attrs}),i=(0,g.XU)(n);if(!i||!i.loadImageParams)return;let{options:r}=i.loadImageParams;if(!r)return;let o="model"in r&&r.model?d.Iw[r.model].aspectRatios:d.Iw["stable-diffusion-xl-v1-0"].aspectRatios,a=E(e),{width:l,height:c}=(null==o?void 0:o[a])||d.vr,u={...i.loadImageParams,options:{...i.loadImageParams.options,width:l,height:c}};e.attrs=(0,g.j6)(n,{loadImageParams:u})})},E=e=>{var t;let n=e.parent;if(!(null==n?void 0:n.attrs))return"square";if("smartLayoutCell"===e.type&&"imagesText"===n.attrs.variantKey)return"landscape";if("cardAccentLayoutItem"===e.type){let e=n.attrs.layout;if("left"===e||"right"===e)return"portrait";if("top"===e)return"landscape"}return"layoutCell"===n.type&&(null===(t=n.content)||void 0===t?void 0:t[0])===e?"portrait":"landscape"},N=async(e,t,n)=>{let i=[];(0,y.N)(e,async e=>{if("text"===e.type)return;let r=t.nodeFromJSON({type:e.type,attrs:e.attrs}),o=(0,g.XU)(r);if(!o)return;let{loadImageStatus:a,loadImageId:l,loadImageParams:s}=o;if("queued"!==a||!s||!l)return;let d=(0,j.B)({loadImageId:l,loadImageParams:s,context:n}).then(t=>{e.attrs=(0,g.j6)(r,t)});i.push(d)}),await Promise.all(i)},M=e=>{var t,n,i,r;let o=e.content.find(e=>"cardAccentLayoutItem"===e.type);if(!o)return;let a=o.attrs.background;if(!a)return;let l=null==a?void 0:null===(n=a.image)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.average_color,s=l&&(0,v.DP)(l);"behind"===e.attrs.layout&&(s||.5>C(e.attrs.id))&&(null!==(r=(i=e.attrs).container)&&void 0!==r||(i.container={}),e.attrs.container.background={type:f.E.COLOR,color:{hex:"#000000"}});let d=e.content.find(e=>"cardLayoutItem"===e.type);if(!d)return;let c=d.content.filter(e=>"paragraph"!==e.type||e.content);try{a.mask={effect:0===c.length?"none":"faded"}}catch(e){console.error("[caught] [fixBehindBackgroundMask]",e,"with accentBackground:",a)}},_=(e,t)=>{var n,i;let r;let{cardIndex:a,docFormatKey:l,theme:s,cardLayout:d}=t,c=h.C2.generate(),u=e.filter(e=>{var t,n;return"image"===e.type&&((null===(t=e.attrs)||void 0===t?void 0:t.src)||(null===(n=e.attrs)||void 0===n?void 0:n.loadImageStatus)==="queued")})||[],p=t.preserveLayouts||t.wordCount&&t.wordCount>120||e.some(t=>{var n;return A.includes(t.type)||"smartLayout"===t.type&&(null===(n=t.attrs)||void 0===n?void 0:n.variantKey)&&I.includes(t.attrs.variantKey)||"smartLayout"===t.type&&t.content&&t.content.length>4||e.length>6});if(u.length>0&&"blank"!==d){let t=u[0];r={type:f.E.IMAGE,image:t.attrs,source:t.attrs.source},o()(e,t)}else s&&(r=P(s,c));0===a&&"webpage"!==l&&e.push({type:"contributors"}),e=e.flatMap(e=>O(e,c));let m={};"deck"===l?m=R({cardIndex:a,cardId:c,preventRandomCardLayouts:p,cardLayout:d}):"document"===l?m=H({cardIndex:a,cardId:c,preventRandomCardLayouts:p,cardLayout:d}):"webpage"===l&&(m=T({cardIndex:a,cardId:c,accentBackground:r,preventRandomCardLayouts:p,cardLayout:d,theme:s}));let g={container:{},layout:d||"blank",id:c,...m},x="blank"!==g.layout&&r?{type:"cardAccentLayoutItem",attrs:{itemId:"accent",background:r,fitType:(null===(n=r.image)||void 0===n?void 0:n.source)==="image.web"?"fit":"fill"}}:null;if(x||(g.layout="blank"),"left"===g.layout||"right"===g.layout){let t=!1;e.forEach(e=>{if("smartLayout"===e.type&&e.attrs){let n=e.attrs;t=!0,n.options.orientation="vertical",n.options.twoSided=!1,n.options.cellSize="xl"}}),t&&(null==x?void 0:null===(i=x.attrs.background)||void 0===i?void 0:i.source)==="accent.theme"&&(g.layoutTemplateColumns="left"===g.layout?"25% 75%":"75% 25%")}let v={type:"cardLayoutItem",attrs:{itemId:"body"},content:e};return{type:"card",attrs:g,content:x?[x,v]:[v]}},T=e=>{let{cardIndex:t,cardId:n,accentBackground:i,preventRandomCardLayouts:r,theme:o,cardLayout:a}=e,l={},s=o?(0,c.i4)(o):[];if(a)l.layout=a;else if(0===t)l.layout=k(["behind","right"],n);else if(.8>C(n)){if(l.layout=r?"blank":k(["left","right","behind","blank","blank"],n),r&&"blank"===l.layout&&s.length&&.25>C(n)){let e=(0,c.H_)(k(s,n));l.container={background:{type:f.E.COLOR,color:{hex:e}}}}}else{let e=(0,c.H_)(k(s,n));l.cardSize="contained",l.background=k([i,{type:f.E.COLOR,color:{hex:e}}],n),l.layout="blank"}return l},R=e=>{let{cardIndex:t,cardId:n,preventRandomCardLayouts:i,cardLayout:r}=e,o={};return r?o.layout=r:0!==t||i?i?o.layout="blank":o.layout=k(["left","left","right","right","top"],n):o.layout=k(["left","right"],n),o},H=e=>{let{cardIndex:t,preventRandomCardLayouts:n,cardId:i,cardLayout:r}=e,o={};return r?o.layout=r:0===t?(o.cardSize="full",o.layout="behind"):n?o.layout="blank":o.layout=k(["blank","blank","blank","right","left"],i),o},P=(e,t)=>{let n=k(e.config.accentBackgrounds||[],t);if(n)return{...n,source:"accent.theme"}},O=(e,t)=>{var n,i;if("smartLayout"!==e.type||!e.attrs||!e.content)return e;let r=e.attrs.variantKey;if("bullets"===r&&1===e.content.length&&(null===(n=e.content[0].content)||void 0===n?void 0:n.some(e=>"bullet"===e.type)))return e.content[0].content;if("numbers"===r){let n=null===(i=e.content)||void 0===i?void 0:i.map(e=>{var t;return null===(t=e.attrs)||void 0===t?void 0:t.label});(null==n?void 0:n.every(e=>e.endsWith("%")))&&(e.attrs.variantKey=k(["barStats","circleStats"],t))}return e.content.length>4&&(e.attrs.options.orientation="vertical"),e}},21086:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});let i="ai-parsed-attrs"},75173:function(e,t,n){"use strict";n.d(t,{B:function(){return c},Z:function(){return d}});var i=n(41019),r=n(85418),o=n(71121),a=n(9355),l=n(45989),s=n(68527);let d=e=>{let{query:t,provider:n,license:i,model:r,stylePreset:a,stylePrompt:l}=e;return t?("aiGenerated"!==n&&(t=t.split(", ")[0]),{loadImageParams:{provider:n,query:t,options:"aiGenerated"===n?{model:r,stylePreset:a,stylePrompt:l}:{license:i}},loadImageStatus:"queued",loadImageId:(0,s.G)(),source:o.Q[n]}):{loadImageStatus:"error"}},c=async e=>{let{loadImageId:t,loadImageParams:n,context:s,markUsed:d=!0}=e,{provider:c,query:u,options:p}=n,{interactionId:h,...m}=s;try{if("aiGenerated"===c){let e={...p,interactionId:h||(0,i.nZ)(),steps:30,...m,prompt:u,count:1},n=await (0,r.NV)().generateImage(t,e);if(!n[0])return{loadImageStatus:"error"};return{...n[0].attrs,tempUrl:null,loadImageStatus:"done",uploadStatus:a.D.Queued}}{let e=await (0,r.NV)().findImage({query:u,provider:n.provider,options:n.options,loadImageId:t},d);if(!e)return{query:u,source:o.Q[c],loadImageStatus:"error"};return{...(0,l.C)(e,u,c),loadImageStatus:"done",uploadStatus:a.D.Queued}}}catch(e){return console.error("[AIStream] An error occurred while fetching image: ".concat(e.message),e.stack),{loadImageStatus:"error"}}}},13312:function(e,t,n){"use strict";n.d(t,{JZ:function(){return p},eM:function(){return m},g1:function(){return u},tf:function(){return h}});var i=n(37243),r=n(69274),o=n(25968),a=n(9355),l=n(54317),s=n(75325),d=n(75173);let c=async e=>{let{editor:t,chain:n,node:i,imageAttrs:r,pos:l}=e;n.updateAttributesAtPos(l,(0,s.j6)(i,{uploadStatus:a.D.Uploading}));let{tempUrl:d,src:c}=r;(0,o.WY)(c,t.storage.mediaUpload.orgId,{onUploadComplete:e=>{(0,s.Ns)(t,d,e)},onUploadFailed:e=>{(0,s.f8)(t,d,e,!0)}})},u=async e=>{let{cardId:t,editor:n}=e;console.debug("[AIStream uploadAIImages] for cardId: ",t);let r=n.chain(),o=(0,i.N2)(n.state.doc,e=>(0,l.KH)(e)&&e.attrs.id===t)[0];if(!o){console.error("[uploadAIImages] can not find card with id: ",t);return}let d=o.pos,u=d+o.node.nodeSize;n.state.doc.descendants((e,t)=>{if(t<d||t>u)return!0;let i=(0,s.XU)(e);return!i||(i&&i.uploadStatus===a.D.Queued&&(console.debug("[AIStream processAIImages]: ".concat(e.type.name," node with AI queries at pos ").concat(t,":"),i),c({editor:n,chain:r,node:e,imageAttrs:i,pos:t})),!0)}),r.run()},p=async e=>{let{lastCompletedCardId:t,editor:n,theme:r}=e;if(!t)return;console.debug("[AIStream refetchLazyImages] for cardId: ",t);let o=(0,i.N2)(n.state.doc,e=>(0,l.KH)(e)&&e.attrs.id===t)[0];if(!o){console.error("[refetchLazyImages] can not find card with id: ",t);return}let a=o.pos+o.node.nodeSize;m(n,n.state.doc,r,0,a)},h=async e=>{let{editor:t,loadImageId:n,newAttrs:o,node:a,theme:l,cardId:d}=e,c=(0,i.N2)(t.state.doc,e=>{let t=(0,s.XU)(e);return!!t&&t.loadImageId===n})[0];if(!c){console.error("[AIStream] could not find image in editor with loadImageId=".concat(n,"}"));return}let u="cardAccentLayoutItem"===a.type.name&&"error"===o.loadImageStatus?{...c.node.attrs,background:(0,r.Bv)(l,d)}:(0,s.j6)(c.node,o);t.chain().updateAttributesAtPos(c.pos,u).noUndo().run()},m=async(e,t,n,i,r)=>{t.descendants((t,o)=>{if(i&&o<i||r&&o>r)return;let a=(0,s.XU)(t);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:l,loadImageParams:c}=a;(0,d.B)({loadImageId:l,loadImageParams:c,context:{docId:e.gammaDocId,workspaceId:e.gammaOrgId}}).then(i=>{h({editor:e,newAttrs:i,loadImageId:l,node:t,theme:n})})})}},71030:function(e,t,n){"use strict";n.d(t,{T:function(){return l},z:function(){return p}});var i=n(21086),r=n(75173),o=n(62136),a=n(97134);let l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=new DOMParser().parseFromString(e,"text/html");d(n),t.removeImagesFromLayouts&&(s(n),u(n));let l=(0,a.n_)(),p=(0,o.F)(n,"img[searches], img[query]").map(async e=>{var n,o,a,s,d,c;if(e.getAttribute("bookmark"))return;let u=e.getAttribute("query")||e.getAttribute("searches")||"",p=null===(n=t.imageOptions)||void 0===n?void 0:n.generateStyle,h=null===(o=t.imageOptions)||void 0===o?void 0:o.stylePreset,m="icon"===e.getAttribute("type"),g="web"==e.getAttribute("provider")?"web":"aiGenerated",f=(null===(a=t.imageOptions)||void 0===a?void 0:a.provider)=="auto"?g:null===(s=t.imageOptions)||void 0===s?void 0:s.provider,x=(0,r.Z)({query:u,provider:m?"fontawesome":f||"web",license:null===(d=t.imageOptions)||void 0===d?void 0:d.license,model:null===(c=t.imageOptions)||void 0===c?void 0:c.model,stylePrompt:p,stylePreset:h}),v=t.loadImages?await (0,r.B)({loadImageId:x.loadImageId,loadImageParams:x.loadImageParams,context:{workspaceId:l}}):{};e.setAttribute(i.L,JSON.stringify({...x,...v}))});return await Promise.all(p),(0,o.F)(n,"images, icons").forEach(c),n.body.innerHTML}catch(t){return console.error("Error transforming AI HTML",t),e}},s=e=>{e.querySelectorAll(":is(boxes, timeline, table, bullets, arrows, pyramid, funnel, staircase, numbers, percentages, circles) img").forEach(e=>{e.remove()})},d=e=>{let t=e.getElementsByTagName("*");for(let e=0;e<t.length;e++){let n=t[e],i=n.style.textAlign;n.removeAttribute("style"),i&&(n.style.textAlign=i)}},c=e=>{(0,o.F)(e,"div > img:first-child").forEach(e=>{let t=e.parentElement;if(!t)return;let n=JSON.parse(e.getAttribute(i.L)||"null");n&&t.setAttribute("data-image",JSON.stringify(n));let r=e.getAttribute("bookmark");r&&t.setAttribute("image-bookmark",r);let o=e.getAttribute("src");o&&t.setAttribute("data-image",JSON.stringify({src:o,source:"image.custom"})),e.remove()})},u=e=>{e.querySelectorAll("section").forEach(e=>{if(!e.querySelector("div.body"))return;let t=e.querySelector(":scope > img:not(.accent-image)");t&&t.classList.add("accent-image")})},p=e=>{try{let t=e.getAttribute(i.L);return JSON.parse(t||"")}catch(t){return console.error("[Image] Error parsing ".concat(i.L," attrs"),e,t),!1}}},65927:function(e,t,n){"use strict";n.d(t,{o:function(){return S}});var i=n(52322),r=n(92850),o=n(26468),a=n(22226),l=n(54326),s=n(38035),d=n(2338),c=n(97217),u=n(77533),p=n(35183),h=n(97166),m=n(47443),g=n(52929),f=n(50250),x=n(75768),v=n(62614),y=n(64253),b=n(5879),w=n(2784),C=n(40346),k=n(27419),j=n(23691);let S=e=>{let{isAdminView:t=!1,isFullDoc:n,isSite:S,onClose:A,startTranslation:I}=e,[z]=(0,C.e)(),[L,E]=(0,w.useState)(z);return(0,i.jsx)(y.Wk,{isDark:!1,children:(0,i.jsxs)(r.u_,{isOpen:!0,onClose:A,children:[(0,i.jsx)(o.Z,{}),(0,i.jsxs)(a.h,{children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(s.k,{alignItems:"center",mr:8,children:S?(0,i.jsx)(b.cC,{id:"56Urwv"}):n?(0,i.jsx)(b.cC,{id:"e2vVXR",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.Yc}}):(0,i.jsx)(b.cC,{id:"DLQ7Yc"})})}),(0,i.jsx)(d.o,{}),(0,i.jsxs)(c.f,{children:[(0,i.jsx)(u.x,{mb:4,children:S?(0,i.jsx)(b.cC,{id:"dZwNdR"}):n?(0,i.jsx)(b.cC,{id:"6YnROT",values:{GAMMA_ARTIFACT_PROPER_NOUN:j.Yc}}):(0,i.jsx)(b.cC,{id:"WQFlqR"})}),(0,i.jsxs)(p.NI,{children:[(0,i.jsx)(h.l,{children:(0,i.jsx)(u.x,{fontSize:"14px",children:(0,i.jsx)(b.cC,{id:"3LIgcv"})})}),(0,i.jsx)(C.k,{buttonProps:{variant:"plain",justifyContent:"flex-start",textAlign:"left",width:"100%"},locale:L,setLocale:e=>{E((0,k.jw)(e))}})]}),t&&(0,i.jsx)(s.k,{mt:4,children:(0,i.jsxs)(m.b,{status:"warning",children:[(0,i.jsx)(g.z,{}),"You're using the translation feature as an admin in the PUBLIC_STATIC editor. Translations made here will not be persisted to the database and are intended for admin review process only."]})})]}),(0,i.jsx)(f.m,{children:(0,i.jsxs)(x.h,{children:[(0,i.jsx)(v.z,{variant:"ghost",colorScheme:"gray",onClick:A,color:t?{color:"orange.500"}:void 0,_hover:t?{bg:"orange.100"}:void 0,children:(0,i.jsx)(b.cC,{id:"dEgA5A"})}),(0,i.jsx)(v.z,{variant:"solid",bg:t?"orange.500":void 0,_hover:{bg:t?"orange.700":void 0},onClick:()=>I(L),children:(0,i.jsx)(b.cC,{id:"pi8x/S"})})]})})]})]})})}},78180:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},85336:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},67308:function(e,t,n){"use strict";n.d(t,{B:function(){return v},b:function(){return y}});var i=n(87254),r=n(9850),o=n.n(r),a=n(37164),l=n(2784),s=n(33266),d=n(15988),c=n(18755),u=n(90025),p=n(41019),h=n(71030),m=n(13364),g=n(71383),f=n(50738),x=n(68785);let v="Translate this to Spanish please",y=e=>{let{editor:t}=e,n=(0,g.TL)();return(0,l.useCallback)(async e=>{let{doc:r,cardId:a,message:l}=e;if(!t)return;let s={};r.descendants(e=>{if("card"===e.type.name){let n=e.attrs.id;if(a!==n)return!1;let i=(0,u.c)(t,e.content);return s[n]={html:i,node:e},!1}return!0});let d=Object.values(s).map(e=>{let{node:t}=e;return{cardId:a,variant:{label:i.ag._({id:"HxF6Fk"}),card:o()(t.toJSON()),id:"original"},autoselect:!0}});n((0,x.pg)(d)),Object.values(s).forEach(async e=>{let{node:i,html:r}=e,o=await b({editor:t,html:r,node:i,message:l});n((0,x.pg)([{cardId:a,variant:o,autoselect:!0}]))})},[n,t])},b=async e=>{let{html:t,node:n,message:r,editor:o}=e,l=(0,p.nZ)(),u=d.L.prepare({variables:{html:t,message:r}}),g=await (0,c.I)(u,l,{timeout:m.VH.get("aiRequestTimeouts").suggestContent}),{suggestion:x}=(0,s.$V)(g),{content:v}=(0,f.T)(await (0,h.T)(x,{loadImages:!0}),o.schema),y={...n.toJSON(),content:v.toJSON()};return{id:(0,a.x0)(5),label:i.ag._({id:"nyQWMb"}),card:y}}},40346:function(e,t,n){"use strict";n.d(t,{e:function(){return y},k:function(){return b}});var i=n(52322),r=n(10625),o=n(67046),a=n(62614),l=n(332),s=n(99058),d=n(44035),c=n(39237),u=n(42946),p=n(54933),h=n(49929),m=n(87254),g=n(2784),f=n(27419),x=n(32817),v=n(18960);let y=()=>{let e=(0,g.useMemo)(()=>{var e;let t=navigator.language.toLowerCase(),n=t.split("-")[0],i=null!==(e=f.NF.find(e=>e.key===t))&&void 0!==e?e:f.NF.find(e=>e.key===n);return null==i?void 0:i.key},[]),[t,n]=(0,x.I)(v.H.generateLanguage,null!=e?e:"en");return[(0,g.useMemo)(()=>{var e;return null!==(e=f.NF.find(e=>e.key===t))&&void 0!==e?e:f.NF[0]},[t]),n]},b=(0,g.memo)(e=>{let{locale:t,setLocale:n,buttonProps:x}=e,[v,y]=(0,g.useState)([]);(0,g.useEffect)(()=>{y(e=>{if(f.NF.find(e=>e.key===t.key))return e;let n=[...e];return n.find(e=>e.key===t.key)||n.push(t),n})},[t.key]);let b=(0,g.useMemo)(()=>[...v,...f.h_],[v]);return(0,i.jsxs)(r.v,{children:[(0,i.jsx)(o.j,{as:a.z,size:"sm",boxShadow:"sm",variant:"ghost",rightIcon:(0,i.jsx)(h.G,{size:"xs",icon:u.ptq}),leftIcon:(0,i.jsx)(h.G,{size:"xs",icon:p.BCn}),minW:"150px",...x,children:t.displayName}),(0,i.jsx)(l.h,{children:(0,i.jsx)(s.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",zIndex:"tooltip",children:(0,i.jsx)(d._,{value:t.key,title:m.ag._({id:"vXIe7J"}),type:"radio",onChange:e=>{n(e)},children:b.map(e=>(0,i.jsx)(c.i,{value:e.key,children:e.displayName},e.key))})})})]})});b.displayName="AILocalePicker"},27419:function(e,t,n){"use strict";n.d(t,{NF:function(){return l},h_:function(){return p},jw:function(){return d}});var i=n(829),r=n.n(i),o=n(32132),a=n(78316);let l=[{key:"en",englishName:"English (US)",displayName:"English (US)"},{key:"en-gb",englishName:"English (UK)",displayName:"English (UK)"},{key:"en-in",englishName:"English (India)",displayName:"English (India)"},{key:"es",englishName:"Spanish",displayName:"Espa\xf1ol"},{key:"es-es",englishName:"Spanish (Spain)",displayName:"Espa\xf1ol (Espa\xf1a)"},{key:"es-mx",englishName:"Spanish (Mexico)",displayName:"Espa\xf1ol (M\xe9xico)"},{key:"es-419",englishName:"Spanish (Latin America)",displayName:"Espa\xf1ol (Latinoam\xe9rica)"},{key:"ca",englishName:"Catalan",displayName:"Catal\xe0"},{key:"fr",englishName:"French",displayName:"Fran\xe7ais"},{key:"zh-cn",englishName:"Simplified Chinese",displayName:"简体中文"},{key:"zh-tw",englishName:"Traditional Chinese",displayName:"繁體中文"},{key:"ko",englishName:"Korean",displayName:"한국어"},{key:"ja",englishName:"Japanese (です/ます style)",displayName:"日本語 (です/ます体)"},{key:"ja-da",englishName:"Japanese (だ/である style)",displayName:"日本語 (だ/である体)"},{key:"pt-br",englishName:"Portuguese (Brazil)",displayName:"Portugu\xeas (Brasil)"},{key:"pt-pt",englishName:"Portuguese (Portugal)",displayName:"Portugu\xeas (Portugal)"},{key:"de",englishName:"German",displayName:"Deutsch"},{key:"it",englishName:"Italian",displayName:"Italiano"},{key:"ru",englishName:"Russian",displayName:"Русский"},{key:"pl",englishName:"Polish",displayName:"Polski"},{key:"uk",englishName:"Ukrainian",displayName:"Українська"},{key:"ro",englishName:"Romanian",displayName:"Rom\xe2nă"},{key:"hu",englishName:"Hungarian",displayName:"Magyar"},{key:"cs",englishName:"Czech",displayName:"Čeština"},{key:"el",englishName:"Greek",displayName:"Ελληνικά"},{key:"tr",englishName:"Turkish",displayName:"T\xfcrk\xe7e"},{key:"ar",englishName:"Arabic",displayName:"العربية"},{key:"ar-sa",englishName:"Arabic (Saudi Arabia)",displayName:"العربية (السعودية)"},{key:"he",englishName:"Hebrew",displayName:"עברית"},{key:"fa",englishName:"Persian",displayName:"فارسی"},{key:"nl",englishName:"Dutch",displayName:"Nederlands"},{key:"sv",englishName:"Swedish",displayName:"Svenska"},{key:"da",englishName:"Danish",displayName:"Dansk"},{key:"nb",englishName:"Norwegian",displayName:"Norsk"},{key:"fi",englishName:"Finnish",displayName:"Suomi"},{key:"id",englishName:"Indonesian",displayName:"Bahasa Indonesia"},{key:"vi",englishName:"Vietnamese",displayName:"Tiếng Việt"},{key:"hi",englishName:"Hindi",displayName:"हिन्दी"},{key:"gu",englishName:"Gujarati",displayName:"ગુજરાતી"},{key:"mr",englishName:"Marathi",displayName:"मराठी"},{key:"te",englishName:"Telugu",displayName:"తెలుగు"},{key:"bn",englishName:"Bengali",displayName:"বাংলা"},{key:"ta",englishName:"Tamil",displayName:"தமிழ்"},{key:"ur",englishName:"Urdu",displayName:"اردو"},{key:"kn",englishName:"Kannada",displayName:"ಕನ್ನಡ"},{key:"ml",englishName:"Malayalam",displayName:"മലയാളം"},{key:"th",englishName:"Thai",displayName:"ภาษาไทย"},{key:"sr",englishName:"Serbian",displayName:"Српски"},{key:"hr",englishName:"Croatian",displayName:"Hrvatski"},{key:"sq",englishName:"Albanian",displayName:"Shqip"},{key:"bg",englishName:"Bulgarian",displayName:"Български"},{key:"sl",englishName:"Slovenian",displayName:"Slovenščina"},{key:"bs",englishName:"Bosnian",displayName:"Bosanski"},{key:"mk",englishName:"Macedonian",displayName:"Македонски"},{key:"sw",englishName:"Swahili",displayName:"Kiswahili"},{key:"ha",englishName:"Hausa",displayName:"Hausa"},{key:"yo",englishName:"Yoruba",displayName:"Yor\xf9b\xe1"},{key:"tl",englishName:"Tagalog",displayName:"Tagalog"},{key:"ms",englishName:"Malay",displayName:"Bahasa Melayu"},{key:"kk",englishName:"Kazakh",displayName:"Қазақ тілі"},{key:"uz",englishName:"Uzbek",displayName:"O'zbek tili"},{key:"af",englishName:"Afrikaans",displayName:"Afrikaans"},{key:"lv",englishName:"Latvian",displayName:"Latviešu"},{key:"lt",englishName:"Lithuanian",displayName:"Lietuvių"},{key:"et",englishName:"Estonian",displayName:"Eesti"},{key:"is",englishName:"Icelandic",displayName:"\xcdslenska"},{key:"cy",englishName:"Welsh",displayName:"Cymraeg"}],s=e=>{let t=null==e?void 0:e.toLowerCase();return l.find(e=>e.key.toLowerCase()===t)||null},d=e=>{let t=s(e);if(t)return t;let n=o.MD[e],i=n&&s(n);if(i)return i;let[r]=e?e.toLowerCase().split("-"):[];return r&&s(r)||u(e)},c={key:"en",englishName:"English (US)",displayName:"English (US)"},u=e=>{let t=(0,a.K)();try{let n=new Intl.DisplayNames([t],{type:"language"}),i=new Intl.DisplayNames(["en"],{type:"language"}).of(e),r=n.of(e);if(!i||!r)return c;return{key:e.toLowerCase(),englishName:i,displayName:r}}catch(e){return c}},p=r()(l,e=>e.displayName)},16618:function(e,t,n){"use strict";n.d(t,{A2:function(){return S},$m:function(){return j.$m},DD:function(){return N}});var i=n(52322),r=n(70065),o=n(17993),a=n(29117),l=n(74409),s=n(77533),d=n(43297),c=n(62614),u=n(11082),p=n(28535),h=n(97143),m=n(42946),g=n(54933),f=n(49929),x=n(5879),v=n(87254),y=n(7523),b=n(65096),w=n(98046),C=n(23691),k=n(97134),j=n(72336);let S=e=>{var t,n,p;let{accessLink:S,doc:I,refetchFn:z,...L}=e,E=(0,r.p)(),{refetch:N}=(0,k.SE)(),M=z||N,_=e=>{let{title:t,description:n}=w.T[e]||{title:(0,i.jsx)(x.cC,{id:"U7nnQt"}),description:e};E.isActive(e)||E({title:t,description:n,position:"top",id:e,status:"error",isClosable:!0,duration:null})},T=null!==(n=null==S?void 0:S.permission)&&void 0!==n?n:"view",R={manage:(0,i.jsx)(x.cC,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc}}),edit:(0,i.jsx)(x.cC,{id:"C11Xkl",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc}}),comment:(0,i.jsx)(x.cC,{id:"gu6c+c",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc}}),view:(0,i.jsx)(x.cC,{id:"LoR9yH",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc}})}[T],H={manage:(0,i.jsx)(x.cC,{id:"MEeXaP"}),edit:(0,i.jsx)(x.cC,{id:"MEeXaP"}),comment:(0,i.jsx)(x.cC,{id:"dx3Kfr"}),view:(0,i.jsx)(x.cC,{id:"R2ZEYO"})}[T],P={manage:{icon:g.TzT,colorScheme:"cyan"},edit:{icon:g.TzT,colorScheme:"cyan"},comment:{icon:g.Mzg,colorScheme:"yellow"},view:{icon:g.Pk,colorScheme:"green"}},O=null!==(p=null==I?void 0:null===(t=I.editors)||void 0===t?void 0:t.map(e=>e.user.displayName))&&void 0!==p?p:[],D=(()=>{switch(T){case"manage":case"edit":switch(O.length){case 0:return(0,i.jsx)(x.cC,{id:"bspMVx",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.ag._({id:"JGFG6q"})}),1:(0,i.jsx)("strong",{})}});case 1:return(0,i.jsx)(x.cC,{id:"w49thS",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc,0:O[0]},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.ag._({id:"JGFG6q"})}),1:(0,i.jsx)("strong",{})}});case 2:return(0,i.jsx)(x.cC,{id:"Tz4Wi7",values:{0:O[0],1:O[1]},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.ag._({id:"7Lrnj6"})}),1:(0,i.jsx)("strong",{}),2:(0,i.jsx)("strong",{})}});default:return(0,i.jsx)(x.cC,{id:"VhIJ/j",values:{0:O[0],1:O.length-1},components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.ag._({id:"7Lrnj6"})}),1:(0,i.jsx)("strong",{})}})}case"comment":return(0,i.jsx)(x.cC,{id:"vIOI7i",components:{0:(0,i.jsx)("span",{role:"img","aria-label":v.ag._({id:"OoNfwA"})}),1:(0,i.jsx)("strong",{}),2:(0,i.jsx)("strong",{})}});default:return(0,i.jsx)(x.cC,{id:"k/HcwJ",values:{GAMMA_ARTIFACT_PROPER_NOUN:C.Yc},components:{0:(0,i.jsx)("strong",{})}})}})(),W=async()=>{M&&(await M(),(0,j.bC)()),E.isActive("login-complete")||E({title:(0,i.jsx)(x.cC,{id:"yFvQAN"}),description:R,position:"top",id:"login-complete",status:"success",isClosable:!0,duration:5e3})};return(0,i.jsxs)(o.g,{align:"stretch",...L,children:[(0,i.jsxs)(a.U,{spacing:4,mr:6,children:[(0,i.jsx)(A,{icon:(0,i.jsx)(f.G,{icon:P[T].icon}),colorScheme:P[T].colorScheme}),(0,i.jsx)(l.X,{size:"sm",children:H})]}),(0,i.jsx)(s.x,{fontSize:"sm",children:D}),(0,i.jsxs)(d.K,{children:[(0,i.jsx)(c.z,{variant:"solid",leftIcon:(0,i.jsx)(f.G,{icon:h.xYR}),size:"md",onClick:()=>{(0,b.DW)({type:b._M.DOC_ACCESS_LINK,params:{docId:null==I?void 0:I.id,shareToken:S.token},errorCallback:_,doneCallback:W})},children:(0,i.jsx)(x.cC,{id:"oZyG4C"})}),(0,i.jsx)(c.z,{variant:"plain",as:u.r,target:"_blank",leftIcon:(0,i.jsx)(f.G,{icon:m.FU$}),href:"/signup",children:(0,i.jsx)(x.cC,{id:"yrlCvg"})}),(0,i.jsx)(s.x,{fontSize:"xs",color:"gray.600",children:(0,i.jsx)(x.cC,{id:"oXChp6",values:{GAMMA_PROPER_NOUN:C.N6},components:{0:(0,i.jsx)(u.r,{href:y.B,isExternal:!0,fontWeight:"bold"}),1:(0,i.jsx)(u.r,{href:y.h,isExternal:!0,fontWeight:"bold"})}})})]})]})},A=e=>{let{icon:t,colorScheme:n}=e;return(0,i.jsxs)(p.Cd,{size:10,bg:"linear-gradient(to bottom, var(--chakra-colors-".concat(n,"-200), var(--chakra-colors-").concat(n,"-300))"),position:"relative",children:[(0,i.jsx)(p.xu,{color:"".concat(n,".600"),display:"block",mt:"0.5",textAlign:"center",children:t}),(0,i.jsx)(p.Cd,{size:5,position:"absolute",bottom:-1,right:-1,color:"".concat(n,".800"),bg:"".concat(n,".100"),boxShadow:"base",fontSize:"xs",children:(0,i.jsx)(f.G,{icon:g.r8p})})]})};var I=n(81672),z=n(2784),L=n(36533);let E=e=>{let{onClose:t,doc:n,...r}=e;return(0,i.jsxs)(p.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",maxWidth:"calc(".concat(L.pn,"px - 1rem)"),display:"column",p:4,position:"relative",children:[(0,i.jsx)(I.P,{size:"sm",onClick:t,position:"absolute",top:2,right:2}),(0,i.jsx)(S,{...r,doc:n,spacing:4})]})},N=(e,t)=>{let{isUserLoading:n,user:i,refetch:o}=(0,k.SE)(),a=(0,j.$m)(e,i),l=(0,r.p)(),s=(0,z.useRef)();(0,z.useEffect)(()=>{let r=t&&!i&&!n&&e&&a&&"view"!==a.permission;s.current&&l.close(s.current),r&&(s.current=l({position:"bottom-left",render:t=>{let{onClose:n}=t;return E({refetchFn:o,doc:e,accessLink:a,onClose:n})},isClosable:!0,duration:null}))},[o,i,n,a,l,e,t])}},72336:function(e,t,n){"use strict";n.d(t,{$m:function(){return u},bC:function(){return d},ts:function(){return c}});var i=n(2784),r=n(95405),o=n(69971),a=n(36660),l=n(97134),s=n(40382);let d=()=>{if(""===r.v.SHARE_TOKEN)return;let{searchParams:e}=new URL(window.location.href);e.delete("token");let t=Object.fromEntries(e.entries());(0,a.lO)({query:t})},c=e=>{let{user:t}=(0,l.SE)(),[n,{error:a}]=(0,o.E3j)();(0,s.GJ)("[useAccessLinkCollaborator]: Error updating collaborator.",a),(0,i.useEffect)(()=>{var i;if(!t||!e)return;let a=null===(i=e.accessLinks)||void 0===i?void 0:i.find(e=>e.token===r.v.SHARE_TOKEN);if(!a)return;let s=l.gj.createForUser({...t,__typename:"User"});a.permission&&a.permission!==o.y3$.View&&s.cannot(a.permission,e)?n({variables:{docId:e.id}}).then(()=>{d(),(0,r.M)("SHARE_TOKEN","")}).catch(e=>console.error("[useAccessLinkCollaborator]: Error adding collaborator.",e)):d()},[n,e,t])},u=(e,t)=>{var n;if(!e||t)return null;let i=null==e?void 0:null===(n=e.accessLinks)||void 0===n?void 0:n.find(e=>e.token===r.v.SHARE_TOKEN);return i&&i.permission?i:null}},65096:function(e,t,n){"use strict";n.d(t,{DW:function(){return g},Mj:function(){return o},_M:function(){return a},r9:function(){return h}});var i,r,o,a,l=n(95405),s=n(64748),d=n(41638);let c=null,u=null;(i=o||(o={})).LOGIN_COMPLETE="loginComplete",i.LOGIN_FAILURE="loginFailure",i.SIGNUP_COMPLETE="signupComplete";let p=e=>{var t,n,i,r;let{event:o,errorCallback:a,redirectTo:l,doneCallback:d}=e,{data:c}=o;if("loginComplete"===c.type&&(0,s.O)({data:null==c?void 0:null===(t=c.payload)||void 0===t?void 0:t.data,redirectTo:l,doneCallback:d,shouldClientSideRedirect:!0,googleMethod:"POPUP"}),"signupComplete"===c.type&&(0,s.k)({data:null==c?void 0:null===(n=c.payload)||void 0===n?void 0:n.data,redirectTo:l,doneCallback:d,shouldClientSideRedirect:!0,googleMethod:"POPUP"}),"loginFailure"===c.type){let e=null==o?void 0:null===(r=o.data)||void 0===r?void 0:null===(i=r.payload)||void 0===i?void 0:i.code;if(!a){console.error("No error callback defined");return}if(!e){console.error("No code defined");return}a(e)}};(r=a||(a={})).ACCEPT_DOC_INVITATION="accept-doc-invitation",r.ACCEPT_WORKSPACE_INVITATION="accept-workspace-invitation",r.DOC_ACCESS_LINK="doc-access-link",r.JOIN_WITH_CODE="join-with-code",r.DEFAULT_LOGIN="login",r.SIGNUP="signup";let h={"accept-doc-invitation":"docInvitation","accept-workspace-invitation":"workspaceInvitation","doc-access-link":"docAccessLink","join-with-code":"joinLink",login:"signup",signup:"signup"},m=(e,t)=>{switch(e){case"join-with-code":{let{workspaceId:e,inviteCode:n,referredByUserId:i}=t,r=new URL("".concat(l.v.API_HOST||"https://gamma.app","/organizations/").concat(e,"/join/").concat(n));return i&&r.searchParams.set("referredByUserId",i),r.toString()}case"accept-doc-invitation":{let{docId:e,email:n,inviteCode:i}=t;return"".concat(l.v.API_HOST,"/invitations/docs/").concat(e,"/?inviteCode=").concat(i,"&email=").concat(n)}case"accept-workspace-invitation":{let{workspaceId:e,email:n,inviteCode:i}=t;return"".concat(l.v.API_HOST,"/invitations/workspaces/").concat(e,"?inviteCode=").concat(i,"&email=").concat(n)}case"doc-access-link":{let{docId:e,shareToken:n}=t;return"".concat(l.v.API_HOST,"/access-links/docs/").concat(e,"/?token=").concat(n)}case"signup":{let{inviteCode:e,referredByUserId:n,partnerStackClickId:i,partnerStackPartnerId:r}=t,o=new URL("".concat(l.v.API_HOST||"https://gamma.app","/signup"));return e&&o.searchParams.set("inviteCode",e),n&&o.searchParams.set("referredByUserId",n),i&&o.searchParams.set("partnerStackClickId",i),r&&o.searchParams.set("partnerStackPartnerId",r),o.toString()}default:return"".concat(l.v.API_HOST,"/login")}},g=e=>{let{type:t,params:n,errorCallback:i,redirectTo:r,doneCallback:o}=e,a=m(t,n),l="toolbar=no, menubar=no, width=600, height=700, top=100, left=100";null===c||c.closed?c=window.open(a,t,l):u!==a?null!==(c=window.open(a,t,l))&&c.focus():c.focus(),(0,d.a_)().addEventListener("message",e=>{p({event:e,errorCallback:i,redirectTo:r,doneCallback:o})}),u=a}},61707:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(52322),r=n(38035);n(2784);let o={allowPopups:!1,noSandbox:!1,preventScroll:void 0},a=e=>{let{initialUrl:t,frameRef:n,iframeOptions:a,backgroundColor:l="white",...s}=e,{allowPopups:d,preventScroll:c,noSandbox:u}=a||o;return(0,i.jsx)(r.k,{w:"100%",h:"100%",direction:"column",background:l,...s,children:(0,i.jsx)("iframe",{ref:n,src:t,frameBorder:"0",width:"100%",height:"100%",allow:"encrypted-media; camera; microphone",allowFullScreen:!0,title:"Embedded app",sandbox:u?void 0:"allow-forms allow-scripts allow-same-origin allow-modals allow-pointer-lock ".concat(d?"allow-popups":""),scrolling:c?"no":void 0,style:{flex:1}})})}},29342:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},86745:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(54073),r=n.n(i),o=n(2784);let a=e=>{let[t,n]=(0,o.useState)(null);return(0,o.useEffect)(()=>{if(!e)return;let t=e=>{let{editor:t}=e;n(t.state.selection)};t({editor:e});let i=r()(t,200,{leading:!0});return e.on("selectionUpdate",i),()=>{e.off("selectionUpdate",i)}},[e]),{selection:t}}},96154:function(e,t,n){"use strict";n.d(t,{$:function(){return d}});var i=n(6238),r=n.n(i),o=n(98621),a=n.n(o),l=n(23491),s=n(59557);let d=r()(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"complement",{matchBrightness:i=!1,contrastColor:r,minContrast:o=3}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=Array.from(new Set(t));if(0===d.length)return new Map;if(1===d.length){let t=a()(e);return r&&(0,l.ou)(t,r,o),new Map([[d[0],t.toHex8String()]])}return new Map([...(()=>{switch(n){case"monochrome":{let t=a()(e),n={min:15,max:95};if(r){let e=(e,t,n)=>{let i=c(e,t);return(0,l.ou)(i,r,o,n),Math.round(100*i.toHsl().l)};n.min=e(t,n.min,"lighten"),n.max=e(t,n.max,"darken")}let s=(n.max-n.min)/d.length,u=t.getBrightness();return new Map(d.map((e,r)=>{let o=c(t,n.min+s*r);return i&&(0,l.Ol)(o,u),[e,o]}))}case"spin":{let t=a()(e),n=t.getBrightness(),r=Math.ceil((d.length-1)/2),o=360/d.length<22?360/d.length:22,c=(0,s.R8)(d.map((e,a)=>{let s=0;a<r&&(s=-((r-a)*o*1)),a>r&&(s=(a-r)*o);let d=t.clone().spin(s);return i&&(0,l.Ol)(d,n),d}),d.length%2==0?r:r+1);return new Map(d.map((e,t)=>[e,c[t]]))}default:{let t=a()(e),r=180/(d.length-1),o=t.getBrightness();return new Map(d.map((e,a)=>{let s=t.clone().spin(r*a*("complement2"===n?-1:1));return i&&(0,l.Ol)(s,o),[e,s]}))}}})().entries()].map(e=>{let[t,n]=e;return[t,n.toHex8String()]}))});function c(e,t){let n=e.toHsl();return n.l=t,a()(n)}},46148:function(e,t,n){"use strict";n.d(t,{CK:function(){return h},bT:function(){return p},cb:function(){return u},jK:function(){return c},zn:function(){return d}});var i=n(52322),r=n(76801),o=n(42946),a=n(54933),l=n(49929),s=n(87254);let d=n(87103).cx?0:.25,c={top:0,right:0,bottom:0,left:0},u={monochrome:{label:()=>s.ag._({id:"VvdC4u"})},spin:{label:()=>s.ag._({id:"0LFzg9"})},complement:{label:()=>s.ag._({id:"2HDXEj"})},complement2:{label:()=>s.ag._({id:"XTxqsS"})}},p="monochrome",h=Object.freeze({pie:{icon:(0,i.jsx)(l.G,{icon:o.OS1}),selectedIcon:(0,i.jsx)(l.G,{icon:a.OS1}),label:()=>s.ag._({id:"RT6aCN"})},donut:{icon:(0,i.jsxs)(r.m.span,{className:"fa-layers fa-fw",children:[(0,i.jsx)(l.G,{icon:o.YhY}),(0,i.jsx)(l.G,{icon:o.nZ9})]}),selectedIcon:(0,i.jsxs)(r.m.span,{className:"fa-layers fa-fw",children:[(0,i.jsx)(l.G,{icon:a.YhY}),(0,i.jsx)(l.G,{icon:o.nZ9})]}),label:()=>s.ag._({id:"Cn5cfQ"})},line:{icon:(0,i.jsx)(l.G,{icon:o.Stf}),selectedIcon:(0,i.jsx)(l.G,{icon:a.Stf}),label:()=>s.ag._({id:"MZW+2G"})},bar:{icon:(0,i.jsx)(l.G,{icon:o.Wpq}),selectedIcon:(0,i.jsx)(l.G,{icon:a.Wpq}),label:()=>s.ag._({id:"EzalDc"})},"horizontal-bar":{icon:(0,i.jsx)(l.G,{icon:o.AGo}),selectedIcon:(0,i.jsx)(l.G,{icon:a.AGo}),label:()=>s.ag._({id:"CeeoKy"})}})},49769:function(e,t,n){"use strict";n.d(t,{Hc:function(){return l},VP:function(){return o},Yr:function(){return r},oV:function(){return a}});var i=n(37164);function r(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!==(t=n.id)&&void 0!==t?t:(0,i.x0)(),o="auto"===n.dismissable?new Date(Date.now()+5e3):n.dismissable;return{type:"addFeedback",payload:{id:r,message:e,severity:n.severity||"info",dismissable:o}}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{type:"removeFeedback",payload:t}}function a(e){return{type:"openContextMenu",payload:{position:e}}}function l(){return{type:"closeContextMenu",payload:void 0}}},52725:function(e,t,n){"use strict";n.d(t,{_M:function(){return s},Ai:function(){return c}});var i=n(52322),r=n(2784),o=n(68951);let a=(e,t)=>{switch(t.type){case"addFeedback":{let n=e.feedback||[];if(n.find(e=>{let{id:n}=e;return n===t.payload.id}))return{...e,feedback:[...n]};return{...e,feedback:[...n,t.payload]}}case"clearFeedback":{let{feedback:t,...n}=e;return{...n}}case"removeFeedback":{let n=e.feedback||[];if(!t.payload.length)return{...e};return{...e,feedback:n.filter(e=>!t.payload.includes(e.id))}}case"reportActiveColumnIds":return{...e,activeColumns:t.payload?[...t.payload]:void 0};case"openContextMenu":return{...e,contextMenu:{isOpen:!0,position:t.payload.position}};case"closeContextMenu":return{...e,contextMenu:{isOpen:!1,position:{x:-1e3,y:-1e3}}};case"setGridFunctions":return{...e,gridFunctions:t.payload};default:(0,o.v)(t)}return e},l={_inContext:!1},s=(0,r.createContext)({state:l,dispatch:()=>{}}),d=e=>{let{children:t}=e,[n,o]=(0,r.useReducer)(a,{...l,_inContext:!0});return(0,i.jsx)(s.Provider,{value:{state:n,dispatch:o},children:t})},c=e=>t=>(0,i.jsx)(d,{children:(0,i.jsx)(e,{...t})})},48493:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var i=n(79972),r=n(59323),o=n(549);class a{get type(){return this._type}updateType(e,t){let{type:n,format:i="raw"}=t;if(n===this._type&&this.format===i)return;let r=this.getCells(e),a=r.map(e=>e.textValue),l=this.format;this.format=i,this._type=n,r.forEach((t,n)=>{let i=e.getRow(t.position.row);if(!i)throw Error("Row=".concat(i," not found"));let r=e.setEmptyCell(i,this);if((0,o.Vd)(t)&&(0,o.Vd)(r)){r.textValue=t.textValue;return}if((0,o.Vd)(t)&&(0,o.X8)(r)&&"raw"===l&&(0,o.m2)(t.data)){r.textValue="".concat(t.data);return}r.textValue=a[n]})}getCellClass(){switch(this.type){case"label":return r.m;case"data":return i.O}}getCells(e){return e.rows.map(t=>e.getCellOrThrow({row:t.id,column:this.id}))}isEmpty(e){for(let t of e.rows)if(!e.getCellOrThrow({column:this.id,row:t.id}).isEmpty)return!1;return!0}constructor(e){this.fixedType=!1;let{id:t,type:n,label:i,format:r,fixedType:a}=(0,o.kC)(e);this.id=t,this._type=n,this.label=i.replaceAll(/\r?\n?/g,""),this.format=r||"raw",this.fixedType=a||!1}}},14795:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var i=n(27046),r=n(48493),o=n(74023),a=n(48148),l=n(549);class s{get columns(){return this._columns}get rows(){return this._rows}get cells(){return this._rows.flatMap(e=>this.columns.map(t=>this._cells[e.id][t.id]))}getColumn(e){return this.columnsIndex.get(e)}getRow(e){return this.rowsIndex.get(e)}getLines(e){return this["".concat(e,"s")]}getCell(e){var t;let{row:n,column:i}=e;return null===(t=this._cells[n])||void 0===t?void 0:t[i]}getCellAtIndex(e){let{row:t,column:n}=e;if(t>=this._rows.length||n>=this._columns.length)throw Error("Index out of bounds");let i=this._rows[t].id,r=this._columns[n].id;return this.getCellOrThrow({row:i,column:r})}isEmpty(){for(let e of this.columns)if(!e.isEmpty(this))return!1;return!0}canAddColumn(){return this.columns.length<a.Z}canAddRow(){return this.rows.length<a.F}findCellIndex(e){let{column:t,row:n}=e instanceof i.u?e.position:e,r=this._columns.findIndex(e=>e.id===t),o=this._rows.findIndex(e=>e.id===n);if(!(r<0)&&!(o<0))return{row:o,column:r}}findCellIndexOrThrow(e){let t=this.findCellIndex(e);if(!t)throw Error("Cell not found");return t}getCellOrThrow(e){let t=this.getCell(e);if(!t)throw Error("Cell not found");return t}addEmptyColumn(){let{type:e="data",format:t="raw"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!i&&this._columns.length>=a.Z)return null;let o=new r.C({type:e,format:t,label:""});for(let e of this._rows)this.setEmptyCell(e,o);switch(n){case void 0:this._columns.push(o);break;case 0:this._columns.unshift(o);break;default:this._columns.splice(n,0,o)}return this.columnsIndex.set(o.id,o),o}addEmptyRow(e,t){if(!t&&this._rows.length>=a.F)return null;let n=new o.H({});for(let e of this._columns)this.setEmptyCell(n,e);switch(e){case void 0:this._rows.push(n);break;case 0:this._rows.unshift(n);break;default:this._rows.splice(e,0,n)}return this.rowsIndex.set(n.id,n),n}deleteColumns(e){let t=Object.fromEntries(e.map(e=>[e,!0]));for(let n of(this._columns=this._columns.filter(e=>{let{id:n}=e;return!t[n]||(this.columnsIndex.delete(n),!1)}),Object.values(this._cells)))for(let t of e)delete n[t];0===this._columns.length&&this.addEmptyColumn()}deleteRows(e){let t=Object.fromEntries(e.map(e=>[e,!0]));this._rows=this._rows.filter(e=>{let{id:n}=e;return!t[n]||(this.rowsIndex.delete(n),delete this._cells[n],!1)}),0===this._rows.length&&this.addEmptyRow()}deleteLines(e,t){switch(e){case"row":return this.deleteRows(t);case"column":return this.deleteColumns(t)}}moveRows(e,t){this.moveLines(e,t,"rows")}moveColumns(e,t){this.moveLines(e,t,"columns")}setEmptyCell(e,t){let n=new(t.getCellClass())({row:e,column:t});return this.setCell(n),n}clone(){let e=s.createEmpty(this.columns.length,this.rows.length);return this.columns.forEach((t,n)=>{e.columns[n].label=this.columns[n].label,e.columns[n].updateType(e,{type:t.type,format:t.format}),this.rows.forEach((t,i)=>{e.getCellAtIndex({row:i,column:n}).textValue=this.getCellAtIndex({row:i,column:n}).textValue})}),e}moveLines(e,t,n){let i="_".concat(n),r=this[i].findIndex(t=>{let{id:n}=t;return n===e[0]});if(-1===r)throw Error("".concat(n,"=").concat(e[0]," not found"));r!==t&&(0,l.im)(this[i],{fromIx:r,toIx:t,count:e.length})}set columns(e){this._columns=e,this.indexColumns(),e&&0!==e.length||this.addEmptyColumn()}set rows(e){this._rows=e,this.indexRows(),e&&0!==e.length||this.addEmptyRow()}set cells(e){for(let t of(this._cells={},e)){let{row:e,column:n}=t.position;if(!this.getColumn(n)){console.error("Column=".concat(n," not found"));continue}if(!this.getRow(e)){console.error("Row=".concat(e," not found"));continue}this.setCell(t)}this._rows.forEach(e=>{this._columns.forEach(t=>{var n;(null===(n=this._cells[e.id])||void 0===n?void 0:n[t.id])||(console.warn("missing cell",e.id,t.id),this.setEmptyCell(e,t))})})}setCell(e){let{row:t,column:n}=e.position;this._cells[t]||(this._cells[t]={}),this._cells[t][n]=e}indexColumns(){this.columnsIndex=(0,l.HK)(this._columns,"id")}indexRows(){this.rowsIndex=(0,l.HK)(this._rows,"id")}static createEmpty(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw RangeError("must have at least one column and row");let i=new s;for(let t=0;t<e;t++)i.addEmptyColumn({type:0===t?"label":"data"},void 0,n);for(let e=0;e<t;e++)i.addEmptyRow(void 0,n);return i}constructor(e){if(this._columns=[],this._rows=[],this._cells={},this.columnsIndex=new Map,this.rowsIndex=new Map,e){let{columns:t,rows:n,cells:i}=e;this.rows=n,this.columns=t,this.cells=i}}}},40156:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(14795);class r{get data(){if(this._data)return this._data;let e=this.findIndices();if(e.labelsOnly){let t=this.source.columns.slice(e.from.column,e.to.column+1);return new i.f({columns:t,rows:[],cells:[]})}let t=this.source.rows.slice(e.from.row,e.to.row+1),n=this.source.columns.slice(e.from.column,e.to.column+1),r=t.flatMap(e=>n.map(t=>this.source.getCell({row:e.id,column:t.id}))).filter(e=>!!e);return new i.f({rows:t,columns:n,cells:r})}clear(){let e=this.findIndices(),{rows:t,columns:n}=this.source;for(let i=e.from.column;i<=e.to.column;i++){let r=n[i];if(this.includesLabels&&(r.label=""),!e.labelsOnly)for(let n=e.from.row;n<=e.to.row;n++){let e=t[n],i=this.source.getCell({row:e.id,column:r.id});i?i.clear():this.source.setEmptyCell(e,r)}}}includes(e){if("isLabel"in e)return this.includesLabelCell(e.column);let t=this.findIndices(),n=this.source.findCellIndex(e);return!!n&&!t.labelsOnly&&t.from.row<=n.row&&t.to.row>=n.row&&t.from.column<=n.column&&t.to.column>=n.column}includesLabelCell(e){if(!this.includesLabels)return!1;let t=this.source.columns.findIndex(t=>{let{id:n}=t;return n===e});if(t<0)return!1;let n=this.findIndices();return n.from.column<=t&&n.to.column>=t}findIndices(){let{rows:e,columns:t}=this.source,n=t.findIndex(e=>{let{id:t}=e;return t===this.from.column}),i=t.findIndex(e=>{let{id:t}=e;return t===this.to.column});if(!this.to.row)return{from:{column:n},to:{column:i},labelsOnly:!0};let r=e.findIndex(e=>{let{id:t}=e;return t===this.from.row}),o=e.findIndex(e=>{let{id:t}=e;return t===this.to.row});if(-1!==[r,o,n,i].indexOf(-1))throw Error("Invalid range");return{from:{row:r,column:n},to:{row:o,column:i},labelsOnly:!1}}static nonEmpty(e){function t(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.getLines(t);for(let t=n?i.length-1:0;t!==(n?-1:i.length);n?t--:t++){let n=i[t];if(!n.isEmpty(e))return n}return null}let n=t("row"),i=t("row",!0),r=t("column"),o=t("column",!0);return n&&i&&r&&o?new this(e,{row:n.id,column:r.id},{row:i.id,column:o.id},!0):null}constructor(e,t,n,i=!1){this.source=e,this.from=t,this.to=n,this.includesLabels=i,this._data=void 0}}},74023:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});var i=n(549);class r{getCells(e){return e.columns.map(t=>e.getCellOrThrow({row:this.id,column:t.id}))}isEmpty(e){for(let t of e.columns)if(!e.getCellOrThrow({row:this.id,column:t.id}).isEmpty)return!1;return!0}constructor(e){this.id=(0,i.kC)(e).id}}},27046:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});class i{get isEmpty(){return!1}get hasError(){return!1}get position(){return{row:this.row.id,column:this.column.id}}get key(){return"".concat(this.row.id,":").concat(this.column.id)}constructor({row:e,column:t}){this.row=e,this.column=t}}},79972:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var i=n(24089),r=n(27046);class o extends r.u{get data(){return this._data}set data(e){if(isNaN(e)){this._isEmpty=!0,this._data=0;return}this.invalidValue=null,this._isEmpty=!1,this._data=e}get isEmpty(){return this._isEmpty}get hasError(){return null!==this.invalidValue}get textValue(){return this.invalidValue?this.invalidValue:this._isEmpty?"":this.getFormatter().format(this.data)}set textValue(e){let t=this.getFormatter().parse("".concat(null!=e?e:""),!0);null===t&&(this.invalidValue=e),this.data=null!=t?t:Number.NaN}clear(){this._isEmpty=!0,this._data=0,this.invalidValue=null}getFormatter(){return i.S.get(this.column.format)||i.S.get("raw")}setupInitialData(e){0===e.data&&e.isEmpty?(this._isEmpty=!0,this._data=0,e.invalidValue&&(this.invalidValue=e.invalidValue)):this.data=e.data}constructor(e,t){super(e),this.type="data",this._data=0,this._isEmpty=!0,this.invalidValue=null,t&&this.setupInitialData(t)}}},59323:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var i=n(27046);class r extends i.u{get isEmpty(){return""===this.label}get textValue(){return this.label}set textValue(e){this.label="".concat(null!=e?e:"").replaceAll(/\r?\n?/g,"")}clear(){this.label=""}setupInitialData(e){this.textValue=e.label}constructor(e,t){super(e),this.type="label",this.label="",t&&this.setupInitialData(t)}}},48148:function(e,t,n){"use strict";n.d(t,{F:function(){return i},Z:function(){return r}});let i=20,r=5},24089:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(549);let r={type:"raw",parse:e=>{if(!e.match(/^-?[0-9,]*(\.[0-9]+)?$/))return null;let t=Number.parseFloat(e.replaceAll(",",""));return isNaN(t)?null:t},format:e=>new Intl.NumberFormat("en-US").format(e)},o=(0,i.HK)([{type:"percentage",parse:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.match(/^(-?[0-9,]*(?:\.[0-9]+)?)(%)?$/);if(!n||!t&&!n[2])return null;let i=Number.parseFloat(n[1].replaceAll(",",""));return isNaN(i)?null:i},format:e=>"".concat(r.format(e),"%")},{type:"currency",parse:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.match(RegExp("^(?:(?<minus>-)?(?<symbol>\\$)?)(?<amount>-?[0-9,]*(?:\\.[0-9]+)?)$")),i=null==n?void 0:n.groups;if(!i||!t&&!i.symbol)return null;let r=Number.parseFloat(i.amount.replaceAll(",",""));return isNaN(r)||r<0&&i.minus?null:r*("-"===i.minus?-1:1)},format:e=>{let t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return"".concat(t.format(e))}},r],"type")},91436:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var i=n(79972),r=n(59323),o=n(48493),a=n(14795),l=n(74023),s=n(549);let d={parse(e){let t=e.columns.map(e=>new o.C(e)),n=e.rows.map(e=>new l.H(e)),d=(0,s.HK)(t,"id"),c=(0,s.HK)(n,"id"),u=Object.entries(e.cells).flatMap(e=>{let[t,n]=e;return Object.entries(n).map(e=>{let[n,o]=e;return function(e,t){let{row:n,column:o}=e;switch(t.type){case"label":return new r.m({row:n,column:o},t);case"data":return new i.O({row:n,column:o},t)}}({row:c.get(t),column:d.get(n)},o)})});return new a.f({columns:t,rows:n,cells:u})},serialize(e){let t=e.rows.map(e=>{let{id:t}=e;return{id:t}}),n=e.columns.map(e=>{let{id:t,type:n,label:i,format:r,fixedType:o}=e;return{id:t,type:n,label:i,format:r,fixedType:o}}),o={};for(let t of e.rows)for(let n of e.columns){let a=e.getCell({row:t.id,column:n.id});if(!a)continue;let l=(()=>{if(a instanceof i.O){let{type:e,data:t,isEmpty:n}=a;return{invalidValue:a.hasError&&a.textValue||void 0,isEmpty:n,type:e,data:t}}if(a instanceof r.m){let{type:e,label:t}=a;return{type:e,label:t}}throw Error("Unexpected cell type ".concat(a.type))})();o[t.id]=o[t.id]||{},o[t.id][n.id]=l}return{rows:t,columns:n,cells:o}}}},549:function(e,t,n){"use strict";n.d(t,{HK:function(){return c},P2:function(){return l},Tx:function(){return m},Vd:function(){return u},X8:function(){return p},iA:function(){return f},im:function(){return d},kC:function(){return s},m2:function(){return x},v5:function(){return h}});var i=n(37164),r=n(79972),o=n(59323),a=n(24089);function l(){return(0,i.x0)(5)}function s(e){var t;let n=null!==(t=e.id)&&void 0!==t?t:l();return{...e,id:n}}function d(e,t){let{fromIx:n,toIx:i,count:r=1}=t;if(r<=0){console.warn("Trying to move ".concat(r," elements"));return}n!==i&&e.splice(i,0,...e.splice(n,r))}function c(e,t){return new Map(e.map(e=>[e[t],e]))}function u(e){return e instanceof r.O}function p(e){return e instanceof o.m}function h(e){return"row"===e?"column":"row"}function m(e,t){let n=e.column,i=f(e.textValue);return!n.fixedType&&("data"===n.type?(e.hasError&&e.getFormatter().type!==i&&g(i,e.column,t)&&e.column.updateType(t,"label"===i?{type:"label"}:{type:"data",format:i}),!0):!!("label"===n.type&&"label"!==i&&g(i,e.column,t))&&(e.column.updateType(t,{type:"data",format:i}),!0))}function g(e,t,n){return t.getCells(n).every(t=>t.isEmpty||f(t.textValue)===e)}function f(e){for(let t of a.S.values())if(null!==t.parse(e))return t.type;return"label"}function x(e){return e%1==0&&e>=1400&&e<=2100}},59557:function(e,t,n){"use strict";n.d(t,{r4:function(){return c},_T:function(){return l},Hs:function(){return d},A4:function(){return m},yr:function(){return h},R8:function(){return s},NN:function(){return u},LU:function(){return p}});var i=n(6238),r=n.n(i),o=n(36585),a=n.n(o),l=r()((e,t,n)=>{let i="__react_svg_text_measurement_id_gamma";n=null!=n?n:document.body;try{let r=document.getElementById(i);if(!r){let e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.style.width="0",e.style.height="0",e.style.position="absolute",e.style.top="-100%",e.style.left="-100%",(r=document.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("id",i),e.appendChild(r),n.appendChild(e)}let o=r.ownerSVGElement;o&&o.parentNode&&o.parentNode!==n&&(o.parentNode.removeChild(o),n.appendChild(o)),Object.assign(r.style,t),r.textContent=e;let a=r.getBoundingClientRect();return{width:r.getComputedTextLength(),height:a.height}}catch(e){return null}});let s=(e,t)=>{let n=e.length,i=Array(n);return e.forEach((e,r)=>{i[(r+t)%n]=e}),i},d=e=>e?1:16;function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=window.getComputedStyle(e).fontSize;if(!n)return t;let[i,r]=(()=>{let e=n.split(""),i=e.findIndex(e=>e.match(/[a-z]/i));return -1===i?["".concat(t),"px"]:[e.splice(0,i).join(""),e.join("")]})();return"px"!==r.toLowerCase()?t:Number.parseFloat(i)}function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.abs(e),r=i%t,o=i-r;return 0===r?e:n*(e<0?-1:1)==-1||0===n&&r<t/2?o*(e<0?-1:1):(o+t)*(e<0?-1:1)}let p=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{exact:i}=n,o=e.length,l=new Map,s=/\W/,d=-1,c=e,u=0,p=o,h=r()(t);for(;0!==d;){l.set(p,d);let t=Math.floor(Math.abs(p-u)/2);if(0===t){if(i)return!1;if(1===d)return c;if(1===l.get(p-1))return a()(e,{length:p-1,separator:s});return!1}if(u=p,(p+=t*d)>o)return!1;d=h(c=a()(e,{length:p,separator:s}))}return c};function h(e){let t=e.target,n={x:e.clientX,y:e.clientY};if(t instanceof SVGElement){var i,r;t=null!==(r=null===(i=t.ownerSVGElement)||void 0===i?void 0:i.parentElement)&&void 0!==r?r:null}let o=null==t?void 0:t.offsetParent;if(o){let e=o.getBoundingClientRect();n.x-=e.left,n.y-=e.top}return n}let m=r()((e,t)=>{let{fontFamily:n,fontSize:i,fontWeight:r}=t,o={widths:[],heights:[],maxWidth:0,maxHeight:0};return e.length&&e.forEach(e=>{let{width:t,height:a}=l("".concat(e),{fontFamily:n,fontSize:i,fontWeight:r})||{width:0,height:0};o.widths.push(t),o.heights.push(a),t>o.maxWidth&&(o.maxWidth=t),a>o.maxHeight&&(o.maxHeight=a)}),o})},98046:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var i,r,o=n(52322),a=n(5879),l=n(23691);(i=r||(r={})).invalid_signup_code="invalid_signup_code",i.invalid_reset_code="invalid_reset_code",i.invalid_user="invalid_user",i.other_workspace_member="other_workspace_member";let s={invalid_signup_code:{title:(0,o.jsx)(a.cC,{id:"F6yt1L",values:{GAMMA_PROPER_NOUN:l.N6}}),description:(0,o.jsx)(a.cC,{id:"hVNvhu"})},invalid_reset_code:{title:(0,o.jsx)(a.cC,{id:"SvShcH"}),description:(0,o.jsx)(a.cC,{id:"Vm3y4h"})},invalid_user:{title:(0,o.jsx)(a.cC,{id:"a2AYF6"}),description:(0,o.jsx)(a.cC,{id:"x9CdxW",values:{GAMMA_PROPER_NOUN:l.N6}})},other_workspace_member:{title:(0,o.jsx)(a.cC,{id:"J5F9Vo"}),description:(0,o.jsx)(a.cC,{id:"CTBeTd",values:{GAMMA_PROPER_NOUN:l.N6}})}}},77574:function(e,t,n){"use strict";n.d(t,{V:function(){return h}});var i=n(52322),r=n(50019),o=n(43297),a=n(28535),l=n(77533),s=n(82655),d=n(49929),c=n(5879),u=n(2784);let p={padding:{sm:4,md:4,lg:6},fontSize:{sm:"sm",md:"md",lg:"lg"},iconSize:{sm:"lg",md:"2x",lg:"3x"},labelFontSize:{sm:"xs",md:"sm",lg:"md"},spacing:{sm:1,md:2,lg:3}},h=(0,u.memo)(e=>{let{description:t,heading:n,isConnected:u=!0,size:h="lg",...m}=e,g=(0,r.ff)("gray.50","whiteAlpha.100");if(u)return null;let{spacing:f,padding:x,iconSize:v,fontSize:y,labelFontSize:b}=p;return(0,i.jsxs)(o.K,{spacing:f[h],p:x[h],borderRadius:"lg",bg:g,textAlign:"center",alignItems:"center",...m,children:[(0,i.jsx)(a.xu,{opacity:.5,children:(0,i.jsx)(d.G,{icon:s.bKP,size:v[h]})}),(0,i.jsx)(l.x,{fontWeight:"600",fontSize:y[h],mt:2,children:n||(0,i.jsx)(c.cC,{id:"ysdDIA"})}),(0,i.jsx)(l.x,{color:"gray.500",fontSize:b[h],children:t})]})});h.displayName="OfflineInfoBox"},8142:function(e,t,n){"use strict";n.d(t,{BU:function(){return s},My:function(){return a}});var i=n(52322),r=n(2784);let o=r.createContext({inPreviewContext:!1}),a=()=>(0,r.useContext)(o),l={inPreviewContext:!0},s=e=>{let{children:t}=e;return(0,i.jsx)(o.Provider,{value:l,children:t})}},71184:function(e,t,n){"use strict";n.d(t,{y5:function(){return ec},Pu:function(){return x},sn:function(){return eg}});var i=n(52322),r=n(46949),o=n(74105),a=n(20816),l=n(85573),s=n(77533),d=n(64253),c=n(87254),u=n(2784),p=n(78456),h=n(71383),m=n(92035),g=n(24635);let f=()=>c.ag._({id:"NiZZRh"}),x=e=>{let{isDisabled:t}=e,n=(0,h.TL)(),c=(0,p.A)(f),x=(0,u.useCallback)(()=>{n((0,g.Hm)({isOpen:!0}))},[n]),v=(0,u.useCallback)(e=>{n((0,g.Hm)({isOpen:!0,initialQuery:e.target.value}))},[n]);return(0,i.jsxs)(o.B,{children:[(0,i.jsx)(a.Z,{pointerEvents:"none",children:(0,i.jsx)(r.W,{color:"gray.300"})}),(0,i.jsx)(l.I,{placeholder:c,_placeholder:{opacity:1},onChange:v,onClick:x,value:"",isDisabled:t}),!(0,m.s2)()&&(0,i.jsx)(a.x,{pointerEvents:"none",children:(0,i.jsx)(s.x,{mr:6,fontWeight:"600",color:"gray.400",fontSize:"sm",bg:"gray.50",px:1,borderRadius:"md",children:(0,d.cE)("Mod+K")})})]})};var v=n(92850),y=n(26468),b=n(22226),w=n(97217),C=n(43997),k=n(78695),j=n(70965),S=n(87202),A=n(53650),I=n(97134);let z=(0,S.ZP)("mod+K"),L=e=>{let{isEnabledFn:t=()=>!0,isOpen:n=!1}=e,{user:i}=(0,I.SE)(),r=(0,C.I0)();(0,u.useEffect)(()=>{if(!(0,m.s2)()&&i)return A.F7.on("keydown","GLOBAL_SEARCH",e=>!!(z(e)&&t())&&(e.preventDefault(),r((0,g.Hm)({isOpen:!n})),!0))},[r,t,i,n])};var E=n(38035),N=n(2338),M=n(5879),_=n(27875),T=n.n(_),R=n(69971),H=n(77574),P=n(40382),O=n(32817),D=n(18960),W=n(81540);let F=e=>{let{onChange:t,query:n,isDisabled:s,isLoading:d,isFocused:p}=e,h=(0,u.useRef)(null);return(0,u.useEffect)(()=>{h.current&&p&&(h.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),h.current.focus())},[h,p]),(0,i.jsxs)(o.B,{size:"lg",variant:"unstyled",children:[(0,i.jsx)(a.Z,{p:4,pointerEvents:"none",color:"gray.300",children:(0,i.jsx)(r.W,{})}),(0,i.jsx)(l.I,{isDisabled:s,placeholder:c.ag._({id:"NiZZRh"}),p:3,pl:12,border:"none",outline:"none",shadow:"none",value:n,onChange:t,_placeholder:{opacity:1,color:"gray.300"},ref:h}),(0,i.jsx)(a.x,{p:4,pointerEvents:"none",color:"gray.500",opacity:d?1:0,transitionProperty:"common",transitionDuration:"normal",mr:(0,m.s2)()?8:0,children:(0,i.jsx)(W.$,{size:"sm"})})]})};var B=n(82642),G=n(87651),U=n(74008),V=n(29117),q=n(5740),K=n(36474),Y=n(32899);let X=e=>{let{onClose:t,showTip:n}=e;return(0,i.jsxs)(G.U,{in:n,children:[(0,i.jsx)(U.i,{}),(0,i.jsxs)(V.U,{p:4,px:6,children:[(0,i.jsxs)(s.x,{fontSize:"sm",color:"gray.600",children:[(0,i.jsxs)("span",{role:"img","aria-label":"Wave",children:["\uD83D\uDC4B"," "]}),(0,i.jsx)(M.cC,{id:"3SXj0j",values:{0:(0,d.cE)("Mod+K")},components:{0:(0,i.jsx)(q.T,{})}})]}),(0,i.jsx)(K.L,{}),(0,i.jsx)(Y.h,{"aria-label":c.ag._({id:"yz7wBu"}),icon:(0,i.jsx)(B.T,{boxSize:2.5}),isRound:!0,size:"xs",variant:"ghost",onClick:t})]})]})};var $=n(43297),Z=n(11881),Q=n(28535),J=n(49929),ee=n(86850),et=n(33279);let en=e=>{let{result:t,isActive:n,focusedItemEl:r,onMouseMove:o}=e,{name:a,id:l,slug:u,isMember:p,memberCount:h,members:m}=t;return(0,i.jsx)(Z.f,{children:(0,i.jsxs)(V.U,{ref:n?r:null,className:"search-result",wordBreak:"break-word",onMouseMove:o,p:3,align:"flex-start",alignItems:"center",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},children:[(0,i.jsx)(Q.xu,{p:2,children:(0,i.jsx)(J.G,{icon:ee.Ty})}),(0,i.jsx)($.K,{spacing:2,flex:"1",children:(0,i.jsxs)(Z.A,{href:(0,et.j)({id:l,slug:u}),children:[(0,i.jsx)(s.x,{children:a}),(0,i.jsx)(s.x,{fontSize:"sm",color:"gray.400",children:p?(0,i.jsx)(M.cC,{id:"tWPlLK",values:{0:h||0}}):(0,i.jsx)(M.cC,{id:"pkIIls",values:{0:h||0}})})]})}),(0,i.jsx)(K.L,{}),(0,i.jsx)(d.NL,{overflowTooltipLabel:c.ag._({id:"25VyZX"}),size:"xs",avatars:m||[],max:3})]})})};var ei=n(75009),er=n(93274),eo=n(14304),ea=n.n(eo),el=n(16426),es=n(30240),ed=n(63416);let ec=e=>{let{result:t,isActive:n,focusedItemEl:r,onMouseMove:o,context:a="globalSearch"}=e,l=(0,es.ye)("screenshotsEnabled"),{title:c,text:u,previewUrl:p,editors:h,editedTime:g,id:f,createdBy:x}=t,v="mentionsList"===a;return(0,i.jsx)(Z.f,{children:(0,i.jsxs)(V.U,{ref:n?r:null,className:"search-result",wordBreak:"break-word",onMouseMove:o,p:v?0:[2,3],py:v?.5:void 0,align:"flex-start",borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",role:"group",bg:n?"gray.100":"transparent",cursor:"pointer",color:"gray.800",borderWidth:"1px",borderColor:n?"gray.200":"transparent",spacing:{base:0,sm:4},sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},children:[(0,i.jsx)(ei.E,{display:{base:"none",xs:"block"},h:"100%",src:l?p:el.Z.src,w:{base:"0px",sm:"25%"},border:"1px solid",borderColor:"gray.200",borderRadius:"md",shadow:"lg",fallbackSrc:el.Z.src}),(0,i.jsxs)($.K,{spacing:(0,m.s2)()?1:2,flex:"1",children:[(0,i.jsxs)(Z.A,{href:"globalSearch"===a?(0,et.Gn)({docId:f}):void 0,children:[(0,i.jsx)(s.x,{fontSize:"md",fontWeight:"600",noOfLines:v?1:2,dangerouslySetInnerHTML:{__html:c?ea().sanitize(c):""}}),(null==x?void 0:x.displayName)&&(0,i.jsx)(s.x,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,i.jsx)(M.cC,{id:"ab98Hp",values:{0:null==x?void 0:x.displayName}})})]}),(0,i.jsx)(s.x,{fontSize:v?"xs":"sm",noOfLines:2,whiteSpace:"normal",wordBreak:"break-word",dangerouslySetInnerHTML:{__html:u?ea().sanitize(u):""}}),(0,i.jsxs)(V.U,{children:[h&&h.length>0&&(0,i.jsx)(er.H,{size:"xs",fontSize:"xs",max:5,children:null==h?void 0:h.map(e=>{let{user:t}=e,{id:n,displayName:r,profileImageUrl:o}=t;return(0,i.jsx)(d.Vw,{label:r,src:o,shadow:"base"},n)})}),g&&(0,i.jsx)(s.x,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:(0,i.jsx)(M.cC,{id:"5cC8f2",values:{0:(0,ed.P9)(g)}})})]})]})]})})},eu=e=>{let{results:t,focusedIndex:n,focusedItemEl:r,onMouseMove:o}=e;return(0,i.jsx)($.K,{spacing:1,px:4,h:["lg","xl"],maxHeight:["lg","xl"],pb:4,overflow:"auto","data-testid":"search-results-wrapper",children:t.map((e,t)=>"DocResult"===e.__typename||"PseudoDocResult"===e.__typename?(0,i.jsx)(ec,{result:e,isActive:n===t,focusedItemEl:r,onMouseMove:()=>{o(t)}},e.id):"Channel"===e.__typename?(0,i.jsx)(en,{result:e,isActive:n===t,focusedItemEl:r,onMouseMove:()=>{o(t)}},e.id):null)})},ep=(0,S.ZP)("mod+K"),eh=e=>{let{query:t,isOpen:n,setResults:i,currentWorkspaceId:r}=e,{data:o}=(0,R.plz)({variables:{first:5,workspaceId:r,archived:!1,sortBy:{field:R.IX5.LastViewed,direction:R.SrV.Desc}},fetchPolicy:"cache-first",skip:!n});(0,u.useEffect)(()=>{!(t.length>0)&&n&&i(((null==o?void 0:o.docs.edges.map(e=>e.node))||[]).slice(0,5).map(e=>{let{id:t,title:n,archived:i,titleCard:r,createdBy:o,editors:a,createdTime:l,editedTime:s,updatedTime:d}=e;return{id:t,title:n,archived:i,previewUrl:null==r?void 0:r.previewUrl,createdBy:o,editors:a,text:"",createdTime:l,editedTime:s,updatedTime:d,__typename:"PseudoDocResult"}}))},[n,t.length,null==o?void 0:o.docs.edges,i])},em=()=>{let{user:e,currentWorkspace:t}=(0,I.SE)(),{isConnected:n}=(0,R.$gs)(),r=(0,h.CG)(g.Ct),[o,a]=(0,u.useState)([]),[l,s]=(0,u.useState)(!0),[c,p]=(0,u.useState)(-1),[f,x]=(0,O.I)(D.H.hasDismissedSearchTip,!1),v=(0,u.useRef)(null),[y,b]=(0,u.useState)(!1),w=(0,h.CG)(g.ak),[C,k]=(0,u.useState)(()=>w||""),[j,{data:S,loading:z}]=(0,R.SVp)();eh({query:C,isOpen:r,setResults:a,currentWorkspaceId:null==t?void 0:t.id});let L=(0,P.Kt)(j,600);(0,u.useEffect)(()=>{0!=w.length&&k(w)},[w]);let _=(0,u.useCallback)(function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{target:"_self"},{target:n}=t||{},i=(null==v?void 0:null===(e=v.current)||void 0===e?void 0:e.querySelector("[href]")).href;i||console.error("[SearchModal] No href found"),window.open(i,n)},[v]),W=(0,u.useRef)({focusedIndex:c,results:o,goToItem:_,searchInputFocused:l});W.current={focusedIndex:c,results:o,goToItem:_,searchInputFocused:l},(0,u.useEffect)(()=>{if(r)return A.F7.on("keydown","GLOBAL_SEARCH",e=>{let{key:t}=e;if(ep(e))return!0;let n=W.current;switch(t){case"Escape":return e.preventDefault(),e.stopPropagation(),!0;case"Tab":return e.preventDefault(),n.searchInputFocused?p(T()(n.focusedIndex-1,0,n.results.length-1)):p(-1),s(!n.searchInputFocused),!0;case"Enter":return e.preventDefault(),n.searchInputFocused?L.flush():n.results.length>0&&n.goToItem({target:e.metaKey||e.ctrlKey?"_blank":"_self"}),!0;case"ArrowUp":return e.preventDefault(),n.focusedIndex<0?(s(!1),p(n.results.length-1)):0==n.focusedIndex?(s(!0),p(-1)):(s(!1),p(T()(n.focusedIndex-1,-1,n.results.length-1))),b(!0),!0;case"ArrowDown":return e.preventDefault(),n.focusedIndex<0?(s(!1),p(0)):n.focusedIndex>=n.results.length-1?(s(!0),p(-1)):(s(!1),p(T()(n.focusedIndex+1,-1,n.results.length-1))),b(!0),!0;default:return s(!0),p(-1),!1}})},[c,L,r,l]),(0,u.useEffect)(()=>{(null==S?void 0:S.search)&&a(null==S?void 0:S.search.filter(e=>void 0!==e&&("DocResult"===e.__typename||"Channel"===e.__typename)))},[null==S?void 0:S.search]);let B=(0,u.useCallback)(e=>{let{value:n}=e.target;n?(k(n),L({variables:{workspaceId:null==t?void 0:t.id,query:n}})):(L.cancel(),k(""),a([]),p(-1),s(!0))},[null==t?void 0:t.id,L]),G=(0,u.useCallback)(e=>{b(!1),p(e)},[]),U=(0,P.Z_)(G,50),V=!f&&o.length>0;(0,u.useEffect)(()=>{var e;v.current&&y&&(null==v||null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},[c,y]);let q=C.length>0?(0,i.jsx)(M.cC,{id:"5WYZKZ"}):(0,i.jsx)(M.cC,{id:"AOvC3b"});return e?(0,i.jsxs)(E.k,{direction:"column",children:[(0,i.jsx)(F,{onChange:B,query:C,isDisabled:!n,isLoading:z,isFocused:l}),(0,i.jsx)(H.V,{mx:4,mt:2,mb:4,isConnected:n,description:(0,i.jsx)(M.cC,{id:"R4lJxt"})}),n&&(0,i.jsx)(d.NZ,{p:4,children:q}),n&&o&&o.length>0&&(0,i.jsx)(eu,{focusedItemEl:v,results:o,focusedIndex:c,onMouseMove:U}),!(0,m.s2)()&&(0,i.jsx)(X,{onClose:()=>{x(!0)},showTip:V}),(0,m.s2)()&&(0,i.jsx)(N.o,{})]}):null},eg=(0,k.Z)(e=>{let{isEnabledFn:t}=e,n=(0,h.CG)(g.Ct);L({isEnabledFn:t,isOpen:n});let r=(0,C.I0)(),o=(0,j.iq)({base:"sm",sm:"md",md:"lg",lg:"2xl"}),a=(0,u.useCallback)(()=>{r((0,g.Hm)({isOpen:!1,initialQuery:""}))},[r]);return(0,i.jsxs)(v.u_,{isOpen:n,onClose:a,size:o,onOverlayClick:a,returnFocusOnClose:!1,children:[(0,i.jsx)(y.Z,{}),(0,i.jsx)(b.h,{children:(0,i.jsx)(w.f,{p:0,children:(0,i.jsx)(em,{})})})]})})},55080:function(e,t,n){"use strict";n.d(t,{j:function(){return p}});var i=n(52322),r=n(50019),o=n(38035),a=n(43297),l=n(77533),s=n(36474),d=n(42946),c=n(49929),u=n(5879);let p=e=>{let{formatLabel:t,icon:n,accentColor:p,onClick:h,exportInProgress:m,exportInProgressNote:g,badge:f,customLabel:x,customInProgressMessage:v}=e,y=(0,r.ff)("gray.50","whiteAlpha.100"),b=(0,r.ff)("gray.200","gray.700"),w=(0,r.ff)("".concat(p,".100"),"".concat(p,".500")),C=(0,r.ff)("gray.200","gray.700"),k=(0,r.ff)("".concat(p,".500"),"".concat(p,".200")),j=(0,r.ff)("gray.500","gray.300"),S=(0,r.ff)("var(--chakra-colors-".concat(p,"-300)"),"var(--chakra-colors-".concat(p,"-700)")),A=(0,r.ff)("var(--chakra-colors-".concat(p,"-700)"),"var(--chakra-colors-".concat(p,"-300)"));return(0,i.jsxs)(o.k,{alignItems:"stretch",overflow:"hidden",onClick:h,borderRadius:"md",border:"1px",borderColor:(0,r.ff)("gray.200","gray.700"),bgColor:m?b:y,cursor:m?"progress":void 0,disabled:m,as:"button",transitionProperty:"common",transitionDuration:"normal",_hover:m?{}:{boxShadow:"var(--chakra-shadows-md)",borderColor:S,color:A},children:[(0,i.jsx)(o.k,{bgColor:m?C:w,color:"".concat(m?j:k),width:16,minH:16,alignItems:"center",justifyContent:"center",fontSize:"2xl",children:(0,i.jsx)(c.G,{icon:n,fixedWidth:!0})}),(0,i.jsxs)(a.K,{alignItems:"flex-start",spacing:0,p:4,justifyContent:"center",children:[(0,i.jsxs)(l.x,{fontWeight:"medium",children:[x||(0,i.jsx)(u.cC,{id:"i3Tbgc",values:{formatLabel:t}})," ",f]}),m&&(0,i.jsxs)(l.x,{color:"gray.600",fontSize:"xs",children:[v||(0,i.jsx)(u.cC,{id:"wRvCQ6",values:{formatLabel:t}})," ",g]})]}),(0,i.jsx)(s.L,{}),!m&&(0,i.jsx)(o.k,{alignItems:"center",pl:4,pr:6,children:(0,i.jsx)(c.G,{icon:d.fuY,size:"1x"})})]})}},86850:function(e,t,n){"use strict";n.d(t,{Ty:function(){return d},ei:function(){return m},l7:function(){return c},tN:function(){return u}});var i=n(52322),r=n(42946),o=n(54933),a=n(49929),l=n(5879),s=n(87254);let d=r.Pk,c=o.cC_,u=()=>s.ag._({id:"4BKB+B"}),p=()=>({invite:{ariaLabel:s.ag._({id:"b4DayH"}),label:(0,i.jsx)(l.cC,{id:"b4DayH"}),icon:(0,i.jsx)(a.G,{icon:r.FKd,fixedWidth:!0}),key:"invite"},public:{ariaLabel:s.ag._({id:"Z8lGw6"}),label:(0,i.jsx)(l.cC,{id:"Z8lGw6"}),icon:(0,i.jsx)(a.G,{icon:r.Z_X,fixedWidth:!0}),key:"public"},export:{ariaLabel:s.ag._({id:"GS+Mus"}),label:(0,i.jsx)(l.cC,{id:"GS+Mus"}),icon:(0,i.jsx)(a.G,{icon:r.fuY,fixedWidth:!0}),key:"export"},embed:{ariaLabel:s.ag._({id:"KKBlUU"}),label:(0,i.jsx)(l.cC,{id:"KKBlUU"}),icon:(0,i.jsx)(a.G,{icon:r.dT$,fixedWidth:!0}),key:"embed"}}),h=["invite","public","export","embed"],m=e=>{let{showSharePublic:t=!0,showEmbed:n=!0,showInvite:i=!0,showExport:r=!0}=e;return h.map(e=>p()[e]).filter(e=>"public"===e.key?t:"embed"===e.key?n:"invite"===e.key?i:"export"!==e.key||r)}},80834:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var i=n(5632),r=n(2784),o=n(76599),a=n(71383),l=n(78112),s=n(40382),d=n(69465),c=n(27821),u=n(41742);let p=e=>{let{url:t,nonPublishedUrl:n}=e,{push:p}=(0,i.useRouter)(),h=(0,s.gF)(),m=(0,a.CG)(l.yx),g=(0,c.C7)(),f=(0,a.CG)(o.Lw),x=g?(0,d.Op)({url:t,doc:m,previewEnabled:f}):n||t,v=h&&(0,d.sG)(t,m),y=(0,r.useCallback)(e=>{(0,u.BZ)(x)&&(e.preventDefault(),p(x,void 0,{shallow:!0}))},[x,p]);return(0,r.useMemo)(()=>({linkUrl:x,handleClick:f?y:void 0,isCurrentPage:v}),[y,x,f,v])}},4813:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},11048:function(e,t,n){"use strict";n.d(t,{C5:function(){return a},S9:function(){return o},r3:function(){return r},xw:function(){return l}});var i=n(4813);let r=e=>{let{theme:t}=e;i.T.emit("openThemeConfiguration",{baseTheme:t,view:"editor"})},o=e=>{let{theme:t}=e;i.T.emit("openThemeConfiguration",{baseTheme:t,view:"editor",isNewFork:!0})},a=()=>{i.T.emit("openThemeConfiguration",{view:"splash"})},l=()=>{i.T.emit("openThemeConfiguration",{view:"import"})}},52949:function(e,t,n){"use strict";n.d(t,{U:function(){return y}});var i=n(52322),r=n(20437),o=n(30523),a=n(28535),l=n(62614),s=n(32899),d=n(78071),c=n(42822),u=n(42946),p=n(49929),h=n(64253),m=n(5879),g=n(87254),f=n(2784),x=n(74216),v=n(97912);let y=e=>{let{accentImages:t,isDark:n,handleDelete:y,handleItemClick:b,currentAttributes:w,editType:C}=e,k=(0,f.useCallback)(e=>t=>{y&&(t.stopPropagation(),y(e))},[y]),j=(0,f.useCallback)(e=>()=>{b&&b(e)},[b]);return(0,i.jsx)(r.M,{gap:2,columns:{base:2,"2xl":3},children:t.map(e=>{let t=(0,x.wh)(e,n,v.Iv),r=("node"===C||"accessory"===C)&&e.image,f=r?{...e.image,source:e.source}:e,S=r?(null==w?void 0:w.src)===e.image.src:(null==w?void 0:w.accentId)===e.accentId;return(0,i.jsx)(o.P,{children:(0,i.jsxs)(a.xu,{as:l.z,variant:"unstyled",backgroundColor:n?"black":"white",cursor:b?"pointer":void 0,...t,opacity:1,width:"100%",borderRadius:"base",shadow:"md",minH:"100px",position:"relative",role:"group",onClick:j(f),children:[y&&(0,i.jsx)(h.kH,{label:(0,i.jsx)(m.cC,{id:"Rz0Yis"}),placement:"top",children:(0,i.jsx)(s.h,{"aria-label":g.ag._({id:"Rz0Yis"}),icon:(0,i.jsx)(p.G,{icon:u.XAH}),onClick:k(e),isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),w&&(0,i.jsx)(d.p,{in:S,children:(0,i.jsx)(a.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(c.M,{h:"100%",w:"100%",children:(0,i.jsx)(p.G,{icon:u.LEp})})})})]})},e.accentId)})})}},37904:function(e,t,n){"use strict";n.d(t,{L:function(){return c},c:function(){return r}});var i,r,o=n(52322),a=n(56581),l=n(62614),s=n(64253),d=n(23491);(i=r||(r={}))[i.small=4]="small",i[i.medium=7]="medium";let c=e=>{let{color:t,setColor:n=()=>{},isActive:i=!1,name:r,size:c=7,tooltipIsDisabled:u=!1}=e,p=(0,d.DP)(t)?"white":"black";return(0,o.jsx)(s.kH,{label:r||t.toUpperCase(),placement:"top",isDisabled:u,children:(0,o.jsx)(l.z,{display:"inline-block",alignSelf:"center",boxSize:c,borderRadius:"md",border:"1px solid",borderColor:"blackAlpha.300",color:p,bgColor:null!=t?t:"#FFFFFF",onClick:()=>n(t),variant:"unstyled",minW:0,fontSize:"xs",transitionProperty:"border",transitionDuration:"normal",children:i&&(0,o.jsx)(a.n,{})})})}},54476:function(e,t,n){"use strict";n.d(t,{t:function(){return m}});var i=n(52322),r=n(67046),o=n(62614),a=n(43297),l=n(28535),s=n(77533),d=n(42946),c=n(49929),u=n(5879),p=n(98621),h=n.n(p);let m=e=>{let{color:t,isDefaultColor:n,isMixed:p=!1,...m}=e;return(0,i.jsx)(r.j,{as:o.z,variant:"plain",size:"sm",boxShadow:"none",minW:"fit-content",textAlign:"left",rightIcon:(0,i.jsx)(c.G,{fixedWidth:!0,icon:d.ptq,transform:"shrink-6"}),...m,children:(0,i.jsxs)(a.K,{direction:"row",spacing:2,align:"center",children:[(0,i.jsx)(l.xu,{as:"span",alignSelf:"center",boxSize:5,borderRadius:"md",border:"2px solid",borderColor:"gray.300",bgColor:t}),(0,i.jsx)(s.x,{fontFamily:n||p?void 0:"mono",textTransform:n||p?void 0:"uppercase",fontSize:"sm",children:p?(0,i.jsx)(u.cC,{id:"+UN6+J"}):n?(0,i.jsx)(u.cC,{id:"ovBPCi"}):h()(t).toHexString()})]})})}},54842:function(e,t,n){"use strict";n.d(t,{M:function(){return z}});var i=n(52322),r=n(17993),o=n(74008),a=n(38035),l=n(62614),s=n(42946),d=n(49929),c=n(5879),u=n(2784),p=n(31601),h=n(87254),m=n(69024),g=n(29117),f=n(77533),x=n(36474),v=n(20437),y=n(37904);let b=e=>{let{label:t,colors:n,setColor:r,currentColor:o,isDefault:a,handleAddColorButtonClick:s}=e;return(0,i.jsx)(m.k,{children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.U,{px:"2",fontSize:"sm",w:"100%",justifyContent:"space-between",alignItems:"center",mb:"2",mt:s?1:0,children:[(0,i.jsx)(f.x,{children:t}),(0,i.jsx)(x.L,{}),s&&(0,i.jsx)(l.z,{variant:"link",fontSize:"sm",onClick:s,children:(0,i.jsx)(c.cC,{id:"ePK91l"})})]}),(0,i.jsx)(v.M,{gap:1.5,columns:6,p:2,pt:0,children:n.map((e,t)=>{let{hex:n,name:l}=e;return(0,i.jsx)(y.L,{name:l,color:n,setColor:r,isActive:a?null===o:o===n},t)})})]})})},w=()=>[{key:"black",hex:"#000000",name:h.ag._({id:"THokF3"})},{key:"dark-gray",hex:"#4D4D4D",name:h.ag._({id:"uUMrFZ"})},{key:"gray",hex:"#808080",name:h.ag._({id:"qS5//Q"})},{key:"light-gray",hex:"#CCCCCC",name:h.ag._({id:"xa/b9m"})},{key:"white-smoke",hex:"#F2F2F2",name:h.ag._({id:"rGj3KB"})},{key:"white",hex:"#FFFFFF",name:h.ag._({id:"5Ex+AP"})},{key:"light-sun",hex:"#FCEC99",name:h.ag._({id:"nOXj3q"})},{key:"peach",hex:"#FFD1A7",name:h.ag._({id:"68+2yw"})},{key:"salmon",hex:"#FAA1A1",name:h.ag._({id:"TrGQaZ"})},{key:"lavender",hex:"#D8AFF8",name:h.ag._({id:"gc4DdH"})},{key:"baby-blue",hex:"#AFCBF8",name:h.ag._({id:"+bmpN5"})},{key:"pale-green",hex:"#AEE4BD",name:h.ag._({id:"hUOhvE"})},{key:"gold",hex:"#F9D933",name:h.ag._({id:"FYlHHU"})},{key:"orange",hex:"#FFA44F",name:h.ag._({id:"4OE5Sf"})},{key:"red",hex:"#F44444",name:h.ag._({id:"wRTiSD"})},{key:"purple",hex:"#B05EF1",name:h.ag._({id:"mF9LxA"})},{key:"blue",hex:"#5E98F1",name:h.ag._({id:"Zn5crm"})},{key:"green",hex:"#5CC97B",name:h.ag._({id:"VmkjGB"})},{key:"dark-goldenrod",hex:"#957D00",name:h.ag._({id:"vWWr+k"})},{key:"brown",hex:"#995515",name:h.ag._({id:"JLxwQS"})},{key:"maroon",hex:"#910D0D",name:h.ag._({id:"cg4yu3"})},{key:"dark-purple",hex:"#5E208E",name:h.ag._({id:"oqSDkM"})},{key:"midnight-blue",hex:"#204C8E",name:h.ag._({id:"QCyMdk"})},{key:"forest-green",hex:"#1F7135",name:h.ag._({id:"HVCLqF"})}],C=e=>{let{setColor:t,currentColor:n}=e;return(0,i.jsx)(b,{label:h.ag._({id:"Zp2USm"}),colors:w(),setColor:t,currentColor:n})};var k=n(71383),j=n(11048),S=n(43271),A=n(78112);let I=e=>{let{setColor:t,currentColor:n}=e,r=(0,k.CG)(A.Pu),o=(0,S.X)(r,!0).map(e=>{let t=(0,S.H_)(e);return{hex:t,key:t}});return(0,i.jsx)(b,{label:h.ag._({id:"J1XRO3"}),colors:o,setColor:t,currentColor:n,handleAddColorButtonClick:()=>{r.workspaceId?(0,j.r3)({theme:r}):(0,j.S9)({theme:r})},addColorLabel:null===r.workspaceId?h.ag._({id:"0TWTg2"}):h.ag._({id:"TExCtI"})})},z=e=>{let{currentColor:t,setColor:n,unsetColor:h=()=>n(null),source:m}=e,g=(0,p.z$)(),f=(0,u.useCallback)(e=>{null==g||g.track(p.AA.COLOR_PICKER_SET_COLOR,{color:e,source:m}),n(e)},[n,g,m]),x=(0,u.useCallback)(()=>{null==g||g.track(p.AA.COLOR_PICKER_RESET,{source:m}),h()},[h,g,m]);return(0,p.If)(e=>{e.track(p.AA.COLOR_PICKER_OPENED,{source:m})},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.g,{divider:(0,i.jsx)(o.i,{}),p:0,align:"start",children:[(0,i.jsx)(I,{setColor:f,currentColor:t}),(0,i.jsx)(C,{setColor:f,currentColor:t})]}),(0,i.jsx)(a.k,{px:5,py:3,bg:"gray.100",alignItems:"center",justifyContent:"center",mx:-2,mb:-2,mt:2,children:(0,i.jsx)(l.z,{onClick:x,variant:"link",size:"sm",colorScheme:"gray",leftIcon:(0,i.jsx)(d.G,{icon:s.X7o}),children:(0,i.jsx)(c.cC,{id:"L+rMC9"})})})]})}},54042:function(e,t,n){"use strict";n.d(t,{J:function(){return c},P:function(){return u}});var i=n(52322),r=n(11082),o=n(84636),a=n.n(o),l=n(2784),s=n(27821),d=n(53729);let c=e=>{let{fonts:t}=e,n=(0,s.C7)(),o=null==t?void 0:t.find(e=>"Eudoxus Sans"===e.id),c=(0,l.useMemo)(()=>a()((null==t?void 0:t.filter(e=>e.url))||[],"url"),[t]);return(0,i.jsxs)(i.Fragment,{children:[o?(0,i.jsx)(d.ZP,{shouldUsePublishedVersion:n}):null,c.map(e=>(0,i.jsx)(r.r,{as:"link",href:e.url,rel:"stylesheet","data-gamma-font":e.id},e.url))]})},u=e=>{let{theme:t}=e;return(0,i.jsx)(c,{fonts:null==t?void 0:t.fonts})}},25102:function(e,t,n){"use strict";n.d(t,{F:function(){return r},c:function(){return i}});let i=e=>{let{accentCut:t}=e.config;if(!t)return{};let{maskStyles:n,fgStyles:i}=r[t]||{};return{"[data-layout-cut=left]":n.left,"[data-layout-cut=right]":n.right,"[data-layout-cut=top]":n.top,"[data-layout-cut-fg=left]":i.left,"[data-layout-cut-fg=right]":i.right,"[data-layout-cut-fg=top]":i.top}},r={default:{name:()=>"Default",maskStyles:{left:void 0,right:void 0,top:void 0},fgStyles:{left:void 0,right:void 0,top:void 0}},fade:{name:()=>"Fade",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/gradient-left.5e1ae259.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"110%",marginRight:"-10%"},right:{maskImage:'url("'.concat("/_next/static/media/gradient-right.81936f6b.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"110%",marginLeft:"-10%"},top:{maskImage:'url("'.concat("/_next/static/media/gradient-top.9cbcc51e.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"110%"}},fgStyles:{left:{maxWidth:"90%",marginRight:"10%"},right:{maxWidth:"90%",marginLeft:"10%"},top:void 0}},diagonal:{name:()=>"Diagonal",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/diagonal-left.c66da52d.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/diagonal-right.c56ea47c.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/diagonal-top.f5cfbd00.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"80%",marginRight:"20%"},right:{maxWidth:"80%",marginLeft:"20%"},top:{maxHeight:"85%",marginBottom:"auto"}}},round:{name:()=>"Round",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/circle-left.b2ca2ce2.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/circle-right.9a77e2f4.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/circle-top.49150ee5.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"80%",marginRight:"20%"},right:{maxWidth:"80%",marginLeft:"20%"},top:void 0}},roundInverse:{name:()=>"Round Inverse",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-left.dbc8a93f.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"110%",marginRight:"-10%"},right:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-right.de2dd517.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"110%",marginLeft:"-10%"},top:{maskImage:'url("'.concat("/_next/static/media/circle-inverted-top.07d69c71.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"112%"}},fgStyles:{left:{maxWidth:"90%",marginRight:"10%"},right:{maxWidth:"90%",marginLeft:"10%"},top:{maxHeight:"90%",marginBottom:"auto"}}},wiggle:{name:()=>"Wiggle",maskStyles:{left:{maskImage:'url("'.concat("/_next/static/media/wiggle-left.578c81e9.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"right",width:"105%",marginRight:"-5%"},right:{maskImage:'url("'.concat("/_next/static/media/wiggle-right.8ee6fc0f.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"left",width:"105%",marginLeft:"-5%"},top:{maskImage:'url("'.concat("/_next/static/media/wiggle-top.41b099b7.svg",'")'),maskSize:"cover",maskRepeat:"no-repeat",maskPosition:"bottom",height:"105%"}},fgStyles:{left:{maxWidth:"94%",marginRight:"6%"},right:{maxWidth:"94%",marginLeft:"6%"},top:{maxHeight:"95%",marginBottom:"auto"}}}}},33886:function(e,t,n){"use strict";n.d(t,{ND:function(){return r},WX:function(){return d},dP:function(){return o},un:function(){return l},wY:function(){return i}});let i="themed-clickable-box",r={transitionProperty:"transform",transitionDuration:"normal"},o={transform:"scale(1.03)",_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",boxShadow:"inset 0 0 0 500px var(--expandable-hover-background)",pointerEvents:"none"}},a={border:"var(--shape-border-width) solid var(--neutral-border-color)",borderRadius:"var(--box-border-radius)",backgroundColor:"var(--clickable-background-color)",boxShadow:"var(--clickable-shadow)",backdropFilter:"var(--card-backdrop-filter)","@media print":{boxShadow:"none"}},l={_hover:{transform:"scale(1.1)"},color:"var(--link-color)",height:"auto",padding:"0.7em",paddingY:"0.2em",minW:"2.5em",position:"relative"},s=(e,t)=>({...r,...a,_hover:t?void 0:o,"@media print":{boxShadow:"none"}}),d=(e,t)=>({[".".concat(i)]:s(e,t)})},2557:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});let i={borderRadius:"var(--box-border-radius)"}},58763:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var i=n(65050),r=n(61372),o=n(25102),a=n(33886),l=n(7096),s=n(21491),d=n(4433);let c=(e,t)=>({...(0,l.A3)(e),...(0,a.WX)(e,t),...(0,r.Ji)(e),...(0,o.c)(e),...(0,s.Em)(),...(0,d.oJ)(),[".".concat(i.vD," .").concat(i.pL)]:e.config.contentStyles})},4433:function(e,t,n){"use strict";n.d(t,{IR:function(){return i},oJ:function(){return r}});let i="themed-table",r=()=>({[".".concat(i)]:o}),o={border:"0.0625em solid var(--neutral-border-color)",borderRadius:"var(--box-border-radius)","tbody tr":{_even:{backgroundColor:"blackAlpha.50"},_odd:{backgroundColor:"whiteAlpha.50"}},td:{borderLeft:"0.0625em solid var(--shape-border-color)",_first:{borderLeftWidth:"0"}}}},24679:function(e,t,n){"use strict";n.d(t,{S:function(){return R}});var i=n(52322),r=n(50019),o=n(28535),a=n(38035),l=n(87651),s=n(29117),d=n(36474),c=n(62614),u=n(42946),p=n(49929),h=n(64253),m=n(5879),g=n(87202),f=n(2784),x=n(43997),v=n(40382),y=n(27210),b=n(78112),w=n(12971),C=n(70675),k=n(54871),j=n(50576),S=n(74919),A=n(35013),I=n(53771),z=n(75325),L=n(26140),E=n(92065),N=n(26714);let M=()=>[k.Z.configure({horizontalRule:!1,codeBlock:!1}),E.L,C.ZP.configure({openOnClick:!1}),S.d,I.E,L.cB,L.s6,L.nk,A.Hy,j.l,A.Pi,z.R,N.Jn],_=(0,g.P6)("mod+Enter"),T=(0,g.P6)("mod+a"),R=f.memo(e=>{let{clearContentOnSave:t=!1,editable:n=!0,saveButtonText:g=(0,i.jsx)(m.cC,{id:"tfDRzk"}),saveButtonIcon:C=(0,i.jsx)(p.G,{icon:u.XCy}),initialContent:k="",placeholder:j="Reply",showBorder:S=!0,onCancelEditingClick:A,onCommentSave:I,onCreate:z=()=>{},onUpdate:L=()=>{},shouldFocus:E=!0,alwaysShowButtons:N=!1,...R}=e,H=(0,f.useMemo)(()=>M(),[]),P=(0,x.v9)(b.ke),O=(0,x.v9)(b.KV),D=(0,y.jE)({extensions:H,content:k,onCreate:e=>{let{editor:t}=e;z({editor:t}),t.gammaDocId=P,t.gammaOrgId=O},onUpdate:e=>{let{editor:t,transaction:n}=e;L({editor:t,transaction:n})}});(0,f.useEffect)(()=>{D&&D.setOptions({editable:n})},[D,n]),(0,v.vm)(()=>{D&&E&&D.isEditable&&D.commands.focus("end")},[D,E],[D]),(0,f.useEffect)(()=>{D&&!n&&(null==D||D.commands.setContent(k))},[D,k,n]);let{colorMode:W}=(0,r.If)(),F="light"===W,B=e=>{T(e)&&(e.preventDefault(),null==D||D.commands.selectAll()),_(e)&&(e.preventDefault(),e.stopPropagation(),G())},G=()=>{!(!I||!D||(0,w.$y)(D.state.doc)||(0,w.WL)(D.state.doc))&&(I(D.getJSON()),t&&D.commands.clearContent(!0))};return n?(0,i.jsxs)(a.k,{"data-gamma-child-tiptap-editor":"comment-editor",direction:"column",...R,children:[(0,i.jsx)(o.xu,{tabIndex:0,w:"100%",onKeyDownCapture:B,onKeyPressCapture:B,className:"comment-editor",color:F?"gray.800":"gray.200",bg:F?"white":"gray.800",...S?{border:"1px solid",borderColor:F?"gray.200":"gray.700",borderRadius:"md"}:{},sx:{"p:first-of-type::before":(null==D?void 0:D.isEmpty)?{content:'"'.concat(j,'"'),float:"left",color:F?"gray.400":"gray.500",pointerEvents:"none",height:"0"}:""},fontSize:"sm",children:(0,i.jsx)(y.kg,{editor:D,className:"comment-editor",style:{wordBreak:"break-word",width:"100%"}})}),(0,i.jsxs)(l.U,{in:!!(N||D&&!D.isEmpty),children:[(0,i.jsx)(o.xu,{h:3,children:(0,i.jsx)(i.Fragment,{})}),(0,i.jsxs)(s.U,{children:[(0,i.jsx)(d.L,{}),!!A&&(0,i.jsx)(h.kH,{label:(0,i.jsx)(m.cC,{id:"zeQdHz"}),placement:"top",children:(0,i.jsx)(c.z,{size:"sm",variant:"ghost",onClick:()=>{A&&A(),null==D||D.commands.clearContent(!0)},colorScheme:"red",children:(0,i.jsx)(m.cC,{id:"dEgA5A"})})}),(0,i.jsx)(c.z,{size:"sm",variant:"solid",leftIcon:C,isDisabled:(null==D?void 0:D.isEmpty)||(0,w.WL)(null==D?void 0:D.state.doc),onClick:G,"data-testid":"post-comment",children:g})]})]})]}):(0,i.jsx)(o.xu,{fontSize:"sm",children:(0,i.jsx)(y.kg,{editor:D})})})},68498:function(e,t,n){"use strict";n.d(t,{M:function(){return c},k:function(){return d}});var i=n(54073),r=n.n(i),o=n(26151),a=n(2784),l=n(71383),s=n(42616);let d="FLUSH_SYNCED_EDITOR",c=e=>{let{sourceEditor:t,targetEditor:n}=e,i=(0,l.TL)();(0,a.useEffect)(()=>{let e=new h(n,()=>{n.commands.command(e=>{let{state:t}=e;return(0,s.E0)(t.doc,i),!0})}),r=u.bind(void 0,e),o=p.bind(void 0,e);return t.on("update",r),t.on("selectionUpdate",o),()=>{e.flush(),t.off("update",r),t.off("selectionUpdate",o)}},[t,n,i])},u=(e,t)=>{let{transaction:n}=t;e.add(n),n.getMeta(d)&&e.flush()},p=(e,t)=>{var n,i;let{editor:r}=t,o=null===(i=r.state.selection)||void 0===i?void 0:null===(n=i.ranges)||void 0===n?void 0:n[0];o&&e.setSelection({from:o.$from.pos,to:o.$to.pos})};class h{add(e){this.queue.push(e.steps.map(e=>o.h8.fromJSON(this.editor.schema,e.toJSON()))),this.apply()}setSelection(e){this.selection=e,setTimeout(()=>{0===this.queue.length&&this.applySelection()},0)}flush(){this.apply.flush()}doApply(){var e;let t;for(;void 0!==(t=this.queue.shift());){let e=this.editor.state.tr;t.forEach(t=>e.step(t)),this.editor.view.dispatch(e)}this.applySelection(),null===(e=this.onApply)||void 0===e||e.call(this,{editor:this.editor})}applySelection(){this.selection&&this.editor.commands.setTextSelection(this.selection),this.selection=null}constructor(e,t){this.editor=e,this.onApply=t,this.queue=[],this.selection=null,this.apply=r()(this.doApply.bind(this),500)}}},20435:function(e,t,n){"use strict";n.d(t,{y:function(){return ss},e:function(){return sr}});var i,r,o,a,l=n(52322),s=n(28535),d=n(36518),c=n(39615),u=n(3517),p=n(2784),h=n(43997),m=n(95405),g=n(83693),f=n(56960),x=n(71383),v=n(52659),y=n(38035),b=n(64253),w=n(15222),C=n(27042),k=n(50019),j=n(76643),S=n(62614),A=n(82554),I=n(77533),z=n(75009),L=n(43297),E=n(74008),N=n(82655),M=n(49929),_=n(5879),T=n(87254),R=n(43901),H=n(85336),P=n(67308),O=n(1547),D=n(30240),W=n(78456),F={src:"/_next/static/media/EditCardWithAI.382a3267.png"},B=n(1283),G=n(43679),U=n(34071),V=n(39429),q=n(48394);let K=e=>{let{button:t,children:n,closeButtonLabel:i=(0,l.jsx)(_.cC,{id:"76gPWk"})}=e;return(0,l.jsx)(G.J,{placement:"right-start",children:e=>{let{onClose:r}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U.x,{children:t}),(0,l.jsx)(V.y,{children:(0,l.jsx)(q.b,{children:(0,l.jsxs)(L.K,{spacing:2,children:[n,(0,l.jsx)(S.z,{onClick:r,size:"sm",variant:"solid",children:i})]})})})]})}})};var Y=n(39198),X=n(46594),$=n(84082),Z=n(92999),Q=n(87549),J=n(2191),ee=n(23096);(i=o||(o={})).Cards="cards",i.Images="images",i.Apps="apps",i.Videos="videos",i.Layouts="layouts",i.Text="text",i.Forms="forms",i.Charts="charts",(r=a||(a={})).Uncategorized="Other",r.Tables="Tables",r.Columns="Columns",r.SmartLayout="Smart layouts",r.Lists="Lists",r.Text="Text",r.Diagrams="Diagrams",r.Interactive="Interactive",r.New="New",r.Callouts="Callout boxes",r.Charts="Charts";let et={Other:(0,l.jsx)(_.cC,{id:"/IX/7x"}),Tables:(0,l.jsx)(_.cC,{id:"8+4V8D"}),Columns:(0,l.jsx)(_.cC,{id:"jEu4bB"}),"Smart layouts":(0,l.jsx)(_.cC,{id:"uNnHCK"}),Lists:(0,l.jsx)(_.cC,{id:"h16FyT"}),Interactive:(0,l.jsx)(_.cC,{id:"jijeT/"}),Text:(0,l.jsx)(_.cC,{id:"xeiujy"}),Diagrams:(0,l.jsx)(_.cC,{id:"muZ1GG"}),New:(0,l.jsx)(_.cC,{id:"isRobC"}),"Callout boxes":(0,l.jsx)(_.cC,{id:"uJ8xrP"}),Charts:(0,l.jsx)(_.cC,{id:"A4tHrb"})},en=()=>{let e=(0,Y.zm)();return{cards:{name:T.ag._({id:"4z8XKi"}),icon:N.rZt,itemGroups:(0,$.V)()},images:{name:T.ag._({id:"an5hVd"}),icon:N.VmB,itemGroups:[{subcategory:et.Other,items:[...(0,J.c)().filter(e=>"image"===e.nodeName),e.gallery]}]},charts:{name:T.ag._({id:"u5XrTN"}),icon:N.Wpq,itemGroups:[{subcategory:et.Charts,items:(0,Z._)()},{subcategory:et.Diagrams,items:(0,Q.q)()},{subcategory:(0,l.jsx)(_.cC,{id:"uNnHCK"}),items:(0,ee.js)()}]},apps:{name:T.ag._({id:"Nz7jbx"}),icon:N.m6E,itemGroups:[{subcategory:et.Other,items:[...(0,J.c)().filter(e=>"embed"===e.nodeName&&(!e.categories||e.categories.includes("app")))]}]},videos:{name:T.ag._({id:"86kBVB"}),icon:N.CjD,itemGroups:[{subcategory:et.Other,items:[e.gallery,...(0,J.c)().filter(e=>"video"===e.nodeName)]}]},layouts:{name:T.ag._({id:"uNnHCK"}),icon:N.Y$l,itemGroups:[{subcategory:et.Columns,items:[e.columns2,e.columns3,e.columns4]},{subcategory:(0,l.jsx)(_.cC,{id:"vjXym+"}),items:(0,ee.js)()},{subcategory:(0,l.jsx)(_.cC,{id:"iTylMl"}),items:(0,ee.ne)()}]},text:{name:T.ag._({id:"8nVVMR"}),icon:N.nUG,itemGroups:[{subcategory:et.Text,items:[e.title,e.h1,e.h2,e.h3,e.h4,e.blockquote]},{subcategory:et.Tables,items:[e.table2,e.table3,e.table4]},{subcategory:et.Lists,items:[e.bulletedList,e.numberedList,e.todoList]},{subcategory:et["Callout boxes"],items:(0,X.Di)()},{subcategory:et.Interactive,items:[e.buttonGroup,e.toggle]},{subcategory:et.Other,items:[e.codeBlock,e.mathBlock,e.footnote,e.contributors,e.tableOfContents,e.divider]}]},forms:{name:T.ag._({id:"4Kic3M"}),icon:N.aJJ,itemGroups:[{subcategory:et.Other,items:[e.buttonGroup,...(0,J.c)().filter(e=>{var t;return"embed"===e.nodeName&&(null===(t=e.categories)||void 0===t?void 0:t.includes("form"))})]}]}}},ei=()=>[["cards","layouts"],["text","images","videos","apps","charts","forms"]],er=()=>ei().map(e=>e.map(e=>en()[e])),eo=e=>{let{editor:t}=e,n=(0,W.A)(er),i=(0,D.Zd)(),[r,o]=p.useState(null),a=(0,p.useRef)(null),s=(0,D.ye)("aiChat"),d=(0,D.ye)("aiCardDesigner"),c=(0,D.ye)("editDocAI"),{isInOfflineMode:u}=(0,O.$)(),h={bg:(0,k.ff)("#F9FAFBDD","gray.900"),border:(0,k.ff)("whiteAlpha.600","whiteAlpha.100"),iconColor:(0,k.ff)("trueblue.600","trueblue.200"),dividerColor:(0,k.ff)("blackAlpha.200","whiteAlpha.200")};return(0,j.O)({ref:a,handler:e=>{e.target.closest("[data-insert-widget-popover]")||o(null)}}),(0,l.jsxs)(l.Fragment,{children:[s&&c&&!u&&(0,l.jsxs)(K,{button:(0,l.jsxs)(S.z,{"data-guider-highlight":"design-partner-button",position:"relative",color:h.iconColor,"aria-label":T.ag._({id:"EVnzPs"}),bg:h.bg,p:1,borderWidth:"1px",borderColor:h.border,borderRadius:"md",shadow:"lg",mb:3,height:12,fontSize:"lg",children:[(0,l.jsx)(M.G,{icon:N.JyM}),(0,l.jsx)(A.C,{fontSize:"10px",px:"0.5",colorScheme:"trueblue",position:"absolute",bottom:1,right:1,children:(0,l.jsx)(_.cC,{id:"jsQZMk"})})]}),children:[(0,l.jsx)(I.x,{fontWeight:"600",children:(0,l.jsx)(_.cC,{id:"vfxGKr"})}),(0,l.jsx)(z.E,{src:F.src,borderRadius:"md"}),(0,l.jsx)(I.x,{fontSize:"sm",color:"gray.500",children:(0,l.jsx)(_.cC,{id:"N1JHTt"})})]}),s&&!c&&!u&&(0,l.jsx)(b.kH,{label:(0,l.jsx)(_.cC,{id:"EVnzPs"}),placement:"left",children:(0,l.jsx)(L.K,{position:"relative",children:(0,l.jsxs)(S.z,{"data-guider-highlight":"design-partner-button",position:"relative",color:h.iconColor,"aria-label":T.ag._({id:"EVnzPs"}),bg:h.bg,p:1,borderWidth:"1px",borderColor:h.border,borderRadius:"md",shadow:"lg",mb:3,onClick:()=>{R.T.emit("toggle",{})},height:12,fontSize:"lg",children:[(0,l.jsx)(M.G,{icon:N.JyM}),(0,l.jsx)(A.C,{fontSize:"10px",px:"0.5",colorScheme:"trueblue",position:"absolute",bottom:1,right:1,children:(0,l.jsx)(_.cC,{id:"jsQZMk"})})]})})}),d&&(0,l.jsx)(b.kH,{label:"Design with AI",placement:"left",children:(0,l.jsxs)(S.z,{color:h.iconColor,"aria-label":"Design with AI",bg:h.bg,p:1,borderWidth:"1px",borderColor:h.border,borderRadius:"md",shadow:"xl",mb:3,onClick:()=>{let e=prompt("What do you want to change?",P.B);e&&H.T.emit("openSuggestionEditor",{cardId:null,userMessage:e})},children:[(0,l.jsx)(M.G,{icon:N.Hh4}),(0,l.jsx)(A.C,{colorScheme:"trueblue",position:"absolute",bottom:1,right:1,children:(0,l.jsx)(_.cC,{id:"jsQZMk"})})]})}),(0,l.jsx)(L.K,{bg:h.bg,color:h.iconColor,p:1,borderWidth:"1px",borderColor:h.border,borderRadius:"md",shadow:"lg",ref:a,overflow:"hidden",spacing:1,children:n.map((e,n)=>(0,l.jsxs)(p.Fragment,{children:[n>0&&(0,l.jsx)(E.i,{borderColor:h.dividerColor}),e.map(e=>{let{name:n,itemGroups:a,icon:s,featureFlag:d}=e;return d&&!i[d]?null:(0,l.jsx)(B.LT,{itemGroups:a,icon:s,name:n,editor:t,setOpenButton:o,isOpen:r===n},n)})]},n))})]})},ea=(0,p.memo)(e=>{let{editor:t}=e,n=(0,w.Yy)();return(0,C.k)()?(0,l.jsx)(b.Wk,{isDark:n,children:(0,l.jsx)(y.k,{position:"fixed",w:"0%",h:"0%",right:6,top:"50%",alignItems:"center",zIndex:"sticky","data-testid":"insert-widget-wrapper",children:(0,l.jsx)(y.k,{position:"absolute",right:0,"data-guider-highlight":"insert-widget",direction:"column",className:"insert-widget",children:(0,l.jsx)(eo,{editor:t})})})}):null});var el=n(51161),es=n(97134),ed=n(40382),ec=n(62243),eu=n(302),ep=n(50576),eh=n(37243),em=n(79609),eg=n(26151),ef=n(27210),ex=n(44170),ev=n(45075);let ey=e=>(0,l.jsx)(ev.lO,{...e,children:(0,l.jsxs)(s.xu,{position:"relative","data-selection-ring":"padded",children:[(0,l.jsx)(ef.ms,{as:"blockquote"}),(0,l.jsx)(s.xu,{position:"absolute",left:"0",top:"0",height:"100%",w:"var(--line-thickness)",backgroundColor:"var(--accent-color)",backgroundImage:"var(--accent-gradient)"})]})}),eb=em.ZP.extend({group:"cardBlock layoutBlock footnoteBlock tableBlock smartLayoutBlock",content:"(block | calloutBlock)+",addNodeView:()=>(0,ef.fW)(ey,{update:ex.E7}),addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),unwrapQuoteOnDelete:()=>e=>{let{state:t,tr:n}=e,{selection:i}=t;if(!i.empty)return!1;let r=(0,eh.Kk)(e=>e.type.name===eb.name)(i);if(!r||!(i.from<=r.pos+2))return!1;let o=i.$from.blockRange(i.$to);if(!o)return!1;let a=(0,eg.k9)(o);return!!a&&(n.lift(o,a),!0)}}}});var ew=n(86900);let eC=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,ek=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,ej=ew.ZP.extend({addInputRules(){return[(0,eh.Cf)({find:eC,type:this.type}),(0,eh.Cf)({find:ek,type:this.type})]},renderHTML(e){let{HTMLAttributes:t}=e;return["b",(0,eh.P1)(this.options.HTMLAttributes,t),0]}});var eS=n(9891),eA=n(1564),eI=n(43273);let ez=eh.NB.create({name:"buttonGroup",content:"button{1, ".concat(eI.YZ,"}"),group:"block",allowGapCursor:!1,addNodeView:()=>(0,ef.fW)(eA.N,{update:ex.I_}),parseHTML:()=>[{tag:"div[class=button-group]"},{tag:"buttons"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"button-group"}),0]},renderHTMLforAI(e){let{node:t}=e;return["buttons",{},0]}});var eL=n(29117),eE=n(73200),eN=n(7096),eM=n(43271),e_=n(23491),eT=n(98210),eR=n(92179),eH=n(56907),eP=n(61372),eO=n(32690),eD=n(39449);let eW=e=>{let{node:t,editor:n,getPos:i,decorations:r}=e,{variant:o,icon:a,color:d}=t.attrs,{firstChildSize:c}=(0,eH.z)(r),{theme:u,isDark:h}=(0,eT.t)(r),m=(0,eP.v0)(c,u),g=(0,eM.H_)((0,eM.y)(u)),{colorScheme:f,icon:x}=(0,X.hw)(o),{backgroundColor:v,iconColor:y,bodyColor:b}=d?eF(d):eB(h,f,g),w=(0,p.useCallback)(()=>{n.isEditable&&n.commands.selectNodeAtPos(i())},[n,i]);return(0,l.jsx)(ev.lO,{...e,children:(0,l.jsxs)(s.xu,{backgroundColor:"".concat(v," !important"),pt:"0.25em",pb:"0.5em",px:"1em",className:"calloutBox",borderRadius:"var(--box-border-radius)",css:{"--body-color":b,"--heading-color":b},"data-selection-ring":!0,pos:"relative",children:[(0,l.jsxs)(eL.U,{direction:"row",align:c?"baseline":"flex-start",spacing:"1em",children:[a&&(0,l.jsx)(I.x,{sx:m,onClick:w,color:y,mt:c?void 0:"1em",contentEditable:!1,children:(0,l.jsx)(M.G,{icon:x,fixedWidth:!0})}),(0,l.jsx)(ef.ms,{style:{flex:"1 1 auto",minWidth:0},className:(0,eE.cx)(eN.LY)})]}),(0,l.jsx)(eR.A,{...e})]})})},eF=e=>{let t=(0,e_.DP)(e),n=t?(0,e_.m2)(e,.7):(0,e_.m2)(e,.3);return{backgroundColor:e,bodyColor:t?"white":"black",iconColor:n}},eB=(e,t,n)=>{let i=e?(0,e_.m2)("accent"===t?n:eO.Ox.dark[t].hex,.15):(0,e_.m2)("accent"===t?n:eO.Ox.light[t].hex,.85),r=e?"accent"===t?(0,e_.m2)(n,.7):eD.eR.dark[t].hex:"accent"===t?(0,e_.m2)(n,.3):eD.eR.light[t].hex;return{backgroundColor:i,bodyColor:e?"white":"black",iconColor:r}},eG=eh.NB.create({name:"calloutBox",group:"cardBlock layoutBlock footnoteBlock smartLayoutBlock",content:"(block | calloutBlock)+",selectable:!0,isolating:!0,containerHandle:!0,addAttributes:()=>({variant:{default:"note"},icon:{default:!0},color:{}}),addNodeView:()=>(0,ef.fW)(eW,{update:ex.E7}),parseHTML:()=>[{tag:"aside"}],renderHTML(e){let{HTMLAttributes:t}=e;return["aside",(0,eh.P1)(t,{class:"calloutBox"}),0]}});var eU=n(54563),eV=n(42616),eq=n(87283),eK=n(4279),eY=n(21086),eX=n(71030),e$=n(45989),eZ=n(72205),eQ=n(91492),eJ=n(12971),e0=n(26923),e1=n(98537),e2=n.n(e1),e4=n(40857),e3=n(9355),e5=n(93593),e7=n(44317),e8=n(3423),e6=n(21800),e9=n(38799),te=n(78112),tt=n(97912),tn=n(88424),ti=n(1798),tr=n(31601),to=n(8607),ta=n(26714),tl=n(87651),ts=n(69251),td=n(54933),tc=n(84636),tu=n.n(tc),tp=n(27238),th=n(81363),tm=n(60111),tg=n(70065),tf=n(92850),tx=n(26468),tv=n(22226),ty=n(2338),tb=n(54326),tw=n(97217),tC=n(42946),tk=n(71098),tj=n(91722),tS=n(77595),tA=n(19166);let tI=(0,p.memo)(e=>{let{editor:t,onClose:n,handleAddCard:i,recentlyUsedTemplates:r}=e,o=(0,tg.p)(),a=(0,tj.ON)("modal"),s=(0,p.useCallback)(e=>{o({status:"success",title:T.ag._({id:"WJGAWS"}),duration:1300,isClosable:!1,position:"top"}),n(),i(e,"modal")},[n,i,o]),d=r.filter(e=>!(0,tj.pA)(t,e)).slice(0,tA.t);return(0,l.jsx)(b.Wk,{isDark:!1,children:(0,l.jsxs)(tf.u_,{isOpen:!0,onClose:n,size:{base:"5xl","2xl":"6xl"},children:[(0,l.jsx)(tx.Z,{}),(0,l.jsxs)(tv.h,{children:[(0,l.jsx)(ty.o,{}),(0,l.jsx)(tb.x,{children:(0,l.jsx)(_.cC,{id:"HNcS3K"})}),(0,l.jsx)(tw.f,{pb:6,children:(0,l.jsxs)(L.K,{spacing:6,children:[!!d.length&&(0,l.jsxs)(L.K,{children:[(0,l.jsxs)(I.x,{color:"gray.700",children:[(0,l.jsx)(M.G,{icon:tC.SZw,fixedWidth:!0})," ",(0,l.jsx)(_.cC,{id:"uabU9X"})]}),(0,l.jsx)(ts.r,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(tS.q1.lg," + 0.4em), 1fr))"),gap:3,children:d.map(e=>{let{jsonContent:t,id:n,name:i}=e;return(0,l.jsx)(tk.L,{isDark:!1,isSelected:!1,tooltip:i(),label:i(),onClick:()=>s(n),w:"auto",templateIcon:(0,l.jsx)(tS.n7,{content:t,isDark:!1,borderRadius:"base",size:"lg"})},n)})})]}),a.map(e=>{let{subcategory:n,items:i}=e;return(0,l.jsxs)(L.K,{children:[(0,l.jsx)(I.x,{color:"gray.700",children:n}),(0,l.jsx)(ts.r,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(tS.q1.lg," + 0.4em), 1fr))"),gap:3,children:i.filter(e=>!(0,tj.pA)(t,e)).map(e=>{let{id:t,name:n,jsonContent:i}=e,o=!!r.find(e=>{let{id:n}=e;return n===t});return(0,l.jsx)(tk.L,{isDark:!1,isSelected:!1,tooltip:"".concat(n()," ").concat(o?T.ag._({id:"uabU9X"}):""),label:n(),onClick:()=>s(t),w:"auto",templateIcon:(0,l.jsx)(tS.n7,{content:i,isDark:!1,borderRadius:"base",size:"lg"}),boxShadow:"none"},t)})})]},n)})]})})]})]})})});var tz=n(9237),tL=n(32817),tE=n(18960),tN=n(22156),tM=n(86081);let t_=(0,p.memo)(e=>{let{setCardContent:t,editor:n,isFocused:i,edgeLayoutsDisabled:r,isNested:o}=e,a=(0,w.Yy)(),{isOpen:s,onClose:d,onOpen:c}=(0,tp.M)({id:"cardTemplatesModal"}),[u,h]=(0,tL.I)(tE.H.recentlyUsedCardTemplateIds,[]),m=(0,p.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"placeholder";t(e),"aiCardAfter"!==e&&h((0,tM.Z)(e,u));let i="placeholder"===n?th.fe.CARD_TEMPLATE_PLACEHOLDER:th.fe.CARD_TEMPLATE_MODAL;(0,tm.Z)({nodeName:"card",key:e},i)},[t,u,h]),[g,f]=(0,p.useMemo)(()=>{let e=u.map(e=>(0,tj.wP)()[e]).filter(e=>!!e),t=(0,tj.ON)("placeholder").flatMap(e=>{let{items:t}=e;return t});return[tu()([...e,...t],"id").filter(e=>!!e).filter(e=>!(0,tj.pA)(n,e,e=>{var t;let{jsonContent:n}=e;return r&&(0,tN.Vc)(null===(t=n.attrs)||void 0===t?void 0:t.layout)})),e]},[r,n,u]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(b.Wk,{isDark:a,children:(0,l.jsx)(tl.U,{in:i||s,onAnimationComplete:()=>{var e,t;null===(e=(t=n.commands).refreshBubbleMenu)||void 0===e||e.call(t)},children:(0,l.jsxs)(L.K,{overflow:"hidden",mx:16,mb:12,contentEditable:!1,onMouseDown:tz.br,cursor:"default",fontFamily:"Inter, sans-serif",color:"var(--body-color-muted)",children:[(0,l.jsx)(I.x,{fontSize:"sm",fontWeight:"normal",children:(0,l.jsx)(_.cC,{id:"3h21H3"})}),(0,l.jsxs)(ts.r,{templateColumns:"repeat(auto-fill, minmax(calc(".concat(tS.q1.md," + var(--chakra-space-1-5)), 1fr))"),fontSize:"1rem",gap:2,children:[g.slice(0,o?2:4).map(e=>{let{id:t,jsonContent:n,name:i}=e;return(0,l.jsx)(tk.L,{tooltip:i(),isDark:a,templateIcon:(0,l.jsx)(tS.n7,{content:n,isDark:a,borderRadius:"base",maxH:"5em",overflow:"hidden"}),isSelected:!1,onClick:()=>m(t),w:"auto",minW:"auto",fontSize:"1em"},t)}),(0,l.jsx)(tk.L,{tooltip:T.ag._({id:"bHT6mZ"}),label:(0,l.jsx)(_.cC,{id:"iTylMl"}),isDark:a,templateIcon:(0,l.jsx)(M.G,{icon:td.emM,fixedWidth:!0}),isSelected:!1,onClick:c,fontSize:"1em"}),(0,l.jsx)(tk.L,{isDark:a,templateIcon:(0,l.jsx)(M.G,{icon:td.JyM,fixedWidth:!0}),label:(0,l.jsx)(_.cC,{id:"ziAjHi"}),tooltip:T.ag._({id:"tkZYgO"}),isSelected:!1,onClick:()=>{m("aiCardAfter")},fontSize:"1em"})]})]})})}),s&&(0,l.jsx)(tI,{editor:n,onClose:d,handleAddCard:m,recentlyUsedTemplates:f})]})});t_.displayName="ChooseCardTemplatePlaceholder";var tT=n(73360),tR=n(97284),tH=n(68329),tP=n(54317),tO=n(6363),tD=n(75768),tW=n(32899);let tF=e=>{let{isVisible:t,setLayout:n,editor:i}=e,r=(0,w.Yy)(),o=r?"invert(.8) brightness(1.2)":"invert(0)";return(0,l.jsx)(b.Wk,{isDark:r,children:(0,l.jsx)(tl.U,{in:t,onAnimationComplete:()=>{var e,t;null===(e=(t=i.commands).refreshBubbleMenu)||void 0===e||e.call(t)},children:(0,l.jsxs)(L.K,{overflow:"hidden",mx:16,mb:12,contentEditable:!1,onMouseDown:tz.br,cursor:"default",children:[(0,l.jsx)(I.x,{color:"var(--body-color-muted)",fontSize:"sm",fontFamily:"Inter",fontWeight:"normal",children:(0,l.jsx)(_.cC,{id:"q+/7Td"})}),(0,l.jsxs)(tD.h,{spacing:1,children:[(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"loNm+3"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("top"),icon:(0,l.jsx)(z.E,{src:"/_next/static/media/layout-top.bb63e01e.svg",filter:o})}),(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"dL4qXb"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("left"),icon:(0,l.jsx)(z.E,{src:"/_next/static/media/layout-left.deebff4d.svg",filter:o})}),(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"kVQU97"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("right"),icon:(0,l.jsx)(z.E,{src:"/_next/static/media/layout-right.af6aebc7.svg",filter:o})}),(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"3eqz61"}),h:"auto",p:1,variant:"ghost",onClick:()=>n("behind"),icon:(0,l.jsx)(z.E,{src:"/_next/static/media/layout-behind.f3d267a6.svg",filter:o})})]})]})})})},tB=(e,t,n)=>{if(n)return{};if("behind"===e||"blank"===e)return{borderRadius:"var(--card-border-radius)"};if("left"===e)return"accent"===t?{borderLeftRadius:"var(--card-border-radius)"}:"body"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("right"===e)return"body"===t?{borderLeftRadius:"var(--card-border-radius)"}:"accent"===t?{borderRightRadius:"var(--card-border-radius)"}:{};if("top"===e||"mobileLeft"===e)return"body"===t?{borderBottomRadius:"var(--card-border-radius)"}:"accent"===t?{borderTopRadius:"var(--card-border-radius)"}:{};if("mobileRight"===e){if("accent"===t)return{borderBottomRadius:"var(--card-border-radius)"};if("body"===t)return{borderTopRadius:"var(--card-border-radius)"}}return{}},tG=e=>{let{node:t,getPos:n,decorations:i,editor:r}=e,o=t.attrs,a=(0,tO.en)(i),{isNested:s,insideSideLayout:d}=(0,tT.$D)(i),c=(null==a?void 0:a.layout)==="blank",u=tB(a.layout,o.itemId,"full"===a.cardSize),h={flexDirection:"column",justifyContent:o.verticalAlign||"var(--card-vertical-align)"},m=(0,tN.$U)(null==a?void 0:a.layout),g=m&&!m.items[o.itemId],[f]=(0,tH.D)(a.cardId),v=(0,to.R)(i),b=(0,x.CG)(te.hN),w=(0,ta.Od)(i),C=(0,tR.W)(),k=(0,D.ye)("cardTemplatesPlaceholder"),j=(0,tr.z$)(),S=b&&v&&c,A=(0,p.useCallback)(e=>{let t=(0,eJ.nv)(r.state.doc.resolve(n()),tP.KH),i=t.length>0?t[0].pos:null;i&&(null==j||j.track(tr.AA.CARD_LAYOUT_UPDATED,{source:"empty-card-placeholder",layout:e}),r.chain().setCardLayout(i,e,C).selectInsideCardBody(i).focus().run())},[r,n,C,j]),I=(0,p.useCallback)(e=>{if(!k)return;let t=(0,eJ.nv)(r.state.doc.resolve(n()),tP.KH),i=t.length>0?t[0]:null;if(!i)return;let o=(0,Y.e1)()[e]||(0,Y.e1)().blankCard,{layoutTemplateColumns:a,...l}=i.node.attrs;o.attrs={...l,...o.attrs};let s=i.pos,d=i.pos+i.node.nodeSize;r.chain().insertContentAt({from:s,to:d},o,{updateSelection:!1}).selectInsertedNode().run()},[k,r,n]);return(0,l.jsx)(ef.T5,{as:"div",style:{...g?{display:"none"}:{}},children:(0,l.jsxs)(y.k,{"data-content-reference":!0,className:"card-layout-cell-bg",w:"100%",h:"100%",position:"relative","data-selection-ring":!0,"data-selection-background":!0,..."presentCurrent"!==f&&u,...h,children:[(0,l.jsx)(ef.ms,{as:"div",style:{width:"100%"}}),S&&k&&(0,l.jsx)(t_,{isFocused:w,editor:r,setCardContent:I,edgeLayoutsDisabled:d,isNested:s}),S&&!s&&!k&&(0,l.jsx)(tF,{isVisible:w,setLayout:A,editor:r})]})})};var tU=n(37173),tV=n(40139),tq=n(59053);let tK=e=>{var t;let{hasImage:n,onEditImage:i,image:r,editor:o,isLoading:a,openEditBackgroundDrawer:d,borderProps:c,accentLayout:u,...p}=e,h=!!i;return n?null:(0,l.jsx)(y.k,{align:"center",justify:"center",pos:"absolute",inset:0,role:"group",cursor:"default","data-layout-cut":"mobileLeft"===u?"top":u,...n?{}:{bgColor:"gray.200"},...p,children:!o.isThumbnail&&(0,l.jsx)(y.k,{pos:"absolute",inset:0,justify:"center",align:"center",cursor:h?"default":void 0,onClick:i,children:(0,l.jsx)(s.xu,{color:"gray.400",h:"100%",w:"100%",children:(0,l.jsx)(tn.k3,{icon:tq.ah[e5.cx].icon,isUploading:!1,isLoading:a,loadingProvider:null==r?void 0:null===(t=r.loadImageParams)||void 0===t?void 0:t.provider,onSelectAndFocus:i,hasUploadError:!1,isAccentImageDrawer:!0,openEditBackgroundDrawer:d,h:"100%",w:"100%",hideQuickActions:"behind"===u,...c})})})})};var tY=n(46007),tX=n(74216);let t$=e=>{let{background:t,rounded:n,resizeParams:i,cutLayout:r}=e,o=(0,tX.wh)(t,!1,i);return(0,l.jsx)(s.xu,{position:"absolute",inset:"0",overflow:"hidden",borderRadius:n?"var(--box-border-radius)":"inherit","data-layout-cut":r,...o})},tZ=e=>{var t,n;let{background:i,rounded:r,cutLayout:o}=e,a=i.image&&!(0,tY.zd)(i.image.src)&&!(null===(t=i.image.meta)||void 0===t?void 0:t.has_transparency),d=a?(0,tX.wh)(i,!1,{width:400,blur:50}):void 0;return(0,l.jsx)(s.xu,{position:"absolute",inset:"0","data-image-fit-bg":!0,overflow:"hidden",...d,borderRadius:r?"var(--box-border-radius)":"inherit",marginY:r?"1em":void 0,bgPosition:"center","data-layout-cut":o,children:a&&!(0,tt.S6)((null===(n=i.image)||void 0===n?void 0:n.src)||void 0)&&(0,l.jsx)(s.xu,{backdropFilter:"blur(6em)",inset:0,position:"absolute",borderRadius:"inherit","data-selection-ring":"inside"})})},tQ=e=>{let{image:t,resizeParams:n,cutLayout:i}=e,{src:r,tempUrl:o,meta:a}=t,s=(null==a?void 0:a.frame_count)&&a.frame_count>1,d=r&&!s&&n?(0,tt.SN)(r,n,a):r;return(0,l.jsx)(z.E,{src:d||void 0,fallbackSrc:o||void 0,borderRadius:"var(--box-border-radius)",pos:"relative",flex:"0 1 auto",minH:0,minW:0,width:"auto",maxW:"100%","data-layout-cut-fg":i,className:"reset-max-width-with-margins"})},tJ={width:1200},t0=e=>{var t,n,i;let r=(0,x.CG)(te.Pu),o=(null===(t=r.config)||void 0===t?void 0:t.accentBackgrounds)&&(null===(n=r.config)||void 0===n?void 0:n.accentBackgrounds.length)>0;return e.source||(null===(i=e.image)||void 0===i?void 0:i.source)||o?e5.cx:e4.r},t1=e=>{let{editor:t,node:n,getPos:i}=e;(0,p.useEffect)(()=>{"cardLayoutItem"===n.type.name&&"accent"===n.attrs.itemId&&setTimeout(()=>{t.commands.command(e=>{let{tr:r}=e;return(0,tN.BA)(r,i(),n,t.schema),!0})})},[t,i,n])},t2=e=>{var t,n,i,r,o;let{node:a,decorations:s,editor:d,getPos:c}=e,u=a.attrs,{background:h}=u;t1(e);let{openBackgroundTab:m,...g}=(0,e7.a)(),f=t0(h),v=(0,p.useCallback)(e=>{d.commands.updateNestedAttributesAtPos(c(),e)},[d,c]),b=(0,p.useCallback)(e=>{d.commands.updateNestedAttributesAtPos(c(),{background:e2()({},h,{image:{...e,meta:{has_transparency:!0}}})})},[d,c,h]),{defaultFullBleed:w}=(0,x.CG)(te.US),C=(0,tO.en)(s),k=(null==C?void 0:C.cardSize)==="default"?"full"===w:(null==C?void 0:C.cardSize)==="full",j=null==C?void 0:C.cardId,S=null==C?void 0:C.layout,A="behind"===S,I=d.isThumbnail?tt.Iv:"right"===S||"left"===S||"mobileLeft"===S||"mobileRight"===S?tJ:void 0,{bgRemovalInProgress:z}=(0,e8.CI)({editor:d,id:j,src:null===(t=h.image)||void 0===t?void 0:t.src,updateAttributes:b}),L=(0,tV.U)(u,S),E=!!(0,tN.$U)(S).items[u.itemId],N=tB(C.layout,u.itemId,"full"===C.cardSize),M="none"===h.type||h.type===eQ.E.IMAGE&&!h.image||h.type===eQ.E.IMAGE&&!(null===(n=h.image)||void 0===n?void 0:n.src)&&!(null===(i=h.image)||void 0===i?void 0:i.tempUrl),_="fit"===L&&h.image&&!M,T=(0,e6.qs)(d,c),{setBackgroundDrawerSourceKeyAction:R}=(0,e6.jn)(),H=(null===(r=h.image)||void 0===r?void 0:r.loadImageStatus)==="queued",P=(0,x.CG)(te.hN);(0,p.useEffect)(()=>tU.T.on("toggleEditBackgroundDrawer",e=>{let{openDrawer:t,cardId:n}=e;t&&n===j&&(R(f),m(!1))}),[f,j,m,R]);let O=null===(o=h.image)||void 0===o?void 0:o.uploadStatus,D=(0,e9.TZ)(),W=!k||"fit"===L||D?void 0:"left"===S||"right"===S?{borderRadius:"var(--box-border-radius)",marginY:"1em",height:"auto"}:"top"===S||"behind"===S?{width:"var(--editor-width)",position:"absolute",transform:"translateX(-50%)",left:"calc(50% - var(--doc-padding-left, 0px) / 2 + var(--doc-padding-right, 0px) / 2)"}:void 0,F=(0,p.useCallback)(e=>{(!(e.target instanceof Element)||e.target.closest("[data-card-layout]"))&&(T(),R(f),m(!1))},[f,T,m,R]);if(!E)return null;let B="mobileLeft"===S?"top":S;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ef.T5,{as:"div",style:{display:k?"flex":void 0},children:(0,l.jsxs)(y.k,{"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",w:"100%",h:"100%","data-selection-ring":"inside","data-selection-background":!0,"data-card-layout":null==C?void 0:C.layout,"data-fit-type":L,position:"relative","data-drag-handle":!0,...N,flexDirection:"column",justifyContent:"center",onClick:T,onDoubleClick:F,...W,bgSize:"fill"===L||A?"cover":"contain",p:"fill"===L||A?0:k?"1.5em":"1.25em",objectFit:"contain",css:{containerType:"size"},align:"center",justify:"center",children:[!_&&(0,l.jsx)(t$,{background:h,rounded:k&&!D,resizeParams:I,cutLayout:B}),_&&(0,l.jsx)(tZ,{background:h,rounded:k&&!D,cutLayout:B}),_&&(0,l.jsx)(tQ,{image:h.image,resizeParams:I,cutLayout:B}),A&&(0,l.jsx)(ti.g5,{background:h}),P&&(0,l.jsx)(e7.S,{editor:d,updateNestedAttributes:v,background:null==u?void 0:u.background,enableMask:A,isAccentImageDrawer:!0,...g}),(0,l.jsx)(tK,{isLoading:H,editor:d,hasImage:!M,image:h.image,onEditImage:P?T:void 0,openEditBackgroundDrawer:m,borderProps:N,accentLayout:null==C?void 0:C.layout,...N}),(O==e3.D.Uploading||z)&&P&&(0,l.jsx)(tn.HI,{removeBackground:z,scootRight:z&&("top"===S||"left"===S)}),O==e3.D.Error&&(0,l.jsx)(tn.s7,{})]})})})},t4=e=>{let{node:t}=e;return"accent"===t.attrs.itemId?(0,l.jsx)(t2,{...e}):(0,l.jsx)(tG,{...e})},t3=eh.NB.create({name:"cardAccentLayoutItem",group:"cardLayoutItemGroup",priority:eZ.a.CardAccentLayoutItem,selectable:!1,atom:!0,draggable:!0,imageKeyPath:"background.image",addAttributes:()=>({itemId:{default:"accent"},fitType:{},background:{default:{type:eQ.E.NONE},...(0,eJ.sw)("background")}}),addNodeView:()=>(0,ef.fW)(t4,{update:ex.E7}),addStorage:e0.gk,parseHTML(){return[{tag:"img[class=accent-image][bookmark]",getAttrs:(0,e0.xF)(this.storage)},{tag:"img[class=accent-image][".concat(eY.L,"]"),getAttrs:e=>{let t=(0,eX.z)(e);return{background:{type:eQ.E.IMAGE,image:t}}}},{tag:"img[class=accent-image][src]",getAttrs:e=>({fitType:e.getAttribute("fitType")||"fit",background:{type:eQ.E.IMAGE,image:{src:e.getAttribute("src")||"",source:"image.custom"}}})},{tag:"img[class=accent-image]"},{tag:"div[class=card-accent-layout-item]",context:"card/"}]},renderHTMLforAI(e){let{node:t}=e,n=(0,e0.ml)(this.storage,t),i=t.attrs.background;return["img",{bookmark:n,class:"accent-image",alt:i.image&&(0,e$.K)(i.image)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"card-accent-layout-item"})]}});var t5=n(12135),t7=n(27191),t8=n(52780),t6=n(9936);let t9=new t7.H$("cardLayoutResizing");class ne{getActiveHandleAbs(e){return this.activeHandle?(0,t6.XV)(e,this.activeHandle):null}reset(){return this.activeHandle=null,this.side=null,this.dragging=null,this}setHandle(e,t){return null===t.setHandle?(this.activeHandle=null,this.side=null):(this.activeHandle=(0,t6.jS)(e,t.setHandle.pos),this.side=t.setHandle.side),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(t9);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(){this.activeHandle=null,this.dragging=null}}var nt=n(68015),nn=n.n(nt),ni=n(1338),nr=n(53979);let no=e=>t9.getState(e.state),na=(e,t)=>{e.dispatch(e.state.tr.setMeta(t9,{setHandle:t}))},nl=(e,t)=>{e.dispatch(e.state.tr.setMeta(t9,{setDragging:t}))},ns=e=>{e.dispatch(e.state.tr.setMeta(t9,{reset:!0}))},nd=(e,t)=>{if(!e.editable||!t.target||t.target.closest(".column-resize-handle"))return;let n=no(e);if(n.dragging)return;let i=function(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n||-1===n.inside)return null;let i=e.domAtPos(n.inside);if(!i)return null;let r=i.node.childNodes[i.offset];if(!r)return null;let o=e.state.doc.resolve(n.inside);if(!o.nodeAfter||!(0,tP.pv)(o.nodeAfter))return null;let a=(0,eJ.nv)(o,tP.KH)[0];if(!a||!(0,tN.$U)(a.node.attrs.layout).allowResizing)return null;let{left:l,right:s}=r.getBoundingClientRect();if(t.clientX-l<=5){let n=e.posAtCoords({left:t.clientX-10,top:t.clientY});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);return i&&(0,tP.pv)(i)?"cardLayoutItem"===i.type.name?{pos:n.inside,side:"right"}:{pos:o.pos,side:"left"}:null}if(s-t.clientX<=5){let n=e.posAtCoords({left:t.clientX+10,top:t.clientY});if(!n)return null;let i=e.state.doc.nodeAt(n.inside);return i&&(0,tP.pv)(i)?"cardLayoutItem"===i.type.name?{pos:n.inside,side:"left"}:{pos:o.pos,side:"right"}:null}return null}(e,t),r=n.getActiveHandleAbs(e.state),o=n.side;null===r&&null===i||i&&i.side===o&&i.pos===r||na(e,i)},nc=(e,t)=>{let n=e.domAtPos(t);return n.node.childNodes[n.offset].offsetWidth},nu=(e,t)=>{let{node:n,offset:i}=e.domAtPos(t.start()),r=n.childNodes[i];do if(r&&r.classList&&r.classList.contains("node-card"))break;while(r=r.parentNode);return r},np=(e,t,n)=>{let i=(0,tN.$U)(n),r=t.querySelector('[data-node-view-content-inner="card"]'),o=e.attrs,a=(null==r?void 0:r.style.gridTemplateColumns)||o.layoutTemplateColumns||i.grid.gridTemplateColumns;if(!a)return null;let l=a.split(" ");if(!l.length)return null;let s=l[0].includes("fr"),d=[];if(s){let e=l.map(e=>+e.replace("fr","")),t=e.reduce((e,t)=>e+t,0);d=e.map(e=>e/t*100)}else d=l.map(e=>+e.replace("%",""));return d},nh=eh.NB.create({name:"cardLayoutItem",group:"cardLayoutItemGroup",content:"(block | cardBlock)+",selectable:!1,draggable:!1,isolating:!0,containerHandle:!0,priority:eZ.a.CardLayoutItem,addAttributes:()=>({itemId:{default:"body"}}),addNodeView:()=>(0,ef.fW)(t4,{update:ex.E7}),addCommands:()=>({handleCardAccentDelete:()=>e=>{let{state:t,commands:n}=e;if(!(0,eh.EG)(t.selection))return!1;let{node:i}=t.selection;if(!(0,tN.pt)(i))return!1;let r=(0,eh.Kk)(tP.KH)(t.selection);return!!r&&n.setCardLayout(r.pos,"blank")},selectInsideCardBody:e=>t=>{let{state:n,tr:i,commands:r}=t,o=n.doc.nodeAt(e);if(!o||!(0,tP.KH)(o))return!1;let a=(0,tN.wz)(i,e);if(0===Object.entries(a).length)return r.selectInsideNodeAtPos(e);let l=a.body;return!!l&&r.selectInsideNodeAtPos(l.pos)},setCardLayout:(e,t,n)=>i=>{let{tr:r,editor:o}=i;return(0,t5.G)(o,r,e,t,n)},removeCardLayout:e=>t=>{let{tr:n,editor:i}=t,r=(0,tP.Bw)(i,e);return!!r&&(0,t5.G)(i,n,r.pos,"blank")}}),parseHTML:()=>[{tag:"div[class=card-layout-item]"},{tag:"div[class=body]",context:"card/"}],addProseMirrorPlugins(){return[(0,tO.V6)(this.editor),new t7.Sy({key:t9,state:{init:()=>new ne,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==t9.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(e,t)=>(nd(e,t),!1),mouseleave:e=>(!function(e){let t=no(e);null===t.getActiveHandleAbs(e.state)||t.dragging||na(e,null)}(e),!1),mousedown:(e,t)=>(!function(e,t){if(!e.editable)return;let n=no(e),i=n.getActiveHandleAbs(e.state);if(null===i||n.dragging)return;let r=e.state.doc.resolve(i),o=r.node(),a=nu(e,r),l=a.querySelector('[data-node-view-content-inner="card"]');if(!l)return;let s=n.side,d=l.offsetWidth,c=nc(e,i),u=np(o,a,o.attrs.layout);if(!u)return;nl(e,{startX:t.clientX,startWidth:c,colWidths:u,totalWidth:d,colIndex:0});let p=null;function h(){window.removeEventListener("mouseup",h),window.removeEventListener("mousemove",m);let t=no(e);if(t.dragging){if(null===p){nl(e,null);return}if(t.dragging)try{let n=t.getActiveHandleAbs(e.state);(function(e,t,n){let i=e.state.doc.resolve(t).before(),r=n.map(e=>"".concat(e,"%")).join(" "),o=e.state.tr.setNodeAttribute(i,"layoutTemplateColumns",r);e.dispatch(o),function(e,t){let n=e.state.doc.resolve(t),i=nu(e,n).querySelector('[data-node-view-content-inner="card"]');i&&(i.style.gridTemplateColumns="")}(e,t)})(e,n,p),nl(e,null)}catch(t){ns(e)}p=null}}function m(t){if(!t.which)return h();let n=no(e),i=n.getActiveHandleAbs(e.state);if(!n.dragging||null===i)return;let{colWidths:r}=n.dragging,o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{totalWidth:i}=e,r=t.clientX-e.startX;return nn()(100*r/i/n,0)*n}(n.dragging,t,.1),l=r[0],d="left"===s?[25,37.5,50]:[50,62.5,75],c=l+o<d[0]?d[0]:l+o>d[d.length-1]?d[d.length-1]:d.find(e=>6.25>=Math.abs(e-l-o));(function(e,t){let n=e.querySelector('[data-node-view-content-inner="card"]');n&&(n.style.gridTemplateColumns=t.map(e=>"".concat(e,"%")).join(" "))})(a,p=(0,ni.GI)(r,0,c-l,25)),(0,nr.CI)(a)}window.addEventListener("mouseup",h),window.addEventListener("mousemove",m),t.preventDefault()}(e,t),!1)},decorations(e){let t=t9.getState(e),n=t.getActiveHandleAbs(e);if(null!==n){let i=[];try{let r=document.createElement("div");r.className="column-resize-handle ".concat(t.side),i.push(t8.p.widget(n+1,r));let o=e.doc.nodeAt(n);return i.push(t8.p.node(n,n+o.nodeSize,{class:"has-column-resize-handle"})),t8.EH.create(e.doc,i)}catch(e){return console.error("(caught) cardLayoutResizing error: ".concat(e.message)),t8.EH.empty}}},nodeViews:{}}})]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"card-layout-item"}),0]},renderHTMLforAI(e){let{node:t}=e;return["div",{class:"body"},0]}});var nm=n(9850),ng=n.n(nm),nf=n(59329),nx=n(23307),nv=n(35013),ny=n(75325),nb=n(92065),nw=n(61241),nC=n(39437);class nk extends ef.Al{updateProps(e){this.isDestroyed||this.renderer.updateProps(e)}mountEditor(){let e=this.editor,{nodeName:t,preventNodeOrExtensionTypes:n}=this.editorOptions,i=[...sr({isInnerEditor:!0}),nw.W,nv.Pi,ta.Jn,ny.R,nS.configure({outerEditor:e,getPos:this.getPos}),nb.L,nx.NM].filter(e=>!n||!n.includes(e.name)).map(e=>e.name===t?e.extend({topNode:!0}):e);return this.innerEditor=new nf.M({extensions:i,content:{type:t,content:this.node.content.toJSON(),attrs:ng()(this.node.attrs)},onBeforeCreate(i){let{editor:r}=i;r.schema.nodes={...e.schema.nodes},null==n||n.forEach(e=>{r.schema.nodes[e]&&delete r.schema.nodes[e]}),r.schema.marks={...e.schema.marks},r.schema.topNodeType=e.schema.nodes[t],r.extensionManager.schema=r.schema}}),this.innerEditor.gammaOrgId=e.gammaOrgId,this.innerEditor.gammaDocId=e.gammaDocId,this.innerEditor.parentEditor=e,this.innerEditor.view.updateState=function(e){if(!this.docView){this.state=e;return}this.updateStateInner(e,this.state.plugins!=e.plugins)},this.innerEditor.view.update=function(e){this.docView&&t8.tk.prototype.update.call(this,e)},this.updateProps({innerEditor:this.innerEditor}),this.innerEditor}destroy(){var e;this.isDestroyed=!0,null===(e=this.innerEditor)||void 0===e||e.destroy(),super.destroy()}update(e,t){var n;if(!e.sameMarkup(this.node))return!1;this.node=e;let i=null===(n=this.innerEditor)||void 0===n?void 0:n.view;if(!i)return!0;let r=i.state,o=e.content.findDiffStart(r.doc.content);if(null!=o){let{a:t,b:n}=e.content.findDiffEnd(r.doc.content),a=o-Math.min(t,n);a>0&&(t+=a,n+=a),i.dispatch(r.tr.replace(o,n,e.slice(o,t)).setMeta(nC.z,!0).setMeta("preventAutolink",!0))}return super.update(e,t)}stopEvent(e){return!!this.innerEditor&&this.innerEditor.view.dom.contains(e.target)}ignoreMutation(){return!0}get contentDOM(){return null}constructor(e,t,n){super(e,t,n),this.isDestroyed=!1,this.editorOptions=n,this.updateProps({mountEditor:()=>this.mountEditor(),destroyEditor:()=>{var e,t,n;null===(e=this.innerEditor)||void 0===e||e.destroy(),null===(t=(n=this.editor.commands).forceHideBubbleMenu)||void 0===t||t.call(n,!1),setTimeout(()=>{this.updateProps({innerEditor:void 0})})}})}}function nj(e,t){return n=>new nk(e,n,t)}let nS=eh.hj.create({name:"innerEditorExtension",addOptions:()=>({outerEditor:null,getPos:null}),addProseMirrorPlugins(){let{outerEditor:e,getPos:t}=this.options;return[new t7.Sy({appendTransaction:n=>{let i=n[0];if(!i)return null;if(!i.getMeta(nC.z)){let i=e.state.tr,r=eg.KS.offset(t()+1);for(let e=0;e<n.length;e++){let t=n[e].steps;for(let e=0;e<t.length;e++){let n=t[e],o=n.map(r);!o&&n instanceof eg.FC&&0==n.from&&(o=nA(n,r)),o&&i.step(o)}}i.setMeta(nC.e,!0).setMeta("preventAutolink",!0),i.docChanged&&e.view.dispatch(i)}return null}})]},addKeyboardShortcuts(){let{outerEditor:e}=this.options;return{"Mod-z":()=>e.commands.undo(),"Mod-y":()=>e.commands.redo()}}}),nA=(e,t)=>{let n=t.mapResult(e.from,1),i=t.mapResult(e.to,-1),r=t.map(e.gapFrom,1),o=t.map(e.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||o>i.pos?null:new eg.FC(n.pos,i.pos,r,o,e.slice,e.insert,e.structure)};var nI=n(86745),nz=n(43988);let nL=e=>{let{decorations:t,editor:n,getPos:i,destroyEditor:r,mountEditor:o}=e,a=(0,x.TL)();(0,nI.t)(n);let{mountEditor:l,activeNoteCardId:s}=(0,x.CG)(g.Vy),{parentCardId:d,isNested:c}=(0,tT.$D)(t),u=!c&&(0,nz.vS)(n,i(),d),h=s===d&&l===o,m=u&&!h&&!!o&&!c&&!n.isThumbnail;(0,p.useEffect)(()=>{m&&a((0,g.IS)({activeNoteCardId:d,mountEditor:o,destroyEditor:r}))},[m,r,a,o,d])};var nE=n(38564),nN=n(21514),nM=n(23186),n_=n(81047);let nT=new t7.H$("cardNotesPlugin"),nR=(e,t)=>new t7.Sy({key:nT,props:{attributes:()=>{let n=t.getState();return(0,g.v7)(n)&&(0,nz.uj)()&&!(0,nz.$v)(e)&&(0,te.hN)(n)&&!e.isStatic?{class:"card-notes-active"}:{class:""}},decorations:n=>{let{doc:i,selection:r}=n,o=t.getState();if(!(0,g.v7)(o)||!(0,nz.uj)()||(0,nz.$v)(e)||!(0,te.hN)(o)||e.isStatic)return;let a=(0,nM.AQ)(e.state.doc,r.from);if(a)return t8.EH.create(i,[t8.p.node(a.pos,a.pos+a.node.nodeSize,{class:"card-notes-active-parent-card"})])}},appendTransaction:(t,n,i)=>{if(!(0,nz.uj)()||(0,nz.$v)(e)||e.isThumbnail||e.isStatic)return;let r=i.tr;return((0,nN.W)(t,n,i,r,"cardNotes"),nP(t,n,i,r),r.docChanged)?r:null}}),nH=e=>e.map(e=>{let t=0===e.slice.content.size;return e.from!==e.to&&t?{type:"delete",step:e}:e.from!==e.to||t?e.from===e.to||t?null:{type:"replace",step:e}:{type:"insert",step:e}}).filter(e=>!!e),nP=(e,t,n,i)=>{e.forEach(e=>{let r=e.steps.filter(e=>e instanceof eg.Pu||e instanceof eg.FC);if(1!==r.length)return;let o=e.getMeta(nE.Gt);(null==o?void 0:o.isChangeOrigin)===!0||e.getMeta(nC.e)||e.getMeta("appendedTransaction")||e.getMeta("cardNotesHandled")||e.getMeta("rearrangeCards")||nH(r).filter(e=>"delete"===e.type||"replace"===e.type).forEach(e=>{let{step:r}=e,{from:o,to:a}=r;t.doc.nodesBetween(o,a,(e,r)=>{if("cardNotes"===e.type.name){var a;let l=t.doc.resolve(r),s=(0,eh.qv)(l,tP.KH),d=(0,eh.N2)(n.doc,e=>(0,tP.KH)(e)&&e.attrs.id===(null==s?void 0:s.node.attrs.id));if(!d[0])return;let c=(0,eh.N2)(d[0].node,e=>"cardNotes"===e.type.name);if(c.length>0&&(null===(a=c[0])||void 0===a?void 0:a.node.content.eq(e.content))&&d[0].pos===(null==s?void 0:s.pos))return;let u=(0,nM.AQ)(n.doc,o);if(!u){console.warn("[preventNotesDelete] parentCard not found");return}let p=n.doc.resolve(u.pos);if((0,nz.cM)(p)){let t=(0,n_.lo)(n.doc,u.pos,!1);if(null===t){console.warn("[preventNotesDelete] insertPos not found");return}i.insert(t,e.content)}else{let t=u.pos+u.node.nodeSize-1;i.insert(t,e)}}})})})},nO=eh.NB.create({name:"cardNotes",content:"cardNotesBlock+",selectable:!1,atom:!0,parseHTML:()=>[{tag:"div[class=card-notes]"},{tag:"notes"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"card-notes"}),0]},renderHTMLforAI:()=>["notes",0],renderText:()=>"",addProseMirrorPlugins(){let e=(0,x.bh)();return[nR(this.editor,e)]},addNodeView(){return this.editor.shouldUsePublishedVersion?(0,ef.fW)(()=>null):nj(nL,{nodeName:this.name,preventNodeOrExtensionTypes:["dropCursor","smartLayout","doc","document","card","slashMenu","mediaUpload","GammaMention"]})}});var nD=n(47443),nW=n(52929),nF=n(80877),nB=n(74444),nG=n(17993);let nU=e=>(0,l.jsx)(s.xu,{bg:"var(--body-color)",opacity:"0.4",borderRadius:"sm",...e});var nV=n(14581),nq=n(33945),nK=n(87103),nY=n(97010),nX=n(11082),n$=n(44598),nZ=n(27821),nQ=n(85391),nJ=n(21298),n0=n(69465),n1=n(33279);let n2=(0,p.memo)(e=>{let{cardId:t,docId:n,editor:i,cards:r,level:o,showNested:a,isPresentMode:d}=e,c=(0,n$.T)({cardId:t}),u=(0,x.CG)(te.yx),h=(0,p.useCallback)(e=>{(0,nQ.l)(i,e,t)},[i,t]),m=(0,nZ.C7)(),g=(0,p.useMemo)(()=>{let e=(0,n1.gq)({cardId:t,docId:n,isPresentMode:d});return m?(0,n0.Op)({url:e,doc:u}):e},[t,n,u,d,m]),{listStyle:f,paddingLeft:v,marginLeft:y}=(0,nJ.fY)(o);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nY.aV,{mb:"0.5em",children:(0,l.jsx)(nY.HC,{listStyleType:f,pl:v,ml:y,children:(0,l.jsx)(s.xu,{display:"inline",children:(0,l.jsx)(nX.r,{href:g,className:"link",role:"link",isExternal:!m,noOfLines:1,wordBreak:"break-word",onClick:h,display:"-webkit-inline-box",verticalAlign:"top",children:(null==c?void 0:c.title)||(0,l.jsx)(_.cC,{id:"wja8aL"})})})})}),a&&r.map(e=>(0,l.jsx)(n2,{cardId:e.id,cards:e.children,editor:i,level:o+1,showNested:a,docId:n,isPresentMode:d},e.id))]})});n2.displayName="CardTOCItem";let n4=e=>{let{node:t,editor:n,getPos:i}=e,{nested:r}=t.attrs,o=i(),a=(0,nM.AQ)(n.state.doc,o),d=(0,x.CG)((0,te.ZL)({cardId:null==a?void 0:a.node.attrs.id,showAll:nK.Oj})),c=(0,x.CG)(te.yx),u=(0,x.CG)(te.gh),p=(0,x.CG)(te.Ql),h=u===nq.q.SLIDE_VIEW;return(0,l.jsx)(ev.lO,{...e,as:"div",children:(0,l.jsxs)(s.xu,{cursor:"default",pointerEvents:p?"none":void 0,borderRadius:"var(--box-border-radius)","data-selection-ring":!0,className:"card-toc",children:[0===d.length&&(0,l.jsxs)(nD.b,{colorScheme:"gray",color:"gray.800",fontFamily:"Inter, sans-serif",fontSize:"1em",py:"0.75em",px:"1em",children:[(0,l.jsx)(nW.z,{w:"1em",h:"1em",alignSelf:"center",mr:"0.75em"}),(0,l.jsxs)(s.xu,{children:[(0,l.jsx)(nF.C,{fontSize:"1em",lineHeight:"1.5em",children:(0,l.jsx)(_.cC,{id:"519v/x"})}),(0,l.jsx)(nB.X,{fontSize:"0.75em",lineHeight:"1.5em",children:(0,l.jsx)(_.cC,{id:"HmhQ3B"})})]})]}),d.map(e=>(0,l.jsx)(n2,{cardId:e.id,cards:e.children,editor:n,level:0,showNested:r,docId:(null==c?void 0:c.id)||"",isPresentMode:h},e.id))]})})},n3=e=>(0,l.jsx)(nV.T,{children:(0,l.jsxs)(nG.g,{spacing:"0.5em",align:"start",children:[(0,l.jsx)(nU,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,l.jsx)(nU,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,l.jsx)(nU,{h:"1em",w:"14em",bg:"var(--link-color)"}),(0,l.jsx)(nU,{h:"1em",w:"14em",bg:"var(--link-color)"})]})}),n5=eh.NB.create({name:"tableOfContents",group:"block",atom:!0,selectable:!0,dynamic:!0,addAttributes:()=>({nested:{default:!1}}),parseHTML:()=>[{tag:"div[class=toc]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"toc"})]},addNodeView(){return this.editor.isThumbnail?(0,ef.fW)(n3,{update:ex.E7}):(0,ef.fW)(n4,{update:ex.E7})}});var n7=n(37164),n8=n(91436),n6=n(79972),n9=n(59323),ie=n(48493),it=n(14795),ii=n(74023);let ir={serialize(e){let{omitIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["colgroup",{}],i=["tbody",{}];return e.rows.forEach((r,o)=>{let a=["tr",{}];t||(a[1].id=r.id),i.push(a),e.columns.forEach(i=>{if(0===o){let{type:e,label:r,format:o,id:a,fixedType:l}=i,s=["col",{type:e,label:r,format:o,"fixed-type":l}];t||(s[1].id=a),n.push(s)}let l=e.getCell({column:i.id,row:r.id});a.push(["td",{type:l.type},["value",{},l.textValue]])})}),["table",{},n,i]},parse(e){let t=[],n=[],i=[];for(let r of e.children)switch(r.tagName){case"COLGROUP":t=[...r.children].filter(e=>"COL"===e.nodeName).map(e=>{var t;return new ie.C({id:e.getAttribute("id")||void 0,type:e.getAttribute("type")||"label",label:e.getAttribute("label")||"",format:e.getAttribute("format")||"raw",fixedType:(null===(t=e.getAttribute("fixed-type"))||void 0===t?void 0:t.toLowerCase())==="true"})});break;case"TBODY":if(!t.length)throw Error("No columns defined before tbody");n=[...r.children].filter(e=>"TR"===e.nodeName).map(e=>{let n=new ii.H({id:e.getAttribute("id")||void 0});return!function(e,n){[...e.children].filter(e=>"TD"===e.nodeName).forEach((e,r)=>{let o=e.getElementsByTagName("value").item(0),a=t[r],l={row:n,column:a},s="data"===a.type?new n6.O(l):new n9.m(l);s.textValue=(null==o?void 0:o.textContent)?o.textContent:"",i.push(s)})}(e,n),n})}return new it.f({columns:t,rows:n,cells:i})}};var io=n(46924),ia=n(90887),il=n(59309),is=n(92638),id=n(14582),ic=n(10897),iu=n(51572);function ip(e){for(let t of e.columns)if(!t.isEmpty(e)&&"data"===t.type)return t;return null}function ih(e){for(let t of e.columns)if(!t.isEmpty(e)&&"label"===t.type)return t;return null}var im=n(96154),ig=n(46148),ix=n(549),iv=n(26743);let iy=e=>{let{direction:t="vertical",definition:n,textValue:i,x:r,y:o,width:a,height:s,bounds:d,offset:c={x:0,y:0},onPositionChange:u,invertColorOfInsideText:h}=e,m=(()=>{if(!n)return!1;let e=n.getDimensions(i),l=e.width+c.x,u=e.height+c.y;return"vertical"===t?n.inside?(n.rotate?l:u)+n.margin<s:o-(n.rotate?l:u)-n.margin<=0:n.inside?l+n.margin<a:r+l+n.margin+a>=d.width})(),g=(0,p.useMemo)(()=>({x:"vertical"===t?r+a/2+c.x:r+a+(n.margin+c.x)*(m?-1:1),y:"vertical"===t?o+(c.y+n.margin)*(m?1:-1):o+s/2+c.y}),[r,a,c.x,o,s,c.y,m,t,n.margin]);return((0,p.useEffect)(()=>{null==u||u(g)},[g]),n.hide)?null:(0,l.jsx)(iv.Z,{pointerEvents:"none",...g,textAnchor:n.rotate?m?"end":"start":"vertical"===t?"middle":m?"end":"start",verticalAnchor:"vertical"===t?n.rotate?"middle":m?"start":"end":"middle",style:{...n.textStyles,userSelect:"none",filter:m&&h?"invert(1)":void 0},angle:n.rotate?270:0,children:i})};var ib=n(6802),iw=n(70258),iC=n(80237),ik=n(33951),ij=n(63739),iS=n(75715),iA=n(36585),iI=n.n(iA),iz=n(59557);let iL={top:8,bottom:2,right:1,left:4},iE=e=>{let{color:t,labelCells:n,dataCells:i,height:r,children:o,textColor:a,tickColor:s,tiny:d=!1,width:c,fontFamily:u="var(--body-font)",fontSize:h="var(--chakra-fontSizes-sm)",fontWeight:m="var(--body-font-weight)",margin:g=ig.jK,direction:f="vertical",hideLabels:x=!1,padding:v=0,labelPadding:y=.3,pullToZero:b=!0,onMouseMove:w,onMouseLeave:C,onMouseMoveInside:k,onMouseLeaveInside:j}=e,S=d?2:14,A=d?{top:1,right:0,bottom:2,left:0}:iL,I=d?{top:0,right:0,bottom:0,left:0}:g,z=!!d||x;d&&(h="2px",v=0);let L=d?.5:2,E=d?1:6,N=i.map(e=>e.data),M=Math.max(...N),_=Math.min(...N),T=n.length?n:i.map(e=>({position:{row:e.position.row},textValue:""})),R=(0,p.useMemo)(()=>(function(e,t,n,i){if(!i){let n=(0,ik.Z)({range:[0,1],domain:[e,Math.max(t,0)]}).ticks();i=n.length<2?1:Math.abs(n[1]-n[0])}let r=(0,iz.NN)(Math.max(t,0),i,1),o=(0,iz.NN)(e,i,-1),a=(0,iz.NN)((r-o)/3,i,1);a&&a!==i&&(o=(0,iz.NN)(o,a,-1));let l=[o];for(;l[l.length-1]<r&&(l.push(o+l.length*a),!(l.length>8)););return l})(b?Math.min(_,0):_,M,4),[_,M,b]),H=i[0].getFormatter(),P="vertical"===f?R.map(e=>H.format(e)):T.map(e=>iI()(e.textValue,{length:25,separator:" "})),O=(0,iz.A4)(P,{fontFamily:u,fontSize:h,fontWeight:m}),D=z?0:O.maxWidth,W={top:I.top+A.top,right:I.right+A.right,bottom:I.bottom+L+(z?0:E+A.bottom),left:I.left+D+L+(z?0:E+A.left)},F=("vertical"===f?T:i).map(e=>{let{textValue:t}=e;return iI()(t,{length:25,separator:" "})}),{bottomTickValues:B,bottomLabels:G,rotateLabels:U,labelsHeight:V,splitIx:q}=iN({em:S,textStyles:{fontFamily:u,fontSize:h,fontWeight:m},hideLabels:z,padding:v,height:r,width:c,margin:W,labelCells:T,labelStrings:F}),K=r-W.top-W.bottom-V,Y="horizontal"===f&&K/P.length<S?(W.left-=D,[]):T.map(e=>{let{position:{row:t}}=e;return t}),X=c-W.left-W.right,$=T.map(e=>"".concat(e.position.row,":").concat(e.textValue)).join(","),{labelScale:Z,labelIndex:Q}=(0,p.useMemo)(()=>({labelScale:(0,is.Z)({range:"vertical"===f?[0,X]:[0,K],domain:T.map(e=>e.position.row),paddingInner:y,paddingOuter:.3}),labelIndex:Object.fromEntries(T.map(e=>[e.position.row,e]))}),[X,f,K,$,y]),J=(0,p.useMemo)(()=>{let e=R[0],t=R[R.length-1];return(0,ik.Z)({range:"horizontal"===f?[_<0?v:0,X]:[K-(_<0?v:0),L+v],round:!0,domain:[e,t]})},[R,K,_,X,f,v,L]),ee=(()=>{if(!k&&!j)return null;let e=e=>t=>{e(t,function(e,t){var n;let i=null!==(n=(0,iC.Z)(e))&&void 0!==n?n:{x:e.clientX,y:e.clientY};return{svgCoords:i,axisCoords:{x:i.x-t.left,y:i.y-t.top}}}(t,W))};return{move:k&&e(k),leave:j&&e(j)}})();return(0,l.jsxs)("svg",{width:"100%",viewBox:"0 0 ".concat(c," ").concat(r),height:"100%",preserveAspectRatio:"none",overflow:"visible",onMouseMove:w,onMouseLeave:C,children:[R.map((e,n)=>"vertical"===f?(0,l.jsx)(ij.Z,{from:{x:W.left,y:J(e)+W.top},to:{x:c,y:J(e)+W.top},stroke:t,opacity:0===e?.5:.2},n):(0,l.jsx)(ij.Z,{from:{x:W.left+J(e),y:W.top},to:{x:W.left+J(e),y:K},stroke:t,opacity:0===e?.5:.2},n)),ee&&(0,l.jsx)(id.Z,{fill:"transparent",opacity:.2,x:W.left,y:W.top,height:K,width:X,onMouseMove:ee.move,onMouseLeave:ee.leave}),o({labelScale:Z,dataScale:J,yMax:K,xMax:X,margin:{...W}}),(0,l.jsx)(il.Z,{children:"vertical"===f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ib.Z,{top:W.top,left:W.left,scale:J,stroke:t,rangePadding:_<0?-1*v:0,strokeWidth:L,tickValues:z?[]:R,tickFormat:H.format.bind(H),tickLength:E,tickStroke:s||t,tickLabelProps:()=>({fill:a||t,textAnchor:"end",fontFamily:u,fontSize:h,fontWeight:m,dy:"0.33em",dx:d?0:-4,userSelect:"none"})}),(0,l.jsx)(iw.Z,{top:K+W.top,left:W.left,scale:Z,stroke:t,tickValues:B,tickFormat:(e,t)=>G[t],tickStroke:s||t,tickLabelProps:(e,n)=>({fill:a||t,fontFamily:u,fontSize:h,fontWeight:m,userSelect:"none",dy:d?0:4,i:n}),strokeWidth:L,tickLength:E,tickComponent:e=>{let{x:t,y:n,i,dy:r,formattedValue:o,...a}=e;return(0,l.jsx)("g",{alignmentBaseline:"middle",...a,children:U||!q[i]?(0,l.jsx)("text",{x:t,y:n,dy:r,transform:U?"rotate(-45, ".concat(t,", 0)"):"",textAnchor:U?"end":"middle",children:o}):(o||"").split(" ").map((e,o)=>(0,l.jsx)("text",{x:t,y:n+S*o,dy:r,textAnchor:"middle",children:e},"".concat(i,":").concat(o)))})}})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ib.Z,{top:W.top,left:W.left,scale:Z,stroke:t,strokeWidth:L,tickLength:E,tickValues:z?[]:Y,tickFormat:e=>iI()(Q[e].textValue,{length:25,separator:" "}),tickStroke:s||t,tickLabelProps:()=>({fill:a||t,textAnchor:"end",fontFamily:u,fontSize:h,fontWeight:m,dy:"0.33em",dx:d?0:-4,userSelect:"none"})}),(0,l.jsx)(iw.Z,{top:K+W.top,left:W.left,scale:J,stroke:t,rangePadding:_<0?v:0,tickValues:z?[]:R,tickFormat:H.format.bind(H),tickLength:E,tickStroke:s||t,tickLabelProps:(e,n)=>({fill:a||t,textAnchor:0===n?"end":"middle",fontFamily:u,fontSize:h,fontWeight:m,userSelect:"none",dy:d?0:4}),strokeWidth:L})]})})]})},iN=e=>{let{em:t,textStyles:n,hideLabels:i,padding:r,height:o,width:a,margin:l,labelStrings:s,labelCells:d}=e,c=s.join(","),u=(a-l.left-l.right)/s.length,{fontFamily:h,fontSize:m,fontWeight:g}=n;return(0,p.useMemo)(()=>{let e=[...s],a={bottomTickValues:[],rotateLabels:!1,labelsHeight:0,splitIx:[],sliceWidth:u,bottomLabels:[]};if(i||u<=t+3)return a;let{widths:c,maxWidth:p}=(0,iz.A4)(s,n),h=!1,m=t,g=d.map(e=>{let{position:{row:t}}=e;return t}),f=s.map((e,i)=>{if(h||c[i]<u-r)return!1;let{widths:o,maxWidth:a}=(0,iz.A4)(e.split(" "),n);if(a>u-r)return h=!0,!0;let l=o.length*t;return l>m&&(m=l),!0});if(!h)return{bottomTickValues:g,rotateLabels:h,labelsHeight:m,splitIx:f,sliceWidth:u,bottomLabels:e};let x=e=>Math.cos(Math.PI/4)*e-(t+7);m=Math.sin(Math.PI/4)*p;let v=x(p);if(v>.3*o)return a;let y=e=>l.left+u*e+u/2;for(let t=0;t<s.length;t++){let i=y(t);if(i>v)break;if(x(c[t])>i){let r=(0,iz.LU)(s[t],e=>{let t=(0,iS.Z)(e,n);if(null===t)return -1;let r=x(t);return r<i-10?1:r>i?-1:0});if(!r)return console.log("could not truncate"),a;e[t]=r}}return{bottomTickValues:g,bottomLabels:e,rotateLabels:h,labelsHeight:m,splitIx:f,sliceWidth:u}},[t,o,c,h,m,g,i,r,u])};var iM=n(38045);let i_=e=>{let{data:t,render:n,getColor:i,getOpacity:r,onMouseOver:o,onMouseLeave:a,onClick:d,onDoubleClick:c,textColor:u,position:h="bottom",width:m}=e,g=(0,p.useRef)(null),[f,x]=(0,p.useState)(0),[v,b]=(0,p.useState)(!1),w=["top","bottom"].includes(h)?{width:"100%",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(".concat(f,"em, 1fr))"),justifyItems:v?"flex-start":"center",alignSelf:"stretch","& > div:first-child":{justifySelf:v?void 0:"flex-end"},"& > div:last-child":{justifySelf:v?void 0:"flex-start"}}:{height:"100%",flexDir:"column"},C=t.map(e=>n(e)).join("|");return(0,p.useEffect)(()=>{let e=0;if(!g.current)return;let t=(0,iz.r4)(g.current);for(let t of g.current.querySelectorAll(":scope > div")){var n;t.style.width="min-content";let i=(null===(n=t.getClientRects()[0])||void 0===n?void 0:n.width)||0;t.style.width="",i>e&&(e=i)}x(parseFloat((e/t).toFixed(2)))},[C]),(0,p.useEffect)(()=>{b(!!g.current&&function(e){var t;let n=e.children;if(!n.length)return!1;let i=null===(t=n.item(0))||void 0===t?void 0:t.offsetTop;for(let e of n)if(e.offsetTop!==i)return!0;return!1}(g.current))},[m,f]),(0,l.jsx)(y.k,{ref:g,sx:w,flexGrow:0,flexShrink:1,flexWrap:"wrap",alignContent:["left","top"].includes(h)?"flex-end":"flex-start",justifyContent:"center",gap:5,children:t.map((e,t)=>(0,l.jsxs)(eL.U,{flexGrow:0,flexShrink:1,opacity:r?r(e,t):1,cursor:"pointer",onMouseOver:null==o?void 0:o(e,t),onMouseLeave:null==a?void 0:a(e,t),onClick:null==d?void 0:d(e,t),onDoubleClick:null==c?void 0:c(e,t),transition:"opacity ".concat(ig.zn,"s"),minW:"min-content",gap:2,alignItems:"flex-start",children:[(0,l.jsx)(s.xu,{flex:"0 0 auto",as:iM.E.div,width:"1em",height:"1em",flexShrink:0,bg:i(e,t),borderRadius:"sm",animate:{backgroundColor:i(e,t)},children:" "}),(0,l.jsx)(I.x,{flex:"0 1 auto",fontSize:"1em",lineHeight:"1em",color:u,textAlign:"left",children:iI()(n(e),{length:30})})]},t))})};function iT(){let e=(0,p.useRef)(null);return(0,p.useEffect)(()=>()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{clickHandler:t=>n=>{e.current||(e.current=setTimeout(()=>{e.current=null,t(n)},200))},doubleClickHandler:t=>n=>{e.current&&(clearTimeout(e.current),e.current=null),t(n)}}}let iR=e=>{let{showInlineLabels:t,dataCells:n,scale:i,textStyles:r,direction:o,labelMargin:a=5}=e,l=n.flatMap(e=>e.map(e=>e.textValue)),s=l.join("|"),d=i.bandwidth();return(0,p.useMemo)(()=>{if(!t)return;let e=n[0].length>1?(0,is.Z)({range:[0,d],domain:n[0].map(e=>e.textValue),paddingInner:.2}):i,s=(0,iz.A4)(l,r),c="vertical"===o&&s.maxWidth+a>=e.bandwidth(),u="vertical"===o?c&&s.maxHeight+a>=e.bandwidth():s.maxHeight+a>=e.bandwidth(),p=Object.fromEntries(l.map((e,t)=>[e,t]));return{margin:a,rotate:c,hide:u,textStyles:r,getDimensions:e=>{let t=p[e];return{width:void 0===t?0:s.widths[t],height:void 0===t?0:s.heights[t]}},inside:!1}},[t,r,s,o,d,a])};var iH=n(91982),iP=n(76801),iO=n(96492),iD=n(40837);let iW=e=>{let{TooltipInner:t}=e,{showTooltip:n,tooltipOpen:i,tooltipLeft:r,tooltipTop:o,tooltipData:a,hideTooltip:s}=(0,iO.Z)(),d={minW:"5rem",textAlign:"left",pointerEvents:"none",...(0,iH.mq)("Tooltip")},c=(0,p.useRef)();return(0,p.useEffect)(()=>()=>{c.current&&clearTimeout(c.current)},[]),{mouseMoveHandler:(e,t)=>i=>{c.current&&clearTimeout(c.current);let r=t?t(e,i):(0,iz.yr)(i);n({tooltipData:{...e,position:e.position},tooltipTop:null==r?void 0:r.y,tooltipLeft:null==r?void 0:r.x})},mouseLeaveHandler:e=>e=>{c.current=window.setTimeout(()=>{s()},300)},renderTooltip:function(){return i&&a?(0,l.jsx)(iF,{style:{},top:o,left:r,sx:{...d,top:void 0,left:void 0,userSelect:"none",pointerEvents:"none"},position:"absolute",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,l.jsx)(t,{...a})},Math.random()):null}}},iF=(0,iP.m)(iD.Z,{shouldForwardProp:e=>["top","left","style","children"].includes(e)});var iB=n(52725);let iG=e=>{let{dispatch:t}=(0,p.useContext)(iB._M),n=e.filter(e=>e instanceof ie.C).map(e=>e.id),i=n.join(",");(0,p.useEffect)(()=>(t({type:"reportActiveColumnIds",payload:n}),()=>{t({type:"reportActiveColumnIds",payload:void 0})}),[i,t])},iU=function(){let{textColor:e="var(--body-color)",fontFamily:t="var(--body-font)",fontSize:n="var(--chakra-fontSizes-sm)",fontWeight:i="var(--body-font-weight)"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.useMemo)(()=>({fontFamily:t,fontSize:n,fontWeight:i,fill:e}),[e,t,n,i])},iV=e=>{let{showZero:t,data:n,dataColumns:i,animationDuration:r,barColors:o,textColor:a,direction:s,selectCell:d,tooltipEnter:c,tooltipLeave:u,dataScale:p,labelScale:h,yMax:m,xMax:g,margin:f,minValueGreaterThanZero:x,onDataClick:v,onDataDoubleClick:y,isThumbnail:b,focusedPosition:w,setFocusedPosition:C,showInlineLabels:k}=e,j=(0,ix.HK)(i,"id"),S=iU({textColor:a}),A=n.rows.map(e=>e.getCells(n).filter(e=>!!j.get(e.position.column))),I=iR({dataCells:A,textStyles:S,scale:h,direction:s,showInlineLabels:k});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(il.Z,{top:f.top,left:f.left,children:n.rows.map((e,n)=>{let i="group-".concat(e.id);return(0,l.jsx)(iK,{animationDuration:r,barColors:o,data:A[n],showZero:t,yMax:m,xMax:g,dataScale:p,inlineLabels:I,labelScale:h,selectCell:d,direction:s,globalMinValueGreaterThanZero:x,tooltipEnter:c,tooltipLeave:u,onDataClick:v,onDataDoubleClick:y,borderRadius:b?1:5,focusedPosition:w,setFocusedPosition:C},i)})})})},iq=e=>{var t,n;let{TooltipInner:i,showZero:r=!0,data:o,textColor:a,accentColor:d,animationDuration:c=ig.zn,isThumbnail:u=!1,width:h,height:m,chartType:g,colorScheme:f=ig.bT,hideLabels:x,showInlineLabels:v,onDataClick:y,onDataDoubleClick:b,backgroundColor:w,chartOptions:C}=e,k="horizontal-bar"===g?"horizontal":"vertical",{renderTooltip:j,mouseMoveHandler:S,mouseLeaveHandler:A}=iW({TooltipInner:i}),[I,z]=(0,p.useState)(null),L=ih(o),E=(null==L?void 0:L.getCells(o))||[],N=o.columns.filter(e=>{let{type:t}=e;return"data"===t}),M=N.map(e=>e.getCells(o)).flat(),_=N.length>1&&!x,T=Math.min(...M.map(e=>e.data).filter(e=>e>0)),R=N.map(e=>{let{id:t}=e;return t}),H=(0,im.$)(d,R.length>1?R:[...new Set(M.map(e=>e.position.row))],f,{contrastColor:w}),P=(0,iz.Hs)(u),O=null!==(t=C["vertical"===k?"bar":"horizontal-bar"])&&void 0!==t?t:{};return iG([L,...N]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.xu,{"data-test":"bar-chart-container",height:_?"calc(100% - ".concat(3,"em)"):"100%",cursor:"default",userSelect:"none",contentEditable:!1,children:[(0,l.jsx)(iE,{width:h,height:_?m-3*P:m,labelCells:E,dataCells:M,color:a,textColor:a,tiny:u,direction:k,hideLabels:x,pullToZero:null===(n=O.axisPullToZero)||void 0===n||n,children:e=>(0,l.jsx)(iV,{showZero:r,barColors:H,data:o,textColor:a,dataColumns:N,animationDuration:c,direction:k,tooltipEnter:S,tooltipLeave:A,minValueGreaterThanZero:T,onDataClick:y,onDataDoubleClick:b,isThumbnail:u,focusedPosition:I,setFocusedPosition:z,showInlineLabels:v,...e})}),_&&(0,l.jsx)(i_,{width:h,data:N,render:e=>e.label,getColor:e=>H.get(e.id),textColor:a,onMouseOver:e=>()=>z({row:"_",column:e.id}),onMouseLeave:()=>()=>z(null)})]}),j()]})},iK=e=>{var t;let{animationDuration:n,barColors:i,data:r,showZero:o,yMax:a,xMax:s,dataScale:d,inlineLabels:c,labelScale:u,direction:h,globalMinValueGreaterThanZero:m,tooltipEnter:g,tooltipLeave:f,onDataClick:x,onDataDoubleClick:v,borderRadius:y,focusedPosition:b,setFocusedPosition:w}=e,{clickHandler:C,doubleClickHandler:k}=iT(),j=u.bandwidth(),S=u(null===(t=r[0])||void 0===t?void 0:t.position.row)||0,A=(0,p.useMemo)(()=>{let e=r.map(e=>e.position.column);return(0,is.Z)({range:[S,S+j],domain:e,paddingInner:e.length>1?.2:0})},[j,r,S]),I=o?d(m):0,z=e=>{let t=g(e);return n=>{t(n),w(e.position)}},L=e=>{let t=f(e);return e=>{t(e),w(null)}},E=e=>null!==b&&(r.length>1?b.column!==e.position.column:b.row!==e.position.row);return(0,l.jsx)(il.Z,{children:r.map(e=>{let t={dataScale:d,value:e,innerScale:A,yMax:a,xMax:s,scaledMinValueGreaterThanZero:I,showZero:o},{x:u,y:p,width:m,height:g,roundedCorners:f}="vertical"===h?function(e){var t,n;let{dataScale:i,value:r,innerScale:o,showZero:a,scaledMinValueGreaterThanZero:l}=e,s=Math.min(i.range()[0],i(0)),d=s-(null!==(t=i(r.data))&&void 0!==t?t:0),c=d,u=null!==(n=o(r.position.column))&&void 0!==n?n:0,p=s-c,h=o.bandwidth(),m={topLeft:!0,topRight:!0,bottomLeft:!1,bottomRight:!1};return a&&Math.abs(s-l)>12&&6>Math.abs(d)&&(c=6,i.domain()[0]<0?(p-=3,m.bottomLeft=!0,m.bottomRight=!0):p-=6),c<0&&(p+=c,m.topLeft=!1,m.topRight=!1,m.bottomLeft=!0,m.bottomRight=!0),{x:u,y:p,height:Math.abs(c),width:h,roundedCorners:m}}(t):function(e){let{dataScale:t,value:n,innerScale:i,showZero:r,scaledMinValueGreaterThanZero:o}=e,a=Math.max(t.range()[0],t(0)),l=a,s=i(n.position.column),d=t(n.data)-a,c=i.bandwidth(),u=d,p={topLeft:!1,topRight:!0,bottomLeft:!1,bottomRight:!0};return r&&o>12&&6>Math.abs(d)&&(u=6,t.domain()[0]<0&&(l-=3,p.bottomLeft=!0,p.topLeft=!0)),u<0&&(l+=u,p.bottomLeft=!0,p.bottomRight=!1,p.topLeft=!0,p.topRight=!1),{x:l,y:s,height:c,width:Math.abs(u),roundedCorners:p}}(t);return(0,l.jsx)(iY,{yMax:a,xMax:s,x:u,y:p,direction:h,width:m,height:g,radius:y,topLeft:f.topLeft,topRight:f.topRight,bottomRight:f.bottomRight,bottomLeft:f.bottomLeft,fill:i.get(r.length>1?e.position.column:e.position.row),label:c?{...c,label:e.textValue}:void 0,opacity:E(e)?.5:1,duration:n,onMouseLeave:L(e),onMouseMove:z(e),onClick:x?C(x.bind(void 0,e)):void 0,onDoubleClick:v?k(v.bind(void 0,e)):void 0,style:{cursor:"pointer",transition:"opacity .25s"}},e.key)})})},iY=e=>{let{duration:t=0,y:n,x:i,height:r,width:o,yMax:a,xMax:s,innerRef:d,direction:c,label:u,opacity:h,style:m,...g}=e,[f,x]=(0,p.useState)(0),[v,y]=(0,p.useState)(o),[b,w]=(0,p.useState)(n+r),[C,k]=(0,p.useState)(i);return(0,p.useEffect)(()=>{(0,iu.j)(f,r,{duration:t,onUpdate:e=>x(e)})},[r]),(0,p.useEffect)(()=>{(0,iu.j)(v,o,{duration:t,onUpdate:e=>y(e)})},[o]),(0,p.useEffect)(()=>{(0,iu.j)(C,i,{duration:t,onUpdate:e=>k(e)})},[i]),(0,p.useEffect)(()=>{(0,iu.j)(b,n,{duration:t,onUpdate:e=>w(e)})},[n]),(0,l.jsxs)(il.Z,{children:[(0,l.jsx)(id.Z,{height:"vertical"===c?Math.max(0,a):f,width:"horizontal"===c?Math.max(0,s):v,x:"vertical"===c?C:0,y:"vertical"===c?0:b,...g,onClick:void 0,onDoubleClick:void 0,style:void 0,opacity:0}),(0,l.jsxs)("g",{opacity:h,style:m,children:[(0,l.jsx)(ic.Z,{height:f,width:v,x:C,y:b,innerRef:d,...g}),u&&(0,l.jsx)(iy,{direction:c,textValue:u.label,definition:u,width:v,height:f,x:C,y:b,invertColorOfInsideText:!0,bounds:{x:0,y:0,width:s,height:a}})]})]})};var iX=n(40156),i$=n(27079);let iZ=e=>{var t,n;let{data:i,TooltipInner:r,isThumbnail:o=!1,width:a,height:d,accentColor:c,textColor:u,colorScheme:h=ig.bT,hideLabels:m,backgroundColor:g,chartOptions:f,...x}=e,{renderTooltip:v,mouseMoveHandler:y,mouseLeaveHandler:b}=iW({TooltipInner:r}),[w,C]=(0,p.useState)(null),[k,j]=(0,p.useState)(null),S=ih(i),A=(null==S?void 0:S.getCells(i))||[],I=i.columns.filter(e=>{let{type:t}=e;return"data"===t}),z=I.map(e=>e.getCells(i)).flat(),L=I.map(e=>{let{id:t}=e;return t}),E=(0,im.$)(c,L,h,{contrastColor:g}),N=(0,iz.Hs)(o),M=I.length>1&&!m,_=M?d-3*N:d;return iG([S,...I]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.xu,{"data-test":"line-chart-container",height:M?"calc(100% - ".concat(3,"em)"):"100%",cursor:"default",contentEditable:!1,suppressContentEditableWarning:!0,userSelect:"none",children:[(0,l.jsx)(iE,{width:a,height:_,color:u,textColor:u,tiny:o,labelCells:A,dataCells:z,hideLabels:m,labelPadding:.6,pullToZero:null===(n=null===(t=f.line)||void 0===t?void 0:t.axisPullToZero)||void 0===n||n,onMouseMoveInside:o?void 0:(e,t)=>C(t.axisCoords),onMouseLeaveInside:o?void 0:()=>C(null),children:e=>(0,l.jsx)(iQ,{data:i,dataColumns:I,width:a,height:_,isThumbnail:o,getColor:E.get.bind(E),textColor:u,tooltipEnter:y,tooltipLeave:b,hoverPosition:w,highlightedColumn:k,chartOptions:f,...x,...e})}),M&&(0,l.jsx)(i_,{width:a,data:I,getColor:e=>E.get(e.id),textColor:u,render:e=>e.label,onMouseOver:e=>()=>j(e.id),onMouseLeave:()=>()=>j(null)})]}),v()]})},iQ=e=>{var t,n;let{labelScale:i,dataScale:r,data:o,dataColumns:a,isThumbnail:s,getColor:d,margin:c,tooltipEnter:u,tooltipLeave:h,chartOptions:{line:m={}},onDataClick:g,onDataDoubleClick:f,animationDuration:x=ig.zn,textColor:v,hoverPosition:y,highlightedColumn:b,showInlineLabels:w}=e,[C,k]=r.range(),[j,S]=(0,p.useState)(null),[A,I]=(0,p.useState)(null),z=iU({textColor:v}),L=(0,ix.HK)(a,"id"),E=iR({dataCells:o.rows.map(e=>e.getCells(o).filter(e=>!!L.get(e.position.column))),textStyles:z,scale:i,direction:"vertical",showInlineLabels:1===a.length&&w}),N=e=>{let{data:t,position:{row:n}}=e;return{x:i(n)+i.bandwidth()/2,y:r(t)}},M=e=>{let t=u(e),n=N(e);return i=>{t(i),S(n),I(e.position.row)}},_=e=>{let t=h(e);return e=>{t(e),S(null),I(null)}};return(0,l.jsxs)(il.Z,{left:c.left,top:c.top,children:[(0,l.jsx)("line",{y1:k,y2:C,x1:0,x2:0,strokeWidth:1,stroke:v,transform:"translate(".concat(null!==(n=null!==(t=null==j?void 0:j.x)&&void 0!==t?t:null==y?void 0:y.x)&&void 0!==n?n:0,", 0)"),style:{opacity:"".concat(y||j?.8:0),pointerEvents:"none",transition:"opacity ".concat(x,"s, transform ").concat(j?.15:0,"s")}}),a[0].getCells(o).map(e=>(0,l.jsx)(id.Z,{opacity:0,height:C,width:i.bandwidth(),x:i(e.position.row),y:k,onMouseMove:M(e),onMouseLeave:_(e)},"p-".concat(e.key))),a.map(e=>{let t=e.getCells(o);return(0,l.jsx)(iJ,{cells:t,isThumbnail:s,color:d(e.id),xScale:i,yScale:r,onDataClick:g,onDataDoubleClick:f,lineOptions:m,animationDuration:x,onMouseMove:M,onMouseLeave:_,highlightedRow:A,highlightedColumn:b,inlineLabels:E,height:C},e.id)})]})},iJ=e=>{var t;let{cells:n,color:i,xScale:r,yScale:o,onDataClick:a,onDataDoubleClick:s,onMouseMove:d,onMouseLeave:c,lineOptions:u={},animationDuration:h,isThumbnail:m,highlightedRow:g,highlightedColumn:f,inlineLabels:x,height:v}=e,{clickHandler:y,doubleClickHandler:b}=iT(),w=r.bandwidth(),[C,k]=(0,p.useState)({}),j=i0(n,o,h),S=e=>r(e.position.row)||0,A=e=>(!!g||!!f)&&(f?f!==e.position.column:g!==e.position.row);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i$.Z,{data:n,x:e=>S(e)+w/2,y:j,stroke:i,strokeWidth:2,style:{pointerEvents:"none",transition:"opacity ".concat(h,"s")},opacity:(t=n[0],(g||f)&&(f?f!==t.position.column:!!g))?.3:1}),!m&&n.map(e=>{let t=C[e.key],n=S(e)+r.bandwidth()/2,o=j(e);return(0,l.jsxs)("g",{style:{transition:"opacity ".concat(h,"s")},opacity:u.hideMarkers?0:A(e)?.3:1,children:[x&&!x.hide&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iy,{textValue:e.textValue,definition:x,width:w,height:v,x:S(e),y:j(e),offset:{y:Math.min(.1*v,50),x:0},onPositionChange:t=>{k(n=>({...n,[e.key]:t}))}}),t&&(0,l.jsx)("line",{x1:n,y1:o,x2:t.x,y2:t.y+5*(t.y>o?-1:1),stroke:x.textStyles.fill})]}),(0,l.jsx)(iM.E.circle,{cx:n,cy:o,r:4,fill:i,stroke:i,style:{cursor:"pointer"},onMouseMove:d(e),onMouseLeave:c(e),onClick:a?y(a.bind(void 0,e)):void 0,onDoubleClick:s?b(s.bind(void 0,e)):void 0})]},"circle-".concat(e.key))})]})},i0=(e,t,n)=>{let i=(0,p.useRef)(Object.fromEntries(e.map(e=>[e.key,void 0]))),r=()=>e=>i.current[e.key],[o,a]=(0,p.useState)(()=>r());return(0,p.useEffect)(()=>{let o=t(0);if(0===o)return;let l=e.map(e=>{var l;let s=e.key;return(0,iu.j)(null!==(l=i.current[s])&&void 0!==l?l:o,t(e.data),{duration:n,ease:"easeOut",onUpdate:e=>{i.current[s]=e,a(()=>r())}})});return()=>{l.forEach(e=>{e.stop()})}},[e,t]),o||console.log("no getter"),o};var i1=n(82756),i2=n(49769);let i4=e=>{let{targetValue:t,initialValue:n=0,duration:i=ig.zn}=e,[r,o]=(0,p.useState)(n);return(0,p.useEffect)(()=>{let{stop:e}=(0,iu.j)(r,t,{duration:i,onUpdate:e=>{o(e)}});return()=>{e()}},[t]),r};var i3=n(30401);function i5(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}function i7(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"==typeof t&&(t={x:t,y:t}),{...e,x:e.x+t.x*n,y:e.y+t.y*n}}class i8{get anchor(){return function(e){let t=360*e/(2*Math.PI);switch(!0){case t>=225&&t<=315:return{h:"middle",v:"end"};case t>=45&&t<=135:return{h:"middle",v:"start"};case t>135&&t<225:return{h:"end",v:"middle"};default:return{h:"start",v:"middle"}}}(this.angle)}get key(){return this.cell.key}get closestCorner(){let e=this.angle,t=this.rect;return{x:e>=1.5*Math.PI||e<=Math.PI/2?t.x:t.x+this.width,y:e<=Math.PI?t.y:t.y+this.height}}get furthestCorner(){let e=this.angle,t=this.rect;return{x:e>=1.5*Math.PI||e<=Math.PI/2?t.x+this.width:t.x,y:e<=Math.PI?t.y+this.height:t.y}}getConnectionPoint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.rect,{x:n,y:i}=this.closestCorner,r=n/Math.cos(this.angle),o=i/Math.sin(this.angle),a=r;return i5({x:o*Math.cos(this.angle),y:i},t)?a=o:i5({x:n,y:r*Math.sin(this.angle)},t)||console.error("Line does not intersect rect"),{x:(a-e)*Math.cos(this.angle),y:(a-e)*Math.sin(this.angle)}}get rect(){var e,t,n;return{...i7({x:Math.cos(e=this._angle)*(t=this.radius+this.offset),y:Math.sin(e)*t},null!=(n=this.anchorPos)?n:0),width:this.width,height:this.height}}get angle(){return this._angle}set angle(e){this._angle=function(e){let t=e;for(;t<0;)t+=2*Math.PI;return t%(2*Math.PI)}(e)}getOverflowingRadius(){let e=this.boundingRect,t=this.furthestCorner;if(t.y<e.y||t.x<e.x||t.x>e.x+e.width||t.y>e.y+e.height){let n=e.x/Math.cos(this.angle),i=e.y/Math.sin(this.angle);return Math.sqrt(t.x**2+t.y**2)-Math.min(Math.abs(n),Math.abs(i))}return 0}handleIntersection(e){let t=this.rect,n=e.rect,i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=i7(e,n),r=i7(t,n),o=e=>{let t={x:"width",y:"height"}[e];return r[e]>i[e]?[r[e],Math.max(i[e]+i[t]-r[e],0)]:[i[e],Math.max(r[e]+r[t]-i[e],0)]},[a,l]=o("x"),[s,d]=o("y");return 0!==l&&0!==d&&i7({x:a,y:s,width:l,height:d},-1*n)}(n,t,this.radius);if(!i)return 0;let r=(i.x>n.x?i.width:-1*i.width)*Math.sign(t.x),o=0>Math.sign(t.y)?-((i.y>n.y?n.height-i.height+t.height:i.height)*1):i.y>n.y?i.height:n.height-i.height,a=r/Math.cos(this.angle),l=o/Math.sin(this.angle);return this.offset+=Math.sign(a)===Math.sign(l)?Math.min(Math.max(a,0),Math.max(l,0)):Math.max(a,l),this.offset}get anchorPos(){var e,t;return e={w:this.width,h:this.height},{x:"start"===(t=this.anchor).h?0:"middle"===t.h?-(e.w/2):-1*e.w,y:"start"===t.v?0:"middle"===t.v?-(e.h/2):-1*e.h}}constructor(e,t,n,i,r,o,a){this.cell=e,this.radius=n,this.label=i,this.width=r,this.height=o,this.boundingRect=a,this.offset=0,this.angle=t}}let i6=e=>{let{showLabels:t,cells:n,radius:i,textStyles:r,chartWidth:o,margin:a=20,...l}=e,s=n.map(e=>e.textValue).join("|");return(0,p.useMemo)(()=>{if(!t)return{labelPad:0,labels:[]};let e={x:-(o/2),y:-(o/2),width:o,height:o},s=(0,i3.ve)({value:e=>e.data,...l})(n),d=0,c=s.map(t=>{var n;let{startAngle:o,endAngle:a}=t,l=t.data,s=l.textValue,{width:c,height:u}=null!==(n=(0,iz._T)(s,r))&&void 0!==n?n:{width:0,height:0},p=new i8(l,(o+a)/2-Math.PI/2,i,s,c,u,e),h=p.getOverflowingRadius();return h>d&&(d=h),p}),u=d,p=d,h=0;for(;u>0&&h++<2;){let e=d;d=0,u=0,c.forEach((t,n)=>{t.radius=t.radius-e,0!==n&&(u+=t.handleIntersection(c[n-1])),n===c.length-1&&(u+=t.handleIntersection(c[0]));let i=t.getOverflowingRadius();i>d&&(d=i)}),p+=d,u+=d}let m=a+p;return i-m<i/2?{labelPad:0,labels:[]}:{labelPad:m,labels:c}},[s,r,i,o,a,t])},i9=e=>{let{labels:t,radius:n,textStyles:i,colors:r,isFocused:o,explodeOffset:a,animationDuration:s=.2}=e;return(0,l.jsx)("g",{children:t.map((e,t)=>{let d=e.getConnectionPoint(5),c=o(e.cell.position),u=o(e.cell.position,!0),p="opacity ".concat(s,"s, transform ").concat(s,"s"),h=u?"translate(".concat(Math.cos(e.angle)*a,"px, ").concat(Math.sin(e.angle)*a,"px)"):"";return(0,l.jsxs)("g",{opacity:c?1:.5,style:{transition:p,transform:h},children:[(0,l.jsx)("line",{x1:Math.cos(e.angle)*n,y1:Math.sin(e.angle)*n,x2:d.x,y2:d.y,stroke:i.fill,strokeWidth:u?2:1}),(0,l.jsx)("circle",{cx:d.x,cy:d.y,r:3,fill:r[t],stroke:i.fill}),(0,l.jsx)("text",{dominantBaseline:"hanging",x:e.rect.x,y:e.rect.y+3,...i,fontWeight:u?"bold":"normal",pointerEvents:"none",style:{userSelect:"none"},children:e.label})]},e.key)})})},re=e=>{var t;let{data:n,TooltipInner:i,colorScheme:r=ig.bT,isThumbnail:o=!1,width:a,height:s,chartType:d,textColor:c,accentColor:u,chartOptions:{donut:h,pie:m},hideLabels:g,showInlineLabels:f,onDataClick:x,onDataDoubleClick:v,animationDuration:b=ig.zn,backgroundColor:w}=e,{dispatch:C}=(0,p.useContext)(iB._M),{renderTooltip:k,mouseMoveHandler:j,mouseLeaveHandler:S}=iW({TooltipInner:i}),A={top:15,right:15,bottom:15,left:15},I=ip(n),z=ih(n),L=I?I.getCells(n).filter(e=>!e.isEmpty):[];iG([z,I]),(0,p.useEffect)(()=>{let e="pie-no-labels";return z||g||C((0,i2.Yr)(T.ag._({id:"gMgGUM"}),{severity:"warning",id:e,dismissable:!1})),()=>{C((0,i2.VP)(e))}},[z,g,C]),(0,p.useEffect)(()=>{let e="pie-single-row";return 1===L.length&&C((0,i2.Yr)(T.ag._({id:"uHTxZb"}),{severity:"info",id:e,dismissable:!0})),()=>{C((0,i2.VP)(e))}},[L.length,C]);let E=L.map(e=>{let{position:t}=e;return t.row}),N=(0,im.$)(u,E,r,{contrastColor:w,minContrast:1.3}),[M,_]=(0,p.useState)(null),R=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return M?M.row===e.row&&M.column==M.column:!t};o&&(A.top=5,A.right=5,A.bottom=5,A.left=5);let H=o||g||!z,[P,O]=a<s?[a,a]:[s,s],D=P-A.left-A.right,W=O-A.top-A.bottom,F=Math.min(D,W)/2,B=D/2,G=i4({targetValue:"donut"===d?(null==h?void 0:h.radius)||.5:1,initialValue:1,duration:b}),U=null!==(t=null==m?void 0:m.legendPosition)&&void 0!==t?t:"bottom",V=iU(),{labelPad:q,labels:K}=i6({showLabels:f,cells:L,radius:F,textStyles:V,chartWidth:D,sort:null}),Y=F-q,X=Y*G,$=e=>(0,l.jsx)(rn,{cells:L,colors:N,donutThickness:X,duration:b,isDummy:e,isFocused:R,isThumbnail:o,onClick:x,onDoubleClick:v,radius:Y,setFocus:_,tooltipEnter:j,tooltipLeave:S}),Z=["top","left"].includes(U),Q=["right","left"].includes(U),J="".concat(Q?"row":"column").concat(Z?"-reverse":"");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(y.k,{height:"100%","data-test":"pie-chart-container",cursor:"default",contentEditable:!1,suppressContentEditableWarning:!0,userSelect:"none",flexDirection:J,gap:1,justifyContent:Z?"flex-end":"flex-start",children:[(0,l.jsx)("svg",{style:{aspectRatio:"1",minHeight:"2em",overflow:"hidden"},viewBox:"0 0 ".concat(P," ").concat(O),children:(0,l.jsx)(il.Z,{top:W/2+A.top,left:B+A.left,children:(0,l.jsxs)(l.Fragment,{children:[$(!0),$(!1),(0,l.jsx)(i9,{labels:K,isFocused:R,radius:Y,textStyles:V,colors:[...N.values()],explodeOffset:15})]})})}),!H&&(0,l.jsx)(i_,{width:a,position:U,data:L,getColor:e=>N.get(e.position.row),render:e=>{let{position:{row:t}}=e;return n.getCellOrThrow({row:t,column:z.id}).label},textColor:c,getOpacity:e=>R(e.position)?1:.2,onMouseOver:e=>()=>_(e.position),onMouseLeave:()=>()=>_(null)})]}),k()]})},rt=e=>{let{arc:t,duration:n=.2,path:i,getColor:r,tooltipEnter:o,tooltipLeave:a,onClick:s,onDoubleClick:d,focused:c,setFocused:u,isThumbnail:h,radius:m,isDummy:g,isDonut:f,...x}=e,{startAngle:v,endAngle:y}=t,b=r(t.data),[w,C]=(0,p.useState)(v),[k,j]=(0,p.useState)(v),[S,A]=(0,p.useState)(b),{clickHandler:I,doubleClickHandler:z}=iT();(0,p.useEffect)(()=>{(0,iu.j)(w,[w,y],{duration:n,onUpdate:e=>C(e)})},[y]),(0,p.useEffect)(()=>{(0,iu.j)(k,[k,v],{duration:n,onUpdate:e=>j(e)})},[v]),(0,p.useEffect)(()=>{(0,iu.j)(S,b,{duration:n,onUpdate:e=>A(e)})},[b]);let L=c?h?4:15:0,E=(k+w)/2,N=L>0?"translate(".concat(Math.sin(E)*L,", ").concat(-(Math.cos(E)*L*1),")"):"";return(0,l.jsx)("g",{transform:N,style:{transition:"transform ".concat(n,"s")},children:(0,l.jsx)("path",{d:i({...t,startAngle:k,endAngle:w}),fill:S,stroke:g||f?"transparent":"var(--card-color)",strokeWidth:.02*m,strokeLinecap:"round",strokeLinejoin:"round",onMouseMove:e=>{u(!0),null==o||o(t.data)(e)},onMouseLeave:e=>{u(!1),null==a||a(t.data)(e)},onClick:s?I(s.bind(void 0,t.data)):void 0,onDoubleClick:d?z(d.bind(void 0,t.data)):void 0,...x})})},rn=e=>{let{cells:t,colors:n,donutThickness:i,duration:r,isDummy:o,isFocused:a,isThumbnail:s,onClick:d,onDoubleClick:c,radius:u,setFocus:p,tooltipEnter:h,tooltipLeave:m}=e;return(0,l.jsx)(i1.Z,{data:t,outerRadius:u,innerRadius:o?0:u-i,pieValue:e=>{let{data:t}=e;return t},pieSort:null,pieSortValues:null,padAngle:o?0:i<u?.016:0,children:e=>{let{arcs:t,...g}=e;return t.map(e=>(0,l.jsx)(rt,{arc:e,...g,radius:u,isDonut:i<u,focused:!o&&a(e.data.position,!0),setFocused:t=>{p(t?e.data.position:null)},getColor:e=>o?"transparent":n.get(e.position.row),tooltipEnter:h,tooltipLeave:m,duration:o?0:r,isThumbnail:s,onClick:d,onDoubleClick:c,isDummy:!!o},e.data.key))}})};var ri=n(19358),rr=n(9325),ro=n(987),ra=n(74122),rl=n(62528),rs=n(95341);let rd=e=>{let{isResizing:t,onResizing:n,setIsResizing:i,cloneBoxProps:r={},showResizeControls:o,disableCloning:a,children:d,...c}=e,u=(0,p.useRef)(null),h=(0,p.useRef)(null),m=(0,p.useRef)(void 0);return(0,p.useEffect)(()=>{if(!a&&(!0===t&&h.current&&m.current&&h.current.appendChild(m.current),!t&&m.current)){var e;null===(e=m.current.parentNode)||void 0===e||e.removeChild(m.current)}},[t]),(0,l.jsxs)(l.Fragment,{children:[t&&!a?(0,l.jsx)(s.xu,{filter:"blur(15px)",...r,ref:h,width:"100%",height:"100%",position:"relative","data-test":"resize-placeholder"}):(0,l.jsx)(s.xu,{ref:u,width:"100%",height:"100%",filter:t?"blur(4px) opacity(0.75)":void 0,children:d}),o&&(0,l.jsx)(rs.R4,{setIsResizing:e=>{if(!a&&e){var t;m.current=null===(t=u.current)||void 0===t?void 0:t.cloneNode(!0);let e=m.current;e&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="auto",e.style.height="auto")}i(e)},onResizing:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];let{width:o,height:a}=e,l=m.current;if(!l)return;let s={width:l.offsetWidth,height:l.offsetHeight},d=o/s.width,c=a/s.height;l.style.transform="scale(".concat(d,", ").concat(c,")"),l.style.transformOrigin="top left",null==n||n(e,...i)},...c})]})};var rc=n(32981),ru=n(73751),rp=n(2574),rh=n(82642);let rm=e=>{var t,n;let{state:i,dispatch:r}=(0,p.useContext)(iB._M),[o,a]=(0,p.useState)(new Date),s=(0,p.useRef)(!1),d=i.feedback;return((0,p.useEffect)(()=>{if(!(null==d?void 0:d.length))return;let e=[],t=d.filter(t=>{let n=t.dismissable;return n instanceof Date&&(!(n<=o)||(e.push(t.id),!1))});e.length&&r((0,i2.VP)(...e)),!s.current&&t.length&&(s.current=setTimeout(()=>{s.current=!1,a(new Date)},1e3))},[d,o,r]),null===(t=i.feedback)||void 0===t?void 0:t.length)?(0,l.jsx)(L.K,{marginY:2,...e,children:null===(n=i.feedback)||void 0===n?void 0:n.map(e=>(0,l.jsxs)(nD.b,{marginBottom:1,status:e.severity,children:[(0,l.jsx)(nW.z,{}),(0,l.jsx)(nB.X,{flexGrow:1,children:e.message}),e.dismissable&&(0,l.jsx)(rh.T,{cursor:"pointer",onClick:()=>{r((0,i2.VP)(e.id))}})]},e.id))}):null};var rg=n(80708),rf=n(81540),rx=n(25237);let rv=n.n(rx)()(async()=>(await Promise.all([n.e(4714),n.e(411),n.e(5614)]).then(n.bind(n,25614))).DataEditor,{loadableGenerated:{webpack:()=>[25614]},ssr:!1,loading:()=>(0,l.jsx)(y.k,{m:5,h:"100%",justifyContent:"center",children:(0,l.jsx)(rf.$,{size:"lg"})})}),ry=e=>(0,l.jsx)(rv,{...e}),rb=(0,iB.Ai)(e=>{let{onChange:t,onClose:n,data:i,isOpen:r,renderChart:o,attributes:a,updateAttributes:d,accentColor:c,selectedCell:u,cardColor:p}=e,h=(0,x.CG)(te.Pu),m=(0,eM.H_)((0,eM.vS)(h));return(0,l.jsxs)(rc.d,{placement:"bottom",onClose:n,isOpen:r,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,l.jsx)(tx.Z,{}),(0,l.jsxs)(ru.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transitionDuration:{enter:"0.4s"},children:[(0,l.jsx)(ty.o,{}),(0,l.jsxs)(tw.f,{p:0,h:"100%",overflow:"auto","data-testid":"chart-editor-body",display:"flex",flexDir:"column",children:[(0,l.jsx)(tb.x,{children:(0,l.jsx)(_.cC,{id:"44wbJb"})}),(0,l.jsxs)(y.k,{direction:{base:"column",xl:"row-reverse"},overflow:"auto",gap:5,px:5,children:[(0,l.jsxs)(y.k,{direction:{base:"column",lg:"row",xl:"column"},width:{base:"auto",xl:"40%","2xl":"30%"},gap:5,children:[(0,l.jsx)(s.xu,{flexGrow:{base:1,xl:0},flexShrink:0,flexBasis:"auto",borderRadius:"md",overflow:"hidden",children:(0,l.jsx)(s.xu,{background:p,borderRadius:"md",padding:8,maxWidth:"100%",h:"xs",children:(0,l.jsx)(s.xu,{as:rp.Z,position:"relative",children:e=>{let{width:t,height:n}=e;return o({data:i,width:t,height:n,textColor:m})}})})}),(0,l.jsx)(s.xu,{background:"gray.50",borderRadius:"md",children:(0,l.jsx)(rg.o,{attributes:a,updateAttributes:d,accentColor:c})})]}),(0,l.jsx)(E.i,{display:{base:"block",xl:"none"}}),(0,l.jsxs)(s.xu,{flexGrow:1,zIndex:1,overflow:{xl:"auto"},children:[(0,l.jsx)(ry,{onChange:t,data:i||it.f.createEmpty(2,3),selectedCell:u}),(0,l.jsx)(rm,{})]})]})]})]})]})}),rw=e=>{let t=(0,p.useRef)(!1),[n,i]=(0,p.useState)(!1);(0,p.useEffect)(()=>{if(t.current||null===e)return;let n=!1;e.columns.forEach((t,i)=>{let r=e.getCellAtIndex({row:0,column:i});n=(0,ix.Tx)(r,e)||n}),t.current=!0,n&&i(n)},[e])},rC=e=>{let{node:t,editor:n,selected:i,updateAttributes:r,decorations:o}=e,{chartType:a,colorScheme:d,data:c,dimensions:u={ratio:.5},hideLabels:h,showInlineLabels:m,chartAttributes:g={},horizontalAlign:f}=t.attrs,v=(0,p.useMemo)(()=>{try{return c?n8.m.parse(c):null}catch(e){return console.error("[DATALOSS] Error parsing serialized chart",e),console.log(c),null}},[c]),b=(0,x.qr)(),w=(0,x.CG)(te.Pw),C=(0,e9.TZ)(),k=(0,x.CG)(te.wc),j=(0,e9.LM)(n),S=(0,x.CG)(te.aB),A=w&&j&&k,{theme:z,cardColor:L}=(0,eT.t)(o),{ref:E,isResizing:N,setIsResizing:M,resizeableSx:_}=(0,rs.ow)(n),T=(0,p.useCallback)(e=>{r({dimensions:{width:e.width,height:e.height}})},[r]),[R,H]=(0,p.useState)(ig.zn);rw(v),(0,p.useEffect)(()=>{N?H(0):setTimeout(()=>{H(ig.zn)},1e3*ig.zn)},[N]);let P=n.isThumbnail||!1,[O,D]=(0,p.useState)(),W=!P&&S===t.attrs.id,F=e=>{if(e){b.dispatch((0,te.GV)({chartId:t.attrs.id}));return}b.dispatch((0,te.GV)({chartId:null}))},B=(0,p.useMemo)(()=>{switch(a){case"pie":case"donut":return re;case"line":return iZ;default:return iq}},[a]),G=(0,eM.H_)((0,eM.y)(z)),U=e=>{w&&k&&(D(e),F(!0))};(0,p.useEffect)(()=>{O&&(null==v?void 0:v.getCell(O.position))!==O&&D(void 0)},[O,W]);let V=e=>{var t;let{data:n,width:i,height:r,textColor:o="var(--body-color)",showEditInPlaceholder:u=!1}=e,p=n&&(null===(t=iX.r.nonEmpty(n))||void 0===t?void 0:t.data);return!p||!ip(p)||p.isEmpty()?(0,l.jsx)(rS,{setEditing:u?F:void 0}):(0,l.jsx)(B,{animationDuration:R,data:p,colorScheme:d||void 0,width:i,height:r,accentColor:G,textColor:o,chartOptions:g,onDataDoubleClick:U,hideLabels:h,showInlineLabels:m,backgroundColor:L,TooltipInner:e=>(0,l.jsx)(l.Fragment,{children:c.columns.map(t=>{var n;return(0,l.jsxs)(s.xu,{as:"p",mb:1,children:[t.label&&(0,l.jsxs)(I.x,{as:"b",children:[t.label,": "]}),(0,l.jsx)(I.x,{as:"span",children:null===(n=p.getCell({row:e.position.row,column:t.id}))||void 0===n?void 0:n.textValue},t.id)]},t.id)})}),chartType:a,isThumbnail:P})},q=rk(u),K="width"in u?u.width:ra.gS;C&&(K=Math.min(K,ra.gS/2));let Y=K*q,X=(0,rr.nN)(f);return(0,ri.g)()?(0,l.jsx)(ev.lO,{as:"div",...e,children:(0,l.jsx)(y.k,{w:"100%",className:ro.d,sx:_,css:X,direction:"column",onDoubleClick:()=>{A&&F(!0)},_focusWithin:{shadow:"outline"},children:(0,l.jsxs)(s.xu,{ref:E,className:"chart",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,maxW:"100%",minW:"min(10em, 100%)",minH:"min(10em, 100%)",width:"width"in u&&"height"in u?rj(u.width):"100%",aspectRatio:"1/".concat(q),position:"relative","data-drag-handle":!0,children:[(0,l.jsx)(rd,{showResizeControls:A&&i,imageWrapperRef:E,isResizing:N,setIsResizing:M,updateResizeAttrs:T,refreshDeps:[t.attrs],disableCloning:!0,keepRatio:!1,children:v?V({data:v,width:K,height:Y,showEditInPlaceholder:!P&&w}):(0,l.jsx)(rS,{setEditing:P||!w?void 0:F})}),(0,l.jsx)(rb,{renderChart:V,cardColor:L,data:v,isOpen:W,onClose:()=>F(!1),onChange:e=>{r({data:n8.m.serialize(e)})},attributes:t.attrs,updateAttributes:r,accentColor:G,selectedCell:O})]})})}):(0,l.jsx)(s.xu,{w:K,h:Y})},rk=e=>"ratio"in e?e.ratio:e.height/e.width,rj=e=>"calc(".concat(e," * var(--font-size) / 16)"),rS=e=>{let{setEditing:t}=e,n=(0,w.Yy)();return(0,l.jsxs)(nG.g,{spacing:3,justify:"center",contentEditable:!1,color:n?rl.Z.DARK_COLOR:rl.Z.LIGHT_COLOR,h:"100%",backgroundColor:n?rl.Z.DARK_BG:rl.Z.LIGHT_BG,borderRadius:"var(--box-border-radius)","data-testid":"chart-placeholder",children:[(0,l.jsx)(M.G,{size:"2x",icon:N.Wpq}),t&&(0,l.jsx)(S.z,{size:"xs",fontFamily:"body",onClick:()=>t(!0),children:(0,l.jsx)(_.cC,{id:"UHoZ5e"})})]})};var rA=n(59700);let rI=()=>(0,n7.x0)(5),rz=new t7.H$("UniqueMediaId"),rL=io.I.extend({name:"UniqueChartId"}).configure({attributeName:"id",types:["chart"],initialValue:rI,filterTransaction:e=>{let t=e.getMeta(nE.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:rz}),rE=eh.NB.create({name:"chart",group:"cardBlock layoutBlock",selectable:!0,draggable:!0,addNodeView:()=>(0,ef.fW)(rC,{update:ex.E7}),addAttributes:()=>({id:(0,ia.b)(()=>(0,n7.x0)(5)),chartType:{default:"bar"},chartAttributes:{...(0,eJ.sw)("chartAttributes"),default:{}},colorScheme:{isRequired:!1},dimensions:{...(0,eJ.sw)("dimensions"),default:{ratio:.56}},hideLabels:{isRequired:!1,default:!1},showInlineLabels:{isRequired:!1,default:!1},data:{...(0,eJ.sw)("data")}}),addCommands:()=>({insertChart:(e,t)=>n=>{let{dispatch:i,editor:r,commands:o}=n;if(!i)return!1;let{schema:a}=r,l=a.nodes.chart,s=rI(),d=l.createChecked({id:s,chartType:e,data:t&&e?(0,rA.W)(e):void 0});return o.insertContent(d.toJSON())},editSelectedChart:()=>e=>{let{state:t}=e,n=t.selection;if(!(n instanceof t7.qv)||!rN(n.node))return!1;let i=n.node;return(0,x.bh)().dispatch((0,te.GV)({chartId:i.attrs.id})),!0}}),addExtensions:()=>[rL],parseHTML(){return[{tag:'div[data-type="'.concat(this.name,'"]')},{tag:"chart",getAttrs(e){try{if("string"==typeof e)return!1;let t=[...e.children].find(e=>"TABLE"===e.nodeName);if(!t)return null;let n=ir.parse(t);if(!n)return{};return{data:n8.m.serialize(n)}}catch(e){return console.error("[caught]",e),!1}}}]},renderHTMLforAI(e){let{node:t,HTMLAttributes:n}=e,{"data-data":i,...r}=n,o=["chart",(0,eh.P1)(this.options.HTMLAttributes,r)];return t.attrs.data&&o.push(ir.serialize(n8.m.parse(t.attrs.data))),o},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)({"data-type":this.name},this.options.HTMLAttributes,t)]}}),rN=e=>"chart"===e.type.name;var rM=n(30764),r_=n(98835),rT=n(98775),rR=n(10806),rH=n(65780),rP=n(92322),rO=n(55898),rD=n(89393),rW=n(48972);let rF=eh.hj.create({name:"clipboard",addProseMirrorPlugins(){let e=this.editor,t=e.state.schema,n=null;return[new t7.Sy({key:new t7.H$("clipboard"),appendTransaction(e,t,n){let i=e.find(e=>"cut"===e.getMeta("uiEvent"));if(!i)return null;let r=(0,rT.a)(i);return r?n.tr.setSelection(r):null},props:{handleDOMEvents:{drop(e){n=e.dragging,requestAnimationFrame(()=>{n=null})}},clipboardSerializer:{serializeFragment:e=>(0,rW.Xb)(e,this.editor.schema)},transformPastedHTML:r_.B,transformPasted:i=>rB(e,(null==n?void 0:n.slice)?i:(0,rD.iu)(i,t)),handlePaste:(t,n,i)=>(0,rP.Lv)(e,n,i)||(0,rO.iO)(e,n)||(0,rH.g)(t,n,i)}})]},addCommands:()=>({insertMarkdownAt:(e,t)=>n=>{let{state:i,tr:r}=n;try{let n=(0,rO.aT)(t,i.schema);return r.replaceRange(e.from,e.to,n),!0}catch(e){return console.warn("(caught) [Clipboard] insertMarkdownAt error",e),!1}}})}),rB=(e,t)=>{var n;let i=(0,rR.u)(e.state.doc),r=null===(n=t.toJSON())||void 0===n?void 0:n.content;if(!r||"document"!==r[0].type)return t;let o=(0,rR.u)(t.content.firstChild);return i.cardLayoutsEnabled&&!o.cardLayoutsEnabled?((0,eJ.K9)(r,e=>{"card"===e.type&&(e.content=[{type:"cardLayoutItem",content:e.content}])}),rM.p2.fromJSON(e.schema,{openStart:t.openStart+1,openEnd:t.openEnd+1,content:r})):t};var rG=n(74919);let rU=n(31187).ZP.extend({priority:eZ.a.Code,inclusive:!1});var rV=n(93274),rq=n(86290),rK=n(70965);let rY=e=>{let[t,n]=(0,p.useState)(new Date),i=(0,p.useRef)(!1);return(0,p.useEffect)(()=>{i.current&&n(new Date),i.current=!0;let e=setInterval(()=>{n(new Date)},6e4);return()=>{clearInterval(e)}},[e]),t},rX=e=>{var t;let n=(0,rK.iq)({base:4,md:8})||8,{node:i}=e,{showTime:r,hiddenContributorIds:o}=i.attrs,a=(0,x.CG)(te.xy)||[],s=(0,p.useMemo)(()=>a.filter(e=>!o.includes(e.user.id)),[a,o]),d=(0,ed.gF)(),c=(0,x.CG)(te.yx),u=null==c?void 0:c.editedTime,h=rY(u).toISOString(),g=s.length-n,f=null!==(t=e.node.attrs.horizontalAlign)&&void 0!==t?t:"left",v=(0,p.useMemo)(()=>({left:"row",center:"column",right:"row-reverse"})[f],[f]);return(0,l.jsx)(l.Fragment,{children:s.length>0&&(0,l.jsx)(ev.lO,{...e,as:"div",children:(0,l.jsxs)(y.k,{userSelect:"none",contentEditable:!1,justify:"flex-start",align:"center",direction:v,borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,children:[(0,l.jsxs)(rV.H,{sx:{".avatar-overflow-activator":{height:"1.6em",width:"1.6em",minH:"1.6em",minW:"1.6em",fontSize:"inherit",span:{fontSize:"0.68em"}}},children:[s.slice(0,n).map(e=>(0,l.jsx)(b.Vw,{width:"1.6em",height:"1.6em",fontSize:"inherit",size:"sm",shadow:"base",sx:{"@media print":{shadow:"none"}},borderWidth:"1px",name:e.user.displayName,label:d?T.ag._({id:"bxVoEp",values:{0:e.user.displayName,1:(0,rq.Km)(e.lastEdited,h)}}):" ",src:e.user.profileImageUrl},e.user.id)),g>0&&(0,l.jsx)(b.Z9,{tooltipLabel:T.ag._({id:"25VyZX"}),count:g,avatars:s.map(e=>({name:e.user.displayName||"",id:e.user.id,profileImageUrl:e.user.profileImageUrl||"",color:"white"})),disabled:!0})]}),(0,l.jsxs)(y.k,{direction:"column",ml:"left"===f?"0.5em":0,mr:"right"===f?"0.5em":0,lineHeight:"1.4",textAlign:f,children:[(0,l.jsx)(I.x,{className:"contributors-list",children:1===s.length?(0,l.jsx)(_.cC,{id:"t490IT",values:{0:s[0].user.displayName}}):(0,l.jsx)(_.cC,{id:"KNjuGh",values:{0:s.length}})}),!m.v.GAMMA_PUPPETEER_SERVICE&&u&&r&&(0,l.jsx)(I.x,{fontSize:"0.75em",children:d?(0,l.jsx)(_.cC,{id:"gUWkFH",values:{0:(0,rq.Km)(u,h)}}):" "})]})]})})})},r$=e=>{var t;let n=null!==(t=e.node.attrs.horizontalAlign)&&void 0!==t?t:"left",i=(0,p.useMemo)(()=>({left:"row",center:"column",right:"row-reverse"})[n],[n]);return(0,l.jsx)(nV.T,{children:(0,l.jsxs)(y.k,{direction:i,alignItems:"center",gap:"1em",children:[(0,l.jsx)(nU,{borderRadius:"full",boxSize:"4em"}),(0,l.jsx)(nU,{h:"2em",w:"14em"})]})})},rZ=eh.NB.create({name:"contributors",group:"block",atom:!0,selectable:!0,dynamic:!0,addAttributes:()=>({showTime:{default:!0},hiddenContributorIds:{default:[],...(0,eJ.sw)("hiddenContributorIds")}}),addCommands:()=>({toggleShowTime:()=>e=>{let{commands:t,state:n}=e,{selection:i}=n;if(!(i instanceof t7.qv))return!1;let{node:r}=i;return"contributors"===r.type.name&&(t.updateAttributes("contributors",{showTime:!r.attrs.showTime}),!0)},toggleOneContributorVisibility:e=>t=>{let{commands:n,state:i}=t,r=(0,x.bh)().getState(),o=(0,te.xy)(r);if(!o||1===o.length)return!1;let{selection:a}=i;if(!(a instanceof t7.qv))return!1;let{hiddenContributorIds:l}=a.node.attrs,s=[];if(l.includes(e))s=l.filter(t=>t!==e);else{if(l.length+1===o.length)return!1;s=[...l,e]}return n.updateAttributes("contributors",{hiddenContributorIds:s}),!0},toggleAllContributorsVisibility:()=>e=>{let{commands:t,state:n}=e,i=(0,x.bh)().getState(),r=(0,te.xy)(i);if(!r||1===r.length)return!1;let{selection:o}=n;if(!(o instanceof t7.qv))return!1;let{hiddenContributorIds:a}=o.node.attrs,l=[];if(a.length>0)l=[];else{let e=(0,te.bU)(i);l=r.filter(t=>t.user.id!==(null==e?void 0:e.id)).map(e=>e.user.id)}return t.updateAttributes("contributors",{hiddenContributorIds:l}),!0}}),parseHTML:()=>[{tag:"div[class=contributors]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"contributors"})]},addNodeView(){return this.editor.isThumbnail?(0,ef.fW)(r$,{update:ex.E7}):(0,ef.fW)(rX,{update:ex.E7})}});var rQ=n(32802);let rJ="125em",r0=e=>{let{svg:t,theme:n}=e;if(!t)return null;let i=(0,rQ.c)(n);return(0,l.jsx)(s.xu,{dangerouslySetInnerHTML:{__html:t},"data-testid":"diagram-svg",sx:{svg:{width:"100%",height:"auto",maxH:rJ,...i}}})};var r1=n(53295),r2=n(77221),r4=n(5901);let r3=async e=>{let t=Array.from(e.getCurrentPageShapeIds()),n=await e.getSvg(t,{padding:8,scale:1});if(n)return console.debug("generated svg",n),n},r5=(e,t,n)=>{e&&t&&(Array.from(e.getCurrentPageShapeIds()).length>0?e.updateShapes(t):e.createShapes(t),n&&e.updateAssets(n))},r7=(e,t)=>{e.user.updateUserPreferences({isDarkMode:(0,e5.wj)(t)}),setTimeout(()=>{e.zoomToFit()})},r8=e=>{let{isOpen:t,isEditable:n,onClose:i,isDrawingEditorActive:r,setDrawingEditorActive:o,editor:a,...s}=e,{node:d,updateAttributes:c}=s,{assets:u,shapes:h}=d.attrs,m=(0,x.CG)(te.Pu),[g,f]=(0,p.useState)();(0,p.useEffect)(()=>{g&&r5(g,h,u)},[h,u,g,c]);let v=(0,p.useCallback)(e=>{f(e),window.tldrawEditor=e,r7(e,m)},[m]),w=(0,p.useCallback)(async()=>{if(!g)return;let e=await r3(g);e?c({svg:e.outerHTML}):c({svg:null})},[g,c]),C=(0,p.useCallback)(()=>{g&&c({shapes:g.getCurrentPageShapes(),assets:g.getAssets(),version:2})},[c,g]),k=(0,ed.Kt)(C,500),j=(0,p.useCallback)(()=>{n&&w(),o(!1),i()},[i,w,o,n]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(b.dy,{placement:"bottom",onClose:j,isOpen:t,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,l.jsx)(b.P1,{}),(0,l.jsxs)(b.sc,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",onAnimationComplete:e=>{"enter"==e&&o(!0)},transition:{enter:{duration:.4}},overflow:"hidden",children:[(0,l.jsx)(b.Ng,{p:0,h:"100%",overflow:"hidden","data-testid":"drawing-editor-body",children:r?(0,l.jsx)(r4.r,{onMount:v,onChange:n?k:void 0,orgId:a.gammaOrgId,theme:m}):(0,l.jsx)(y.k,{align:"center",justify:"center",w:"100%",h:"100%",children:(0,l.jsx)(rf.$,{size:"xl"})})}),(0,l.jsx)(b.cC,{zIndex:400,backgroundColor:"white","data-testid":"drawing-editor-close"})]})]})})},r6=e=>{let{node:t,updateAttributes:n,selected:i,editor:r,getPos:o,decorations:a}=e,{width:d,meta:c,id:u,horizontalAlign:h,svg:m,shapes:g}=t.attrs,f=(0,x.CG)(te.Pw),v=(0,x.CG)(te.wc),b=(0,e9.LM)(r),C=f&&b&&v,k=(0,x.CG)(te.Av),j=!!k&&k===u,[A,I]=(0,p.useState)(!1),z=(0,x.CG)(te.Pu),L=(0,w.Yy)(),{ref:E,setIsResizing:T,resizeableSx:R}=(0,rs.ow)(r),H=(0,p.useCallback)(()=>{(0,r2.Sc)(u,!0)},[u]),P=(0,p.useCallback)(()=>{r.chain().setNodeSelection(o()).focus().run()},[r,o]),O=(0,p.useCallback)(()=>{(0,r2.Sc)(null,!1)},[]),D=(0,p.useCallback)((e,i)=>{n({...t.attrs,fullWidthBlock:void 0===i?t.attrs.fullWidthBlock:i,...e})},[t.attrs,n]),W=d||(null==c?void 0:c.width),F=!m,B=g&&g.length>0,{isFullWidth:G}=(0,r1.w)(a),U=(0,rr.nN)(G?"center":h);return(0,l.jsx)(ev.lO,{...e,as:"div",children:(0,l.jsxs)(y.k,{w:"100%",className:ro.d,css:U,sx:R,direction:"column",_focusWithin:{shadow:"outline"},children:[(0,l.jsxs)(s.xu,{ref:E,className:"diagram",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,w:G?"100%":W?"calc(".concat(W," * var(--font-size) / 16)"):"100%",maxW:"100%",h:"auto",maxH:rJ,position:"relative",minH:F?"6em":"auto","data-drag-handle":!0,children:[C&&i&&!G&&(0,l.jsx)(rs.R4,{imageWrapperRef:E,setIsResizing:T,updateResizeAttrs:D,refreshDeps:[t.attrs]}),(0,l.jsx)(r0,{svg:m,theme:z}),C&&!j&&!F&&(0,l.jsx)(s.xu,{cursor:"default",position:"absolute",inset:"0",zIndex:"1",onClick:P,onDoubleClick:H}),F&&(0,l.jsxs)(nG.g,{spacing:3,justify:"center",contentEditable:!1,color:L?rl.Z.DARK_COLOR:rl.Z.LIGHT_COLOR,h:32,backgroundColor:L?rl.Z.DARK_BG:rl.Z.LIGHT_BG,borderRadius:"var(--box-border-radius)","data-testid":"drawing-placeholder",onDoubleClick:f?H:void 0,children:[(0,l.jsx)(M.G,{size:"2x",icon:N.Kak}),f&&(0,l.jsx)(S.z,{size:"xs",onClick:H,fontFamily:"Inter, sans-serif",children:B?(0,l.jsx)(_.cC,{id:"3IPx8n"}):(0,l.jsx)(_.cC,{id:"trQ3Gx"})})]})]}),j&&(0,l.jsx)(r8,{...e,isOpen:j,isEditable:f,onClose:O,isDrawingEditorActive:A,setDrawingEditorActive:I})]})})},r9=eh.NB.create({name:"diagram",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes:()=>({id:(0,ia.b)(ot),shapes:{...(0,eJ.sw)("shapes")},assets:{...(0,eJ.sw)("assets"),default:{}},meta:{...(0,eJ.sw)("meta"),default:{}},width:{},svg:{}}),parseHTML(){return[{tag:"div[class=diagram]"},{tag:"diagram[bookmark]",getAttrs:(0,e0.xF)(this.storage)}]},addStorage:e0.gk,renderHTMLforAI(e){let{node:t}=e;return["diagram",{bookmark:(0,e0.ml)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"diagram"})]},addCommands(){let e=this.name,t=t=>{let{selection:n}=t;return n instanceof t7.qv&&n.node.type.name===e?n.node:void 0};return{editSelectedDiagramBlock:()=>e=>{let{state:n}=e,i=t(n);return i&&(0,x.bh)().dispatch((0,te.h)({drawingId:i.attrs.id})),!0}}},addExtensions:()=>[on],addNodeView:()=>(0,ef.fW)(r6,{update:ex.E7})}),oe=new t7.H$("UniqueMediaId"),ot=()=>(0,n7.x0)(5),on=io.I.extend({name:"UniqueDiagramId"}).configure({attributeName:"id",types:["diagram"],initialValue:ot,filterTransaction:e=>{let t=e.getMeta(nE.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:oe});var oi=n(84305);let or=()=>(0,l.jsx)(ef.T5,{as:"div",children:(0,l.jsx)(s.xu,{contentEditable:!1,borderRadius:"var(--box-border-radius)","data-selection-ring":"padded","data-selection-background":!0,"data-drag-handle":!0,py:"0.25em",position:"relative",transform:"translateY(0.25em)",children:(0,l.jsx)(E.i,{borderColor:"var(--body-color)",borderBottomWidth:"0.125em",opacity:.5})})}),oo=/^(---|___|—-)/,oa=eh.NB.create({name:"divider",group:"block cardNotesBlock",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:'hr[class="divider"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,eh.P1)(t,{class:"divider"})]},addNodeView:()=>(0,ef.fW)(or),addInputRules(){return[(0,oi.ok)({find:oo,type:this.type})]}});var ol=n(25925),os=n(87202),od=n(53650),oc=n(54042),ou=n(58763),op=n(54154),oh=n(80670),om=n(51499),og=n(25762),of=n(51131);let ox=(0,p.memo)(e=>{let{theme:t}=e,n=(0,of.l)(t),i=(0,eM.vS)(t),r=(0,eM.y)(t);return(0,l.jsx)(s.xu,{as:"svg",width:"0",height:"0",sx:n,children:(0,l.jsxs)("defs",{children:[(0,l.jsx)(ov,{theme:t}),(0,l.jsx)(oy,{theme:t}),(0,l.jsx)(ow,{color:(0,eM.H_)(r),id:"theme-accent-color-fill"}),(0,l.jsx)(ow,{color:(0,eM.H_)(i),id:"theme-body-color-fill"}),(0,l.jsx)(oC,{theme:t})]})})});ox.displayName="ThemeSVGDefs";let ov=(0,p.memo)(e=>{let{theme:t}=e,n=(0,eM.y)(t);return"linear-gradient"!==n.type?null:(0,l.jsx)(ob,{gradient:n,id:"theme-accent-gradient-linear"})});ov.displayName="ThemeAccentGradientLinearDef";let oy=(0,p.memo)(e=>{let{theme:t}=e,n=(0,eM.y)(t),i=(0,op.f)(t);if("linear-gradient"!==n.type)return null;let r=(0,og.wj)(t),o=(0,eM.XX)(t),a="semi"===i.shapeFill?(0,om.R7)(n,o,.5):n,s=(0,om.UL)(a,r?.25:.9);return s?(0,l.jsx)(ob,{gradient:s,id:"theme-accent-background-gradient-linear"}):null});oy.displayName="ThemeAccentBackgroundGradientLinearDef";let ob=(0,p.memo)(e=>{let{gradient:t,id:n}=e,i=t.angle*Math.PI/180;return(0,l.jsx)("linearGradient",{id:n,x1:"".concat(50+50*Math.cos(i+Math.PI),"%"),y1:"".concat(50+50*Math.sin(i+Math.PI),"%"),x2:"".concat(50+50*Math.cos(i),"%"),y2:"".concat(50+50*Math.sin(i),"%"),children:t.stops.map((e,t)=>{let{color:n,position:i}=e;return(0,l.jsx)("stop",{offset:"".concat(i,"%"),stopColor:n},t)})})});ob.displayName="LinearGradientDef";let ow=(0,p.memo)(e=>{let{color:t,id:n}=e;return t?(0,l.jsxs)("filter",{id:n,children:[(0,l.jsx)("feFlood",{floodColor:t,result:"flood"}),(0,l.jsx)("feComposite",{in:"flood",in2:"SourceAlpha",operator:"in"})]}):null});ow.displayName="ColorFillDef";let oC=(0,p.memo)(e=>{let{theme:t}=e,n=(0,op.f)(t);return(0,l.jsx)(l.Fragment,{children:"soft3d"===n.shapeShadow&&(0,l.jsx)(oh.Q,{theme:t,id:"theme-shape-shadow"})})});oC.displayName="ThemesV3SVGDefs";var ok=n(84092);let oj=e=>{if(e.state.selection instanceof t7.qv&&(0,ok.Q)(e.state.selection.node)){e.chain().focus(e.state.selection.from).blur().run();return}return e.commands.blur()};var oS=n(92035),oA=n(65050),oI=n(58284),oz=n(50645),oL=n(18149),oE=n.n(oL);let oN=e=>(0,x.CG)(t=>{if((0,te.gh)(t)===nq.q.DOC_VIEW)return null;let n=(0,te.k8)(t);if(!n||!(null==n?void 0:n.cardId))return null;let[i]=(0,eh.N2)(e.state.doc,e=>(0,tP.KH)(e)&&e.attrs.id===n.cardId);if(!i)return console.warn("[usePresentingCardBackground] Unexpectedly couldnt find presentingCard ".concat(n.cardId)),null;let r=(0,eJ.nv)(e.state.doc.resolve(i.pos+1),e=>(0,tP.KH)(e)&&e.attrs.background&&!e.attrs.background.inside).pop();return r?r.node.attrs.background:(console.warn("[usePresentingCardBackground] Unexpectedly couldnt find card at pos ".concat(i.pos)),null)},oE());var oM=n(53078);let o_=(0,iM.E)(s.xu),oT=(e,t)=>{let n=!!(e&&t),i=!!(e&&!t),r=!!(!e&&t),o=(0,p.useRef)(n);return(0,p.useEffect)(()=>{o.current=n},[n,!!(!e&&!t)]),[i||r?o.current:n,n]},oR=e=>{let{editor:t,node:n,updateAttributes:i}=e,r=(0,h.v9)(te.gh),o=(0,x.CG)(te.hN),a=(0,h.v9)(te.Hl),d=(0,h.v9)(te.i2),c=(0,x.CG)(te.Pu),u=r===nq.q.SLIDE_VIEW,m=oN(t),{background:g}=n.attrs,f=(0,e9.TZ)(),[v,b]=oT(u,d);(0,p.useEffect)(()=>{!n.attrs.docId&&t.gammaDocId&&i({...n.attrs,docId:t.gammaDocId})},[n.attrs,t,i]);let w=(0,ou.J)(c,o),C=(0,e5.wj)(c),k=(0,tX.R5)(c,g),j=(0,tX.wh)(k,C,t.isThumbnail?tt.Iv:void 0),S=(0,tX.wh)(u&&m&&m.type!==eQ.E.NONE?m:k,C,t.isThumbnail?tt.Iv:void 0);console.debug("%c[DocComponent] Doc is rerendering","background-color: chartreuse",{isPresentModeReady:b,isPresentModeReadyLagging:v,presentingCardId:d});let A=(0,oz.WD)(),I={width:"100%",'[data-animate-value="doc"]':{display:v?"none":void 0},...A.src&&u?{"--logo-push-x":"".concat(A.width+2*A.paddingX,"px"),"--logo-push-y":"".concat(A.height+2*A.paddingY,"px")}:void 0},z=(0,p.useCallback)(e=>{let n=e.target;return(!n.closest(".".concat(oA.ar))||!!n.getAttribute("data-outside-card-body"))&&(oj(t),!0)},[t]);(0,p.useEffect)(()=>od.F7.on("keydown","DOC_BLUR",e=>!!(0,os.ZP)("Esc")(e)&&!!t.isFocused&&(t.commands.blur(),e.preventDefault(),!0)),[t]);let L=(0,e9.Br)("comment");return(0,l.jsxs)(ef.T5,{as:"div","data-testid":"doc-node-root",style:{height:"100%"},children:[(0,l.jsx)(oc.P,{theme:c}),(0,l.jsx)(ox,{theme:c}),(0,l.jsx)(s.xu,{onMouseDown:z,h:"100%",children:(0,l.jsxs)(y.k,{className:"doc-content-wrapper",direction:"column",align:"center",pos:"relative",pb:f||u||!L?"0px":a?oI.i:oI.m,sx:w,onDragOver:tz.Gb,minH:"calc(var(--100vh) - var(--editor-padding-top, 0px))",children:[(0,l.jsx)(oH,{...j}),!f&&!u&&(0,l.jsx)(y.k,{alignSelf:"start",pos:"absolute",inset:"0",h:"100%",children:(0,l.jsx)(oz.LN,{})}),(0,l.jsx)(ol.M,{children:(0,l.jsx)(o_,{className:"motion-present-mode-bg","data-doc-background-element-present-mode":!0,"data-export-master":!0,position:"fixed",zIndex:oM.S.presentBg,top:0,left:0,right:0,h:"100%",initial:{opacity:0},animate:{opacity:1},exit:{opacity:1},visibility:b?"visible":"hidden",transition:oA.Vs,css:nK.cx?void 0:{scrollbarGutter:"stable",overflow:"scroll"},...S},"presenting-background-"+d)}),(0,l.jsx)(y.k,{sx:I,justify:"center",className:(0,eE.cx)("document-content",u?"is-present-mode":"is-doc-mode"),pt:"var(--doc-padding-top)",children:(0,l.jsx)(ef.ms,{style:{width:"100%"}})})]})}),f&&(0,l.jsx)(oz.kT,{})]})},oH=e=>{let t=(0,oS.f_)()?{style:{touchAction:"none",display:"contents"}}:{};return(0,l.jsx)(y.k,{"data-doc-background-element":!0,position:"absolute",w:"var(--editor-width)",h:"100%",contentEditable:!1,userSelect:"none",clipPath:"inset(0)",top:0,left:0,...t,children:(0,l.jsx)(s.xu,{"data-testid":"doc-background",width:"100%",height:"100%",position:"fixed",...(0,oS.f_)()?{top:"0px"}:{},...e})})};var oP=n(55532);let oO=eh.NB.create({name:"doc",topNode:!0,content:"document"}),oD=eh.NB.create({name:"document",content:"card+",isolating:!0,defining:!0,selectable:!1,addAttributes:()=>({aiOptions:{default:oP.w.aiOptions,...(0,eJ.sw)("aiOptions")},docId:{},background:{default:oP.w.background,...(0,eJ.sw)("background")},docFlags:{default:oP.w.docFlags,...(0,eJ.sw)("docFlags")},format:{},customCode:{default:oP.w.customCode,...(0,eJ.sw)("customCode")},settings:{default:oP.w.settings,...(0,eJ.sw)("settings")},generateStatus:{default:oP.w.generateStatus},generateInfo:{default:oP.w.generateInfo,...(0,eJ.sw)("generateInfo")}}),addNodeView:()=>(0,ef.fW)(oR,{update:ex.E7,ignoreMutation:e=>{let{mutation:t}=e,n=t.target instanceof HTMLElement?t.target:t.target.parentElement,i="selection"!==t.type&&oW(n);return console.debug("[Document.ignoreMutation] isMutationOutsideDocContent:",i),!!i}}),parseHTML:()=>[{tag:"div[class=gamma-doc]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"gamma-doc"}),0]}}),oW=e=>{let t=null==e?void 0:e.parentElement;return!!t&&!t.closest(".document-content")};var oF=n(34584),oB=n(12436),oG=n.n(oB),oU=n(62493),oV=n(71355),oq=n(28789),oK=n(31292),oY=n(97925),oX=n(90921);class o${destroy(){this.handlers.forEach(e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)})}update(e,t){null!=this.cursor&&t.doc!=e.state.doc&&(this.cursor.pos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){var t,n,i,r,o;(((null==e?void 0:e.pos)||null)!=(null===(t=this.cursor)||void 0===t?void 0:t.pos)||(null==e?void 0:e.type)!=(null===(n=this.cursor)||void 0===n?void 0:n.type)||(null==e?void 0:e.side)!=(null===(i=this.cursor)||void 0===i?void 0:i.side))&&(this.cursor=e,null==e?(null===(o=this.element)||void 0===o||null===(r=o.parentNode)||void 0===r||r.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){var e;let t,n;if(null==this.cursor||!this.editorView)return;let i=this.editorView.state.doc.resolve(this.cursor.pos),r,o="";if("gallery"==this.cursor.type&&(null===(e=this.cursor.node)||void 0===e?void 0:e.type.name)!=="gallery")r=this.cursor.rect,o="Drop to make a gallery";else if("blankRect"==this.cursor.type)r=this.cursor.rect,o="";else if("column"==this.cursor.type||"gallery"==this.cursor.type||"smartLayout"==this.cursor.type){let e=this.cursor.rect;if(!e)return;let t="right"==this.cursor.side||"bottom"==this.cursor.side,n=t?i.nodeAfter:i.nodeBefore,o=n&&((0,oV._5)(n)||(0,oK.E)(n))?0:this.width;if("right"==this.cursor.side||"left"==this.cursor.side){let n=t?e.right+o:e.left-o;r={top:e.top,bottom:e.bottom,left:n-this.width/2,right:n+this.width/2}}else{let n=t?e.bottom+o:e.top-o;r={left:e.left,right:e.right,top:n-this.width/2,bottom:n+this.width/2}}}else if(!i.parent.inlineContent){let e=i.nodeBefore,t=i.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursor.pos-(e?e.nodeSize:0));if(!n||!(n instanceof Element))return;let i=n.getBoundingClientRect(),o=e?i.bottom:i.top;e&&t&&(o=(o+this.editorView.nodeDOM(this.cursor.pos).getBoundingClientRect().top)/2),r={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!r){let e=this.editorView.coordsAtPos(this.cursor.pos);r={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let a=this.editorView.dom.offsetParent;if(this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),a&&(a!=document.body||"static"!=getComputedStyle(a).position)){let e=a.getBoundingClientRect();t=e.left-a.scrollLeft,n=e.top-a.scrollTop}else t=-pageXOffset,n=-pageYOffset;this.element.style.left=r.left-t+"px",this.element.style.top=r.top-n+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px",this.element.dataset.type=this.cursor.type,this.element.innerHTML=o}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){var t,n,i,r,o,a,l,s;if(!this.editorView.editable)return;let d=(0,oU.VR)(this.editorView,e,null===(t=this.editorView.dragging)||void 0===t?void 0:t.slice);if(d){this.setCursor({...d,type:"blankRect"}),this.scheduleRemoval(5e3);return}let c=(0,oY.fC)(this.editorView,e,null===(n=this.editorView.dragging)||void 0===n?void 0:n.slice);if(c){this.setCursor({...c,type:"blankRect"}),this.scheduleRemoval(5e3);return}let u=(0,oq.yT)(this.editorView,e,null===(i=this.editorView.dragging)||void 0===i?void 0:i.slice,!this.editorView.dragging);if(u){this.setCursor({...u,type:"gallery"}),this.scheduleRemoval(5e3);return}let p=(0,oV.BF)(this.editorView,e,null===(r=this.editorView.dragging)||void 0===r?void 0:r.slice,!this.editorView.dragging);if(p){this.setCursor({...p,type:"column"}),this.scheduleRemoval(5e3);return}let h=(0,oU.pY)(this.editorView,e,null===(o=this.editorView.dragging)||void 0===o?void 0:o.slice);if(h){this.setCursor({...h,type:"blankRect"}),this.scheduleRemoval(5e3);return}let m=(0,oY.cQ)(this.editorView,e,null===(a=this.editorView.dragging)||void 0===a?void 0:a.slice);if(m){this.setCursor({...m,type:"smartLayout"}),this.scheduleRemoval(5e3);return}let g=(0,eU.jz)(this.editorView,e,null===(l=this.editorView.dragging)||void 0===l?void 0:l.slice);if(g){this.setCursor({pos:g.pos,type:"default"}),this.scheduleRemoval(5e3);return}let f=(0,oX.Z)(this.editorView,e,null===(s=this.editorView.dragging)||void 0===s?void 0:s.slice);null===f?this.setCursor(null):(this.setCursor({pos:f,type:"default"}),this.scheduleRemoval(5e3))}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}constructor(e,t){this.cursor=null,this.element=null,this.timeout=null,this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>this[t](e);return e.dom.addEventListener(t,n),{name:t,handler:n}}),this.dragover=oG()(this.dragover,100,{trailing:!1}).bind(this)}}let oZ=eh.hj.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:null}),addProseMirrorPlugins(){return[function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t7.Sy({key:new t7.H$("dropCursor"),view:t=>new o$(t,e)})}(this.options)]}}).configure({color:"var(--chakra-ring-color)",width:3,class:"ProseMirror-dropcursor"});var oQ=n(35483),oJ=n(11254);let o0=e=>{let{svg:t,isDark:n,font:i}=e,r=(0,p.useMemo)(()=>(0,oJ.c)(n),[n]),o=(0,p.useMemo)(()=>(0,oJ.m)(i),[i]);return t?(0,l.jsx)(s.xu,{dangerouslySetInnerHTML:{__html:t},"data-testid":"drawing-svg",sx:{svg:{width:"100%",height:"auto",text:o,...r}}}):null};var o1=n(80197),o2=n(27102);let o4=["tl-centered-g"],o3=async e=>{let t=await e.getSvg(e.shapes.map(e=>e.id),{padding:1});if(t)return o4.forEach(e=>{var n;null===(n=t.querySelector(".".concat(e)))||void 0===n||n.classList.remove(e)}),t.querySelectorAll(":not(mask)[id]").forEach(e=>e.removeAttribute("id")),t},o5=e=>{let{isOpen:t,isEditable:n,onClose:i,font:r,isDark:o,isDrawingEditorActive:a,setDrawingEditorActive:s,...d}=e,{node:c,updateAttributes:u}=d,{page:h,assets:m}=c.attrs,[g,f]=(0,p.useState)();(0,p.useEffect)(()=>{(0,r2.Us)(g,h,m)},[h,m,g,u]);let x=(0,p.useCallback)(e=>{f(e),window.tldrawEditor=e,(0,r2.ZF)(e,!0)},[]),v=(0,p.useCallback)(async()=>{if(!g)return;let e=await o3(g);if(!e)return;u({svg:e.outerHTML});let t=JSON.stringify({page:g.document.pages.page,assets:g.document.assets});console.debug("[DrawingEditor] Generated SVG",{svgSize:e.outerHTML.length,jsonSize:t.length,svgEl:e})},[g,u]),w=(0,p.useCallback)(()=>{g&&u({page:g.document.pages.page,assets:g.document.assets})},[u,g]),C=(0,ed.Kt)(w,500),k=(0,p.useCallback)(()=>{n&&v(),s(!1),i()},[i,v,s,n]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(b.dy,{placement:"bottom",onClose:k,isOpen:t,trapFocus:!0,isFullHeight:!0,returnFocusOnClose:!1,children:[(0,l.jsx)(b.P1,{}),(0,l.jsxs)(b.sc,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",onAnimationComplete:e=>{"enter"==e&&s(!0)},transition:{enter:{duration:.4}},children:[(0,l.jsx)(b.Ng,{p:0,h:"100%",overflow:"hidden","data-testid":"drawing-editor-body",children:a?(0,l.jsx)(o2.rJ,{readOnly:!n,showPages:!1,onMount:x,onChangePage:n?C:void 0,autofocus:!1,isDark:o,font:r}):(0,l.jsx)(y.k,{align:"center",justify:"center",w:"100%",h:"100%",children:(0,l.jsx)(rf.$,{size:"xl"})})}),(0,l.jsx)(b.cC,{zIndex:2,backgroundColor:"white","data-testid":"drawing-editor-close"})]})]})})},o7=(0,iM.E)(s.xu),o8=e=>{let{node:t,updateAttributes:n,selected:i,editor:r,getPos:o,decorations:a}=e,{width:d,meta:c,id:u,horizontalAlign:h,svg:m,page:g}=t.attrs,f=(0,x.CG)(te.Pw),v=(0,x.CG)(te.wc),b=(0,e9.LM)(r),w=f&&b&&v,C=(0,x.CG)(te.Av),k=!!C&&C===u,[j,A]=(0,p.useState)(!1),I=(0,x.CG)(te.Pu),{isDark:z}=(0,o1.Jh)(I),L=(0,of.l)(I)["--body-font"],{ref:E,setIsResizing:N,resizeableSx:_,onLayoutAnimationStart:T,onLayoutAnimationComplete:R}=(0,rs.ow)(r),H=(0,p.useCallback)(()=>{(0,r2.Sc)(u,!0)},[u]),P=(0,p.useCallback)(()=>{r.chain().setNodeSelection(o()).focus().run()},[r,o]),O=(0,p.useCallback)(()=>{(0,r2.Sc)(null,!1)},[]),D=(0,p.useCallback)((e,i)=>{n({...t.attrs,fullWidthBlock:void 0===i?t.attrs.fullWidthBlock:i,...e})},[t.attrs,n]),W=d||(null==c?void 0:c.width),F=!m,B=g&&Object.keys(g.shapes).length>0,{isFullWidth:G}=(0,r1.w)(a),U=(0,rr.nN)(G?"center":h);return(0,l.jsx)(ev.lO,{...e,as:"div",children:(0,l.jsxs)(y.k,{w:"100%",className:ro.d,css:U,sx:_,direction:"column",_focusWithin:{shadow:"outline"},children:[(0,l.jsxs)(o7,{ref:E,className:"drawing",borderRadius:"var(--box-border-radius)","data-content-reference":!0,"data-selection-ring":!0,"data-selection-background":!0,w:G?"100%":W?"calc(".concat(W," * var(--font-size) / 16)"):"100%",maxW:"100%",h:"auto",position:"relative",layout:!0,layoutDependency:h,transition:{duration:.15},onLayoutAnimationStart:T,onLayoutAnimationComplete:R,minH:F?"6em":"auto","data-drag-handle":!0,children:[w&&i&&!G&&(0,l.jsx)(rs.R4,{imageWrapperRef:E,setIsResizing:N,updateResizeAttrs:D,refreshDeps:[t.attrs]}),!j&&(0,l.jsx)(o0,{font:L,svg:m,isDark:z}),w&&!k&&!F&&(0,l.jsx)(s.xu,{cursor:"default",position:"absolute",inset:"0",zIndex:"1",onClick:P,onDoubleClick:H}),F&&(0,l.jsxs)(nG.g,{spacing:3,justify:"center",contentEditable:!1,color:"gray.400",h:32,backgroundColor:"blackAlpha.50",borderRadius:"var(--box-border-radius)","data-testid":"drawing-placeholder",children:[(0,l.jsx)(M.G,{size:"2x",icon:tC.Kak}),f&&(0,l.jsx)(S.z,{size:"xs",onClick:H,children:B?"Open diagram":"Add diagram"})]})]}),k&&(0,l.jsx)(o5,{...e,isOpen:k,isEditable:f,onClose:O,isDark:z,font:L,isDrawingEditorActive:j,setDrawingEditorActive:A})]})})},o6=new t7.H$("UniqueMediaId"),o9=io.I.extend({name:"UniqueDrawingId"}).configure({attributeName:"id",types:["drawing"],initialValue:r2.RA,filterTransaction:e=>{let t=e.getMeta(nE.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:o6}),ae=eh.NB.create({name:"drawing",group:"block",atom:!0,selectable:!0,draggable:!0,addAttributes:()=>({id:(0,ia.b)(r2.RA),page:{...(0,eJ.sw)("page")},assets:{...(0,eJ.sw)("assets"),default:{}},meta:{...(0,eJ.sw)("meta"),default:{}},fullWidthBlock:{default:!1},width:{},svg:{}}),parseHTML(){return[{tag:"div[class=drawing]"},{tag:"tldraw",getAttrs:e=>{try{let t=new oQ.J2,n=JSON.parse(e.innerHTML);return t.insertContent(n,{select:!1}),{page:t.document.pages[t.currentPageId],assets:t.assets}}catch(t){return console.error("(caught) Error parsing Tldraw paste",t,e.innerHTML),!1}}},{tag:"drawing[bookmark]",getAttrs:(0,e0.xF)(this.storage)}]},addStorage:e0.gk,renderHTMLforAI(e){let{node:t}=e;return["drawing",{bookmark:(0,e0.ml)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"drawing"})]},addCommands(){this.name;let e=e=>{let{selection:t}=e;return t instanceof t7.qv&&("drawing"===t.node.type.name||"diagram"===t.node.type.name)?t.node:void 0};return{editSelectedDrawingBlock:()=>t=>{let{state:n}=t,i=e(n);return i&&(0,x.bh)().dispatch((0,te.h)({drawingId:i.attrs.id})),!0}}},addExtensions:()=>[o9],addNodeView:()=>(0,ef.fW)(o8,{update:ex.E7})}),at=eh.hj.create({name:"dynamicNodes",extendNodeSchema(e){var t;return{dynamic:null!==(t=(0,eh.nU)((0,eh.Nl)(e,"dynamic",e)))&&void 0!==t&&t}}}),an=eh.hj.create({name:"fixRequiredAttrs",onBeforeCreate(){Object.values(this.editor.schema.nodes).forEach(e=>{Object.values(e.attrs||{}).forEach(e=>{void 0===e.default&&(e.hasDefault=!1)})})}});var ai=n(20145),ar=n(48010),ao=n(46577),aa=n(24524),al=n(3440),as=n.n(al);let ad=e=>{"footnote"!==e.$anchor.doc.type.name&&!e.empty&&!(0,aa.AW)(e)&&(0,eh.xh)(e)&&(0,aa.RV)()&&(0,aa.t0)(null,!1)},ac=(e,t,n,i)=>{if(!e.some(e=>e.docChanged))return;let{doc:r}=n,o=[],a=[];r.nodesBetween(0,n.doc.content.size,(e,t,n)=>{"footnote"===e.type.name&&o.push({from:t,to:t+e.nodeSize,node:e,parent:n}),e.marks.forEach(i=>{"footnoteLabel"===i.type.name&&a.push({from:t,to:t+e.nodeSize,mark:i,parent:n})})}),a.filter(e=>{let{mark:t,parent:n}=e;return!o.find(e=>{let{node:i,parent:r}=e;return i.attrs.noteId===t.attrs.noteId&&r===n})}).forEach(e=>{let{from:t,to:n,mark:r}=e;return i.removeMark(t,n,r)});let l=e=>(0,eh.TP)("footnoteLabel",n.schema).create({noteId:e});a.filter(e=>{let{mark:t}=e;return!t.attrs.noteId}).forEach(e=>{let{mark:t,from:n,to:r}=e,s=o.find(e=>{let{node:t,from:n}=e,i=n>=r,o=!a.find(e=>{let{mark:n}=e;return n.attrs.noteId==t.attrs.noteId});return i&&o});s&&i.removeMark(n,r,t).addMark(n,r,l(s.node.attrs.noteId))}),Object.entries(as()(o,e=>{let{node:t}=e;return t.attrs.noteId})).forEach(e=>{let[t,n]=e;if(1==n.length||!t)return;let r=a.filter(e=>{let{mark:n}=e;return n.attrs.noteId===t});n.slice(1).forEach((e,t)=>{let{from:n}=e,o=(0,aa.H)();i.setNodeMarkup(n,void 0,{noteId:o});let a=r[t+1];a&&(i.removeMark(a.from,a.to,a.mark),i.addMark(a.from,a.to,l(o)))})})},au=new t7.Sy({key:new t7.H$("footnote"),appendTransaction:(e,t,n)=>{let{selection:i}=n;i.eq(t.selection)||ad(i);let r=n.tr;return((0,nN.W)(e,t,n,r),ac(e,t,n,r),r.docChanged)?(console.debug("[FootnotePlugin] Applied steps",r.steps),r):null}});var ap=n(332),ah=n(46164),am=n(10625),ag=n(67046),af=n(99058),ax=n(25481),av=n(66295),ay=n(3939),ab=n(20728),aw=n(72611);let aC=(e,t,n)=>{let i=(0,x.CG)(te.II);(0,j.O)({ref:n,enabled:!!(n&&i===t),handler(e){var t,n;(null===(t=e.target)||void 0===t?void 0:t.closest("[data-footnote-view]"))||(null===(n=e.target)||void 0===n?void 0:n.closest("[data-footnote-label]"))||r(!1)}});let r=(0,p.useCallback)(n=>{var r,o;let a=e.state.selection,l=(0,eh.xh)(a)&&!a.empty,s=(null===(r=document.activeElement)||void 0===r?void 0:r.closest(".footnote-popover"))||!!(null===(o=document.activeElement)||void 0===o?void 0:o.closest("[data-in-editor-focus]")),d=void 0!==n?n:i!==t;s||(d&&!l?(0,aa.NX)(t,!0):!1===d&&(0,aa.NX)(t,!1))},[e.state.selection,i,t]);return{onClick:r}},ak=e=>{let{node:t,editor:n,innerEditor:i,selected:r}=e,{noteId:o}=t.attrs,a=(0,p.useRef)(null),d=(0,x.CG)(te.II),c=(0,x.CG)(te.Pw),u=(0,nZ.C7)(),{onClick:h}=aC(n,o,a);(0,p.useEffect)(()=>{i&&i.setEditable(c)},[c,i]);let m=!!d&&d===o,g=(0,p.useCallback)(()=>(0,aa.t0)(o,!1),[o]);(0,p.useEffect)(()=>{if(!i)return;let e=()=>{setTimeout(()=>{(0,eJ.KB)(i)||g()},20)};return i.on("blur",e),()=>{i.off("blur",e)}},[i,g]);let f=!(0,nz.$v)(n),v=(0,p.useCallback)(()=>{f&&h()},[f,h]);return(0,l.jsx)(ef.T5,{as:"span","data-testid":"footnote-nodeview-wrapper",children:(0,l.jsxs)(G.J,{isOpen:m,onClose:g,placement:"top",gutter:8,isLazy:!0,lazyBehavior:"unmount",autoFocus:!1,closeOnBlur:!1,closeOnEsc:!1,returnFocusOnClose:!1,children:[(0,l.jsx)(U.x,{children:(0,l.jsx)(I.x,{as:"span",onClick:v,_after:{content:"counter(footnote)",counterIncrement:"footnote",position:"relative",bottom:"0.6em",fontSize:"0.8em",shadow:r&&f?"outline":void 0,borderRadius:"sm"},pl:"1px",className:"footnote",contentEditable:!1,"data-footnote-view":!0,cursor:f?"pointer":void 0})}),f&&(0,l.jsx)(ap.h,{children:(0,l.jsxs)(V.y,{zIndex:"popover",shadow:"md",borderRadius:"md",border:"1px solid",borderColor:"gray.200",w:"500px",maxW:"100vw","data-footnote-popover-test-id":o,p:0,ref:a,children:[(0,l.jsx)(ah.Q,{}),(0,l.jsx)(q.b,{position:"relative",zIndex:"1",p:0,className:"footnote-popover","data-footnote-popover-id":o,children:u?(0,l.jsx)(aA,{...e,onClose:g}):(0,l.jsx)(aS,{...e,editable:c,onClose:g})}),(0,l.jsx)(s.xu,{position:"absolute",top:"-".concat(8,"px"),bottom:"-".concat(8,"px"),left:0,right:0,zIndex:"0"})]})})]})})},aj=e2()({},ay.Y,{".ProseMirror":{px:8,py:4,overflow:"hidden auto",maxH:"300px",maxW:"100%",borderRadius:"md"}}),aS=e=>{let{editor:t,innerEditor:n,mountEditor:i,destroyEditor:r,node:o,editable:a,getPos:d,onClose:c}=e,{noteId:u}=o.attrs,h=(0,p.useCallback)(()=>t.commands.convertNoteToCard(u),[t,u]),m=(0,p.useCallback)(()=>{t.chain().focus().setNodeSelection(d()).deleteSelection().run()},[t,d]);(0,p.useEffect)(()=>{if(i&&r)return i(),()=>{r()}},[i,r]);let g=(0,x.CG)(te.Pu),f=(0,of.l)(g,"#FFFFFF");if(!n)return null;let v=(0,eh.N2)(t.state.doc,e=>e.marks.some(e=>"footnoteLabel"===e.type.name&&e.attrs.noteId===u)).length>0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.xu,{className:oA.pL,sx:aj,position:"relative",_focusWithin:{shadow:a?"outline":void 0},borderRadius:"md",css:f,children:[(0,l.jsx)(aw.k,{editor:n,className:"highlight-mask"}),(0,l.jsx)(ec.Y,{editor:n}),(0,l.jsxs)(tD.h,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:tz.br,spacing:0,children:[a&&(0,l.jsxs)(am.v,{autoSelect:!1,isLazy:!0,children:[(0,l.jsx)(ag.j,{as:tW.h,icon:(0,l.jsx)(M.G,{icon:tC.S6C}),minW:6,h:6,isRound:!0,backgroundColor:"white"}),(0,l.jsx)(ap.h,{children:(0,l.jsxs)(af.q,{"data-in-editor-focus":!0,zIndex:"dropdown",children:[v&&(0,l.jsx)(ax.s,{icon:(0,l.jsxs)("span",{className:"fa-layers fa-fw",children:[(0,l.jsx)(M.G,{icon:td.lCX,fixedWidth:!0}),(0,l.jsx)(M.G,{icon:td.eFW,inverse:!0,transform:"shrink-8"})]}),onClick:h,children:(0,l.jsx)(_.cC,{id:"p/s15o"})}),(0,l.jsx)(ax.s,{icon:(0,l.jsx)(M.G,{icon:tC.XAH,fixedWidth:!0}),color:"red.500",onClick:m,children:(0,l.jsx)(_.cC,{id:"sHHbXH"})})]})})]}),(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"j+JKcM"}),icon:(0,l.jsx)(M.G,{icon:tC.NBC}),minW:6,h:6,isRound:!0,onClick:c,backgroundColor:"white"})]})]}),(0,l.jsx)(ab.uH,{editor:n})]})},aA=e=>{let{mountEditor:t,destroyEditor:n,onClose:i}=e,r=(0,p.useMemo)(()=>{if(t)return t()},[t]);(0,p.useEffect)(()=>{if(n)return()=>n()},[n]);let o=(0,x.CG)(te.Pu),a=(0,of.l)(o,"#FFFFFF");return r?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.xu,{className:oA.pL,sx:aj,position:"relative",borderRadius:"md",css:a,children:[(0,l.jsx)(av.f,{editor:r}),(0,l.jsx)(tD.h,{size:"sm",colorScheme:"gray",variant:"ghost",position:"absolute",right:4,top:2,onMouseDown:tz.br,spacing:0,children:(0,l.jsx)(tW.h,{"aria-label":T.ag._({id:"j+JKcM"}),icon:(0,l.jsx)(M.G,{icon:tC.NBC}),minW:6,h:6,isRound:!0,onClick:i,backgroundColor:"white"})})]})}):null};var aI=n(1776);let az=eh.vc.create({name:"footnoteLabel",inclusive:!1,excludes:"link underline",priority:eZ.a.FootnoteLabel,parseHTML(){return[{tag:"span[class=footnote-label][bookmark]",getAttrs:(0,e0.xF)(this.storage)},{tag:"span[class=footnote-label]"}]},renderHTML(e){let{HTMLAttributes:t}=e;return["span",(0,eh.P1)(t,{class:"footnote-label"}),0]},renderHTMLforAI(e){let{mark:t}=e;return["span",{class:"footnote-label",bookmark:(0,e0.ml)(this.storage,t)},0]},addStorage:e0.gk,addAttributes:()=>({noteId:{rendered:!1}}),addProseMirrorPlugins(){return[(0,aI.r)(this,aL)]}}),aL=e=>{let{node:t,editor:n,children:i}=e,{noteId:r}=t.attrs,o=(0,nZ.C7)(),{onClick:a}=aC(n,r),s=!(0,nz.$v)(n),d=(0,p.useCallback)(()=>{s&&a()},[s,a]);return(0,l.jsx)(ef.T5,{as:"span",className:"footnote-label-view",children:(0,l.jsx)(I.x,{as:"span",className:"footnote-label",onClick:d,"data-footnote-label":!0,cursor:s?"pointer":void 0,children:o?i:(0,l.jsx)(ef.ms,{as:"span"})})})},aE=/(?:^|\s)((?:\^)((?:[^^]+))(?:\^))$/,aN=eh.NB.create({name:"footnote",content:"(block | footnoteBlock)+",group:"inline",atom:!0,inline:!0,priority:eZ.a.Footnote,parseHTML(){return[{tag:"span[class=footnote]",getContent:(e,t)=>rM.HY.fromJSON(t,JSON.parse(e.getAttribute("data-content")||"{}"))},{tag:"div[class=imported-footnote]"},{tag:"footnote[bookmark]",getAttrs:(0,e0.xF)(this.storage),getContent:(0,e0.eV)(this.storage)}]},addStorage:e0.gk,renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["span",(0,eh.P1)(n,{class:"footnote","data-content":JSON.stringify(t.content.toJSON())})]},renderHTMLforAI(e){let{node:t}=e;return["footnote",{bookmark:(0,e0.ml)(this.storage,t)}]},addAttributes(){return{noteId:{parseHTML:e=>{let t=(0,e0.xF)(this.storage)(e);return t&&t.noteId?t.nodeId:(0,aa.H)()},default:void 0}}},addNodeView:()=>nj(ak,{nodeName:"footnote",preventNodeOrExtensionTypes:["doc","document","card"]}),addInputRules(){var e;return[(e={find:aE,nodeType:this.type,markType:this.editor.schema.marks.footnoteLabel},new eh.VK({find:e.find,handler:t=>{let{state:n,range:i,match:r}=t,{tr:o}=n,a=r[r.length-1],l=r[0],s=i.to;if(a){let t=l.search(/\S/),r=i.from+l.indexOf(a),d=r+a.length;if((0,eh.tI)(i.from,i.to,n.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.markType&&n!==t.mark.type)).filter(e=>e.to>r).length)return;d<i.to&&o.delete(d,i.to),r>i.from&&o.delete(i.from+t,r),s=i.from+t+a.length;let c=(0,aa.H)();(0,aa.t0)(c,!0);let u=e.nodeType.createAndFill({noteId:c},rM.HY.empty);o.insert(s,u),o.addMark(i.from+t,s,e.markType.create({noteId:c})),o.removeStoredMark(e.markType)}}}))]},addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e;if(!(0,aa.AW)(t.state.selection))return!1;let n=t.state.selection.node.attrs.noteId;return(0,aa.t0)(n,!0),!0},Escape:()=>{let e=(0,aa.RV)();return!!e&&((0,aa.t0)(e,!1),!0)},"Mod-Alt-f":e=>{let{editor:t}=e;return t.commands.toggleFootnote()}}),addProseMirrorPlugins:()=>[au],addCommands:()=>({convertNoteToCard:e=>t=>{let{chain:n,state:i}=t,{doc:r}=i,o=(0,eh.N2)(r,t=>"footnote"===t.type.name&&t.attrs.noteId===e);if(1!==o.length)throw Error("Found the wrong number of footnotes nodes: ".concat(o));let{node:a,pos:l}=o[0],s=(0,eh.IH)(r.resolve(l-1),i.schema.marks.footnoteLabel,{noteId:a.attrs.noteId});if(!s)return console.error("Couldnt find the corresponding footnote mark",{node:a,pos:l}),!1;let d=r.textBetween(s.from,s.to),c={type:"card",attrs:{id:ao.C2.generate()},content:[{type:"heading",attrs:{level:1},content:[{type:"text",text:d}]},...a.content.toJSON()]},u=new URL(window.location.href);u.hash="card-".concat(c.attrs.id),(0,eV.Nn)(c.attrs.id,!1);let p=r.content.size-1;return n().setTextSelection(s).unsetMark("footnoteLabel").setLink({href:u.toString()}).insertContentAt(p,c).command(e=>{let{tr:t}=e,n=(0,el.t)(t.doc.resolve(p));return n&&t.setSelection(n),!0}).deleteRange({from:l,to:l+a.nodeSize}).focusDelayed().run()},toggleFootnote:()=>e=>{let{chain:t,state:n,editor:i}=e;if(i.isActive("footnoteLabel"))return t().toggleMark("footnoteLabel").focus().run();let r=(0,aa.H)();return(0,aa.t0)(r,!0),(0,ar.N)().push(()=>{var e,t;null===(e=(t=i.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!0),aM(r)},"toggleFootnote"),t().setMark("footnoteLabel",{noteId:r}).insertContentAt(n.selection.to,{type:"footnote",attrs:{noteId:r},content:[{type:"paragraph"}]}).run()}})}),aM=e=>{let t=document.querySelector('[data-footnote-popover-id="'.concat(e,'"] .ProseMirror'));if(!t)return;t.focus();let n=window.getSelection();if(!n)return;let i=document.createRange();i.setStart(t,0),i.setEnd(t,0),n.removeAllRanges(),n.addRange(i)};var a_=n(97509),aT=n(57941),aR=n(9432);let aH=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,aP=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,aO=aR.ZP.extend({addInputRules(){return[(0,eh.Cf)({find:aH,type:this.type}),(0,eh.Cf)({find:aP,type:this.type})]}});var aD=n(83256),aW=n(31753),aF=n(38636),aB=n(99872),aG=n(68527),aU=n(94672),aV=n(9160),aq=n(67221),aK=n(7553);let aY=e=>{let{node:t,decorations:n,editor:i,getPos:r}=e,{options:o,...a}=t.attrs,d=(0,aq.PX)(n),c=(0,aK.P)(d.smartLayoutAttrs.variantKey),{Cell:u}=c,h=(0,x.CG)(te.Pu),m=(0,oY.jM)(d.smartLayoutAttrs),{firstChildSize:g}=(0,eH.z)(n),f=d.index===d.numCells-1,v=(0,x.CG)(te.hN),w=(0,ta.Od)(n),C=(0,p.useCallback)(()=>{let e=r(),t=i.state.doc.nodeAt(r());t&&i.commands.insertSmartLayoutCell(e+t.nodeSize)},[i,r]),k=c.addDirection?c.addDirection(m):"right",j=(0,p.useCallback)(()=>{v&&i.commands.selectNodeAtPos(r())},[i,r,v]),S=a.image,A=(0,p.useCallback)(e=>{i.commands.updateNestedAttributesAtPos(r(),{image:e2()({},S,e,{meta:{has_transparency:!0}})})},[i,r,S]),{bgRemovalInProgress:z}=(0,e8.CI)({editor:i,id:a.id,src:null==S?void 0:S.src,updateAttributes:A});return(0,l.jsx)(aU.l,{...e,children:(0,l.jsx)(s.xu,{display:"contents",position:"relative","data-spotlight-parent":!0,children:(0,l.jsxs)(u,{cellOptions:o,layoutOptions:m,theme:h,...d,...a,...e,firstChildSize:g,isFocused:w,selectCell:j,variant:c,dragHandle:(0,l.jsx)(eR.A,{...e,handlePlacement:"top","data-testid":"smart-layout-cell-drag-handle",label:(0,l.jsx)(y.k,{direction:"column",align:"center",children:(0,l.jsx)(_.cC,{id:"YkfVHA",components:{0:(0,l.jsx)(I.x,{color:"gray.500"})}})})}),children:[(0,l.jsx)(ef.ms,{style:{maxWidth:"100%",wordBreak:"break-word"}}),v&&f&&(0,l.jsx)(y.k,{position:"absolute",..."bottom"===k?{bottom:-3,right:0,width:"100%",height:6,justify:"center"}:{right:-3,bottom:0,height:"100%",width:6,align:"center"},opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",zIndex:"1",className:"add-button",children:(0,l.jsx)(b.kH,{label:(0,l.jsx)(_.cC,{id:"NQ8llq"}),placement:"top",children:(0,l.jsx)(tW.h,{icon:(0,l.jsx)(M.G,{icon:tC.r8p}),"aria-label":T.ag._({id:"NQ8llq"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:C,onMouseDown:tz.br})})}),z&&v&&(0,l.jsx)(aV.HI,{removeBackground:z})]})})})},aX=eh.NB.create({name:"smartLayoutCell",content:"(block | smartLayoutBlock)+",isolating:!0,selectable:!1,containerHandle:!0,imageKeyPath:"image",accessoryImageKey:"image",addAttributes:()=>({id:(0,ia.b)(aG.G),options:{default:{},...(0,eJ.sw)("options")},width:{default:null},image:{default:null,...(0,eJ.sw)("image")},label:{default:null,parseHTML:e=>e.getAttribute("label")||e.getAttribute("number")}}),parseHTML(){return[{tag:"div[class=layout-item]"},{tag:"item"},{tag:"div[image-bookmark]",context:"smartLayout/",getAttrs:e=>{let t=e.getAttribute("image-bookmark");if(!t)return!1;let n=(0,e0.Mw)(this.storage,t);return{...a$(e),image:n}}},{tag:"div",context:"smartLayout/",getAttrs:e=>a$(e)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"layout-item"}),0]},addStorage:e0.gk,renderHTMLforAI(e){let{node:t}=e,{image:n,options:i,...r}=t.attrs,o={};Object.keys(i).forEach(e=>{o[e]="string"==typeof i[e]?i[e]:JSON.stringify(i[e])});let a={...r,...o};return n?["div",a,["img",{bookmark:(0,e0.ml)(this.storage,n)}],["div",0]]:["div",a,0]},addNodeView:()=>(0,ef.fW)(aY,{update:ex.E7})}),a$=e=>{let t=e.dataset.image?JSON.parse(e.dataset.image):void 0,n=e.getAttribute("label")||e.getAttribute("number"),i=(0,aK.m)().find(t=>{var n,i;return t.htmlTag===(null===(n=e.parentElement)||void 0===n?void 0:n.tagName.toLowerCase())||t.key===(null===(i=e.parentElement)||void 0===i?void 0:i.tagName.toLowerCase())});return{image:t,label:n,options:((null==i?void 0:i.options.map(e=>e.key))||[]).reduce((t,n)=>{let i=e.getAttribute(n);if(i)try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t},{})}};var aZ=n(62580),aQ=n(95216);let aJ=e=>{let{node:t}=e,{verticalAlign:n}=t.attrs;return(0,l.jsxs)(ef.T5,{className:"grid-cell",style:{position:"relative",justifyContent:n},"data-selection-ring":!0,children:[(0,l.jsx)(eR.A,{handlePlacement:"top",...e,"data-testid":"column-drag-handle",label:(0,l.jsx)(y.k,{direction:"column",align:"center",children:(0,l.jsx)(_.cC,{id:"zWdF4l",components:{0:(0,l.jsx)(I.x,{color:"gray.500"})}})})}),(0,l.jsx)(ef.ms,{})]})},a0=eh.NB.create({name:"gridCell",content:"(block | layoutBlock)+",definingAsContext:!0,isolating:!0,selectable:!1,containerHandle:!0,parseHTML:()=>[{tag:"div[class=column]"},{tag:"div",context:"gridLayout/"}],addAttributes:()=>({verticalAlign:null}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"column"}),0]},addNodeView:()=>(0,ef.fW)(aJ,{update:ex.E7})});class a1{constructor(e=null){this.dragging=e}}let a2=new t7.H$("layoutPlugin"),a4=e=>new t7.Sy({key:a2,state:{init:()=>new a1,apply:(e,t)=>t},appendTransaction:(e,t,n)=>{if(!e.some(e=>e.docChanged))return null;let i=e.find(e=>e.selectionSet),r=n.tr;if(n.doc.descendants((e,t)=>{if("gridLayout"===e.type.name&&1==e.childCount){let n=r.mapping.map(t);r.replaceWith(n,r.mapping.map(t+e.nodeSize),e.child(0).content).setMeta("annotationEvent",{type:"unwrap-node",pos:n})}}),!r.docChanged)return null;if(i){let e=i.selection.$from.depth-r.selection.$from.depth,t=(0,rT.E)(r.doc.resolve(i.selection.from-e));t&&r.setSelection(t)}return r},props:{handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=a2.getState(e.state);if(!i)return!1;i.dragging=n}},handleDrop:(t,n,i)=>{let r=a2.getState(t.state),o=null==r?void 0:r.dragging;r&&(r.dragging=null);let a=null;try{if(!(a=(0,oV.BF)(t,n,i,!1)))return!1}catch(e){return!1}try{let{selection:n}=t.state,r=!n.empty,{node:s,pos:d,side:c}=a;if(d>n.from&&d<n.to)return!0;let u=i.content.toJSON();if("gridCell"===s.type.name){var l;let t="left"===c?d:d+s.nodeSize,n=(null===(l=u[0])||void 0===l?void 0:l.type)!=="gridCell",i=n?{type:"gridCell",content:u}:u;e.chain().insertContentAt({from:t,to:t},i,{updateSelection:!1}).command(e=>{let{tr:i}=e;return r&&i.deleteSelection(),o&&i.setMeta("annotationEvent",{type:"drop",dragging:o,droppedBlockPos:t+(n?1:0)}),!0}).focusMapped(t,1).run()}else{let n="left"===c?i.size:s.nodeSize;e.chain().insertContentAt({from:d,to:d+s.nodeSize},{type:"gridLayout",content:[{type:"gridCell",content:"left"===c?u:[s.toJSON()]},{type:"gridCell",content:"left"===c?[s.toJSON()]:u}]},{updateSelection:!1}).command(i=>{let{tr:a}=i;if(r&&a.deleteSelection(),o){let i=(0,aF.lM)({side:c,view:t,tr:a,dragging:o,dropPos:d,dropNode:s,leftContentSize:n});requestAnimationFrame(()=>{var t,n;null===(t=(n=e.commands).moveAnnotations)||void 0===t||t.call(n,i)})}return!0}).focusMapped(d,"left"===c?2:s.nodeSize+4).run()}}catch(e){console.error("(caught) [LayoutPlugin] handleDrop error:",e)}return!0}}}),a3=new t7.H$("layoutResizing");class a5{getActiveHandleAbs(e){return this.activeHandle?(0,t6.XV)(e,this.activeHandle):null}reset(){return this.activeHandle=null,this.dragging=null,this}setHandle(e,t){return null===t.setHandle?this.activeHandle=null:this.activeHandle=(0,t6.jS)(e,t.setHandle),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(a3);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(e=null,t=null){this.activeHandle=e,this.dragging=t}}let a7=e=>a3.getState(e.state),a8=(e,t)=>{e.dispatch(e.state.tr.setMeta(a3,{setHandle:t}))},a6=(e,t)=>{e.dispatch(e.state.tr.setMeta(a3,{setDragging:t}))},a9=e=>{e.dispatch(e.state.tr.setMeta(a3,{reset:!0}))},le=(e,t)=>{if(!e.editable||!t.target||t.target.closest(".column-resize-handle"))return;let n=a7(e);if(n.dragging)return;let i=function(e,t){var n;let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||-1===i.inside)return null;let r=e.domAtPos(i.inside);if(!r)return null;let o=r.node.childNodes[r.offset];if(!o)return null;let a=e.state.doc.resolve(i.inside);if((null===(n=a.nodeAfter)||void 0===n?void 0:n.type.name)!=="gridCell")return null;let{left:l,right:s}=o.getBoundingClientRect();if(t.clientX-l<=5){let t=e.state.doc.resolve(a.before(a.depth)),n=lt((0,oV.oc)(t),e=>e.pos===a.pos);return(null==n?void 0:n.pos)||null}return s-t.clientX<=5?a.pos:null}(e,t);i!==n.getActiveHandleAbs(e.state)&&a8(e,i)},lt=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n])){if(0===n)return null;return e[n-1]||null}return null},ln=(e,t)=>{let n=e.domAtPos(t);return n.node.childNodes[n.offset].offsetWidth},li=(e,t)=>{let{node:n,offset:i}=e.domAtPos(t.start()),r=n.childNodes[i];do if(r&&r.classList&&r.classList.contains("node-gridLayout"))break;while(r=r.parentNode);return r};var lr=n(20437);let lo=e=>{let{getPos:t,updateAttributes:n,editor:i,node:r}=e,o=i.state.doc.resolve(t()),a=(0,oV.oc)(o);(0,p.useEffect)(()=>{a.length!==r.attrs.colWidths.length&&setTimeout(()=>{n({colWidths:(0,ni.RS)(a.length)})},0)},[r,a,n])},la=e=>{let{node:t,editor:n,getPos:i}=e,r=t.content.childCount,o=(0,x.CG)(te.Pw),a=(0,e9.TZ)();lo(e);let s=r%2==0,d=(0,rK.iq)({base:1,sm:s?2:1,md:s?2:3,lg:4})||4,c=(0,p.useCallback)(()=>{n.commands.addLayoutCell(i())},[n,i]),u=r<aQ.h&&o,h=a?"100%":(t.attrs.colWidths||[]).map(e=>"".concat(e,"%")).join(" ");return(0,l.jsx)(ev.lO,{...e,children:(0,l.jsxs)(lr.M,{className:(0,eE.cx)("grid-col-controls",o&&"is-editable"),columns:Math.min(d,r),gap:"var(--grid-border)",position:"relative",gridTemplateColumns:h,"data-selection-ring":!0,children:[(0,l.jsx)(ef.ms,{className:"layout-content"}),(0,l.jsx)(eR.A,{...e,label:T.ag._({id:"Szg6OU"}),"data-testid":"layout-drag-handle"}),(0,l.jsx)(y.k,{position:"absolute",top:"0",h:"100%",align:"center",w:6,right:-3,className:"add-column",opacity:"0",transitionProperty:"opacity",transitionDuration:"normal",children:u&&(0,l.jsx)(b.kH,{label:(0,l.jsx)(_.cC,{id:"AgvHni"}),placement:"top",children:(0,l.jsx)(tW.h,{icon:(0,l.jsx)(M.G,{icon:tC.r8p}),"aria-label":T.ag._({id:"AgvHni"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,zIndex:"1",onClick:c})})})]})})},ll=eh.NB.create({name:"gridLayout",content:"gridCell{1, ".concat(aQ.h,"}"),group:"cardBlock",defining:!1,isolating:!0,selectable:!1,priority:eZ.a.Layout,containerHandle:!0,parseHTML:()=>[{tag:"div[class=columns]"},{tag:"columns"}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,eh.P1)(t,{class:"columns"}),0]},renderHTMLforAI(e){let{node:t}=e;return["columns",{colWidths:JSON.stringify(t.attrs.colWidths)},0]},addAttributes(){let e="colWidths";return{colWidths:{default:[],parseHTML:t=>{let n=t.getAttribute("data-".concat(e));if(n)return JSON.parse(n);let i=0;return t.childNodes.forEach(e=>{"DIV"===e.nodeName&&i++}),(0,ni.RS)(i)},renderHTML:t=>{let n=t[e];return n?{["data-".concat(e)]:JSON.stringify(n)}:{}}},fullWidthBlock:{default:!1}}},addNodeView:()=>(0,ef.fW)(la,{update:ex.I_,ignoreMutation:aW.j}),addProseMirrorPlugins(){return[a4(this.editor),new t7.Sy({key:a3,state:{init:()=>new a5,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==a3.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(e,t)=>!!D.VH.get("layoutResizing")&&(le(e,t),!1),mouseleave:e=>!!D.VH.get("layoutResizing")&&(!function(e){let t=a7(e);null===t.getActiveHandleAbs(e.state)||t.dragging||a8(e,null)}(e),!1),mousedown:(e,t)=>!!D.VH.get("layoutResizing")&&(!function(e,t){if(!e.editable)return;let n=a7(e),i=n.getActiveHandleAbs(e.state);if(null===i||n.dragging)return;let r=e.state.doc.resolve(i),o=[...r.node().attrs.colWidths],a=(0,oV.ug)(r),l=ln(e,i),s=li(e,r),d=s.offsetWidth;a6(e,{startX:t.clientX,startWidth:l,colWidths:o,tableWidth:d,colIndex:a});let c=null;function u(t){window.removeEventListener("mouseup",u),window.removeEventListener("mousemove",p);let n=a7(e);if(n.dragging){if(null===c){a6(e,null);return}if(n.dragging)try{let t=n.getActiveHandleAbs(e.state);(function(e,t,n){let i=e.state.doc.resolve(t).before(),r=e.state.tr.setNodeMarkup(i,void 0,{colWidths:[...n]}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i});e.dispatch(r),function(e,t){let n=e.state.doc.resolve(t),i=li(e,n).querySelector(".grid-col-controls");i&&(i.style.gridTemplateColumns="")}(e,t)})(e,t,c),a6(e,null)}catch(t){a9(e)}c=null}}function p(t){if(!t.which)return u(t);let n=a7(e),i=n.getActiveHandleAbs(e.state);if(!n.dragging||null===i)return;let{colIndex:r,colWidths:o}=n.dragging,a=function(e,t){let{tableWidth:n}=e,i=t.clientX-e.startX;return nn()(100*i/n,0)}(n.dragging,t);(function(e,t){let n=e.querySelector(".grid-col-controls");n&&(n.style.gridTemplateColumns=t.map(e=>"".concat(e,"%")).join(" "))})(s,c=(0,ni.GI)(o,r,a,15)),(0,nr.CI)(s)}window.addEventListener("mouseup",u),window.addEventListener("mousemove",p),t.preventDefault()}(e,t),!1)},decorations(e){let t=a3.getState(e).getActiveHandleAbs(e);if(null!==t){let n=[];try{let i=document.createElement("div");return i.className="column-resize-handle",n.push(t8.p.widget(t+1,i)),t8.EH.create(e.doc,n)}catch(e){return console.error("(caught) layoutResizing error: ".concat(e.message)),t8.EH.empty}}},nodeViews:{}}})]},addCommands(){var e=this;return{useLayoutPreset:(e,t)=>n=>{let{dispatch:i,tr:r,commands:o,view:a}=n;if(!i)return!0;let l=(0,oV.TH)(r.doc.resolve(e));if(!l)return!0;let s=(0,oV.oc)(l),d=t.length-s.length,c=[];for(;0!==d;){if(d<0){let t=(0,oV.Tl)(r.doc.resolve(e),-1),n=t.nodeAfter;r.deleteRange(t.pos,t.pos+n.nodeSize),c=[...1===n.childCount&&(0,eh.bR)(n.firstChild)?[]:n.content.toJSON(),...c],d++;continue}if(d>0){o.addLayoutCell(l.pos,!1),d--;continue}}r.setNodeAttribute(e,"colWidths",t);let u=(0,oV.Tl)(r.doc.resolve(l.pos),-1);if(!u||!u.nodeAfter)return!0;let p=u.pos+u.nodeAfter.nodeSize-1;if(o.insertContentAt(p,c,{updateSelection:!1}),r.selection.from>p||r.selection.to>p){let e=r.doc.resolve(u.pos+1).end(),t=(0,rT.E)(r.doc.resolve(e),-1);t&&r.setSelection(t)}let h=li(a,l);return h&&(0,nr.CI)(h),!0},insertLayout:e=>t=>{let{dispatch:n,commands:i}=t;if(!n)return!0;let r=Array.from(Array(e),e=>ls);return i.insertContentAndSelect({type:"gridLayout",attrs:{colWidths:(0,ni.RS)(e)},content:r})},addLayoutCell:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n=>{let{chain:i,state:r}=n,o=r.doc.nodeAt(e);if(!o||o.type.name!==ll.name)return!1;let a=e+o.nodeSize-1,{colWidths:l}=o.attrs,s=l.length,d=nn()(100/(s+1),2),c=(0,ni.CO)(l,s,d,15),u=i().insertContentAt(a,ls,{updateSelection:!1});return t&&u.selectInsertedNode(),u.command(t=>{let{tr:n}=t;return n.setNodeAttribute(e,"colWidths",c),!0}).run(),!0}},handleLayoutDelete:function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return i=>{let{tr:r,dispatch:o,state:a}=i;if(!o)return!0;let l=(0,eh.Kk)(e=>e.type.name===a0.name)(a.selection),s=(0,eh.Kk)(e=>e.type.name===ll.name)(a.selection);if(!l||!s)return!1;if(!n||(0,eJ.$y)(l.node)){if(2==s.node.childCount){let t=l.node===s.node.child(0),n=t?s.node.child(1):s.node.child(0),i=t?s.start+s.node.child(0).nodeSize+1:s.start+1,o=i+n.content.size;r.replaceWith(s.pos,s.pos+s.node.nodeSize,n.content);let a=(0,rT.E)(r.doc.resolve(s.pos+(t?0:n.content.size)),t?1:-1);a&&r.setSelection(a);let d=(0,aF.nf)({insertPos:s.pos,contentPos:i,contentEnd:o,editor:e.editor});requestAnimationFrame(()=>{var t,n;null===(t=(n=e.editor.commands).moveAnnotations)||void 0===t||t.call(n,d)})}else{let e=r.doc.resolve(l.pos);(0,aZ.D)(r,e,t),r.setNodeAttribute(s.pos,"colWidths",(0,ni.Z7)(s.node.attrs.colWidths,[(0,oV.ug)(e)]))}return!0}let{parent:d}=a.selection.$from;return!!(a.selection.empty&&d.isTextblock&&(0,eh.bR)(d))&&d==l.node.firstChild&&!t&&(r.deleteRange(a.selection.$from.before(),a.selection.$from.after()),!0)}},goToNextLayoutCell:e=>t=>{let{tr:n,state:i}=t,r=(0,eh.Kk)(e=>e.type.name===a0.name||e.type.name===aX.name)(i.selection),o=(0,eh.Kk)(e=>e.type.name===ll.name||e.type.name===aB.z.name)(i.selection);if(!r||!o)return!1;let a=i.doc.resolve(r.pos),l=e?a.index()+1:a.index()-1;if(l<0||l>=a.parent.childCount)return!1;let s=a.posAtIndex(l);return n.setSelection(t7.Y1.near(i.doc.resolve(s))),!0}}},addKeyboardShortcuts:()=>({Tab:e=>{let{editor:t}=e;return t.commands.goToNextLayoutCell(!0)},"Shift-Tab":e=>{let{editor:t}=e;return t.commands.goToNextLayoutCell(!1)}})}),ls={type:"gridCell",content:[{type:"paragraph"}]};var ld=n(92621),lc=n(21386),lu=n(88371),lp=n(66562),lh=n(82807),lm=n(82713);let lg=e=>{let{node:t,updateAttributes:n}=e,i=(0,x.CG)(te.yx),r=(0,es.py)("edit",i),{checked:o,fontSize:a,placeholder:s}=t.attrs;return(0,l.jsx)(aU.l,{...e,children:(0,l.jsxs)(I.x,{as:"li",color:o?"var(--body-color-muted)":void 0,textDecoration:o?"line-through":void 0,transition:"color 250ms ease-out",position:"relative",className:"todo","data-font-size":a,children:[(0,l.jsx)(lm.X,{contentEditable:!1,suppressContentEditableWarning:!0,isChecked:o,onChange:e=>{r&&n({checked:e.target.checked})},position:"absolute"}),(0,l.jsx)(ef.ms,{as:"span",className:"todo-content","data-placeholder":s})]})})},lf=/^\s*\[[ ]?\]\s$/,lx=/^\s*\[x\]\s$/,lv=eh.NB.create({name:lh.W.Todo,addOptions:()=>({HTMLAttributes:{}}),content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addAttributes:()=>({indent:{default:0},checked:{default:!1},fontSize:ai.Bi}),addNodeView:()=>(0,ef.fW)(lg,{as:"ul",update:ex.E7,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addInputRules(){return[(0,lu.Bx)({find:lf,type:this.type,getAttributes:{checked:!1}},this.editor.state.schema),(0,lu.Bx)({find:lx,type:this.type,getAttributes:{checked:!0}},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-,":e=>{let{editor:t}=e;return t.commands.setListItems({variant:lh.W.Todo})},"Mod-Shift-9":e=>{let{editor:t}=e;return t.commands.setListItems({variant:lh.W.Todo})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,eh.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}});var ly=n(31527);let lb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"body";(0,p.useEffect)(()=>{let t;let n=document.querySelector(e);if(!n)return;let i=e=>{var i,r;(null===(i=document.activeElement)||void 0===i?void 0:i.tagName)==="IFRAME"&&document.activeElement instanceof HTMLIFrameElement&&!t?(console.debug("[EditorCore] Prevented scrolling at page load from iframe",e,document.activeElement),n.scrollTo(0,0),document.activeElement.blur()):(null===(r=document.activeElement)||void 0===r?void 0:r.tagName)==="IFRAME"&&0===e.target.scrollTop&&t>50?(console.debug("[EditorCore] Prevented scrolling to top from iframe",e,t,document.activeElement),n.scrollTo(0,t)):t=e.target.scrollTop};return n.addEventListener("scroll",i,{passive:!0}),()=>n.removeEventListener("scroll",i)},[e])};var lw=n(45312),lC=n(6643),lk=n(33315);let lj=eh.hj.create({name:"media",addExtensions:()=>[aG.z],addCommands:()=>({handleSpaceToZoom:()=>e=>{let{state:t}=e;if(t.selection instanceof t7.qv&&(0,tY.fP)(t.selection.node)){let e=(0,x.bh)(),{id:n}=t.selection.node.attrs;return!!(n&&(0,lk.v_)(n)(e.getState()))||(e.dispatch((0,te.RW)({nodeId:t.selection.node.attrs.id})),!0)}return!1}})});var lS=n(82708),lA=n(26140),lI=n(41086),lz=n(54073),lL=n.n(lz);let lE=["paragraph","heading","title","bullet","numbered","todo","toggleSummary"],lN=eh.hj.create({name:"placeholderText",addGlobalAttributes:()=>[{types:lE,attributes:{placeholder:{default:null,keepOnSplit:!1,rendered:!1}}}],addCommands:()=>({removeFilledPlaceholders:()=>e=>{let{tr:t,dispatch:n}=e;return!n||(t.doc.descendants((e,n)=>{e.attrs.placeholder&&e.textContent&&(console.debug("Removing placeholder",e.attrs.placeholder,"at",n,"with content",e.textContent),t.setNodeAttribute(n,"placeholder",null))}),!0)}}),onUpdate(){lM(this.editor)}}),lM=lL()(e=>{e.isEditable&&e.commands.removeFilledPlaceholders()},100,{maxWait:1e3});var l_=n(66054);let lT=n(78563).ZP.extend({parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration=line-through",consuming:!1},{style:"text-decoration-line=line-through",consuming:!1}]});var lR=n(23345),lH=n(4490);let lP=eh.hj.create({name:"TableCommands",addCommands:()=>({selectColumn:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:r}=n,o=r.resolve(e),a=lH.Xc.colSelection(o);return n.setSelection(a),!0},selectRow:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:r}=n,o=r.resolve(e),a=lH.Xc.rowSelection(o);return n.setSelection(a),!0},selectTable:e=>t=>{let{tr:n,dispatch:i}=t;if(!i)return!0;let{doc:r}=n,o=r.resolve(e),a=lH.Xc.colSelection(o),l=lH.Xc.rowSelection(a.$anchorCell,a.$headCell);return n.setSelection(l),!0}})}),lO=eh.NB.create({name:"tableCell",addOptions:()=>({HTMLAttributes:{}}),content:"(block | tableBlock)+",addAttributes:()=>({colspan:{default:1},rowspan:{default:1}}),tableRole:"cell",isolating:!0,selectable:!1,parseHTML:()=>[{tag:"td"},{tag:"th"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,eh.P1)(this.options.HTMLAttributes,t),0]}}),lD=e=>(0,l.jsxs)(ef.T5,{className:"table-row-wrapper",style:{display:"contents"},children:[(0,l.jsx)("th",{style:{position:"relative",padding:0},children:(0,l.jsx)(lW,{...e})}),(0,l.jsx)(ef.ms,{as:"div",className:"table-row-content",style:{display:"contents"}})]}),lW=(0,p.memo)(e=>{let{...t}=e,{getPos:n,editor:i}=t;return(0,l.jsx)(y.k,{height:"100%",align:"center",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,l.jsx)(eR.A,{...t,label:T.ag._({id:"9c44h0"}),onClick:()=>{let e=n()+1;i.chain().focus().selectRow(e).run()},left:"-0.5em",top:"1em",zIndex:"3","data-testid":"table-row-control"})})});lW.displayName="RowControl";let lF=eh.NB.create({name:"tableRow",addOptions:()=>({HTMLAttributes:{}}),selectable:!1,content:"tableCell+",tableRole:"row",containerHandle:!0,addNodeView:()=>(0,ef.fW)(lD,{update:ex.E7,as:"tr"}),parseHTML:()=>[{tag:"tr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["tr",(0,eh.P1)(this.options.HTMLAttributes,t),0]}});var lB=n(63162),lG=n(27581),lU=n(35275),lV=n(20706);let lq=()=>new t7.Sy({key:new t7.H$("TogglePlugin"),props:{handlePaste(e,t,n){let{selection:i,tr:r}=e.state,o=(0,eh.Kk)(lV.O4)(i);if(!o)return!1;let a=null,l=null,s=[];if(n.content.descendants(e=>{e.isTextblock&&(a?s.push(e):(a=e.content,l=(0,lU.Aw)(e)||null))}),!a)return;l&&r.setNodeAttribute(o.pos,"fontSize",l),r.replaceSelection(rM.p2.maxOpen(a));let d=r.mapping.map(o.pos+o.node.nodeSize);r.replaceRange(d,d,rM.p2.maxOpen(rM.HY.fromArray(s)));let c=(0,rT.a)(r,-1);return c&&r.setSelection(c),e.dispatch(r),!0},decorations(e){let{doc:t}=e,n=[];return t.descendants((e,t,i)=>{if(!i||!(0,lV.O4)(e))return;let r=(0,eJ.Jn)(i.content).slice(1).every(e=>(0,eJ.bR)(e)),o=t8.p.node(t,t+e.nodeSize,{},{isToggleDecoration:!0,toggleId:i.attrs.id,isEmpty:r});n.push(o)}),t8.EH.create(t,n)}}}),lK=e=>{var t;return(null===(t=e.find(e=>e.spec.isToggleDecoration))||void 0===t?void 0:t.spec)||{}},lY="1.5em",lX=e=>{let{node:t,decorations:n}=e,{level:i,fontSize:r,placeholder:o}=t.attrs,{toggleId:a="",isEmpty:s}=lK(n),d=(0,x.CG)(te.hN),c=(0,x.CG)(te.Ql),u=(0,x.CG)((0,te.R)(a))||c,h=(0,p.useCallback)(()=>{(0,lV.xB)(a,!u)},[a,u]);return(0,l.jsx)(ev.lO,{...e,hideComments:!u,children:(0,l.jsxs)(I.x,{as:"div",position:"relative",onClick:d?void 0:h,cursor:d?void 0:"pointer",children:[(0,l.jsx)(S.z,{left:"calc(0.125em - ".concat(lY,")"),position:"absolute",variant:"ghost",colorScheme:"gray",color:s?"var(--body-color-muted)":"var(--body-color)",onClick:d?h:void 0,contentEditable:!1,onMouseDown:tz.br,fontSize:"1em",lineHeight:"inherit",height:"100%",px:2,ml:-2,minW:"unset","data-testid":"toggle-button",children:(0,l.jsx)(I.x,{transform:"rotate(".concat(u?90:0,"deg)"),transformOrigin:"center",transitionProperty:"transform",transitionDuration:"normal",fontSize:"0.75em",children:(0,l.jsx)(M.G,{icon:td.zc})})}),(0,l.jsx)(ef.ms,{level:i,"data-placeholder":o||T.ag._({id:"JFciKP"}),"data-font-size":r,className:(0,eE.cx)((0,lU.qx)(r)&&eN.A8)})]})})},l$=eh.NB.create({name:"toggleSummary",content:"inline*",selectable:!1,marks:"bold italic underline code footnoteLabel strike textColor highlight",allowFontSizes:"heading body",addAttributes:()=>({fontSize:ai.Bi}),addNodeView:()=>(0,ef.fW)(lX,{update:ex.E7}),renderHTML(e){let{HTMLAttributes:t}=e;return["summary",t,0]},parseHTML:()=>[{tag:"summary"}]}),lZ=e=>{let{node:t}=e,n=(0,x.CG)(te.Ql),i=(0,x.CG)((0,te.R)(t.attrs.id))||n;return(0,l.jsx)(ev.lO,{...e,hideComments:i,readOnly:!i,children:(0,l.jsxs)(s.xu,{pl:lY,position:"relative","data-open":!!i,className:"toggle",borderRadius:"var(--box-border-radius)","data-selection-ring":"padded",children:[(0,l.jsx)(ef.ms,{}),i&&(0,l.jsx)(s.xu,{position:"absolute",left:"0.375em",bottom:"0.25em",top:"2.5em",borderLeft:"1px solid",borderColor:"var(--neutral-border-color)"})]})})};var lQ=n(40981);let lJ=/^\s*([+])\s$/,l0=eh.NB.create({name:"toggle",group:"layoutBlock calloutBlock cardBlock smartLayoutBlock tableBlock",content:"toggleSummary (block | layoutBlock)+",selectable:!1,isolating:!0,priority:eZ.a.Toggle,expandable:!0,addNodeView:()=>(0,ef.fW)(lZ,{update:ex.E7}),addProseMirrorPlugins:()=>[lq()],addAttributes:()=>({id:(0,ia.b)(lQ.C)}),addInputRules(){var e;return[(e={find:lJ,innerType:this.editor.schema.nodes.toggleSummary,outerType:this.type,getInnerAttributes:e=>({fontSize:(0,lU.Aw)(e)}),getOuterAttributes:()=>{let e=(0,lQ.C)();return(0,lV.xB)(e,!0),{id:e}}},new eh.VK({find:e.find,handler:t=>{let{state:n,range:i,match:r}=t,o=n.doc.resolve(i.from);if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.outerType))return;let a=(0,eh.nU)(e.getOuterAttributes,void 0,o.parent)||{},l=(0,eh.nU)(e.getInnerAttributes,void 0,o.parent)||{},s=n.tr.delete(i.from,i.to),d=s.doc.resolve(i.from),c=d.parent,u=e.outerType.createAndFill(a,[e.innerType.create(l,c.content)]);s.replaceWith(d.before(),d.after(),u);let p=(0,rT.E)(s.doc.resolve(i.from));p&&s.setSelection(p)}}))]},addCommands(){var e=this;return{unwrapToggle:()=>e=>{let{state:t,editor:n,tr:i}=e;if(!n.isActive("toggleSummary"))return!1;let{selection:r,schema:o}=t,a=(0,eh.Kk)(lV.AH)(r);if(!a||a.start+1!==r.from||!r.empty)return!1;let l=(0,eJ.Jn)(a.node.content),s=l[0],{type:d,level:c}=(0,lU.hx)(s.attrs.fontSize),u=["heading"===d?o.nodes.heading.create({level:c},s.content):o.nodes.paragraph.create({fontSize:s.attrs.fontSize},s.content)].concat(l.slice(1));i.replaceWith(a.pos,a.pos+a.node.nodeSize,rM.HY.from(u)).setMeta("annotationEvent",{type:"unwrap-node",pos:a.pos});let p=i.doc.resolve(a.pos),h=(0,el.t)(p);return h&&i.setSelection(h),!0},joinBackwardInToggle:()=>e=>{let{state:t,editor:n,chain:i}=e;if(n.isActive("toggleSummary"))return!1;let{selection:r}=t,o=(0,eh.Kk)(lV.AH)(r);if(!o)return!1;let a=(0,eJ.Jn)(o.node.content).slice(1);return!!r.empty&&0===r.$from.parentOffset&&1===a.length&&(i().command(e=>{let{tr:t}=e,i=t.doc.resolve(o.pos+1).end();return t.insert(i,n.schema.nodes.paragraph.create()),!0}).joinBackward(),!0)},wrapWithToggle:function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return i=>{let r,{state:o,tr:a}=i,{doc:l,selection:s,schema:d}=o,c=s.$from.blockRange(s.$to);if(!c)return!1;let u=[];l.nodesBetween(s.from,s.to,(e,t,n)=>{if(n===c.parent)return u.push(e),!1});let p=[];if(!t&&u[0].isTextblock&&u[0].textContent.length<100){let e=(0,lU.Aw)(u[0]);r=d.nodes.toggleSummary.create({fontSize:e},u[0].content),p=u.slice(1)}else{let e=t?d.text(t):null;r=d.nodes.toggleSummary.create(null,e),p=u}let h=(0,lQ.C)();n&&(0,lV.xB)(h,!0);let m=e.editor.schema.nodes.toggle.createAndFill({id:h},rM.HY.fromArray([r,...p]));if(!m)return!1;let{start:g,end:f}=c;a.replaceRangeWith(g,f,m).setMeta("annotationEvent",{type:"wrap-nodes",start:g,end:f,level:1});let x=(0,el.G)(a);if(!x)return!1;let v=(0,el.t)(x,-1);return v&&a.setSelection(v),!0}},enterInToggle:()=>e=>{let{editor:t,state:n,chain:i}=e;if(!t.isActive("toggle"))return!1;let r=(0,eh.Kk)(lV.AH)(n.selection);if(!r||(0,lV.fH)(r.node.attrs.id))return!1;let{selection:o}=t.state,{$from:a}=o;if(a.parentOffset===a.parent.nodeSize-2){let e=r.pos+r.node.nodeSize;return i().insertContentAt(e,{type:"paragraph"}).selectInsertedNode().run(),!0}return(0,lV.xB)(r.node.attrs.id,!0),!0}}},addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e;return t.commands.enterInToggle()},Backspace:e=>{let{editor:t}=e;return t.commands.first(e=>{let{commands:t}=e;return[()=>t.unwrapToggle(),()=>t.joinBackwardInToggle()]})}}),addExtensions:()=>[lQ.w,l$],renderHTML(e){let{HTMLAttributes:t}=e;return["details",t,0]},parseHTML:()=>[{tag:"details"}]}),l1=n(39475).Z.extend({parseHTML:()=>[{tag:"u"},{style:"text-decoration=underline"},{style:"text-decoration-line=underline"}]});var l2=n(76505),l4=n(3874),l3=n(15711),l5=n(83751),l7=n(44438),l8=n(3892),l6=n(28165),l9=n(12483);class se extends p.Component{static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message}}componentDidCatch(e,t){this.errorEventId=l9.Tb(e,{extra:{info:null==t?void 0:t.componentStack}}),l8.fy.logger.error("[EditorCoreErrorBoundary]",{event:th.xW.EDITOR_CORE_ERROR,docId:this.props.docId},e)}render(){return this.state.hasError?(0,l.jsx)(sn,{errMessage:this.state.errMessage,errorId:this.errorEventId,isInsideDrawer:this.props.isInsideDrawer}):this.props.children}constructor(e){super(e),this.errorEventId=null,this.state={hasError:!1,errMessage:""}}}let st=["collaborative-editor-wrapper","public-static-editor-wrapper-inner","example-static-editor-wrapper-inner","custom-theme-tabs","custom-theme-tab-panels","custom-theme-preview-editor"].map(e=>'[data-testid="'.concat(e,'"]')).join(", "),sn=e=>{let{errMessage:t,errorId:n,isInsideDrawer:i=!1}=e;return(0,l.jsxs)(y.k,{minH:"100%",direction:"column","data-editor-error-component":!0,align:"center",children:[(0,l.jsx)(l6.xB,{styles:{[st]:{height:"100%"},html:{height:"100%"},body:{height:"100%"}}}),(0,l.jsxs)(L.K,{flex:1,align:"center",justify:"center",p:6,spacing:i?[4,4,4,6]:[6,10,12],w:i?["100%","100%","100%","container.sm","container.md"]:["100%","100%","container.md"],children:[(0,l.jsxs)(L.K,{textAlign:"center",children:[(0,l.jsx)(I.x,{fontSize:i?["xl","xl","2xl"]:["xl","2xl","3xl"],fontWeight:"600",fontFamily:"p22-mackinac-pro, sans-serif",children:(0,l.jsx)(_.cC,{id:"gtI5JW"})}),!i&&(0,l.jsx)(I.x,{fontSize:"lg",children:(0,l.jsx)(_.cC,{id:"9QTtU0"})})]}),(0,l.jsx)(z.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:i?[4,4,4,8]:[6,6,10],maxW:i?"min(80%, 22rem)":"min(100%, 24rem)"}),t&&(0,l.jsxs)(l7.E,{py:1,px:12,children:[t,n&&(0,l.jsx)(_.cC,{id:"sS1P4/",values:{errorId:n},components:{0:(0,l.jsx)("br",{})}})]}),(0,l.jsxs)(L.K,{spacing:4,children:[!i&&(0,l.jsx)(S.z,{alignSelf:"center",variant:"solid",size:["md","md","lg"],onClick:()=>{window.location.reload()},children:(0,l.jsx)(_.cC,{id:"C6f2hU"})}),(0,l.jsx)(I.x,{size:"sm",textAlign:"center",children:(0,l.jsx)(_.cC,{id:"E4kJGH"})})]})]})]})};var si=n(32606);let sr=function(){let{isInnerEditor:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[oO,oD,oF.x,eU.Zb,eK.o4.configure({enabled:!m.v.GAMMA_PUPPETEER_SERVICE}),eV.K9,eq.B,nh,t3,nO,l2._,c.x,a_.U,ld.r.configure({openOnClick:!1}),rU,ok.Z,ej,aO,l1,lT,lu.aV,lc.g,lp.k,lv,lG.D,aT.X6,lI.n,eb,eG,rG.d,rr.Kq,lB.y,eS.z,ez,lB.d,ai.Bf,lN,lR.i.extend({resizable:!0,allowTableNodeSelection:!0}),lF,lO,lP,rE,lj,tn.om,lC.Ee,lS.nk,ly.cx,ae,r9,lw.r,lA.cB,lA.nk,lA.s6,nv.Hy,oa,ll,a0,aB.z,aX,aN,az,rZ,n5,l0,at,to._,ep.l,an,rF,oZ,d.f,l_.U,aD.$m.configure({addSelectionKeyMaps:!e}),aD.$7]},so=e=>new Promise(t=>{setTimeout(()=>{requestAnimationFrame(()=>{let n=e.state.doc.resolve(1),i=(0,el.t)(n);i&&e.commands.command(e=>{let{tr:t}=e;return t.setSelection(i),!0}),t()})})}),sa=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=(0,v.As)("editor"),i=(0,x.CG)(t=>{let n=(0,te.gh)(t),i=(0,te.i2)(t);return n===nq.q.SLIDE_VIEW&&i?(0,eU.U8)(i):e});(0,p.useEffect)(()=>{t&&i&&n.setScrollSelector(i)},[t,n,i])},sl=e=>{let{onCreate:t=()=>{},extensions:n=[],readOnly:i=!0,shouldSupportComments:r=!1,shouldSupportMenus:o=!1,initialContent:a,doc:d,docId:c,isStatic:v=!1,animationsEnabled:y=!0,scrollingParentSelector:b,theme:w,editorId:C}=e,k=(0,es.py)("edit",d),j=(null==d?void 0:d.organization)&&d.organization.id,[S]=(0,p.useState)(o),[A,I]=(0,p.useState)(!1),z=(0,h.I0)(),L=(0,x.CG)(te.Pw),E=(0,p.useMemo)(()=>sr(),[]),N=(0,u.J)(),M=(0,f.y)("debugLogging"),_=!!(null==d?void 0:d.site),{setEditorRendered:T,onEditorUnload:R}=(0,l5.O)(C);lb(b),sa(b,!v);let H=(0,ef.jE)({async onCreate(e){let{editor:t}=e;console.debug("[EditorCore][onCreate] TipTap editor is now ready"),(0,si.w)(t,z),I(!0)},onUpdate(e){var t,n;let{editor:i}=e;null===(t=oF.S.getState(i.state))||void 0===t||t.processChanges(z),null===(n=eK.Z8.getState(i.state))||void 0===n||n.processChanges(z)},onSelectionUpdate(e){let{editor:t}=e;console.debug("[EditorCore][onSelectionUpdate] selection updated",t.state.selection.from,t.state.selection.to,t.state.selection)},onDestroy(){M&&console.warn("[EditorCore][onDestroy] This should only happen on page navigation."),R(),z((0,te.mc)()),z((0,g.NK)())},extensions:E.concat(n),content:a,editable:!1}),P=!!(H&&A);return((0,p.useEffect)(()=>{w&&z((0,te.Dc)({theme:w}))},[w,z]),(0,ed.vm)(()=>{H&&P&&(H.commands.migrateNativeEmojis(),so(H).then(()=>{console.debug("[EditorCore][fullyReady] Menus initialized & focused at start - fully ready"),t({editor:H}),requestAnimationFrame(()=>{requestIdleCallback(()=>{T()})})}))},[H,P,t,T],[P]),(0,p.useEffect)(()=>{d&&z((0,te.pl)({doc:d}))},[d,z]),(0,p.useEffect)(()=>{z((0,te.tp)({isStatic:v})),H.isStatic=v},[H,v,z]),(0,p.useEffect)(()=>{z((0,te.Nr)({animationsEnabled:y&&!1===N}))},[y,N,z]),(0,p.useEffect)(()=>{z((0,te.QU)({commentsEnabled:r}))},[r,z]),(0,p.useEffect)(()=>{if(H)return m.v.DEBUG_ENABLED&&void 0===window.gammaEditorCore&&(window.gammaEditorCore=H),H.gammaOrgId=j,H.gammaDocId=c,H.editorId=C,H.multipageEnabled=_,()=>{delete window.gammaEditorCore}},[H,c,j,C,_]),(0,p.useEffect)(()=>{H&&z((0,te.iS)({isAllowedToEdit:k&&!i}))},[H,z,i,k]),(0,p.useEffect)(()=>{H&&P&&requestAnimationFrame(()=>{H.setOptions({editable:L})})},[H,z,L,P,T]),(0,e9.Yk)(H),(0,e9.p2)(H),(0,e9.f3)(H,L),(0,e9.vE)(H),H&&A)?(0,l.jsx)(l3.O,{value:C,children:(0,l.jsxs)(s.xu,{id:"editor-core-root",className:"editor-core-root","data-testid":"editor-core-root",width:"100%",position:"relative",sx:ay.Y,children:[(0,l.jsx)(ef.kg,{editor:H,style:{width:"100%",height:"100%"},"data-testid":"tiptap-react-root-wrapper",className:"highlight-mask"}),S&&(0,l.jsx)(l4.a,{editorId:C,children:(0,l.jsx)(sd,{editor:H,scrollingParentSelector:b})})]})}):(0,l.jsx)(l.Fragment,{})},ss=e=>{let{isInsideDrawer:t,...n}=e;return(0,l.jsx)(se,{isInsideDrawer:t,docId:n.docId,children:(0,l.jsx)(sl,{...n})})},sd=(0,p.memo)(e=>{let{editor:t,scrollingParentSelector:n}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eu.uH,{editor:t,scrollingParentSelector:n}),(0,l.jsx)(ea,{editor:t}),(0,l.jsx)(ec.Y,{editor:t})]})})},32606:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var i=n(42616),r=n(4279),o=n(34584);let a=(e,t)=>{var n,a;null===(n=o.S.getState(e.state))||void 0===n||n.compute(e.state.doc).processChanges(t),null===(a=r.Z8.getState(e.state))||void 0===a||a.compute(e.state).processChanges(t),e.commands.command(()=>((0,i.E0)(e.state.doc,t),!0))}},66295:function(e,t,n){"use strict";n.d(t,{f:function(){return d}});var i=n(52322);n(37243);var r=n(2784),o=n(27210),a=n(30311),l=n(85315);class s extends r.Component{componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}init(){let{editor:e}=this.props;if(!e)return;let{doc:t}=e.state;e.contentComponent=this,e.createNodeViews(),this.RootComponent=(0,i.jsx)(c,{editor:e,node:t})}setRenderer(e,t){this.renderers.set(e,t),this.mounted&&this.setState({counter:this.state.counter+1})}removeRenderer(e){this.renderers.delete(e),this.mounted&&this.setState({counter:this.state.counter+1})}render(){let{editor:e}=this.props;return e?(0,i.jsx)("div",{className:"ProseMirror",children:this.RootComponent}):null}constructor(e){super(e),this.RootComponent=null,this.renderers=new Map,this.mounted=!1,this.editorContentRef=r.createRef(),this.editorContentChildren=r.createRef(),this.state={counter:0},this.init()}}let d=r.memo(s),c=e=>{let{node:t,editor:n}=e;return(0,i.jsx)(a.j.Provider,{value:{editor:n,node:t},children:(0,i.jsx)(o.T5,{children:(0,i.jsx)(l.m,{})})})}},85315:function(e,t,n){"use strict";n.d(t,{m:function(){return f}});var i=n(52322),r=n(73200),o=n(37243),a=n(30764),l=n(2784),s=n(30311),d=n(12971),c=n(31335);let u=e=>{let t={};for(let n of e.attributes){let e=n.name;"class"===e?t.className=n.value:"contenteditable"===e&&"false"===n.value||(t[e]=n.value)}return t},p=(e,t,n,r)=>{let o=Array.from(n.contentComponent.renderers.values()).find(t=>t.props.node===e);if(o){let e=o.element.nodeName.toLowerCase()||"div",{style:n,...a}=u(o.element);return(0,i.jsx)(e,{"data-pos":t,...a,STYLE:"white-space: inherit;".concat(n),children:(0,i.jsx)(o.component,{...o.props,children:r})},o.id)}return null},h=e=>{var t;return null!==(t=e.config.renderHTMLforSSR)&&void 0!==t?t:e.config.renderHTML},m=e=>{let t={...e};return(null==t?void 0:t.style)&&(t.STYLE=t.style,delete t.style),(null==t?void 0:t.class)&&(t.className=t.class,delete t.class),(null==t?void 0:t.colspan)&&(t.colSpan=t.colspan,delete t.colspan),(null==t?void 0:t.rowspan)&&(t.rowSpan=t.rowspan,delete t.rowspan),t},g=(e,t)=>{var n;let i=(0,d.j0)(e,t.type);if(!i)return[];let r=e.extensionManager.attributes.filter(e=>e.type===t.type.name),a=(0,o.m7)(t,r),l=i;for(;!h(l)&&l.parent;)l=l.parent;let s=null===(n=h(l))||void 0===n?void 0:n.bind(i);if(!s)return[];let[c,u,p]=s({HTMLAttributes:a,node:t,mark:t,editor:e});return[c,m(u),p]},f=l.memo(e=>{let{node:t,editor:n,getPos:o}=(0,s.a)();if(!t||!n)return null;let d=e.as||"div",u=t.isInline||t instanceof a.vc?"span":"div",h=[],m="function"==typeof o?o():null,f=(e,t,o)=>{let a=(null===m?0:m)+t+1,s=p(e,a,n);if(s)return s;let d=t=>Array.from(e.marks).reverse().reduce((e,t)=>{let i=p(t,a,n,e);if(i)return i;let[r,s,d]=g(n,t)||[];return r?l.createElement(r,{key:o,...s},e):e},t),u=null===m?[]:(0,c.su)(n,a),[h,x,v]=g(n,e);if(h&&x){let n=null;if(0===v&&e.firstChild){let i=[];e.forEach((e,n,r)=>{i.push(f(e,t+n,"".concat(o,"_").concat(r)))}),n=i,console.debug("[SSR NodeViewContent] HOLE",i)}else Array.isArray(v)?(console.debug("[SSR NodeViewContent] children array",v),n=[...v]):v&&(console.debug("[SSR NodeViewContent] children plain",v),n=v);let{nodeName:i,...s}=u.map(e=>{var t;return null===(t=e.type)||void 0===t?void 0:t.attrs}).reduce((e,t)=>({...e,...t}),{}),c={...x,...s,className:(0,r.cx)(s.class,x.class),"data-pos":a};return delete c.class,console.debug("[SSR NodeViewContent] non-nodeview:",o,c,v),d(l.createElement(h,{key:o,...c},n))}return e.isText?d((0,i.jsx)(l.Fragment,{children:e.textContent},o)):null};return t.forEach((e,n)=>{let i=h.length+1,r=f(e,n,"".concat(i));r?h.push(r):console.warn("%c [Simple NodeViewContent] UNKNOWN NODE $$$$$$$$$$$$$$$$$$$$$$$$$","background-color: aqua; font-weight: bold",{unknownNode:e,parentNode:t})}),(0,i.jsx)(d,{...e,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style},children:(0,i.jsx)(u,{"data-node-view-content-inner":t.type.name,style:{whiteSpace:"inherit"},children:0===h.length?null:1===h.length?h[0]:h})})});f.displayName="NodeViewContent"},73346:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var i=n(30240),r=n(8848);class o extends r.v{initialize(){this.on("cardViewed",e=>{let{cardId:t,interval:n}=e;this.viewedCards[t]=this.viewedCards[t]||0,this.viewedCards[t]+=n});let e=()=>{var e;this.cardViewedThreshold=null!==(e=i.VH.get("cardViewedThreshold"))&&void 0!==e?e:5e3};i.VH.subscribe("cardViewedThreshold",e),e()}flush(){let e={};for(let t in this.viewedCards){let n=this.viewedCards[t];n&&!(n<this.cardViewedThreshold)&&(e[t]=Math.floor(n/1e3))}this.emit("flush",{viewed:e}),this.viewedCards={}}destroy(){this.flush(),this.off("cardViewed"),this.off("flush")}constructor(...e){super(...e),this.viewedCards={},this.cardViewedThreshold=i.VH.get("cardViewedThreshold")}}let a=new o},77834:function(e,t,n){"use strict";n.d(t,{UO:function(){return z},pP:function(){return N},zm:function(){return E},xr:function(){return L}});var i=n(82655),r=n(42946),o=n(54933),a=n(87254),l=n(829),s=n.n(l),d=n(87622),c=n.n(d),u=n(30240),p=n(19732),h=n(45680);let m=()=>[{key:"autoComplete",name:()=>a.ag._({id:"ZyVTQp"}),shortcut:h.o,nodeName:"paragraph",icon:o.ddb,keywords:["continue","autocomplete","typeahead","complete","continue","ai"],execute:e=>{e.commands.autoComplete()},featureFlag:"aiAutocomplete",creditType:"autocomplete"}];var g=n(46594),f=n(92999),x=n(87549),v=n(24524),y=n(21514),b=n(82807),w=n(2191),C=n(23096),k=n(60111),j=n(40981),S=n(20706);let A=()=>[{key:"toggle",name:()=>a.ag._({id:"JFciKP"}),description:()=>a.ag._({id:"Woijyj"}),keywords:["toggle","expand","collapse","disclosure","details"],nodeName:"toggle",icon:i.zc,execute:e=>{let t=(0,j.C)();(0,S.xB)(t,!0),e.chain().insertContent({...(0,p.e)().toggle,attrs:{id:t}}).selectInsertedNode().run()},dragStartFn:e=>{let t=(0,j.C)();(0,S.xB)(t,!0),(0,k.U)(e,{...(0,p.e)().toggle,attrs:{id:t}})}}];var I=n(12971);let z=()=>[{key:"insertCardAfter",name:()=>a.ag._({id:"coNSGP"}),nodeName:"card",icon:i.Mp0,execute:e=>e.commands.insertCardAfter(),checkDisabled:e=>!e.schema.nodes.card,keywords:["card","below","after","new"]},{key:"insertCardInside",name:()=>a.ag._({id:"lOmsEK"}),nodeName:"card",icon:i.uFC,execute:e=>e.commands.insertNestedCard(),checkDisabled:e=>!e.schema.nodes.card,keywords:["nested","card","sub"]},{key:"splitCard",name:()=>a.ag._({id:"ONXbeB"}),nodeName:"card",icon:i.C5L,shortcut:"***",execute:e=>e.commands.splitCardAtSelection(),checkDisabled:e=>!e.schema.nodes.card,dragStartFn:e=>{(0,k.U)(e,(0,p.e)().normalText)},dragEndFn:e=>{e.chain().splitCardAtSelection().focusDelayed().run()},keywords:["split"]},{key:"title",name:()=>a.ag._({id:"MHrjPM"}),nodeName:"title",icon:r.K5C,shortcut:"! Title",execute:e=>{e.chain().focus().setFontSize("title").run()},keywords:["title","large"]},{key:"display",name:()=>a.ag._({id:"Xm/s+u"}),nodeName:"title",icon:r.K5C,shortcut:"!! Title",execute:e=>{e.chain().focus().setFontSize("titleLg").run()},keywords:["display","large"]},{key:"monster",name:()=>a.ag._({id:"bSLwU6"}),nodeName:"title",icon:r.K5C,shortcut:"!!! Ahhhh",execute:e=>{e.chain().focus().setFontSize("titleXl").run()},keywords:["monster","huge"]},{key:"h1",name:()=>a.ag._({id:"lXKZGw"}),nodeName:"heading",icon:i.kVJ,shortcut:"# Heading 1",execute:e=>{e.chain().focus().setFontSize("h1").run()},keywords:["heading","h1"]},{key:"smallText",name:()=>a.ag._({id:"LBkaLa"}),nodeName:"paragraph",icon:r.K5C,shortcut:"/sm",execute:e=>{e.chain().focus().setFontSize("sm").run()},keywords:["sm","small","paragraph"]},{key:"normalText",name:()=>a.ag._({id:"5NwZ8t"}),nodeName:"paragraph",icon:i.K5C,shortcut:"/md",execute:e=>{e.chain().focus().setFontSize("md").run()},keywords:["md","normal","paragraph","default","body"]},{key:"largeText",name:()=>a.ag._({id:"0Sz17G"}),nodeName:"paragraph",icon:i.K5C,shortcut:"/lg",execute:e=>{e.chain().focus().setFontSize("lg").run()},keywords:["lg","large","paragraph"]},{key:"h2",name:()=>a.ag._({id:"El7NbA"}),nodeName:"heading",icon:i.ejo,shortcut:"## Heading 2",execute:e=>{e.chain().focus().setFontSize("h2").run()},keywords:["heading","h2"]},{key:"h3",name:()=>a.ag._({id:"SFN6dN"}),nodeName:"heading",icon:i.WTH,shortcut:"### Heading 3",execute:e=>{e.chain().focus().setFontSize("h3").run()},keywords:["heading","h3"]},{key:"h4",name:()=>a.ag._({id:"nJeKmw"}),nodeName:"heading",icon:i.qv8,shortcut:"#### Heading 4",execute:e=>{e.chain().focus().setFontSize("h4").run()},keywords:["heading","h4"]},{key:"openEmojiPicker",name:()=>a.ag._({id:"tKlWWY"}),nodeName:"emoji",icon:r.pkM,execute:e=>e.commands.openEmojiPicker(),keywords:["symbol","emoji"]},{key:"bulletedList",name:()=>a.ag._({id:"ynb7Kh"}),nodeName:b.W.Bullet,icon:i.gf$,shortcut:"- Item",execute:e=>{e.chain().setListItems({variant:b.W.Bullet}).selectInsertedNode().run()},keywords:["bullets","unordered","ul","list"]},{key:"numberedList",name:()=>a.ag._({id:"M3G9ZD"}),nodeName:b.W.Numbered,icon:i.nFo,shortcut:"1. Item",execute:e=>{e.chain().setListItems({variant:b.W.Numbered}).selectInsertedNode().run()},keywords:["numbers","numbered","ordered","ol","list"]},{key:"todoList",name:()=>a.ag._({id:"rCIbrq"}),nodeName:b.W.Todo,icon:i.A8,shortcut:"[] Item",execute:e=>{e.chain().setListItems({variant:b.W.Todo}).selectInsertedNode().run()},keywords:["todo","task","checkbox","list","checklist"]},{key:"blockquote",name:()=>a.ag._({id:"OLMhPm"}),nodeName:"blockquote",icon:i.vV6,shortcut:"> Quote",execute:e=>e.chain().focus().toggleBlockquote().run(),keywords:["quote","blockquote"]},...(0,g.Di)(),{key:"buttonGroup",name:()=>a.ag._({id:"hxBFty"}),nodeName:"buttonGroup",icon:i.duH,execute:e=>e.commands.insertContentAndSelect((0,p.e)().buttonGroup),description:()=>a.ag._({id:"IvDo5O"}),keywords:["button","link","click","call to action"]},{key:"codeBlock",name:()=>a.ag._({id:"4A3Yzu"}),nodeName:"codeBlock",icon:i.dT$,shortcut:"```",execute:e=>{e.chain().focus().setCodeBlock().run()},keywords:["code","block","codeblock"]},{key:"mathBlock",name:()=>a.ag._({id:"TI6GY9"}),nodeName:"math_display",featureFlag:"math",icon:i.xFR,keywords:["math","equation","latex","katex"],execute:e=>e.chain().focus().insertContent((0,p.e)().mathBlock).run(),dragEndFn:()=>{},description:()=>a.ag._({id:"mBJFYh"})},{key:"mathInline",name:()=>a.ag._({id:"qc9cD+"}),featureFlag:"math",nodeName:"math_inline",icon:i.eDD,keywords:["math","equation","latex","katex"],execute:e=>e.chain().focus().insertMathInline().run(),shortcut:"$x^2$ "},{key:"table2",name:()=>a.ag._({id:"3gSgpL"}),keywords:["table","grid","data"],nodeName:"table",shortcut:"/table",icon:i.B3e,execute:e=>e.commands.insertTable({rows:2,cols:2,withHeaderRow:!1})},{key:"table3",name:()=>a.ag._({id:"ZjN50+"}),keywords:["table","grid","data"],nodeName:"table",icon:i.B3e,execute:e=>e.commands.insertTable({rows:3,cols:3,withHeaderRow:!1})},{key:"table4",name:()=>a.ag._({id:"64S2d0"}),keywords:["table","grid","data"],nodeName:"table",icon:i.B3e,execute:e=>e.commands.insertTable({rows:4,cols:4,withHeaderRow:!1})},{key:"columns2",name:()=>a.ag._({id:"vVJ2/D"}),keywords:["columns","layout","grid","two"],nodeName:"gridLayout",shortcut:"/columns",icon:i.blG,execute:e=>e.commands.insertLayout(2)},{key:"columns3",name:()=>a.ag._({id:"OnuuaA"}),keywords:["columns","layout","grid","three"],nodeName:"gridLayout",icon:i.blG,execute:e=>e.commands.insertLayout(3)},{key:"columns4",name:()=>a.ag._({id:"hexbw8"}),keywords:["columns","layout","grid","four"],nodeName:"gridLayout",icon:i.blG,execute:e=>e.commands.insertLayout(4)},{key:"contributors",name:()=>a.ag._({id:"YqsXfH"}),nodeName:"contributors",icon:i.V3X,execute:e=>e.commands.insertContentAndSelect((0,p.e)().contributors),keywords:["contributors","authors","credits"]},{key:"divider",name:()=>a.ag._({id:"R8AthW"}),nodeName:"divider",icon:i.ZC5,keywords:["hr","rule","line","divider"],shortcut:"---",execute:e=>e.commands.insertContentAndSelect((0,p.e)().divider)},{key:"tableOfContents",name:()=>a.ag._({id:"9FTolD"}),featureFlag:"tableOfContentsBlock",nodeName:"tableOfContents",icon:i.Ljc,execute:e=>e.commands.insertContentAndSelect((0,p.e)().tableOfContents,-1),keywords:["toc","contents"]},{key:"gallery",name:()=>a.ag._({id:"U+kFad"}),description:()=>a.ag._({id:"GqdREM"}),nodeName:"gallery",shortcut:"/gallery",icon:i.emM,keywords:["gallery","image","layout","filmstrip","carousel"],execute:e=>e.commands.insertContentAndSelect((0,p.e)().gallery)},{key:"logo",name:()=>a.ag._({id:"YkFus/"}),description:()=>a.ag._({id:"YRtGxa"}),nodeName:"gallery",shortcut:"/logos",icon:i.nsr,keywords:["logo","logos","gallery"],execute:e=>e.chain().insertContentAndSelect((0,p.e)().logoGallery).run()},{key:"footnote",name:()=>a.ag._({id:"dOxPd4"}),nodeName:"footnote",shortcut:"^note^",icon:i.dkK,execute:e=>{let t=(0,v.H)(),n={...(0,p.e)().footnote,attrs:{noteId:t}};(0,v.t0)(t,!0),e.commands.insertContent(n)},dragStartFn:e=>{let t=(0,v.H)(),n={...(0,p.e)().footnote,attrs:{noteId:t}};(0,v.t0)(t,!0),(0,k.U)(e,n)},checkDisabled:y.M,keywords:["footnote","note","reference"]},...(0,f._)(),...(0,w.c)(),...(0,C.js)(),...(0,C.ne)(),...(0,x.q)(),...A(),...m(),{key:"aiCardAfter",name:()=>a.ag._({id:"yk2NpI"}),nodeName:"card",icon:o.ddb,execute:e=>e.commands.insertCardAfter((0,p.e)().aiCardAfter),checkDisabled:e=>!e.schema.nodes.card,keywords:["card","below","after","new"],featureFlag:"addCard2"}],L=()=>s()(z(),e=>e.priority),E=()=>c()(z(),"key"),N=function(e,t){var n;let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return!!(t.featureFlag&&!u.VH.get(t.featureFlag)||(null===(n=t.checkDisabled)||void 0===n?void 0:n.call(t,e)))||!!i&&!(0,I.$i)(e,t.nodeName)}},19732:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(87254),r=n(46594),o=n(30631),a=n(91722);let l=()=>i.ag._({id:"9FTolD"}),s=()=>({title:{type:"title",attrs:{level:1}},h1:{type:"heading",attrs:{level:1}},normalText:{type:"paragraph"},h2:{type:"heading",attrs:{level:2}},h3:{type:"heading",attrs:{level:3}},h4:{type:"heading",attrs:{level:4}},bulletedList:{type:"bullet",attrs:{indent:0}},numberedList:{type:"numbered",attrs:{indent:0}},todoList:{type:"todo",attrs:{indent:0}},blockquote:{type:"blockquote",content:[{type:"paragraph"}]},codeBlock:{type:"codeBlock"},mathBlock:{type:"math_display"},button:{type:"button",content:[{type:"text",text:i.ag._({id:"uWe4QF"})}]},buttonGroup:{type:"buttonGroup",content:[{type:"button",content:[{type:"text",text:i.ag._({id:"uWe4QF"})}]}]},table2:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table3:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},table4:{type:"table",content:[{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]},{type:"tableRow",content:[{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]},{type:"tableCell",attrs:{colspan:1,rowspan:1},content:[{type:"paragraph"}]}]}]},columns2:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns3:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},columns4:{type:"gridLayout",content:[{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]},{type:"gridCell",content:[{type:"paragraph"}]}]},insertCardInside:{type:"card",content:[{type:"cardLayoutItem",attrs:{itemId:"body",background:{}},content:[{type:"heading",attrs:{level:1}}]}]},aiCardAfter:{type:"card",attrs:{generatorInput:o.d},content:[{type:"paragraph"}]},footnote:{type:"footnote",content:[{type:"paragraph"}]},contributors:{type:"contributors"},divider:{type:"divider"},tableOfContents:[{type:"heading",attrs:{level:3},content:[{type:"text",text:l()}]},{type:"tableOfContents"}],gallery:{type:"gallery",content:[]},logoGallery:{type:"gallery",attrs:{layout:"logo"},content:[]},...(0,a.BC)(),...r.NY,toggle:{type:"toggle",content:[{type:"toggleSummary"},{type:"paragraph"}]}})},39198:function(e,t,n){"use strict";n.d(t,{UV:function(){return r.U},ZT:function(){return r.Z},e1:function(){return o.e},pP:function(){return i.pP},xr:function(){return i.xr},zm:function(){return i.zm}});var i=n(77834),r=n(60111),o=n(19732)},60111:function(e,t,n){"use strict";n.d(t,{U:function(){return o},Z:function(){return a}});var i=n(30764),r=n(31601);let o=(e,t)=>{let n=Array.isArray(t)?t:[t],r=i.p2.fromJSON(e.schema,{content:n});e.view.dragging={slice:r,move:!0},e.commands.setTextSelection(e.state.selection.from)},a=(e,t)=>{r.co.track(r.AA.NODE_INSERTED,{node_name:e.nodeName,command:e.key,method:t}),"card"===e.nodeName&&r.co.track(r.AA.CARD_CREATED,{method:t,command:e.key})}},62243:function(e,t,n){"use strict";n.d(t,{Y:function(){return _}});var i=n(52322),r=n(32981),o=n(26468),a=n(73751),l=n(54326),s=n(97217),d=n(28535),c=n(2338),u=n(26847),p=n(99903),h=n(5879),m=n(27191),g=n(2784),f=n(1547),x=n(9355),v=n(44415);let y=e=>{let{currentAttributes:t,updateAttributes:n,editor:i,isMounted:r}=e,o=(0,g.useRef)({currentAttributes:t,updateAttributes:n,sourceKey:t.source});o.current.currentAttributes=t,o.current.updateAttributes=n,(0,g.useEffect)(()=>{o.current.sourceKey=o.current.currentAttributes.source},[t.tempUrl,t.src]),(0,g.useEffect)(()=>{if(!i||r)return;let{src:e,tempUrl:t,uploadStatus:n}=o.current.currentAttributes;t&&!e&&n!==x.D.Uploading&&(console.log("[useUploadOnUnmount] uploading tempUrl:",t),o.current.updateAttributes({uploadStatus:x.D.Uploading,source:o.current.sourceKey}),(0,v.Sm)(i,t))},[i,r])};var b=n(77574),w=n(71383),C=n(6643),k=n(21800),j=n(55338),S=n(12971),A=n(59053),I=n(38799),z=n(78112),L=n(1013),E=n(62307),N=n(10232),M=n(48915);let _=g.memo(e=>{let{editor:t}=e;(0,I.F1)(t);let n=(0,I.LM)(t),{isConnected:x}=(0,f.$)(),v=(0,N.B)(),_=(0,w.CG)(z.hN),T=t.state.selection,R=(0,g.useMemo)(()=>(0,M.Q3)(t,T),[t,T]),H=null==R?void 0:R.attrs.id,P=(0,w.CG)((0,C.GI)(H||"")),{currentMediaDrawerSourceKey:O,setMediaDrawerSourceKeyAction:D,isQuickAction:W}=(0,k.jn)(),F=(0,w.CG)(z.tY),B=R&&(0,M.CK)(t,R.type),G=n&&!!(F&&B&&_),U=(0,g.useRef)(null),V=(0,g.useCallback)(()=>{v({isOpen:!1}),T instanceof m.qv&&t.chain().selectNodeAtPos(T.from,!1).focus().run()},[t,T,v]),q=(0,j.A)(t);(0,g.useEffect)(()=>{B||v({isOpen:!1})},[B,v]),(0,g.useEffect)(()=>{G&&setTimeout(()=>{if(!U.current)return;let e=(0,u.t5)(U.current);e&&!(e.length<1)&&(0,p.T)(e[0],{nextTick:!0})},100)},[G,t]),(0,g.useEffect)(()=>{R&&(0,M.CK)(t,R.type)&&(0,S.KB)(t)&&!W&&D(R.attrs.source||O)},[R,t,D,O,W]);let K=A.ah[O],Y=(0,g.useCallback)(e=>{P&&C.TB.emit("cancelRemoveBg",{id:H||""}),(0,M.Yc)({editor:t,selection:T,sourceKey:O,attrs:e,resizeToFit:K.resizeToFit})},[t,P,O,T,H,K.resizeToFit]),X=(null==R?void 0:R.attrs)||{};y({currentAttributes:X,updateAttributes:Y,editor:t,isMounted:G});let $=(0,g.useCallback)(()=>{(0,M.Yc)({editor:t,selection:T,sourceKey:O,attrs:{source:O},nodeName:"mediaPlaceholder",resetAttrs:!0})},[O,T,t]),Z=(0,L.g)(),Q=!!(x||K.availableOffline),J=(null==R?void 0:R.editType)||"node",ee=(0,g.useCallback)(e=>(null==R?void 0:R.mediaType)==="embed"?"embed"===e.nodeName||"video"===e.nodeName:(null==R?void 0:R.mediaType)==="image"?"image"===e.nodeName:!!e.nodeName,[R]);return(0,i.jsxs)(r.d,{isOpen:G,onClose:V,size:Z,trapFocus:!1,blockScrollOnMount:!1,children:[(0,i.jsx)(o.Z,{background:"none"}),(0,i.jsxs)(a.s,{onKeyDown:q,"data-in-editor-focus":!0,"data-testid":"media-drawer","data-test-media-source":O,children:[(0,i.jsx)(l.x,{pl:10,children:(0,i.jsx)(h.cC,{id:"xYilR2"})}),(0,i.jsxs)(s.f,{sx:{scrollbarGutter:"stable both-edges"},children:[(0,i.jsx)(b.V,{isConnected:Q,description:(0,i.jsx)(h.cC,{id:"2y7sUG"}),mb:6}),(0,i.jsx)(E.M,{currentSource:K,onChange:e=>D(e,!0),isValidSource:ee}),K&&(0,i.jsx)(d.xu,{ref:U,opacity:Q?1:.4,pointerEvents:Q?"initial":"none",children:(0,i.jsx)(K.Panel,{editor:t,updateAttributes:Y,currentAttributes:X,resetToPlaceholder:$,editType:J})})]}),(0,i.jsx)(c.o,{"data-testid":"media-drawer-close"})]})]})});_.displayName="MediaDrawer"},62307:function(e,t,n){"use strict";n.d(t,{M:function(){return b}});var i=n(52322),r=n(10625),o=n(67046),a=n(62614),l=n(75009),s=n(28535),d=n(332),c=n(99058),u=n(44035),p=n(39237),h=n(38035),m=n(82554),g=n(42946),f=n(49929),x=n(2784),v=n(30240),y=n(59053);let b=x.memo(e=>{var t;let{currentSource:n,onChange:x,isValidSource:b}=e,w=null==n?void 0:null===(t=n.image)||void 0===t?void 0:t.src,C=(0,v.Zd)();return(0,i.jsxs)(r.v,{children:[(0,i.jsx)(o.j,{as:a.z,w:"100%",textAlign:"left",rightIcon:(0,i.jsx)(f.G,{icon:g.ptq}),leftIcon:w?(0,i.jsx)(l.E,{h:"1em",w:"1em",objectFit:"cover",src:w}):(null==n?void 0:n.icon)?(0,i.jsx)(f.G,{icon:null==n?void 0:n.icon,color:"var(--chakra-colors-trueblue-600)",fixedWidth:!0}):void 0,mb:4,"data-testid":"media-drawer-menu-button",children:(0,i.jsx)(s.xu,{noOfLines:1,wordBreak:"break-all",overflowX:"hidden",textOverflow:"ellipsis",children:(null==n?void 0:n.label())||"Source"})}),(0,i.jsx)(d.h,{children:(0,i.jsx)(c.q,{zIndex:"modalPopover",maxH:"60vh",overflowY:"auto",pos:"relative",children:Object.entries(y.dz).map(e=>{var t;let[r,o]=e,a=o.filter(e=>!(e.checkDisabled&&e.checkDisabled())&&!e.disabled&&(!e.featureFlag||!!C[e.featureFlag])&&b(e));return 0===a.length?null:(0,i.jsx)(u._,{title:null!==(t=y.X8[r]())&&void 0!==t?t:r,type:"radio",onChange:x,value:null==n?void 0:n.key,children:a.map(e=>{let{label:t,key:n,icon:r,image:o,badge:a}=e;return(0,i.jsx)(p.i,{value:n,children:(0,i.jsxs)(h.k,{direction:"row",align:"center",children:[o?(0,i.jsx)(l.E,{display:"inline",mr:2,h:"1em",w:"1em",objectFit:"contain",src:o.src}):r?(0,i.jsx)(s.xu,{display:"inline",mr:2,color:"trueblue.600",children:(0,i.jsx)(f.G,{icon:r})}):(0,i.jsx)(i.Fragment,{}),t(),a&&(0,i.jsx)(m.C,{ml:2,colorScheme:"green",children:a()})]})},n)})},r)})})})]})});b.displayName="MediaDrawerMenu"},48915:function(e,t,n){"use strict";n.d(t,{CK:function(){return p},Q3:function(){return c},Yc:function(){return u}});var i=n(30764),r=n(27191),o=n(46007),a=n(31292),l=n(7553),s=n(12971),d=n(59053);let c=(e,t,n)=>{if(t instanceof r.qv){let r=null!=n?n:t.node,c=(0,s.j0)(e,r.type);if(c&&c.config.accessoryImageKey){let e=c.config.accessoryImageKey,n={...r.attrs[e]};if(!n.source&&(0,a.G)(t.$from.parent)){var i,o,d;let r=(0,l.P)(t.$from.parent.attrs.variantKey);if(null===(o=r.defaultAttrs)||void 0===o?void 0:null===(i=o[e])||void 0===i?void 0:i.source)n.source=r.defaultAttrs[e].source;else{let i=(0,s.Jn)(t.$from.parent.content).find(t=>{var n;return null===(n=t.attrs[e])||void 0===n?void 0:n.source});n.source=null==i?void 0:null===(d=i.attrs[e])||void 0===d?void 0:d.source}}return{attrs:n,type:r.type,editType:"accessory",mediaType:"image",accesoryKeyPath:e}}return{editType:"node",...r}}return t instanceof r.Bs&&t.to-t.from==1&&t.$from.nodeAfter?{editType:"node",...null!=n?n:t.$from.nodeAfter}:t instanceof r.Bs&&e.isActive("link")?{attrs:e.getAttributes("link"),type:e.schema.marks.link,mediaType:"embed"}:null},u=e=>{let t,{editor:n,selection:a,sourceKey:l,attrs:s,nodeName:u,resetAttrs:p,resizeToFit:h}=e,{from:m}=a,g=c(n,a);if(g){if(p)t={};else if(g.type instanceof i.ZU)t=g.attrs;else{var f;let e=n.state.doc.nodeAt(m);if(!e||e.type!==g.type){console.error("[updateSelectedMedia] Node has moved, cant update");return}t=(null===(f=c(n,a,e))||void 0===f?void 0:f.attrs)||{}}}else{console.error("[updateSelectedMedia] No selectedMedia to update");return}let x={...t,source:l,...s};if(h&&"node"===g.editType&&(x=(0,o.UZ)(x)),(null==g?void 0:g.type.name)==="link"){x.href=x.href||x.sourceUrl;let{from:e,to:t}=a;n.chain().extendMarkRange("link").updateAttributes("link",x).setTextSelection({from:e,to:t}).run();return}if(g.accesoryKeyPath){n.chain().updateAttributesAtPos(m,{[g.accesoryKeyPath]:x}).run();return}let v=d.ah[x.source],y=u||v.nodeName;y&&n.commands.command(e=>{let{tr:t,state:n}=e,i=n.schema.nodes[y];return!!i&&(t.setNodeMarkup(m,i,x).setSelection(r.qv.create(t.doc,m)).setMeta("annotationEvent",{type:"update-node-attrs",pos:m}),!0)})},p=(e,t)=>{let n=(0,s.j0)(e,t);return!!n&&!!n.config.accessoryImageKey||(t instanceof i.Jq?(0,o.vb)(t):t instanceof i.ZU&&"link"===t.name)}},1013:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(70965);let r={base:"md","2xl":"lg"},o=()=>(0,i.iq)(r)},302:function(e,t,n){"use strict";n.d(t,{uH:function(){return iz}});var i,r=n(52322),o=n(28535),a=n(29117),l=n(64253),s=n(37243),d=n(27191),c=n(2784),u=n(13364),p=n(22156),h=n(71355),m=n(40405),g=n(43826),f=n(31292),x=n(4490),v=n(31335),y=n(66915),b=n(23307);let w=e=>{let t=(0,c.useRef)(null),n=(0,y.nm)(),{editor:i,tippyOptions:o,onHide:a,targetElement:l}=e;return(0,c.useEffect)(()=>{i&&i.commands.command(e=>{let{tr:i}=e;return i.setMeta(b.eq,{element:t.current,tippyOptions:o,panelLifecycle:n,onHide:a,targetElement:l}),!0})},[i,o,n,a,l]),(0,r.jsx)("div",{ref:t,className:e.className,style:{visibility:"hidden"},children:e.children})};var C=n(46007),k=n(38799),j=n(42946),S=n(54933),A=n(87254),I=n(9325),z=n(62614),L=n(49929),E=n(5879),N=n(9237),M=n(88881);let _=e=>{let{editor:t,handleDelete:n,hasText:i=!1}=e,o=(0,c.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]);return i?(0,r.jsx)(z.z,{variant:"toolbar",onClick:n||o,color:"red.500",onMouseDown:N.br,size:"md",leftIcon:(0,r.jsx)(L.G,{icon:j.XAH}),children:(0,r.jsx)(E.cC,{id:"cnGeoo"})}):(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,onClick:n||o,testId:"delete-node-button",color:"red.500"})};var T=n(38280),R=n(85573),H=n(71383),P=n(85391),O=n(81878),D=n(56581),W=n(10625),F=n(67046),B=n(99058),G=n(36371),U=n(73582),V=n(2969),q=n(3181),K=n(13272),Y=n(43297),X=n(77533),$=n(38035),Z=n(98621),Q=n.n(Z),J=n(54476),ee=n(54842),et=n(12971);let en=(e,t)=>{let n=new Set;for(let i of e)if(n.add(i[t]),n.size>1)return!1;return[...n][0]},ei=(e,t,n)=>en(function(e,t){let n=function(e,t){if("string"==typeof e){if(!t.marks[e])throw Error("There is no mark type named '".concat(e,"'. Maybe you forgot to add the extension?"));return t.marks[e]}return e}(t,e.schema),{from:i,to:r,empty:o}=e.selection,a=[];return o?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,r,e=>{a.push(...e.marks)}),a.filter(e=>e.type.name===n.name).map(e=>({...e.attrs}))}(e,t),n);var er=n(19426);let eo=e=>{let{editor:t,isLinkText:n,defaultTextColor:i}=e,r=es(t,i,n),o=ed(t,n),a=n&&t.state.selection.empty,l=(0,c.useCallback)(e=>{a?t.chain().focus().extendMarkRange("link").setHighlightColor(e).setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().setHighlightColor(e).run()},[t,a]),s=(0,c.useCallback)(e=>{a?t.chain().focus().extendMarkRange("link").setTextColor(e).setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().setTextColor(e).run()},[t,a]);return{highlightColor:o,resetColorAndHighlight:(0,c.useCallback)(()=>{a?t.chain().focus().extendMarkRange("link").unsetMark("textColor").unsetMark("highlight").setTextSelection({from:t.state.selection.from,to:t.state.selection.to}).run():t.chain().focus().unsetMark("textColor").unsetMark("highlight").run()},[t,a]),setHighlightColor:l,setTextColor:s,textColor:r}},ea=e=>{let{editor:t,defaultTextColor:n,testId:i,disabled:o,useMenuButton:a=!1,isLinkText:s=!1}=e,{textColor:d,highlightColor:c,setHighlightColor:u,setTextColor:p,resetColorAndHighlight:h}=eo({editor:t,isLinkText:s,defaultTextColor:n});return(0,r.jsxs)(W.v,{isLazy:!0,onClose:()=>(0,er.L)(t),children:[a?(0,r.jsx)(J.t,{color:c.color||d.color||void 0,isDefaultColor:!c.color&&"default"===d.state,disabled:o,"data-testid":i,isMixed:"mixed"===c.state||"mixed"===d.state}):(0,r.jsx)(l.kH,{placement:"top",label:(0,r.jsx)(E.cC,{id:"76ESgh"}),children:(0,r.jsx)(F.j,{isDisabled:o,as:z.z,variant:"toolbar",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),"data-testid":i,onMouseDown:N.br,size:"sm",children:(0,r.jsx)(ec,{color:c.color||d.color||void 0})})}),(0,r.jsx)(B.q,{overflow:"hidden",children:(0,r.jsxs)(G.m,{isFitted:!0,variant:"soft-rounded",size:"md",defaultIndex:c.color?1:0,children:[(0,r.jsxs)(U.t,{children:[(0,r.jsx)(V.O,{children:(0,r.jsx)(l.kH,{label:(0,r.jsx)(E.cC,{id:"xeiujy"}),placement:"top",children:(0,r.jsx)(L.G,{icon:j.yGG})})}),(0,r.jsx)(V.O,{children:(0,r.jsx)(l.kH,{label:(0,r.jsx)(E.cC,{id:"gtEbeW"}),placement:"top",children:(0,r.jsx)(L.G,{icon:j.hjM})})})]}),(0,r.jsxs)(q.n,{children:[(0,r.jsx)(K.x,{p:0,pt:2,children:(0,r.jsx)(ee.M,{currentColor:d.color||null,setColor:p,unsetColor:h,source:"TextColor"})}),(0,r.jsx)(K.x,{p:0,pt:2,children:(0,r.jsx)(ee.M,{currentColor:c.color||"",setColor:u,unsetColor:h,source:"TextHighlight"})})]})]})})]})},el=e=>{let{from:t}=e.state.selection,n=e.view.domAtPos(t),i=n.node instanceof HTMLElement?n.node:n.node.parentElement;if(!i)return null;let r=getComputedStyle(i).getPropertyValue("color");return r&&"rgba(0, 0, 0, 0)"!==r?Q()(r).toHexString().toUpperCase():null},es=(e,t,n)=>{let{selection:i,doc:r,schema:o}=e.state,{from:a,to:l}=i,s=n?(0,et.ro)(r,a,l,o.marks.highlight):r.rangeHasMark(a,l,o.marks.highlight),d=n?(0,et.ro)(r,a,l,o.marks.textColor):r.rangeHasMark(a,l,o.marks.textColor);if(s)return{state:null,color:null};if(!d)return{state:"default",color:t||el(e)};{let n=ei(e.state,"textColor","hex");return n?{state:null,color:n}:{state:"mixed",color:t||null}}},ed=(e,t)=>{let{selection:n,doc:i,schema:r}=e.state,{from:o,to:a}=n,l=t?(0,et.ro)(i,o,a,r.marks.highlight):i.rangeHasMark(o,a,r.marks.highlight);if(t?(0,et.ro)(i,o,a,r.marks.textColor):i.rangeHasMark(o,a,r.marks.textColor))return{state:null,color:null};if(!l)return{state:"default",color:null};{let t=ei(e.state,"highlight","hex");return t?{state:null,color:t}:{state:"mixed",color:null}}},ec=e=>{let{color:t,fixedWidth:n,isChecked:i}=e;return(0,r.jsxs)(Y.K,{spacing:"2px",children:[(0,r.jsx)(X.x,{children:i?(0,r.jsx)(D.n,{}):(0,r.jsx)(L.G,{icon:S.yGG,fixedWidth:n,size:t?"sm":void 0,transform:{y:t?3:0}})}),t&&(0,r.jsx)($.k,{w:5,h:1.5,bg:t,borderRadius:"sm",borderWidth:"1px",borderColor:"blackAlpha.400"})]})};var eu=n(78112),ep=n(70617),eh=n(10232),em=n(75768),eg=n(44035),ef=n(39237),ex=n(21514),ev=n(31527),ey=n(52175);let eb=()=>({link:{title:A.ag._({id:"yzF66j"})},preview:{title:A.ag._({id:"rdUucN"})},inline:{title:A.ag._({id:"HY4nP5"})}}),ew=e=>{let{editor:t,selection:n,isDisabled:i}=e,o=n instanceof d.Bs?"link":n.node.type.name,a="link"===o,l=t.getAttributes(o),{embed:s,source:u}=l,p="embed.twitter"===(0,ev.v0)(u||void 0).key,h=eb(),m=(0,c.useCallback)(e=>{if("link"===o&&"link"!==e)t.commands.convertLinkToMedia(e);else if("link"===e){t.commands.convertMediaToLink();return}t.commands.updateAttributes(o,{displayStyle:e})},[t,o]);if("href"in l&&(0,O.H7)(l.href)||p)return null;let g=a?"link":"displayStyle"in l&&l.displayStyle||"inline";return(0,r.jsxs)(W.v,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,r.jsx)(F.j,{isDisabled:i,size:"sm",as:z.z,rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),variant:"toolbar",pl:2,onMouseDown:N.br,"data-testid":"display-style-dropdown",children:h[g].title}),(0,r.jsx)(B.q,{children:(0,r.jsx)(eg._,{type:"radio",onChange:m,value:g,children:Object.entries(h).map(e=>{let[t,{title:n}]=e;return(0,r.jsx)(ef.i,{value:t,onMouseDown:N.br,"data-testid":"display-style-option-".concat(t),children:(0,r.jsx)(X.x,{children:n})},t)})})})]})},eC=e=>{let{href:t,updateHref:n,unlink:i,editor:o,allowEditMetadata:l=!1}=e,s=(0,c.useRef)(null),[d,u]=(0,c.useState)(t),p=(0,H.CG)(eu.xb),h=(0,et.NC)(t,p),m=e=>{if(!e)return;let t=(0,ep.kr)(e)||(0,O.H7)(e)?e:"http://"+e;if(!(0,ep.jv)(t)){n("");return}n(t)},g=(0,c.useCallback)(()=>{try{window.open(t,"_blank")}catch(e){console.error("(caught) Link Formatting Menu error",e)}},[t]),f=(0,c.useCallback)(e=>{if(!h)return;let n=(0,et.g)(t);(0,P.l)(o,e,n)},[o,t,h]);(0,c.useEffect)(()=>{!t&&s.current&&setTimeout(()=>{var e;null==s||null===(e=s.current)||void 0===e||e.focus()})},[t]),(0,c.useEffect)(()=>{u(t)},[t]);let x=(0,eh.B)(),v=(0,c.useCallback)(e=>{x({isOpen:!0}),e.stopPropagation()},[x]);return(0,r.jsxs)(a.U,{spacing:2,py:1,mx:2,children:[(0,r.jsx)(R.I,{value:d,ref:s,onChange:e=>u(e.target.value),onBlur:()=>{m(d)},onKeyPress:e=>{"Enter"===e.key&&(m(d),o.commands.focus())},placeholder:A.ag._({id:"Ilf1mg"}),width:"250px",size:"sm","data-testid":"link-input"}),i&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"484LKL"}),icon:j.AE2,onClick:i}),h&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"9FNPgA"}),icon:j.eFW,onClick:f}),t&&(0,r.jsx)(M.h,{label:h?(0,r.jsx)(E.cC,{id:"RMJwZi"}):(0,r.jsx)(E.cC,{id:"fOj0+R"}),icon:j.gJF,onClick:g}),t&&l&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"ePK91l"}),icon:j.Xcf,onClick:v})]})},ek=()=>[{name:A.ag._({id:"bjuYAW"}),key:"solid",icon:S.r9b},{name:A.ag._({id:"bCuf07"}),key:"outline",icon:j.r9b}];var ej=n(46594);let eS=e=>{let{editor:t,attrs:n,selection:i}=e,o=(0,ej.ri)(),a=o[n.variant],s=a?a.icon:j.L4e;return(0,r.jsxs)(W.v,{isLazy:!0,onClose:()=>(0,er.L)(t),children:[(0,r.jsx)(l.kH,{placement:"top",label:(0,r.jsx)(E.cC,{id:"H8b4pf"}),"aria-label":A.ag._({id:"H8b4pf"}),children:(0,r.jsx)(F.j,{as:z.z,variant:"toolbar",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),size:"sm",onMouseDown:N.br,children:(0,r.jsx)(L.G,{icon:s})})}),(0,r.jsx)(B.q,{maxW:"auto",children:(0,r.jsxs)(em.h,{flex:"row",alignItems:"center",children:[Object.entries(o).map(e=>{let[o,{name:a,icon:l}]=e;return(0,r.jsx)(M.h,{label:a,icon:l,isActive:n.icon&&n.variant===o,onClick:()=>{t.chain().focus().updateAttributes("calloutBox",{variant:o,icon:!0}).selectNodeAtPos(i.from).run()}},a)}),(0,r.jsx)(T.w,{}),(0,r.jsx)(M.h,{label:n.icon?(0,r.jsx)(E.cC,{id:"Cs6LHm"}):(0,r.jsx)(E.cC,{id:"pjF2Hd"}),icon:j.gPx,isActive:!n.icon,onClick:()=>{t.chain().focus().updateAttributes("calloutBox",{icon:!n.icon}).selectNodeAtPos(i.from).run()}},"icon")]})})]})};var eA=n(9069),eI=n(70065),ez=n(11082),eL=n(56143),eE=n(32099),eN=n(85336),eM=n(67308),e_=n(30240),eT=n(27238),eR=n(31285),eH=n(92850),eP=n(26468),eO=n(22226),eD=n(54326),eW=n(2338),eF=n(74008),eB=n(97217),eG=n(17993),eU=n(50250),eV=n(95405),eq=n(31601),eK=n(55080),eY=n(65702);let eX=e=>{let{isOpen:t,onClose:n,cardId:i,editor:o}=e,a=(0,eq.z$)(),[l,s]=(0,c.useState)(!1),[d,u]=(0,c.useState)(!1),p=(0,eI.p)(),h=(0,c.useRef)(null),m=(0,c.useCallback)(()=>{h.current&&p.update(h.current,{status:"success",title:(0,r.jsx)(E.cC,{id:"enJ/4m"}),description:(0,r.jsx)(X.x,{children:(0,r.jsx)(E.cC,{id:"IxXthU"})}),duration:3e3,isClosable:!0})},[p]),g=(0,c.useCallback)(()=>{h.current&&p.update(h.current,{title:(0,r.jsx)(E.cC,{id:"FE5kcD"}),status:"error",duration:null,isClosable:!0})},[p]),f=(0,c.useCallback)(async e=>{switch(e){case"png":s(!0);break;case"jpeg":u(!0)}let t=o.getJSON(),n="".concat(eV.v.API_HOST,"/export/cards/").concat(i,"/image");h.current=p({id:"export-toast-".concat(i,"-").concat(e),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:(0,r.jsx)(E.cC,{id:"yvVnEI"})});try{var l;let r=await fetch(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({docContent:t,fileType:e})}),o=await r.blob();if(!r.ok)throw Error("Export failed.");let d=window.URL.createObjectURL(o),c=document.createElement("a"),p=decodeURIComponent((null===(l=(r.headers.get("Content-Disposition")||"").split(";").find(e=>e.includes("filename=")))||void 0===l?void 0:l.replace("filename=","").trim())||"".concat(i,".").concat(e));c.download=p,c.href=d,document.body.appendChild(c),c.click(),c.remove(),null==a||a.track(eq.AA.CARD_EXPORTED,{cardId:i,format:"image",fileType:e}),setTimeout(()=>{switch(e){case"png":s(!1);break;case"jpeg":u(!1)}m()},300)}catch(e){g()}finally{s(!1),u(!1)}},[a,i,o,g,m,p]);return(0,r.jsxs)(eH.u_,{isOpen:t,onClose:n,size:"lg",children:[(0,r.jsx)(eP.Z,{}),(0,r.jsxs)(eO.h,{children:[(0,r.jsx)(eD.x,{children:(0,r.jsx)(E.cC,{id:"xRJ+bN"})}),(0,r.jsx)(eW.o,{}),(0,r.jsx)(eF.i,{}),(0,r.jsx)(eB.f,{pt:"6",children:(0,r.jsxs)(eG.g,{spacing:4,align:"start",children:[(0,r.jsx)(Y.K,{spacing:2,w:"100%",children:(0,r.jsx)(eK.j,{onClick:()=>f("png"),exportInProgress:l,exportInProgressNote:(0,r.jsx)(E.cC,{id:"SJjTti"}),accentColor:"purple",icon:j.VmB,formatLabel:"PNG"})}),(0,r.jsx)(X.x,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(E.cC,{id:"8LhjM/",components:{0:(0,r.jsx)(z.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:()=>{n(),eY.pw.emit(eY.TI.OPEN_PAGE_SETUP,"cards")}})}})})]})}),(0,r.jsx)(eU.m,{children:(0,r.jsx)(em.h,{children:(0,r.jsx)(z.z,{onClick:()=>{n()},children:(0,r.jsx)(E.cC,{id:"DPfwMq"})})})})]})]})};var e$=n(26284),eZ=n(29803),eQ=n(8839),eJ=n(33945),e0=n(33279);let e1=e=>{let{attrs:t}=e,n=(0,H.CG)(eu.gh),i=(0,H.CG)(eu.yx),o=t.id,a=(0,e0.gq)({cardId:o,docId:null==i?void 0:i.id,isPresentMode:n===eJ.q.SLIDE_VIEW}),l=(0,eI.p)(),{onCopy:s}=(0,e$.V)(a),d=(0,c.useCallback)(e=>{var t;if(e.target&&(null===(t=e.target)||void 0===t?void 0:t.closest('[data-testid="open-share"]'))){e.preventDefault();return}s(),l({title:A.ag._({id:"BVYvMa"}),status:"success",duration:3e3,position:"top"})},[s,l]),u=(0,eQ.K)();return(0,r.jsx)(M.h,{onClick:d,label:u?(0,r.jsx)(E.cC,{id:"F0YmUY"}):(0,r.jsxs)(Y.K,{spacing:"0",children:[(0,r.jsx)(X.x,{children:(0,r.jsx)(E.cC,{id:"afMspw"})}),(0,r.jsx)(X.x,{fontSize:"xxs",color:"gray.400",children:(0,r.jsx)(E.cC,{id:"OpeWZK"})})]}),children:(0,r.jsx)(eZ.x,{isLocked:!u})})};var e2=n(32899),e4=n(37173),e3=n(40139),e5=n(6363),e7=n(91492);let e8=e=>{let{editor:t,selection:n,decorations:i}=e,{node:o,from:a}=n,s=o.attrs,d=(0,e5.en)(i),u=(0,e3.U)(s,null==d?void 0:d.layout),p=(0,c.useCallback)(e=>{a&&t.commands.updateAttributesAtPos(a,{fitType:e})},[t,a]),h="fit"===u;return(0,r.jsx)(l.kH,{label:h?(0,r.jsx)(E.cC,{id:"sShDhp"}):(0,r.jsx)(E.cC,{id:"VPxUGR"}),placement:"top",children:(0,r.jsx)(e2.h,{variant:h?"activeToolbar":"toolbar",size:"sm",icon:(0,r.jsx)(L.G,{icon:j.JXm}),onClick:()=>p(h?"fill":"fit"),boxSize:7,p:0,my:0,"aria-label":A.ag._({id:"l1XNCT"}),isActive:h})})};var e6=n(55478),e9=n(43679),te=n(34071),tt=n(39429),tn=n(48394),ti=n(82729),tr=n(75009),to=n(27875),ta=n.n(to),tl=n(68015),ts=n.n(tl),td=n(9936),tc=n(97912),tu=n(92315);let tp=e=>{let[t,n]=(0,c.useState)(null);return(0,c.useEffect)(()=>((()=>{let t=new Image;t.src=e,t.onload=()=>{let{naturalWidth:e,naturalHeight:i}=t;n(e/i)}})(),()=>{n(null)}),[e]),t},th=(e,t,n)=>{let i=e.view.domAtPos(t);if(!i)return;let{node:r,offset:o}=i,a=r.childNodes[o].querySelector("[data-change-focus-point-el]");a&&(a.style.backgroundPosition=n?"".concat(n.x,"% ").concat(n.y,"%"):"")},tm=e=>{var t;return null===(t=(0,tu.XU)(e))||void 0===t?void 0:t.backgroundPos},tg=(e,t,n)=>{if(!t||!n)return;let i=(0,td.XV)(e.state,n);if(!i){console.error("ChangeFocusPoint - relative pos is null");return}th(e,i,null);let r=e.state.doc.nodeAt(i);if(!r)return;let o=(0,tu.XU)(r),a=(0,tu.j6)(r,{...o,backgroundPos:t});e.commands.updateAttributesAtPos(i,a)},tf=e=>{let{editor:t,pos:n,node:i}=e,r=(0,c.useRef)(null),o=(0,c.useRef)(null),a=(0,c.useRef)(null),[l,s]=(0,c.useState)(!1),d=(0,c.useRef)(),u=(0,c.useCallback)(e=>{let i=r.current;if(i){if(d.current=e,!e){i.style.left="calc(50% - 10px)",i.style.top="calc(50% - 10px)",s(!1);return}i.style.left="calc(".concat(e.x,"% - 10px)"),i.style.top="calc(".concat(e.y,"% - 10px)"),th(t,n,e),s(50!==e.x||50!==e.y)}},[t,n]),{onOpen:p,onClose:h,isOpen:m}=(0,e6.q)(),g=(0,c.useCallback)(()=>{u(tm(i)),p()},[i,p,u]),f=(0,c.useCallback)(()=>{let e={x:50,y:50};u(e);let i=(0,td.jS)(t.state,n);tg(t,e,i)},[u,t,n]),x=(0,c.useCallback)(e=>{let t=o.current;if(!t)return;let n=t.getBoundingClientRect(),i=n.width,r=n.height,a=(e.clientX-n.left)/i,l=(e.clientY-n.top)/r;u({x:ts()(100*ta()(a,0,1),2),y:ts()(100*ta()(l,0,1),2)})},[u]);return(0,c.useEffect)(()=>{let e=r.current,i=o.current;if(!e||!i)return;a.current=(0,td.jS)(t.state,n);let l=()=>{i.addEventListener("mousemove",x),window.addEventListener("mouseup",s)},s=()=>{i.removeEventListener("mousemove",x),window.removeEventListener("mouseup",s),tg(t,d.current,a.current)};return e.addEventListener("mousedown",l),()=>{e.removeEventListener("mousedown",l)}},[t,x,n]),(0,c.useEffect)(()=>{let e=o.current;if(!e)return;a.current=(0,td.jS)(t.state,n);let i=t=>{e.addEventListener("mousemove",x),window.addEventListener("mouseup",r),x(t)},r=()=>{e.removeEventListener("mousemove",x),window.removeEventListener("mouseup",r),tg(t,d.current,a.current)};return e.addEventListener("mousedown",i),()=>{e.removeEventListener("mousedown",i)}},[t,x,n]),{onOpen:g,onClose:h,isOpen:m,dotRef:r,dotContainerRef:o,canReset:l,resetDotPosition:f}},tx=e=>{let{editor:t,pos:n,node:i,isDisabled:a=!1}=e,{onOpen:s,onClose:d,isOpen:c,dotRef:u,dotContainerRef:p,canReset:h,resetDotPosition:m}=tf({editor:t,pos:n,node:i}),g=(0,tu.XU)(i),f=(null==g?void 0:g.src)||(null==g?void 0:g.tempUrl),x=tp(f);return(0,r.jsxs)(e9.J,{strategy:"absolute",placement:"top",isOpen:c,onOpen:s,onClose:d,children:[(0,r.jsx)(l.kH,{label:(0,r.jsx)(E.cC,{id:"BmxaoW"}),placement:"top",children:(0,r.jsx)(o.xu,{my:1,children:(0,r.jsx)(te.x,{children:(0,r.jsx)(e2.h,{variant:"toolbar",size:"sm",icon:(0,r.jsx)(L.G,{icon:j.YhY}),boxSize:7,p:0,my:0,isDisabled:a,"aria-label":A.ag._({id:"BmxaoW"})})})})}),(0,r.jsx)(tt.y,{children:(0,r.jsx)(tn.b,{p:1,children:(0,r.jsxs)(o.xu,{ref:p,userSelect:"none",position:"relative",children:[(0,r.jsx)(o.xu,{ref:u,borderRadius:"full",boxSize:5,pos:"absolute",zIndex:"overlay",border:"2px solid",borderColor:"gray.100",pointerEvents:"none",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white"}),f&&(0,r.jsx)(ti.o,{maxW:"300px",ratio:x||1,position:"relative",children:(0,r.jsx)(tr.E,{pointerEvents:"none",src:(0,tc.SN)(f,tc.Iv,g.meta),fallbackSrc:f,objectFit:"cover",position:"absolute",top:0,left:0,width:"100%",height:"100%"})}),(0,r.jsx)(z.z,{opacity:h?1:0,pos:"absolute",bottom:3,right:3,variant:"plain",size:"xs",onClick:m,children:(0,r.jsx)(E.cC,{id:"OfhWJH"})})]})})})]})};var tv=n(31087),ty=n(43271),tb=n(80708),tw=n(41098),tC=n(89099);let tk=e=>{let{icon:t,label:n,children:i,iconProps:o,isHidden:a,...l}=e;return a?null:(0,r.jsxs)(Y.K,{direction:"row",spacing:8,alignItems:"center",justifyContent:"space-between",...l,children:[(0,r.jsxs)($.k,{gap:4,alignItems:"center",children:[t&&(0,r.jsx)(L.G,{icon:t,fixedWidth:!0,...o}),(0,r.jsx)(X.x,{children:n})]}),i]})},tj=e=>{let{icon:t,label:n,onClick:i,colorScheme:o="gray",secondaryIcon:a,secondaryLabel:l,secondaryAction:s,secondaryColorScheme:d="gray"}=e;return(0,r.jsxs)(tC.E,{px:5,py:3,bg:"gray.100",mx:-4,mb:-4,justify:l?"space-between":"center",children:[(0,r.jsx)(tC.U,{children:l&&s&&(0,r.jsx)(z.z,{variant:"link",size:"sm",colorScheme:d,leftIcon:a?(0,r.jsx)(L.G,{icon:a,fixedWidth:!0}):void 0,onClick:s,onMouseDown:N.br,my:0,children:l})}),(0,r.jsx)(tC.U,{children:(0,r.jsx)(z.z,{variant:"link",size:"sm",colorScheme:o,leftIcon:t?(0,r.jsx)(L.G,{icon:t,fixedWidth:!0}):void 0,onClick:i,onMouseDown:N.br,my:0,children:n})})]})},tS=e=>{let{...t}=e;return(0,r.jsx)(eF.i,{my:1,...t})},tA=e=>{let{children:t,...n}=e;return(0,r.jsx)(Y.K,{spacing:4,p:4,...n,children:t})},tI="14px",tz="28px",tL=e=>{let{label:t,withSidePadding:n=!1,children:i,...o}=e;return(0,r.jsxs)(Y.K,{direction:"row",spacing:3,...o,children:[t&&(0,r.jsx)(Y.K,{alignSelf:"center",justifyContent:"start",minWidth:i?"max-content":"100%",h:tz,pl:n?tI:void 0,children:(0,r.jsx)($.k,{justifyContent:"flex-start",alignItems:"center",width:"100%",height:"100%",children:t})}),i&&(0,r.jsx)(Y.K,{alignSelf:"center",width:"100%",pr:n?tI:void 0,h:tz,children:(0,r.jsx)($.k,{justifyContent:"flex-end",alignItems:"center",width:"100%",height:"100%",children:i})})]})},tE=e=>{let{editor:t}=e;return(0,r.jsx)(em.h,{spacing:1,size:"sm",children:I.Ec.map(e=>{let{name:n,icon:i,checkActive:o,apply:a}=e;if(o&&a)return(0,r.jsx)(M.h,{label:n(),icon:i,onClick:()=>{a(t)},isActive:o(t),my:0},n())})})};var tN=n(83906),tM=n(36474);let t_=e=>{let{contributors:t,hiddenContributorIds:n,toggleOneVisibleContributor:i,toggleAllVisibleContributors:o,isDisabled:a=!1}=e,s=(null==n?void 0:n.length)===0;return(0,r.jsxs)(W.v,{isLazy:!0,children:[(0,r.jsx)(F.j,{as:z.z,variant:"plain",size:"sm",boxShadow:"none",minW:"max-content",textAlign:"left",rightIcon:(0,r.jsx)(tN.v,{}),isDisabled:a,children:s?(0,r.jsx)(E.cC,{id:"lZw9AX"}):(0,r.jsx)(E.cC,{id:"8Tg/JR"})}),(0,r.jsx)(B.q,{minWidth:"max-content",padding:0,children:(0,r.jsxs)(Y.K,{spacing:1,py:3,children:[(0,r.jsx)(tL,{label:(0,r.jsx)(E.cC,{id:"lZw9AX"}),withSidePadding:!0,children:(0,r.jsx)(tw.r,{isChecked:s,onChange:o})}),(0,r.jsx)(eF.i,{py:2}),(0,r.jsx)(tL,{label:(0,r.jsx)(l.NZ,{children:(0,r.jsx)(X.x,{children:(0,r.jsx)(E.cC,{id:"8Tg/JR"})})}),withSidePadding:!0}),t.map(e=>(0,r.jsx)(tT,{contributor:e,contributors:t,toggleOneVisibleContributor:i,hiddenContributorIds:n,allVisible:s},e.user.id))]})})]})},tT=e=>{let{contributor:t,contributors:n,toggleOneVisibleContributor:i,hiddenContributorIds:o,allVisible:a}=e,s=n.length-o.length==1&&!o.includes(t.user.id);return(0,r.jsxs)(tL,{label:(0,r.jsxs)($.k,{alignItems:"center",gap:2,children:[(0,r.jsx)(l.Vw,{size:"xs",src:t.user.profileImageUrl,opacity:a?.5:1}),(0,r.jsx)(X.x,{fontSize:"md",fontFamily:"Inter, sans-serif",opacity:a?.5:1,sx:{cursor:a?"default":"text"},children:t.user.displayName})]}),paddingY:1.25,withSidePadding:!0,children:[(0,r.jsx)(tM.L,{w:4}),(0,r.jsx)(tw.r,{isChecked:!o.includes(t.user.id),onChange:()=>i(t.user.id),disabled:s})]})},tR=e=>{let{contributors:t,hiddenContributorIds:n,hasMultipleContributors:i,toggleOneVisibleContributor:o,toggleAllVisibleContributors:a}=e;return(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"YqsXfH"}),icon:j.m08,children:(0,r.jsx)(t_,{contributors:t,hiddenContributorIds:n,toggleOneVisibleContributor:o,toggleAllVisibleContributors:a,isDisabled:!i})})};var tH=n(91982),tP=n(76801);let tO=e=>{let{children:t,...n}=e,{content:i}=(0,tH.jC)("Popover");return(0,r.jsx)(tP.m.div,{__css:i,p:0,overflow:"hidden",borderWidth:0,minW:"auto",width:"auto",...n,children:t})},tD=()=>({square:{icon:j.pL1,label:(0,r.jsx)(E.cC,{id:"du/PIl"})},landscape:{icon:j.lCX,label:(0,r.jsx)(E.cC,{id:"BZXXSi"})},portrait:{icon:j.j8N,label:(0,r.jsx)(E.cC,{id:"79gnko"})}}),tW=e=>{let{selection:t,editor:n}=e,i=tD(),o=t.node.attrs;return(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"7bRShe"}),icon:j.Z_5,children:(0,r.jsx)(em.h,{children:Object.entries(i).map(e=>{let[i,{icon:a,label:l}]=e;return(0,r.jsx)(M.h,{icon:a,label:l,onClick:()=>{n.chain().updateAttributes("gallery",{dimensions:i}).setNodeSelection(t.from).run()},isActive:o.dimensions===i},i)})})})};var tF=n(55233),tB=n(9116);let tG=e=>{let{selection:t,editor:n}=e,i=t.node.attrs.thumbHeight||tB.vf,o=(0,c.useCallback)(e=>{n.chain().updateAttributes("gallery",{thumbHeight:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"Cj2Gtd"}),icon:j.AV3,children:(0,r.jsxs)(tF.iR,{"aria-label":"gallery-slider",min:tB.jq,max:tB.C_,step:.25,value:i,onChange:o,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,r.jsx)(tF.Uj,{children:(0,r.jsx)(tF.Ms,{})}),(0,r.jsx)(tF.gs,{background:"trueblue.500"})]})})},tU=()=>({flex:{title:(0,r.jsx)(E.cC,{id:"oNVcTP"}),description:(0,r.jsx)(E.cC,{id:"HfsL0F"})},grid:{title:(0,r.jsx)(E.cC,{id:"fY+Mvd"}),description:(0,r.jsx)(E.cC,{id:"Ur6uwh"})},logo:{title:(0,r.jsx)(E.cC,{id:"iG7KNr"}),description:(0,r.jsx)(E.cC,{id:"hcTCev"})}}),tV=e=>{let{selection:t,editor:n}=e,i=t.node.attrs,o=(0,c.useCallback)(e=>{let r="flex"===e&&i.thumbHeight<m.jq?m.jq:"grid"===e||"logo"===e?Math.round(i.thumbHeight):void 0;n.chain().updateAttributes("gallery",{layout:e,dimensions:"grid"===e?"square":void 0,stretchToFill:"flex"!==e&&void 0,...r&&{thumbHeight:r}}).setNodeSelection(t.from).focus().run()},[n,t.from,i.thumbHeight]),a=tU(),l=Object.keys(a).includes(i.layout)?i.layout:"flex",s=a[l].title;return(0,r.jsxs)(W.v,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,strategy:"fixed",children:[(0,r.jsx)(F.j,{as:z.z,"data-testid":"display-style-dropdown",size:"sm",rightIcon:(0,r.jsx)(L.G,{fixedWidth:!0,icon:j.ptq,transform:"shrink-6"}),boxShadow:"none",onMouseDown:N.br,children:s}),(0,r.jsx)(B.q,{zIndex:2,maxW:"400px",children:(0,r.jsx)(eg._,{type:"radio",onChange:o,value:i.layout,children:Object.entries(a).map(e=>{let[t,{title:n,description:i}]=e;return(0,r.jsxs)(ef.i,{value:t,onMouseDown:N.br,"data-testid":"display-style-option-".concat(t),children:[(0,r.jsx)(X.x,{children:n}),(0,r.jsx)(X.x,{fontSize:"xs",color:"gray.500",children:i})]},t)})})})]})},tq=e=>{let{selection:t,editor:n}=e,i=t.node.attrs.thumbSpacing||tB.GE,o=(0,c.useCallback)(e=>{n.chain().updateAttributes("gallery",{thumbSpacing:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"EL5s3L"}),icon:j.AV3,children:(0,r.jsxs)(tF.iR,{"aria-label":"gallery-slider",min:tB.rA,max:tB.Ly,step:.1,value:i,onChange:o,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,r.jsx)(tF.Uj,{children:(0,r.jsx)(tF.Ms,{})}),(0,r.jsx)(tF.gs,{background:"trueblue.500"})]})})},tK=e=>{let{selection:t,editor:n}=e,i=t.node.attrs,o=!0===i.stretchFill||null===i.stretchFill;return(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"57WAKT"}),icon:j.dH7,children:(0,r.jsx)(tw.r,{isChecked:o,onChange:()=>{n.chain().updateAttributes("gallery",{stretchFill:!i.stretchFill}).setNodeSelection(t.from).run()}})})};var tY=n(18149),tX=n.n(tY),t$=n(21829),tZ=n(6643),tQ=n(90802),tJ=n(3423),t0=n(28789),t1=n(67577);let t2=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{none:{label:(0,r.jsx)(E.cC,{id:"gIjBW2"})},expand:{label:(0,r.jsx)(E.cC,{id:"1A3EXy"})},newTab:{label:e?(0,r.jsx)(E.cC,{id:"YdDilE"}):(0,r.jsx)(E.cC,{id:"XGRJzS"})}}},t4=e=>{let{handleClickBehaviorChange:t,currentClickBehavior:n,enableNoClickBehavior:i=!1,canAddLink:o=!1}=e,a=t2(o);return(0,r.jsxs)(W.v,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,r.jsx)(F.j,{as:z.z,"data-testid":"click-behavior-dropdown",size:"sm",rightIcon:(0,r.jsx)(L.G,{fixedWidth:!0,icon:j.ptq,transform:"shrink-6"}),boxShadow:"none",onMouseDown:N.br,children:a[n].label}),(0,r.jsx)(B.q,{zIndex:2,children:(0,r.jsx)(eg._,{type:"radio",onChange:e=>{t(e)},value:n,children:Object.entries(a).map(e=>{let[t,{label:n}]=e;return"none"!==t||i?(0,r.jsx)(ef.i,{value:t,onMouseOver:N.br,onMouseDown:N.br,"data-testid":"click-behavior-option-".concat(t),children:(0,r.jsx)(X.x,{children:n})},t):null})})})]})};var t3=n(74105),t5=n(20816),t7=n(1960),t8=n(16556),t6=n(44598),t9=n(40914),ne=n(97010),nt=n(11284);let nn=(0,c.memo)(e=>{let{label:t,icon:n,isFocused:i,focusedItemEl:o,onClick:l,onMouseMove:s}=e;return(0,r.jsx)(ne.HC,{px:2,py:2,mx:2,borderRadius:"md",ref:i?o:null,bg:i?"trueblue.50":"none",onClick:l,onMouseMove:s,onMouseDown:N.br,role:"option",cursor:"pointer",tabIndex:-1,children:(0,r.jsxs)(a.U,{pointerEvents:"none",children:[(0,r.jsx)(L.G,{icon:n,fixedWidth:!0,size:"sm"}),(0,r.jsx)(X.x,{noOfLines:1,fontSize:"sm",w:"100%",children:t})]})})});nn.displayName="Option";let ni=(0,c.memo)(e=>{let{items:t,inputValue:n,focusedIndex:i,interactionRef:a,isScrollingRef:s,isFiltered:d,onMouseMove:u,onSelectItem:p}=e,h=t.reduce((e,t,n)=>("page"===t.type?e.pages.push({item:t,index:n}):"card"===t.type?e.cards.push({item:t,index:n}):"url"===t.type&&e.url.push({item:t,index:n}),e),{pages:[],cards:[],url:[]}),m=(0,c.useRef)(null),g=(0,c.useRef)(null);return(0,c.useEffect)(()=>{if("keyboard"!==a.current)return;let e=g.current,t=m.current;if(!e||!t)return;let n=t.clientHeight,i=e.offsetTop,r=e.offsetHeight;s.current=!0,t.scrollTo({top:i-n/2+r/2,behavior:"smooth"});let o=setTimeout(()=>{s.current=!1},50);return()=>{clearTimeout(o)}},[i,g,m,a,s]),(0,r.jsx)(o.xu,{children:(0,r.jsxs)(ne.aV,{ref:m,pos:"relative",overflowY:"auto",maxH:"min(300px, 50vh)",children:[h.pages.map((e,t)=>{let{item:a,index:s}=e;return(0,r.jsxs)(o.xu,{children:[0===t&&(0,r.jsx)(l.NZ,{ml:4,my:1,children:d?(0,r.jsx)(E.cC,{id:"rXYeDA",values:{inputValue:n}}):(0,r.jsx)(E.cC,{id:"QIUdjp"})}),(0,r.jsx)(nn,{label:nr(a),icon:j.gMD,isFocused:s===i,focusedItemEl:g,onClick:()=>p(a),onMouseMove:()=>u(s)})]},a.docId)}),h.cards.map((e,t)=>{let{item:a,index:s}=e;return(0,r.jsxs)(o.xu,{children:[0===t&&(0,r.jsx)(l.NZ,{ml:4,my:1,children:d?(0,r.jsx)(E.cC,{id:"m+j0l8",values:{inputValue:n}}):(0,r.jsx)(E.cC,{id:"Ccpbzh"})}),(0,r.jsx)(nn,{label:nr(a),icon:j.lCX,isFocused:s===i,focusedItemEl:g,onClick:()=>p(a),onMouseMove:()=>u(s)})]},a.cardId)}),h.url.map((e,t)=>{let{item:n,index:a}=e;return(0,r.jsxs)(o.xu,{children:[0===t&&(0,r.jsx)(l.NZ,{ml:4,my:1,children:(0,r.jsx)(E.cC,{id:"wuJqqq"})}),(0,r.jsx)(nn,{label:n.value,icon:j.nNP,isFocused:a===i,focusedItemEl:g,onClick:()=>p(n),onMouseMove:()=>u(a)})]},"custom".concat(a))})]})})});ni.displayName="ListBox";let nr=e=>e.title||("card"===e.type?A.ag._({id:"gLDJuJ"}):A.ag._({id:"kveQAJ"})),no=(e,t)=>nr(t).trim().toLowerCase().includes(e.trim().toLowerCase()),na=e=>{let t=(0,ep.kr)(e)||(0,O.H7)(e)?e:"https://"+e;return(0,ep.jv)(t)?t:""},nl=e=>{let{items:t,inputValue:n}=e;return(0,c.useMemo)(()=>{let e=na(n),i=[...t.filter(e=>no(n,e)),""!==e?{type:"url",value:e}:null].filter(e=>!!e),r=i.length!==t.length;return{filteredItems:i,isFiltered:r}},[t,n])},ns=e=>{let{items:t,inputValue:n,onSelect:i,onRevert:r,popoverRef:o}=e,{isOpen:a,onClose:l,onOpen:s}=(0,e6.q)(),[d,u]=(0,c.useState)(null),p=(0,c.useRef)(null),h=(0,c.useRef)(!1),m=(0,c.useCallback)(()=>{l(),u(null)},[l]),g=(0,c.useCallback)(()=>{n&&(s(),u(0))},[n,s]),f=(0,c.useCallback)(e=>{var t;null!==(t=o.current)&&void 0!==t&&t.contains(e.relatedTarget)||m()},[m,o]),x=(0,c.useCallback)(e=>{i(e),m()},[m,i]),v=(0,c.useCallback)(e=>{switch(p.current="keyboard",e.key){case"Enter":case"Tab":{if(null===d)return;e.preventDefault();let n=t[d];n?x(n):m();return}case"Escape":e.preventDefault(),m(),r();return;case"ArrowDown":e.preventDefault(),a?u(e=>((null!=e?e:0)+1)%t.length):(s(),u(0));return;case"ArrowUp":e.preventDefault(),a?u(e=>{let n=(null!=e?e:0)-1;return n<0?t.length-1:n}):(s(),u(t.length-1));return}},[r,m,a,d,t,x,s]),y=(0,c.useCallback)(e=>{h.current||(p.current="mouse",u(e))},[]);return{isOpen:a,onClose:l,onOpen:s,focusedIndex:d,setFocusedIndex:u,handleSelectItem:x,onMouseMove:y,onKeyDown:v,onBlur:f,onFocus:g,interactionRef:p,isScrollingRef:h}},nd=(0,c.memo)(e=>{let{items:t,onSelect:n,onRevert:i,inputValue:o,setInputValue:a,inputRef:l}=e,s=(0,c.useRef)(null),{filteredItems:d,isFiltered:u}=nl({items:t,inputValue:o}),{onKeyDown:p,onMouseMove:h,focusedIndex:m,setFocusedIndex:g,interactionRef:f,isOpen:x,onClose:v,onOpen:y,onBlur:b,onFocus:w,handleSelectItem:C,isScrollingRef:k}=ns({items:d,onSelect:n,onRevert:i,popoverRef:s,inputValue:o}),j=(0,c.useCallback)(e=>{a(e.target.value),x||y(),g(0)},[x,y,g,a]),S=(0,c.useCallback)(()=>{x||(y(),g(0))},[x,y,g]);return(0,r.jsxs)(e9.J,{isLazy:!0,isOpen:x,onClose:v,autoFocus:!1,returnFocusOnClose:!1,matchWidth:!0,placement:"bottom",children:[(0,r.jsx)(nt.t,{children:(0,r.jsx)(R.I,{ref:l,size:"sm",placeholder:A.ag._({id:"BHFH/3"}),value:o,onKeyDown:p,onFocus:w,onBlur:b,onChange:j,onClick:S})}),(0,r.jsx)(tt.y,{ref:s,w:"100%",h:"100%",display:0===d.length?"none":void 0,tabIndex:-1,_focusVisible:{outline:"none"},children:(0,r.jsx)(ni,{items:d,isFiltered:u,onSelectItem:C,onMouseMove:h,inputValue:o,focusedIndex:m,interactionRef:f,isScrollingRef:k})})]})});nd.displayName="PageAwareLinkComboBox";var nc=n(27287),nu=n(69465);let np=e=>{let{site:t}=e;return{linkablePages:null==t?void 0:t.routes.map(e=>{var t;return{docId:e.docId,title:null===(t=e.doc)||void 0===t?void 0:t.title}})}},nh=e=>{let{href:t,linkablePages:n}=e;if(!t)return null;let i=(0,nu.jM)(t);if(!i)return{href:t};let{docId:r,cardId:o}=i;return{...r&&(null==n?void 0:n.find(e=>e.docId===r))||null,href:t,cardId:o}},nm=e=>{let{href:t}=e,n=(0,H.CG)(nc.lH);return(0,c.useMemo)(()=>{let{linkablePages:e}=np({site:n}),i=nh({href:t,linkablePages:e}),r=(null==i?void 0:i.docId)&&(null==n?void 0:n.id)&&(0,e0.yQ)({docId:null==i?void 0:i.docId})||t,o=null==e?void 0:e.some(e=>e.docId===(null==i?void 0:i.docId));return{linkablePages:e,existingLink:i,newTabUrl:r,isPageLink:o}},[t,n])},ng=e=>{var t;let{href:n,inputValue:i,setInputValue:s,setHref:d,clearHref:u,inputRef:p,onCloseFocusRef:h}=e,m=(0,H.CG)(eu.ke),g=(0,H.CG)(t9.mT),{existingLink:f,linkablePages:x}=nm({href:n}),v=(0,c.useMemo)(()=>[...(x||[]).map(e=>({type:"page",docId:e.docId,title:e.title})),...g.map(e=>({type:"card",cardId:e.id,title:e.title}))],[x,g]),y=null==f?void 0:f.title,b=null!==(t=null==f?void 0:f.cardId)&&void 0!==t?t:void 0,{title:w}=(0,t6.T)({cardId:b}),C=(0,c.useCallback)(e=>{var t;e&&(d("url"===e.type?e.value:"page"===e.type?(0,e0.Gn)({docId:e.docId,docTitle:e.title,absolute:!0}):(0,e0.gq)({cardId:e.cardId,docId:m})),null==h||null===(t=h.current)||void 0===t||t.focus({preventScroll:!0}))},[m,d,h]),k=(null==f?void 0:f.href)&&!f.docId;if(!f||k)return(0,r.jsx)(nd,{items:v,inputValue:i,setInputValue:s,inputRef:p,onSelect:C,onRevert:()=>{var e;s(n),null==h||null===(e=h.current)||void 0===e||e.focus()}});{let e=b?w||(0,r.jsx)(E.cC,{id:"gLDJuJ"}):y||(0,r.jsx)(E.cC,{id:"kveQAJ"});return(0,r.jsx)(a.U,{spacing:1,children:(0,r.jsx)(t8.Vp,{pr:1,children:(0,r.jsxs)(a.U,{spacing:1,children:[(0,r.jsx)(L.G,{icon:b?j.lCX:j.gMD}),(0,r.jsx)(l.kH,{label:e,placement:"top",children:(0,r.jsx)(o.xu,{noOfLines:1,children:e})}),u&&(0,r.jsx)(l.kH,{label:(0,r.jsx)(E.cC,{id:"484LKL"}),placement:"top",children:(0,r.jsx)(e2.h,{size:"xs",minHeight:4,height:4,variant:"ghost","aria-label":A.ag._({id:"484LKL"}),icon:(0,r.jsx)(L.G,{icon:j.YIN}),onMouseDown:N.br,onClick:()=>{u(),s("")}})})]})})})}},nf="link-input-invalid-url",nx=e=>{let{editor:t,href:n,updateHref:i,clearHref:a,removeLink:s,isEmbedLink:d=!1}=e,[u,p]=(0,c.useState)(n),h=(0,c.useRef)(null),m=(0,c.useRef)(null),g=(0,eI.p)(),f=u!==n,x=!!(t.multipageEnabled||t.isSiteNavbarEditor),v=(0,H.CG)(eu.xb),y=(0,et.NC)(n,v),{newTabUrl:b}=nm({href:n});(0,c.useEffect)(()=>{p(n)},[n]),(0,c.useEffect)(()=>{!n&&h.current&&setTimeout(()=>{var e;null==h||null===(e=h.current)||void 0===e||e.focus()})},[n]);let w=(0,c.useCallback)(e=>{if(!e)return;let t=e;if(d){let n=(0,t7.QW)(e);n&&(t=n)}if(t=(0,ep.kr)(t)||(0,O.H7)(t)?t:"https://"+t,!(0,ep.jv)(t)){i(""),g.isActive(nf)||g({id:nf,title:(0,r.jsx)(E.cC,{id:"sBZMWb"}),description:(0,r.jsx)(E.cC,{id:"jEw0Mr"}),status:"error",position:"top",duration:3e3,isClosable:!0});return}i(t),p(t)},[d,g,i]),C=(0,c.useCallback)(e=>{if(y){let i=(0,et.g)(n);(0,P.l)(t,e,i)}else try{window.open(b,"_blank")}catch(e){console.error("(caught) LinkInput2 error going to URL",e)}},[y,t,n,b]);return(0,r.jsxs)($.k,{gap:2,justify:"space-between",alignItems:"center",children:[x&&!d?(0,r.jsxs)($.k,{flex:1,children:[(0,r.jsx)(ng,{href:n,inputValue:u,setInputValue:p,setHref:w,clearHref:a,inputRef:h,onCloseFocusRef:m}),(0,r.jsx)(o.xu,{w:"0",h:"0",ref:m,tabIndex:-1})]}):(0,r.jsxs)(t3.B,{children:[(0,r.jsx)(R.I,{"data-testid":"link-input",ref:h,value:u,placeholder:A.ag._({id:"Ilf1mg"}),onChange:e=>{p(e.target.value)},onKeyUp:e=>{"Enter"===e.key&&(e.preventDefault(),w(u),t.commands.focus())},size:"sm"}),u.length>0&&f&&(0,r.jsx)(t5.x,{top:"50%",transform:"translateY(-50%)",children:(0,r.jsx)(l.kH,{placement:"top",label:(0,r.jsx)(E.cC,{id:"tfDRzk"}),children:(0,r.jsx)(e2.h,{"aria-label":A.ag._({id:"tfDRzk"}),variant:"ghost",size:"xs",onClick:()=>{w(u)},icon:(0,r.jsx)(L.G,{icon:j.LEp})})})})]}),(0,r.jsxs)(em.h,{spacing:1,size:"sm",onMouseDown:N.br,children:[s&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"484LKL"}),icon:j.AE2,onClick:s,my:0}),n&&(0,r.jsx)(M.h,{label:y?(0,r.jsx)(E.cC,{id:"088Oxr"}):(0,r.jsx)(E.cC,{id:"fOj0+R"}),icon:y?j.eFW:j.gJF,onClick:C,my:0})]})]})};var nv=n(25481);let ny=e=>{let{buttonList:t}=e,n=t.filter(e=>!e.isHidden),i=1===n.length,a=n.length<=5?5:4,s=n.slice(0,a),d=n.slice(a,n.length);return(0,r.jsxs)(em.h,{size:"sm",width:"100%",children:[s.map(e=>{let{key:t,label:n,ariaLabel:a,action:s,icon:d,customIcon:c,isDisabled:u=!1,isLoading:p=!1}=e;return d||c?(0,r.jsx)(l.kH,{label:n,placement:"top",children:(0,r.jsx)(o.xu,{flex:i?void 0:1,width:i?"33%":void 0,tabIndex:u?-1:void 0,children:(0,r.jsx)(e2.h,{"aria-label":a,icon:c||(0,r.jsx)(L.G,{icon:d,fixedWidth:!0}),onClick:s,w:"100%",isDisabled:u,isLoading:p,onMouseDown:N.br,shadow:"none"})})},t):null}),!!d.length&&(0,r.jsxs)(W.v,{children:[(0,r.jsx)(l.kH,{placement:"top",label:(0,r.jsx)(E.cC,{id:"3Siwmw"}),children:(0,r.jsx)(F.j,{as:e2.h,"aria-label":A.ag._({id:"3Siwmw"}),icon:(0,r.jsx)(L.G,{icon:j.S6C,fixedWidth:!0}),flex:1,shadow:"none"})}),(0,r.jsx)(B.q,{children:d.map(e=>{let{key:t,label:n,action:i,icon:o,customIcon:a}=e;return(0,r.jsx)(nv.s,{icon:a||o&&(0,r.jsx)(L.G,{icon:o,fixedWidth:!0}),onClick:i,children:n},t)})})]})]})},nb=()=>({inset:{title:A.ag._({id:"Jn5DbR"})},circle:{title:A.ag._({id:"7xMmki"})}}),nw=e=>{let{clipType:t,onChange:n}=e;return t?(0,r.jsxs)(t1.Lt,{children:[(0,r.jsx)(t1.PS,{size:"sm",borderRadius:"full",minWidth:"105px",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),variant:"toolbar",pl:2,onMouseDown:N.br,children:nb()[t].title}),(0,r.jsx)(t1.sV,{children:Object.entries(nb()).map(e=>{let[i,{title:a}]=e;return(0,r.jsx)(t1.hP,{value:i,fontSize:"sm",fontWeight:600,icon:(0,r.jsx)(o.xu,{visibility:i===t?"visible":"hidden",children:(0,r.jsx)(L.G,{icon:j.LEp})}),onMouseDown:N.br,onClick:()=>{n(i)},children:(0,r.jsx)(X.x,{children:a})},i)})})]}):null},nC={expand:j.q9v,newTab:j.wlW,none:j.Hpf};var nk=n(97793),nj=n(95216);let nS=e=>{let{editor:t,selection:n,handleDuplicate:i}=e,o=(0,c.useCallback)(()=>{t.chain().insertContentAt(n.from+n.node.nodeSize,n.node.toJSON()).selectInsertedNode().run()},[t,n]);return(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"euc6Ns"}),icon:j.WM4,onClick:i||o,testId:"duplicate-node-button"})},nA=e=>{let{editor:t,label:n,icon:i}=e;return(0,r.jsx)(M.h,{label:n,onClick:()=>{t.chain().selectParentNode().run()},children:i?(0,r.jsx)(L.G,{icon:i}):(0,r.jsx)(L.G,{icon:j.pQN,flip:"horizontal"})})};var nI={src:"/_next/static/media/layout-3-cols.478d87d6.svg",height:25,width:20,blurWidth:0,blurHeight:0},nz={src:"/_next/static/media/layout-30-70.019e8aa0.svg",height:25,width:20,blurWidth:0,blurHeight:0},nL={src:"/_next/static/media/layout-4-cols.bc7869e3.svg",height:25,width:20,blurWidth:0,blurHeight:0},nE={src:"/_next/static/media/layout-50-50.a28ea4d4.svg",height:25,width:20,blurWidth:0,blurHeight:0},nN={src:"/_next/static/media/layout-70-30.abcf64e9.svg",height:25,width:20,blurWidth:0,blurHeight:0};let nM=()=>[{name:A.ag._({id:"oCWIE5"}),testId:"layout-preset-5050",image:nE,value:[50,50]},{name:A.ag._({id:"eWUI4Z"}),testId:"layout-preset-7030",image:nN,value:[70,30]},{name:A.ag._({id:"hOcihM"}),testId:"layout-preset-3070",image:nz,value:[30,70]},{name:A.ag._({id:"OnuuaA"}),testId:"layout-preset-3col",image:nI,value:[33.33,33.33,33.34]},{name:A.ag._({id:"hexbw8"}),testId:"layout-preset-4col",image:nL,value:[25,25,25,25]}];var n_=n(51499),nT=n(43273);let nR=()=>({link:{title:(0,r.jsx)(E.cC,{id:"yzF66j"})},button:{title:(0,r.jsx)(E.cC,{id:"hxBFty"})},preview:{title:(0,r.jsx)(E.cC,{id:"rdUucN"})},inline:{title:(0,r.jsx)(E.cC,{id:"KKBlUU"})}}),nH=e=>{let{editor:t,selection:n,isDisabled:i}=e,o=(0,s.Kk)(e=>"button"===e.type.name)(n),a=n instanceof d.Bs?o?"button":"link":n.node.type.name,l="link"===a,u="button"===a,p=t.getAttributes(a),h=u?"button":l?"link":"displayStyle"in p&&p.displayStyle||"inline",m=(0,c.useCallback)(e=>{if(a===e)return;let n="inline"===e||"preview"===e;switch(a){case"link":n?t.commands.convertLinkToMedia(e):"button"===e&&t.commands.convertLinkToButton();break;case"button":"link"===e?t.commands.convertButtonToLink():n&&t.commands.convertButtonToMedia(e);break;default:"link"===e?t.commands.convertMediaToLink():"button"===e?t.commands.convertMediaToButton():t.commands.updateAttributes(a,{displayStyle:e})}},[t,a]),g=nR();return(0,r.jsxs)(W.v,{closeOnSelect:!0,isLazy:!0,autoSelect:!1,children:[(0,r.jsx)(F.j,{as:z.z,"data-testid":"display-style-dropdown",isDisabled:i,size:"sm",rightIcon:(0,r.jsx)(L.G,{fixedWidth:!0,icon:j.ptq,transform:"shrink-6"}),boxShadow:"none",onMouseDown:N.br,children:g[h].title}),(0,r.jsx)(B.q,{zIndex:2,children:(0,r.jsx)(eg._,{type:"radio",onChange:m,value:h,children:Object.entries(g).map(e=>{let[t,{title:n}]=e;return(0,r.jsx)(ef.i,{value:t,onMouseDown:N.br,"data-testid":"display-style-option-".concat(t),children:(0,r.jsx)(X.x,{children:n})},t)})})})]})},nP=e=>{let{editor:t,selection:n}=e,{href:i}=t.getAttributes("button"),{isPageLink:o}=nm({href:i}),a=(0,H.CG)(eu.Pu),l=(0,ty.xe)(a),s=(0,ty.H_)(l),u=(0,n_.HC)(l),p=t.getAttributes("button").color,h=n.$from.node(-1),m=nT.e6[h.type.name],g=(0,nT.Y0)().filter(e=>m.variants.includes(e.key)),f=(0,c.useCallback)(()=>t.commands.handleButtonDelete(!1),[t]),x=(0,c.useCallback)(e=>{t.commands.updateAttributes("button",{color:e})},[t]);return(0,r.jsxs)(tA,{overflow:"hidden",children:[m.linkDropdownEnabled&&i&&(n instanceof d.Bs||n instanceof d.qv)&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"/SVg/B"}),icon:j.Lc0,children:(0,r.jsx)(nH,{editor:t,selection:n,isDisabled:o})}),(0,r.jsx)(nx,{href:i||"",updateHref:e=>{t.commands.updateAttributes("button",{href:e})},clearHref:()=>{t.commands.updateAttributes("button",{href:""})},editor:t}),g.length>=2&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"1CalO6"}),icon:j.r9b,children:(0,r.jsx)(em.h,{spacing:1,size:"sm",onMouseDown:N.br,children:g.map(e=>{let{name:n,icon:i,key:o}=e;return(0,r.jsx)(M.h,{label:n,icon:i,onClick:()=>{t.commands.updateAttributes("button",{variant:o})},isActive:t.isActive("button",{variant:o}),my:0},n)})})}),m.alignEnabled&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"0j+RGO"}),icon:j.elf,children:(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,children:I.Ec.map(e=>{let{name:n,icon:i,checkActive:o,apply:a}=e;if(o&&a)return(0,r.jsx)(M.h,{label:n(),icon:i,onClick:()=>{a(t)},isActive:o(t),my:0},n())})})}),m.colorEnabled&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"jZlrte"}),icon:j.re8,children:(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,children:(0,r.jsxs)(W.v,{isLazy:!0,children:[(0,r.jsx)(J.t,{color:p||s,isDefaultColor:null===p||p===s}),(0,r.jsx)(B.q,{overflow:"hidden",children:(0,r.jsx)(ee.M,{currentColor:p||(u?null:s),setColor:x,source:"ButtonColor"})})]})})}),(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,onClick:f,colorScheme:"red"})]})};var nO=n(48915);let nD="embed-formatting-invalid-error",nW=e=>{let{existingLink:t,handleRemoveClick:n}=e,i=(null==t?void 0:t.href)&&!t.docId,{title:s,href:d,cardId:c}=t,u=(0,t6.c)(c);return i?(0,r.jsx)(a.U,{spacing:2,children:(0,r.jsxs)(t3.B,{size:"sm",children:[(0,r.jsx)(R.I,{size:"sm",isReadOnly:!0,value:d}),(0,r.jsx)(t5.x,{children:(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"/PoNoq"}),icon:j.Xcf,onClick:()=>n("url")})})]})}):(0,r.jsx)(a.U,{spacing:1,children:(0,r.jsx)(t8.Vp,{children:(0,r.jsxs)(a.U,{spacing:1,children:[(0,r.jsx)(L.G,{icon:c?j.lCX:j.gMD}),(0,r.jsx)(l.kH,{label:c?null==u?void 0:u.title:s,placement:"top",children:(0,r.jsx)(o.xu,{noOfLines:1,children:c?null==u?void 0:u.title:s})}),(0,r.jsx)(l.kH,{label:A.ag._({id:"/PoNoq"}),placement:"top",children:(0,r.jsx)(e2.h,{size:"xxs",variant:"ghost","aria-label":A.ag._({id:"/PoNoq"}),icon:(0,r.jsx)(L.G,{icon:j.Xcf}),onClick:()=>n(c?"cards":"pages")})})]})})})},nF=e=>{let{title:t,url:n,updateHref:i,icon:o,fallbackTitle:a}=e;return(0,r.jsx)(l.kH,{label:t,placement:"top",children:(0,r.jsx)(z.z,{w:"100%",onClick:()=>{i(n)},variant:"ghost",colorScheme:"gray",fontWeight:"500",px:2,size:"sm",justifyContent:"flex-start",leftIcon:(0,r.jsx)(L.G,{icon:o}),children:(0,r.jsx)(X.x,{textAlign:"left",w:"100%",noOfLines:1,display:"inline",children:t||a})},n)})},nB=e=>{let{title:t,docId:n,updateHref:i}=e,o=(0,e0.Gn)({docId:n,docTitle:t,absolute:!0});return(0,r.jsx)(nF,{title:t,url:o,updateHref:i,icon:j.gMD,fallbackTitle:(0,r.jsx)(E.cC,{id:"kveQAJ"})})},nG=e=>{let{items:t,updateHref:n}=e,[i]=(0,c.useState)(""),o=(0,c.useRef)(null),a=t.filter(e=>{var t;return null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase())});return(0,c.useEffect)(()=>{var e;(null==o?void 0:o.current)&&(null==o||null===(e=o.current)||void 0===e||e.focus())},[]),(0,r.jsxs)(Y.K,{mx:-4,children:[(0,r.jsx)(X.x,{color:"gray.500",fontSize:"sm",fontWeight:"600",children:(0,r.jsx)(E.cC,{id:"QIUdjp"})}),(0,r.jsx)(Y.K,{spacing:0,children:a.map(e=>(0,r.jsx)(nB,{updateHref:n,title:e.title,docId:e.docId},e.docId))})]})},nU=e=>{let{updateHref:t,title:n,cardId:i}=e,o=(0,H.CG)(eu.ke),a=(0,e0.gq)({cardId:i,docId:o});return(0,r.jsx)(nF,{title:n,url:a,updateHref:t,icon:j.lCX,fallbackTitle:(0,r.jsx)(E.cC,{id:"gLDJuJ"})})},nV=e=>{let{items:t,updateHref:n}=e,i=(0,c.useRef)(null);return(0,c.useEffect)(()=>{var e;(null==i?void 0:i.current)&&(null==i||null===(e=i.current)||void 0===e||e.focus())},[]),(0,r.jsxs)(Y.K,{mx:-4,children:[(0,r.jsx)(X.x,{color:"gray.500",fontSize:"sm",fontWeight:"600",children:(0,r.jsx)(E.cC,{id:"L8qw04"})}),(0,r.jsx)(Y.K,{spacing:0,children:null==t?void 0:t.map(e=>(0,r.jsx)(nU,{updateHref:n,title:e.title,cardId:e.id},e.id))})]})},nq=e=>{let{updateHref:t,initialHref:n}=e,i=(0,c.useRef)(null),[o,a]=(0,c.useState)(!1),[l,s]=(0,c.useState)(n||""),d=e=>{if(!e)return;let n=(0,ep.kr)(e)||(0,O.H7)(e)?e:"http://"+e;(0,ep.jv)(n)&&t(n)};return(0,c.useEffect)(()=>{var e;(null==i?void 0:i.current)&&(null==i||null===(e=i.current)||void 0===e||e.focus())},[]),(0,r.jsxs)(Y.K,{mx:-2,children:[(0,r.jsxs)(t3.B,{size:"sm",children:[(0,r.jsx)(R.I,{ref:i,size:"sm",value:l,placeholder:"Paste a link and hit enter",onChange:e=>{s(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&l.trim().length>0&&(e.preventDefault(),d(l))},onFocus:()=>a(!0),onBlur:()=>a(!1)}),l.length>0&&(0,r.jsx)(t5.x,{bottom:0,top:"auto",children:(0,r.jsx)(e2.h,{"aria-label":A.ag._({id:"hQRttt"}),variant:"ghost",size:"xs",onClick:()=>d(l),icon:(0,r.jsx)(L.G,{icon:j.LEp})})})]}),l.length>0&&o&&(0,r.jsx)(X.x,{w:"100%",fontSize:"xxs",color:"gray.500",children:(0,r.jsx)(E.cC,{id:"j6RzX0"})})]})},nK=e=>{let{updateHref:t,initialTab:n,initialHref:i}=e,{linkablePages:a}=np({site:(0,H.CG)(nc.lH)}),l=(0,H.CG)(t9.mT),s=(null==a?void 0:a.length)&&a.length>0;return(0,r.jsx)(o.xu,{children:(0,r.jsxs)(G.m,{size:"sm",variant:"soft-rounded",isFitted:!0,colorScheme:"trueblue",defaultIndex:"pages"===n?0:"url"===n?1:2,children:[(0,r.jsxs)(U.t,{children:[s&&(0,r.jsx)(V.O,{children:(0,r.jsx)(E.cC,{id:"wRR604"})}),(0,r.jsx)(V.O,{children:(0,r.jsx)(E.cC,{id:"IagCbF"})}),(0,r.jsx)(V.O,{children:(0,r.jsx)(E.cC,{id:"Ccpbzh"})})]}),(0,r.jsxs)(q.n,{children:[s&&(0,r.jsx)(K.x,{maxH:"min(300px, 50vh)",overflowY:"auto",children:(0,r.jsx)(nG,{items:a,updateHref:t})}),(0,r.jsx)(K.x,{maxH:"min(300px, 50vh)",overflowY:"auto",children:(0,r.jsx)(nq,{updateHref:t,initialHref:i})}),(0,r.jsx)(K.x,{maxH:"min(300px, 50vh)",overflowY:"auto",children:(0,r.jsx)(nV,{items:l,updateHref:t})})]})]})})},nY=e=>{let{editor:t,selection:n}=e,i=(0,H.CG)(nc.lH),{linkablePages:o}=np({site:i}),[l,d]=(0,c.useState)("pages"),[u,p]=(0,c.useState)(null),h=t.getAttributes("button").href||"",m=(0,c.useCallback)(()=>t.commands.handleButtonDelete(!1),[t]),g=n.$from.node(-1),f=nT.e6[g.type.name],x=(0,nT.Y0)().filter(e=>f.variants.includes(e.key)),v=nh({href:h,linkablePages:o}),y=(null==v?void 0:v.docId)&&(null==i?void 0:i.id)&&(0,e0.yQ)({docId:null==v?void 0:v.docId})||h;return(0,r.jsxs)(Y.K,{w:v?void 0:"320px",minW:"min(80vw, 320px)",maxW:"50vw",maxH:"max(30vh, 400px)",children:[(0,r.jsxs)(a.U,{justify:"space-between",pt:1,borderBottomWidth:v?0:1,mx:-2,px:2,children:[x.length>=2&&x.map(e=>{let{name:n,icon:i,key:o}=e;return(0,r.jsx)(M.h,{label:n,icon:i,onClick:()=>{t.commands.updateAttributes("button",{variant:o})},isActive:t.isActive("button",{variant:o})},n)}),f.alignEnabled&&I.Ec.map(e=>{let{name:n,icon:i,checkActive:o,apply:a}=e;if(o&&a)return(0,r.jsx)(M.h,{label:n(),icon:i,onClick:()=>{a(t)},isActive:o(t)},n())}),v&&(0,r.jsx)(nW,{existingLink:v,handleRemoveClick:e=>{if(d(e),"url"===e&&p(h),t.chain().updateAttributes("button",{href:null}).run(),(0,s.Kk)(e=>"navbarLinks"===e.type.name||"navbarButtons"===e.type.name)(n)){let e=(0,s.Kk)(e=>"button"===e.type.name)(n);e&&t.commands.selectNodeAtPos(e.start+1)}}}),(0,r.jsx)(tM.L,{}),v&&!v.cardId&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"Ky3sBN"}),icon:j.Xjp,onClick:()=>window.open(y,"_blank")}),(0,r.jsx)(_,{editor:t,handleDelete:m})]}),!v&&(0,r.jsx)(nK,{updateHref:e=>{if(t.chain().updateAttributes("button",{href:e}).run(),(0,s.Kk)(e=>"navbarLinks"===e.type.name||"navbarButtons"===e.type.name)(n)){let e=(0,s.Kk)(e=>"button"===e.type.name)(n);e&&t.commands.selectNodeAtPos(e.start+1)}},initialTab:l,initialHref:u})]})};var nX=n(7553),n$=n(97925),nZ=n(67221),nQ=n(1338),nJ=n(23345),n0=n(96236),n1=n(38636),n2=n(43988),n4=n(39198),n3=n(88371),n5=n(82807);(i||(i={})).enabledForTables="enabledForTables";let n7=[[{key:"textColor",name:()=>A.ag._({id:"MapzEo"}),icon:j.yGG,shortcut:"Mod+Shift+H",enabledForTables:!0,checkDisabled:n2.$v}],[{key:"bold",name:()=>A.ag._({id:"KmydK6"}),mark:"bold",icon:S.c_t,shortcut:"Mod+B",enabledForTables:!0},{key:"italic",name:()=>A.ag._({id:"pzutoc"}),mark:"italic",icon:j.cJz,shortcut:"Mod+I",enabledForTables:!0},{key:"underline",name:()=>A.ag._({id:"YyXtnN"}),mark:"underline",icon:j.jmw,shortcut:"Mod+U",enabledForTables:!0},{key:"strike",name:()=>A.ag._({id:"WhOsNE"}),mark:"strike",icon:j.b$N,shortcut:"Mod+Shift+X"},{key:"code",name:()=>A.ag._({id:"EWPtMO"}),mark:"code",icon:j.dT$,shortcut:"Mod+E"},{key:"math",name:()=>A.ag._({id:"l8rp1O"}),apply:e=>e.commands.convertToMathInline(),icon:j.eDD,featureFlag:"math",shortcut:"$$",checkDisabled:()=>!0},{key:"removeFormatting",name:()=>A.ag._({id:"bj5jMy"}),icon:j.DvJ,apply:e=>e.chain().unsetAllMarks().focus().run(),enabledForTables:!0}],[{key:"link",name:()=>A.ag._({id:"yzF66j"}),mark:"link",icon:j.nNP,shortcut:"Mod+K"},{key:"footnote",name:()=>A.ag._({id:"ONAJuB"}),icon:j.dkK,apply:e=>{(0,n4.ZT)((0,n4.zm)().footnote,eq.fe.FORMATTING_MENU),e.chain().toggleFootnote().run()},checkActive:e=>e.isActive("footnoteLabel"),shortcut:"Mod+Alt+F",checkDisabled:e=>(0,ex.M)(e)||!(0,et.P3)(e,"footnote")||(0,n2.$v)(e)}],[{key:"numbered",name:()=>A.ag._({id:"M3G9ZD"}),icon:j.nFo,node:"numbered",checkActive:e=>(0,n3.S3)(e,n5.W.Numbered),shortcut:"Mod+/ or Mod+Shift+7",apply:e=>e.chain().toggleListItems({variant:n5.W.Numbered}).focus().run()},{key:"bullet",name:()=>A.ag._({id:"ynb7Kh"}),icon:j.gf$,node:"bullet",checkActive:e=>(0,n3.S3)(e,n5.W.Bullet),apply:e=>e.chain().toggleListItems({variant:n5.W.Bullet}).focus().run(),shortcut:"Mod+. or Mod+Shift+8"},{key:"todo",name:()=>A.ag._({id:"rCIbrq"}),icon:j.A8,node:"todo",checkActive:e=>(0,n3.S3)(e,n5.W.Todo),shortcut:"Mod+, or Mod+Shift+9",apply:e=>{let{from:t,to:n}=e.state.selection;e.chain().toggleListItems({variant:n5.W.Todo}).run(),requestAnimationFrame(()=>e.chain().focus().setTextSelection({from:t,to:n}).run())}}],[{key:"alignText",name:()=>A.ag._({id:"6Hkcin"}),icon:j.elf}],[{key:"convertText",name:()=>A.ag._({id:"cXIM1U"}),checkDisabled:e=>!!e.shouldUseLiteMenus,icon:j.jHE},{key:"rewriteText",name:()=>A.ag._({id:"C4t1b/"}),icon:S.JyM,checkDisabled:e=>!!e.shouldUseLiteMenus,featureFlag:"aiRewrite"}],[{key:"comment",name:()=>A.ag._({id:"oFsfkI"}),icon:j.Mzg,checkDisabled:e=>(0,ex.M)(e)||(0,n2.$v)(e)||!!e.shouldUseLiteMenus,apply:e=>{let{selection:t}=e.state,{from:n,to:i}=t,[r]=(0,et.nv)(e.state.doc.resolve(n),(e,t)=>(0,n1.ZM)(t));if(!r){console.warn("[TEXT_FORMATTING_COMMANDS] Add comment - Unable to find annotatable parent for this selection");return}let o=(0,et.E8)(e.state.doc,n,i,e=>"footnote"!==e.type.name&&"cardNotes"!==e.type.name,"__BLOCK_SEPARATOR_PLACEHOLDER").split("__BLOCK_SEPARATOR_PLACEHOLDER").join("<br /><br />");eY.pw.emit(eY.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:n,parentPos:r.pos,text:o})}}]],n8=(e,t)=>{var n;return!!(t.featureFlag&&!e_.VH.get(t.featureFlag)||(null===(n=t.checkDisabled)||void 0===n?void 0:n.call(t,e)))||(t.node?!(0,et.$E)(e,t.node):!!t.mark&&!(0,et.by)(e,t.mark))};var n6=n(332);let n9=e=>{let{editor:t,testId:n,disabled:i,icon:o,label:a}=e;return((0,eI.p)(),I.Ec.length)?(0,r.jsxs)(W.v,{isLazy:!0,onClose:()=>(0,er.L)(t),children:[(0,r.jsx)(l.kH,{placement:"top",label:a,children:(0,r.jsx)(F.j,{isDisabled:i,as:z.z,variant:"toolbar","data-testid":n,onMouseDown:N.br,rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),children:o&&(0,r.jsx)(L.G,{icon:o})})}),(0,r.jsx)(n6.h,{children:(0,r.jsx)(B.q,{minW:"auto",zIndex:"modalPopover",children:(()=>{let e=I.Ec.some(e=>{var n;return null===(n=e.checkActive)||void 0===n?void 0:n.call(e,t)});return I.Ec.length&&I.Ec.map(n=>{let{key:i,name:o,shortcut:a,icon:l,checkActive:s,apply:d}=n,c=null==s?void 0:s(t);return e||"alignLeft"!==i||(c=!0),(0,r.jsx)(M.h,{icon:l,label:o(),onClick:()=>null==d?void 0:d(t),isActive:c,testId:i,shortcut:a},i)})})()})})]}):null};var ie=n(69024),it=n(21860),ii=n(23096);let ir=()=>({list:{label:A.ag._({id:"Ci8I/9"})},wrap:{label:A.ag._({id:"T4+jD7"})}}),io=()=>{let e=(0,n4.zm)();return[{key:"toggle",name:()=>A.ag._({id:"JFciKP"}),icon:j.zc,node:"toggle",description:()=>A.ag._({id:"rhfAX6"}),apply:t=>{(0,n4.ZT)(e.toggle,eq.fe.FORMATTING_MENU),t.chain().wrapWithToggle().run()},group:"wrap"},{key:"convertToNestedCard",name:()=>A.ag._({id:"lOmsEK"}),node:"card",description:()=>A.ag._({id:"gRMoQV"}),icon:j.uFC,apply:t=>{(0,n4.ZT)(e.insertCardInside,eq.fe.FORMATTING_MENU),t.chain().convertToNestedCard().run()},checkDisabled:e=>!e.schema.nodes.card||!(0,et.P3)(e,"card"),group:"wrap"},{key:"blockquote",name:()=>A.ag._({id:"OLMhPm"}),node:"blockquote",description:()=>A.ag._({id:"2yuhT7"}),icon:j.vV6,shortcut:"> Quote",apply:e=>e.chain().wrapWithAnnotations("blockquote").run(),checkDisabled:e=>!(0,et.P3)(e,"blockquote"),group:"wrap"},{key:"calloutBox",name:()=>A.ag._({id:"1E4ojF"}),node:"calloutBox",description:()=>A.ag._({id:"4Wf98Z"}),icon:j.sqG,apply:e=>e.chain().wrapWithAnnotations("calloutBox",{variant:"info"}).run(),checkDisabled:e=>!(0,et.P3)(e,"calloutBox"),group:"wrap"},{key:"listToCards",name:()=>A.ag._({id:"FJ18tL"}),icon:j.s2,description:()=>A.ag._({id:"hWesxP"}),group:"list",apply:e=>e.commands.listToCards(),checkDisabled:e=>!(0,it.Ah)(e)},...(0,ii.Ne)()]},ia=e=>{let{editor:t,testId:n,disabled:i,icon:o,label:a}=e,s=io().filter(e=>e.apply&&!n8(t,e));return 0===s.length?null:(0,r.jsxs)(W.v,{isLazy:!0,onClose:()=>(0,er.L)(t),children:[(0,r.jsx)(l.kH,{placement:"top",label:a,children:(0,r.jsx)(F.j,{isDisabled:i,as:z.z,variant:"toolbar","data-testid":n,onMouseDown:N.br,rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),children:o&&(0,r.jsx)(L.G,{icon:o})})}),(0,r.jsx)(n6.h,{children:(0,r.jsx)(B.q,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"400px",children:Object.entries(ir()).map(e=>{let[n,{label:i}]=e,o=s.filter(e=>e.group===n);return 0===o.length?null:(0,r.jsx)(ie.k,{title:i,children:o.map(e=>{let{key:n,icon:i,name:o,description:a,apply:l}=e;return(0,r.jsxs)(nv.s,{value:n,icon:(0,r.jsx)(L.G,{icon:i,fixedWidth:!0}),onClick:()=>l(t),"data-testid":"text-convert-menu-".concat(n),children:[(0,r.jsx)(X.x,{children:o()}),a&&(0,r.jsx)(X.x,{color:"gray.400",fontSize:"sm",children:a()})]},n)})},n)})})})]})};var il=n(3440),is=n.n(il);let id=()=>({rephrase:{label:A.ag._({id:"bKWhYP"})},visualize:{label:A.ag._({id:"6n7jtr"})},reformat:{label:A.ag._({id:"ILEG4I"})}}),ic=[{key:"rephrase.better",type:"rephrase",name:()=>A.ag._({id:"zD3xDw"}),icon:j.Sab,featureFlag:"aiRewrite",description:()=>A.ag._({id:"YePdJg"}),apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"8nKskd"})})}},{key:"rephrase.expand",type:"rephrase",name:()=>A.ag._({id:"K1q3tl"}),icon:j.eEm,description:()=>A.ag._({id:"Y2Kk1Q"}),apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"HyVgOT"})})},featureFlag:"aiRewrite"},{key:"rephrase.condense",type:"rephrase",name:()=>A.ag._({id:"rqoYwb"}),icon:j.G_A,description:()=>A.ag._({id:"+ZW8bU"}),apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"70o6lh"})})},featureFlag:"aiRewrite"},{key:"visualize.keypoints",type:"visualize",name:()=>A.ag._({id:"n+v3I1"}),description:()=>A.ag._({id:"E9axcX"}),icon:j.oJX,node:"smartLayout",apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"bXgpVx"})})}},{key:"visualize.images",type:"visualize",name:()=>A.ag._({id:"laUyeH"}),description:()=>A.ag._({id:"ADlAam"}),icon:j.l9f,apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"p2oHY3"})})}},{key:"visualize.timeline",type:"visualize",name:()=>A.ag._({id:"Oh+9k8"}),description:()=>A.ag._({id:"Qx1qQH"}),icon:j.cp3,apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"4ReFRy"})})}},{key:"reformat.columns",type:"reformat",name:()=>A.ag._({id:"KyPPwt"}),description:()=>A.ag._({id:"52Y/fs"}),icon:j.jNR,node:"gridLayout",apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"Y0UR8y"})})}},{key:"reformat.table",type:"reformat",name:()=>A.ag._({id:"84sVti"}),description:()=>A.ag._({id:"CxvNve"}),icon:j.B3e,node:"table",apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"rU0fs4"})})}},{key:"reformat.toggles",type:"reformat",name:()=>A.ag._({id:"aRUmvo"}),icon:j.SG6,node:"toggle",description:()=>A.ag._({id:"914Ln8"}),apply:()=>{eY.pw.emit("queueDesignPartnerTask",{message:A.ag._({id:"rivjMe"})})}}],iu=()=>Object.entries(is()(ic,"type")),ip=e=>{let{editor:t,testId:n,disabled:i,icon:o,label:a}=e,s=(0,eI.p)();return(0,r.jsxs)(W.v,{isLazy:!0,onClose:()=>(0,er.L)(t),children:[(0,r.jsx)(l.kH,{placement:"top",label:a,children:(0,r.jsx)(F.j,{isDisabled:i,as:z.z,variant:"toolbar","data-testid":n,onMouseDown:N.br,color:"trueblue.500",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),children:o&&(0,r.jsx)(L.G,{icon:o})})}),(0,r.jsx)(n6.h,{children:(0,r.jsx)(B.q,{maxH:"min(25em, 45vh)",overflowY:"auto",maxW:"450px",children:iu().map(e=>{let[n,i]=e,{label:o,featureFlag:a}=id()[n];if(a&&!e_.VH.get(a))return;let l=i.map(e=>{if(!(!e.apply||n8(t,e)))return(0,r.jsxs)(nv.s,{value:e.key,icon:(0,r.jsx)(L.G,{icon:e.icon,fixedWidth:!0}),onClick:()=>ih(e,t,s),children:[(0,r.jsx)(X.x,{children:e.name()}),e.description&&(0,r.jsx)(X.x,{color:"gray.400",fontSize:"sm",children:e.description()})]},e.key)}).filter(Boolean);return l.length?(0,r.jsx)(ie.k,{title:o,children:l},n):null})})})]})},ih=(e,t,n)=>{let{apply:i}=e;if(!i)return;let o=i(t);if(!o)return;let l=n({position:"top",isClosable:!1,duration:null,status:"loading",variant:"subtle",title:(0,r.jsx)(E.cC,{id:"j4ZLea"})});o.then(()=>{n.close(l);let e=n({title:(0,r.jsxs)(a.U,{children:[(0,r.jsxs)(X.x,{noOfLines:1,children:[(0,r.jsx)(E.cC,{id:"hAmdL3"})," "]}),(0,r.jsx)(ez.r,{textDecoration:"underline",onClick:()=>{(0,eL.Yw)(t.state),n.close(e)},children:(0,r.jsx)(E.cC,{id:"9uI/rE"})})]}),status:"success",duration:3e3,position:"top"})}).catch(e=>{n.close(l),n({title:(0,r.jsx)(E.cC,{id:"mTQLsL"}),description:e.message,status:"error",duration:3e3,position:"top"})})};var im=n(27599),ig=n(8e4),ix=n(11048),iv=n(18617),iy=n(20145),ib=n(35275);let iw=(e,t)=>!!t&&(e||!t.startsWith("/")),iC=e=>{let{editor:t}=e,n=(0,H.CG)(eu.Pu),{bodyFont:i,headingFont:o}=n,l=e=>{t.chain().focus().setFontSize(e).run()},{$from:s}=t.state.selection,d=(0,et.$E)(t,"heading")||(0,iy.hY)(s.parent).includes("heading"),u=(0,et.$E)(t,"title")||(0,iy.hY)(s.parent).includes("title"),p=(0,et.$E)(t,"paragraph")||(0,iy.hY)(s.parent).includes("body"),h=(0,c.useCallback)(()=>{n.workspaceId?(0,ix.r3)({theme:n}):(0,ix.S9)({theme:n})},[n]);if(!p&&!d&&!u)return null;let m=(0,iy.Zh)(t),g="default",f=(0,ib.hx)("default");g=t.isActive("title")?(0,ib.KY)(t.getAttributes("title").level)||"default":t.isActive("heading")?(0,ib.K1)(t.getAttributes("heading").level)||"default":1===m.length&&m[0]||"default",f=(0,ib.hx)(g)||f;let x=e=>"".concat(Math.sqrt(e),"em"),v=(0,n2.$v)(t),y=!!t.extensionManager.extensions.find(e=>"slashMenu"===e.name);return(0,r.jsxs)(W.v,{closeOnSelect:!0,isLazy:!0,children:[(0,r.jsx)(F.j,{size:"sm",as:z.z,rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),variant:"toolbar",pl:2,children:f.label}),(0,r.jsxs)(B.q,{maxH:"min(60em, 45vh)",overflowY:"auto",minW:"260px",children:[p&&(0,r.jsx)(eg._,{type:"radio",value:g,children:(0,iv.be)().filter(e=>{let[t]=e;return!(v&&"default"!==t)}).map(e=>{let[t,{label:n,size:o,flagged:s,shortcut:d}]=e,c=iw(y,d);return(0,r.jsx)(ef.i,{value:t,onClick:()=>l(t),children:(0,r.jsxs)(a.U,{children:[(0,r.jsx)(X.x,{fontFamily:i,fontSize:x(o),children:n}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tM.L,{}),(0,r.jsx)(X.x,{color:"gray.400",children:d})]})]})},t)})}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(im.R,{}),(0,r.jsx)(eg._,{type:"radio",value:g,children:(0,iv.B8)().reverse().map(e=>{let[t,{label:n,size:i,shortcut:s}]=e,d=iw(y,s);return(0,r.jsx)(ef.i,{value:t,onClick:()=>l(t),children:(0,r.jsxs)(a.U,{children:[(0,r.jsx)(X.x,{fontSize:x(i),fontWeight:"bold",fontFamily:o,children:n}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tM.L,{}),(0,r.jsx)(X.x,{color:"gray.400",children:s})]})]})},t)})})]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(im.R,{}),(0,r.jsx)(eg._,{type:"radio",value:g,children:(0,iv.Yt)().map(e=>{let[t,{label:n,size:i,shortcut:s}]=e,d=iw(y,s);return(0,r.jsx)(ef.i,{value:t,onClick:()=>l(t),children:(0,r.jsxs)(a.U,{children:[(0,r.jsx)(X.x,{fontSize:x(i),fontWeight:"bold",fontFamily:o,children:n}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tM.L,{}),(0,r.jsx)(X.x,{color:"gray.400",children:s})]})]})},t)})})]}),(0,r.jsx)(ig.d,{label:(0,r.jsx)(E.cC,{id:"gJpKw8"}),leftIcon:(0,r.jsx)(L.G,{icon:j.nUG,fixedWidth:!0}),onClick:h})]})]})},ik=e=>{let{editor:t,filterBy:n}=e,i=()=>{let e=I.Ec.find(e=>e.alignment===(0,I.ZE)(t));return(null==e?void 0:e.icon)||j.elf};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(em.h,{isAttached:!0,onMouseDown:N.br,children:(0,r.jsx)(iC,{editor:t})},"text"),n7.map((e,o)=>(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,_empty:{display:"none"},children:e.filter(e=>{let i=!n8(t,e);return n?i&&e[n]:i}).map(e=>{let{key:n,name:o,shortcut:a,icon:l,mark:s,node:d,checkActive:c,apply:u}=e,p=u||(s?e=>e.chain().toggleMark(s).focus().run():()=>{}),h=c?c(t):s?t.isActive(s):d?t.isActive(d):void 0;return"textColor"===n?(0,r.jsx)(ea,{shortcut:a,icon:l,editor:t},n):"rewriteText"===n?(0,r.jsx)(ip,{editor:t,shortcut:a,icon:l,testId:n,label:o()},n):"convertText"===n?(0,r.jsx)(ia,{editor:t,shortcut:a,icon:l,testId:n,label:o()},n):"alignText"===n?(0,r.jsx)(n9,{editor:t,shortcut:a,icon:i(),testId:n,label:o()},n):(0,r.jsx)(M.h,{label:o(),shortcut:a,isActive:h,onClick:()=>p(t),icon:l,testId:n},n)})},o))]})},ij=e=>{let{editor:t,selection:n}=e,o=n.isRowSelection(),l=n.isColSelection(),c=o&&l,u=(0,s.Kk)(n0.CU)(n);u&&d.qv.create(t.state.doc,null==u?void 0:u.pos);let p=Math.min(n.$anchorCell.pos,n.$headCell.pos),h=Math.max(n.$anchorCell.pos,n.$headCell.pos),{colMinPercent:m,newColSize:g}=t.schema.nodes[nJ.i.name].spec,f=n.getTableNode(),v=(0,nQ.Ux)(f.attrs.colWidths,g,m);return(0,r.jsxs)(a.U,{spacing:1,children:[(0,r.jsx)(ik,{editor:t,filterBy:i.enabledForTables}),(0,r.jsx)(T.w,{}),o&&!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"1ct6G/"}),onClick:()=>{t.commands.addRowBefore(),requestAnimationFrame(()=>{t.commands.focus(p)})},testId:"add-row-before-button",children:(0,r.jsx)(L.G,{icon:j.Mp0})}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"JUmxSq"}),onClick:()=>{t.commands.addRowAfter(),requestAnimationFrame(()=>{t.chain().focus(h).goToNextCell().run()})},testId:"add-row-after-button",children:(0,r.jsx)(L.G,{icon:j.Mp0,rotation:180})}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"0cspe/"}),icon:j.XAH,onClick:()=>t.chain().focus().deleteRow().run(),color:"red.500",testId:"delete-row-button"})]}),l&&!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"mwcRkO"}),onClick:()=>{let{left:e}=(0,x.zN)(t.state.selection);t.commands.addColumnBefore(e),requestAnimationFrame(()=>{t.commands.focus(p)})},isDisabled:!v,testId:"add-col-before-button",children:(0,r.jsx)(L.G,{icon:j.Mp0,rotation:270})}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"/93cy4"}),onClick:()=>{let{left:e}=(0,x.zN)(t.state.selection);t.commands.addColumnAfter(e),requestAnimationFrame(()=>{t.chain().focus(p).goToNextCell().run()})},isDisabled:!v,testId:"add-col-after-button",children:(0,r.jsx)(L.G,{icon:j.Mp0,rotation:90})}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"GAohqx"}),icon:j.XAH,onClick:()=>{t.commands.deleteColumn(),requestAnimationFrame(()=>{t.commands.focus(p)})},color:"red.500",testId:"delete-col-button"})]}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"SOkhdm"}),icon:j.ZC_,onClick:()=>t.commands.equalizeColumns(),testId:"equalize-columns-button"}),(0,r.jsx)(T.w,{}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"HSI88F"}),icon:j.XAH,onClick:()=>t.chain().focus().deleteTable().run(),color:"red.500",testId:"delete-table-button"})]})]})},iS=[{component:ij,predicate:e=>e instanceof x.Xc&&e.isColSelection(),offsetPx:16},{component:ij,predicate:e=>e instanceof x.Xc&&e.isRowSelection(),offsetPx:12},{component:e=>{let{editor:t,selection:n}=e,i=(0,H.CG)(eu.Pu),o=n.node,a=(0,ty.H_)((0,ty.y)(i));return o?(0,r.jsx)(tb.o,{attributes:o.attrs,updateAttributes:e=>{t.chain().updateAttributes("chart",e).focus().run()},accentColor:a,setEditing:()=>{t.commands.editSelectedChart()},editor:t,inline:!0}):null},predicate:e=>{var t,n;return e instanceof d.qv&&(null===(n=e.node)||void 0===n?void 0:null===(t=n.type)||void 0===t?void 0:t.name)==="chart"},isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,i=t.getAttributes("link").href||"",o=!t.shouldUseLiteMenus;return(0,r.jsxs)(r.Fragment,{children:[o&&i&&(0,r.jsx)(ew,{editor:t,selection:n}),o&&!n.empty&&(0,r.jsx)(ea,{editor:t}),(0,r.jsx)(eC,{href:i,updateHref:e=>t.commands.updateSurroundingLink(e),unlink:()=>{t.commands.removeSurroundingLink()},editor:t,allowEditMetadata:o&&!(0,O.H7)(i)})]})},predicate:(e,t)=>e instanceof d.Bs&&t.isActive("link")&&!t.multipageEnabled&&!u.VH.get("linksV2")},{component:e=>{let{editor:t,selection:n}=e,i=(0,H.CG)(eu.Pu),o=t.getAttributes("link").href||"",a=!t.shouldUseLiteMenus,{isPageLink:l}=nm({href:o}),s=(0,ty.H_)((0,ty.nX)(i)),d=(0,c.useCallback)(e=>{t.commands.updateSurroundingLink(e)},[t]),u=(0,eh.B)(),p=(0,c.useCallback)(e=>{t.view.focus(),u({isOpen:!0}),e.stopPropagation()},[t,u]);return(0,r.jsxs)(tA,{children:[a&&o&&!(0,O.H7)(o)&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"/SVg/B"}),icon:j.nNP,children:(0,r.jsx)(nH,{editor:t,selection:n,isDisabled:l})}),(0,r.jsx)(nx,{href:o,updateHref:d,clearHref:()=>{t.commands.updateSurroundingLink("")},removeLink:()=>t.commands.removeSurroundingLink(),editor:t}),a&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"0j+RGO"}),icon:j.elf,children:(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,children:I.Ec.map(e=>{let{name:n,key:i,icon:o,shortcut:a,checkActive:l,apply:s}=e;if(l&&s)return(0,r.jsx)(M.h,{label:n(),shortcut:a,isActive:l(t),onClick:()=>{s(t)},icon:o,testId:i,my:0},i)})})}),a&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"jZlrte"}),icon:j.re8,children:(0,r.jsx)(ea,{editor:t,useMenuButton:!0,isLinkText:!0,defaultTextColor:s})}),a&&!(0,O.H7)(o)&&(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"sxkWRg"}),onClick:p,icon:j.gr5})]})},predicate:(e,t)=>e instanceof d.Bs&&t.isActive("link")&&u.VH.get("linksV2"),isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,i=t.getAttributes("link").href||"",[o,a]=(0,c.useState)("pages"),[l,s]=(0,c.useState)(i),[d,u]=(0,c.useState)(!1),{existingLink:p,isPageLink:h,newTabUrl:m}=nm({href:i});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Y.K,{direction:"column",minW:"min(80vw, 320px)",maxW:"50vw",maxH:"max(30vh, 400px)",children:[(0,r.jsxs)(Y.K,{direction:"row",justify:"space-between",mx:-2,px:2,borderBottom:!i||d?"1px solid var(--chakra-colors-blackAlpha-100)":void 0,children:[i&&(0,r.jsx)(ew,{editor:t,selection:n,isDisabled:!!h}),!n.empty&&(0,r.jsx)(ea,{editor:t}),p&&!d&&(0,r.jsx)(nW,{existingLink:p,handleRemoveClick:e=>{a(e),"url"===e&&s(i),h&&t.commands.updateSurroundingLink(""),u(!0)}}),p&&!p.cardId&&(0,r.jsx)(M.h,{label:h?(0,r.jsx)(E.cC,{id:"Ky3sBN"}):(0,r.jsx)(E.cC,{id:"Alx2/L"}),icon:j.Xjp,onClick:()=>window.open(m,"_blank")}),(0,r.jsx)(tM.L,{}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"484LKL"}),icon:j.AE2,onClick:()=>t.commands.removeSurroundingLink()})]}),(!p||d)&&(0,r.jsx)(nK,{updateHref:e=>{t.commands.updateSurroundingLink(e),u(!1)},initialTab:o,initialHref:l})]})})},predicate:(e,t)=>e instanceof d.Bs&&t.isActive("link")&&!!t.multipageEnabled&&!u.VH.get("linksV2")},{component:e=>{let{editor:t}=e,n=t.getAttributes("button").href||"",i=(0,c.useCallback)(()=>t.commands.handleButtonDelete(!1),[t]);return(0,r.jsxs)(a.U,{px:2,children:[ek().map(e=>{let{name:n,icon:i,key:o}=e;return(0,r.jsx)(M.h,{label:n,icon:i,onClick:()=>{t.commands.updateAttributes("button",{variant:o})},isActive:t.isActive("button",{variant:o})},n)}),(0,r.jsx)(T.w,{}),I.Ec.map(e=>{let{name:n,icon:i,checkActive:o,apply:a}=e;if(o&&a)return(0,r.jsx)(M.h,{label:n(),icon:i,onClick:()=>{a(t)},isActive:o(t)},n())}),(0,r.jsx)(eC,{href:n,updateHref:e=>t.commands.updateAttributes("button",{href:e}),editor:t,allowEditMetadata:!1}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t,handleDelete:i})]})},predicate:(e,t)=>t.isActive("button")&&!t.multipageEnabled&&!t.isSiteNavbarEditor&&!u.VH.get("linksV2")},{component:nP,predicate:(e,t)=>t.isActive("button")&&!t.isSiteNavbarEditor&&u.VH.get("linksV2"),isPopover:!0},{component:nY,predicate:(e,t)=>t.isActive("button")&&!!t.multipageEnabled&&!u.VH.get("linksV2")},{component:e=>{let{editor:t,selection:n}=e,{node:i,from:o}=n,a=e=>!!i&&JSON.stringify(e)===JSON.stringify(i.attrs.colWidths),{verticalAlign:l}=t.getAttributes("gridCell"),s=(0,c.useCallback)(e=>{t.chain().updateAttributes("gridCell",{verticalAlign:e===l?null:e}).selectNodeAtPos(n.from).focus().run()},[t,n,l]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(em.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,r.jsxs)(t1.Lt,{isLazy:!0,children:[(0,r.jsx)(t1.PS,{as:z.z,variant:"toolbar",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq}),size:"sm","data-testid":"layout-preset-dropdown",children:(0,r.jsx)(E.cC,{id:"6v+N4U",values:{0:i.childCount}})}),(0,r.jsx)(t1.sV,{"data-in-editor-focus":!0,fontSize:"md",children:nM().map(e=>{let{testId:n,name:i,image:l,value:s}=e;return(0,r.jsx)(t1.hP,{"data-testid":n,icon:a(s)?(0,r.jsx)(D.n,{w:"2rem"}):(0,r.jsx)(tr.E,{h:"1rem",w:"2rem",objectFit:"cover",src:l.src}),onClick:()=>{o&&t.commands.useLayoutPreset(o,s)},children:i},i)})})]}),(0,r.jsx)(M.h,{onClick:()=>s("start"),isActive:"start"===l,label:A.ag._({id:"/Q0jUh"}),children:(0,r.jsx)(nk.dBc,{})}),(0,r.jsx)(M.h,{onClick:()=>s("center"),isActive:"center"===l,label:A.ag._({id:"QhuQN2"}),children:(0,r.jsx)(nk.RyY,{})}),(0,r.jsx)(M.h,{onClick:()=>s("end"),isActive:"end"===l,label:A.ag._({id:"EPnxoe"}),children:(0,r.jsx)(nk.pgY,{})}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})})},predicate:e=>e instanceof d.qv&&(0,h.SA)(e.node)},{component:e=>{let{editor:t,selection:n,decorations:i}=e,{node:o,from:l}=n,{attrs:s,isNested:d,isFirstCard:u}=(0,eR.v)({node:o,decorations:i,editor:t}),{isOpen:p,onOpen:h,onClose:m}=(0,eT.M)({id:"downloadCardAsImageDisclosure"}),g=(0,e_.ye)("exportCard"),f=(0,c.useCallback)(()=>{null==t||t.commands.duplicateCard(l)},[t,l]),x=(0,c.useCallback)(()=>{null==t||t.commands.unnestCard(l)},[t,l]),v=(0,c.useCallback)(()=>{null==t||t.chain().mergeCardsAtPos(l).focus().run()},[t,l]),y=(0,eI.p)(),b=(0,c.useCallback)(()=>{let e=t.state.doc.nodeAt(l),n=e&&(0,eE.getCardTitle)(e.toJSON());t.chain().deleteCard(l).focus().run();let i=A.ag._({id:"0MWv65",values:{displayTitle:n?'"'.concat(n,'"'):"card"}}),o=A.ag._({id:"9uI/rE"}),s=y({title:(0,r.jsxs)(a.U,{children:[(0,r.jsx)(X.x,{noOfLines:1,children:i}),(0,r.jsx)(ez.r,{textDecoration:"underline",onClick:()=>{(0,eL.Yw)(t.state),y.close(s)},children:o})]}),status:"info",duration:3e3,position:"top"})},[t,l,y]),w=(0,e_.ye)("aiCardDesigner"),C=(0,c.useCallback)(()=>{var e;let t=null===(e=n.node)||void 0===e?void 0:e.attrs.id;if(!t)return;let i=prompt("What do you want to change?",eM.B);i&&eN.T.emit("openSuggestionEditor",{cardId:t,userMessage:i})},[n]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(em.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"BTDPLo"}),testId:"duplicate-card",onClick:f,icon:j.WM4}),d&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"b+J8Wt"}),testId:"merge-into-parent-card",onClick:x,icon:j.oK7}),!d&&!u&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"kV34zB"}),testId:"merge-into-card-above",onClick:v,icon:j.FPD}),w&&(0,r.jsx)(M.h,{onClick:C,icon:j.Hh4,label:"Design with AI"}),(0,r.jsx)(e1,{attrs:s}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"xRJ+bN"}),testId:"download-card",onClick:h,icon:j.fuY}),(0,r.jsx)(eX,{isOpen:p,onClose:m,cardId:s.id,editor:t})]}),(0,r.jsx)(_,{editor:t,handleDelete:b})]})})},predicate:e=>e instanceof d.qv&&(0,v.KH)(e.node),offsetPx:0},{component:e=>{var t,n;let{editor:i,selection:o,decorations:a}=e,{node:d,from:u}=o,h=(0,e5.en)(a),m=d.attrs,{allowFit:g}=(0,p.$U)(null==h?void 0:h.layout),f=(null===(t=m.background)||void 0===t?void 0:t.type)===e7.E.IMAGE,x=(0,e3.U)(m,null==h?void 0:h.layout),y=(0,e_.ye)("accentImageFit")&&g&&f,b=(0,e_.ye)("removeBackground")&&f,w=null===(n=(0,H.CG)(eu.Pu).config)||void 0===n?void 0:n.accentBackgrounds,C=(0,p.q9)(m.background,w),k=(0,c.useRef)(C),S=(0,s.qv)(i.state.doc.resolve(u),v.KH),I=(0,c.useCallback)(()=>{w&&(i.commands.updateNestedAttributesAtPos(u,{background:w[k.current]}),k.current=(k.current+1)%w.length)},[w,i,u]),z=(0,c.useCallback)(()=>{u&&(f?i.commands.updateAttributesAtPos(u,{background:{type:e7.E.NONE}}):(null==S?void 0:S.pos)&&(i.commands.setCardLayout(S.pos,"blank"),i.commands.selectInsideCardBody(S.pos)))},[i,u,S,f]),N=d.attrs.background.type===e7.E.IMAGE;return(0,r.jsx)(em.h,{spacing:1,size:"sm",alignItems:"center",children:"accent"===m.itemId&&(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)(e8,{editor:i,selection:o,decorations:a}),N&&(0,r.jsx)(tx,{editor:i,pos:u,node:d,isDisabled:"fit"===x}),b&&(0,r.jsx)(tv.S,{editor:i,selection:o,decorations:a}),(y||N)&&(0,r.jsx)(T.w,{}),w&&w.length>0&&(0,r.jsx)(l.kH,{label:(0,r.jsx)(E.cC,{id:"OVjfHO"}),placement:"top",children:(0,r.jsx)(e2.h,{onClick:I,variant:"toolbar",size:"sm",icon:(0,r.jsx)(L.G,{icon:j.RJo}),boxSize:7,p:0,"aria-label":A.ag._({id:"gH5Gbn"})})}),(0,r.jsx)(l.kH,{label:f?(0,r.jsx)(E.cC,{id:"Ov693i"}):(0,r.jsx)(E.cC,{id:"B6vyEa"}),placement:"top",children:(0,r.jsx)(e2.h,{onClick:()=>{let e=null==S?void 0:S.node.attrs.id;e&&e4.T.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:e})},variant:"toolbar",size:"sm",icon:(0,r.jsx)(L.G,{icon:j.Xcf}),boxSize:7,p:0,"aria-label":f?A.ag._({id:"Ov693i"}):A.ag._({id:"B6vyEa"})})}),(0,r.jsx)(T.w,{}),(0,r.jsx)(l.kH,{label:f?(0,r.jsx)(E.cC,{id:"sGYCGx"}):(0,r.jsx)(E.cC,{id:"6vLq+T"}),placement:"top",children:(0,r.jsx)(e2.h,{onClick:z,variant:"toolbar",size:"sm",icon:f?(0,r.jsx)(L.G,{icon:j.qDv}):(0,r.jsx)(L.G,{icon:j.XAH}),color:"red.500",boxSize:7,p:0,"aria-label":f?A.ag._({id:"sGYCGx"}):A.ag._({id:"6vLq+T"})})})]})})},predicate:e=>e instanceof d.qv&&(0,p.pt)(e.node),offsetPx:6},{component:e=>{let{editor:t,selection:n}=e,i=n.$from.parent.childCount<nj.h,{verticalAlign:o}=n.node.attrs,a=(0,c.useCallback)(e=>{t.chain().updateAttributes("gridCell",{verticalAlign:e===o?null:e}).selectNodeAtPos(n.from).focus().run()},[t,o,n]);return(0,r.jsxs)(em.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,r.jsx)(nA,{editor:t,label:A.ag._({id:"NFoeBH"}),icon:j.rWw}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.w,{}),(0,r.jsx)(M.h,{label:A.ag._({id:"bZ9ges"}),icon:j.Mp0,iconRotation:270,onClick:()=>{t.chain().insertContentAt(n.from,nj.x).run()},testId:"add-col-before-button"}),(0,r.jsx)(M.h,{label:A.ag._({id:"7ibPpM"}),icon:j.Mp0,iconRotation:90,onClick:()=>{t.chain().insertContentAt(n.from+n.node.nodeSize,nj.x).run()},testId:"add-col-after-button"}),(0,r.jsx)(nS,{editor:t,selection:n})]}),(0,r.jsx)(M.h,{onClick:()=>a("start"),isActive:"start"===o,label:A.ag._({id:"/Q0jUh"}),children:(0,r.jsx)(nk.dBc,{})}),(0,r.jsx)(M.h,{onClick:()=>a("center"),isActive:"center"===o,label:A.ag._({id:"QhuQN2"}),children:(0,r.jsx)(nk.RyY,{})}),(0,r.jsx)(M.h,{onClick:()=>a("end"),isActive:"end"===o,label:A.ag._({id:"EPnxoe"}),children:(0,r.jsx)(nk.pgY,{})}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t,handleDelete:()=>{t.chain().selectInsideNodeAtPos(n.from).handleLayoutDelete(!0,!1).run()}})]})},predicate:e=>e instanceof d.qv&&(0,h._5)(e.node)},{component:e=>{let{editor:t,selection:n,decorations:i}=e,{node:o}=n,{options:l,variantKey:s}=o.attrs,d=(0,nX.P)(s),u=(0,c.useCallback)(e=>{t.commands.updateNestedAttributesAtPos(n.from,e)},[t,n.from]),p=(0,c.useCallback)(e=>{u({variantKey:e})},[u]);return(0,r.jsxs)(a.U,{spacing:2,children:[(0,r.jsxs)(t1.Lt,{isLazy:!0,children:[(0,r.jsx)(t1.PS,{as:z.z,variant:"toolbar",rightIcon:(0,r.jsx)(L.G,{icon:j.ptq,transform:"shrink-6"}),leftIcon:(0,r.jsx)(L.G,{icon:d.icon,fixedWidth:!0}),size:"sm","data-testid":"smart-layout-variant-dropdown",children:d.name()}),(0,r.jsx)(t1.sV,{maxH:"min(25em, 45vh)",overflowY:"auto","data-in-editor-focus":!0,fontSize:"md",children:(0,nX.m)().map(e=>{let{key:t,name:n,icon:i,disabled:o,featureFlag:a}=e;if(o||a&&!e_.VH.get(a))return null;let l=s===t;return(0,r.jsx)(t1.hP,{"data-test-variant-option":t,icon:l?(0,r.jsx)(D.n,{}):(0,r.jsx)(L.G,{icon:i,fixedWidth:!0}),onClick:()=>p(t),children:n()},t)})})]}),(0,r.jsx)(T.w,{}),(0,r.jsx)(em.h,{size:"sm",children:d.options.map(e=>{var a;let s=(0,nZ.Xo)(i);if(e.checkEnabled&&!e.checkEnabled(o.attrs,s))return null;let d=null!==(a=l[e.key])&&void 0!==a?a:e.defaultValue;return(0,r.jsx)(e.Control,{value:d,updateValue:(i,r)=>{u({options:{...l,[e.key]:i}}),r&&o.forEach((r,o)=>{t.commands.updateNestedAttributesAtPos(n.from+o+1,{options:{...r.attrs.options,[e.key]:i}})})},editor:t,option:e},e.key)})}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})},predicate:e=>e instanceof d.qv&&(0,f.G)(e.node)},{component:e=>{let{editor:t,selection:n}=e,{node:i,from:o}=n,a=i.attrs.id,l=n.$from.parent,{startRemoveBg:s,isRemovingBg:d}=(0,tJ.tk)({editor:t,id:a}),u=(0,c.useCallback)(()=>{t.chain().insertSmartLayoutCell(n.from).run()},[t,n.from]),p=(0,c.useCallback)(()=>{t.chain().insertSmartLayoutCell(n.from+n.node.nodeSize).run()},[t,n.from,n.node]),{options:h,image:m}=n.node.attrs,g=(0,c.useCallback)(e=>{t.commands.updateNestedAttributesAtPos(n.from,e)},[t,n.from]),x=(0,c.useCallback)(()=>{t.chain().handleSmartLayoutDelete().run()},[t]),v=(0,eh.B)(),y=(0,c.useCallback)(e=>{t.view.focus(),v({isOpen:!0}),e.stopPropagation()},[t,v]);if(!l||!(0,f.G)(l))return console.error("SmartLayoutCellFormattingMenu: parent is not a smartLayout"),null;let b=(0,n$.yU)(l.attrs),w=(0,nX.P)(l.attrs.variantKey),k=(0,C.zd)((null==m?void 0:m.src)||(null==m?void 0:m.tempUrl)),S="imagesText"===w.key&&!k&&(null==m?void 0:m.src),I="imagesText"===w.key||"iconsText"===w.key;return(0,r.jsxs)(em.h,{spacing:1,size:"sm",alignItems:"center",children:[(0,r.jsx)(nA,{editor:t,label:A.ag._({id:"NFoeBH"}),icon:w.icon}),(0,r.jsx)(T.w,{}),I&&(0,r.jsxs)(r.Fragment,{children:[S&&(0,r.jsx)(tx,{editor:t,pos:o,node:i}),S&&(0,r.jsx)(tv.L,{onClick:s,disabled:d}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"XQFMOm"}),icon:j.Xcf,onClick:y}),(0,r.jsx)(T.w,{})]}),(0,r.jsx)(M.h,{label:A.ag._({id:"w7mkyz"}),iconRotation:"bottom"===b?void 0:270,icon:j.Mp0,onClick:u,testId:"add-col-before-button"}),(0,r.jsx)(M.h,{label:A.ag._({id:"1e37Dl"}),icon:j.Mp0,iconRotation:"bottom"===b?180:90,onClick:p,testId:"add-col-after-button"}),(0,r.jsx)(nS,{editor:t,selection:n}),w.cellOptions.length>0?(0,r.jsx)(T.w,{}):null,(0,r.jsx)(em.h,{size:"sm",children:w.cellOptions.map(e=>{var n;if(e.checkEnabled&&!e.checkEnabled(i.attrs))return null;let o=null!==(n=h[e.key])&&void 0!==n?n:e.defaultValue;return(0,r.jsx)(e.Control,{value:o,updateValue:t=>{g({options:{...h,[e.key]:t}})},editor:t,option:e},e.key)})}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t,handleDelete:x})]})},predicate:e=>e instanceof d.qv&&(0,f.E)(e.node)},{component:e=>{let{selection:t,editor:n}=e,i=0===t.node.childCount,o=t.node.attrs.thumbHeight||tB.vf,l=(0,c.useCallback)(e=>{n.chain().updateAttributes("gallery",{thumbHeight:e}).setNodeSelection(t.from).focus().run()},[n,t.from]);return(0,r.jsxs)(a.U,{spacing:2,mr:2,children:[!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(X.x,{fontSize:"sm",fontWeight:"600",children:(0,r.jsx)(E.cC,{id:"Cj2Gtd"})}),(0,r.jsxs)(tF.iR,{"aria-label":"gallery-slider",min:5,max:15,step:.25,value:o,onChange:l,w:"120px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,r.jsx)(tF.Uj,{children:(0,r.jsx)(tF.Ms,{})}),(0,r.jsx)(tF.gs,{background:"trueblue.500"})]}),(0,r.jsx)(T.w,{}),(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,_empty:{display:"none"},children:I.Ec.map(e=>{let{key:i,name:o,shortcut:a,icon:l,apply:s,checkActive:d}=e;return n&&s&&d?(0,r.jsx)(M.h,{shortcut:a,icon:l,label:o(),onClick:e=>{s(n),n.chain().setNodeSelection(t.from).run()},isActive:d(n),testId:i},i):null})}),(0,r.jsx)(T.w,{})]}),(0,r.jsx)(_,{editor:n})]})},predicate:e=>e instanceof d.qv&&(0,m.N5)(e.node)&&!u.VH.get("galleryV2")},{component:e=>{let{selection:t,editor:n}=e,i=0===t.node.childCount,{layout:a,stretchFill:s}=t.node.attrs,d=(0,c.useCallback)(()=>{n.chain().deleteSelectionAndSelectNear().run()},[n]);return i?null:(0,r.jsx)(o.xu,{minW:"300px",children:(0,r.jsxs)(tA,{children:[!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Y.K,{w:"100%",direction:"row",justify:"space-between",alignItems:"flex-start",children:(0,r.jsx)(l.NZ,{children:(0,r.jsx)(E.cC,{id:"U+kFad"})})}),(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"rdU729"}),icon:j.Vr3,children:(0,r.jsx)(tV,{editor:n,selection:t})}),"grid"===a&&(0,r.jsx)(tW,{editor:n,selection:t}),"flex"===a&&(0,r.jsx)(tK,{editor:n,selection:t}),(0,r.jsx)(tG,{editor:n,selection:t}),"logo"===a&&(0,r.jsx)(tq,{editor:n,selection:t}),"flex"===a&&!(!0===s||null===s)&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"0j+RGO"}),icon:j.elf,children:(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,_empty:{display:"none"},children:I.Ec.map(e=>{let{key:i,name:o,shortcut:a,icon:l,apply:s,checkActive:d}=e;if(!n||!s||!d)return null;let c=d(n);return(0,r.jsx)(M.h,{shortcut:a,icon:l,label:o(),onClick:()=>{s(n),n.chain().setNodeSelection(t.from).run()},isActive:c,testId:i},i)})})})]}),(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,colorScheme:"red",onClick:d})]})})},predicate:e=>e instanceof d.qv&&(0,m.N5)(e.node)&&u.VH.get("galleryV2"),isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,i=n.node.attrs;return(0,r.jsxs)(em.h,{spacing:2,size:"sm",flex:"row",alignItems:"center",children:[(0,r.jsx)(eS,{editor:t,attrs:i,selection:n}),(0,r.jsx)(eA.E,{color:i.color||void 0,setColor:e=>{t.chain().focus().updateAttributes("calloutBox",{color:e}).selectNodeAtPos(n.from).run()},editor:t,analyticsSource:"CalloutBox"}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})},predicate:e=>e instanceof d.qv&&"calloutBox"===e.node.type.name},{component:e=>{let{editor:t,selection:n}=e,i=n.node.type.name,{fullWidthBlock:o}=t.getAttributes(i),a=(0,c.useCallback)(e=>{var n,i;e.stopPropagation(),null===(n=(i=t.commands).editSelectedDrawingBlock)||void 0===n||n.call(i)},[t]);return(0,r.jsxs)(em.h,{spacing:0,size:"sm",alignItems:"center",children:[I.Ec.map(e=>{let{name:n,icon:a,checkActive:l,apply:s}=e;if(l&&s)return(0,r.jsx)(M.h,{label:n(),icon:a,onClick:()=>{s(t),o&&t.commands.updateAttributes(i,{fullWidthBlock:!1})},isActive:!o&&l(t)},n())}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"ePK91l"}),icon:j.Xcf,onClick:a}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})},predicate:e=>e instanceof d.qv&&("drawing"===e.node.type.name||"diagram"===e.node.type.name)},{component:e=>{let{editor:t,selection:n}=e,{fullWidthBlock:i}=n.node.attrs,o=(0,eh.B)(),l=(0,c.useCallback)(e=>{t.view.focus(),o({isOpen:!0}),e.stopPropagation()},[t,o]),s=(0,ex.M)(t),d=(0,t0.u5)(n.$from);return(0,r.jsxs)(a.U,{spacing:0,children:[!d&&!s&&(0,r.jsxs)(r.Fragment,{children:[I.Ec.map(e=>{let{name:o,icon:a,checkActive:l,apply:s}=e;if(l&&s)return(0,r.jsx)(M.h,{label:o(),icon:a,onClick:()=>{s(t),i&&t.commands.updateAttributes(n.node.type.name,{fullWidthBlock:!1})},isActive:!i&&l(t)},o())}),(0,r.jsx)(T.w,{})]}),(0,r.jsxs)(em.h,{spacing:0,size:"sm",alignItems:"center",children:[(0,r.jsxs)(r.Fragment,{children:[d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nA,{editor:t,label:A.ag._({id:"+v0hYZ"}),icon:j.emM}),(0,r.jsx)(T.w,{})]}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"ePK91l"}),icon:j.Xcf,onClick:l,testId:"edit-button"})]}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})]})]})},predicate:e=>e instanceof d.qv&&"mediaPlaceholder"===e.node.type.name},{component:e=>{let{editor:t,selection:n}=e,{resize:i,fullWidthBlock:l,id:s,src:d,tempUrl:u,href:p,clickBehavior:h}=n.node.attrs,{enterZoom:m}=(0,ey.d8)(s),g=(0,eh.B)(),f=(0,c.useCallback)(e=>{t.view.focus(),g({isOpen:!0}),e.stopPropagation()},[t,g]),x=(0,C.Fj)(h),v=(0,c.useCallback)(e=>{t.commands.updateAttributes(tZ.Ee.name,{clickBehavior:e})},[t]),y=(0,c.useCallback)(e=>{t.commands.updateAttributes(tZ.Ee.name,{href:e})},[t]),{setCropClipType:b,confirmCrop:w,cancelCrop:k,startCrop:z,resetCrop:_}=(0,tQ.k)(t),T=(0,H.CG)(tZ.Ig),R=(0,c.useCallback)(()=>{(0,t0.rR)(n)},[n]),P=(0,ex.M)(t),O=(0,t0.u5)(n.$from),D=(0,C.zd)(d||u),W=!O&&!P,F=(0,e_.ye)("removeBackground")&&!D,B=(0,H.CG)((0,tZ.v_)(s)),{startRemoveBg:G,isRemovingBg:U}=(0,tJ.tk)({editor:t,id:s}),V=!!((null==i?void 0:i.clipPath)&&(null==i?void 0:i.clipType)),q=!tX()({resize:i},{resize:tZ.OT}),K=(0,c.useCallback)(()=>{t.chain().resetImageClip().resetImageScale().command(e=>{var t;let{commands:n}=e;return!!(null===(t=n.refreshBubbleMenu)||void 0===t?void 0:t.call(n))}).run()},[t]),Y=(0,c.useCallback)(()=>{U&&tZ.TB.emit("cancelRemoveBg",{id:s}),t.chain().deleteSelectionAndSelectNear().run()},[t,s,U]),X=(0,c.useMemo)(()=>[{key:"zoom",ariaLabel:A.ag._({id:"ACjxWW"}),label:(0,r.jsx)(E.cC,{id:"ACjxWW"}),action:m,icon:j.q9v},{key:"addComment",ariaLabel:A.ag._({id:"oFsfkI"}),label:(0,r.jsx)(E.cC,{id:"oFsfkI"}),action:R,icon:j.Mzg,isHidden:P},{key:"crop",ariaLabel:A.ag._({id:"qKx+US"}),label:(0,r.jsx)(E.cC,{id:"qKx+US"}),action:()=>{z({id:s,clipType:null==i?void 0:i.clipType})},icon:j._nR,isHidden:!W,isDisabled:U},{key:"removeBackground",canRemoveBackground:F,ariaLabel:A.ag._({id:"YOCRHt"}),label:(0,r.jsxs)($.k,{alignItems:"center",justifyContent:"center",children:[(0,r.jsx)(E.cC,{id:"ylbfBl"}),(0,r.jsx)(t$.J,{type:"removeBackground",ml:2,color:"gray.400"})]}),customIcon:(0,r.jsxs)(o.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,r.jsx)(L.G,{icon:j.Q4_,size:"lg"}),(0,r.jsx)(L.G,{icon:S.ILF,size:"xs",transform:"shrink-5"})]}),action:G,isHidden:!F,isLoading:U},{key:"editGallery",ariaLabel:A.ag._({id:"ATVjaW"}),label:(0,r.jsx)(E.cC,{id:"+v0hYZ"}),action:()=>{t.chain().selectParentNode().run()},icon:j.emM,isHidden:!O},{key:"edit",ariaLabel:A.ag._({id:"ePK91l"}),label:(0,r.jsx)(E.cC,{id:"ePK91l"}),action:f,icon:j.Xcf}],[R,F,W,f,t,m,s,P,O,U,null==i?void 0:i.clipType,z,G]);return(0,r.jsxs)(tA,{children:[!B&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ny,{buttonList:X}),(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"0j+RGO"}),icon:j.elf,isHidden:!W,children:(0,r.jsx)(em.h,{spacing:0,size:"sm",onMouseDown:N.br,children:I.Ec.map(e=>{let{name:n,key:o,icon:a,shortcut:s,checkActive:d,apply:c}=e;if(d&&c)return(0,r.jsx)(M.h,{label:n(),shortcut:s,isActive:!l&&d(t),onClick:()=>{c(t),l&&t.commands.updateAttributes(tZ.Ee.name,{fullWidthBlock:!1,resize:{...i,width:null}})},isDisabled:U,icon:a,testId:o,my:0},o)})})}),(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"S58tkK"}),icon:nC[x],children:(0,r.jsx)(t4,{currentClickBehavior:x,handleClickBehaviorChange:v,enableNoClickBehavior:!0,canAddLink:!0})}),"newTab"===x&&(0,r.jsx)(nx,{editor:t,href:p||"",updateHref:y,clearHref:()=>{y("")}}),(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,onClick:Y,colorScheme:"red",secondaryLabel:q?(0,r.jsx)(E.cC,{id:"5eaf8Z"}):void 0,secondaryAction:q?K:void 0,secondaryIcon:q?j.XnX:void 0})]}),W&&B&&(0,r.jsxs)(a.U,{alignSelf:"stretch",my:-3,mx:-2,zIndex:"menu",children:[(0,r.jsx)(nw,{clipType:T,onChange:e=>{b({clipType:e})}}),(0,r.jsxs)(em.h,{spacing:0,size:"sm",alignItems:"center",children:[(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"6Z0nnS"}),icon:j.XnX,isDisabled:!V,onClick:()=>{_({id:s})},my:0}),(0,r.jsx)(M.h,{color:"red.500",label:(0,r.jsx)(E.cC,{id:"7Bn152"}),icon:j.g82,onClick:()=>{k({id:s})},my:0}),(0,r.jsx)(M.h,{color:"green.500",label:(0,r.jsx)(E.cC,{id:"ryQtQS"}),icon:j.LEp,onClick:()=>{w({id:s})},my:0})]})]})]})},predicate:e=>e instanceof d.qv&&"image"===e.node.type.name,isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,i=(0,eh.B)(),o=(0,c.useCallback)(e=>{i({isOpen:!0}),e.stopPropagation()},[i]),a=(0,ex.M)(t),l=(0,m.u5)(n.$from),s=(0,c.useCallback)(()=>{(0,m.rR)(n)},[n]),{enterZoom:d}=(0,ey.d8)(n.node.attrs.id);return(0,r.jsxs)(em.h,{spacing:0,size:"sm",alignItems:"center",children:[!l&&(0,r.jsx)(ew,{editor:t,selection:n}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"ACjxWW"}),icon:j.q9v,onClick:d}),!a&&(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"oFsfkI"}),icon:j.Mzg,onClick:s}),(0,r.jsx)(M.h,{label:(0,r.jsx)(E.cC,{id:"ePK91l"}),icon:j.Xcf,onClick:o}),(0,r.jsx)(T.w,{}),(0,r.jsx)(_,{editor:t})]})},predicate:e=>e instanceof d.qv&&(0,C.Bp)(e.node)&&!u.VH.get("linksV2")},{component:e=>{let{editor:t,selection:n}=e,i=(0,eI.p)(),o=(0,eh.B)(),a=(0,c.useCallback)(e=>{t.view.focus(),o({isOpen:!0}),e.stopPropagation()},[t,o]),l=(0,c.useCallback)(()=>{t.chain().deleteSelectionAndSelectNear().run()},[t]),s=(0,c.useCallback)(e=>{"none"!==e&&t.commands.updateAttributes(n.node.type.name,{clickBehavior:e})},[t,n]),d=(0,c.useCallback)(e=>{let o="embed.custom";(0,t7.ft)(e,e=>{o=e.source||o,(0,nO.Yc)({editor:t,selection:n,attrs:e,sourceKey:o})}).catch(e=>{i.isActive(nD)||i({id:nD,title:(0,r.jsx)(E.cC,{id:"MWOB3g"}),description:(0,r.jsx)(E.cC,{id:"iEFpL0"}),status:"error",position:"top",duration:3e3,isClosable:!0}),console.error("[caught] EmbedVideoFormattingMenu error fetching URL",e)})},[t,i,n]),u=t.getAttributes(n.node.type.name),p="displayStyle"in u&&u.displayStyle||"inline",h=(0,C.NW)(u),g=(0,m.u5)(n.$from),f="video"===n.node.type.name,x=(0,C.gp)(u,"preview"===p&&!g),v=u.source?(0,ev.v0)(u.source):null,y="inline"===p&&(f||(null==v?void 0:v.inlineInteractive))&&!g;return(0,r.jsxs)(tA,{children:[!g&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"/SVg/B"}),icon:"inline"===p?j.m6E:j.o_j,children:(0,r.jsx)(nH,{editor:t,selection:n})}),(0,r.jsx)(nx,{href:h||"",updateHref:d,editor:t,isEmbedLink:!0}),!y&&(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"S58tkK"}),icon:"newTab"===x?j.wlW:j.q9v,children:(0,r.jsx)(t4,{currentClickBehavior:x,handleClickBehaviorChange:s})}),(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,onClick:l,colorScheme:"red",secondaryAction:a,secondaryIcon:j.gr5,secondaryLabel:(0,r.jsx)(E.cC,{id:"sxkWRg"})})]})},predicate:e=>e instanceof d.qv&&(0,C.Bp)(e.node)&&u.VH.get("linksV2"),isPopover:!0},{component:e=>{let{editor:t,selection:n}=e,{nested:i}=n.node.attrs;return(0,r.jsxs)(em.h,{spacing:0,size:"sm",children:[(0,r.jsx)(M.h,{testId:"toc-top-level-cards",label:(0,r.jsx)(E.cC,{id:"RiLgqi"}),icon:j.Zrf,onClick:()=>{t.commands.updateAttributes("tableOfContents",{nested:!1})},isActive:!i}),(0,r.jsx)(M.h,{testId:"toc-nested-cards",label:(0,r.jsx)(E.cC,{id:"nTkST4"}),icon:j.vp0,onClick:()=>{t.commands.updateAttributes("tableOfContents",{nested:!0})},isActive:i})]})},predicate:e=>e instanceof d.qv&&"tableOfContents"===e.node.type.name},{component:e=>{var t;let{editor:n}=e,{showTime:i=!0,hiddenContributorIds:o=[]}=n.getAttributes("contributors"),a=(0,H.CG)(eu.xy)||[],{toggleShowTime:s,toggleOneVisibleContributor:d,toggleAllVisibleContributors:u}=(t=n,{toggleShowTime:(0,c.useCallback)(()=>{t.commands.toggleShowTime()},[t]),toggleOneVisibleContributor:(0,c.useCallback)(e=>{t.commands.toggleOneContributorVisibility(e)},[t]),toggleAllVisibleContributors:(0,c.useCallback)(()=>{t.commands.toggleAllContributorsVisibility()},[t])}),p=a.length>1,h=(0,c.useCallback)(()=>{n.chain().deleteSelectionAndSelectNear().run()},[n]);return(0,r.jsxs)(tA,{children:[(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"0j+RGO"}),icon:j.elf,children:(0,r.jsx)(tE,{editor:n})}),(0,r.jsx)(tk,{label:(0,r.jsx)(E.cC,{id:"4ep6pq"}),icon:j.SZw,children:(0,r.jsx)(tw.r,{isChecked:i,onChange:s})}),p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tS,{}),(0,r.jsx)(tR,{contributors:a,hasMultipleContributors:p,hiddenContributorIds:o,toggleOneVisibleContributor:d,toggleAllVisibleContributors:u})]}),(0,r.jsxs)(X.x,{fontSize:"xs",color:"gray.700",textAlign:"center",children:[(0,r.jsx)(E.cC,{id:"Xqn2KO"})," ",(0,r.jsx)(l.Yq,{label:(0,r.jsx)(E.cC,{id:"CYpThg"})})]}),(0,r.jsx)(tj,{label:(0,r.jsx)(E.cC,{id:"cnGeoo"}),icon:j.XAH,colorScheme:"red",onClick:h})]})},predicate:e=>e instanceof d.qv&&"contributors"===e.node.type.name,isPopover:!0},{component:ik,predicate:e=>e instanceof d.Bs}],iA=[{component:nY,predicate:(e,t)=>{var n,i;let r=null===(n=document)||void 0===n?void 0:n.activeElement,o=!!(null==r?void 0:r.closest('[data-active-menu="navigation"]')),a=!!(null==r?void 0:r.closest("[data-navbar-editor]"));return(o||a)&&t.isActive("button")&&!!t.isSiteNavbarEditor&&!t.multipageEnabled&&!u.VH.get("linksV2")&&!(null===(i=document)||void 0===i?void 0:i.querySelector("[".concat(g.aX,"]")))}},{component:nP,predicate:(e,t)=>{var n,i;let r=null===(n=document)||void 0===n?void 0:n.activeElement,o=!!(null==r?void 0:r.closest('[data-active-menu="navigation"]')),a=!!(null==r?void 0:r.closest("[data-navbar-editor]"));return(o||a)&&t.isActive("button")&&!!t.isSiteNavbarEditor&&!t.multipageEnabled&&u.VH.get("linksV2")&&!(null===(i=document)||void 0===i?void 0:i.querySelector("[".concat(g.aX,"]")))},isPopover:!0}],iI={backgroundColor:"white",shadow:"lg"},iz=e=>{let{editor:t,scrollingParentSelector:n,menuContext:i,appendToSelector:d}=e;(0,k.F1)(t);let{hideTooltips:u,GammaTooltipHiderContext:p}=(0,l.o5)(),h=t.state.selection,m=("navigation"===i?iA:iS).find(e=>e.predicate(h,t)),g=[];try{(0,s.EG)(t.state.selection)&&(g=(0,v.su)(t,t.state.selection.from))}catch(e){console.error("[FormattingMenu] unable to find decorations at ".concat(t.state.selection.from),e.message)}let f=(0,c.useMemo)(()=>({maxWidth:"none",zIndex:"var(--chakra-zIndices-popover)",placement:"top",appendTo:d?()=>document.querySelector(d):void 0,popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["top","top-start","top-end","bottom","bottom-start","bottom-end"]}},{name:"preventOverflow",options:{boundary:n?document.querySelector(n):void 0,altAxis:!0}}]}}),[n,d]),x="navigation"===i?"navigation":"editor";return(0,r.jsx)(p,{children:(0,r.jsx)(l.Wk,{isDark:!1,children:(0,r.jsxs)(w,{editor:t,onHide:u,tippyOptions:f,children:[m&&m.isPopover&&(0,r.jsx)(tO,{"data-in-editor-focus":!0,"data-active-menu":x,"data-testid":"formatting-menu",color:"var(--chakra-colors-chakra-body-text)",fontFamily:"Inter, sans-serif",children:(0,r.jsx)(m.component,{editor:t,selection:h,decorations:g})}),m&&!m.isPopover&&(0,r.jsx)(o.xu,{"data-active-menu":x,borderRadius:"xl",...iI,w:"auto",minW:"0px",h:"fit-content",position:"relative",bottom:m.offsetPx?"".concat(m.offsetPx,"px"):"0","data-in-editor-focus":!0,"data-testid":"formatting-menu",color:"var(--chakra-colors-chakra-body-text)",fontFamily:"Inter, sans-serif",children:(0,r.jsx)(a.U,{spacing:3,px:2,minH:10,children:(0,r.jsx)(m.component,{editor:t,selection:h,decorations:g})})})]})})})}},38280:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var i=n(52322),r=n(42822),o=n(74008);let a=()=>(0,i.jsx)(r.M,{h:"20px",children:(0,i.jsx)(o.i,{mx:1,borderColor:"gray.300",orientation:"vertical"})})},31087:function(e,t,n){"use strict";n.d(t,{L:function(){return m},S:function(){return g}});var i=n(52322),r=n(38035),o=n(28535),a=n(42946),l=n(54933),s=n(49929),d=n(5879),c=n(21829),u=n(6363),p=n(3423),h=n(88881);let m=e=>{let{onClick:t=()=>{},...n}=e;return(0,i.jsx)(h.h,{label:(0,i.jsxs)(r.k,{alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(d.cC,{id:"ylbfBl"}),(0,i.jsx)(c.J,{type:"removeBackground",ml:2,color:"gray.400"})]}),onClick:t,...n,children:(0,i.jsxs)(o.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,i.jsx)(s.G,{icon:a.Q4_,size:"lg"}),(0,i.jsx)(s.G,{icon:l.ILF,size:"xs",transform:"shrink-5"})]})})},g=e=>{let{editor:t,decorations:n}=e,r=(0,u.en)(n),{startRemoveBg:o,isRemoveBgLoading:a}=(0,p.tk)({editor:t,id:null==r?void 0:r.cardId});return(0,i.jsx)(m,{onClick:o,disabled:a})}},20728:function(e,t,n){"use strict";n.d(t,{uH:function(){return i.uH}});var i=n(302)},19426:function(e,t,n){"use strict";n.d(t,{L:function(){return r},y:function(){return o}});var i=n(91492);let r=e=>{setTimeout(()=>{e.commands.focus()})},o=(e,t,n)=>{var r;(null===(r=n.background)||void 0===r?void 0:r.type)===i.E.NONE?e.commands.updateAttributesAtPos(t,n):e.commands.updateNestedAttributesAtPos(t,n)}},1283:function(e,t,n){"use strict";n.d(t,{LT:function(){return H},Nb:function(){return T}});var i=n(52322),r=n(50019),o=n(43297),a=n(38035),l=n(75009),s=n(28535),d=n(82554),c=n(77533),u=n(43679),p=n(34071),h=n(32899),m=n(332),g=n(39429),f=n(69251),x=n(42946),v=n(54933),y=n(49929),b=n(64253),w=n(5879),C=n(87254),k=n(2784),j=n(31601),S=n(39198),A=n(86081),I=n(91722),z=n(77595),L=n(46577),E=n(9237),N=n(19732),M=n(12971),_=n(27042);let T=e=>{let{item:t}=e,{name:n,image:u,icon:p,key:h,previewImage:m,shortcut:g,badge:f}=t,x=(0,I.wP)(),{colorMode:v}=(0,r.If)(),b={iconColor:(0,r.ff)("trueblue.600","trueblue.100"),bgColor:(0,r.ff)("white","gray.900"),textColor:(0,r.ff)("gray.800","gray.100"),borderColor:(0,r.ff)("gray.200","gray.700"),invertFilter:(0,r.ff)("invert(0)","invert(.7) brightness(1.2)"),iconBgColor:(0,r.ff)("white","gray.800"),gripDotsColor:(0,r.ff)("gray.500","gray.500")};return(0,i.jsxs)(o.K,{h:"100%",bg:b.bgColor,p:2.5,pt:2,spacing:1.5,alignItems:"center",shadow:"sm",borderRadius:"xl",border:"1px",borderColor:b.borderColor,role:"group",children:[(0,i.jsx)(a.k,{justifyContent:"center",alignItems:"center",minH:"7",w:"100%",children:"cardTemplate"===t.type&&x[h]?(0,i.jsx)(z.n7,{content:x[h].jsonContent,isDark:"dark"===v}):m?(0,i.jsx)(a.k,{bg:b.iconBgColor,borderRadius:"md",children:(0,i.jsx)(l.E,{filter:b.invertFilter,src:m.src,w:"100%",maxW:"100%",alt:n(),pointerEvents:"none"})}):u?(0,i.jsx)(l.E,{src:u.src,borderRadius:"sm",h:"1.5em",w:"1.5em",objectFit:"contain",pointerEvents:"none"}):(0,i.jsx)(s.xu,{color:b.iconColor,fontSize:"xl",children:p&&(0,i.jsx)(y.G,{icon:p})})}),f&&(0,i.jsx)(d.C,{position:"absolute",top:"1",right:"2",colorScheme:"green",children:f()}),(0,i.jsxs)(o.K,{spacing:0,whiteSpace:"break-spaces",flex:"1",textAlign:"center",children:[(0,i.jsx)(c.x,{color:b.textColor,fontWeight:"600",fontSize:"xs",lineHeight:1.2,noOfLines:2,children:n()}),g&&(0,i.jsx)(c.x,{fontSize:"xs",color:"gray.500",fontWeight:"500",children:g})]})]})},R=e=>{let{item:t,onDragStart:n,onDragEnd:a,onClick:l}=e,{isDragging:d,isMouseDown:u,handleDragStart:p,handleDragEnd:h,handleClick:m,onMouseDown:g,onMouseUp:f}=(0,_.D)(n,a,l),{key:k,description:j}=t,S={gripDotsBg:(0,r.ff)("white","gray.900"),gripDotsColor:(0,r.ff)("gray.500","gray.500")};return(0,i.jsx)(b.kH,{closeOnMouseDown:!0,closeOnClick:!0,isOpen:!d&&void 0,label:(0,i.jsxs)(s.xu,{as:"span",display:"inline",children:[(0,i.jsx)(y.G,{icon:x.ioV})," ",(0,i.jsx)(c.x,{display:"inline",children:(0,i.jsx)(w.cC,{id:"Dd9uag"})}),j&&(0,i.jsx)(c.x,{textAlign:"left",color:"gray.300",maxW:"170px",children:j()})]}),"aria-label":C.ag._({id:"Dd9uag"}),placement:"top",children:(0,i.jsxs)(o.K,{"data-testid":"".concat(k,"-insert-button"),draggable:!0,onDragStart:p,onDragEnd:h,onClick:m,onMouseDown:g,onMouseUp:f,onMouseLeave:f,cursor:"grab",_hover:{transform:"scale(1.05) rotate(-0.25deg)",shadow:"lg"},transitionProperty:"common",transitionDuration:"normal",transform:"rotate(".concat(u&&!d?-1:0,"deg) translate(0, 0);"),role:"group",borderRadius:"xl",children:[(0,i.jsx)(T,{item:t}),(0,i.jsx)(s.xu,{opacity:0,_groupHover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",top:"0",left:"1.5",bg:S.gripDotsBg,color:S.gripDotsColor,borderRadius:"sm",fontSize:"sm",children:(0,i.jsx)(y.G,{icon:v.Okg,fixedWidth:!0})})]})})},H=e=>{let{icon:t,name:n,itemGroups:l,editor:d,setOpenButton:c,isOpen:x}=e,v=(0,k.useRef)(null),{GammaTooltipHiderContext:w,hideTooltips:C}=(0,b.o5)(),j={iconColor:(0,r.ff)("trueblue.600","trueblue.200"),hoverColor:(0,r.ff)("gray.100","whiteAlpha.100"),activeColor:(0,r.ff)("gray.200","whiteAlpha.200"),popoverBorderColor:(0,r.ff)("whiteAlpha.600","whiteAlpha.300"),popoverBackgroundColor:(0,r.ff)("gray.50","blackAlpha.900"),scrollGradientStart:(0,r.ff)("rgba(249, 246, 246, 0)","rgba(0,0,0,0)"),scrollGradientEnd:(0,r.ff)("rgba(249, 246, 246, 1)","rgba(0,0,0,0.9)")},A=(0,k.useCallback)(()=>{c(null)},[c]);return(0,k.useEffect)(()=>{x&&v.current&&v.current.scrollTo({top:0})},[x]),(0,i.jsxs)(u.J,{placement:"start",isOpen:x,isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,modifiers:[{name:"preventOverflow",enabled:!0,options:{padding:20}}],autoFocus:!1,children:[(0,i.jsx)(b.kH,{label:n,modifiers:[{name:"offset",options:{offset:[0,-2]}}],shouldWrapChildren:!0,"aria-label":n,placement:"left",portalProps:{appendToParentPortal:!0},children:(0,i.jsx)(p.x,{children:(0,i.jsx)(h.h,{"aria-label":n,"data-testid":"".concat(n.toLowerCase().split(" ").join("-"),"-widget-inner-button"),size:"md",icon:(0,i.jsx)(y.G,{icon:t}),color:j.iconColor,fontWeight:"500",borderRadius:"md",backdropFilter:"blur(20px)",variant:"undefined",bg:x?j.activeColor:void 0,_hover:{bg:x?j.activeColor:j.hoverColor},textShadow:"0px 1px 0px rgba(0,0,0,0)",onMouseDown:e=>(d.isFocused&&(0,E.br)(e),c(e=>e===n?null:n),!0)})})}),(0,i.jsx)(m.h,{children:(0,i.jsxs)(g.y,{bg:j.popoverBackgroundColor,borderWidth:"1px",borderColor:j.popoverBorderColor,borderRadius:"xl",shadow:"xl",zIndex:"overlay",overflow:"hidden",maxH:"90vh",w:"400px",p:0,className:"insert-widget-popover",position:"relative",children:[(0,i.jsx)(a.k,{overflow:"hidden auto",direction:"column",h:"100%",ref:v,flex:1,"data-insert-widget-popover":!0,children:(0,i.jsx)(w,{children:(0,i.jsx)(o.K,{p:2,pb:l.length>1?8:2,spacing:3,children:l.map((e,t)=>{let{subcategory:r,items:a}=e;return(0,i.jsxs)(o.K,{spacing:2,children:[(0,i.jsx)(b.NZ,{flex:"1",textAlign:"left",ml:1,children:1===l.length?n:r}),(0,i.jsx)(f.r,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr",maxW:"100%",children:a.map(e=>(0,S.pP)(d,e,!1)?null:(0,i.jsx)(R,{item:e,onDragStart:()=>D(e,d,A,C),onDragEnd:t=>O(e,d,t),onClick:()=>P(e,d,A)},e.key))})]},t)})})})}),l.length>1&&(0,i.jsx)(s.xu,{h:"12",w:"100%",position:"absolute",bottom:"0",bg:"linear-gradient(to bottom, ".concat(j.scrollGradientStart,", ").concat(j.scrollGradientEnd," 90%)"),pointerEvents:"none"})]})})]})},P=(e,t,n)=>{!(!(0,M.KB)(t)||(0,S.pP)(t,e))&&t.state.selection.empty&&(n(),(0,S.ZT)(e,j.fe.INSERT_WIDGET),"cardTemplate"===e.type&&(0,A.C)(e.key),e.execute(t))},O=(e,t,n)=>{n.preventDefault(),n.stopPropagation();let{dragEndFn:i}=e;try{i&&i(t),(0,S.ZT)(e,j.fe.INSERT_WIDGET),"cardTemplate"===e.type&&(0,A.C)(e.key)}catch(e){console.error("[InsertWidget] dragEndFn error:",e)}},D=(e,t,n,i)=>{setTimeout(()=>{n()});let r="card"===e.nodeName?(0,L.Zs)((0,N.e)()[e.key]):(0,N.e)()[e.key],o=e.dragStartFn?e.dragStartFn:r?()=>(0,S.UV)(t,r):void 0;if(!o){console.error("[InsertWidget] dragStartFn undefined",e);return}o(t),null==i||i()}},27042:function(e,t,n){"use strict";n.d(t,{D:function(){return d},k:function(){return c}});var i=n(94207),r=n(24772),o=n(2784),a=n(71383),l=n(78112),s=n(33945);let d=(e,t,n)=>{let[i,r]=(0,o.useState)(!1),[a,l]=(0,o.useState)(!1),s=(0,o.useRef)(),d=(0,o.useCallback)(t=>{r(!0),e(t)},[e]),c=(0,o.useCallback)(e=>{r(!1),l(!1),t(e)},[t]);return{isDragging:i,isMouseDown:a,handleDragStart:d,handleDragEnd:c,handleClick:(0,o.useCallback)(e=>{s.current instanceof HTMLElement&&s.current.focus(),n(e)},[n]),onMouseDown:(0,o.useCallback)(()=>{l(!0),s.current=document.activeElement||void 0},[]),onMouseUp:(0,o.useCallback)(()=>{l(!1)},[])}},c=()=>{let[e]=(0,i.a)(["(max-height: 400px)","(min-height: 401px"]),t=(0,a.CG)(l.hN),n=(0,a.CG)(l.Hl),o=(0,r.S)({base:!1,lg:!0}),d=(0,a.CG)(l.gh);return t&&!e&&!n&&o&&d!==s.q.SLIDE_VIEW}},53719:function(e,t,n){"use strict";n.d(t,{Z:function(){return g},B:function(){return L}});var i=n(52322),r=n(28535),o=n(75009),a=n(82554),l=n(49929),s=n(64253),d=n(2784),c=n(21829),u=n(78456),p=n(31601),h=n(39198),m=n(78851);let g=(0,d.forwardRef)((e,t)=>{let{query:n,editor:g}=e,f=(0,u.A)(h.xr).filter(e=>{if((0,h.pP)(g,e))return!1;let{name:t,keywords:i=[]}=e;return t().toLowerCase().includes(n.toLowerCase())||i.find(e=>e.startsWith(n.toLowerCase()))}),x=(0,d.useCallback)(e=>{if(!f[e])return;let{execute:t}=f[e],i=g.state.selection;g.chain().deleteRange({from:i.from-n.length-1,to:i.to}).run(),(0,h.ZT)(f[e],p.fe.SLASH_MENU),t(g)},[g,f,n.length]),{selectedIndex:v,selectedItemEl:y}=(0,m.Yg)({ref:t,selectItem:x,options:f});return f.length>0?(0,i.jsx)(r.xu,{"data-slash-menu-dropdown":!0,children:(0,i.jsx)(s.wb,{children:(0,i.jsx)(s.Dw,{width:"375px",children:f.map((e,t)=>{let{name:n,icon:r,iconStyle:d,image:u,shortcut:p,creditType:h,badge:m}=e;return(0,i.jsxs)(s.m9,{ref:t===v?y:null,icon:u?(0,i.jsx)(o.E,{mt:1,h:"1.5em",w:"1.25em",objectFit:"contain",src:u.src}):r?(0,i.jsx)(l.G,{icon:r,rotation:null==d?void 0:d.rotation,size:"1x",fixedWidth:!0,color:"var(--chakra-colors-trueblue-600)"}):(0,i.jsx)(i.Fragment,{}),tabIndex:t===v?0:-1,onClick:()=>x(t),command:p,children:[n(),h&&(0,i.jsx)(c.J,{type:h,colorScheme:"blackAlpha",bg:"whiteAlpha.800"}),m&&(0,i.jsx)(a.C,{ml:2,colorScheme:"green",children:m()})]},t)})})})}):(0,i.jsx)(i.Fragment,{})});var f=n(29117),x=n(77533),v=n(5740),y=n(75768),b=n(32899),w=n(5879),C=n(30240),k=n(45680),j=n(21514),S=n(9237),A=n(77834);let I=["image.custom","table2","columns","insertCardInside","embed.custom"],z=()=>I.map(e=>(0,A.UO)().find(t=>t.key===e)).filter(Boolean),L=e=>{let{editor:t}=e,n=(0,C.ye)("aiAutocomplete")&&!(0,j.M)(t),r=(0,u.A)(z),{selection:o}=t.state;return o.empty?(0,i.jsxs)(f.U,{spacing:4,color:"gray.400","data-print-hidden":!0,position:"absolute",inset:"0",contentEditable:!1,overflow:"hidden",fontFamily:"Inter, sans-serif",fontSize:"0.8em",onMouseDown:S.br,pointerEvents:"none",userSelect:"none","data-guider-highlight":"slash-menu-prompt",className:"slash-menu-prompt",children:[(0,i.jsx)(x.x,{whiteSpace:"nowrap",children:n?(0,i.jsx)(w.cC,{id:"UfUEJ5",values:{AUTOCOMPLETE_INPUT_SHORTCUT:k.o},components:{0:(0,i.jsx)(v.T,{}),1:(0,i.jsx)(v.T,{})}}):(0,i.jsx)(w.cC,{id:"HGRFT/",components:{0:(0,i.jsx)(v.T,{})}})}),(0,i.jsx)(y.h,{isAttached:!0,variant:"ghost",size:"xs",spacing:1,pointerEvents:"auto",colorScheme:"gray",transitionProperty:"opacity",transitionDuration:"normal",_hover:{opacity:1},children:r.map(e=>{let{name:n,shortcut:r,icon:o,execute:a,key:d,creditType:u}=e;return!(0,h.pP)(t,e)&&(0,i.jsx)(s.kH,{placement:"top",shortcut:r,label:(0,i.jsxs)(i.Fragment,{children:[n()," ",u&&(0,i.jsx)(c.J,{type:u})]}),children:(0,i.jsx)(b.h,{"aria-label":n(),onClick:()=>{(0,h.ZT)(e,p.fe.BLOCK_PROMPT),a(t)},icon:(0,i.jsx)(l.G,{icon:o}),color:"inherit"})},d)})})]}):null}},67577:function(e,t,n){"use strict";n.d(t,{Lt:function(){return x},PS:function(){return v},hP:function(){return b},sV:function(){return y}});var i=n(52322),r=n(55478),o=n(70339),a=n(91982),l=n(62614),s=n(81821),d=n(76801),c=n(79729),u=n(64253),p=n(2784);let[h,m]=(0,s.k)({strict:!1,name:"DropdownContext"}),[g,f]=(0,s.k)({name:"DropdownStylesContext",errorMessage:"useDropdownStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Dropdown />\" "}),x=e=>{let{isOpen:t,onClose:n,onToggle:l}=(0,r.q)(),s=(0,a.jC)("Dropdown",e),d=(0,o.D)({placement:"bottom-start"}),c=(0,p.useMemo)(()=>({isOpen:t,onClose:n,onToggle:l,popper:d}),[t,n,l,d]);return(0,i.jsx)(h,{value:c,children:(0,i.jsx)(g,{value:s,children:(0,i.jsx)(u.wb,{...e})})})},v=e=>{let{children:t,as:n,...r}=e,{popper:o,onToggle:a}=m(),s=n||l.z;return(0,i.jsx)(s,{...r,ref:o.referenceRef,onClick:(0,c.v0)(e.onClick,a),children:(0,i.jsx)(d.m.span,{__css:{pointerEvents:"none",flex:"1 1 auto",justifyContent:"flex-start",display:"flex",minW:0},children:t})})},y=e=>{var t,n;let{children:r,...o}=e,{isOpen:a,popper:l}=m(),s=f();if(!a)return null;let c=l.getPopperProps({...e,style:{visibility:a?"visible":"hidden",...e.style}});return(0,i.jsx)(d.m.div,{...o,mt:2,minWidth:"var(--chakra-sizes-48)",ref:l.popperRef,...c,__css:{zIndex:null!==(n=e.zIndex)&&void 0!==n?n:null===(t=s.list)||void 0===t?void 0:t.zIndex},children:(0,i.jsx)(u.Dw,{children:r})})},b=e=>{let{onToggle:t}=m();return(0,i.jsx)(u.m9,{...e,onClick:(0,c.v0)(e.onClick,t)})}},9069:function(e,t,n){"use strict";n.d(t,{E:function(){return f}});var i=n(52322),r=n(10625),o=n(67046),a=n(62614),l=n(99058),s=n(42946),d=n(49929),c=n(64253),u=n(5879),p=n(87254),h=n(54842),m=n(9237),g=n(19426);let f=e=>{let{editor:t,color:n,setColor:f,analyticsSource:x}=e;return(0,i.jsxs)(r.v,{isLazy:!0,onClose:()=>(0,g.L)(t),children:[(0,i.jsx)(c.kH,{placement:"top",label:(0,i.jsx)(u.cC,{id:"XAIjEI"}),"aria-label":p.ag._({id:"XAIjEI"}),children:(0,i.jsx)(o.j,{as:a.z,variant:"toolbar",rightIcon:(0,i.jsx)(d.G,{icon:s.ptq,transform:"shrink-6"}),size:"sm",onMouseDown:m.br,children:(0,i.jsx)(d.G,{icon:s.q2v})})}),(0,i.jsx)(l.q,{overflow:"hidden",children:(0,i.jsx)(h.M,{currentColor:n||null,setColor:f,source:x})})]})}},88881:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var i=n(52322),r=n(62614),o=n(49929),a=n(64253);n(2784);var l=n(26073),s=n(9237);let d=e=>{let{label:t,shortcut:n,disabled:a=!1,color:l,isActive:d=!1,onClick:u,icon:p,iconRotation:h,testId:m,children:g,...f}=e,x=(0,i.jsx)(r.z,{isDisabled:a,color:l,variant:d?"activeToolbar":"toolbar",onClick:u,"data-testid":m,onMouseDown:s.br,size:"sm",...f,children:p?(0,i.jsx)(o.G,{icon:p,rotation:h,fixedWidth:!0}):g||null});return t?(0,i.jsx)(c,{label:t,shortcut:n,children:x}):x},c=e=>{let{label:t,shortcut:n,children:r}=e;return(0,i.jsx)(a.kH,{placement:"top",portalProps:{containerRef:(0,l.jj)()},label:t,shortcut:n,children:r})}},70254:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var i=n(52322),r=n(28535),o=n(5879),a=n(2784),l=n(1547),s=n(77574),d=n(93593),c=n(59053),u=n(91492),p=n(62307);let h=e=>{if(!e.source&&e.type===u.E.IMAGE){var t;return null===(t=e.image)||void 0===t?void 0:t.source}return e.source},m=(0,a.memo)(e=>{let{editor:t,defaultMessage:n,isDark:u,setCurrentSourceKey:m,currentSourceKey:g,currentSource:f,updateCurrentBackground:x,currentBackground:v,isValidSource:y,editType:b="background",contextualTheme:w}=e,{isConnected:C}=(0,l.$)(),k=(0,a.useCallback)(e=>{let t=c.ah[e];t.backgroundType&&x({type:t.backgroundType,source:e,[t.backgroundType]:void 0})},[x]),j=(0,a.useCallback)(()=>k(g),[g,k]),S=(0,a.useCallback)(e=>{e===c.mC&&k(c.mC),m(e)},[m,k]),A=h(v);(0,a.useEffect)(()=>{A&&c.ah[A]&&m(A)},[A,m]);let I=!!(C||(null==f?void 0:f.availableOffline));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.V,{isConnected:I,description:(0,i.jsx)(o.cC,{id:"nfjtFu"}),mb:3,my:6}),(0,i.jsx)(p.M,{isValidSource:y,onChange:S,currentSource:f}),f&&(0,i.jsx)(r.xu,{opacity:I?1:.4,pointerEvents:I?"initial":"none",children:(0,i.jsx)(f.Panel,{editor:t,updateAttributes:e=>{f.backgroundType&&(f.key===d.cx?x(e):x({type:f.backgroundType,[f.backgroundType]:{...e},source:g}))},currentAttributes:f.backgroundType?f.key===d.cx?v:v[f.backgroundType]||{}:{},resetToPlaceholder:j,editType:b,isDark:u,contextualTheme:w})}),g===c.mC&&n]})});m.displayName="BackgroundPanel"},51088:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});var i=n(52322),r=n(2784),o=n(93593),a=n(59053),l=n(21800),s=n(70254),d=n(47055);let c=e=>{let{editor:t,updateNestedAttributes:n,background:c,defaultMessage:u,isDark:p,isValidSource:h}=e,{currentEditBackgroundDrawerSourceKey:m,setBackgroundDrawerSourceKeyAction:g}=(0,l.jn)(),f=a.ah[m],x=(0,r.useCallback)(e=>{f.key===o.cx?n({background:e}):n({background:{...e,accentId:void 0}})},[null==f?void 0:f.key,n]),v=(0,r.useCallback)(e=>h?h(e)&&(0,d.bH)(e):(0,d.bH)(e),[h]);return(0,i.jsx)(s.O,{editor:t,isDark:p,isValidSource:v,defaultMessage:u,currentBackground:c,updateCurrentBackground:x,currentSourceKey:m,setCurrentSourceKey:g,currentSource:f})}},47055:function(e,t,n){"use strict";n.d(t,{Rr:function(){return o},bH:function(){return r}});var i=n(93593);n(91492);let r=e=>!!e.backgroundType,o=e=>e.key!==i.cx},65702:function(e,t,n){"use strict";n.d(t,{TI:function(){return r},pw:function(){return l}});var i,r,o=n(8848);(i=r||(r={})).CREATE_COMMENT_FROM_SELECTION="createCommentFromSelection",i.OPEN_POPUP_COMMENT="openPopupComment",i.POPUP_COMMENT_TOGGLED="popupCommentToggled",i.OPEN_THEME_DRAWER="openThemeDrawer",i.OPEN_PAGE_SETUP="openPageSetup",i.OPEN_PRESENT_MODE_CONTEXT_MENU="openPresentModeContextMenu";class a extends o.v{}let l=new a},20066:function(e,t,n){"use strict";n.d(t,{Y:function(){return s},i:function(){return l}});var i=n(27191),r=n(12971),o=n(31335),a=n(9936);let l=new i.H$("aiModifications");class s{getExistingRangeId(e,t){let n=(0,a.G8)(e,t);if(!n)return null;let i=Object.entries(this.ranges).find(t=>{let[i,r]=t,o=(0,a.G8)(e,r);return!!o&&n.from===o.from&&n.to===o.to});return i?i[0]:null}getRangeParentCardId(e,t){let n=this.ranges[t];if(!n)return null;let i=(0,a.G8)(e,n);if(!i)return null;let l=i.from,s=e.doc.nodeAt(l),d=e.doc.resolve(l),c=s&&(0,o.KH)(s)?{node:s,pos:l,start:d.start,depth:d.depth}:(0,r.nv)(d,o.KH)[0];return c?c.node.attrs.id:null}getRange(e,t){let n=this.queuedMoveRanges[t];if(n)return n;let i=this.ranges[t];return i?(0,a.G8)(e,i):null}apply(e,t){let n=e.getMeta("aiModificationAction");n&&"setInteractionRange"===n.type&&this.setInteractionRange(n,t);let i=e.getMeta("applyingAiModification");if(i)return this.handleRangeMapping(t,e,i.rangeId),this;let r=e.getMeta("appendedTransaction");return r&&this.handleAppendedTransaction(t,e,r),this}handleAppendedTransaction(e,t,n){if(n.getMeta("applyingAiModification")){let i=n.getMeta("applyingAiModification");i&&this.handleRangeMapping(e,t,i.rangeId)}}handleRangeMapping(e,t,n){let i=this.getRange(e,n);if(!i){console.warn("[AiModificationState] Could not find range for rangeId=".concat(n));return}let r={from:i.from,to:t.mapping.map(i.to)};(i.from!==r.to||i.to!==r.to)&&this.enqueueMoveInstructions(n,r)}enqueueMoveInstructions(e,t){this.queuedMoveRanges[e]=t}flushMoveInstructionQueue(e){for(let[t,n]of Object.entries(this.queuedMoveRanges))this.ranges[t]=(0,a.bb)(e,n);this.queuedMoveRanges={}}setInteractionRange(e,t){this.ranges[e.rangeId]=e.range}constructor(){this.queuedMoveRanges={},this.ranges={}}}},19273:function(e,t,n){"use strict";n.d(t,{F:function(){return k},X:function(){return C}});var i=n(37243),r=n(27191),o=n(18755),a=n(92662),l=n(41019),s=n(13090),d=n(52254),c=n(30240),u=n(71383),p=n(78112),h=n(9936),m=n(98775),g=n(54317),f=n(55898),x=n(52780);let v=new r.H$("autocomplete"),y=e=>new r.Sy({key:v,state:{init:()=>({loading:!1,insertedRange:null}),apply(e,t){let n=e.getMeta("autocompleteEvent");return(null==n?void 0:n.type)==="reset"?{loading:!1,insertedRange:null}:(null==n?void 0:n.type)==="load"?{loading:!0,insertedRange:null}:(null==n?void 0:n.type)==="insert"?{loading:!1,insertedRange:n.range}:t}},props:{decorations(e){let t=[],n=v.getState(e),{selection:r,doc:o}=e,{loading:a,insertedRange:l}=n||{};if(a){let e=x.p.widget(r.from,()=>{let e=document.createElement("span");return e.className="autocomplete-loading",e});t.push(e)}if(l){let e;try{e=(0,i.b5)(o,l,e=>e.isTextblock)}catch(t){e=[]}e.forEach(e=>{let{node:n,pos:i}=e,r=Math.max(i+1,l.from),o=Math.min(i+n.nodeSize-1,l.to),a=x.p.inline(r,o,{class:"autocomplete-inserted"});t.push(a)})}return t.length?x.EH.create(o,t):x.EH.empty}}}),b=new(n(57179)).u({systemPrompt:"You are helping a user write a document. Your job is to continue what they've written by writing 2-3 additional sentences. Respond with the just the additional text, and no additional conversation.".trim(),userPrompt:"Continue the following text. Respond with at most 3 sentences.\n\n{{text}}".trim(),variables:["text"],params:{maxTokens:200,temperature:1,model:"gpt-3.5-turbo"}}),w=/(\+\+\+)/,C=4e3,k=i.hj.create({name:"autocomplete",addProseMirrorPlugins(){return[y(this.editor)]},addCommands:()=>({autoOutline:()=>e=>{let{editor:t,state:n,tr:r}=e,{selection:o,doc:a}=n,{$from:l,from:s}=o,d=(0,h.jS)(n,l.after()),c=(0,i.Kk)(g.KH)(o);return!!c&&!!d&&((0,f.Ck)(a,c.pos,s),r.setMeta("autocompleteEvent",{type:"load"}),!0)},autoComplete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{var n;let{editor:i,state:g,tr:x}=t,{selection:v,doc:y}=g,{from:w}=v,k=(0,h.jS)(g,w);if(!(c.VH.get("aiAutocomplete")&&v.empty&&v instanceof r.Bs&&k))return!1;let j=(0,u.bh)().getState(),S=null===(n=(0,p.yx)(j))||void 0===n?void 0:n.organization;if(!(0,d.C)("autocomplete",S))return!1;let A=(0,f.Ck)(y,Math.max(v.from-1e3,0),v.from),I=(0,a.xk)(A).slice(-200),z=(0,a.Zs)(I),L=y.textBetween(v.from-10,v.to);x.setMeta("autocompleteEvent",{type:"load"});let E=(0,l.nZ)(),N=b.prepare({interactionId:E,variables:{text:z},params:e}),M=performance.now(),_={interactionId:E,interface:"autocomplete",inputContent:A};return(0,l.hq)(_),(0,o.I)(N,E,{timeout:5e3,retries:1}).then(e=>{var t;let n=(0,h.XV)(g,k);if(!e||!n)throw Error("No completion or insertPos");e=e.trim();let r={from:n,to:n},o=i.chain().insertMarkdownAt(r,e).command(e=>{let{tr:t}=e,n=(0,m.a)(t);return!n||(r.to=n.to,t.setSelection(n).scrollIntoView(),!0)}).setMeta("autocompleteEvent",{range:r,type:"insert"});(null===(t=g.doc.resolve(n).nodeBefore)||void 0===t?void 0:t.isText)&&!(L.endsWith(" ")||L.endsWith("\n"))&&o.insertContentAt(n," ",{updateSelection:!1}),o.run(),(0,l.gb)({..._,outputContent:e,latency:performance.now()-M,timeToComplete:performance.now()-M}),(0,s.d)("autocomplete",S,E),setTimeout(()=>{i.commands.setMeta("autocompleteEvent",{type:"reset"})},C)}).catch(e=>{console.warn("Error fetching autocomplete",e),i.commands.setMeta("autocompleteEvent",{type:"reset"})}),!0}}}),addInputRules:()=>[new i.VK({find:w,handler:e=>{let{range:t,chain:n}=e;n().setTextSelection(t).deleteSelection().autoComplete().run()}})]})},26923:function(e,t,n){"use strict";n.d(t,{Mw:function(){return a},eV:function(){return o},gk:function(){return l},ml:function(){return s},xF:function(){return r}});var i=n(37164);let r=e=>t=>{let n=t.getAttribute("bookmark");if(!n)return!1;let i=e.bookmarks[n];return!!i&&i.attrs},o=e=>t=>{let n=t.getAttribute("bookmark");if(!n)return!1;let i=e.bookmarks[n];return!!i&&i.content},a=(e,t)=>e.bookmarks[t],l=()=>({bookmarks:{}}),s=(e,t)=>{let n=d.generateBookmarkId();return e.bookmarks[n]=t,n},d={generateBookmarkId:()=>(0,i.x0)(5)}},22982:function(e,t,n){"use strict";n.d(t,{D:function(){return h},F:function(){return p}});var i=n(27191),r=n(90025),o=n(40914),a=n(78112),l=n(12971),s=n(9936),d=n(23186),c=n(54317);let u=(e,t)=>{let{content:n}=e.state.doc.slice(t.from,t.to);return(0,r.c)(e,n)},p=(e,t)=>{let{selection:n}=e.state,r=(0,l.Ru)(n.$from,c.KH)[0],o=r&&(0,d.NE)(r.node,r.pos);if(!r||!o)throw Error("Cant find parent card for selection ".concat(n));let p={from:r.pos,to:r.pos+r.node.nodeSize},m={from:o.pos+1,to:o.pos+o.node.nodeSize-1},g=n.$from.blockRange(n.$to),f={from:g.start,to:g.end},x={range:(0,s.bb)(e.state,m),html:u(e,m)},v={range:(0,s.bb)(e.state,n),html:u(e,n)},y={range:(0,s.bb)(e.state,f),html:u(e,f)},b=n instanceof i.qv&&(0,c.KH)(n.node)||n.empty||0===v.html.trim().length||n instanceof i.qv&&n.node.isAtom,w=!n.$from.parent.eq(n.$to.parent)||0===g.$from.parentOffset&&g.$to.parentOffset===g.$to.parent.content.size,C=v,k="selectionRange";b?(C=x,k="cardContent"):w&&(C=y,k="blockRange");let j=h(t),S=(0,a.Pu)(t.getState());return{card:{cardId:r.node.attrs.id,range:(0,s.bb)(e.state,p),html:u(e,p),attrs:r.node.attrs},cardContent:x,blockRange:y,selectionRange:v,defaultRange:C,selection:n,outline:j,selectedDefaultRange:k,theme:S}},h=e=>{let t=e.getState(),n=(0,a.X9)(t),i=(0,o.qN)(t);return Object.keys(n.tree).map(e=>{var t;return null===(t=i[e])||void 0===t?void 0:t.title}).filter(e=>!!e).join("\n")}},66490:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i=new(n(27191)).H$("annotation")},36273:function(e,t,n){"use strict";n.d(t,{N:function(){return c},O:function(){return u}});var i=n(27191),r=n(38564),o=n(36069),a=n(37243),l=n(52780),s=n(66490);class d{apply(e,t){let n=e.getMeta(c);if(n&&n.type)return"createDraftComment"===n.type&&this.createDraftComment(n,t),"removeDraftComment"===n.type&&this.removeDraftComment(n,t),this;let i=e.getMeta(s.Z);if(i&&i.type)return"refreshAnnotationDecorations"===i.type&&this.createDecorations(t),this;if(r.Gt.getState(t).isChangeOrigin){try{this.createDecorations(t)}catch(e){console.log("could not create decorations: ".concat(e.message),e)}return this}return this.decorations=this.decorations.map(e.mapping,e.doc),this}removeDraftComment(e,t){return e.comments.forEach(e=>{let{targetId:t}=e;delete this.draftComments[t]}),this.createDecorations(t),this}createDraftComment(e,t){this.draftComments[e.comment.targetId]=e.comment,this.createDecorations(t)}createDecorations(e){let t=r.Gt.getState(e);if(!t.binding)return this;let{doc:n,type:i,binding:s}=t,d=[];for(let t of Object.values(this.draftComments))try{var c,u;let r=(0,o.SF)(n,i,t.relativePos,s.mapping);if(null==r)continue;let p=e.doc.resolve(r),h=t=>{let n=(0,a.N2)(e.doc,e=>e===t);if(!n||0===n.length)throw Error();return n[0].pos},m=(null===(c=p.nodeAfter)||void 0===c?void 0:c.isBlock)?r:h(p.parent),g=m+((null===(u=p.nodeAfter)||void 0===u?void 0:u.isBlock)?p.nodeAfter.nodeSize:p.parent.nodeSize);d.push(l.p.node(m,g,{},{isDraftComment:!0,comment:t}))}catch(e){console.log("[DraftCommentState] error: $".concat(e.message))}return this.decorations=l.EH.create(e.doc,d),this}absToRel(e,t){let n=r.Gt.getState(e),{type:i,binding:a}=n;if(!n.binding)throw Error("Y.State non initialized");return(0,o.JR)(t,i,a.mapping)}constructor(){this.draftComments={},this.decorations=l.EH.empty}}let c=new i.H$("draftComments"),u=()=>new i.Sy({key:c,state:{init:()=>new d,apply:(e,t,n,i)=>t.apply(e,i)},props:{decorations(e){let{decorations:t}=this.getState(e);return t}}})},94672:function(e,t,n){"use strict";n.d(t,{l:function(){return eB}});var i=n(52322),r=n(28535),o=n(73200),a=n(64253),l=n(37164),s=n(2784),d=n(1547),c=n(30240),u=n(71383),p=n(27821),h=n(38799),m=n(27210),g=n(78112),f=n(23491),x=n(92035),v=n(40382),y=n(3063);let b=e=>{let{editor:t,decorations:n}=e,i=n.filter(e=>!!e.spec.isMobileAnnotation),[r,o]=(0,s.useState)(null),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(0===i.length){null!==a.current&&(document.removeEventListener("touchstart",a.current),a.current=null,o(null));return}a.current||(o({left:i[0].spec.offsetX,top:i[0].spec.offsetY}),a.current=e=>{e.target.closest(".mobile-add-comment-widget")||t.commands.setMobileAddBlockComment(null)},document.addEventListener("touchstart",a.current))},[t,i]),r};var w=n(70065),C=n(43997),k=n(65702),j=n(54563),S=n(97134),A=n(6167),I=n(29117),z=n(54933),L=n(38035),E=n(43297),N=n(87651),M=n(42946),_=n(5879),T=n(25925),R=n(9237),H=n(62614),P=n(82554),O=n(49929);let D=(0,s.memo)(e=>{let{isMobile:t,icon:n,badgeCount:r,tooltip:o,children:l,...s}=e;t&&delete s._hover;let d=(0,i.jsx)(I.U,{className:"block-comment-button-wrapper",children:(0,i.jsxs)(H.z,{variant:"custom",borderRadius:"full",size:"sm",bgGradient:"none",color:"yellow.600",boxSize:t?10:8,border:t?"":"1px solid white",transitionProperty:"common",transitionDuration:"normal",_hover:t?{}:{bgGradient:"linear(to-b, yellow.300, yellow.400)",color:"yellow.700"},...s,children:[n&&(0,i.jsx)(O.G,{size:t?"lg":"sm",icon:n}),l&&l,void 0!==r&&(0,i.jsx)(P.C,{colorScheme:"yellow",borderRadius:"full",pos:"absolute",bottom:-1,right:-1,shadow:"base","data-testid":"badge-count",children:r})]})});return o?(0,i.jsx)(a.kH,{placement:"left",label:o,children:d}):d});D.displayName="GenericBlockCommentButton";var W=n(76643),F=n(84636),B=n.n(F),G=n(46625),U=n(6717),V=n(85598);let q=e=>{let{comments:t,reactions:n,draftComment:i}=e;if(i&&i.text.trim().length>0)return"draft";if(0===t.length)return 0===n.length?"fresh":"reactions-only";if(1===t.length)return"single-thread";if(t.length>1)return"multiple-threads";throw Error("Invalid button state")},K=e=>{let{comments:t,reactions:n}=e,i={};return t.forEach(e=>{i[e.id]=[e.user],e.replies.forEach(t=>{i[e.id].push(t.user)})}),Object.entries(i).forEach(e=>{let[t,n]=e;i[t]=B()(n,"id")}),i},Y=e=>{let{reactions:t}=e,n={};return t.forEach(e=>{n[e.emoji]=B()(e.reactions.flatMap(e=>e.users),"id")}),n},X=e=>{let{comments:t,reactions:n,draftComment:i}=e;return{state:q({comments:t,reactions:n,draftComment:i}),allCount:t.reduce((e,t)=>{var n;return e+((null===(n=t.replies)||void 0===n?void 0:n.length)||0)},0)+n.reduce((e,t)=>e+t.count,0)+t.length,overflowReactionCount:Math.max(0,n.length-7)}},$=e=>{let{comments:t,reactions:n}=e,i=n.flatMap(e=>e.reactions.map(e=>e.users)).flat(),r=t.map(e=>e.user).concat(t.map(e=>e.replies.map(e=>e.user)).flat()).filter(Boolean),o=K({comments:t,reactions:n}),a=B()([...r,...i],"id"),l=[],s=Y({reactions:n});return t.forEach(e=>{l.push(o[e.id])}),{allAvatars:a,reactionAvatars:s,commentAvatars:l}},Z=e=>{let{popup:t,isMobile:n,isHovered:i,comments:r,reactions:o,draftComment:a,enableReactions:l}=e,{state:d}=X({comments:r,reactions:o,draftComment:a}),c=n||l&&i||!l&&i&&"fresh"!==d||null!==t;return(0,s.useEffect)(()=>{n||(c?document.body.classList.add("is-taking-action"):document.body.classList.remove("is-taking-action"))},[c,n]),{isExpanded:c}},Q=e=>{let{isOpen:t,popupRef:n,onClose:i}=e;(0,W.O)({ref:n,handler:e=>{var n,r,o,a,l,s,d;(0,x.f_)()&&!(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest(".".concat(U.G," [data-controls-toggle-button]")))||!t||(null==e?void 0:null===(r=e.target)||void 0===r?void 0:r.closest("[data-controls-toggle-button]"))||(null==e?void 0:null===(o=e.target)||void 0===o?void 0:o.closest('[data-target-name="emoji-list"]'))||(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.closest('[data-target-name="mention-list"]'))||(null==e?void 0:null===(l=e.target)||void 0===l?void 0:l.closest('[data-target-name="reaction-emoji-picker"]'))||(null==e?void 0:null===(s=e.target)||void 0===s?void 0:s.closest(".chakra-menu__menu-list"))||(null==e?void 0:null===(d=e.target)||void 0===d?void 0:d.closest('[data-target-name="doc-mention-popup"]'))||i()}})},J=e=>{let{editor:t,getPos:n}=e,i=t.view.nodeDOM(n()),[r,o]=(0,s.useState)(null);return((0,s.useLayoutEffect)(()=>{o((null==i?void 0:i.offsetHeight)||100)},[]),null===r)?null:Math.min(r,G.yK)};var ee=n(77533),et=n(81540),en=n(38045),ei=n(42907);let er=(0,en.E)(r.xu),eo=(0,s.memo)(e=>{let{emojis:t}=e;return(0,i.jsx)(i.Fragment,{children:null==t?void 0:t.map((e,n)=>0===n?(0,i.jsx)(er,{initial:{x:"6px",y:"5px"},textShadow:(null==t?void 0:t.length)>1?"0px 1px 3px rgba(0,0,0,.4)":"none",fontSize:"20px",position:"absolute",zIndex:1,children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},n):1===n?(0,i.jsx)(er,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"10deg",x:"18px",y:"-3px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},n):2===n?(0,i.jsx)(er,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:"-3px",y:"16px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},n):3===n?(0,i.jsx)(er,{zIndex:0,initial:{x:"10px",y:"6px",scale:.7},animate:{scale:.7,rotate:"-10deg",x:"-3px",y:"-3px"},position:"absolute",children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:e})},n):null)})});eo.displayName="EmojiCluster";let ea=(0,en.E)(r.xu),el=(0,s.memo)(e=>{let{emoji:t,emojiCluster:n,isMobile:o,user:l,canReact:d,reaction:c,badgeCount:u,onClick:p,...h}=e,m=(0,V.gq)(c),g=!!m.find(e=>e.id===(null==l?void 0:l.id)),f=(0,ei.Rf)({users:m,selfUserId:(null==l?void 0:l.id)||""}),x=(0,i.jsxs)(r.xu,{alignContent:"center",children:[(0,i.jsx)(_.cC,{id:"mRnNF/",values:{usersLabel:f,emoji:t},components:{0:(0,i.jsx)(ee.x,{as:"span",color:"gray.300"})}}),d&&(0,i.jsx)(ee.x,{display:"block",color:"gray.500",children:g?(0,i.jsx)(_.cC,{id:"fb/FjL"}):(0,i.jsx)(_.cC,{id:"AG3H1y"})})]}),v=(0,i.jsx)(I.U,{className:"block-comment-button-wrapper",children:(0,i.jsxs)(H.z,{variant:"ghost",borderRadius:"full",size:"sm",boxSize:o?10:8,transitionProperty:"common",transitionDuration:"normal",...g?{bg:"gray.100",borderColor:o?"blackAlpha.200":"gray.200"}:{},...h,onClick:e=>{d&&p&&p(e)},pos:"relative",children:[(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(et.$,{size:"sm"}),children:(0,i.jsxs)(ee.x,{pos:"absolute",inset:0,as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"},":hover::before":o?{}:{backgroundColor:"transparent"}}},fontSize:o?"1.5em":"1.25em",children:[!n&&(0,i.jsx)(ea,{initial:{x:"6px",y:"5px"},fontSize:"20px",position:"absolute",zIndex:1,children:(0,i.jsx)("em-emoji",{size:0,native:!0,id:t})}),(0,i.jsx)(T.M,{children:(0,i.jsx)(eo,{emojis:n})})]})}),void 0!==u&&(0,i.jsx)(P.C,{colorScheme:"yellow",borderRadius:"full",pos:"absolute",bottom:-1,right:-1,shadow:"base",zIndex:1,children:u})]})});return x?(0,i.jsx)(a.kH,{placement:"left",label:x,children:v}):v});el.displayName="ReactionButton";let es={bg:"yellow.600",color:"yellow.100",_hover:{bg:"yellow.600",color:"yellow.100"}},ed={bg:"yellow.100",color:"yellow.800"},ec="linear(to-b, yellow.200, yellow.300)",eu=e=>{e.stopPropagation()},ep=(0,s.memo)(e=>{let{user:t,userCanComment:n,isExpanded:o,isMobile:a,comments:l,reactions:s,draftComment:d,onClickThread:c,onClickAddComment:u,onClickAddReaction:p,onClickReactionsOverflow:h,onClickExistingReaction:m,onClosePopup:g,hideAddCommentButton:f=!1,viewingCommentId:x,enableReactions:v,blockAllowsCommenting:y,...b}=e,{state:w,allCount:C,overflowReactionCount:k}=X({comments:l,reactions:s,draftComment:d}),j=[];if(!o)switch(w){case"draft":j.push((0,i.jsx)(D,{isMobile:a,icon:M.OfB,onClick:u,bg:o?"gray.100":"white",_hover:ed,color:"gray.600"},"draft"));break;case"fresh":j.push((0,i.jsx)(D,{isMobile:a,icon:z.XoX,bg:o?"gray.100":"white",_hover:ed,color:"gray.600",bgGradient:ec,tooltip:(0,i.jsx)(_.cC,{id:"oFsfkI"}),"data-testid":"create-comment-button",onClick:u},"fresh"));break;case"reactions-only":if(s.length>0){let e=s[0],r=s.reduce((e,t)=>(e.push(t.emoji),e),[]);j.push((0,i.jsx)(el,{isMobile:a,onClick:t=>{m(e),t.stopPropagation()},reaction:e,user:t,badgeCount:C,emoji:e.emoji,"data-testid":"reaction-".concat(e.emoji),emojiCluster:r,canReact:n&&y},e.emoji))}break;case"single-thread":j.push((0,i.jsx)(D,{isMobile:a,icon:z.Mzg,bgGradient:ec,badgeCount:C,"data-testid":"single-thread"},"first-thread"));break;case"multiple-threads":j.push((0,i.jsx)(D,{isMobile:a,bgGradient:ec,icon:z.lXL,badgeCount:C,"data-testid":"multiple-threads"},"first-thread"))}return(o&&(l.forEach((e,t)=>{let n=null!==x&&e.id===x,r=n?es:{},o=n?()=>g():()=>c(e);j.push((0,i.jsx)(D,{isMobile:a,icon:z.Mzg,badgeCount:e.replies.length+1,bgGradient:ec,onClick:o,"data-testid":"thread-".concat(t),...r},0===t?"first-thread":"thread-".concat(t)))}),v&&(s.slice(0,7).forEach(e=>{j.push((0,i.jsx)(el,{isMobile:a,onClick:t=>{m(e),t.stopPropagation()},"data-testid":"reaction-".concat(e.emoji),reaction:e,user:t,badgeCount:e.count,emoji:e.emoji,canReact:n&&y},e.emoji))}),k>0&&j.push((0,i.jsxs)(D,{isMobile:a,onClick:()=>{h()},bg:"gray.100",color:"yellow.800",_hover:ed,children:["+",k]},"reactions-overflow"))),"draft"===w?j.push((0,i.jsx)(D,{isMobile:a,icon:M.OfB,tooltip:(0,i.jsx)(_.cC,{id:"x8Zuns"}),onClick:u,bg:o?"gray.100":"white",_hover:ed,"data-testid":"create-comment-button-draft",color:"gray.600"},"draft")):f||a||j.push((0,i.jsx)(D,{isMobile:a,icon:z.XoX,bgGradient:ec,tooltip:(0,i.jsx)(_.cC,{id:"oFsfkI"}),onClick:u,bg:o?"gray.100":"white",_hover:ed,"data-testid":"create-comment-button",color:"gray.600"},"fresh")),v&&n&&!f&&!a&&j.push((0,i.jsx)(D,{isMobile:a,icon:z.wqT,bgGradient:ec,onClick:()=>{p()},tooltip:(0,i.jsx)(_.cC,{id:"9OEgyT"}),"data-testid":"add-reaction-button",bg:"gray.100",_hover:ed,color:"gray.600"},"add-reaction"))),a)?(0,i.jsx)(L.k,{className:"block-comments-inner-stack",userSelect:"none",transitionProperty:"all",transitionDuration:"fast",flexDir:"row",flexWrap:"wrap",onClick:eu,children:j}):(0,i.jsxs)(E.K,{className:"block-comments-inner-stack",userSelect:"none",spacing:0,width:"34px",transitionProperty:"all",transitionDuration:"fast",onClick:eu,borderRadius:"full",boxShadow:"0 0 0 2px rgba(0,0,0,.1)",bg:"white",border:"1px solid transparent",onMouseDown:R.br,"data-testid":"block-comments-buttons",...b,children:[(0,i.jsx)(r.xu,{children:j[0]}),(0,i.jsx)(N.U,{in:o,startingHeight:0,transitionEnd:{enter:{overflow:"initial"}},children:(0,i.jsx)(T.M,{children:j.length>1&&(0,i.jsx)(E.K,{spacing:1,children:j.slice(1)})})})]})});ep.displayName="BlockCommentsButtons";let eh=(0,s.memo)(e=>{let{onClickAddComment:t,onClickAddReaction:n,...o}=e;return(0,i.jsx)(r.xu,{className:"mobile-add-comment-widget",pos:"absolute",transform:"translate(-50%,-50%) scale(1)",mt:-6,background:"white",p:"4px",borderRadius:"full",shadow:"lg",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1);",zIndex:9,...o,children:(0,i.jsxs)(I.U,{spacing:1,children:[(0,i.jsx)(D,{isMobile:!0,icon:z.XoX,bg:"white",_hover:ed,color:"gray.600",bgGradient:ec,onClick:()=>{t()}},"fresh"),(0,i.jsx)(D,{isMobile:!0,icon:z.wqT,bgGradient:ec,onClick:()=>{n()},bg:"white",_hover:ed,color:"gray.600"},"add-reaction")]})})});eh.displayName="MobileAddCommentWidget";var em=n(93274),eg=n(109);let ef=(0,s.memo)(e=>{let{comments:t,reactions:n,isExpanded:r,avatarMax:o=4}=e,{allAvatars:a,reactionAvatars:l,commentAvatars:s}=$({comments:t,reactions:n});return(0,i.jsxs)(E.K,{className:"avatar-group-popup",spacing:1,transitionProperty:"common",transitionDuration:"fast",onClick:e=>{e.stopPropagation()},p:"1px",pl:3,userSelect:"none",children:[!r&&(0,i.jsx)(em.H,{max:o,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:a.map((e,t)=>(0,i.jsx)(eg.q,{zIndex:a.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"unexpanded-".concat(null==e?void 0:e.id)))}),r&&(0,i.jsxs)(i.Fragment,{children:[s.map((e,t)=>(0,i.jsx)(em.H,{max:o,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:e.map((e,t)=>(0,i.jsx)(eg.q,{zIndex:a.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"comment-".concat(null==e?void 0:e.id)))},"comment-".concat(t))),n.slice(0,7).map((e,t)=>(0,i.jsx)(em.H,{max:o,style:{fontSize:"var(--chakra-fontSizes-sm)"},size:"sm",justifyContent:"start",opacity:[0,0,0,1],transitionProperty:"common",transitionDuration:"normal",position:"relative",children:l[e.emoji].map((e,t)=>(0,i.jsx)(eg.q,{zIndex:a.length-t,mr:-3,name:null==e?void 0:e.displayName,src:null==e?void 0:e.profileImageUrl,shadow:"base",ignoreFallback:!0},"reaction-".concat(null==e?void 0:e.id)))},"reaction-".concat(t)))]})]})});ef.displayName="AvatarGroupPopup";var ex=n(87254);let ev=e=>{let{isMobile:t,emoji:n}=e,r=ex.ag._({id:"r2ONxg"});return(0,i.jsx)(s.Suspense,{fallback:(0,i.jsx)(et.$,{size:"sm"}),children:(0,i.jsxs)(ee.x,{as:"span",sx:{".emoji-mart-emoji":{fontSize:"1em",span:{cursor:"inherit",fontSize:"1em !important"}}},children:[(0,i.jsx)("em-emoji",{size:0,native:!0,id:n})," ",r,"."]})})};var ey=n(16618),eb=n(3699),ew=n(18730),eC=n(1613);let ek=e=>{let{onCancel:t,editor:n,commentIdToHighlight:r,userCanComment:o,blockAllowsCommenting:a,getPos:l,draftComment:s,onCommentDraftUpdate:d,onCommentSave:c,isMobile:p}=e,{user:h}=(0,S.SE)(),m=(0,u.CG)(g.yx),f=(0,ey.$m)(m,h),x=J({editor:n,getPos:l}),v=f&&!h&&a;if(null===x)return null;let y=(0,i.jsxs)(L.k,{overflowY:"auto",direction:"column",className:"comments-list",p:p||v?0:4,children:[v&&m&&(0,i.jsx)(eb.I,{accessLink:f,doc:m,className:"comments-sign-up",showDivider:!1}),o&&(0,i.jsx)(ew.A,{draftComment:s,user:h,showUser:p,showBorder:p,onCommentDraftUpdate:d,onCommentSave:c,commentIdToHighlight:r,alwaysShowButtons:p})]});return p?y:(0,i.jsx)(eC.KT,{offsetFromTop:x,children:y})};var ej=n(52138);let eS=e=>{let{isMobile:t,editor:n,onReactionClick:r,getPos:o}=e,a=J({editor:n,getPos:o});if(null===a)return null;let l=(0,i.jsx)(L.k,{bg:"white",p:"0",zIndex:"tooltip","data-testid":"add-reaction-popup","data-target-name":"reaction-emoji-picker",boxShadow:"none",sx:{".emoji-mart":{border:"none"}},overflow:"hidden",justify:"center",children:(0,i.jsx)(ej.h5,{perLine:9,handlePick:r,shouldFocusSearch:!t})});return t?l:(0,i.jsx)(eC.KT,{offsetFromTop:a,children:l})};var eA=n(32981),eI=n(26468),ez=n(73751),eL=n(97217),eE=n(2338);let eN=(0,s.forwardRef)(function(e,t){let{isMobile:n,children:o,closePopup:a,drawerMinHeight:l}=e;if(n){let e=l||"calc(calc(100vh - calc(100vh - 100%)) - 1rem)";return(0,i.jsxs)(eA.d,{placement:"bottom",isOpen:!0,onClose:a,children:[(0,i.jsx)(eI.Z,{}),(0,i.jsxs)(ez.s,{minH:e,maxH:e,borderTopRadius:"xl",className:"comments-wrapper","data-block-comments-popup":!0,children:[(0,i.jsx)(eL.f,{p:6,pb:2,className:eC.U6,children:o}),(0,i.jsx)(eE.o,{})]})]})}return(0,i.jsx)(r.xu,{ref:t,children:o})});var eM=n(74409);let e_=e=>{let{onCancel:t,reactions:n,onClickExistingReaction:r,editor:o,getPos:a,user:l,userCanComment:d,blockAllowsCommenting:c,isMobile:u}=e,p=J({editor:o,getPos:a}),h=n.slice(u?0:7),m=h.map(e=>(0,i.jsx)(el,{isMobile:!0,onClick:t=>{r(e),t.stopPropagation()},mr:2,mb:4,reaction:e,user:l,canReact:d&&c,badgeCount:e.count,emoji:e.emoji},e.emoji));if((0,s.useEffect)(()=>{0===h.length&&t()},[t,h]),null===p)return null;let g=(0,i.jsxs)(E.K,{spacing:4,children:[(0,i.jsx)(eM.X,{size:"md",children:(0,i.jsx)(_.cC,{id:"7ZMg79"})}),(0,i.jsx)(L.k,{flexWrap:"wrap",children:m})]});return u?g:(0,i.jsx)(eC.KT,{offsetFromTop:p,children:(0,i.jsx)(L.k,{p:4,px:2,pb:0,flexWrap:"wrap",children:m})})};var eT=n(10001);let eR=e=>{let{comment:t,editor:n,commentIdToHighlight:r,userCanComment:o,blockAllowsCommenting:a,getPos:l,isMobile:s,closePopup:d}=e,c=n.gammaDocId,{user:p}=(0,S.SE)(),h=(0,C.v9)(g.gh),m=(0,u.CG)(g.yx),f=(0,ey.$m)(m,p),x=J({editor:n,getPos:l});if(null===x||!t)return null;let v=(0,i.jsxs)(L.k,{direction:"column",className:"comments-list","data-testid":"thread-view-popup",children:[f&&!p&&m&&a&&(0,i.jsx)(eb.I,{accessLink:f,doc:m,className:"comments-sign-up"}),(0,i.jsx)(eT.q,{instanceType:s?"drawer":"popup",userCanComment:o,commentIdToHighlight:r,editor:n,comment:t,selfUser:p,docId:c,editorMode:h,isRootComment:!0,borderBottomWidth:"none",closePopup:d,p:s?0:4,pb:4},t.id)]});return s?v:(0,i.jsx)(eC.KT,{offsetFromTop:x,children:v})};var eH=n(69971),eP=n(49214);let eO=e=>{let{getPos:t,editor:n,reactions:i}=e,{user:r}=(0,S.SE)(),[o]=(0,eH.Os4)(),[a]=(0,eH.d6Z)(),l=(0,s.useCallback)(e=>{let{reaction:t}=e;if(!r)return;let i=t.docId;1===t.count&&n.commands.deleteAnnotation(t.targetId);let o=t.count-1,l=t.users.filter(e=>(null==e?void 0:e.id)!==(null==r?void 0:r.id));a({variables:{reactionInput:{docId:i,targetId:t.targetId,emoji:t.emoji}},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(i),fragment:eH.wk2,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.removeReaction]}})},optimisticResponse:{removeReaction:{docId:i,targetId:t.targetId,targetType:eH.Lmy.Decoration,count:o,emoji:t.emoji,users:l,__typename:"Reaction"}}})},[n,a,r]);return{addReactionFn:(0,s.useCallback)(e=>{let{emoji:a}=e;if((0,V.z3)({emoji:a,user:r,reactions:i})||!r)return;let l=n.gammaDocId,s=(0,V.Nq)({reactions:i,emoji:a}),d=eP.v.generate(),c=((null==s?void 0:s.count)||0)+1,u=[];s?(d=s.targetId,u=[...s.users]):n.commands.addAnnotation({id:d,pos:t()}),u.unshift(r),u.sort((e,t)=>e.id>t.id?1:-1),o({variables:{reactionInput:{docId:l,targetId:d,targetType:eH.Lmy.Decoration,emoji:a}},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(l),fragment:eH.wk2,fragmentName:"DocReactionsCreate",data:{reactions:[null==n?void 0:n.addReaction]}})},optimisticResponse:{addReaction:{docId:l,targetId:d,targetType:eH.Lmy.Decoration,count:c,emoji:a,users:u,__typename:"Reaction"}}})},[o,n,t,i,r]),removeReactionFn:l}},eD={"add-comment":"350px","add-reaction":"350px","reactions-overflow":"350px"},eW=e=>{let{nodeName:t,isVisible:n,editor:r,getPos:a,comments:l,reactions:d,createDraftComment:c,cleanupDraftComment:u,onCommentDraftUpdate:p,draftComment:h,onCommentSave:m,userCanComment:f,blockAllowsCommenting:y,blockCommentId:b,enableReactions:I,mobileAddCommentPos:z,setIsButtonStackHovered:L}=e,E=(0,w.p)(),N=(0,x.s2)(),M=(0,C.I0)(),{user:_,isUserLoading:T}=(0,S.SE)(),{isHovering:R,delayedClose:H,...P}=(0,v.xx)({enterDelay:30,leaveDelay:100}),O=!!R,D=(0,s.useRef)(null),W=(0,s.useRef)(),F=(0,C.v9)((0,g.s3)(b)),B=(0,s.useRef)(null),[G,V]=(0,s.useState)(null),q=null!==G,[K,Y]=(0,s.useState)(null),X=l.find(e=>e.id===K)||null,$=(0,s.useCallback)(e=>{V("thread"),Y(e.id),M((0,g.UX)({isOpen:!0,blockCommentId:b}))},[b,M]),J=(0,s.useCallback)(e=>{V("add-comment"),Y(null),M((0,g.UX)({isOpen:!0,blockCommentId:b})),c(e)},[b,M,c]),ee=(0,s.useCallback)(()=>{V("add-reaction"),Y(null),M((0,g.UX)({isOpen:!0,blockCommentId:b}))},[b,M]),et=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];V(null),Y(null),u(),M((0,g.UX)({isOpen:!1,blockCommentId:b})),e&&H(1e3)},[b,u,H,M]),{addReactionFn:en,removeReactionFn:ei}=eO({editor:r,getPos:a,reactions:d}),er=(0,s.useCallback)(e=>{f&&(en({emoji:e.id}),E({title:(0,i.jsx)(ev,{emoji:e.id,isMobile:N}),status:"success",duration:5e3,isClosable:!1,position:N?"bottom":"top"}),et(!0))},[en,et,N,E,f]),eo=(0,s.useCallback)(e=>{m(e),et(!0)},[m,et]),ea=(0,s.useCallback)(e=>{if(!f)return;let t=e.reactions.find(e=>{var t;return null===(t=e.users)||void 0===t?void 0:t.find(e=>e.id===(null==_?void 0:_.id))});t?ei({reaction:t}):en({emoji:e.emoji})},[en,ei,_,f]),el=(0,s.useCallback)(()=>{V("reactions-overflow"),Y(null),M((0,g.UX)({isOpen:!0,blockCommentId:b}))},[b,M]);Q({isOpen:q,popupRef:B,onClose:et});let{isExpanded:es}=Z({popup:G,isMobile:N,isHovered:O,comments:l,reactions:d,draftComment:h,enableReactions:I});(0,s.useEffect)(()=>{N||L(O)},[O,N,L]),(0,A.c0)(a,J);let ed=(0,A.m0)({comments:l,blockAllowsCommenting:y,showComment:(0,s.useCallback)(e=>{(0,j.pE)({pos:a(),editor:r}),$({id:e})},[r,a,$])});(0,s.useEffect)(()=>{k.pw.emit(k.TI.POPUP_COMMENT_TOGGLED,{open:q})},[q]);let ec=(0,s.useCallback)(e=>{"Escape"===e.key&&et()},[et]);if(!n||T)return null;let eu=!!_&&!f,em=0===l.length&&0===d.length;if((eu||!y)&&em)return null;let eg=eu||!y;return(0,i.jsxs)(i.Fragment,{children:[N&&z&&(0,i.jsx)(eh,{onClickAddComment:J,onClickAddReaction:ee,top:z.top,left:z.left}),(0,i.jsxs)(U.C,{nodeName:t,className:(0,o.cx)("block-comments-stack",es&&"is-expanded",es&&"is-taking-action",em&&"is-empty",!N&&F&&"other-comment-open"),isMobile:N,isEmpty:em,isPopupOpen:q,...P,buttonRef:D,onKeyDown:ec,hasCommentsOrReactions:!em,children:[(0,i.jsx)(ep,{isExpanded:es,isMobile:N,user:_,userCanComment:f,blockAllowsCommenting:y,draftComment:h,reactions:d,comments:l,onClickThread:$,onClickAddComment:J,onClickAddReaction:ee,onClickExistingReaction:ea,onClickReactionsOverflow:el,hideAddCommentButton:eg,onClosePopup:et,viewingCommentId:K,enableReactions:I}),!q&&!N&&(0,i.jsx)(ef,{isExpanded:es,comments:l,reactions:d}),q&&(0,i.jsxs)(eN,{isMobile:N,ref:B,closePopup:et,drawerMinHeight:eD[G],children:["thread"===G&&(0,i.jsx)(eR,{isMobile:N,comment:X,closePopup:et,editor:r,getPos:a,commentIdToHighlight:ed,commentsPanelRef:W,userCanComment:f,blockAllowsCommenting:y}),"add-comment"===G&&(0,i.jsx)(ek,{isMobile:N,onCancel:()=>{et()},editor:r,getPos:a,commentIdToHighlight:ed,userCanComment:f,blockAllowsCommenting:y,onCommentSave:eo,draftComment:h,onCommentDraftUpdate:p}),"add-reaction"===G&&(0,i.jsx)(eS,{isMobile:N,onReactionClick:er,editor:r,getPos:a}),"reactions-overflow"===G&&(0,i.jsx)(e_,{isMobile:N,onCancel:()=>{et()},onClickExistingReaction:ea,editor:r,getPos:a,user:_,userCanComment:f,blockAllowsCommenting:y,reactions:d})]})]})]})};var eF=n(12560);let eB=e=>{let{children:t,as:n,className:r,style:o,hideComments:a=!1,readOnly:l=!1,...s}=e,{decorations:d,editor:c}=s,u=(0,p.C7)();return!d.some(e=>e.spec.isAnnotatable)||c.isThumbnail||u?(0,i.jsx)(m.T5,{as:n,className:r,style:o,children:t}):(0,i.jsx)(eG,{as:n,className:r,style:o,hideComments:a,readOnly:l,...s,children:t})},eG=e=>{var t;let{children:n,decorations:p,editor:w,getPos:C,as:k,className:j,style:S,hideComments:I,readOnly:z,node:L}=e,{isConnected:E}=(0,d.$)(),N=(0,y.iS)(p),M=b({editor:w,decorations:p}),_=(0,c.ye)("blockReactions"),T=(0,h.Br)("comment"),R=(0,u.CG)(g.kk),H=(0,s.useMemo)(()=>(0,l.x0)(5),[]),P=(0,u.CG)((0,g.Ze)(H)),[O,D]=(0,s.useState)(!1),W=(0,c.ye)("debugComments"),F=(0,A.vY)(p),B=F[0]||null,[G,U]=(0,s.useState)(null),V=(0,u.TL)(),q=(0,s.useCallback)(e=>{let t=(null==e?void 0:e.getPos)||C,n=null==e?void 0:e.targetHtml,i=B;if(i)e&&(i=(0,eF.kr)(i,t,n,w));else{var r,o;i=(0,eF.xN)(t,w,n),null===(r=(o=w.commands).createDraftComment)||void 0===r||r.call(o,i)}U(i),V((0,g.Qx)({attached:!1}))},[V,w,C,B]),K=(0,s.useCallback)(()=>{var e,t,n,i,r,o;G&&(null==G?void 0:null===(t=G.text)||void 0===t?void 0:null===(e=t.trim())||void 0===e?void 0:e.length)>0?null===(n=(i=w.commands).createDraftComment)||void 0===n||n.call(i,G):null===(r=(o=w.commands).removeDraftComments)||void 0===r||r.call(o,F),U(null)},[F,w,G]),Y=(0,s.useRef)(P);Y.current=P,(0,s.useEffect)(()=>()=>{Y.current&&V((0,g.UX)({isOpen:!1,blockCommentId:H}))},[H,V]);let X=(0,A.iZ)({draftComment:G,clearDraftComment(){var e,t,n,i;G&&(null===(n=(i=w.commands).removeDraftComments)||void 0===n||n.call(i,[G,...F]));let r=(0,eF.xN)(C,w);null===(e=(t=w.commands).createDraftComment)||void 0===e||e.call(t,r),U(r)},editor:w}),$=(0,A.xA)(p),Z=$.length>0&&!I,Q=G||B,J=(null==Q?void 0:null===(t=Q.text)||void 0===t?void 0:t.length)>0,[ee,et]=(0,v.XI)(),en=(0,A.Zz)(p);_||(en=[]);let ei=en.length>0,er=R&&!I&&T,eo=(0,x.s2)()&&(P||Z||ei||!!M)||!(0,x.s2)()&&(et||N||P||Z||ei||J),ea=T&&E,el=P||M||O?(0,f.tT)(a.qZ.colors.yellow[200],.25):void 0;return(0,i.jsxs)(m.T5,{as:k,style:{...S,position:"relative",backgroundColor:(0,x.s2)()?void 0:el},className:(0,o.cx)(j,"annotatable-node-view-wrapper",(0,x.s2)()&&"is-mobile",W?"debug-comments":""),ref:ee,children:[er&&(0,i.jsx)(eW,{nodeName:L.type.name,isVisible:eo,reactions:en,blockCommentId:H,userCanComment:ea,blockAllowsCommenting:!I&&!z,onCommentDraftUpdate:e=>{let{editor:t}=e;U(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},cleanupDraftComment:K,createDraftComment:q,editor:w,getPos:C,comments:$,draftComment:Q,onCommentSave:X,enableReactions:_,mobileAddCommentPos:M,setIsButtonStackHovered:D}),(0,x.s2)()&&el?(0,i.jsx)(r.xu,{bgColor:el,children:n}):n]})}},6717:function(e,t,n){"use strict";n.d(t,{C:function(){return c},G:function(){return d}});var i=n(52322),r=n(28535),o=n(29117),a=n(38035),l=n(2784);let s=(0,l.memo)(e=>{let{nodeName:t}=e;return(0,i.jsx)(r.Cd,{contentEditable:!1,userSelect:"none",right:0,size:4,transform:"translate(calc(".concat("gridLayout"===t||"gallery"===t?"-1 * var(--grid-padding)":"0px"," + var(--comment-padding) + 50%),calc(50%)) scale(1)"),position:"absolute",bgGradient:"linear(to-b, yellow.200, yellow.300)",border:"1px solid white",shadow:"0 0 0 1px rgb(0 0 0 / 10%)",className:"block-comments-circle",zIndex:"1"})});s.displayName="BlockCommentsCircle";let d="comments-wrapper",c=(0,l.forwardRef)(function(e,t){let{nodeName:n,isPopupOpen:l,onKeyDown:c,buttonRef:u,isMobile:p,hasCommentsOrReactions:h,children:m,isEmpty:g,...f}=e;return(0,i.jsxs)(r.xu,{ref:t,contentEditable:!1,suppressContentEditableWarning:!0,pointerEvents:"none","data-comments-wrapper":!0,"data-is-popup-open":l,className:d,alignSelf:"start",onKeyDown:c,"data-print-hidden":!0,children:[!g&&!p&&(0,i.jsx)(s,{nodeName:n}),(0,i.jsx)(o.U,{contentEditable:!1,suppressContentEditableWarning:!0,...p?h?{pt:4}:{}:{position:"absolute",marginLeft:"100%",top:0,height:"100%",align:"flex-start"},className:"controls-wrapper controls-wrapper__".concat(n),children:(0,i.jsx)(a.k,{direction:"row",ref:u,contentEditable:!1,suppressContentEditableWarning:!0,transitionProperty:"common",transitionDuration:"fast",zIndex:21,"data-controls-toggle-button":!0,ml:[0,"-17px"],...f,children:m})})]})})},1613:function(e,t,n){"use strict";n.d(t,{K0:function(){return s},KT:function(){return d},U6:function(){return l}});var i=n(52322),r=n(38035),o=n(58284),a=n(46625);let l="block-comments-container",s="2xl",d=e=>{let{offsetFromTop:t,children:n}=e;return(0,i.jsx)(r.k,{contentEditable:!1,suppressContentEditableWarning:!0,color:"gray.900",className:l,direction:"column",bg:"white",borderRadius:"xl",shadow:"xl",overflowY:"auto",transitionProperty:"common",transitionDuration:"normal",zIndex:"sticky",bottom:{top:"0px",[s]:"auto"},top:{top:"0px",[s]:"auto"},width:{base:a.bk,[s]:a.bk},maxW:{base:"90vw",md:"80vw",[s]:a.bk},right:{base:"44px",[s]:0},transform:{base:"translate(0, ".concat(t,"px)"),[s]:"translate(calc(100% + 10px), 0)"},wordBreak:"break-word",height:"fit-content",maxHeight:"calc(".concat(o.i," - 8em)"),position:"absolute",children:n})}},85598:function(e,t,n){"use strict";n.d(t,{H8:function(){return o},Nq:function(){return s},gq:function(){return d},z3:function(){return l}}),n(3440);var i=n(84636),r=n.n(i);let o=(e,t)=>{for(let n of e){if(n.id===t)return t;for(let e of n.replies||[])if(e.id===t)return n.id}return null},a=e=>{let{reactions:t,emoji:n,user:i}=e,r=t.find(e=>e.emoji===n);return r&&r.reactions.find(e=>{var t;return e.emoji===n&&(null===(t=e.users)||void 0===t?void 0:t.find(e=>e.id===(null==i?void 0:i.id)))})||null},l=e=>{let{reactions:t,emoji:n,user:i}=e;return!!a({reactions:t,emoji:n,user:i})},s=e=>{let{reactions:t,emoji:n}=e,i=t.find(e=>e.emoji===n);return i&&i.reactions.find(e=>e.emoji===n)||null},d=e=>r()(e.reactions.flatMap(e=>e.users),"id")},10001:function(e,t,n){"use strict";n.d(t,{q:function(){return ev}});var i=n(52322),r=n(70065),o=n(77533),a=n(11082),l=n(50019),s=n(38035),d=n(43297),c=n(28535),u=n(87651),p=n(29117),h=n(109),m=n(42946),g=n(49929),f=n(5879),x=n(87254),v=n(2784),y=n(43997),b=n(69971),w=n(52659),C=n(24679),k=n(65702),j=n(46625),S=n(54563),A=n(65050),I=n(54317),z=n(78112),L=n(12971),E=n(65753),N=n(52747),M=n(92035),_=n(33279),T=n(33945),R=n(66490),H=n(32899),P=n(89099),O=n(64253),D=n(97134),W=n(42907),F=n(9237);let B=e=>{let{docId:t,cardId:n,commentId:i,parentCommentId:r,targetType:o}=e,[a]=(0,b.Os4)(),[l]=(0,b.d6Z)();function s(e,a,l,s){let d={targetId:o===b.Lmy.Comment?i:n,docId:t,emoji:a,cardId:n};if("addReaction"===e&&(d={...d,targetType:o}),o===b.Lmy.Comment)return{variables:{reactionInput:d},update:(n,o)=>{let{data:a}=o;n.writeFragment({id:"Doc:".concat(t),fragment:b.f,fragmentName:"DocCommentsUpdate",data:{comments:[r?{id:r,replies:[{id:i,reactions:[a[e]],__typename:"Comment"}],reactions:[],__typename:"Comment"}:{id:i,replies:[],reactions:[a[e]],__typename:"Comment"}]}})},optimisticResponse:{[e]:{commentId:i,count:l,emoji:a,users:s,cardId:n,__typename:"Reaction"}}};console.error("[useReactionUpdate] Invalid targetType: ".concat(o))}return{addReactionFn:(e,t,n)=>{a(s("addReaction",e,t,n))},removeReactionFn:(e,t,n)=>{l(s("removeReaction",e,t,n))}}};var G=n(76643),U=n(332),V=n(94207),q=n(55478),K=n(35741),Y=n(52138);let X=(e,t)=>e===t||null!=e.parentElement&&X(e.parentElement,t),$=e=>{let{setPopperElement:t,onPopoverClose:n,handleReactionClick:r,popperElement:o,openerElement:a,usePortal:l,isMobile:s,placement:d,...u}=e;(0,G.O)({ref:{current:o},handler(e){a&&X(e.target,a)||n()}});let p=(0,i.jsx)(c.xu,{mx:s?0:3,mt:s?0:"-110px",shadow:"lg",bg:"white",p:"0",w:"auto",minW:"0px",zIndex:"tooltip","data-target-name":"reaction-emoji-picker",ref:t,...u,children:(0,i.jsx)(Y.h5,{perLine:s?9:12,handlePick:e=>{r(e.id),n()},shouldFocusSearch:!(0,M.s2)()})});return l?(0,i.jsx)(U.h,{children:p}):p},Z=e=>{let{size:t,colorScheme:n,handleReactionClick:r,placement:o,usePortal:a=!0}=e,[l]=(0,V.a)(["(max-width: 840px)","(min-width: 841px)"]),{isOpen:s,onToggle:d,onClose:u}=(0,q.q)(),[p,h]=(0,v.useState)(!1),[y,b]=(0,v.useState)(null),[w,C]=(0,v.useState)(null),{styles:k,attributes:j,forceUpdate:S}=(0,K.D)(y,w,{placement:l?"auto":"".concat(o,"-start"),strategy:"fixed"});return(0,v.useEffect)(()=>{S&&setTimeout(()=>{S()},0)},[S]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O.kH,{placement:ee,label:(0,i.jsx)(f.cC,{id:"9OEgyT"}),isOpen:p,children:(0,i.jsx)(c.xu,{display:"flex",onMouseEnter:()=>{h(!0)},onMouseLeave:()=>h(!1),children:(0,i.jsx)(H.h,{colorScheme:n,float:"inline-start","aria-label":x.ag._({id:"9OEgyT"}),variant:"ghost",onClick:e=>{d(),e.stopPropagation()},size:t||"sm",ref:b,isRound:!0,icon:(0,i.jsx)(g.G,{icon:m.wqT})})})}),s&&(0,i.jsx)($,{usePortal:a,setPopperElement:C,onPopoverClose:u,handleReactionClick:r,popperElement:w,isPopoverOpen:s,openerElement:y,style:k.popper,isMobile:l,placement:o,...j.popper})]})};var Q=n(62614);let J=e=>{let{colorScheme:t,size:n,emoji:r,label:a,count:s,hasSelfReacted:d,handleReactionClick:u,readOnly:p}=e,{colorMode:h}=(0,l.If)(),m="light"===h,g=(0,v.useCallback)(e=>{p||u(r,e)},[r,u,p]);return(0,i.jsx)(O.kH,{placement:ee,label:(0,i.jsxs)(c.xu,{alignContent:"center",children:[a,!p&&(0,i.jsx)(o.x,{display:"block",color:m?"gray.500":"gray.700",children:d?(0,i.jsx)(f.cC,{id:"fb/FjL"}):(0,i.jsx)(f.cC,{id:"AG3H1y"})})]}),children:(0,i.jsxs)(Q.z,{cursor:p?"default":"cursor","data-testid":"reaction-button-".concat(r),size:n||"sm",color:m?"gray.500":"gray.300",bg:d?m?"gray.100":"gray.700":"none",borderWidth:"1px",borderStyle:"solid",colorScheme:t,borderColor:d?m?"gray.200":"gray.500":"transparent",_hover:{bg:m?"gray.200":"gray.600"},variant:"ghost",borderRadius:"full",px:2,onClick:g,children:[(0,i.jsx)(Y.Sr,{emojiId:r,fontSize:"sm"===n?"lg":"sm"}),(0,i.jsx)(o.x,{as:"span",fontSize:n,ml:1.5,children:s})]})})},ee="bottom",et=e=>{let{size:t,colorScheme:n,placement:r="right",usePortal:a,reactions:l,docId:d,cardId:c,commentId:u,parentCommentId:p,targetType:h,readOnly:x,innerPaddingY:v,...y}=e,{addReactionFn:w,removeReactionFn:C}=B({docId:d,commentId:u,parentCommentId:p,cardId:c,targetType:h}),{user:k}=(0,D.SE)(),j=(null==l?void 0:l.reduce((e,t)=>(t.count&&(e[t.emoji]=t),e),{}))||{},S=!x&&h===b.Lmy.Card&&!j.heart,A=Object.keys(j).length>0,I=(e,t)=>{var n,i,r,o,a,l;if(!(h===b.Lmy.Comment&&u||h===b.Lmy.Card&&c))throw Error("[Reactions.handleReactionClick] Invalid targetType. Args: targetType: ".concat(h,", commentId: ").concat(u,", cardId: ").concat(c));if(null===(i=j[e])||void 0===i?void 0:null===(n=i.users.find(e=>e.id===(null==k?void 0:k.id)))||void 0===n?void 0:n.id){let t=(null==j?void 0:null===(r=j[e])||void 0===r?void 0:r.count)-1,n=(null==j?void 0:null===(o=j[e])||void 0===o?void 0:o.users)?j[e].users.filter(e=>e.id!==(null==k?void 0:k.id)):[];C(e,t,n)}else{let t=(null==j?void 0:null===(a=j[e])||void 0===a?void 0:a.count)?j[e].count+1:1,n=(null==j?void 0:null===(l=j[e])||void 0===l?void 0:l.users)?j[e].users.concat(k):[k];w(e,t,n)}null==t||t.stopPropagation()};return(0,i.jsxs)(s.k,{direction:"row",cursor:"default",contentEditable:!1,onMouseDown:F.br,mb:v?"-".concat(v/1.5,"rem"):void 0,...y,children:[S&&(0,i.jsx)(O.kH,{label:(0,i.jsx)(f.cC,{id:"W9FRBT"}),placement:ee,children:(0,i.jsx)(H.h,{colorScheme:n,float:"inline-start","aria-label":"",variant:"ghost",onClick:e=>{I("heart",e)},size:t,isRound:!0,mr:2,icon:(0,i.jsx)(g.G,{icon:m.m6i})})}),!x&&(0,i.jsx)(Z,{size:t,colorScheme:n,handleReactionClick:I,usePortal:a,placement:r}),A&&(0,i.jsx)(P.E,{spacing:"sm"===t?2:1,mr:2,className:"reactions-row",children:A&&Object.entries(j).map(e=>{let[r,a]=e,l=null==a?void 0:a.users,s=!!(null==l?void 0:l.find(e=>(null==e?void 0:e.id)===(null==k?void 0:k.id))),d=(0,W.Rf)({users:l,selfUserId:null==k?void 0:k.id});return(0,i.jsx)(J,{colorScheme:n,size:t,emoji:r,readOnly:x,label:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(f.cC,{id:"mRnNF/",values:{usersLabel:d,emoji:r},components:{0:(0,i.jsx)(o.x,{as:"span",color:"gray.300"})}})}),count:null==l?void 0:l.length,hasSelfReacted:s,handleReactionClick:I},r)})})]})},en=v.memo(e=>{let{docId:t,reactions:n,cardId:r,commentId:o,size:a,parentCommentId:l,placement:s="right",usePortal:d=!0,userCanComment:c,...u}=e;return(0,i.jsx)(et,{size:a,cardId:r,usePortal:d,placement:s,reactions:n,parentCommentId:l,docId:t,commentId:o,targetType:b.Lmy.Comment,readOnly:!c,...u})});var ei=n(6167),er=n(26284),eo=n(36474),ea=n(10625),el=n(67046),es=n(99058),ed=n(25481),ec=n(27599),eu=n(82108),ep=n.n(eu),eh=n(63416);let em=()=>({[b.Ux9.Open]:{label:x.ag._({id:"9ggh96"}),icon:m.f8k,successMessage:x.ag._({id:"1INZuT"})},[b.Ux9.Closed]:{label:x.ag._({id:"pL38RI"}),icon:m._1v,successMessage:x.ag._({id:"gieGvY"})}}),eg=e=>{let{status:t,handleCommentStatusUpdate:n}=e;return(0,i.jsx)(O.kH,{label:em()[t].label,"aria-label":em()[t].label,children:(0,i.jsx)(H.h,{variant:"ghost",size:"sm",borderRadius:"full",isDisabled:!1,"aria-label":em()[t].label,icon:(0,i.jsx)(g.G,{icon:em()[t].icon}),onClick:()=>n(t)})})},ef=e=>{let{comment:t,selfUser:n,isInPanel:a,isSourceContentAvailable:u,showCopyCommentLink:v,showLinkToTargetContent:y,hasCommentBeenUpdated:w,onTargetClick:C,commentUrl:k,isReply:j,userCanComment:S,handleCommentStatusUpdate:A,toastPosition:I,isEditing:z,handleEditCommentClick:L,handleDeleteCommentClick:E}=e,{user:N,createdTime:M,updatedTime:_,status:T=b.Ux9.Open}=t,{email:R,displayName:P,profileImageUrl:D}=N,W=(null==n?void 0:n.id)===(null==N?void 0:N.id),{onCopy:F}=(0,er.V)(k),B=(0,l.ff)("red.500","red.300"),G=(0,r.p)();return(0,i.jsxs)(p.U,{spacing:2,align:"top",mb:3,_before:a?{content:"''",position:"absolute",w:"9px",h:"9px",mt:"15px",left:j?"12px":"36px",bg:"gray.100",borderRadius:"full"}:{},children:[(0,i.jsx)(O.kH,{label:R,"aria-label":R,children:(0,i.jsx)(h.q,{mt:1,size:"sm",name:P,src:D,ignoreFallback:!0})}),(0,i.jsxs)(d.K,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:[(0,i.jsxs)(o.x,{fontWeight:"600",mb:0,fontSize:"sm",children:[P," ",W?(0,i.jsx)(f.cC,{id:"dDUgzP"}):null]}),(0,i.jsx)(s.k,{direction:"row",w:"100%",alignItems:"flex-start",children:(0,i.jsx)(c.xu,{flex:"1",children:(0,i.jsx)(O.kH,{isDisabled:!w,label:"Updated ".concat((0,eh.P9)(_)),placement:"top",children:(0,i.jsxs)(p.U,{children:[(0,i.jsx)(o.x,{my:"0 !important",className:"comment-date",fontSize:"xs",color:"gray.500",children:ep()((0,eh.P9)(M))}),w&&(0,i.jsx)(c.xu,{color:"gray.500",children:(0,i.jsx)(g.G,{size:"xs",icon:m.HMF})})]})})})})]}),(0,i.jsx)(eo.L,{}),(0,i.jsxs)(p.U,{spacing:1,children:[y&&(0,i.jsx)(O.kH,{label:u?(0,i.jsx)(f.cC,{id:"LmLruJ"}):(0,i.jsx)(f.cC,{id:"/oHV5h"}),shouldWrapChildren:!0,children:(0,i.jsx)(H.h,{size:"sm",borderRadius:"full",variant:"ghost",isDisabled:!u,"aria-label":u?x.ag._({id:"LmLruJ"}):x.ag._({id:"/oHV5h"}),onClick:C,icon:(0,i.jsx)(g.G,{icon:m.FR9})})}),!j&&S&&(0,i.jsx)(eg,{status:T,handleCommentStatusUpdate:()=>A(t.status)}),(0,i.jsxs)(ea.v,{isLazy:!0,children:[(0,i.jsx)(el.j,{as:H.h,size:"sm",variant:"ghost",borderRadius:"full","data-testid":"comment-header-menu",icon:(0,i.jsx)(g.G,{fixedWidth:!0,icon:m.cNd}),children:(0,i.jsx)(f.cC,{id:"7L01XJ"})}),(0,i.jsx)(U.h,{children:(0,i.jsxs)(es.q,{zIndex:"popover","data-testid":"comment-header-menulist",children:[v&&(0,i.jsx)(ed.s,{icon:(0,i.jsx)(g.G,{icon:m.nNP}),onClick:()=>{F(),G({title:x.ag._({id:"h5GS+N"}),status:"success",duration:3e3,position:I})},children:(0,i.jsx)(f.cC,{id:"qhJCCi"})}),S&&!z&&W&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ec.R,{}),(0,i.jsx)(ed.s,{icon:(0,i.jsx)(g.G,{icon:m.Xcf}),onClick:L,children:(0,i.jsx)(f.cC,{id:"ePK91l"})}),(0,i.jsx)(ed.s,{icon:(0,i.jsx)(g.G,{icon:m.XAH}),color:B,onClick:()=>{E()},"data-testid":"delete-thread",children:j?(0,i.jsx)(f.cC,{id:"FjzXBu"}):(0,i.jsx)(f.cC,{id:"xOviNB"})})]})]})})]})]})]})};var ex=n(95383);let ev=(0,v.memo)(e=>{let{comment:t,editor:n,selfUser:H,docId:P,commentIdToHighlight:O,userCanComment:D,instanceType:W,editorMode:F,isRootComment:B=!1,onClose:G,closePopup:U,...V}=e,q="feed"===W,K="drawer"===W,Y=(0,M.s2)()?"bottom":"top",{content:X,targetHtml:$,targetId:Z,createdTime:Q,updatedTime:J,id:ee,replies:et,reactions:er}=t,eo=(0,y.I0)(),{initialDraftReply:ea,updateLocalDraftReply:el,hasLocalDraftReply:es}=(0,ei.nG)(ee),ed=(0,v.useRef)(new N.B),ec=O===ee,eu=(0,_.W2)({docId:P,id:ee}),ep=(0,v.useRef)(null),[eh,eg]=(0,v.useState)(!1),[ey,eb]=(0,v.useState)(B);(0,v.useEffect)(()=>{es&&!ey&&eb(!0)},[es,ey]);let[ew]=(0,b.sHn)(),[eC]=(0,b.oRU)(),[ek]=(0,b.qHm)(),[ej]=(0,b.n70)(),eS=(0,r.p)(),eA=(0,w.As)("editor"),eI=(0,v.useCallback)(()=>{eg(!0)},[]),ez=(0,v.useCallback)(()=>{el(null)},[el]),eL=[.25,.1,.25,1];(0,v.useLayoutEffect)(()=>{ec&&ep.current&&eA.scrollElementIntoView({element:ep.current})},[eA,ec]);let eE=e=>{let t=e===b.Ux9.Open?b.Ux9.Closed:b.Ux9.Open,n={id:ee,docId:P,status:t};ek({variables:{input:n},update:(e,t)=>{let{data:n}=t,i={id:"Doc:".concat(P),fragment:E.Hn,fragmentName:"DocCommentsUpdate",data:{comments:[null==n?void 0:n.updateCommentStatus]}};e.writeFragment(i)},optimisticResponse:{updateCommentStatus:{...n,__typename:"Comment",updatedTime:new Date().toISOString()}}}).then(()=>{eS({title:(0,i.jsxs)(o.x,{children:[em()[e].successMessage,"."," ",(0,i.jsx)(a.r,{textDecoration:"underline",onClick:()=>eE(t),children:x.ag._({id:"9uI/rE"})})]}),status:"success",duration:5e3,isClosable:!1,position:Y})}).catch(e=>{console.error("[CommentComponent]: Error changing comment status",e),eS({title:x.ag._({id:"+Q5eww",values:{0:e.message}}),status:"error",isClosable:!0,position:Y})}).finally(()=>{"popup"===W&&U&&U(!0)})},eN=(0,l.ff)("yellow.100","yellow.800"),eM=R.Z.getState(n.state),e_=(0,v.useMemo)(()=>null==eM?void 0:eM.annotations.find(e=>e.id===Z),[null==eM?void 0:eM.annotations,Z]),{pos:eT}=e_||{},eR=!!(null==e_?void 0:e_.pos),eH="notification"!==W&&t.id!==j.Gt,eP=("notification"===W||"feed"===W)&&eT!==j.Et,eO=(0,v.useCallback)(e=>{var t;if(!(!Z||!e_||!eT||(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest('[data-target-name="comment-target-expand-button"]')))){if("notification"===W)k.pw.emit(k.TI.OPEN_POPUP_COMMENT,{commentId:ee,highlightComment:!0});else if("feed"===W){let e=A.nY,t=(0,L.Sh)(n,eT);if(F===T.q.DOC_VIEW)(0,S.pE)({pos:eT,editor:n});else if(F===T.q.SLIDE_VIEW){let[t]=(0,L.nv)(n.state.doc.resolve(eT),I.KH);n.commands.spotlightCardById(t.node.attrs.id),eo((0,z.Qx)({attached:!1})),e=A.id}(0,M.s2)()&&G&&setTimeout(G,300),eA.scrollElementIntoView({element:t,delay:e})}}},[n,eA,Z,W,ee,e_,eT,F,eo,G]),eD=(0,v.useMemo)(()=>new Date(J).getTime()-new Date(Q).getTime()>100,[J,Q]),eW=!!t.commentId,eF=!!et&&et.length>0;return(0,i.jsxs)(s.k,{flexDir:"column",ref:ep,id:"comment-".concat(ee),className:"comment highlight-mask","data-target-id":"comment-".concat(ee),borderRadius:ec?"md":"0px",position:"relative",borderBottomWidth:B?"1px":"0px",borderBottomColor:"gray.200",_after:q&&eF?{content:"''",position:"absolute",w:"9px",h:"9px",left:"36px",bottom:9,bg:"gray.100",borderRadius:"full",transitionPropery:"common",transitionDuration:"normal"}:{},_before:eF&&q?{content:"''",position:"absolute",w:"3px",top:7,bottom:9,left:"39px",bg:"gray.100",borderRadius:"full"}:{},...V,overflowY:"hidden",children:[(0,i.jsxs)(d.K,{backgroundColor:ec?eN:"auto",transitionProperty:"border, background",transitionDuration:"normal",transitionTimingFunction:"ease",role:"group",spacing:8,children:[(0,i.jsxs)(c.xu,{pl:eW&&q?10:0,children:[(0,i.jsx)(ef,{isInPanel:q,comment:t,selfUser:H,isSourceContentAvailable:eR,showCopyCommentLink:eH,showLinkToTargetContent:eP,hasCommentBeenUpdated:eD,onTargetClick:eO,commentUrl:eu,isReply:eW,userCanComment:D,handleCommentStatusUpdate:eE,toastPosition:Y,isEditing:eh,handleEditCommentClick:eI,handleDeleteCommentClick:()=>{let e=!!t.commentId;ej({variables:{id:ee},update:(n,i)=>{let{data:r}=i;n.writeFragment({id:"Doc:".concat(P),fragment:E.Hn,fragmentName:e?"DocRepliesRemove":"DocCommentsRemove",data:{comments:[e?{id:t.commentId,replies:[null==r?void 0:r.archiveComment],__typename:"Comment"}:null==r?void 0:r.archiveComment]}})},optimisticResponse:{archiveComment:{id:ee,__typename:"Comment",archived:!0}}}),!e&&t.targetId&&n.commands.deleteAnnotation(t.targetId),"popup"===W&&U&&U(!0),eS({title:x.ag._({id:"Ho/Jvc"}),status:"success",duration:5e3,isClosable:!1,position:Y})}}),(0,i.jsxs)(c.xu,{pl:eF&&q?10:0,overflowY:"hidden",children:[$&&$.length&&(0,i.jsx)(ex.p,{targetHtml:$,onTargetClick:eO,isSourceContentAvailable:eR,instanceType:W}),(0,i.jsx)(C.S,{initialContent:X,editable:eh,onCancelEditingClick:()=>eg(!1),saveButtonText:(0,i.jsx)(f.cC,{id:"yY7Bil"}),saveButtonIcon:(0,i.jsx)(g.G,{icon:m.LEp}),onCommentSave:e=>{let n=!!t.commentId,i={id:ee,docId:P,content:e};eC({variables:{input:i},update:(e,i)=>{let{data:r}=i,o={id:"Doc:".concat(P),fragment:E.Hn,fragmentName:n?"DocRepliesUpdate":"DocCommentsUpdate",data:{comments:[n?{id:t.commentId,replies:[null==r?void 0:r.updateComment],__typename:"Comment"}:null==r?void 0:r.updateComment]}};e.writeFragment(o)},optimisticResponse:{updateComment:{...i,__typename:"Comment",updatedTime:new Date().toISOString()}}}),eS({title:x.ag._({id:"kibWwZ"}),status:"success",duration:5e3,isClosable:!1,position:Y}),eg(!1)}}),!eh&&(0,i.jsx)(en,{mt:2,docId:P,cardId:t.cardId,commentId:t.id,parentCommentId:t.commentId,reactions:er,size:"sm",placement:"right",usePortal:!0,userCanComment:D})]})]}),et&&et.length>0&&et.map(e=>(0,i.jsx)(ev,{instanceType:W,userCanComment:D,commentIdToHighlight:O,comment:e,docId:P,selfUser:H,editor:n,editorMode:F,pl:0,p:0,pb:0},null==e?void 0:e.id))]}),D&&(0,i.jsxs)(u.U,{in:ey&&!eh,unmountOnExit:!0,transition:{enter:{when:"afterChildren",height:{duration:.3,ease:eL},opacity:{duration:.4,ease:eL}},exit:{when:"beforeChildren",height:{duration:.2,ease:eL},opacity:{duration:.3,ease:eL}}},children:[K&&(0,i.jsxs)(p.U,{align:"center",mb:3,pt:6,children:[(0,i.jsx)(h.q,{mt:1,size:"sm",name:null==H?void 0:H.displayName,src:null==H?void 0:H.profileImageUrl,ignoreFallback:!0}),(0,i.jsx)(d.K,{align:"center",alignItems:"flex-start",spacing:0,mb:1,children:(0,i.jsx)(o.x,{fontWeight:"600",mb:0,fontSize:"sm",children:(0,i.jsx)(f.cC,{id:"866PMb",values:{0:null==H?void 0:H.displayName}})})})]}),(0,i.jsx)(C.S,{pl:q&&eF?8:0,pt:K?0:6,initialContent:(null==ea?void 0:ea.json)||"",clearContentOnSave:!0,editable:!0,saveButtonText:(0,i.jsx)(f.cC,{id:"ImOQa9"}),saveButtonIcon:(0,i.jsx)(g.G,{icon:m.Lh7}),placeholder:x.ag._({id:"ImOQa9"}),onCommentSave:e=>{let n={targetId:t.targetId,commentId:ee,docId:P,content:e,cardId:t.cardId};ew({variables:{input:n},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(P),fragment:E.Hn,fragmentName:"DocRepliesCreate",data:{comments:[{id:ee,replies:[null==n?void 0:n.createComment],__typename:"Comment"}]}})},optimisticResponse:{createComment:{id:j.Gt,__typename:"Comment",...n,user:H,archived:!1,reactions:[],createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}),eb(!1),el(null),eo((0,z.pS)({id:ee})),eS({title:x.ag._({id:"yPok8v"}),status:"success",duration:5e3,isClosable:!1,position:Y})},onCancelEditingClick:ez,onUpdate:e=>{let{editor:t}=e;el({commentId:ee,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent})},onCreate:e=>{ed.current.resolve(e)},alwaysShowButtons:K,shouldFocus:"popup"===W||"drawer"===W})]})]})})},3699:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(52322),r=n(74008),o=n(16618);let a=e=>{let{accessLink:t,doc:n,className:a,showDivider:l=!0}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A2,{accessLink:t,doc:n,p:6,spacing:4,className:a}),l&&(0,i.jsx)(r.i,{})]})}},95383:function(e,t,n){"use strict";n.d(t,{p:function(){return f}});var i=n(52322),r=n(38035),o=n(28535),a=n(32899),l=n(42946),s=n(49929),d=n(64253),c=n(5879),u=n(87254),p=n(14304),h=n.n(p),m=n(2784),g=n(26073);let f=e=>{let{targetHtml:t,onTargetClick:n,isSourceContentAvailable:p,instanceType:f}=e,[x,v]=(0,m.useState)(!1),[y,b]=(0,m.useState)(!1),w=(0,m.useRef)(null),C=(0,g.jj)(),k=x?l._qI:l.yh$,j=x?u.ag._({id:"vLyv1R"}):u.ag._({id:"fMPkxb"});return(0,m.useEffect)(()=>{var e;w.current&&b(!(!x&&w.current.scrollHeight<=(null===(e=w.current)||void 0===e?void 0:e.clientHeight)))},[x]),(0,i.jsxs)(r.k,{className:"block-target-html",pl:3,mb:2,borderLeftWidth:"4px",borderLeftStyle:"solid",borderLeftColor:"yellow.200",direction:"row",alignItems:"flex-end",cursor:p&&"feed"===f?"pointer":"auto",onClick:n,children:[(0,i.jsx)(d.kH,{label:(0,i.jsx)(c.cC,{id:"/oHV5h"}),isDisabled:!("feed"===f&&!p),portalProps:{containerRef:C},children:(0,i.jsx)(o.xu,{flex:1,ml:-3,pl:3,w:"100%",fontSize:"sm",noOfLines:x?void 0:3,dangerouslySetInnerHTML:{__html:t?h().sanitize(t):""},ref:w,_hover:{bgColor:"feed"===f?p?"yellow.100":"gray.100":void 0}})}),y&&(0,i.jsx)(d.kH,{label:j,portalProps:{containerRef:C},children:(0,i.jsx)(a.h,{variant:"ghost",size:"xs","aria-label":j,icon:(0,i.jsx)(s.G,{icon:k}),onClick:()=>{v(e=>!e)},"data-target-name":"comment-target-expand-button",isRound:!0})})]})}},18730:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var i=n(52322),r=n(38035),o=n(29117),a=n(109),l=n(43297),s=n(77533),d=n(5879),c=n(87254),u=n(24679),p=n(92035),h=n(95383);let m=e=>{let{draftComment:t,showUser:n=!0,showBorder:m=!0,user:g,onCommentDraftUpdate:f,onCommentSave:x,commentIdToHighlight:v,alwaysShowButtons:y=!1,...b}=e;return(0,i.jsxs)(r.k,{direction:"column",...b,children:[n&&(0,i.jsxs)(o.U,{mb:3,pt:3,children:[(0,i.jsx)(a.q,{src:null==g?void 0:g.profileImageUrl,size:"sm"}),(0,i.jsx)(l.K,{children:(0,i.jsx)(s.x,{fontWeight:"bold",fontSize:"sm",children:(0,i.jsx)(d.cC,{id:"866PMb",values:{0:null==g?void 0:g.displayName}})})})]}),t&&(null==t?void 0:t.targetHtml)&&(0,i.jsx)(h.p,{targetHtml:t.targetHtml}),(0,i.jsx)(u.S,{onUpdate:f,initialContent:(null==t?void 0:t.json)||null,clearContentOnSave:!0,editable:!0,saveButtonText:(0,i.jsx)(d.cC,{id:"26iNma"}),placeholder:c.ag._({id:"UkDQUD"}),onCommentSave:x,showBorder:m,shouldFocus:!!(!(0,p.f_)()&&!v),alwaysShowButtons:y})]})}},12560:function(e,t,n){"use strict";n.d(t,{W1:function(){return s},kr:function(){return l},xN:function(){return a}});var i=n(9936),r=n(49214),o=n(36273);let a=(e,t,n)=>({targetId:r.v.generate(),targetHtml:n,json:null,text:"",relativePos:(0,i.jS)(t.state,e())}),l=(e,t,n,r)=>({...e,targetHtml:n,relativePos:(0,i.jS)(r.state,t())}),s=(e,t)=>Object.values(o.N.getState(e.state).draftComments).filter(n=>(0,i.XV)(e.state,n.relativePos)===t)},6167:function(e,t,n){"use strict";n.d(t,{Zz:function(){return H},c0:function(){return _},iZ:function(){return M},m0:function(){return T},nG:function(){return R},vY:function(){return N},xA:function(){return E}});var i=n(70065),r=n(87254),o=n(37243),a=n(3440),l=n.n(a),s=n(829),d=n.n(s),c=n(35838),u=n.n(c),p=n(18149),h=n.n(p),m=n(2784),g=n(43997),f=n(69971),x=n(71383),v=n(65702),y=n(78112),b=n(11569),w=n(31335),C=n(9936),k=n(97134),j=n(65753),S=n(92035),A=n(85598);let I=(0,S.s2)()?"bottom":"top";function z(e){return e?e.reduce((e,t)=>(t.targetId&&(e[t.targetId]?e[t.targetId].push(t):e[t.targetId]=[t]),e),{}):null}let L=e=>e.filter(e=>!!e.spec.isAnnotation),E=e=>(0,x.CG)(t=>{let n=(0,y.yx)(t),i=z(((null==n?void 0:n.comments)||[]).filter(e=>e.status===f.Ux9.Open));if(!i)return[];let r=L(e);return u()(r,e=>{let{spec:t}=e;return i[t.id]}).filter(Boolean)},h()),N=e=>e.filter(e=>!!e.spec.isDraftComment).map(e=>e.spec.comment),M=e=>{let{draftComment:t,clearDraftComment:n,editor:a}=e,[l]=(0,f.sHn)(),s=(0,i.p)(),d=a.gammaDocId,{user:c}=(0,k.SE)();return e=>{var i;if(!t)return;let{relativePos:u,targetId:p}=t,h=(0,C.XV)(a.state,u);if(!h)throw Error("Could not save comment, null pos from relativePos");let m=(0,o.qv)(a.state.doc.resolve(h),w.KH),g=a.view.state.doc.nodeAt(h),x=t.targetHtml||(0,b.ho)(g,["footnote","footnoteLabel","cardNotes"]),v=t.targetHtml||(0,b.iJ)(g,["footnote","footnoteLabel","cardNotes"]);a.commands.addAnnotation({id:p,pos:h});let y={targetId:p,docId:d,cardId:null==m?void 0:null===(i=m.node)||void 0===i?void 0:i.attrs.id,content:e,targetHtml:x,targetText:v};l({variables:{input:y},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(d),fragment:j.Hn,fragmentName:"DocCommentsCreate",data:{comments:[null==n?void 0:n.createComment]}})},optimisticResponse:{createComment:{id:"temp-id",commentId:"",__typename:"Comment",...y,content:JSON.parse(JSON.stringify(e)),user:c,archived:!1,reactions:[],replies:[],status:f.Ux9.Open,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}),s({title:r.ag._({id:"4kSebh"}),status:"success",duration:5e3,isClosable:!1,position:I}),n()}},_=(e,t)=>{(0,m.useEffect)(()=>{let n=!0,i=i=>{let{selectionPos:r,parentPos:o,text:a}=i;n&&e()===o&&t({targetHtml:a,getPos:()=>r})};return v.pw.on(v.TI.CREATE_COMMENT_FROM_SELECTION,i),()=>{v.pw.on(v.TI.CREATE_COMMENT_FROM_SELECTION,i),n=!1}},[e,t])},T=e=>{let{showComment:t,comments:n,blockAllowsCommenting:i,highlightDuration:r=4e3}=e,[o,a]=(0,m.useState)(null);return(0,m.useEffect)(()=>{let e=!0,o=o=>{let{commentId:l,highlightComment:s=!1}=o;if(!e||!i)return;let d=(0,A.H8)(n,l);d&&(t(d),s&&(a(l),setTimeout(()=>{e&&a(null)},r)))};return v.pw.on(v.TI.OPEN_POPUP_COMMENT,o),()=>{v.pw.off(v.TI.OPEN_POPUP_COMMENT,o),e=!1}},[n,i,r,t]),o},R=e=>{let t=(0,g.I0)(),n=(0,x.CG)((0,y.Mk)(e)),i=(0,m.useRef)(null),[r,o]=(0,m.useState)(!1),a=(0,m.useCallback)(e=>{i.current=e,o(!!e)},[]),l=(0,m.useCallback)(()=>{i.current=n,o(!!n)},[n]),s=(0,m.useCallback)(()=>{var n;if(!i.current||!(null===(n=i.current.text)||void 0===n?void 0:n.length)){t((0,y.pS)({id:e}));return}t((0,y.qt)({id:e,reply:i.current}))},[e,t]),d=(0,m.useRef)(s);return(0,m.useEffect)(()=>{d.current=s},[s]),(0,m.useEffect)(()=>(l(),()=>{d.current()}),[]),{hasLocalDraftReply:r,initialDraftReply:i.current,updateLocalDraftReply:a}},H=e=>(0,x.CG)(t=>{let n=(0,y.yx)(t),i=z((null==n?void 0:n.reactions)||[]);if(!i)return[];let r=L(e),o=u()(r,e=>{let{spec:t}=e;return i[t.id]}).filter(Boolean),a=l()(o,"emoji"),s=[];for(let[e,t]of Object.entries(a)){let n=t.reduce((e,t)=>e+t.count,0);s.push({emoji:e,count:n,reactions:t})}return d()(s.filter(e=>e.count>0),"count").reverse()},h())},46625:function(e,t,n){"use strict";n.d(t,{Et:function(){return r},Gt:function(){return o},bk:function(){return i},yK:function(){return a}});let i="350px",r=1,o="temp-id",a=128},45075:function(e,t,n){"use strict";n.d(t,{lO:function(){return i.l},q5:function(){return r.q},IZ:function(){return o.I},Ag:function(){return a.A},xN:function(){return l.xN},W1:function(){return l.W1},iZ:function(){return s.iZ}});var i=n(94672),r=n(10001),o=n(3699),a=n(18730),l=n(12560),s=n(6167)},38636:function(e,t,n){"use strict";n.d(t,{Mw:function(){return v},R1:function(){return c},ZM:function(){return d},bg:function(){return p},ei:function(){return x},f$:function(){return u},lG:function(){return h},lM:function(){return g},mS:function(){return m},nf:function(){return f}});var i=n(38564),r=n(36069),o=n(37243),a=n(54317),l=n(20706),s=n(66490);let d=e=>(0,a.KH)(e)||(0,a.pv)(e)||(0,l.AH)(e),c=(e,t)=>!(0,a.KH)(e)&&!(0,a.pv)(e)&&d(t),u=(e,t)=>{let n=null;return t.state.doc.descendants((t,i,r)=>{if(i>0&&!d(r)&&!d(t))return!1;!(0,a.KH)(t)&&d(r)&&e>=i&&e<i+t.nodeSize&&(n={node:t,pos:i,end:i+t.nodeSize})}),n},p=e=>{if(d(e.parent))return{pos:e.pos,node:e.nodeAfter};for(let t=e.depth;t>0;t--){let n=e.node(t);if(d(e.node(t-1)))return{pos:t>0?e.before(t):0,node:n}}return null},h=e=>{let{pos:t,from:n,to:i,editor:r}=e,{state:l}=r,d=s.Z.getState(l);if(!d)return null;let c=(0,o.qv)(r.state.doc.resolve(t),a.KH),u=d.getAnnotationsBetween(l,n,i),p=c?d.getAnnotationsBetween(l,c.pos,c.pos+c.node.nodeSize).filter(e=>!u.find(t=>t.id===e.id)):[];return{inBlock:u,inCard:p,origNodePos:t}},m=e=>{let{dropPos:t,dropNode:n,dragging:o,side:a,tr:l,view:d}=e,c=s.Z.getState(d.state);if(!c)return[];let u=c.getAnnotationsBetween(d.state,t,t+n.nodeSize),p=o.inBlock,h="left"===a?o.origNodePos:t,m="left"===a?t:o.origNodePos,{doc:g,type:f,binding:x}=i.Gt.getState(d.state),v=l.mapping.map(t),y=(e,t)=>n=>{let{id:i,relativePos:o}=n,a=(0,r.SF)(g,f,o,x.mapping);return null==a?null:{id:i,newPos:v+(a-e)+t}},b=[...("left"===a?p:u).map(y(h,1)).filter(e=>!!e),...("left"===a?u:p).map(y(m,2)).filter(e=>!!e)],w=o.inCard.filter(e=>{let{id:t}=e;return!b.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...b,...w]},g=e=>{let{dropPos:t,dropNode:n,dragging:o,side:a,tr:l,view:d,leftContentSize:c}=e,u=s.Z.getState(d.state);if(!u)return[];let p=u.getAnnotationsBetween(d.state,t,t+n.nodeSize),h=o.inBlock,m="left"===a?o.origNodePos:t,g="left"===a?t:o.origNodePos,{doc:f,type:x,binding:v}=i.Gt.getState(d.state),y=l.mapping.map(t),b=(e,t)=>n=>{let{id:i,relativePos:o}=n,a=(0,r.SF)(f,x,o,v.mapping);return null==a?null:{id:i,newPos:y+(a-e)+t}},w=[...("left"===a?h:p).map(b(m,2)).filter(e=>!!e),...("left"===a?p:h).map(b(g,4+c)).filter(e=>!!e)],C=o.inCard.filter(e=>{let{id:t}=e;return!w.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...w,...C]},f=e=>{let{contentPos:t,contentEnd:n,insertPos:o,editor:a}=e,l=s.Z.getState(a.state);if(!l)return[];let{state:d}=a,c=l.getAnnotationsBetween(d,t,n),{doc:u,type:p,binding:h}=i.Gt.getState(a.view.state);return c.map(e=>{let{id:n,relativePos:i}=e,a=(0,r.SF)(u,p,i,h.mapping);return null==a?null:{id:n,newPos:o+(a-t)}}).filter(e=>!!e)},x=e=>{let t,{dropPos:n,dragging:o,cardWrapOffset:a,tr:l,view:d}=e;if(!s.Z.getState(d.state))return[];let{doc:c,type:u,binding:p}=i.Gt.getState(d.state),h=l.mapping.map(n,-1),m=o.inBlock.map((t=o.origNodePos,e=>{let{id:n,relativePos:i}=e,o=(0,r.SF)(c,u,i,p.mapping);return null==o?null:{id:n,newPos:h+(o-t)+a}})).filter(e=>!!e),g=o.inCard.filter(e=>{let{id:t}=e;return!m.find(e=>e.id===t)}).map(e=>{let{id:t,pos:n}=e,i=l.mapping.map(n);return n===i?null:{newPos:i,id:t}}).filter(e=>!!e);return[...m,...g]},v=e=>{let{pos:t,tr:n,editor:i}=e,r=s.Z.getState(i.view.state);if(!r)return[];let o=i.state.doc.resolve(t);return o.nodeAfter?r.getAnnotationsBetween(i.state,t,t+o.nodeAfter.nodeSize).map(e=>{let{id:i,pos:r}=e;return{id:i,newPos:r===t?n.mapping.map(r+1)-1:n.mapping.map(r)}}):[]}},50576:function(e,t,n){"use strict";n.d(t,{l:function(){return m},V:function(){return g}});var i=n(73200),r=n(37243),o=n(27191),a=n(52780),l=n(30240),s=n(12971);class d extends o.Sy{removeOverlappingDecorations(e,t){let n=this.getDecorationsRanges(t),i=e.find(n.from,n.to).filter(e=>n.hasRange(e));return e.remove(i)}getDecorationsRanges(e){let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=new Set;return e.forEach(e=>{let{from:r,to:o}=e;r<t&&(t=r),o>n&&(n=o),i.add("".concat(r,":").concat(o))}),{from:t,to:n,hasRange:e=>{let{from:t,to:n}=e;return i.has("".concat(t,":").concat(n))}}}decorateDoc(e){let t=[];return e.descendants(this.decorateNode.bind(this,t)),a.EH.create(e,t)}processStep(e,t,n,i){let r=t.doc,o=t.mapping.slice(i+1),a=o.map("from"in e?e.from:e.pos),l="to"in e?o.map(e.to):a,s="slice"in e?e.slice.content.size:0;r.descendants((e,t,i,r)=>!(t+e.nodeSize<a)&&!(t>l+s)&&("document"===e.type.name||!i||this.decorateNode(n,e,t,i,r)))}constructor({key:e,decorateNode:t,options:n={}}){super({key:e,state:{init(e,t){let{doc:n}=t;return{decorations:this.decorateDoc(n)}},apply(e,t){var i,r;let o=null===(i=n.processEntireDoc)||void 0===i?void 0:i.call(n),a=null!==(r=n.shouldProcessStep)&&void 0!==r?r:s.s7,l=t.decorations;if(!e.steps.length&&!o)return{...t,decorations:l.map(e.mapping,e.doc)};if(o||(0,s.HG)(e))return{...t,decorations:this.decorateDoc(e.doc)};let d=[];e.steps.forEach((t,n)=>{if(a(t))return this.processStep(t,e,d,n)});let c=this.removeOverlappingDecorations(l.map(e.mapping,e.doc),d).add(e.doc,d);return{...t,decorations:c}}},props:{decorations:t=>{var n;return null===(n=e.getState(t))||void 0===n?void 0:n.decorations}}}),this.decorateNode=t}}var c=n(31335),u=n(38636),p=n(22156);function h(e,t,n,r,o){if((0,u.ZM)(r)&&e.push(a.p.node(n,n+t.nodeSize,{},{isAnnotatable:!0})),(0,c.zh)(t))e.push(a.p.node(n,n+t.nodeSize,{class:(0,i.cx)("block","block-".concat(t.type.name),0===o&&"first-block",o===r.childCount-1&&"last-block")})),0===o&&((0,c.KH)(r)||(0,p.Fi)(r))&&e.push(a.p.node(n,n+t.nodeSize,{class:"first-block-in-card"},{isFirstBlockInCard:!0}));else{if(!t.isLeaf&&!t.isBlock)return!1;e.push(a.p.node(n,n+t.nodeSize,{class:"node-".concat(t.type.name)}))}return!0}let m=r.hj.create({name:"blockClass",addOptions:()=>({blockClass:"block"}),addProseMirrorPlugins:()=>[new d({key:new o.H$("blockClass"),decorateNode:h,options:{processEntireDoc:()=>!l.VH.get("useTransactionBlockPlugin")}})]}),g=e=>!!e.find(e=>e.spec.isFirstBlockInCard)},23307:function(e,t,n){"use strict";n.d(t,{NM:function(){return c},eq:function(){return s}});var i=n(37243),r=n(27191),o=n(55079),a=n(28817),l=n(12971);let s=new r.H$("menuBubble");class d{initialize(e){let{element:t,tippyOptions:n,panelLifecycle:i,onHide:r,targetElement:o}=e;if(!t){console.warn("[BubbleMenuView] initialize. No element provided");return}this.onHide=r,this.element=t,this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.view.dom.addEventListener("dragend",this.dragendHandler),this.view.dom.addEventListener("drop",this.dragendHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.createTooltip(n,o),this.element.style.visibility="visible",document.addEventListener("mousedown",this.mousedownDocumentHandler,!0),document.addEventListener("mouseup",this.mouseupDocumentHandler,!0),i&&(this.cleanupPanelLifecycle=i.on("resize",()=>{var e;null===(e=this.tippy.popperInstance)||void 0===e||e.update()}))}createTooltip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t||this.view.dom.parentElement;this.tippy=(0,o.ZP)(n,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...e}),this.editor.commands.command(e=>{let{tr:t}=e;return t.setMeta(s,{tippyInstance:this.tippy}),!0})}update(e,t){let n=t&&s.getState(t),r=s.getState(e.state),{state:o,composing:d}=e,{doc:c,selection:p}=o,h=t&&t.doc.eq(c)&&t.selection.eq(p)&&this.isEditable===this.editor.isEditable&&(null==n?void 0:n.forceHide)===r.forceHide;if(!this.element){if(!r.element)return;this.initialize(r)}if(this.isEditable=this.editor.isEditable,!this.editor.isEditable||!0===r.forceHide){this.hide();return}if(d||h)return;let{empty:m,ranges:g}=p,f=Math.min(...g.map(e=>e.$from.pos)),x=Math.max(...g.map(e=>e.$to.pos)),v=!c.textBetween(f,x).length&&(0,i.xh)(e.state.selection);if(m||v){let e=p.$anchor.marks().some(e=>"link"===e.type.name)||"button"===p.$anchor.parent.type.name,t=(0,i.b5)(c,{from:f,to:x},e=>"emoji"===e.type.name);if(!e&&(null==t?void 0:t.length)===0){this.hide();return}}this.tippy.setProps({getReferenceClientRect:()=>{if(!(0,i.EG)(e.state.selection))return(0,i.pr)(e,f,x);let t=e.nodeDOM(f);return t&&(0,a.Re)(t)?(u(t,".drag-handle")||u(t,"[data-content-reference]")||t).getBoundingClientRect():(0,i.pr)(e,f,x)}}),!this.isMouseDownOutsideMenu&&(0,l.KB)(this.editor)&&this.show()}show(){this.tippy.show(),document.body.classList.add("formatting-menu-open")}hide(){this.onHide&&"function"==typeof this.onHide&&this.onHide(),this.tippy.hide(),document.body.classList.remove("formatting-menu-open")}destroy(){var e,t;null===(e=this.tippy)||void 0===e||e.destroy(),null===(t=this.element)||void 0===t||t.removeEventListener("mousedown",this.mousedownHandler),document.removeEventListener("mousedown",this.mousedownDocumentHandler,!0),document.removeEventListener("mouseup",this.mouseupDocumentHandler,!0),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler),this.cleanupPanelLifecycle&&this.cleanupPanelLifecycle()}constructor({editor:e,view:t}){this.preventHide=!1,this.mousedownDocumentHandler=e=>{this.element.contains(e.target)?this.isMouseDownOutsideMenu=!1:this.isMouseDownOutsideMenu=!0},this.mouseupDocumentHandler=()=>{this.isMouseDownOutsideMenu=!1,this.update(this.editor.view)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.dragendHandler=()=>{this.isMouseDownOutsideMenu=!1,setTimeout(()=>this.update(this.editor.view))},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=e=>{var t;let{event:n}=e;if(this.preventHide){this.preventHide=!1;return}(null==n?void 0:n.relatedTarget)&&(null===(t=this.element.parentNode)||void 0===t?void 0:t.contains(n.relatedTarget))||this.hide()},this.editor=e,this.isEditable=e.isEditable,this.view=t}}let c=i.hj.create({name:"bubbleMenu",addCommands:()=>({forceHideBubbleMenu:e=>t=>{let{tr:n}=t;return n.setMeta(s,{forceHide:e}),!0},refreshBubbleMenu:()=>e=>{var t;let{state:n}=e,{tippyInstance:i}=s.getState(n);return null==i||null===(t=i.popperInstance)||void 0===t||t.forceUpdate(),!0}}),addProseMirrorPlugins(){let{editor:e}=this;return[new r.Sy({key:s,state:{init:()=>({element:null,forceHide:!1,onHide:()=>{},tippyOptions:{},tippyInstance:null}),apply(e,t){let n=e.getMeta(s);return n?{...t,...n}:t}},view:t=>new d({view:t,editor:e})})]}}),u=(e,t)=>{let n=e.querySelector(t),i=e.querySelector("[data-node-view-wrapper]");return n&&i&&(0,a.tl)(n,e,e=>e.hasAttribute("data-node-view-wrapper"))===i?n:null}},46594:function(e,t,n){"use strict";n.d(t,{Di:function(){return l},NY:function(){return s},hw:function(){return a},ri:function(){return o}});var i=n(42946),r=n(87254);let o=()=>({note:{name:r.ag._({id:"KiJn9B"}),commandName:()=>r.ag._({id:"Cq+sLh"}),description:r.ag._({id:"ooy/OF"}),icon:i.L4e,colorScheme:"accent"},info:{name:r.ag._({id:"CE+M2e"}),commandName:()=>r.ag._({id:"1E4ojF"}),description:r.ag._({id:"NfbNtV"}),icon:i.sqG,colorScheme:"blue"},warning:{name:r.ag._({id:"r6y+jM"}),commandName:()=>r.ag._({id:"xb1fsI"}),icon:i.ik8,description:r.ag._({id:"tpYgEx"}),colorScheme:"yellow"},caution:{name:r.ag._({id:"VvjZ7K"}),commandName:()=>r.ag._({id:"tC/T1p"}),description:r.ag._({id:"nbib7S"}),icon:i.$9F,colorScheme:"red"},success:{name:r.ag._({id:"zzDlyQ"}),commandName:()=>r.ag._({id:"Vv+D/T"}),description:r.ag._({id:"pqvop4"}),icon:i.f8k,colorScheme:"green"},question:{name:r.ag._({id:"bfgr/e"}),commandName:()=>r.ag._({id:"Ev0Vqt"}),description:r.ag._({id:"IsUqRH"}),icon:i.Fuz,colorScheme:"gray"}}),a=e=>o()[e]||o().note,l=()=>Object.entries(o()).map(e=>{let[t,{commandName:n,icon:i}]=e;return{key:"calloutBox-".concat(t),name:n,nodeName:"calloutBox",icon:i,shortcut:"/".concat(t),keywords:["callout","box"],execute:e=>e.chain().focus().insertContent([{type:"calloutBox",attrs:{variant:t},content:[{type:"paragraph"}]}]).run()}}),s=Object.fromEntries(Object.keys(o()).map(e=>["calloutBox-".concat(e),{type:"calloutBox",attrs:{variant:e},content:[{type:"paragraph"}]}]))},88594:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});let i=e=>"calloutBox"===e.type.name},19166:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});let i=10},86081:function(e,t,n){"use strict";n.d(t,{C:function(){return d},Z:function(){return s}});var i=n(75652),r=n.n(i),o=n(92744),a=n(18960),l=n(19166);let s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.t;return r()([e,...t]).slice(0,n)},d=e=>{try{let t=o.W.getItem(a.H.recentlyUsedCardTemplateIds),n=t?JSON.parse(t):[];if(Array.isArray(n)&&n.every(e=>"string"==typeof e)){let t=s(e,n);o.W.setItem(a.H.recentlyUsedCardTemplateIds,JSON.stringify(t))}}catch(e){}}},48043:function(e,t,n){"use strict";n.d(t,{IT:function(){return g},yG:function(){return x}});var i=n(52322),r=n(75768),o=n(32899),a=n(28535),l=n(38035),s=n(64253),d=n(87254),c=n(82108),u=n.n(c),p=n(2784),h=n(31601),m=n(97284);let g=["blank","top","left","right","behind"],f=e=>"blank"===e?d.ag._({id:"6JcK6b"}):"behind"===e?d.ag._({id:"SQOVlA"}):d.ag._({id:"T8aKxO",values:{0:u()(e)}}),x=e=>{let{layout:t,editor:n,getPos:a,edgeLayoutsEnabled:l}=e,d=(0,m.W)(),c=(0,h.z$)(),u=(0,p.useCallback)(e=>{"blank"===e?n.commands.setCardLayout(a(),e):n.commands.setCardLayout(a(),e,d),null==c||c.track(h.AA.CARD_LAYOUT_UPDATED,{source:"card-styling-menu",layout:e})},[n,a,d,c]),x=g.filter(e=>l||["blank","behind"].includes(e));return(0,i.jsx)(r.h,{mb:2,children:x.map(e=>{let n=f(e);return(0,i.jsx)(s.kH,{label:n,placement:"top",children:(0,i.jsx)(o.h,{"aria-label":n,flex:1,variant:"plain",size:"md",onClick:()=>u(e),icon:(0,i.jsx)(v,{layout:e,isSelected:t===e}),boxShadow:"none",background:t===e?"trueblue.50":"white"})},e)})})},v=e=>{let{layout:t,isSelected:n}=e,r=n?"trueblue.400":"gray.300",o=null;return"top"===t?o=(0,i.jsx)(a.xu,{height:"0.375rem",width:"100%",background:r}):"left"===t?o=(0,i.jsxs)(l.k,{height:"100%",minH:"100%",children:[(0,i.jsx)(a.xu,{width:"0.625rem",minH:"100%",background:r}),(0,i.jsx)(a.xu,{flex:"1",minH:"100%"})]}):"right"===t&&(o=(0,i.jsxs)(l.k,{height:"100%",minH:"100%",children:[(0,i.jsx)(a.xu,{flex:"1",minH:"100%"}),(0,i.jsx)(a.xu,{width:"0.625rem",minH:"100%",background:r})]})),(0,i.jsx)(a.xu,{boxSizing:"border-box",height:"1.25rem",width:"1.75rem",border:"2px solid",borderRadius:"sm",borderColor:r,background:"behind"===t?r:"none",children:o})}},74766:function(e,t,n){"use strict";n.d(t,{kc:function(){return S},$v:function(){return j}});var i=n(52322),r=n(17993),o=n(74409),a=n(20437),l=n(5879),s=n(87254),d=n(71383),c=n(51131),u=n(78112),p=n(80197),h=n(1798),m=n(56581),g=n(62614),f=n(38035),x=n(28535),v=n(77533),y=n(43297),b=n(74216),w=n(97912);let C=e=>{let{label:t,onClick:n,isChecked:r,cardBackground:o,isDark:a=!1,...l}=e,s=(0,b.wh)(o,a,w.Iv);return(0,i.jsxs)(g.z,{borderRadius:"md",display:"block",height:"auto",variant:"ghost",color:"black",onClick:n,p:1,...l,children:[(0,i.jsxs)(f.k,{borderWidth:"1px",borderColor:"gray.200",sx:s,p:2,backgroundAttachment:"unset",_focus:{boxShadow:"outline"},overflow:"hidden",position:"relative",direction:"column",align:"center",justify:"center",height:"80px",children:[(0,i.jsx)(h.g5,{background:o}),(0,i.jsx)(x.xu,{position:"relative",p:2,zIndex:0,transitionProperty:"inset",transitionDuration:"normal",width:"100%",overflow:"hidden",color:"var(--body-color)",children:(0,i.jsx)(k,{})})]}),(0,i.jsxs)(f.k,{align:"center",mt:1,children:[r&&(0,i.jsx)(m.n,{w:3,mr:1}),(0,i.jsx)(v.x,{fontSize:"sm",fontWeight:"medium",children:t})]})]})},k=()=>{let e="currentColor";return(0,i.jsxs)(y.K,{spacing:1,h:"28px",position:"relative",zIndex:1,children:[(0,i.jsx)(x.xu,{h:"6px",w:"50%",bg:e,borderRadius:"sm"}),(0,i.jsx)(x.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,i.jsx)(x.xu,{h:"3px",w:"100%",bg:e,borderRadius:"sm"}),(0,i.jsx)(x.xu,{h:"3px",w:"30%",bg:e,borderRadius:"sm"})]})},j=[{label:()=>s.ag._({id:"37VL/A"}),value:"frosted"},{label:()=>s.ag._({id:"W4wYdx"}),value:"faded"},{label:()=>s.ag._({id:"siC4v8"}),value:"none"}],S=e=>{let{background:t,container:n,updateAttributes:s}=e,m={...h.xO,...t.mask},g=(0,d.CG)(u.Pu),f=(0,p.BA)(g,n),x=(0,c.l)(g,f);return(0,i.jsx)(r.g,{spacing:4,w:"100%",align:"stretch",css:x,children:(0,i.jsxs)(r.g,{spacing:2,align:"stretch",children:[(0,i.jsx)(o.X,{size:"md",children:(0,i.jsx)(l.cC,{id:"OXOTHU"})}),(0,i.jsx)(a.M,{columns:2,spacing:2,children:j.map(e=>{var n;let{label:r,value:o}=e,a={...t,mask:{...m,effect:o}};return(0,i.jsx)(C,{onClick:()=>{s({background:a})},label:r(),isChecked:(null===(n=t.mask)||void 0===n?void 0:n.effect)===o,cardBackground:a,cardColor:f},o)})})]})})}},44317:function(e,t,n){"use strict";n.d(t,{S:function(){return _},a:function(){return M}});var i=n(52322),r=n(55478),o=n(32981),a=n(26468),l=n(73751),s=n(2338),d=n(54326),c=n(97217),u=n(36371),p=n(73582),h=n(2969),m=n(28535),g=n(3181),f=n(13272),x=n(47443),v=n(52929),y=n(42946),b=n(49929),w=n(5879),C=n(2784),k=n(71383),j=n(1013),S=n(51088),A=n(55338),I=n(91492),z=n(1798),L=n(31818),E=n(74766),N=n(84561);let M=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,r.q)(),[i,o]=(0,C.useState)(0),a=(0,C.useCallback)(e=>{t(),o(e)},[t]),l=(0,k.TL)();return{openBackgroundTab:(0,C.useCallback)(function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];e&&l((0,N.G9)()),a(0)},[l,a]),openStylesTab:(0,C.useCallback)(()=>{a(1)},[a]),isOpen:e,onClose:n,tabIndex:i,setTabIndex:o}},_=(0,C.memo)(function(e){let{editor:t,isOpen:n,onClose:r,background:k,container:N,updateNestedAttributes:M,tabIndex:_,setTabIndex:T,isAccentImageDrawer:R=!1,enableMask:H=!1}=e,P=(0,A.A)(t),O=(0,C.useCallback)(()=>{0!==_&&T(0),r()},[r,_,T]),D=(0,j.g)(),W=H&&(0,z.Zi)(k),F=R?L.dW.accentImage():L.dW.cardBackground(),B=(0,C.useCallback)(e=>!R||e.backgroundType!==I.E.NONE,[R]);return(0,i.jsxs)(o.d,{trapFocus:!1,isOpen:n,placement:"right",onClose:O,size:D,blockScrollOnMount:!1,children:[(0,i.jsx)(a.Z,{background:"none"}),(0,i.jsxs)(l.s,{onKeyDown:P,"data-in-editor-focus":!0,"data-edit-background-drawer":!0,"data-testid":"card-style-drawer",children:[(0,i.jsx)(s.o,{}),(0,i.jsx)(d.x,{children:(0,i.jsx)(w.cC,{id:"xYilR2"})}),(0,i.jsx)(c.f,{overflowX:"hidden",children:(0,i.jsxs)(u.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:_,onChange:T,children:[W&&(0,i.jsxs)(p.t,{children:[(0,i.jsxs)(h.O,{children:[(0,i.jsx)(m.xu,{mr:2,children:(0,i.jsx)(b.G,{icon:y.re8})}),(0,i.jsx)(w.cC,{id:"GtJbUa"})]}),(0,i.jsxs)(h.O,{children:[(0,i.jsx)(m.xu,{mr:2,children:(0,i.jsx)(b.G,{icon:y.Mdf})}),(0,i.jsx)(w.cC,{id:"9LBB6c"})]})]}),(0,i.jsxs)(g.n,{children:[(0,i.jsx)(f.x,{p:0,pb:1,mt:W?4:0,children:(0,i.jsx)(S.o,{editor:t,updateNestedAttributes:M,background:k,defaultMessage:(0,i.jsxs)(x.b,{children:[(0,i.jsx)(v.z,{}),F]}),isDark:!1,isValidSource:B})}),W&&(0,i.jsx)(f.x,{p:0,pb:1,mt:4,children:(0,i.jsx)(E.kc,{updateAttributes:M,background:k,container:N})})]})]})})]})]})})},96443:function(e,t,n){"use strict";n.d(t,{FV:function(){return s},oE:function(){return d},xd:function(){return l}});var i=n(42946),r=n(87254),o=n(3440),a=n.n(o);let l=[{key:"rephrase.better",label:()=>r.ag._({id:"WLqWVj"}),instructions:"Improve the writing",icon:i.nA6,group:"writing",loadingMessage:()=>r.ag._({id:"OxbbYn"}),variationName:()=>r.ag._({id:"5j51A1"}),completionMessage:()=>r.ag._({id:"EF1nyz"})},{key:"edit.spelling",label:()=>r.ag._({id:"kIRRvo"}),instructions:"Fix spelling & grammar",icon:i.LEp,group:"writing",loadingMessage:()=>r.ag._({id:"vLjsO9"}),variationName:()=>r.ag._({id:"MRZxAn"}),completionMessage:()=>r.ag._({id:"3G04Qf"})},{key:"edit.translate",label:()=>r.ag._({id:"pi8x/S"}),instructions:"",icon:i.BCn,group:"writing",loadingMessage:()=>r.ag._({id:"aKSJTV"}),variationName:()=>r.ag._({id:"a/ppJp"}),completionMessage:()=>r.ag._({id:"a/ppJp"})},{key:"rephrase.expand",label:()=>r.ag._({id:"rRLXT4"}),instructions:"Make this longer",icon:i.xiG,group:"writing",loadingMessage:()=>r.ag._({id:"Q+x/E4"}),variationName:()=>r.ag._({id:"pvJgUJ"}),completionMessage:()=>r.ag._({id:"jgdqxQ"})},{key:"rephrase.condense",label:()=>r.ag._({id:"xTY2A5"}),instructions:"Make this more concise. Dont change the layout or images, only change the writing within the existing template.",icon:i.hx$,group:"writing",loadingMessage:()=>r.ag._({id:"BjuYlr"}),variationName:()=>r.ag._({id:"Q7U9iz"}),completionMessage:()=>r.ag._({id:"l7sxzR"})},{key:"rephrase.simplify",label:()=>r.ag._({id:"Lx/Sd1"}),instructions:"Simplify the language",icon:i.VeG,group:"writing",loadingMessage:()=>r.ag._({id:"AAhoH1"}),variationName:()=>r.ag._({id:"nvmoB1"}),completionMessage:()=>r.ag._({id:"5xpG46"})},{key:"rephrase.specifics",label:()=>r.ag._({id:"u6rs0A"}),instructions:"Rewrite this to be more specific. Use the previous text and the outline for context. If you don't have enough details, make them up.",icon:i.nUQ,group:"writing",loadingMessage:()=>r.ag._({id:"HW6L/y"}),variationName:()=>r.ag._({id:"PRHEO1"}),completionMessage:()=>r.ag._({id:"dib9YI"})},{key:"layout.different",label:()=>r.ag._({id:"gyYxFM"}),instructions:"I dont like this template. Try a different layout or visualization. You can rephrase the text to fit a new template, but don't alter the original voice or make up new details.",icon:i.cHW,group:"layout",loadingMessage:()=>r.ag._({id:"cEGrM6"}),variationName:()=>r.ag._({id:"kLEOtI"})},{key:"layout.visual",label:()=>r.ag._({id:"gcHjj/"}),instructions:"I want to make this content more visual. Make up new images to illustrate the concepts. You can rephrase the text to fit the new template, but don't alter the original voice or make up new details",template:"imagesWithText",icon:i.l9f,group:"layout",loadingMessage:()=>r.ag._({id:"hMtOFm"}),variationName:()=>r.ag._({id:"p0QPRq"})},{key:"layout.addImage",label:()=>r.ag._({id:"LfOSf5"}),instructions:"Make up a new image to illustrate the concepts. If there is already a primary image or a placeholder, replace it. Otherwise, add a new image using an image-layout or COLUMNS. Keep the rest of my content the same. You can rephrase the text to fit the new template, but don't alter the original voice or make up new details. Do not remove any of the text!",icon:i.VmB,group:"layout",loadingMessage:()=>r.ag._({id:"hMtOFm"}),variationName:()=>r.ag._({id:"2ap0Xm"})},{key:"layout.timeline",label:()=>r.ag._({id:"UrX5Wc"}),instructions:"Reformat this as a timeline",template:"timeline",icon:i.cp3,group:"layout",loadingMessage:()=>r.ag._({id:"+tf05m"}),variationName:()=>r.ag._({id:"cklVjM"})}],s=a()(l,"group"),d=[{key:"writing",label:()=>r.ag._({id:"4kJRen"})},{key:"layout",label:()=>r.ag._({id:"rdU729"})}]},77692:function(e,t,n){"use strict";n.d(t,{M:function(){return G},y:function(){return B}});var i=n(52322),r=n(83906),o=n(76643),a=n(10625),l=n(67046),s=n(62614),d=n(332),c=n(99058),u=n(89099),p=n(28535),h=n(69024),m=n(74105),g=n(20816),f=n(25481),x=n(29117),v=n(77533),y=n(36474),b=n(82655),w=n(54933),C=n(49929),k=n(64253),j=n(5879),S=n(87254),A=n(2784),I=n(94818),z=n(43901),L=n(65927),E=n(21829),N=n(25556),M=n(30240),_=n(16810),T=n(71383),R=n(31601),H=n(27287),P=n(65068),O=n(36947),D=n(31818),W=n(96443),F=n(98082);let B=e=>{let{attrs:t,editor:n,getPos:p}=e,h=t.id,m=!!(0,T.CG)(H.lH),{isTranslateCardOpen:g,onTranslateCardOpen:f,onTranslateCardClose:x,startTranslation:v}=(0,F.fl)({cardId:h}),y=(0,T.CG)((0,_.nm)("chat")),{color:S,bg:I,hoverColor:E,hoverBg:W,borderColor:B}=(0,P.lv)(),U=(0,A.useRef)(null),{status:V,editCard:q}=(0,F.Cj)({editor:n,getPos:p,cardId:t.id}),K="loading"===V,Y=(0,N.YO)(void 0,"editCard",R.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),X=(0,A.useCallback)(e=>{var t;if(Y()){if((null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){f();return}q(e)}},[Y,q,f]),$=(0,T.TL)(),Z=(0,T.CG)((0,O.OU)(t.id,"editWithAI")),Q=(0,A.useCallback)(()=>{$((0,O.RD)())},[$]),J=(0,A.useCallback)(()=>{$((0,O.A7)({cardId:t.id,menuType:"editWithAI"}))},[$,null==t?void 0:t.id]);(0,o.O)({ref:U,handler:e=>{if(!Z)return;let n=e.target;null!=n&&n.closest('[data-card-ai-edit-menu-trigger="'.concat(t.id,'"]'))||Q()}});let ee=(0,A.useRef)(null);return(0,M.ye)("editCard2")?(0,i.jsxs)(k.Wk,{isDark:!1,children:[(0,i.jsxs)(a.v,{isLazy:!0,onClose:Q,onOpen:J,isOpen:Z,closeOnBlur:!1,initialFocusRef:ee,children:[(0,i.jsx)(k.kH,{label:(0,i.jsx)(j.cC,{id:"EVnzPs"}),placement:"top",shouldWrapChildren:!0,children:(0,i.jsxs)(l.j,{as:s.z,isActive:Z,"data-guider-highlight":"edit-with-ai-button","data-card-ai-edit-menu-trigger":t.id,height:D.fD,fontWeight:"900",alignItems:"center",fontFamily:"Inter, sans-serif",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:B,color:S,boxShadow:"sm",cursor:"pointer",fontSize:"14px",bg:I,px:.5,_hover:{color:E,background:W},isLoading:K,pointerEvents:"auto",children:[(0,i.jsx)(C.G,{icon:w.JyM,fixedWidth:!0}),(0,i.jsx)(r.v,{})]})}),(0,i.jsx)(d.h,{children:(0,i.jsxs)(c.q,{"data-card-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none","data-card-ai-edit-menu-trigger":t.id,maxH:"60vh",display:"flex",flexDirection:"column",children:[(0,i.jsx)(G,{editCardIfAllowed:X,onClose:Q,firstItemRef:U,inputRef:ee,isDisabled:K,pb:"10%"}),(0,i.jsx)(u.E,{px:5,py:3,bg:"gray.100",mx:-2,mb:-2,justify:"center",alignItems:"center",borderBottomRadius:"xl",children:(0,i.jsx)(u.U,{children:(0,i.jsx)(s.z,{onClick:()=>{n.commands.selectInsideCardBody(p()),y||z.T.emit("toggle",{}),Q()},variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,i.jsx)(C.G,{icon:b.qWS}),children:(0,i.jsx)(j.cC,{id:"mw/rmM"})})})})]})})]}),g&&(0,i.jsx)(L.o,{isSite:m,isFullDoc:!1,onClose:x,startTranslation:v})]}):null},G=(0,A.memo)(e=>{let{editCardIfAllowed:t,onClose:n,firstItemRef:r,inputRef:o,isDisabled:a,groups:l=["writing","layout"],showCreditCosts:s=!0,opacityFadeUpsell:d=!1,...c}=e,u="-webkit-gradient(linear, left top, left bottom, from(rgba(0,0,0,1)), to(rgba(0,0,0,0)))";return(0,i.jsxs)(p.xu,{px:.5,pt:.5,flex:1,overflowY:"auto",style:d?{WebkitMaskImage:u,maskImage:u}:{maskImage:"linear-gradient(to bottom, transparent, black 0%, black 90%, transparent)"},...c,children:[(0,i.jsx)(h.k,{children:(0,i.jsxs)(m.B,{size:"sm",mb:2,children:[(0,i.jsx)(g.Z,{fontSize:"sm",color:"orchid.300",children:(0,i.jsx)(C.G,{icon:w.JyM})}),(0,i.jsx)(I.o,{initialHeight:"32px",ref:o,pl:7,py:1.5,borderRadius:"xl",maxLength:300,isDisabled:a,onKeyDown:e=>{var i,l;if(!a){if("Enter"===e.key&&!e.shiftKey){e.preventDefault(),e.stopPropagation();let i=null===(l=o.current)||void 0===l?void 0:l.value;if(!i)return;t({instructions:i}),n()}"ArrowDown"===e.key&&(null===(i=o.current)||void 0===i?void 0:i.value.length)===0&&(e.preventDefault(),e.stopPropagation(),r.current&&r.current.focus())}},placeholder:S.ag._({id:"vKZEFh"})})]})}),W.oE.map((e,o)=>{let a=W.FV[e.key];return a&&0!==a.length&&l.includes(e.key)?(0,i.jsx)(h.k,{title:e.label(),children:a.map((e,a)=>(0,i.jsx)(f.s,{icon:(0,i.jsx)(C.G,{icon:e.icon,fixedWidth:!0}),onClick:()=>{t({operation:e}),n()},ref:0===a&&0===o?r:null,children:(0,i.jsxs)(x.U,{children:[(0,i.jsx)(v.x,{children:e.label()}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.L,{}),(0,i.jsx)(E.J,{type:"editCard",colorScheme:"blackAlpha",color:"blackAlpha.600",fontSize:"sm"})]})]})},e.key))},e.key):null})]})});G.displayName="EditCardAIMenuGroups"},98082:function(e,t,n){"use strict";n.d(t,{Cj:function(){return z},fl:function(){return E},tl:function(){return L},yH:function(){return I}});var i=n(87254),r=n(37243),o=n(30764),a=n(2784),l=n(96114),s=n(90025),d=n(69964),c=n(41019),u=n(69274),p=n(13312),h=n(78180),m=n(68785),g=n(13090),f=n(30240),x=n(27238),v=n(2529),y=n(71383),b=n(93593),w=n(22982),C=n(78112),k=n(54317),j=n(84663),S=n(96443);let A=()=>{let{generate:e}=(0,d.jz)("EditCard",{}),{generate:t}=(0,d.jz)("TranslateCard",{});return(0,a.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},I=(e,t)=>({...e,layout:t.layout,layoutTemplateColumns:t.layout!==e.layout?t.layoutTemplateColumns:e.layoutTemplateColumns}),z=e=>{let{editor:t,getPos:n,cardId:r}=e,o=A(),d=(0,y.CG)(C.yx),p=(0,y.CG)(C.Pu),x=(0,y.qr)(),k=(0,y.CG)((0,m.P3)(r)),z=(0,j.W7)(),E=(0,a.useCallback)(async e=>{let t=e.instructions?e.instructions:e.operation?e.operation.instructions:"",{previous:n,inputHtml:i,operation:a}=e,s=(null==z?void 0:z.format)||"deck",h=(null==z?void 0:z.settings.imageProvider)||f.VH.get("aiGeneratorDefaultImageProvider");if(!d||!d.organization)throw Error("Doc or organization not found");let m=(0,c.nZ)(),y=performance.now(),C=(0,w.D)(x),k={interface:"edit-card",interactionId:m,inputContent:i,inputMessage:t,inputData:{custom:!!a,operation:null==a?void 0:a.key,operationGroup:null==a?void 0:a.group,format:s,imageProvider:h},product:(0,v.K9)(d.organization),docId:d.id,cardId:r};try{let{promise:e}=o({workspaceId:d.organization.id,variables:{inputHtml:i,request:t,format:s,outline:C,previousHtml:n,template:null==a?void 0:a.template,imageProvider:h},interactionId:m},a),r=null==z?void 0:z.settings.imageStyle;!r&&"aiGenerated"===h&&p&&(r=(0,b.A)(p)),(0,c.hq)(k);let f=await e;console.log("[EditCard] Response",f);let x=(0,l.Jn)(f),v=await (0,u.sj)(x,{docFormatKey:s,loadImages:!1,context:{workspaceId:d.organization.id,docId:d.id,interactionId:m},imageOptions:{provider:h,generateStyle:r},theme:p});return(0,c.o)({...k,outputContent:x,outputMessage:f.replace(x,"[outputContent]"),latency:performance.now()-y}),(0,g.d)("editCard",d.organization,m),{output:v,interactionId:m}}catch(e){throw(0,c.pQ)({...k,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing card",latency:performance.now()-y}),e}},[null==z?void 0:z.format,null==z?void 0:z.settings.imageProvider,null==z?void 0:z.settings.imageStyle,d,x,r,o,p]),N=(0,a.useCallback)(async e=>{let{instructions:o,operation:a}=e,l=n(),d=t.view.state.doc.nodeAt(l);if(!d){console.error("[AICard] Cannot append card. Node unknown");return}try{var c,u;x.dispatch((0,m.t)({cardId:r,suggestions:{status:"loading",loadingMessage:null==a?void 0:null===(c=a.loadingMessage)||void 0===c?void 0:c.call(a),variants:[]}}));let e=(0,j.vR)(t,l),n=(0,s.c)(t,d),{output:p,interactionId:h}=await E({instructions:o,operation:a,inputHtml:n,previous:e});p.attrs=I(d.attrs,p.attrs),L(t,r,p),x.dispatch((0,m.t)({cardId:r,suggestions:{status:"done",interactionId:h,selected:"v1",operation:a,instructions:o,variants:[{label:i.ag._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:d.toJSON()},{label:(null==a?void 0:null===(u=a.variationName)||void 0===u?void 0:u.call(a))||i.ag._({id:"YledUl"}),isOriginal:!1,id:"v1",card:p}]}}))}catch(e){console.error("[EditCard] Error regenerating card",e),x.dispatch((0,m.t)({cardId:r,suggestions:{status:"error",variants:[]}}))}},[E,t,n,x,r]);return(0,a.useEffect)(()=>h.T.on("translate",e=>{let{type:t,cardId:n,language:i}=e,o=S.xd.find(e=>"edit.translate"===e.key);"card"===t&&n===r&&o&&N({instructions:"".concat(i.englishName," (").concat(i.key,")"),operation:o})}),[r,N]),{editCard:N,status:k}},L=(e,t,n)=>{let i=(0,r.N2)(e.state.doc,e=>(0,k.KH)(e)&&e.attrs.id===t)[0];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:i.pos,to:i.pos+i.node.nodeSize},n).selectInsideCardBody(i.pos).run();let a=o.NB.fromJSON(e.state.schema,n),l=(0,C.Pu)((0,y.bh)().getState());(0,p.eM)(e,a,l)},E=e=>{let{cardId:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,x.M)({id:"TranslateCardDisclosure"}),o=(0,a.useCallback)(e=>{h.T.emit("translate",{type:"card",cardId:t,language:e}),i()},[t,i]);return{isTranslateCardOpen:n,onTranslateCardOpen:r,onTranslateCardClose:i,startTranslation:o}}},89337:function(e,t,n){"use strict";n.d(t,{M:function(){return c},s:function(){return u}});var i=n(87254),r={src:"/_next/static/media/Title-with-2-Column-Image-Left.a898abf9.svg",height:47,width:92,blurWidth:0,blurHeight:0},o={src:"/_next/static/media/Title-with-3-boxes.8a28c3c6.svg",height:49,width:91,blurWidth:0,blurHeight:0},a={src:"/_next/static/media/Title-with-3-images.172b44a3.svg",height:69,width:92,blurWidth:0,blurHeight:0},l={src:"/_next/static/media/Title-with-Bullets.066ad97e.svg",height:55,width:92,blurWidth:0,blurHeight:0},s={src:"/_next/static/media/Title-with-text.2a88d207.svg",height:45,width:92,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/Title-with-timeline.5a8d1065.svg",height:63,width:91,blurWidth:0,blurHeight:0};let c=()=>[{name:i.ag._({id:"RYtHky"}),key:"bullets",image:l},{name:i.ag._({id:"m2tQ9E"}),key:"paragraphs",image:s},{name:i.ag._({id:"2abZdy"}),key:"twoColImage",image:r},{name:i.ag._({id:"cklVjM"}),key:"timeline",image:d},{name:i.ag._({id:"cDxTeG"}),key:"imagesWithText",image:a},{name:i.ag._({id:"61H/21"}),key:"boxes",image:o}],u=["bullets","paragraphs","twoColImage","sideImageWithText","timeline","imagesWithText","boxes","arrows","columns","pyramid","bigBullets","icons","chart"]},84663:function(e,t,n){"use strict";n.d(t,{W7:function(){return I},Xv:function(){return A},vO:function(){return z},vR:function(){return L}});var i=n(37243),r=n(4742),o=n.n(r),a=n(30764),l=n(2784),s=n(69964),d=n(92662),c=n(41019),u=n(69274),p=n(13312),h=n(27419),m=n(69971),g=n(13090),f=n(30240),x=n(2529),v=n(71383),y=n(93593),b=n(22982),w=n(55898),C=n(78112),k=n(54317),j=n(89337);let S={language:"English (US)",textAmount:"md",tone:"",audience:"",format:"deck",imageProvider:"aiGenerated"},A=e=>{let{editor:t,getPos:n,theme:r,input:d,randomTemplate:m=!1}=e,{generate:w}=(0,s.jz)("GenerateCard",{}),A=(0,v.CG)(C.yx),[z,E]=(0,l.useState)(!1),N=(0,v.qr)(),M=(0,l.useCallback)(async e=>{if(!A||!A.organization)throw Error("Doc or organization not found");let{instructions:t="",template:n,input:i="",settings:o,interactionId:a}=e,l=performance.now(),s=(0,b.D)(N),d={...S,...o,editorMode:"structured",textMode:"generate",input:i,instructions:t,template:n,previous:e.context,outline:s,model:f.VH.get("geminiGenerate")?"gemini-1.5-flash":"claude-3-haiku-20240307"},p=null==o?void 0:o.imageStyle;"aiGenerated"===d.imageProvider&&r&&(p=(0,y.A)(r));let h={interface:"add-card",interactionId:a,inputContent:i,inputMessage:t,inputData:{...o,template:n},product:(0,x.K9)(A.organization),docId:A.id};(0,c.hq)(h);let{promise:m}=w({workspaceId:A.organization.id,variables:d,interactionId:a}),v=await m,C=await (0,u.sj)(v,{docFormatKey:d.format,loadImages:!1,theme:r,context:{workspaceId:A.organization.id,docId:A.id,interactionId:a},imageOptions:{provider:d.imageProvider,generateStyle:p},preserveLayouts:!0});return(0,c.o)({...h,outputContent:v,latency:performance.now()-l}),(0,g.d)("generateCard",A.organization,a),C},[w,A,r,N]),{template:_,settings:T}=d,R=I(),H=(0,h.jw)(T.locale||(null==R?void 0:R.settings.locale)||"en");return{isGenerating:z,getContextAndGenerate:(0,l.useCallback)(async e=>{if(!t)return;let l=n(),s=t.view.state.doc.nodeAt(l);if(!s){console.error("[AICard] Cannot append card. Node unknown");return}let d=L(t,l);E(!0);try{let n=(0,c.nZ)(),u=await M({input:e,template:_||(m?o()(j.s):void 0),context:d,settings:{language:H.englishName},interactionId:n});u.attrs={...s.attrs,...u.attrs,container:{...s.attrs.container,...u.attrs.container},generatorInput:{...s.attrs.generatorInput,prompt:e,template:_,settings:T,status:"done",interactionId:n}};let h=(0,i.N2)(t.state.doc,e=>(0,k.KH)(e)&&e.attrs.id===s.attrs.id)[0];if(!h){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}t.chain().insertContentAt({from:h.pos,to:h.pos+h.node.nodeSize},u).setMeta("isGenerateCard",!0).selectInsideCardBody(l).run();let g=a.NB.fromJSON(t.state.schema,u);(0,p.eM)(t,g,r)}catch(e){console.error("[GenerateCard] Error generating card",e)}E(!1)},[M,t,n,r,_,T,H]),updateInput:(0,l.useCallback)(e=>{let i=n(),r=t.view.state.doc.nodeAt(i);(null==r?void 0:r.attrs.generatorInput)&&t.commands.updateNestedAttributesAtPos(i,{generatorInput:e})},[t,n]),locale:H}},I=()=>{var e,t,n,i;let r=(0,v.CG)(C.yx),o=null==r?void 0:null===(t=r.docGenerateInput)||void 0===t?void 0:null===(e=t.docGeneration)||void 0===e?void 0:e.id,a=null==r?void 0:null===(n=r.docGenerateInput)||void 0===n?void 0:n.id,{data:l}=(0,m.Y96)({variables:{id:o||""},skip:!o}),s=null==l?void 0:l.docGeneration;return null==s?void 0:null===(i=s.docGenerateInputs)||void 0===i?void 0:i.find(e=>e.id===a)},z=e=>{let[t,n]=(0,l.useState)([]),[i,r]=(0,l.useState)("ready"),{generate:o}=(0,s.jz)("SuggestCardTopics",{onStart(){r("generating"),n([])},onContent(e){n(e.split("\n").filter(Boolean))},onComplete(e){n(e.split("\n").filter(Boolean)),r("done")},onError(e){console.error("Error generating suggestions",e),r("error")},timeout:3e4}),a=(0,v.CG)(C.yx),d=I(),c=(0,v.qr)();return(0,l.useEffect)(()=>{if(e&&"ready"===i){let e=(0,b.D)(c);e.trim().split("\n").length<3||o({variables:{outline:e,format:(null==d?void 0:d.format)||S.format},workspaceId:a.organization.id})}},[i,o,e,c,d,a]),{suggestions:t,generateSuggestionsStatus:i}},L=(e,t)=>{let n=(0,w.Ck)(e.state.doc,Math.max(t-2e3,0),t),i=(0,d.xk)(n).slice(-500);return(0,d.Zs)(i)}},30631:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});let i={prompt:"",template:null,settings:{},status:"ready"}},6510:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var i=n(52322),r=n(75768),o=n(32899),a=n(42946),l=n(49929),s=n(64253),d=n(87254);let c=[{key:"start",name:()=>d.ag._({id:"Xl2IZ9"}),icon:a.bqB,description:()=>d.ag._({id:"N0rIpR"})},{key:"center",name:()=>d.ag._({id:"7FOGnf"}),icon:a.G_A,description:()=>d.ag._({id:"3JV7Yt"})},{key:"end",name:()=>d.ag._({id:"H0UcZG"}),icon:a.E0H,description:()=>d.ag._({id:"LcSMtc"})}],u=e=>{let{defaultAlignment:t,alignment:n,setAlignment:a}=e;return(0,i.jsx)(r.h,{isAttached:!0,size:"sm",display:"flex",children:c.map(e=>{let r=n||e.key!==t?e.key===n?"trueblue.100":void 0:"trueblue.50";return(0,i.jsx)(s.kH,{label:(0,i.jsx)(s.X,{label:e.name(),description:e.description()}),placement:"top",children:(0,i.jsx)(o.h,{"aria-label":e.name(),px:"2.5",boxShadow:"none",icon:(0,i.jsx)(l.G,{icon:e.icon}),variant:"plain",bg:r,onClick:()=>{a(e.key)}})},e.key)})})}},87283:function(e,t,n){"use strict";n.d(t,{B:function(){return A},X:function(){return I}});var i=n(37243),r=n(9850),o=n.n(r),a=n(60737),l=n(27191),s=n(93593),d=n(68498),c=n(46924),u=n(91492),p=n(12971),h=n(51161),m=n(98775),g=n(19732),f=n(31335),x=n(80180),v=n(38636),y=n(22156),b=n(43988),w=n(65050),C=n(81047),k=n(54317),j=n(54563);let S=/^(\*\*\*)/,A=i.hj.create({name:"cardCommands",addCommands:()=>({resetCardSettings:e=>t=>{let{state:n,dispatch:i,chain:r}=t;if(!i)return!0;let o=r();return n.doc.descendants((t,n)=>{(0,f.KH)(t)&&o.updateNestedAttributesAtPos(n,e)}),!0},splitCardAtSelection:()=>e=>(I(e),!0),insertNestedCard:()=>e=>{let{state:t,chain:n,dispatch:i,editor:r}=e;if(!i)return!0;let{from:o,$from:a}=t.selection;return n().insertContentAndSelect((0,g.e)().insertCardInside).command(e=>{let{tr:t}=e,n=(0,v.Mw)({editor:r,pos:o-a.parentOffset-1,tr:t});return n.length&&requestAnimationFrame(()=>{var e,t;null===(e=(t=r.commands).moveAnnotations)||void 0===e||e.call(t,n)}),!0}).run(),!0},convertToNestedCard:()=>e=>{let{state:t,dispatch:n,commands:i}=e;if(!n)return!0;let r=(0,a.ym)(t.schema.nodes[j.Zb.name])(t,n);return i.selectInsertedNode(),r},unnestCard:e=>t=>{let{state:n,dispatch:r,chain:o,tr:a}=t,l=n.doc.nodeAt(e);if(!l||!(0,f.KH)(l))return!1;if(!r)return!0;let s=(0,C.xn)(a,e);if(!s)return!1;let d=a.doc.resolve(e),c=(0,i.qv)(d,f.KH),u=(0,b.cM)(d),p=null;u&&(p=c?(0,C.lo)(n.doc,c.pos,!0):null);let h=e+l.nodeSize,m=o();if(p&&u&&c){let e=(0,b.Qp)(c.node)?u.node.content:u.node;m.insertContentAt(p,e.toJSON()).setMeta("cardNotesHandled",!0)}return m.insertContentAt({from:e,to:h},s.node.toJSON().content).selectInsertedNode().command(t=>{let{tr:n}=t;return n.setMeta("annotationEvent",{type:"merge-cards",contentPos:s.pos,insertPos:e}),!0}).run(),!0},mergeCardsAtPos:e=>t=>{let{tr:n}=t,i=n.doc.nodeAt(e);return!!(i&&(0,f.KH)(i))&&(0,C.Gq)(e,n)},mergeCardsOnDelete:e=>t=>{let{tr:n,state:r,dispatch:o}=t;if(!o)return!0;let{selection:a}=r,l=(0,i.Kk)(f.KH)(a);if(!l||!a.empty)return!1;try{if(!(0,C.pt)(a,e))return!1;return e?(0,C.Yh)(l.pos,n,r):(0,C.Gq)(l.pos,n)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}},insertCardAfter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.e)().insertCardInside;return t=>{let{state:n,chain:r,dispatch:o}=t;if(!o)return!0;let{selection:a}=n,l=(0,i.Kk)(f.KH)(a);if(!l)return!0;let{pos:s,node:d}=l,c=s+d.nodeSize;return r().insertContentAt(c,e).selectInsertedNode().scrollIntoView().run(),!0}},deleteCardIfEmpty:e=>t=>{let{tr:n,dispatch:i,state:r}=t;if(!i)return!0;let o=!1,{from:a,to:l}=r.selection;return r.doc.nodesBetween(a,l,(t,i)=>{if((0,f.KH)(t)&&(0,j.pr)(t)&&i>w.k_){let r=n.doc.resolve(i).depth>1;n.deleteRange(i,i+t.nodeSize);let a=(0,m.E)(n.doc.resolve(i+(r?0:e?1:-1)),e?1:-1);a&&n.setSelection(a),o=!0}}),o},deleteCard:e=>t=>{let{state:n,dispatch:i,tr:r}=t;if(!i)return!0;let o=n.doc.resolve(e),a=o.depth>1,l=o.nodeAfter;if(!l||!(0,f.KH)(l))return console.error("[CardExtension.deleteCard] Cannot delete card. Node unknown"),!1;r.delete(e,e+l.nodeSize);let s=(0,m.E)(r.doc.resolve(e-(a?0:1)),-1);return s&&r.setSelection(s),!0},duplicateCard:e=>t=>{let{state:n,chain:i,editor:r}=t,a=n.doc.nodeAt(e);if(!a||!(0,f.KH)(a))return console.error("[CardExtension.duplicateCard] Cannot duplicate card. Node unknown"),!1;let l=e+a.nodeSize,s=(0,x.hs)(o()(a.toJSON()));return i().insertContentAt(l,s,{updateSelection:!1}).command(e=>{let{tr:t}=e;return t.setMeta(c.q,!0),!0}).run(),setTimeout(()=>{r.chain().selectInsideNodeAtPos(l).focus().run()},200),!0},rearrangeCards:e=>{let{from:t,to:n,position:i}=e;return e=>{let r,{view:o,state:a,tr:s}=e,d=a.doc.resolve(n),c=a.doc.resolve(t),u=c.pos+c.nodeAfter.nodeSize,p=new l.qv(c),h=p.content();if((r="below"===i?d.pos+d.nodeAfter.nodeSize:"above"===i?d.pos:d.pos+d.nodeAfter.nodeSize-1)===c.pos)return s.setMeta("preventDispatch",!0),!0;s.delete(p.from,p.to);let m=s.mapping.map(r);s.replaceRangeWith(m,m,h.content.firstChild);let g=s.doc.resolve(m+1);s.setSelection(new l.qv(g));let f={type:"move",insertPos:m,insertPosRaw:r,pos:c.pos,end:u};return s.setMeta("annotationEvent",f).setMeta("rearrangeCards",!0),o.focus(),!0}},rearrangeCardsById:(e,t)=>n=>{var i;let{dispatch:r,tr:o,editor:a}=n;if(!r)return!0;let l=(0,k.Y0)(a.state.doc);if(!l)return!1;let s=l.map(e=>e.node.attrs.id),c=t.filter(e=>s.includes(e)).map(e=>l.find(t=>t.node.attrs.id===e)).filter(e=>!!e),u=c.map(e=>({pos:e.pos,id:e.node.attrs.id})).filter(e=>{let{id:t}=e;return t&&"string"==typeof t}),p=null===(i=c[0])||void 0===i?void 0:i.node.attrs.id;if(!p)return!0;let h=Math.max(e.findIndex(e=>e===p),0),m=e[h-1],g=l.find(e=>e.node.attrs.id===m),f=h>0&&g?g.pos+g.node.nodeSize:l[h].pos;if(void 0===f)return!0;[...c].reverse().forEach(e=>{e&&o.replaceWith(f,f,e.node)}),c.forEach(e=>{if(!e)return;let t=o.mapping.map(e.pos);o.delete(t,t+e.node.nodeSize)});let x=(0,k.Y0)(o.doc);if(!x)return!0;let v=x.map(e=>({pos:e.pos,id:e.node.attrs.id})).filter(e=>{let{id:n}=e;return t.includes(n)}).map(e=>{var t;let{id:n,pos:i}=e,r=null===(t=u.find(e=>e.id===n))||void 0===t?void 0:t.pos;return r?{id:n,oldPos:r,newPos:i}:null}).filter(e=>!!e);return o.setMeta("annotationEvent",{type:"rearrange-cards",rearrangedCardPositions:v,insertPos:f}).setMeta("rearrangeCards",!0).setMeta(d.k,!0),!0},updateThemeAccentImages:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:i,commands:r}=n,o=!e||0===e.length,a=0;return i.state.doc.descendants((n,i)=>{let l=(0,y.pt)(n);if(l||(0,f.KH)(n)){let d=l&&n.attrs.background.type===u.E.NONE;(n.attrs.background.source===s.cx||t&&l||d)&&(o?r.updateAttributesAtPos(i,{background:{type:l?u.E.NONE:void 0}}):(r.updateNestedAttributesAtPos(i,{background:e[a%e.length]}),a++))}}),!0}},deleteCardsById:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:r,dispatch:o,tr:a}=n;if(!o)return!0;let l=(0,i.N2)(r.state.doc,t=>(0,f.KH)(t)&&e.includes(t.attrs.id));if(!l.length)return!1;let s=l.map((e,t)=>({pos:e.pos,cardIndex:t}));l.forEach(e=>{let{node:t,pos:n}=e;a=a.delete(a.mapping.map(n),a.mapping.map(n+t.nodeSize))});let c=l[0].pos,u=(0,h.t)(a.doc.resolve(c));return u&&(a=a.setSelection(u)),t&&a.setMeta("annotationEvent",{type:"filmstrip-cut",deleted:s}),a.setMeta(d.k,!0),!0}},deleteCardsAfter:e=>t=>{let{editor:n,dispatch:i,commands:r}=t;if(!i)return!0;let o=(0,p.sS)(n.state.doc.firstChild,e=>(0,f.KH)(e)).map(e=>e.node.attrs.id);if(null===e)return r.deleteCardsById(o);let a=o.indexOf(e),l=a>-1?o.slice(a+1):[];return 0===l.length||r.deleteCardsById(l)},selectInsideNextCard:e=>t=>{let{state:n,dispatch:i,commands:r}=t;if(!i)return!0;let{selection:o}=n,a=(0,p.Ru)(o.$from,f.KH)[0];if(!a||!o.empty)return!1;let l=n.doc.resolve(a.pos),s=l.index();if(e){if(s===l.parent.childCount-1)return!1;r.selectInsideNodeAtPos(a.pos+a.node.nodeSize)}else{if(0===s)return!1;let e=l.posAtIndex(s-1);r.selectInsideNodeAtPos(e,-1)}return!0}}),addInputRules:()=>[new i.VK({find:S,handler:e=>{let{state:t,range:n}=e,{tr:i}=t;I({tr:i.deleteRange(n.from,n.to),dispatch:!0})}})]}),I=e=>{let{tr:t,dispatch:n}=e;if(!n)return;let r=(0,i.Kk)(f.KH)(t.selection);if(!r){console.error("Couldn't find parent card while splitting",t.selection);return}let{accent:o,body:a}=(0,y.wz)(t,r.pos);o&&a&&o.pos>a.pos&&(t.delete(o.pos,o.pos+o.node.nodeSize),t.insert(a.pos,o.node));let{selection:l}=t,{$from:s}=l,d=l.$from.parentOffset,u=l.from-d-1,p=l.$from.node().content.size-l.$from.parentOffset;t.setMeta(c.q,!0),t.setMeta("annotationEvent",{type:"split-card",splitPos:s.before()});let{node:g,depth:x}=r,{type:v,attrs:C}=g,k=s.depth-x+1,j=(0,b.cM)(t.doc.resolve(r.pos));t.split(s.pos,k,[{type:v,attrs:{...C,layout:"blank"}}]);let S=(0,h.G)(t,w.W4).pos,A=t.doc.nodeAt(S).childCount;if(0===d&&(t.delete(u,u+t.doc.nodeAt(u).nodeSize),S=t.steps[t.steps.length-1].getMap().map(S)),0===p&&A>1){let e=S+1,n=t.doc.nodeAt(e);n&&!("cardNotes"===n.type.name||"cardLayoutItem"===n.type.name)&&t.delete(e,e+n.nodeSize)}let I=(0,b.cM)(t.doc.resolve(S));I&&t.delete(I.pos,I.pos+I.node.nodeSize);let z=(0,m.E)(t.doc.resolve(S+1)),L=t.doc.nodeAt(r.pos),E=L&&r.pos+L.nodeSize-1;if(E&&j){let e=j.node;t.insert(E,e),t.setMeta("cardNotesHandled",!0)}z&&t.setSelection(z).scrollIntoView()}},79385:function(e,t,n){"use strict";n.d(t,{Ft:function(){return E},l:function(){return L}});var i=n(52322),r=n(29117),o=n(10625),a=n(67046),l=n(62614),s=n(332),d=n(99058),c=n(44035),u=n(39237),p=n(77533),h=n(82554),m=n(28535),g=n(42946),f=n(54933),x=n(49929),v=n(99818),y=n(5879),b=n(87254),w=n(7344),C=n(38045),k=n(2784),j=n(63367),S=n(64253);let A=(0,k.forwardRef)((e,t)=>{var n;let{children:r,size:o="md",disabled:a=!1,tooltip:s,...d}=e,c=(0,w.X)(),u=c.value===d.value,{getCheckboxProps:p,getInputProps:h}=(0,j.x)({...d,isChecked:u,onChange:c.onChange,name:null!==(n=c.name)&&void 0!==n?n:d.name}),{...m}=p(),g=h(),f=(0,i.jsxs)(l.z,{boxShadow:"none",bg:"transparent",as:"label",borderColor:"transparent",borderX:"none",size:o,disabled:a,style:{marginLeft:0,marginInlineStart:0},_hover:{bg:a?"transparent":"trueblue.50",cursor:a?"default":"pointer"},_first:{borderTopLeftRadius:"md",borderBottomLeftRadius:"md"},_last:{borderTopRightRadius:"md",borderBottomRightRadius:"md"},_checked:{bg:"transparent",color:"trueblue.500"},radioGroup:"orientation",...m,ref:t,children:[(0,i.jsx)("input",{...g,disabled:a,hidden:!0}),r]});return s?(0,i.jsx)(S.kH,{...s,children:f}):f}),I=e=>{let{options:t,onChange:n,size:o,disabled:a=!1,value:l,...s}=e,d=(0,k.useRef)({}),[c,u]=(0,k.useState)({left:0,top:0,width:0,height:0});return(0,k.useEffect)(()=>{var e;let t=l?null===(e=d.current[l])||void 0===e?void 0:e.current:void 0;if(!t){u(e=>({left:e.left+e.width/2,top:e.top+e.height/2,width:0,height:0}));return}u({left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight})},[l,o]),(0,i.jsxs)(w.E,{bg:"gray.200",pos:"relative",p:.5,borderRadius:"md",onChange:function(e){n(e)},value:l,boxSizing:"border-box",...s,children:[(0,i.jsx)(m.xu,{as:C.E.div,pos:"absolute",zIndex:50,bg:a?"gray.100":"gradient.light",height:"100%",borderRadius:"md",m:.5,animate:{left:"".concat(c.left,"px"),top:"".concat(c.top,"px"),width:"".concat(c.width,"px"),height:"".concat(c.height,"px")}}),(0,i.jsx)(r.U,{zIndex:90,pos:"relative",children:t.map(e=>{var t;return(0,i.jsx)(A,{value:e.value,ref:(t=e.value,d.current[t]||(d.current[t]={current:null}),d.current[t]),size:o,disabled:a,tooltip:e.tooltip,children:e.component},e.value)})})]})},z={fluid:{label:()=>b.ag._({id:"f5YDMB"}),icon:g.rZe,description:()=>b.ag._({id:"3JV7Yt"}),aspectRatio:null,defaultVerticalAlign:"center"},"16x9":{label:()=>b.ag._({id:"ekoaFo"}),description:()=>b.ag._({id:"nmOzVW"}),aspectRatio:v.tX["16x9"],defaultVerticalAlign:"center",orientation:v.L9.landscape,counterOrientation:"16x9_portrait"},"16x9_portrait":{label:()=>b.ag._({id:"iMNTNx"}),description:()=>b.ag._({id:"LX+k3Q"}),aspectRatio:v.tX["16x9_portrait"],defaultVerticalAlign:"start",orientation:v.L9.portrait,counterOrientation:"16x9",hide:!0},"4:3":{label:()=>b.ag._({id:"ww+nHW"}),description:()=>b.ag._({id:"nmOzVW"}),aspectRatio:v.tX["4:3"],defaultVerticalAlign:"center",orientation:v.L9.landscape,counterOrientation:"3:4"},"3:4":{label:()=>b.ag._({id:"oVkG9N"}),description:()=>b.ag._({id:"nmOzVW"}),aspectRatio:v.tX["3:4"],defaultVerticalAlign:"start",orientation:v.L9.portrait,counterOrientation:"4:3",hide:!0},a4:{label:()=>b.ag._({id:"i+5kKa"}),description:()=>b.ag._({id:"UTXvCx"}),aspectRatio:v.tX.a4,defaultVerticalAlign:"center",orientation:v.L9.landscape,counterOrientation:"a4_portrait"},a4_portrait:{label:()=>b.ag._({id:"pzj1N+"}),description:()=>b.ag._({id:"UTXvCx"}),aspectRatio:v.tX.a4_portrait,defaultVerticalAlign:"start",orientation:v.L9.portrait,counterOrientation:"a4",hide:!0},letter:{label:()=>b.ag._({id:"S4Fsut"}),description:()=>b.ag._({id:"UTXvCx"}),aspectRatio:v.tX.letter,defaultVerticalAlign:"center",orientation:v.L9.landscape,counterOrientation:"letter_portrait"},letter_portrait:{label:()=>b.ag._({id:"fVkwbQ"}),description:()=>b.ag._({id:"UTXvCx"}),aspectRatio:v.tX.letter_portrait,defaultVerticalAlign:"start",orientation:v.L9.portrait,counterOrientation:"letter",hide:!0},square:{label:()=>b.ag._({id:"1DA6ap"}),icon:g.pL1,description:()=>b.ag._({id:"5SkGv0"}),aspectRatio:v.tX.square,defaultVerticalAlign:"center"},"4:5":{label:()=>b.ag._({id:"wfHH4f"}),description:()=>b.ag._({id:"5SkGv0"}),aspectRatio:v.tX["4:5"],defaultVerticalAlign:"center",orientation:v.L9.landscape,counterOrientation:"5:4"},"5:4":{label:()=>b.ag._({id:"AABTux"}),description:()=>b.ag._({id:"5SkGv0"}),aspectRatio:v.tX["5:4"],defaultVerticalAlign:"center",orientation:v.L9.portrait,counterOrientation:"4:5",hide:!0}},L=e=>e&&z[e]||z.fluid,E=e=>{let{cardDimensions:t,updateCardDimensions:n}=e,w=L(t);return(0,i.jsxs)(r.U,{children:[(0,i.jsxs)(o.v,{isLazy:!0,children:[(0,i.jsx)(a.j,{minW:36,textAlign:"left",as:l.z,size:"sm",variant:"plain",leftIcon:w.icon?(0,i.jsx)(x.G,{icon:w.icon,fixedWidth:!0}):void 0,rightIcon:(0,i.jsx)(x.G,{icon:f.ptq}),children:w.label()}),(0,i.jsx)(s.h,{children:(0,i.jsx)(d.q,{maxW:"400px",zIndex:"modalPopover",children:(0,i.jsx)(c._,{value:t||"fluid",type:"radio",onChange:e=>{let t=L(e);w.orientation&&t.orientation&&w.orientation!==t.orientation?n(t.counterOrientation):n(e)},children:Object.entries(z).map(e=>{let[t,{label:n,description:r,hide:o}]=e;return o?null:(0,i.jsxs)(u.i,{value:t,children:[(0,i.jsxs)(p.x,{children:[n(),"fluid"===t&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(h.C,{colorScheme:"gray",ml:1,children:(0,i.jsx)(y.cC,{id:"ovBPCi"})})]})]}),(0,i.jsx)(p.x,{fontSize:"xs",color:"gray.500",children:r()})]},t)})})})})]}),w.orientation&&(0,i.jsx)(m.xu,{pos:"relative",zIndex:"1",children:(0,i.jsx)(I,{size:"sm",name:"orientation",disabled:!w.orientation,value:w.orientation,onChange:()=>{w.counterOrientation&&n(w.counterOrientation)},options:[{value:v.L9.landscape,component:(0,i.jsx)(x.G,{icon:g.r9b}),tooltip:{label:b.ag._({id:"XxIeKn"}),placement:"top"}},{value:v.L9.portrait,component:(0,i.jsx)(x.G,{icon:g.j8N}),tooltip:{label:b.ag._({id:"3bV9gD"}),placement:"top"}}]})})]})}},4279:function(e,t,n){"use strict";n.d(t,{o4:function(){return x},Z8:function(){return f}});var i=n(12483),r=n(37243),o=n(27191),a=n(26151),l=n(31601),s=n(72205),d=n(18149),c=n.n(d),u=n(78112),p=n(12971),h=n(31335);let m=e=>{let t=[],n={tree:{},parents:{},treeArray:[]};return e.doc.descendants((i,r)=>{if(!(0,h.KH)(i))return;let o=e.doc.resolve(r),a=i.attrs.id;t.push(a);let l=(0,p.nv)(o,h.KH).reverse().map(e=>{let{node:t}=e;return t.attrs.id}),s=[...l,a];s.reduce((e,t)=>(e[t]=e[t]||{},e[t]),n.tree),n.parents[a]=l,s.reduce((e,t)=>{let n=e.find(e=>e.id===t);return n?n.children:(e.push({id:a,children:[]}),e)},n.treeArray)}),{cardIds:t,cardIdMap:n}};class g{compute(e){let t=m(e);c()(this.value,t)||(this.hasChanges=!0);let n=t.cardIds.filter(Boolean),i=n.filter((e,t)=>n.includes(e,t+1));return this.duplicateCardIds=i.filter(e=>!this.duplicateCardIds.includes(e)),this.value=t,this}apply(e,t){return e.docChanged&&this.compute(t),this}processChanges(e){this.hasChanges&&this.value&&e((0,u.iX)(this.value)),this.hasChanges=!1}constructor(){this.hasChanges=!1,this.duplicateCardIds=[],this.value=null}}let f=new o.H$("cardIds"),x=r.hj.create({name:"cardIds",priority:s.a.CardIds,addOptions:()=>({enabled:!0}),addProseMirrorPlugins(){return this.options.enabled?[new o.Sy({key:f,state:{init:()=>new g,apply:(e,t,n,i)=>t.apply(e,i)},appendTransaction(e,t,n){var r;let o=f.getState(n);if(!(null==o?void 0:null===(r=o.value)||void 0===r?void 0:r.cardIds))return null;if(e.some(e=>e.docChanged)&&o.duplicateCardIds.length){let t={duplicateIds:JSON.stringify(o.duplicateCardIds),transactions:JSON.stringify(v(e))};null===l.co||void 0===l.co||l.co.track(l.xW.DUPLICATE_CARD_IDS,{...t}),i.Tb("[generateCardIdMap] Duplicate cardIds detected. This is unexpected and will cause spotlight issues. Additional metadata:",{extra:t})}return null}})]:[]}}),v=e=>e.map(e=>{let t=e.steps.map(e=>{if(e instanceof a.Pu||e instanceof a.FC){var t,n,i;let r=(null===(n=e.slice.toJSON())||void 0===n?void 0:null===(t=n.content)||void 0===t?void 0:t[0])||{},o={type:r.type,attrs:r.attrs,contentLength:null===(i=r.content)||void 0===i?void 0:i.length};return{name:e.constructor.name,from:e.from,to:e.to,sliceContentSimple:o}}return e instanceof a.Cj?{name:e.constructor.name,pos:e.pos,attr:e.attr}:{name:e.constructor.name}}),n=Object.fromEntries(Object.entries(e.meta).map(e=>{let[t,n]=e;if("annotationEvent"===t){var i,r,o,a,l;return[t,{type:n.type,droppedBlockPos:n.droppedBlockPos,dragging:{inBlockLength:null===(r=n.dragging)||void 0===r?void 0:null===(i=r.inBlock)||void 0===i?void 0:i.length,inCardLength:null===(a=n.dragging)||void 0===a?void 0:null===(o=a.inCard)||void 0===o?void 0:o.length,origNodePos:null===(l=n.dragging)||void 0===l?void 0:l.origNodePos}}]}return"uiEvent"===t?[t,n]:[t,"object"==typeof n?"object":n]}));return{stepsData:t,docChanged:e.docChanged,selection:{from:e.selection.from,to:e.selection.to},selectionSet:e.selectionSet,metaData:n}})},37173:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},40139:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(22156);let r=(e,t)=>{var n,r;let{background:o,fitType:a}=e,{allowFit:l}=(0,i.$U)(t);return l?a||((null==o?void 0:null===(r=o.image)||void 0===r?void 0:null===(n=r.meta)||void 0===n?void 0:n.has_transparency)?"fit":"fill"):"fill"}},6363:function(e,t,n){"use strict";n.d(t,{V6:function(){return b},en:function(){return w},y3:function(){return y}});var i=n(37243),r=n(27191),o=n(26151),a=n(52780),l=n(76599),s=n(71383),d=n(42634),c=n(91492),u=n(12971),p=n(65780),h=n(10806),m=n(92123),g=n(54317),f=n(12135),x=n(62493),v=n(22156);let y=new r.H$("cardLayoutPlugin"),b=e=>new r.Sy({key:y,state:{init:()=>({draggingData:null}),apply:(e,t)=>t},filterTransaction:(e,t)=>{if(!e.docChanged||!((0,i.EG)(t.selection)&&(0,g.pv)(t.selection.node))||e.steps.every(e=>e instanceof o.Cj)||e.getMeta("imageUploadUpdateAttrs")||e.steps.every(t=>{if(!(t instanceof o.Pu))return!1;let n=e.before.nodeAt(t.from);if(!n||!(0,v.pt)(n))return!1;let i=t.slice.content;return 1===i.childCount&&(0,v.pt)(i.firstChild)}))return!0;let n=(0,d.Z)(e).every(t=>{let n=e.before.nodeAt(t.oldStart);return!n||!(0,g.pv)(n)});return n||console.warn("[CardLayoutPlugin] blocking transaction with CardLayoutItem selected"),n},appendTransaction:(t,n,r)=>{if(!(t.some(e=>e.docChanged)&&!n.doc.eq(r.doc))||!(0,h.u)(e.state.doc).cardLayoutsEnabled)return;let o=r.tr,a=(0,i.XP)(n.doc,t);if((0,d.Z)(a).forEach(t=>{let n={from:t.newStart,to:t.newEnd};(0,i.b5)(r.doc,n,e=>"card"===e.type.name).forEach(t=>{let{pos:i}=t;if(i<n.from)return;let r=o.mapping.map(i),a=o.doc.nodeAt(r);if(!a)return;let l=(0,v.$U)(a.attrs.layout);(0,v.Ux)(o,r,e.schema,l)})}),o.docChanged)return o},props:{handleDOMEvents:{dragstart:(t,n)=>(0,x.s4)(e,t,n),drop(t,n){let i=t.state.tr,r=(0,x.pY)(t,n);if(r&&r.isImageUpload){n.preventDefault();let o=r.pos;(0,f.G)(e,i,o,r.layout);let{accent:a}=(0,v.wz)(i,o);if(!a)throw Error("Could not find accent after setting card layout=".concat(r.layout," at pos=").concat(r.pos));return(0,m.j)(e,i,r.file,a.pos),t.dispatch(i),!0}let o=(0,x.VR)(t,n);if(o&&o.isImageUpload)return n.preventDefault(),(0,m.j)(e,i,o.file,o.pos),t.dispatch(i),!0;let a=(0,x.Y3)(e,t,n),l=y.getState(t.state);return a&&l&&(l.draggingData={removeLayoutFromCardId:a.node.attrs.id}),!1}},handlePaste:(t,n,i)=>{let{selection:o}=t.state;if(!(o instanceof r.qv&&(0,v.pt)(o.node)))return!1;let a=(0,p.O)(i);return!!a&&"image"===a.type.name&&e.commands.updateNestedAttributesAtPos(o.from,{background:{image:a.attrs,type:c.E.IMAGE,source:a.attrs.source}})},handleDrop(t,n,i){let r=t.state.tr,o=(0,x.s7)(e,r,t,n,i),a=(0,x.go)(t,r,n,i);return(!!o||!!a)&&((0,x.jZ)(e,r),t.dispatch(r),!0)},decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,i)=>{if("card"===e.type.name){let r=t.resolve(i),o=(0,u.nv)(r,g.KH).map(e=>e.node),d=(0,l.ws)((0,s.bh)().getState()),c=(0,v.Hh)({parentCards:o,layout:e.attrs.layout,isMobileDevice:d});e.forEach((t,i)=>{let o=r.pos+i+1;if(!(0,g.pv)(t))return;let l={cardId:e.attrs.id,isCardLayoutDecoration:!0,layout:c,cardSize:e.attrs.cardSize};n.push(a.p.node(o,o+t.nodeSize,{"data-layout-item-id":t.attrs.itemId},l))})}}),a.EH.create(t,n)}}}),w=e=>{let t=e.find(e=>e.spec.isCardLayoutDecoration);return null==t?void 0:t.spec}},12135:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(91492),r=n(22156);let o=(e,t,n,o,a)=>{let l=t.doc.nodeAt(n);if((null==l?void 0:l.type.name)!=="card")return!1;let s=l.attrs,d=(0,r.$U)(o);if((0,r.Ux)(t,n,e.schema,d),o===s.layout)return!0;t.setNodeAttribute(n,"layout",o);let{accent:c}=(0,r.wz)(t,n);if(a&&c&&c.node.attrs.background.type===i.E.NONE){let e=a();e&&t.setNodeAttribute(c.pos,"background",e)}let{layoutTemplateColumns:u}=l.attrs,p=s.layout;return u&&("left"===p&&"right"===o||"right"===p&&"left"===o)&&t.setNodeAttribute(n,"layoutTemplateColumns",u.split(" ").reverse().join(" ")),!0}},62493:function(e,t,n){"use strict";n.d(t,{VR:function(){return f},Y3:function(){return v},go:function(){return x},jZ:function(){return y},pY:function(){return b},s4:function(){return j},s7:function(){return k}});var i=n(37243),r=n(27191),o=n(60111),a=n(91492),l=n(12971),s=n(31335),d=n(97912),c=n(65780),u=n(44415),p=n(54317),h=n(12135),m=n(6363),g=n(22156);let f=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||i.inside<0)return null;let{doc:r}=e.state,{inside:o}=i,p=r.resolve(o),h=(0,l.Ru)(p,g.pt),m=(0,l.Ru)(p,s.KH)[0],f=n&&(0,c.O)(n),x=(0,l.Fu)(o,e);if(0===h.length||!x||!m)return null;if(!f){let e=(0,u.RC)(t).filter(e=>(0,d.fU)(e.type));return 1!==e.length?null:{pos:o,rect:x,isImageUpload:!0,file:e[0]}}return f&&"image"===f.type.name?{pos:o,rect:x,isImageUpload:!1,background:{type:a.E.IMAGE,source:f.attrs.source,image:f.attrs}}:null},x=(e,t,n,i)=>{let r;try{if(!(r=f(e,n,i)))return!1}catch(e){return console.error("(caught) [CardLayoutPlugin] handleDrop checkGalleryDropTarget error:",e),!1}return!!r&&!r.isImageUpload&&(t.setNodeAttribute(r.pos,"background",r.background),t.deleteSelection(),!0)},v=(e,t,n)=>{var i,r;let o=t.posAtCoords({left:n.clientX,top:n.clientY});if(!o||o.inside<0)return null;let{doc:a}=t.state,{inside:d}=o,c=a.resolve(d),u=(0,l.Ru)(c,s.KH)[0];if(!u)return null;let h=null===(r=t.dragging)||void 0===r?void 0:null===(i=r.accentImage)||void 0===i?void 0:i.cardId;if(!h)return null;let m=h===u.node.attrs.id;return c.nodeAfter&&(0,g.pt)(c.nodeAfter)&&m?null:(0,p.Bw)(e,h)},y=(e,t)=>{var n;let r=m.y3.getState(e.state);if(null==r?void 0:null===(n=r.draggingData)||void 0===n?void 0:n.removeLayoutFromCardId){let n=r.draggingData.removeLayoutFromCardId;r.draggingData=null;let o=(0,i.N2)(t.doc,e=>(0,s.KH)(e)&&e.attrs.id===n)[0];return!!o&&(0,h.G)(e,t,o.pos,"blank")}return!1},b=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i||i.inside<0)return null;let{doc:r}=e.state,{inside:o}=i,p=r.resolve(o),h=r.nodeAt(o);if(!h)return null;let[m,...g]=(0,l.Ru)(p,s.KH),f=n&&(0,c.O)(n),x=(0,l.Fu)(o,e),v="cardLayoutItem"===h.type.name;if(!m||!x||!v||g.length>0)return null;let y=m.node.attrs,b="blank"===y.layout?C(t,x):"behind"===y.layout?w(t,x):null;if(!b)return null;if(!f){let e=(0,u.RC)(t).filter(e=>(0,d.fU)(e.type));return 1!==e.length?null:{pos:m.pos,isImageUpload:!0,file:e[0],...b}}return f&&"image"===f.type.name?{pos:m.pos,...b,isImageUpload:!1,background:{type:a.E.IMAGE,source:f.attrs.source,image:f.attrs}}:null},w=(e,t)=>e.clientY<t.top+80||e.clientX<t.left+80||e.clientX>t.right-80?{layout:"behind",rect:t}:null,C=(e,t)=>{let n,i=t,r=Math.min(t.height/3,100);if(e.clientX<t.left+t.width/4)n="left",i={...t.toJSON(),left:t.left,right:t.left+t.width/3,top:t.top,bottom:t.bottom};else if(e.clientX>t.right-t.width/4)n="right",i={...t.toJSON(),right:t.right,left:t.right-t.width/3,top:t.top,bottom:t.bottom};else{if(!(e.clientY<t.top+r))return null;n="top",i={...t.toJSON(),left:t.left,right:t.right,top:t.top,bottom:t.top+Math.min(t.height/3,200)}}return{rect:i,layout:n}},k=(e,t,n,o,a)=>{var l;let d;try{if(!(d=b(n,o,a)))return!1}catch(e){return console.error("(caught) [handleImageDropCreateAccent] handleDrop checkCreateCardAccentDropTarget error:",e),!1}if(!d||d.isImageUpload||!d.layout)return!1;let c=d.background;t.deleteSelection();let u=t.doc.resolve(t.mapping.map(d.pos)),p=u.nodeAfter&&"card"===u.nodeAfter.type.name?u.pos:null===(l=(0,i.qv)(u,s.KH))||void 0===l?void 0:l.pos;if(!p)return!1;(0,h.G)(e,t,p,d.layout);let{accent:m}=(0,g.wz)(t,p);return!!m&&(t.setNodeAttribute(m.pos,"background",c),t.setSelection(r.qv.create(t.doc,m.pos)),!0)},j=(e,t,n)=>{if(!n.target)return;let i=t.posAtDOM(n.target,0);if(!i||i<0)return;let r=(0,p._O)(e,i),l=t.state.doc.nodeAt(i);if(!l||!(0,g.pt)(l))return;if(l.attrs.background.type===a.E.NONE)return n.preventDefault(),n.stopPropagation(),!0;let s=e.view.domAtPos(i).node;if(s&&n.dataTransfer){let e=s.querySelector("[data-content-reference]");if(e){let t=e.cloneNode(!0);t.style.width="18em",t.style.height="10em",t.style.borderRadius=".375em";let i=document.createElement("div");i.style.position="absolute",i.style.top="-9999px",i.style.left="-9999px",document.body.appendChild(i),i.appendChild(t),n.dataTransfer.clearData(),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/html",t.innerHTML),n.dataTransfer.setData("text/plain",t.textContent||""),n.dataTransfer.setDragImage(t,0,0),setTimeout(()=>{document.body.removeChild(i)},0)}}return(0,o.U)(e,{type:"image",attrs:{...l.attrs.background.image,source:l.attrs.background.source}}),t.dragging.accentImage={cardId:null==r?void 0:r.node.attrs.id},!0}},29803:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var i=n(52322),r=n(28535),o=n(42946),a=n(54933),l=n(49929);let s=(0,n(2784).memo)(e=>{let{isLocked:t,isDark:n=!1}=e;return(0,i.jsxs)(r.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,i.jsx)(l.G,{icon:o.nNP}),t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.G,{icon:a.diR,color:n?"var(--chakra-colors-gray-900)":"var(--chakra-colors-gray-50)",transform:"shrink-3 right-6 down-6"}),(0,i.jsx)(l.G,{icon:a.byT,transform:"shrink-8 right-6 down-6"})]})]})});s.displayName="CardLinkIcon"},8839:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var i=n(95405),r=n(71383),o=n(78112);let a=()=>{var e,t;let n=(0,r.CG)(o.yx);if(!n)return!1;let a=i.v.SHARE_TOKEN,l=null===(e=n.accessLinks)||void 0===e?void 0:e.some(e=>""===e.token),s=null===(t=n.accessLinks)||void 0===t?void 0:t.some(e=>null===e.permission);return!!a||!!l&&!s}},43988:function(e,t,n){"use strict";n.d(t,{$v:function(){return m},Fi:function(){return d},Qp:function(){return u},Yl:function(){return g},cM:function(){return p},uj:function(){return s},vS:function(){return h}});var i=n(27191),r=n(30240),o=n(12135),a=n(23186),l=n(54317);let s=()=>r.VH.get("cardNotes"),d=(e,t)=>{var n;let i=e.state.doc.nodeAt(t);if(!i||(null===(n=i.lastChild)||void 0===n?void 0:n.type.name)==="cardNotes")return;let r=t+i.nodeSize-1,a={type:"cardNotes",content:[{type:"paragraph"}]};if(i.firstChild&&(0,l.pv)(i.firstChild))e.chain().insertContentAt({from:r,to:r},{type:"cardNotes",content:[{type:"paragraph"}]},{updateSelection:!1}).noUndo().run();else{e.chain().command(n=>{let{tr:i}=n;(0,o.G)(e,i,t,"blank");let l=i.mapping.map(r);return i.insert(l,e.schema.nodeFromJSON(a)),!0}).noUndo().run();return}},c=e=>"cardNotes"===e.type.name,u=e=>null!==e.lastChild&&c(e.lastChild),p=e=>{let t=null;return e.nodeAfter.descendants((n,i)=>!c(n)||(t={node:n,pos:i+e.pos+1},!1)),t},h=(e,t,n)=>{let r=(0,a.AQ)(e.state.doc,t);if(!r||!r.pos||n&&r.node.attrs.id!==n)return!1;let o=e.state.doc.resolve(r.pos).pos,l=o+r.node.nodeSize,{selection:s}=e.state,d=s instanceof i.Bs?s.to<l:s.to<=l;return s.from>=o&&d},m=e=>"cardNotes"==e.schema.topNodeType.name,g=e=>{if(0===e.childCount)return!0;let t=!1;return e.content.nodesBetween(0,e.content.size,e=>!e.isAtom||!!e.isText||(t=!0,!1)),0===e.textContent.trim().length&&!t}},73360:function(e,t,n){"use strict";n.d(t,{$D:function(){return y},xL:function(){return v}});var i=n(27191),r=n(52780),o=n(76599),a=n(71383),l=n(23491),s=n(74216),d=n(12971),c=n(38636),u=n(22156),p=n(23186),h=n(43988);n(65050);var m=n(54317);class g{constructor(e=null){this.dragging=e}}let f=new i.H$("cardPlugin"),x=["card","calloutBox","image","cardLayoutItem","cardAccentLayoutItem","cardNotes","chart"],v=e=>new i.Sy({key:f,state:{init:()=>new g,apply:(e,t)=>t},props:{decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,i,c,p)=>{if(x.includes(e.type.name)){var g,f,v,y,b;let x=t.resolve(i),w=(0,d.nv)(x,m.KH).map(e=>e.node),C=(0,m.sP)(w,"width"),k=(0,m.KH)(e)?w.length:w.length-1,j=k>0,S=!j&&p===c.childCount-1,A=!!(e.firstChild&&(0,m.pv)(e.firstChild)),I=(0,u.Ap)(e),z=(null==I?void 0:I.type)==="none",L=null==I?void 0:null===(g=I.mask)||void 0===g?void 0:g.effect,E=(0,s.dF)((0,m.KH)(e)?null===(f=e.attrs.container)||void 0===f?void 0:f.background:null===(y=w[0])||void 0===y?void 0:null===(v=y.attrs.container)||void 0===v?void 0:v.background),N=E?(0,l.DP)(E):void 0,M=(0,o.ws)((0,a.bh)().getState()),_=(0,u.Hh)({layout:e.attrs.layout,parentCards:w,isMobileDevice:M}),T=null!==e.lastChild&&(0,h.Qp)(e),R=T&&!(0,h.Yl)(e.lastChild),H={isCardDecoration:!0,nestedDepth:k,isNested:j,isFirstCard:!j&&0===p,isLastCard:S,hasLayoutItem:A,hasNoAccentBackground:z,cardAccentBackgroundMaskEffect:L,isCardDark:N,cardColorOverride:E,displayLayout:_,insideSideLayout:(0,u.eZ)(w),parentCardId:null===(b=w[0])||void 0===b?void 0:b.attrs.id,inheritContainerWidth:C,hasCardNotesNode:T,hasNonEmptyCardNotes:R};n.push(r.p.node(i,i+e.nodeSize,{},H))}}),n.length>0?r.EH.create(t,n):r.EH.empty},handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=f.getState(e.state);if(!i)return!1;i.dragging=n}},handleDrop:(t,n,i)=>{var r;let o=f.getState(t.state),a=null==o?void 0:o.dragging;o&&(o.dragging=null);let l=(0,p.jz)(t,n,i);if(!l)return!1;let s=i.content.toJSON();if(!s)return!1;let d=(null===(r=s[0])||void 0===r?void 0:r.type)==="card";if(d&&a)return e.commands.rearrangeCards({from:a.origNodePos,to:l.pos,position:"above"});let{selection:u}=t.state,h=!u.empty;try{return e.chain().insertContentAt(l.pos,d?s:{type:"card",content:s},{updateSelection:!1}).command(n=>{let{tr:i}=n;if(h&&i.deleteSelection(),a){let n=(0,c.ei)({view:t,tr:i,cardWrapOffset:d?0:1,dragging:a,dropPos:l.pos});requestAnimationFrame(()=>{var t,i;null===(t=(i=e.commands).moveAnnotations)||void 0===t||t.call(i,n)})}return!0}).focusMapped(l.pos,1).run()}catch(e){return console.error("(caught) [Cardplugin] handleDrop error:",e),!0}}}}),y=e=>{let t=e.find(e=>e.spec.isCardDecoration);return t?t.spec:{isNested:!1,hasLayoutItem:!1,nestedDepth:0,isFirstCard:!1,isCardDecoration:!0,isLastCard:!1,displayLayout:"blank",insideSideLayout:!1,hasNoAccentBackground:!0,hasCardNotesNode:!1,hasNonEmptyCardNotes:!1}}},11457:function(e,t,n){"use strict";n.d(t,{p:function(){return d}});var i=n(52322),r=n(75768),o=n(62614),a=n(64253),l=n(87254);let s=[{key:"sm",name:()=>l.ag._({id:"58+81B"}),buttonText:()=>l.ag._({id:"ZQA8ce"}),description:()=>l.ag._({id:"LX+k3Q"})},{key:"md",name:()=>l.ag._({id:"ovBPCi"}),buttonText:()=>l.ag._({id:"Tmu3kA"}),description:()=>l.ag._({id:"Of2q2s"})},{key:"lg",name:()=>l.ag._({id:"I5S9ZE"}),buttonText:()=>l.ag._({id:"SMwD6s"}),description:()=>l.ag._({id:"nRirkB"})}],d=e=>{let{contentWidth:t,defaultContentWidth:n,setWidth:l}=e;return(0,i.jsx)(r.h,{isAttached:!0,size:"sm",display:"flex",children:s.map(e=>{let r=t||e.key!==n?e.key===t?"trueblue.100":void 0:"trueblue.50";return(0,i.jsx)(a.kH,{label:(0,i.jsx)(a.X,{label:e.name(),description:e.description()}),placement:"top",children:(0,i.jsx)(o.z,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:r,onClick:()=>{l(e.key)},children:e.buttonText()})},e.key)})})}},71098:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var i=n(52322),r=n(32899),o=n(43297),a=n(77533),l=n(64253);let s=e=>{let{isDark:t,templateIcon:n,tooltip:s,label:d,isSelected:c,onClick:u,...p}=e;return(0,i.jsx)(l.kH,{label:s,placement:"top",children:(0,i.jsx)(r.h,{onClick:u,icon:(0,i.jsxs)(o.K,{maxW:"100%",alignItems:"center",children:[n,d&&(0,i.jsx)(a.x,{maxW:"100%",w:"100%",fontSize:"xs",overflow:"hidden",textOverflow:"ellipsis",overflowX:"hidden",whiteSpace:"nowrap",textAlign:"left",children:d})]}),h:"auto",textShadow:"none",variant:"plain",p:2,flex:"1",w:"100%",cursor:"pointer",textAlign:"center",transition:"all 300ms ease",border:"1px solid",bg:t?c?"trueblue.900":"whiteAlpha.50":c?"trueblue.50":"blackAlpha.50",borderRadius:"md",boxShadow:"sm",borderColor:t?c?"trueblue.300":"whiteAlpha.100":c?"trueblue.500":"blackAlpha.100",color:t?c?"trueblue.200":"gray.400":c?"trueblue.500":"gray.500",_hover:{bg:t?c?"whiteAlpha.100":"whiteAlpha.200":c?"trueblue.100":"trueblue.50",borderColor:t?"trueblue.200":c?"trueblue.500":"trueblue.200"},position:"relative","aria-label":s,...p})})}},54133:function(e,t,n){"use strict";n.d(t,{M:function(){return l}});var i=n(87254);let r=()=>[{id:"basic",name:()=>i.ag._({id:"0wJVK+"}),templateIds:["blankCard","titleWith2ColumnImageLeft","titleWith2ColumnImageRight","titleWith2ColumnContent","titleWith2ColumnContentAndHeadings","titleWith3ColumnContent","titleWith3ColumnContentAndHeadings","titleWith4ColumnContent","titleWithBullets","titleWithBulletsAndImage"]},{id:"cardLayouts",name:()=>i.ag._({id:"125H9i"}),templateIds:["accentLeft","accentRight","accentTop","accentRightFit","accentLeftFit","accentBackground"]},{id:"images",name:()=>i.ag._({id:"an5hVd"}),templateIds:["titleWith2ImageColumns","titleWith3ImageColumns","titleWith4ImageColumns","titleWith3ImagesWithText","imageGallery","titleWithTeamPhotos"]},{id:"collections",name:()=>i.ag._({id:"MISW12"}),templateIds:["titleWithTextBoxes","titleWithTimeline","titleWithLargeBulletList","titleWithIconsWithText","titleWithSmallIconsAndText","titleWithArrows"]},{id:"data",name:()=>i.ag._({id:"+60MiA"}),templateIds:["titleWithColumnChart","titleWithBarChart","titleWithLineChart","titleWithPieChart","titleWithDonutChart","titleWithStats","barStatsWithText","titleWithCircleStats","titleWith3RowTable"]},{id:"embeds",name:()=>i.ag._({id:"aTofd0"}),templateIds:["titleWithYouTubeEmbed","titleWithWebpageEmbed"]},{id:"progressiveDisclosure",name:()=>i.ag._({id:"rd7L5e"}),templateIds:["titleWith3NestedCards","titleWith3Toggles"]},{id:"pyramid",name:()=>i.ag._({id:"96Rp0u"}),templateIds:["funnelWithText","steppedPyramidWithText","pyramidWithTitleAndTextOutside","leftSteppedPyramidWithTitleAndTextOutside"]},{id:"calls-to-action",name:()=>i.ag._({id:"gm+qKB"}),templateIds:["titleWithContentAndButton"]},{id:"misc",name:()=>i.ag._({id:"RDie0n"}),templateIds:["titleCard","titleWithGif","titleWithDiagram"]},{id:"cardPlaceholder",name:()=>i.ag._({id:"hx1ePY"}),templateIds:["titleWith2ColumnImageLeft","titleWith2ColumnContent","accentRight","titleWith3ImageColumns"]}],o=["basic","cardLayouts","images","collections","charts","pyramid","data","embeds","progressiveDisclosure","calls-to-action","misc"],a={default:o,insertWidget:o,modal:o,placeholder:["cardPlaceholder"]},l=e=>a[e].map(e=>r().find(t=>t.id===e)).filter(e=>!!e)},84082:function(e,t,n){"use strict";n.d(t,{A:function(){return l},V:function(){return s}});var i=n(82655),r=n(54133),o=n(91722);let a={blankCard:"/new"},l=()=>(0,o.en)().reduce((e,t)=>{let{id:n,name:r,jsonContent:o}=t;return e[n]={type:"cardTemplate",key:n,nodeName:"card",name:r,...a[n]&&{shortcut:a[n]},icon:i.emM,execute:e=>{e.commands.insertContentAndSelect(o)}},e},{}),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return(0,r.M)(e).map(e=>{let{name:t,templateIds:n}=e,i=n.map(e=>l()[e]);return{subcategory:t(),items:i}})}},77595:function(e,t,n){"use strict";n.d(t,{q1:function(){return X},n7:function(){return Z}});var i=n(52322),r=n(28535),o=n(2784);let a=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!t||!t.type)return(0,i.jsx)(o.Fragment,{},s);if("text"===t.type)return(0,i.jsx)(o.Fragment,{},"text-".concat(s));let d=e.nodes[t.type];if(!d)return(0,i.jsx)(o.Fragment,{});let c=null===(n=t.content)||void 0===n?void 0:n.map((n,i)=>a(e,n,t,l+1,i));return o.createElement(d.component,{key:"".concat(d.type,"-").concat(s),node:t,depth:l,parent:r,index:s},c)};var l=n(43297),s=n(29117);let d=e=>{let{children:t,orientation:n="vertical",...r}=e,o="vertical"===n?l.K:s.U;return(0,i.jsx)(o,{spacing:"var(--block-spacing)",...r,children:t})},c=e=>(0,i.jsx)(r.xu,{bg:"var(--main-color)",h:"var(--paragraph-height)",w:"100%",borderRadius:"var(--text-border-radius)",...e}),u=e=>{let{style:t="solid",children:n,...r}=e;return(0,i.jsx)(d,{w:"100%",bg:"solid"===t?"var(--main-color)":"transparent",minH:"2em",borderRadius:"var(--box-border-radius)",border:"outline"===t?"var(--border-width) solid var(--main-color)":"none",...r,children:n&&n})};var p=n(38035),h=n(42822),m=n(42946),g=n(49929);let f=e=>{let{iconSize:t="2x",icon:n,...r}=e;return(0,i.jsx)(h.M,{minH:"4em",bg:"var(--box-background-color)",color:"var(--accent-color)",borderRadius:"var(--box-border-radius)",...r,children:n||(0,i.jsx)(g.G,{icon:m.VmB,size:t})})},x={top:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"auto 1fr",gridTemplateAreas:'"accent" "body"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!1},behind:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"auto"},items:{accent:{type:"accent",style:{gridArea:"1 / 1"}},body:{type:"body",style:{gridArea:"1 / 1",zIndex:1}}},allowFit:!1},blank:{grid:{gridTemplateColumns:"1fr",gridTemplateRows:"1fr",gridTemplateAreas:'"body"'},items:{body:{type:"body"}},allowFit:!1},left:{grid:{gridTemplateColumns:"".concat(37.5,"% ").concat(62.5,"%"),gridTemplateRows:"auto ",gridTemplateAreas:'"accent body"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!0},right:{grid:{gridTemplateColumns:"".concat(62.5,"% ").concat(37.5,"%"),gridTemplateRows:"auto",gridTemplateAreas:'"body accent"'},items:{accent:{type:"accent"},body:{type:"body"}},allowFit:!0}},v=e=>x[null!=e?e:"blank"]||x.blank,y=e=>{var t;let{node:n}=e;return(null===(t=n.attrs)||void 0===t?void 0:t.itemId)==="accent"?(0,i.jsx)(w,{...e}):(0,i.jsx)(b,{...e})},b=e=>{let{node:t,children:n}=e;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(t.type),spacing:"1em",p:"1em",alignSelf:"center","data-testid":"card-layout-thumbnail",children:n})},w=e=>{var t;let{node:n,parent:r}=e,o=n.attrs,a=null==r?void 0:r.attrs,l=v(null!==(t=null==a?void 0:a.layout)&&void 0!==t?t:"blank");if(!((null==o?void 0:o.itemId)&&l.items[o.itemId]))return null;let s=l.allowFit&&(null==o?void 0:o.fitType)==="fit";return(0,i.jsx)(p.k,{className:"thumbnail-node-".concat(n.type),children:s?(0,i.jsx)(p.k,{flexDirection:"column",justifyContent:"center",alignItems:"center",bg:"var(--box-background-color)",flex:1,h:"100%",children:(0,i.jsx)(f,{w:"70%",minH:"55%",bg:"var(--main-color)"})}):(0,i.jsx)(f,{w:"100%",h:"auto",borderRadius:"none"})})};var C=n(73200);let k=e=>{var t,n,o,a,l;let{node:s,isCollapsed:d=!1,children:u}=e,h=s.attrs,m=v(null!==(o=null==h?void 0:h.layout)&&void 0!==o?o:"blank"),g=m.items;return(0,i.jsx)(p.k,{className:(0,C.cx)("thumbnail-node-".concat(s.type),d&&"collapsed"),"data-testid":"card-thumbnail",minH:d?"2.5em":"var(--card-template-min-height)",w:d?"100%":"var(--card-template-width)",h:"auto",border:"2px solid",borderColor:"var(--main-color)",borderRadius:"base",flexDirection:"column",overflow:"hidden",children:(0,i.jsxs)(p.k,{flexDirection:"column",fontSize:"".concat(.375,"em"),flex:1,justifyContent:"center",children:[!d&&(0,i.jsx)(r.xu,{display:"grid",flex:1,sx:{...m.grid,...g.body?{"> .thumbnail-node-cardLayoutItem":null!==(a=null===(t=g.body)||void 0===t?void 0:t.style)&&void 0!==a?a:{gridArea:"body"}}:{},...g.accent?{"> .thumbnail-node-cardAccentLayoutItem":null!==(l=null===(n=g.accent)||void 0===n?void 0:n.style)&&void 0!==l?l:{gridArea:"accent"}}:{}},children:u}),d&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(c,{w:"50%",mx:"1em",h:"2em",borderRadius:"calc(var(--text-border-radius) * 2)"})})]})})},j={bar:m.Wpq,pie:m.OS1,line:m.Stf,donut:m.epv,"horizontal-bar":m.AGo};var S=n(69251),A=n(35275),I=n(89712),z=n(20437),L=n(9325);let E=e=>({"--flex-align":(0,L.yg)(e)}),N=e=>({["& .thumbnail-node-paragraph > div:nth-of-type(1n+".concat(e+1,")")]:{display:"none"}});var M=n(89886);let _=e=>{let{children:t,...n}=e;return(0,i.jsx)(r.xu,{boxSize:"var(--bullet-size)",borderRadius:"0.25em",bg:"var(--main-color)",...n,children:t})},T="0.5em";var R=n(54933),H=n(9244);let P={xs:"sm",sm:"sm",md:"lg",lg:"xl",xl:"2x",full:"2x"},O=e=>{var t,n,r,o,a,l,s,c,u;let{node:h,parent:m,children:x}=e,v=E(null!==(c=null==m?void 0:null===(n=m.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)&&void 0!==c?c:"center"),y=null!==(u=null==m?void 0:null===(o=m.attrs)||void 0===o?void 0:null===(r=o.options)||void 0===r?void 0:r.imageShape)&&void 0!==u?u:"square",b=H.K[y],w=(null==m?void 0:null===(a=m.attrs)||void 0===a?void 0:a.variantKey)==="iconsText",C=(null==m?void 0:null===(s=m.attrs)||void 0===s?void 0:null===(l=s.options)||void 0===l?void 0:l.shapeSize)||"lg",k=N(2);return(0,i.jsxs)(p.k,{className:"thumbnail-node-".concat(h.type),gap:"var(--block-spacing)",flexDirection:"column",children:[w?(0,i.jsx)(f,{minH:"0",icon:(0,i.jsx)(g.G,{icon:R.Tab,size:P[C]||"lg"}),bg:w?"none":void 0}):(0,i.jsx)(f,{minH:"2em",minW:"2em",sx:b}),(0,i.jsx)(d,{css:v,sx:w?void 0:k,children:x})]})},D=e=>{var t;let{node:n,children:r}=e,o=(null===(t=n.attrs)||void 0===t?void 0:t.variantKey)==="iconsText";return(0,i.jsx)(z.M,{rowGap:"1.5em",columnGap:"1.5em",columns:o?4:3,children:r})};var W=n(77533);let F="0.25em",B=e=>{let{node:t}=e;return(0,i.jsx)(p.k,{className:"thumbnail-node-".concat(t.type),bg:"var(--main-color)",h:"1.25em"})},G=e=>{let{isFunnel:t=!1,children:n}=e;return(0,i.jsx)(z.M,{columns:1,autoRows:"1fr",gap:F,pos:"relative",mx:"auto",w:"min(100%, calc((var(--card-template-width) * 0.5) / ".concat(.375,"))"),clipPath:t?"polygon(50% 100%, 0 0, 100% 0)":"polygon(50% 0%, 0% 100%, 100% 100%)",children:n})},U=(e,t)=>Math.floor(33+67/(t-1)*e),V={bullets:{Cell:e=>{let{node:t,children:n}=e;return(0,i.jsxs)(p.k,{className:"thumbnail-node-".concat(t.type),pos:"relative",align:"flex-start",gap:"1em",flex:"1 1 auto",w:"calc(".concat(50,"% - ").concat("1em",")"),children:[(0,i.jsx)(_,{}),(0,i.jsx)(d,{flex:"1",children:n})]})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(p.k,{gap:"1em",wrap:"wrap",children:t})}},timeline:{Cell:e=>{var t,n;let{node:o,parent:a,children:l}=e,s=(null==a?void 0:null===(n=a.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="horizontal",c="".concat(2,"em");return(0,i.jsxs)(p.k,{className:"thumbnail-node-".concat(o.type),pos:"relative",...s?{gridColumn:"span 2",gridRow:3,align:"flex-start",justify:"center",pt:c}:{gridRow:"span 2",gridColumn:3,align:"flex-start",pl:c},orientation:"horizontal",align:"start",children:[(0,i.jsx)(_,{pos:"absolute",...s?{top:0,transform:"translateY(-50%)"}:{left:0,transform:"translateX(-50%)"},children:(0,i.jsx)(r.xu,{position:"absolute",zIndex:"-1",bg:"var(--main-color)",...s?{height:"".concat(1,"em"),width:"var(--border-width)",left:"50%",top:"100%",transform:"translateX(-50%)"}:{width:"".concat(1,"em"),height:"var(--border-width)",top:"50%",transform:"translateY(-50%)",left:"100%"}})}),(0,i.jsx)(d,{flex:"1",children:l})]})},Wrapper:e=>{var t,n;let{children:o,node:a}=e,l=(null===(n=a.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="horizontal",s=l?(0,i.jsx)(r.xu,{gridRow:2,gridColumn:1,children:(0,i.jsx)(r.xu,{position:"absolute",height:"var(--border-width)",width:"100%",left:"0",right:"0",bg:"var(--main-color)"})}):(0,i.jsx)(h.M,{gridColumn:2,gridRow:1,children:(0,i.jsx)(r.xu,{position:"absolute",width:"var(--border-width)",top:"0",bottom:"0",bg:"var(--main-color)"})});return(0,i.jsxs)(S.r,{...l?{templateRows:"auto 0px auto",autoColumns:"1fr",justifyContent:"center",columnGap:"1em",mt:"var(--bullet-size)"}:{templateColumns:"0px 0px 1fr",autoRows:"auto",justifyContent:"center",rowGap:"1em",ml:"var(--bullet-size)"},pos:"relative","data-testid":"timeline-thumbnail",children:[s,o]})}},imagesText:{Cell:O,Wrapper:D},textBoxes:{Cell:e=>{var t,n;let{node:r,parent:o,children:a}=e,l=E((null==o?void 0:null===(n=o.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center");return(0,i.jsx)(u,{className:"thumbnail-node-".concat(r.type),bg:"var(--box-background-color)",p:"var(--box-padding)",css:l,children:a})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(p.k,{gap:"var(--block-spacing)",children:t})}},stats:{Cell:e=>{var t,n,r;let{children:o,node:a,parent:l}=e,s=E((null==l?void 0:null===(n=l.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center");return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(a.type),align:"center",justify:"start",children:[(0,i.jsx)(W.x,{color:"var(--accent-color)",fontSize:"1.5em",children:(null===(r=a.attrs)||void 0===r?void 0:r.label)||"X%"}),(0,i.jsx)(d,{w:"100%",css:s,children:o})]})},Wrapper:e=>{let{children:t,parent:n}=e,r=(null==n?void 0:n.type)==="gridCell"?1:3;return(0,i.jsx)(z.M,{columns:r,columnGap:"1.5em",rowGap:"1.5em",children:t})}},barStats:{Cell:e=>{var t,n,o;let{node:a,parent:l,children:s}=e,c=(0,M.y7)({label:(null===(t=a.attrs)||void 0===t?void 0:t.label)||null}),u=E((null==l?void 0:null===(o=l.attrs)||void 0===o?void 0:null===(n=o.options)||void 0===n?void 0:n.horizontalAlign)||"center");return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(a.type),align:"center",justify:"start",children:[(0,i.jsxs)(d,{borderRadius:"calc(var(--box-border-radius) / 2)",overflow:"hidden",orientation:"horizontal",flex:1,w:"100%",bg:"var(--main-color)",children:[(0,i.jsx)(r.xu,{w:"100%",bg:"var(--accent-color)",pos:"relative",h:"1.25em",children:(0,i.jsx)(r.xu,{pos:"absolute",inset:0})}),(0,i.jsx)(r.xu,{w:"".concat(100*c,"%"),pos:"relative"})]}),(0,i.jsx)(d,{w:"100%",css:u,children:s})]})},Wrapper:e=>{let{children:t,parent:n}=e,r=(null==n?void 0:n.type)==="gridCell"?1:2;return(0,i.jsx)(z.M,{columns:r,columnGap:"1.5em",rowGap:"1em",children:t})}},staircase:{Cell:e=>{var t,n;let{node:r,parent:o,index:a}=e,l=U(a,null!==(n=null==o?void 0:null===(t=o.content)||void 0===t?void 0:t.length)&&void 0!==n?n:1);return(0,i.jsx)(p.k,{className:"thumbnail-node-".concat(r.type),borderRadius:"2px",bg:"var(--main-color)",h:"1.25em",w:"".concat(l,"%")})},Wrapper:e=>{var t,n,r;let{node:o,children:a}=e,l=null!==(r=null==o?void 0:null===(n=o.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)&&void 0!==r?r:"center",s=(0,L.yg)(l);return(0,i.jsx)(d,{align:s,gap:F,mx:"auto",w:"min(100%, calc((var(--card-template-width) * 0.5) / ".concat(.375,"))"),children:a})}},pyramid:{Cell:B,Wrapper:G},funnel:{Cell:e=>(0,i.jsx)(B,{...e}),Wrapper:e=>{let{children:t,...n}=e;return(0,i.jsx)(G,{isFunnel:!0,...n,children:t})}},circleStats:{Cell:e=>{var t,n,o,a;let{node:l,parent:s,children:c}=e,u=(0,L.yg)((null==s?void 0:null===(n=s.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"center"),h=(0,M.y7)({label:null!==(a=null===(o=l.attrs)||void 0===o?void 0:o.label)&&void 0!==a?a:"50"});return(0,i.jsxs)(p.k,{className:"thumbnail-node-".concat(l.type),gap:"var(--block-spacing)",flexDirection:"column",children:[(0,i.jsx)(r.xu,{display:"flex",justifyContent:"center",alignItems:"center",position:"relative",w:"80%",alignSelf:"center",aspectRatio:"1 / 1",_before:{content:'""',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",borderRadius:"50%",background:"conic-gradient(var(--accent-color) ".concat(100*h,"%, var(--main-color) 0 ").concat((100-h)*100,"%)"),zIndex:1},_after:{content:'""',position:"absolute",top:T,left:T,right:T,bottom:T,background:"var(--card-background)",borderRadius:"50%",zIndex:2},children:(0,i.jsx)(r.xu,{zIndex:"100",bg:"var(--main-color)",h:"0.5em",pos:"absolute",borderRadius:"var(--text-border-radius)",w:"40%"})}),(0,i.jsx)(d,{css:u,children:c})]})},Wrapper:e=>{let{children:t}=e;return(0,i.jsx)(z.M,{gap:"1.5em",columns:3,children:t})}},arrows:{Cell:e=>{var t,n,o,a;let{node:l,parent:s,children:c}=e,u=E((null==s?void 0:null===(n=s.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.horizontalAlign)||"left"),h=(null==s?void 0:null===(a=s.attrs)||void 0===a?void 0:null===(o=a.options)||void 0===o?void 0:o.orientation)==="vertical";return(0,i.jsxs)(p.k,{className:"thumbnail-node-".concat(l.type),gap:"var(--block-spacing)",flexDirection:h?"row":"column",children:[(0,i.jsx)(r.xu,{width:h?"1.5em":"100%",height:h?"100%":"1.25em",bg:"var(--accent-color)",clipPath:h?"polygon(50% 10%, 100% 0, 100% 90%, 50% 100%, 0 90%, 0% 0%)":"polygon(90% 0, 100% 50%, 90% 100%, 0% 100%, 10% 50%, 0% 0%)"}),(0,i.jsx)(d,{flex:1,css:u,p:"0.5em",px:h?0:"0.5em",pt:h?void 0:0,children:c})]})},Wrapper:e=>{var t,n;let{node:r,children:o}=e,a=(null===(n=r.attrs)||void 0===n?void 0:null===(t=n.options)||void 0===t?void 0:t.orientation)==="vertical";return(0,i.jsx)(z.M,{columns:a?1:3,rowGap:a?void 0:"1.5em",children:o})}},iconsText:{Cell:O,Wrapper:D}},q=e=>{let{children:t}=e;return(0,i.jsx)(u,{p:"var(--box-padding)",bg:"var(--box-background-color)",w:"100%",children:t})},K=e=>{let{children:t}=e;return(0,i.jsx)(u,{p:"var(--box-padding)",bg:"var(--box-background-color)",w:"100%",children:t})},Y={nodes:{card:{type:"card",component:e=>{let{depth:t,...n}=e;return t>2?(0,i.jsx)(i.Fragment,{}):t>1?(0,i.jsx)(k,{...n,isCollapsed:!0}):(0,i.jsx)(k,{...n})}},cardLayoutItem:{type:"cardLayoutItem",component:y},cardAccentLayoutItem:{type:"cardAccentLayoutItem",component:y},title:{type:"title",component:e=>{let{node:t}=e;return(0,i.jsx)(r.xu,{className:"thumbnail-node-".concat(t.type),w:"50%",bg:"var(--main-color)",h:"".concat((0,A.hx)("title").size/2,"em"),borderRadius:"var(--text-border-radius)"})}},paragraph:{type:"paragraph",component:e=>{let{node:t}=e;return(0,i.jsxs)(l.K,{className:"thumbnail-node-".concat(t.type),"data-testid":"paragraph-thumbnail",spacing:"var(--line-spacing)",align:"var(--flex-align)",children:[(0,i.jsx)(c,{}),(0,i.jsx)(c,{}),(0,i.jsx)(c,{w:"85%"})]})}},heading:{type:"heading",component:e=>{var t;let{node:n}=e;return(0,i.jsx)(r.xu,{className:"thumbnail-node-".concat(n.type),"data-testid":"heading-thumbnail",bg:"var(--main-color)",h:"".concat((0,A.hx)((0,A.K1)(null===(t=n.attrs)||void 0===t?void 0:t.level)).size/2,"em"),borderRadius:"var(--text-border-radius)"})}},bullet:{type:"bullet",component:e=>{let{node:t}=e;return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",align:"start",pl:"0.5em",color:"var(--main-color)",children:[(0,i.jsx)(r.Cd,{size:"var(--block-spacing)",bg:"var(--main-color)"}),(0,i.jsx)(d,{orientation:"horizontal",flex:"1",children:(0,i.jsx)(c,{w:"75%"})})]})}},gridLayout:{type:"gridLayout",component:e=>{var t,n;let{node:r,children:o}=e;return(0,i.jsx)(S.r,{className:"thumbnail-node-".concat(r.type),templateColumns:"repeat(".concat((null===(n=r.attrs)||void 0===n?void 0:null===(t=n.colWidths)||void 0===t?void 0:t.length)||2,", 1fr)"),gap:"var(--block-spacing)",children:o})}},gridCell:{type:"gridCell",component:e=>{var t;let{node:n,children:r}=e,o=null===(t=n.attrs)||void 0===t?void 0:t.verticalAlign;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(n.type),justifyContent:o,flex:1,children:r})}},image:{type:"image",component:e=>{let{node:t}=e;return(0,i.jsx)(f,{className:"thumbnail-node-".concat(t.type)})}},mediaPlaceholder:{type:"mediaPlaceholder",component:e=>{var t;let{node:n}=e,r=n.attrs,o=null==r?void 0:r.source,a=o&&(null===(t=I.zX[o])||void 0===t?void 0:t.icon)||null;return(0,i.jsx)(f,{className:"thumbnail-node-".concat(n.type),icon:a?(0,i.jsx)(g.G,{icon:a,size:"2x"}):void 0})}},buttonGroup:{type:"buttonGroup",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",children:n})}},button:{type:"button",component:e=>{var t;let{node:n}=e,r=(null===(t=n.attrs)||void 0===t?void 0:t.variant)||"solid";return(0,i.jsx)(u,{className:"thumbnail-node-".concat(n.type),minH:"1.5em",w:"25%",style:r})}},gallery:{type:"gallery",component:e=>{let{node:t}=e;return(0,i.jsxs)(u,{className:"thumbnail-node-".concat(t.type),display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",bg:"var(--box-background-color)",p:"0.5em",children:[(0,i.jsx)(f,{flex:2,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"}),(0,i.jsx)(f,{flex:1,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"}),(0,i.jsx)(f,{flex:2,minH:"3.5em",bg:"var(--main-color)",iconSize:"xl"})]})}},toggle:{type:"toggle",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(r.xu,{className:"thumbnail-node-".concat(t.type),pl:"0.5em","data-open":"false",sx:{'&[data-open="false"]':{"> :not(:first-of-type)":{display:"none"}}},children:n})}},toggleSummary:{type:"toggleSummary",component:e=>{let{node:t}=e;return(0,i.jsxs)(d,{className:"thumbnail-node-".concat(t.type),orientation:"horizontal",color:"var(--main-color)",maxH:"1em",children:[(0,i.jsx)(g.G,{icon:R.I4f,size:"xl"}),(0,i.jsx)(c,{w:"75%"})]})}},smartLayout:{type:"smartLayout",component:e=>{var t,n;let{node:r,children:o,...a}=e,l=K;if(null===(t=r.attrs)||void 0===t?void 0:t.variantKey){let e=null===(n=V[r.attrs.variantKey])||void 0===n?void 0:n.Wrapper;e&&(l=e)}return(0,i.jsx)(S.r,{className:"thumbnail-node-".concat(r.type),gridTemplateColumns:"100%",children:(0,i.jsx)(l,{node:r,...a,children:o})})}},smartLayoutCell:{type:"smartLayoutCell",component:e=>{var t,n;let{children:r,parent:o,...a}=e,l=q;if(o&&(null===(t=o.attrs)||void 0===t?void 0:t.variantKey)){let e=null===(n=V[o.attrs.variantKey])||void 0===n?void 0:n.Cell;e&&(l=e)}return(0,i.jsx)(l,{parent:o,...a,children:r})}},diagram:{type:"diagram",component:e=>{let{node:t}=e;return(0,i.jsx)(f,{className:"thumbnail-node-".concat(t.type),icon:(0,i.jsx)(g.G,{icon:m.Kak,size:"2x"})})}},chart:{type:"chart",component:e=>{var t;let{node:n}=e;return(0,i.jsx)(f,{className:"thumbnail-node-".concat(n.type),icon:(0,i.jsx)(g.G,{icon:j[(null===(t=n.attrs)||void 0===t?void 0:t.chartType)||"bar"],size:"2x"})})}},table:{type:"table",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(r.xu,{flex:1,className:"thumbnail-node-".concat(t.type),bg:"var(--box-background-color)",borderRadius:"var(--text-border-radius)",p:"0.25em",children:(0,i.jsx)(r.xu,{border:"1px solid var(--main-color)",borderRadius:"var(--text-border-radius)",children:n})})}},tableRow:{type:"tableRow",component:e=>{let{node:t,children:n}=e;return(0,i.jsx)(p.k,{className:"thumbnail-node-".concat(t.type),borderBottom:"1px solid var(--main-color)",sx:{"&:last-of-type  ":{borderBottom:"none"}},children:n})}},tableCell:{type:"tableCell",component:e=>{let{node:t}=e;return(0,i.jsx)(r.xu,{flex:1,className:"thumbnail-node-".concat(t.type),height:"1em",borderRight:"1px solid var(--main-color)",sx:{"&:last-of-type":{borderRight:"none"}}})}}}},X={md:"6em",lg:"8em"},$={md:"4em",lg:"5em"},Z=e=>{let{content:t,isDark:n,size:o="md",...l}=e;return(0,i.jsx)(r.xu,{css:{"--box-background-color":n?"var(--chakra-colors-gray-600)":"var(--chakra-colors-gray-100)","--main-color":n?"var(--chakra-colors-gray-500)":"var(--chakra-colors-gray-200)","--accent-color":n?"var(--chakra-colors-gray-300)":"var(--chakra-colors-gray-400)","--box-border-radius":"0.5em","--box-padding":"0.75em","--text-border-radius":"0.25em","--block-spacing":"0.75em","--bullet-size":"1em","--line-spacing":"calc(1 / 3 * 1em)","--paragraph-height":"0.5em","--border-width":"0.25em","--card-template-width":X[o],"--card-template-min-height":$[o],"--card-background":n?"var(--chakra-colors-gray-700)":"white"},bg:"var(--card-background)",h:"auto",...l,children:a(Y,t)})}},91722:function(e,t,n){"use strict";n.d(t,{BC:function(){return d},ON:function(){return c},en:function(){return s},pA:function(){return u},wP:function(){return l}});var i=n(87254),r=n(13364),o=n(54133),a=n(60699);let l=()=>{let e=()=>i.ag._({id:"6MDj8K"});return{blankCard:{id:"blankCard",createdBy:null,name:()=>i.ag._({id:"UQOvxZ"}),description:()=>i.ag._({id:"V7lf6B"}),jsonContent:a.i.card([a.i.heading()]),keywords:["blank"]},titleWithBullets:{id:"titleWithBullets",name:()=>i.ag._({id:"jzSy62"}),createdBy:null,description:()=>i.ag._({id:"605WM6"}),jsonContent:a.i.card([a.i.heading(),a.i.bullet(),a.i.bullet(),a.i.bullet(),a.i.bullet()]),keywords:["heading","bullets"]},titleWithBulletsAndImage:{id:"titleWithBulletsAndImage",name:()=>i.ag._({id:"ciw/iY"}),createdBy:null,description:()=>i.ag._({id:"kTU/Ne"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.bullet(),a.i.bullet(),a.i.bullet(),a.i.bullet()],[a.i.mediaPlaceholder()]])]),keywords:["heading","bullets"]},titleWith2ColumnContent:{id:"titleWith2ColumnContent",createdBy:null,name:()=>i.ag._({id:"uVQ8y8"}),description:()=>i.ag._({id:"pRDCBH"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.paragraph(e())],[a.i.paragraph(e())]])]),keywords:["title","2 column","split","paragraph"]},titleWith2ColumnContentAndHeadings:{id:"titleWith2ColumnContentAndHeadings",createdBy:null,name:()=>i.ag._({id:"/ESRO3"}),description:()=>i.ag._({id:"acTyiC"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.h3(),a.i.paragraph(e())],[a.i.h3(),a.i.paragraph(e())]])]),keywords:["title","2 column","split","paragraph"]},titleWith3ColumnContent:{id:"titleWith3ColumnContent",createdBy:null,name:()=>i.ag._({id:"YmAqYT"}),description:()=>i.ag._({id:"od0FQb"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.paragraph(e())],[a.i.paragraph(e())],[a.i.paragraph(e())]])]),keywords:["heading","3 column","paragraph"]},titleWith3ColumnContentAndHeadings:{id:"titleWith3ColumnContentAndHeadings",createdBy:null,name:()=>i.ag._({id:"3tQQ39"}),description:()=>i.ag._({id:"Yno39F"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.h4(),a.i.paragraph(e())],[a.i.h4(),a.i.paragraph(e())],[a.i.h4(),a.i.paragraph(e())]])]),keywords:["heading","3 column","paragraph"]},titleWith4ColumnContent:{id:"titleWith4ColumnContent",createdBy:null,name:()=>i.ag._({id:"+a/yD6"}),description:()=>i.ag._({id:"h5ySm8"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.paragraph(e())],[a.i.paragraph(e())],[a.i.paragraph(e())],[a.i.paragraph(e())]])]),keywords:["heading","4 column","paragraph"]},titleWith2ColumnImageLeft:{id:"titleWith2ColumnImageLeft",createdBy:null,name:()=>i.ag._({id:"6edF/U"}),description:()=>i.ag._({id:"SzGG7G"}),jsonContent:a.i.card([a.i.columns([[a.i.mediaPlaceholder()],[a.i.heading(),a.i.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["title","2 column","image","left"]},titleWith2ColumnImageRight:{id:"titleWith2ColumnImageRight",createdBy:null,name:()=>i.ag._({id:"afp0nb"}),description:()=>i.ag._({id:"M7cuHB"}),jsonContent:a.i.card([a.i.columns([[a.i.heading(),a.i.paragraph(e())],[a.i.mediaPlaceholder()]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["title","2 column","image","right"]},titleWith2ImageColumns:{id:"titleWith2ImageColumns",createdBy:null,name:()=>i.ag._({id:"oVMU3f"}),description:()=>i.ag._({id:"sqVSP2"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.mediaPlaceholder(),a.i.h3(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h3(),a.i.paragraph(e())]])]),keywords:["heading","2 column","image"]},titleWith3ImageColumns:{id:"titleWith3ImageColumns",createdBy:null,name:()=>i.ag._({id:"ZjjVJt"}),description:()=>i.ag._({id:"kmtZuD"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())]])]),keywords:["heading","3 column","paragraph","image"]},titleWith4ImageColumns:{id:"titleWith4ImageColumns",createdBy:null,name:()=>i.ag._({id:"Re1S+b"}),description:()=>i.ag._({id:"+x8oem"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())],[a.i.mediaPlaceholder(),a.i.h4(),a.i.paragraph(e())]])]),keywords:["heading","4 column","image"]},titleWith3ImagesWithText:{id:"titleWith3ImagesWithText",createdBy:null,name:()=>i.ag._({id:"cDxTeG"}),description:()=>i.ag._({id:"rwJuIz"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("imagesText",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:10,shapeSize:"full",horizontalAlign:"left",imageShape:"square"}})]),keywords:["heading","image","layout"]},imageGallery:{id:"imageGallery",createdBy:null,name:()=>i.ag._({id:"Oho0T7"}),description:()=>i.ag._({id:"H87HG1"}),jsonContent:a.i.card([a.i.heading(),a.i.gallery([a.i.mediaPlaceholder({source:"image.custom"}),a.i.mediaPlaceholder({source:"image.custom"}),a.i.mediaPlaceholder({source:"image.custom"})])]),keywords:["heading","gallery","image"]},titleWithTeamPhotos:{id:"titleWithTeamPhotos",createdBy:null,name:()=>i.ag._({id:"+kQMBP"}),description:()=>i.ag._({id:"tt2nIz"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("imagesText",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"6YtxFj"})),a.i.paragraph(i.ag._({id:"GDvlUT"})),a.i.paragraph(i.ag._({id:"Nu4oKW"}),{fontSize:"sm"})]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"6YtxFj"})),a.i.paragraph(i.ag._({id:"GDvlUT"})),a.i.paragraph(i.ag._({id:"Nu4oKW"}),{fontSize:"sm"})]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"6YtxFj"})),a.i.paragraph(i.ag._({id:"GDvlUT"})),a.i.paragraph(i.ag._({id:"Nu4oKW"}),{fontSize:"sm"})])],{options:{cellSize:10,shapeSize:"full",horizontalAlign:"center",imageShape:"circle"}})]),keywords:["heading","image","team"]},accentRight:{id:"accentRight",createdBy:null,name:()=>i.ag._({id:"Czo70+"}),description:()=>i.ag._({id:"x5nYRE"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"right"}),keywords:["accent"]},accentRightFit:{id:"accentRightFit",createdBy:null,name:()=>i.ag._({id:"1BvkHE"}),description:()=>i.ag._({id:"oItvxV"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"right"},{fitType:"fit"}),keywords:["accent"]},accentLeft:{id:"accentLeft",createdBy:null,name:()=>i.ag._({id:"5HMSY5"}),description:()=>i.ag._({id:"c/I4N2"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"left"}),keywords:["accent"]},accentLeftFit:{id:"accentLeftFit",createdBy:null,name:()=>i.ag._({id:"bGTdlK"}),description:()=>i.ag._({id:"r4fLNa"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"left"},{fitType:"fit"}),keywords:["accent"]},accentTop:{id:"accentTop",createdBy:null,name:()=>i.ag._({id:"BUdX7X"}),description:()=>i.ag._({id:"QuKih6"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"top"}),keywords:["accent"]},accentBackground:{id:"accentBackground",createdBy:null,name:()=>i.ag._({id:"CDFCZ5"}),description:()=>i.ag._({id:"uFWjQ5"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e())],{layout:"behind"}),keywords:["accent"]},titleWith3NestedCards:{id:"titleWith3NestedCards",createdBy:null,name:()=>i.ag._({id:"ORoO1f"}),description:()=>i.ag._({id:"J89hiV"}),jsonContent:a.i.card([a.i.heading(),a.i.card([a.i.heading(),a.i.paragraph()]),a.i.card([a.i.heading(),a.i.paragraph()]),a.i.card([a.i.heading(),a.i.paragraph()])]),keywords:["heading","nested","card"]},titleWith3Toggles:{id:"titleWith3Toggles",createdBy:null,name:()=>i.ag._({id:"Sf3ASu"}),description:()=>i.ag._({id:"58JI2k"}),jsonContent:a.i.card([a.i.heading(),a.i.toggle([a.i.paragraph(e())]),a.i.toggle([a.i.paragraph(e())]),a.i.toggle([a.i.paragraph(e())])]),keywords:["heading","toggle"]},titleWithTimeline:{id:"titleWithTimeline",createdBy:null,name:()=>i.ag._({id:"cklVjM"}),description:()=>i.ag._({id:"Wdyt2J"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("timeline",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{orientation:"vertical",twoSided:!1}})]),keywords:["heading","timeline"]},titleWithLargeBulletList:{id:"titleWithLargeBulletList",createdBy:null,name:()=>i.ag._({id:"F5uDGO"}),description:()=>i.ag._({id:"g1FTqD"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("bullets",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:20}})]),keywords:["heading","bullet","list"]},titleWithIconsWithText:{id:"titleWithIconsWithText",createdBy:null,name:()=>i.ag._({id:"joUkNe"}),description:()=>i.ag._({id:"DHZYRd"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("iconsText",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:10,shapeSize:"md",horizontalAlign:"center"}})]),keywords:["heading","icons"]},titleWithSmallIconsAndText:{id:"titleWithSmallIconsAndText",createdBy:null,name:()=>i.ag._({id:"AhHG+7"}),description:()=>i.ag._({id:"L8/5yN"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("iconsText",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:10,shapeSize:"sm",horizontalAlign:"left"}})]),keywords:["heading","icons"]},titleWithTextBoxes:{id:"titleWithTextBoxes",createdBy:null,name:()=>i.ag._({id:"b7qbjN"}),description:()=>i.ag._({id:"Cg0xBG"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("textBoxes",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:15}})]),keywords:["heading","boxes"]},titleWithArrows:{id:"titleWithArrows",createdBy:null,name:()=>i.ag._({id:"YUGjgn"}),description:()=>i.ag._({id:"SnGUtD"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("arrows",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())]),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())])],{options:{cellSize:10}})]),keywords:["arrows","process","sequence","flow"]},titleWithColumnChart:{id:"titleWithColumnChart",createdBy:null,name:()=>i.ag._({id:"kaIve5"}),description:()=>i.ag._({id:"EE/H36"}),jsonContent:a.i.card([a.i.heading(),a.i.columnChart()]),keywords:["heading","chart","column chart"],featureFlag:"enableCharts"},titleWithBarChart:{id:"titleWithBarChart",createdBy:null,name:()=>i.ag._({id:"JXpNuP"}),description:()=>i.ag._({id:"2s/J1+"}),jsonContent:a.i.card([a.i.heading(),a.i.barChart()]),keywords:["heading","chart","bar chart"],featureFlag:"enableCharts"},titleWithLineChart:{id:"titleWithLineChart",createdBy:null,name:()=>i.ag._({id:"Kt/Lzz"}),description:()=>i.ag._({id:"eRabUB"}),jsonContent:a.i.card([a.i.heading(),a.i.lineChart()]),keywords:["heading","chart","line chart"],featureFlag:"enableCharts"},titleWithPieChart:{id:"titleWithPieChart",createdBy:null,name:()=>i.ag._({id:"5+y+OQ"}),description:()=>i.ag._({id:"zIzb1A"}),jsonContent:a.i.card([a.i.heading(),a.i.pieChart()]),keywords:["heading","chart","pie chart"],featureFlag:"enableCharts"},titleWithDonutChart:{id:"titleWithDonutChart",createdBy:null,name:()=>i.ag._({id:"DNipMm"}),description:()=>i.ag._({id:"MWtClR"}),jsonContent:a.i.card([a.i.heading(),a.i.donutChart()]),keywords:["heading","chart","donut chart"],featureFlag:"enableCharts"},titleWithStats:{id:"titleWithStats",createdBy:null,name:()=>i.ag._({id:"w0arAq"}),description:()=>i.ag._({id:"YEhR/1"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("stats",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"nH8BJ4"})),a.i.paragraph(e())],{label:"25%"}),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"nH8BJ4"})),a.i.paragraph(e())],{label:"3/4"}),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"nH8BJ4"})),a.i.paragraph(e())],{label:"50"})],{options:{cellSize:15,shapeSize:"lg"}})]),keywords:["heading","stats"]},barStatsWithText:{id:"barStatsWithText",createdBy:null,name:()=>i.ag._({id:"LYRXtx"}),description:()=>i.ag._({id:"DgfiYp"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("barStats",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"nH8BJ4"})),a.i.paragraph(e())],{label:"25%"}),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"nH8BJ4"})),a.i.paragraph(e())],{label:"3/4"})],{options:{cellSize:20}})]),keywords:["heading","stats"]},titleWithCircleStats:{id:"titleWithCircleStats",createdBy:null,name:()=>i.ag._({id:"mvpFPS"}),description:()=>i.ag._({id:"9AzsRa"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("circleStats",[a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())],{label:"25%"}),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())],{label:"1/3"}),a.i.smartLayoutCell([a.i.h3(i.ag._({id:"HX5SVx"})),a.i.paragraph(e())],{label:"75"})],{options:{cellSize:10,horizontalAlign:"center"}})]),keywords:["arrows","process","sequence","flow"]},titleWith3RowTable:{id:"titleWith3RowTable",createdBy:null,name:()=>i.ag._({id:"aDo58o"}),description:()=>i.ag._({id:"2ZoOCu"}),jsonContent:a.i.card([a.i.heading(),a.i.table([a.i.tableRow([a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()])]),a.i.tableRow([a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()])]),a.i.tableRow([a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()]),a.i.tableCell([a.i.paragraph()])])])]),keywords:["heading","table"]},funnelWithText:{id:"funnelWithText",createdBy:null,name:()=>i.ag._({id:"ETqzyH"}),description:()=>i.ag._({id:"GxaYRj"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.smartLayout("funnel",[a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()])],{options:{numbered:!0,outsideText:!1}})],[a.i.h2(),a.i.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["heading","funnel"]},steppedPyramidWithText:{id:"steppedPyramidWithText",createdBy:null,name:()=>i.ag._({id:"6xmZsQ"}),description:()=>i.ag._({id:"GqW7Xg"}),jsonContent:a.i.card([a.i.heading(),a.i.columns([[a.i.smartLayout("staircase",[a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()])],{options:{outsideText:!1,horizontalAlign:"center"}})],[a.i.h2(),a.i.paragraph(e())]],{cellAttrs:{verticalAlign:"center"}})]),keywords:["heading","pyramid","stepped","staircase"]},leftSteppedPyramidWithTitleAndTextOutside:{id:"leftSteppedPyramidWithTitleAndTextOutside",createdBy:null,name:()=>i.ag._({id:"6j13ZR"}),description:()=>i.ag._({id:"JGF7vo"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("staircase",[a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()])],{options:{outsideText:!1,horizontalAlign:"left"}})]),keywords:["heading","pyramid","stepped","staircase"]},pyramidWithTitleAndTextOutside:{id:"pyramidWithTitleAndTextOutside",createdBy:null,name:()=>i.ag._({id:"l1mM+L"}),description:()=>i.ag._({id:"L0QPEt"}),jsonContent:a.i.card([a.i.heading(),a.i.smartLayout("pyramid",[a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()]),a.i.smartLayoutCell([a.i.h3()])],{options:{numbered:!0,outsideText:!0}})]),keywords:["heading","pyramid"]},titleWithContentAndButton:{id:"titleWithContentAndButton",name:()=>i.ag._({id:"FJJPAA"}),createdBy:null,description:()=>i.ag._({id:"itiMvE"}),jsonContent:a.i.card([a.i.heading(),a.i.paragraph(e()),a.i.buttons([a.i.button(i.ag._({id:"uWe4QF"}),{variant:"solid"}),a.i.button(i.ag._({id:"zwWKhA"}),{variant:"outline"})])]),keywords:["button","heading","paragraph"]},titleWithYouTubeEmbed:{id:"titleWithYouTubeEmbed",createdBy:null,name:()=>i.ag._({id:"D1Tqqj"}),description:()=>i.ag._({id:"s0st+i"}),jsonContent:a.i.card([a.i.heading(),a.i.mediaPlaceholder({source:"video.youtube"})]),keywords:["heading","embed","video"]},titleWithWebpageEmbed:{id:"titleWithWebpageEmbed",createdBy:null,name:()=>i.ag._({id:"8FOKyw"}),description:()=>i.ag._({id:"0ngLOJ"}),jsonContent:a.i.card([a.i.heading(),a.i.mediaPlaceholder({source:"embed.custom"})]),keywords:["heading","embed","webpage"]},titleCard:{id:"titleCard",createdBy:null,name:()=>i.ag._({id:"5U/oBM"}),description:()=>i.ag._({id:"rYur7N"}),jsonContent:a.i.card([a.i.title(),a.i.h2()]),keywords:["title"]},titleWithGif:{id:"titleWithGif",createdBy:null,name:()=>i.ag._({id:"wRkP2d"}),description:()=>i.ag._({id:"kHFDdm"}),jsonContent:a.i.card([a.i.heading(),a.i.mediaPlaceholder({source:"image.giphy"})]),keywords:["heading","embed","webpage"]},titleWithDiagram:{id:"titleWithDiagram",createdBy:null,name:()=>i.ag._({id:"i+ShMB"}),description:()=>i.ag._({id:"6i4/hD"}),jsonContent:a.i.card([a.i.heading(),a.i.diagram()]),keywords:["heading","diagram"],featureFlag:"tldraw2"}}},s=()=>Object.values(l()),d=()=>s().reduce((e,t)=>(e[t.id]=t.jsonContent,e),{}),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return(0,o.M)(e).map(e=>{let{name:t,templateIds:n}=e,i=n.map(e=>l()[e]);return{subcategory:t(),items:i}})},u=(e,t,n)=>{try{if(t.featureFlag&&!r.VH.get(t.featureFlag)||(null==n?void 0:n(t)))return!0;return!1}catch(e){return!0}}},60699:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var i=n(59700),r=n(1338);let o={heading:(e,t)=>({type:"heading",attrs:{placeholder:e,level:1,...t}}),h2(e){return this.heading(e,{level:2})},h3(e){return this.heading(e,{level:3})},h4(e){return this.heading(e,{level:4})},title:(e,t)=>({type:"title",attrs:{placeholder:e,...t}}),paragraph:(e,t)=>({type:"paragraph",attrs:{placeholder:e,...t}}),bullet:(e,t)=>({type:"bullet",attrs:{placeholder:e,...t}}),toggle(e,t,n){let i=e||[o.paragraph()];return{type:"toggle",content:[{type:"toggleSummary",attrs:{fontSize:"h3",placeholder:t,...n}},...i]}},columns(e,t){let n=(null==t?void 0:t.colAttrs)||{},i=(null==t?void 0:t.cellAttrs)||{};return{type:"gridLayout",attrs:{colWidths:(0,r.RS)(e.length),...n},content:e.map(e=>({type:"gridCell",content:e,attrs:i}))}},smartLayout:(e,t,n)=>({type:"smartLayout",attrs:{variantKey:e,...n},content:t}),smartLayoutCell:(e,t)=>({type:"smartLayoutCell",attrs:t,content:e}),mediaPlaceholder:e=>({type:"mediaPlaceholder",attrs:e}),card(e,t,n){let i=e||[o.heading()];return{type:"card",attrs:t,content:[...(null==t?void 0:t.layout)?[{type:"cardAccentLayoutItem",attrs:{itemId:"accent",...n}}]:[],{type:"cardLayoutItem",attrs:{itemId:"body"},content:i}]}},buttons:(e,t)=>({type:"buttonGroup",attrs:t,content:e}),button:(e,t)=>({type:"button",attrs:t,content:[{type:"text",text:e}]}),gallery:(e,t)=>({type:"gallery",attrs:t,content:e||[o.mediaPlaceholder({source:"image.custom"})]}),table:(e,t)=>({type:"table",attrs:{colWidths:(0,r.RS)(e.length),...t},content:e}),tableRow:e=>({type:"tableRow",content:e}),tableCell:(e,t)=>({type:"tableCell",content:e,attrs:{colspan:1,rowspan:1,...t}}),diagram:e=>({type:"diagram",attrs:e}),chart(e,t){let{data:n,...r}=t||{},o=n||(0,i.W)(e);return{type:"chart",attrs:{chartType:e,data:o,...r}}},columnChart(e){let{data:t,...n}=e||{},r=t||(0,i.W)("bar");return this.chart("bar",{data:r,...n})},barChart(e){let{data:t,...n}=e||{},r=t||(0,i.W)("horizontal-bar");return this.chart("horizontal-bar",{data:r,...n})},lineChart(e){let{data:t,...n}=e||{},r=t||(0,i.W)("line");return this.chart("line",{data:r,...n})},pieChart(e){let{data:t,...n}=e||{},r=t||(0,i.W)("pie");return this.chart("pie",{data:r,...n})},donutChart(e){let{data:t,...n}=e||{},r=t||(0,i.W)("donut");return this.chart("donut",{data:r,...n})}}},98210:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var i=n(71383),r=n(93593),o=n(43271),a=n(78112),l=n(73360);let s=e=>{let t=(0,i.CG)(a.Pu),{isCardDark:n,cardColorOverride:s}=(0,l.$D)(e),d=null!=n?n:(0,r.wj)(t),c=null!=s?s:(0,o.XX)(t);return{theme:t,isDark:d,cardColor:c}}},31285:function(e,t,n){"use strict";n.d(t,{v:function(){return g}});var i=n(71383),r=n(27821),o=n(38799),a=n(78112),l=n(33945),s=n(55891),d=n(73281),c=n(83091),u=n(79385),p=n(73360),h=n(98210),m=n(68329);let g=e=>{var t;let{node:n,decorations:s,editor:g}=e,x=n.attrs,{id:v,previewContent:y}=x,b=(0,o.TZ)(),w=(0,r.C7)(),C=g.isThumbnail,k=(0,i.CG)(a.Ql),[j,S]=(0,m.D)(v),A="doc"===j?l.q.DOC_VIEW:l.q.SLIDE_VIEW,I=(0,i.CG)(e=>(0,a.hN)(e,A)),z=A===l.q.SLIDE_VIEW,L=(0,i.CG)(a.SU),E=(0,c.v)(s),N=(0,i.CG)((0,a.yH)(v)),M=(0,d.yv)(s),{isNested:_,nestedDepth:T,isFirstCard:R,isLastCard:H,inheritContainerWidth:P,displayLayout:O,insideSideLayout:D,cardAccentBackgroundMaskEffect:W,hasLayoutItem:F,hasNonEmptyCardNotes:B}=(0,p.$D)(s),{theme:G,isDark:U}=(0,h.t)(s),{cardDimensions:V,defaultFullBleed:q,defaultContentWidth:K,presentBackdrop:Y=!1,verticalAlign:X}=f(g),$=(0,u.l)(V),Z="default"===x.cardSize?"full"===q:"full"===x.cardSize,Q=x.verticalAlign||X||$.defaultVerticalAlign,J=z&&!_&&!!$.aspectRatio&&!Y,ee=null!==(t=x.container.width)&&void 0!==t?t:P;return{hasNonEmptyCardNotes:B,isCollapsed:N,isEditable:I,isFirstCard:R,isFocused:E,isExpandableSelected:M,isLastCard:H,isLetterboxed:J,isMobileDevice:b,isNested:_,isPresenting:"doc"!==j&&"presentCollapsed"!==j,isPresentingCurrent:"presentCurrent"===j,isPresentingParent:"presentParent"===j,isPresentMode:z,isPublished:w,isStatic:k,isDark:U,isThumbnail:C,mode:A,nestedDepth:T,presentVariant:j,prevPresentVariant:S,previewContent:y,theme:G,attrs:x,cardId:v,isFullBleed:Z,displayFullBleed:C||!_&&(Z||z&&!Y),defaultContentWidth:K,contentWidth:ee,verticalAlign:Q,isWideContent:(null!=ee?ee:K)==="lg",displayLayout:O,insideSideLayout:D,cardAccentBackgroundMaskEffect:W,cardDimensions:$,cardDimensionsKey:V,showPresentBackdrop:Y,hasLayoutItem:F,userZoomLevel:L}},f=e=>{let t=(0,i.CG)(a.US);if(e.isStatic)try{return(0,s.VA)(e).settings}catch(e){console.error("[caught] useDocSettings: ".concat(e))}return t}},97284:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(4742),r=n.n(i),o=n(2784),a=n(71383),l=n(78112);let s=()=>{let e=(0,a.CG)(l.Pu);return(0,o.useCallback)(()=>r()(e.config.accentBackgrounds),[e])}},68329:function(e,t,n){"use strict";n.d(t,{D:function(){return d}});var i=n(2784),r=n(30240),o=n(71383),a=n(78112),l=n(33945),s=n(42616);n(65050);let d=e=>{let t=(0,i.useRef)("doc"),n=(0,o.qr)(),d=(0,o.CG)(n=>{let i=(0,a.i2)(n)||"",o=(0,a.X9)(n),s=(0,a.xb)(n),d=(0,a.gh)(n),c=o.parents[i]||[],u=c.reduce((e,t)=>e[t],o.tree),p=s.includes(i),h=d===l.q.SLIDE_VIEW;if(h&&!p||!h&&p)return t.current;if(!h&&!p)return"doc";let m=s.filter(e=>u[e]),g=e=>u[e]?m.indexOf(e)-m.indexOf(i):1/0,f=g(e),x=c.indexOf(e)>-1,v=m.some(t=>u[t][e]&&1>=Math.abs(g(t))),y=i===e,b=r.VH.get("presentModeFlat"),w=o.parents[e];if(!w)return t.current;let C=w.includes(i);return v||b&&C?"presentCollapsed":x?"presentParent":y?"presentCurrent":-1===f?"presentPrev":1===f?"presentNext":"doc"});return(0,i.useEffect)(()=>{t.current=d;let i=n.getState();if((0,a.ks)(i))return;let o=r.VH.get("presentModeFlat");"presentCollapsed"!==d||o?["presentParent","presentCurrent","presentPrev","presentNext"].includes(d)&&(0,s.Nn)(e,!1):(0,s.Nn)(e,!0)},[n,d,e]),[d,t.current]}},54563:function(e,t,n){"use strict";n.d(t,{id:function(){return k.id},pL:function(){return k.pL},W4:function(){return k.W4},vD:function(){return k.vD},Zb:function(){return nm},nY:function(){return k.nY},r0:function(){return k.r0},Sf:function(){return k.Sf},jz:function(){return nu.jz},J9:function(){return nu.J9},AQ:function(){return nu.AQ},U8:function(){return k.U8},YS:function(){return nu.YS},pr:function(){return np},pE:function(){return nu.pE}});var i=n(32099),r=n(37243),o=n(27191),a=n(68785),l=n(45989),s=n(71383),d=n(54317),c=n(27210),u=n(27797),p=n(12971),h=n(26923),m=n(72205),g=n(46007),f=n(44170),x=n(42616),v=n(22156),y=n(3027),b=n(10806);let w=!1;var C=n(73360),k=n(65050),j=n(52322),S=n(2784),A=n(78112),I=n(28535),z=n(75768),L=n(77533),E=n(29117),N=n(62614),M=n(73200),_=n(42946),T=n(49929),R=n(5879),H=n(87254),P=n(44598),O=n(76009),D=n(81363),W=n(33886),F=n(7096),B=n(61839),G=n(62935),U=n(45075),V=n(92179),q=n(73281),K=n(61372),Y=n(31285);let X=(0,S.memo)(e=>{let{decorations:t,editor:n,getPos:i,node:r}=e,o=(0,O.z$)(),a=(0,s.TL)(),{cardId:l,isPresentMode:d,isEditable:c,isMobileDevice:u}=(0,Y.v)(e),{title:p,text:h}=(0,P.T)({node:r,cardId:l}),{previewContent:m}=e.node.attrs,g=""===m,f=null==p?void 0:p.replaceAll(B.V,e=>'<span class="emoji">'.concat(e,"</span>")),v=(0,s.CG)(A.Pu),y=(0,K.v0)("h4",v),b=(0,q.yv)(t),w=(0,S.useCallback)(e=>{e.stopPropagation(),d&&!c?(a((0,A.Qx)({attached:!1})),n.commands.descendIntoCurrentCard(i(),"push"),null==o||o.track(D.AA.CARD_EXPANDED,{is_present_mode:!0,method:"click"})):((0,x.Nn)(l,!1),setTimeout(()=>{if(!c||n.isDestroyed)return;let e=i();n.commands.selectInsideNodeAtPos(e)},50),null==o||o.track(D.AA.CARD_EXPANDED,{is_present_mode:!1,method:"click"}))},[l,d,c,a,n,i,o]),C=g||!(null==h?void 0:h.trim());return(0,j.jsxs)(U.lO,{...e,children:[(0,j.jsx)(V.A,{...e,"data-testid":"card-drag-handle",handlePlacement:"outside"}),(0,j.jsxs)(I.xu,{mb:"0.25em",position:"relative",contentEditable:!1,userSelect:"none",role:"group","data-card-id":l,"data-export-as-image":!0,children:[(0,j.jsxs)(z.h,{position:"absolute",right:"0.75em",top:"0.75em","data-print-hidden":!0,variant:"unstyled",colorScheme:"gray",fontFamily:"Inter, sans-serif","data-thumbnail-hidden":!0,children:[c&&(0,j.jsx)($,{hidePreview:g,...e}),(0,j.jsx)(Z,{onClick:w})]}),(0,j.jsxs)(I.xu,{cursor:"pointer",className:(0,M.cx)(k.vD,"card-collapsed",b&&"expandable-selected"),_groupHover:W.dP,...W.ND,paddingX:u?"1em":"1.5em",paddingY:"1em",onClick:w,"data-collapsed-card":!0,"data-selection-ring":!0,"data-selection-background":!0,"data-content-reference":!0,sx:{backgroundColor:"var(--clickable-background-color)",boxShadow:"var(--card-border-shadow, 0px 0px 0px 1px var(--neutral-border-color)), var(--card-box-shadow, var(--clickable-shadow))",borderRadius:"calc(var(--card-border-radius) / 2)","@media print":{boxShadow:"none",border:"var(--card-border, 1px solid var(--neutral-border-color))"}},children:[(0,j.jsx)(L.x,{sx:y,noOfLines:1,mr:"1.75em",mb:"0.375em",className:(0,M.cx)(F.A8),children:f?(0,j.jsx)(L.x,{as:"span",dangerouslySetInnerHTML:{__html:G.R.sanitize(f)}}):p||(0,j.jsx)(L.x,{as:"span",color:"gray.400",children:(0,j.jsx)(R.cC,{id:"gLDJuJ"})})}),(0,j.jsxs)(E.U,{color:"var(--body-color-muted)",children:[(0,j.jsx)(L.x,{noOfLines:1,fontFamily:C?"Inter, sans-serif":void 0,fontSize:"0.9em",children:C?(0,j.jsx)(R.cC,{id:"4m3nxQ"}):h}),g&&(0,j.jsx)(T.G,{icon:_.ptq,size:"sm"})]})]})]})]})});X.displayName="CollapsedCard";let $=e=>{let{hidePreview:t,updateAttributes:n}=e,i=(0,S.useCallback)(e=>{n&&(n({previewContent:t?null:""}),e.stopPropagation())},[n,t]);return(0,j.jsx)(N.z,{opacity:0,transitionProperty:"opacity",transitionDuration:"normal",_groupHover:{opacity:1},sx:W.un,fontSize:"0.7em",onClick:i,className:W.wY,zIndex:1,children:t?(0,j.jsx)(R.cC,{id:"fsyAH8"}):(0,j.jsx)(R.cC,{id:"Po0vX/"})})},Z=e=>{let{onClick:t}=e;return(0,j.jsxs)(N.z,{"aria-label":H.ag._({id:"JjrOSL"}),className:W.wY,onClick:t,zIndex:1,sx:W.un,fontSize:"0.7em","data-testid":"expand-card-button",children:[(0,j.jsx)(T.G,{icon:_.TTL,fontSize:"0.9em"}),(0,j.jsx)(L.x,{as:"span",_groupHover:{opacity:1,display:"inline"},opacity:"0",display:"none",ml:2,children:(0,j.jsx)(R.cC,{id:"1A3EXy"})})]})};var Q=n(17993),J=n(36474),ee=n(64253),et=n(30240),en=n(24759),ei=n(93593),er=n(3874),eo=n(3063),ea=n(53078),el=n(26714),es=n(38035),ed=n(73346);let ec=e=>{let{cardId:t,...n}=e,[i,r]=(0,S.useState)(0),[o,a]=(0,S.useState)(!1),[l,s]=(0,S.useState)(0);return(0,S.useEffect)(()=>{let e=ed.f.on("cardViewed",e=>{let{cardId:n,interval:i}=e;t===n&&r(e=>e+i)}),n=ed.f.on("flush",e=>{let{viewed:n}=e;r(0),n[t]&&(a(!0),s(n[t]),setTimeout(()=>a(!1),2e3))});return()=>{e(),n()}},[t]),(0,j.jsxs)(I.xu,{...n,bg:o?"#c3313a":"#f5ae00",children:[!o&&(0,j.jsxs)(I.xu,{children:["time on card: ",Math.floor(i/1e3),"s"]}),o&&(0,j.jsxs)(I.xu,{children:["Tracked View: ",l,"s"]})]})},eu=e=>{let t=(0,et.ye)("debugCardViewed"),{getPos:n,node:i}=e,{id:r}=i.attrs;return t?(0,j.jsxs)(es.k,{left:8,top:2,zIndex:"overlay",position:"absolute",pointerEvents:"none",opacity:.5,contentEditable:!1,children:[(0,j.jsx)(I.xu,{bg:"yellow",px:2,mr:2,borderRadius:"md",children:r}),(0,j.jsxs)(I.xu,{bg:"trueblue.200",px:2,mr:2,borderRadius:"md",children:["f:",n()," t:",n()+i.nodeSize]}),(0,j.jsx)(ec,{cardId:r,px:2,borderRadius:"md"})]}):null};var ep=n(83906),eh=n(76643),em=n(70065),eg=n(11082),ef=n(43679),ex=n(34071),ev=n(332),ey=n(39429),eb=n(43297),ew=n(74008),eC=n(89099),ek=n(56143),ej=n(40857),eS=n(19426),eA=n(65702),eI=n(91492),ez=n(9237),eL=n(65068),eE=n(99843),eN=n(6510),eM=n(1798),e_=n(32899),eT=n(37173);let eR=e=>{let{icon:t,label:n,children:i,...r}=e;return(0,j.jsxs)(eb.K,{direction:"row",spacing:4,alignItems:"center",...r,children:[(0,j.jsx)(T.G,{fixedWidth:!0,icon:t}),(0,j.jsx)(L.x,{children:n}),(0,j.jsx)(J.L,{}),i]})},eH=e=>{let{editor:t,accentPos:n,cardId:i,hasAccentImage:r,isBehindLayout:o}=e,a=(0,S.useCallback)(()=>{n&&t.commands.updateAttributesAtPos(n,{background:{type:eI.E.NONE}})},[t,n]),l=(0,S.useCallback)(()=>{eT.T.emit("toggleEditBackgroundDrawer",{openDrawer:!0,cardId:i})},[i]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(eR,{label:o?(0,j.jsx)(R.cC,{id:"23c2Uw"}):(0,j.jsx)(R.cC,{id:"e5Sy/T"}),icon:_.VmB,children:(0,j.jsx)(E.U,{spacing:1,children:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(N.z,{size:"sm",variant:"link",onClick:l,colorScheme:"trueblue",children:r?(0,j.jsx)(R.cC,{id:"ePK91l"}):(0,j.jsx)(R.cC,{id:"PNapeY"})}),r&&(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"sGYCGx"}),placement:"top",children:(0,j.jsx)(e_.h,{"aria-label":H.ag._({id:"sGYCGx"}),size:"sm",variant:"link",onClick:a,colorScheme:"red",icon:(0,j.jsx)(T.G,{icon:_.qDv})})})]})})})})},eP=e=>{let{editor:t,getPos:n,onAddOrEditClick:i,isDisabled:r,hasBackdrop:o}=e,a=(0,S.useCallback)(()=>{t.commands.updateAttributesAtPos(n(),{background:{type:eI.E.NONE}})},[t,n]);return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(eR,{icon:_.UHQ,label:(0,j.jsx)(R.cC,{id:"ANn8Qe"}),color:r?"gray.500":void 0,children:[r&&(0,j.jsx)(ee.kH,{placement:"top",label:(0,j.jsx)(R.cC,{id:"ZnOCf5"}),isDisabled:!r,children:(0,j.jsx)(T.G,{fixedWidth:!0,icon:_.Aq})}),(0,j.jsx)(E.U,{spacing:1,children:!r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(N.z,{size:"sm",variant:"link",onClick:i,colorScheme:"trueblue",children:o?(0,j.jsx)(R.cC,{id:"ePK91l"}):(0,j.jsx)(R.cC,{id:"PNapeY"})}),o&&(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"IfZ6hd"}),placement:"top",children:(0,j.jsx)(e_.h,{"aria-label":H.ag._({id:"IfZ6hd"}),size:"sm",variant:"link",onClick:a,colorScheme:"red",icon:(0,j.jsx)(T.G,{icon:_.qDv})})})]})})]})})};var eO=n(10625),eD=n(67046),eW=n(99058),eF=n(44035),eB=n(39237),eG=n(74766);let eU=e=>{var t,n;let{editor:i,accentPos:r,accentBackground:o,effect:a}=e,l=(0,S.useCallback)(e=>{if(!r||!o)return;let t={background:{mask:{...o.mask,effect:e}}};i.commands.updateNestedAttributesAtPos(r,t)},[i,o,r]),s=null!=a?a:eM.xO.effect,d=null!==(n=null===(t=eG.$v.find(e=>e.value===a))||void 0===t?void 0:t.label())&&void 0!==n?n:(0,j.jsx)(R.cC,{id:"xg0y9o"});return(0,j.jsx)(eR,{label:(0,j.jsx)(R.cC,{id:"u4YODQ"}),icon:_.DhN,children:(0,j.jsxs)(eO.v,{isLazy:!0,children:[(0,j.jsx)(eD.j,{as:N.z,variant:"plain",size:"sm",minW:"128px",boxShadow:"none",textAlign:"left",rightIcon:(0,j.jsx)(ep.v,{}),children:d}),(0,j.jsx)(eW.q,{children:(0,j.jsx)(eF._,{value:s,type:"radio",onChange:l,children:eG.$v.map(e=>{let{value:t,label:n}=e;return(0,j.jsx)(eB.i,{value:t,children:n()},t)})})})]})})};var eV=n(54476),eq=n(54842),eK=n(43271),eY=n(74216);let eX=e=>{var t;let{editor:n,attrs:i,getPos:r}=e,o=(0,s.CG)(A.Pu);return{currentColor:(0,eY.dF)(null===(t=i.container)||void 0===t?void 0:t.background),themeCardColor:(0,eK.XX)(o),setCardColor:e=>{let{container:t}=i,o=e?{background:{type:eI.E.COLOR,color:{hex:e}}}:{background:void 0};void 0!==t.isDark&&(o.isDark=void 0),n.commands.updateNestedAttributesAtPos(r(),{container:{...t,...o}})}}},e$=e=>{let{editor:t,attrs:n,getPos:i}=e,{setCardColor:r,currentColor:o,themeCardColor:a}=eX({editor:t,attrs:n,getPos:i});return(0,j.jsx)(eR,{icon:_.re8,label:"behind"===n.layout?(0,j.jsx)(R.cC,{id:"cA3hQ0"}):(0,j.jsx)(R.cC,{id:"9d2iLQ"}),children:(0,j.jsxs)(eO.v,{isLazy:!0,children:[(0,j.jsx)(eV.t,{color:null!=o?o:a,isDefaultColor:void 0===o}),(0,j.jsx)(eW.q,{overflow:"hidden",children:(0,j.jsx)(eq.M,{currentColor:null!=o?o:a,setColor:r,source:"CardColor"})})]})})};var eZ=n(41098);let eQ=e=>{let{editor:t,getPos:n,isWideContent:i}=e,r=(0,S.useCallback)(()=>{t.commands.updateNestedAttributesAtPos(n(),{container:{width:i?"md":"lg"}})},[t,n,i]);return(0,j.jsx)(eR,{icon:_.dH7,label:(0,j.jsx)(R.cC,{id:"lklIf1"}),children:(0,j.jsx)(eZ.r,{isChecked:i,onChange:r})})};var eJ=n(11457);let e0=e=>{let{editor:t,getPos:n,contentWidth:i}=e,{defaultContentWidth:r}=(0,s.CG)(A.US),o=(0,S.useCallback)(e=>{let r=e;r===i&&(r=null),t.commands.updateNestedAttributesAtPos(n(),{container:{width:r}})},[t,n,i]);return(0,j.jsx)(eR,{icon:_.hz8,label:(0,j.jsx)(R.cC,{id:"cPp+Ef"}),children:(0,j.jsx)(eJ.p,{setWidth:o,contentWidth:i,defaultContentWidth:r})})};var e1=n(48043);let e2=e=>{let{editor:t,getPos:n,isFullWidth:i}=e,r=(0,S.useCallback)(()=>{t.commands.updateAttributesAtPos(n(),{cardSize:i?"contained":"full"})},[t,n,i]);return(0,j.jsx)(eR,{icon:_.r9b,label:(0,j.jsx)(R.cC,{id:"BquNv8"}),children:(0,j.jsx)(eZ.r,{isChecked:i,onChange:r})})};var e4=n(36947),e3=n(31818),e5=n(44317);let e7=(0,S.memo)(e=>{var t,n;let{editor:i,getPos:r,attrs:o,accentBackgroundMaskEffect:a,displayLayout:l,insideSideLayout:d,isNested:c,isFullBleed:u,isWideContent:p,verticalAlign:h,contentWidth:m,cardDimensionsKey:g}=e,{color:f,bg:x,hoverColor:y,hoverBg:b,borderColor:w}=(0,eL.lv)(),C=(0,S.useRef)(null),k=(0,s.CG)((0,e4.OU)(o.id,"styling")),A=(0,s.TL)(),I=(0,S.useCallback)(()=>{A((0,e4.RD)())},[A]),z=(0,S.useCallback)(()=>{A((0,e4.A7)({cardId:o.id,menuType:"styling"}))},[A,null==o?void 0:o.id]);(0,eh.O)({ref:C,handler:e=>{var t;if(!k)return;let n=e.target,i=null==n?void 0:n.closest('[data-card-styles-menu-trigger="'.concat(o.id,'"]')),r=!!(null==n?void 0:null===(t=n.closest(".chakra-modal__content-container"))||void 0===t?void 0:t.querySelector("[data-edit-background-drawer]"));i||r||I()}});let M=(0,et.ye)("borderless")&&("fluid"===g||"default"!==o.cardSize),P=(0,et.ye)("cardPageStyles"),O=(0,v.gF)(i.state.doc.resolve(r())),D=(null===(t=O.accent)||void 0===t?void 0:t.pos)||null,W=null===(n=O.accent)||void 0===n?void 0:n.node.attrs.background,F=W&&W.type!==eI.E.NONE,B="none"!==o.background.type,G="default"!==o.cardSize||B||F||o.container.width||o.container.background||"blank"!==l||o.verticalAlign,U="behind"===l&&F&&(0,eM.Zi)(W),V=(0,em.p)(),{openBackgroundTab:q,...K}=(0,e5.a)(),{setBackgroundDrawerSourceKeyAction:Y}=(0,eE.j)(),X=(0,S.useCallback)(e=>{(0,eS.y)(i,r(),e)},[i,r]),$=(0,S.useCallback)(()=>{let e={};B&&(e.background={type:eI.E.NONE,source:void 0}),e.cardSize=void 0,e.verticalAlign=void 0,e.container={...o.container,width:void 0},o.container.background&&(e.container={...o.container,background:void 0}),"blank"!==l&&(e.layout="blank"),D?i.chain().updateAttributesAtPos(r(),e).updateNestedAttributesAtPos(D,{background:{type:eI.E.NONE}}).run():i.commands.updateAttributesAtPos(r(),e);let t=H.ag._({id:"rQHMjX"}),n=H.ag._({id:"9uI/rE"}),a=V({title:(0,j.jsxs)(E.U,{children:[(0,j.jsx)(L.x,{children:t}),(0,j.jsx)(eg.r,{textDecoration:"underline",onClick:()=>{(0,ek.Yw)(i.state),V.close(a)},children:n})]}),status:"info",duration:3e3,position:"top"})},[B,o.container,l,D,i,r,V]);return(0,j.jsx)(ee.Wk,{isDark:!1,children:(0,j.jsxs)(E.U,{spacing:1,onClick:ez.UW,contentEditable:!1,pointerEvents:"auto",children:[(0,j.jsxs)(ef.J,{isLazy:!0,returnFocusOnClose:!1,isOpen:k,onClose:I,closeOnBlur:!1,children:[(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"F153E+"}),placement:"top",shouldWrapChildren:!0,children:(0,j.jsx)(ex.x,{children:(0,j.jsxs)(N.z,{"data-card-styles-menu-trigger":o.id,height:e3.fD,fontWeight:"900",alignItems:"center",fontFamily:"Inter, sans-serif",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:w,color:f,boxShadow:"sm",cursor:"pointer",fontSize:"14px",bg:x,px:.5,_hover:{color:y,background:b},onClick:z,children:[(0,j.jsx)(T.G,{icon:_.q2v,fixedWidth:!0}),(0,j.jsx)(ep.v,{})]})})}),(0,j.jsx)(ev.h,{children:(0,j.jsxs)(ey.y,{"data-card-styles-menu":!0,ref:C,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,j.jsxs)(eb.K,{spacing:4,p:4,children:[(0,j.jsx)(e1.yG,{editor:i,layout:l,getPos:r,edgeLayoutsEnabled:!d}),"blank"!==l&&(0,j.jsx)(eH,{editor:i,accentPos:D,cardId:o.id,hasAccentImage:!!F,isBehindLayout:"behind"===l}),U&&(0,j.jsx)(eU,{editor:i,accentBackground:W,accentPos:D,effect:a}),(0,j.jsx)(e$,{editor:i,attrs:o,getPos:r}),!c&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ew.i,{my:"1"}),M&&(0,j.jsx)(e2,{editor:i,getPos:r,isFullWidth:u}),"fluid"!==g&&(0,j.jsx)(eR,{icon:_.elf,label:(0,j.jsx)(R.cC,{id:"vUBA/H"}),children:(0,j.jsx)(eN.e,{defaultAlignment:h,alignment:o.verticalAlign,setAlignment:e=>{let t=e;e===o.verticalAlign&&(t=null),i.commands.updateAttributesAtPos(r(),{verticalAlign:t})}})}),P?(0,j.jsx)(j.Fragment,{children:("fluid"===g||m)&&(0,j.jsx)(e0,{editor:i,getPos:r,contentWidth:m})}):(0,j.jsx)(eQ,{editor:i,getPos:r,isWideContent:p}),(0,j.jsx)(eP,{editor:i,getPos:r,onAddOrEditClick:()=>{Y(ej.r),q(!1)},hasBackdrop:B,isDisabled:u})]})]}),(0,j.jsxs)(eC.E,{px:5,py:3,bg:"gray.100",mx:-1,mb:-1,justify:G?"space-between":"center",alignItems:"center",borderBottomRadius:"xl",children:[G&&(0,j.jsx)(eC.U,{children:(0,j.jsx)(N.z,{onClick:$,variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,j.jsx)(T.G,{icon:_.XnX}),children:(0,j.jsx)(R.cC,{id:"6hU6uw"})})}),(0,j.jsx)(eC.U,{children:(0,j.jsx)(N.z,{onClick:()=>{I(),eA.pw.emit(eA.TI.OPEN_PAGE_SETUP,"cards")},variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,j.jsx)(T.G,{icon:_.gr5}),children:(0,j.jsx)(R.cC,{id:"fvaOtb"})})})]})]})})]}),(0,j.jsx)(e5.S,{editor:i,updateNestedAttributes:X,background:o.background,container:o.container,...K})]})})});var e8=n(77692),e6=n(50019),e9=n(54933),te=n(25556),tt=n(35534),tn=n(31601),ti=n(46226),tr=n(41019);let to=e=>{let{interactionId:t,operation:n,instructions:i,template:r}=e,[o,a]=(0,S.useState)(null),l=(0,S.useCallback)((e,o,a)=>{(0,tr.ym)({feedback:o,tags:a,rating:e,interactionId:t,instructions:i,operation:n,template:r})},[t,i,n,r]),s=(0,S.useCallback)(e=>{a(e),(0,tr.bj)({rating:e,interactionId:t,operation:n,template:r,instructions:i})},[t,n,r,i]);return(0,j.jsx)(ti.sn,{rating:o||void 0,setRating:s,RatingButtons:ti.iX,feedbackTags:ta,trackFeedback:l})},ta=[{key:"wrong-language",label:(0,j.jsx)(R.cC,{id:"R2Ly6h"})},{key:"wrong-layout",label:(0,j.jsx)(R.cC,{id:"moXJSM"})},{key:"wrong-content",label:(0,j.jsx)(R.cC,{id:"AgLuGi"})},{key:"wrong-images",label:(0,j.jsx)(R.cC,{id:"IAt1qK"})},{key:"too-similar",label:(0,j.jsx)(R.cC,{id:"Np7sCV"})},{key:"too-different",label:(0,j.jsx)(R.cC,{id:"/wLn3u"})},{key:"instructions",label:(0,j.jsx)(R.cC,{id:"Tq32Jp"})},{key:"other",label:(0,j.jsx)(R.cC,{id:"/IX/7x"})}];var tl=n(98082);let ts=e=>{let{suggestions:t,cardId:n,isDark:i,editor:r,getPos:o,attrs:l}=e,{color:d,bg:c}=(0,eL.lv)(),u=(0,eL.et)(),{status:p,variants:h,selected:m,loadingMessage:g,interactionId:f,instructions:x,operation:v}=t,y=(0,s.TL)(),b=(0,S.useCallback)((e,t)=>{y((0,a.dx)({cardId:n,variantId:e})),(0,tl.tl)(r,n,t)},[y,n,r]),w=(0,tn.z$)(),C=(0,S.useCallback)(()=>{var e;null==w||w.track(tn.AA.AI_CARD_VARIATION_KEPT,{cardId:n,variantId:m,isOriginal:null===(e=h.find(e=>e.id===m))||void 0===e?void 0:e.isOriginal,interactionId:f,source:"button"}),y((0,a.Mq)({cardId:n}))},[y,n,m,w,h,f]),{editCard:k}=(0,tl.Cj)({editor:r,getPos:o,cardId:l.id}),A=(0,te.YO)(void 0,"editCard",tn.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD);(0,S.useCallback)(()=>{if(!A())return;let e=h.find(e=>e.isOriginal);if(!x||!e){console.error("No instructions or original to try again");return}b(e.id,e.card),null==w||w.track(tn.AA.AI_CARD_VARIATION_KEPT,{cardId:n,variantId:e.id,isOriginal:!0,interactionId:f,source:"retry"}),k({instructions:x,operation:v})},[A,w,n,k,x,f,v,b,h]);let I=(0,e6.ff)("trueblue.500","trueblue.100"),M=(0,e6.ff)("trueblue.50","gray.700"),P=(0,e6.ff)("red.100","red.700"),O=(0,e6.ff)("red.500","red.100");return(0,tt.Y)("unlimited_credits"),(0,j.jsx)(E.U,{contentEditable:!1,userSelect:"none",align:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",marginLeft:-3,pointerEvents:"auto",spacing:2,children:"loading"===p?(0,j.jsxs)(E.U,{borderWidth:"1px",...u,pointerEvents:"none",children:[(0,j.jsx)(T.G,{icon:e9.JyM}),(0,j.jsxs)(L.x,{children:[g||(0,j.jsx)(R.cC,{id:"RQqcwV"}),"..."]})]}):"error"===p?(0,j.jsxs)(E.U,{borderWidth:"1px",...u,_hover:{},bg:P,color:O,children:[(0,j.jsx)(T.G,{icon:_.e7M}),(0,j.jsx)(L.x,{children:(0,j.jsx)(R.cC,{id:"nwtY4N"})}),(0,j.jsx)(e_.h,{"aria-label":H.ag._({id:"yz7wBu"}),size:"xs",minW:4,minH:4,h:4,isRound:!0,variant:"ghost",onClick:C,icon:(0,j.jsx)(T.G,{icon:_.NBC}),colorScheme:i?"white":"blackAlpha"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(z.h,{spacing:"-1px",children:[h.map(e=>(0,j.jsx)(N.z,{...u,color:m===e.id?I:d,bg:m===e.id?M:c,variant:m===e.id?"plainSelected":"plain",onClick:()=>b(e.id,e.card),position:"relative",children:e.label},e.id)),(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"MuX+Gc"}),placement:"top",children:(0,j.jsx)(e_.h,{...u,icon:(0,j.jsx)(T.G,{icon:e9.LEp}),"aria-label":H.ag._({id:"MuX+Gc"}),onClick:C})})]}),f&&(0,j.jsx)(to,{interactionId:f,operation:null==v?void 0:v.key,template:null==v?void 0:v.template,instructions:x})]})})};var td=n(81540),tc=n(21829),tu=n(84663),tp=n(30631);let th=e=>{let{theme:t,editor:n,getPos:i,updateAttributes:r,input:o}=e,{getContextAndGenerate:a,isGenerating:l}=(0,tu.Xv)({theme:t,editor:n,getPos:i,input:o,randomTemplate:!0}),s=(0,te.YO)(()=>a(o.prompt),"generateCard",tn.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),d=(0,eL.et)(),c=(0,tt.Y)("unlimited_credits");return(0,j.jsx)(E.U,{contentEditable:!1,userSelect:"none",align:"center",position:"absolute",left:"50%",transform:"translateX(-50%)",marginLeft:-3,pointerEvents:"auto",children:l?(0,j.jsx)(I.xu,{px:4,children:(0,j.jsx)(td.$,{size:"xs",color:"purple.500"})}):(0,j.jsxs)(E.U,{spacing:2,children:[(0,j.jsxs)(z.h,{spacing:"-1px",children:[(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"K1Ro+T"}),placement:"top",children:(0,j.jsx)(e_.h,{...d,icon:(0,j.jsx)(T.G,{icon:e9.acZ}),"aria-label":H.ag._({id:"K1Ro+T"}),onClick:()=>r({layoutTemplateColumns:null,generatorInput:{...tp.d,prompt:o.prompt}})})}),(0,j.jsx)(ee.kH,{label:(0,j.jsxs)(Q.g,{spacing:.5,pb:1,children:[(0,j.jsx)(L.x,{children:(0,j.jsx)(R.cC,{id:"KDw4GX"})}),!c&&(0,j.jsx)(tc.J,{type:"generateCard",ml:0})]}),placement:"top",children:(0,j.jsx)(e_.h,{...d,icon:(0,j.jsx)(T.G,{icon:e9.jHE}),onClick:s,"aria-label":H.ag._({id:"KDw4GX"})})}),(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"fyn0X5"}),placement:"top",children:(0,j.jsx)(e_.h,{...d,icon:(0,j.jsx)(T.G,{icon:e9.LEp}),"aria-label":H.ag._({id:"fyn0X5"}),onClick:()=>r({generatorInput:null})})})]}),o.interactionId&&(0,j.jsx)(to,{interactionId:o.interactionId,operation:"generate-card",template:o.template,instructions:o.prompt})]})})};var tm=n(73235),tg=n(28165),tf=n(23047),tx=n(51131),tv=n(80197),ty=n(87103);function tb(){let e=(0,tm._)(["\n  0% {\n    margin-inline: 0;\n  }\n  100% {\n    margin-inline: var(--nested-card-margin);\n  }\n"]);return tb=function(){return e},e}let tw=(0,tg.F4)(tb()),tC=e=>{let{attrs:t,isFullBleed:n,displayFullBleed:i,isNested:r,isPresentMode:o,isEditable:a,isFocused:l,isDark:s,isLetterboxed:d,showPresentBackdrop:c,theme:u,children:p}=e,{id:h,container:m}=t,g=(0,tv.BA)(u,m),f=i?tf.lh:tf.Fx,x=o&&!r,v=(0,tx.l)(u,m.background?g:void 0),y=n?{width:r||d?"var(--card-width)":"100%"}:{zIndex:r?1:void 0,width:"var(--card-width)"},b=x?{minW:c||d?"auto":"100%",minH:"var(--card-min-height)",my:"auto"}:{minW:"0%",minH:"var(--card-min-height)"},w=ty.cx?0:k.nY;return(0,j.jsxs)(es.k,{className:(0,M.cx)(k.ar),"data-card-body":h,"data-selection-ring":!0,"data-guider-highlight":"card-body","data-letterboxed":d?"true":void 0,"data-content-reference":!0,"data-hide-comments":o&&!c,transitionProperty:"min-height, min-width, width, font-size, padding",transitionDuration:"".concat(w,"ms"),fontSize:"var(--font-size)",animation:r?"".concat(tw," ").concat(w,"ms ease-out forwards"):void 0,position:"relative",...y,...b,maxW:"var(--card-max-width)",css:{"--grid-outline-color":s?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)",...v,"--card-border-radius":i?0:v["--card-border-radius"]},justify:"center",borderRadius:"var(--card-border-radius)",pl:n&&!r?"var(--doc-padding-left)":void 0,pr:n&&!r?"var(--doc-padding-right)":void 0,_hover:a&&i&&!l?{"> .card-body-background":{outline:"2px solid var(--grid-outline-color)"}}:void 0,outline:d?"max(50vw, 50vh) solid black":void 0,children:[(0,j.jsx)(I.xu,{position:"absolute",inset:"0",sx:f,className:"card-body-background",borderRadius:"inherit",contentEditable:!1,zIndex:o?-1:void 0,outline:l?"2px solid var(--chakra-ring-color)":void 0,outlineOffset:n&&!o?"-2px":void 0,border:r&&"0em"===v["--card-border-width"]?"1px solid var(--neutral-border-color)":void 0,"data-export-master":!!i||void 0}),(0,j.jsx)(ee.Wk,{isDark:s,children:p})]})};var tk=n(39198),tj=n(19732),tS=n(68498),tA=n(38799),tI=n(84082),tz=n(69251),tL=n(77834),tE=n(1283);let tN=(0,S.memo)(function(e){let{editor:t,appendCard:n}=e,i={bgColor:(0,e6.ff)("gray.50","blackAlpha.900")};return(0,j.jsx)(eb.K,{p:2,bg:i.bgColor,children:(0,tI.V)().map(e=>{let{subcategory:i,items:r}=e,o=r.filter(e=>!(0,tL.pP)(t,e,!1));if(0!==o.length)return(0,j.jsxs)(eb.K,{spacing:1,children:[(0,j.jsx)(ee.NZ,{flex:"1",textAlign:"left",children:i}),(0,j.jsx)(tz.r,{gap:"1.5",gridTemplateColumns:"1fr 1fr 1fr",children:o.map(e=>(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"BPbkIF"}),placement:"top",children:(0,j.jsx)(I.xu,{cursor:"pointer",onClick:()=>{n(e.key)},borderRadius:"xl",_hover:{boxShadow:"lg"},transitionProperty:"box-shadow",transitionDuration:"normal",children:(0,j.jsx)(tE.Nb,{item:e})})},e.key))})]},i)})})});var tM=n(46577);let t_=(0,S.memo)(function(e){let{editor:t,getPos:n,display:i,isNested:r}=e,o=(0,tA.TZ)(),a=(0,et.ye)("aiRewrite")&&!o,l=(0,S.useCallback)(e=>{let i=(0,tI.A)(),r=n(),o=t.view.state.doc.nodeAt(r);if(!o){console.error("[CardDivider] Cannot append card. Node unknown");return}let a=r+o.nodeSize,l=(0,tj.e)().blankCard;e&&(l=(0,tj.e)()[e]);let s="aiCardAfter"===e?tn.fe.CARD_DIVIDER_AI:e?tn.fe.CARD_DIVIDER_DROPDOWN:tn.fe.CARD_DIVIDER,d="aiCardAfter"===e?{key:"aiCardAfter",nodeName:"card"}:e?i[e]:i.blankCard;(0,tk.ZT)(d,s),t.chain().insertContentAt(a,(0,tM.Zs)(l)).command(e=>{let{tr:t}=e;return t.setMeta(tS.k,!0),!0}).focus().selectInsertedNode().run()},[t,n]),s=(0,e6.ff)("gray.100","gray.700"),d=(0,et.ye)("addCard2");return(0,j.jsx)(eO.v,{isLazy:!0,children:e=>{let{isOpen:n}=e;return(0,j.jsx)(es.k,{contentEditable:!1,suppressContentEditableWarning:!0,className:"card-divider","data-is-nested-card":String(r),position:"absolute",zIndex:2,bottom:-4,w:"100%",justify:"center",align:"center",display:i,opacity:n?1:0,transitionProperty:"opacity",transitionDuration:"normal","data-print-hidden":!0,"data-id":"card-divider",children:(0,j.jsxs)(z.h,{size:"sm",isAttached:!0,"data-guider-highlight":"add-card-button",className:"card-divider-button-group",variant:"plain",shadow:"md",borderRadius:"md",opacity:"1",transitionProperty:"opacity",transitionDuration:"normal",children:[(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"7iE+3N"}),children:(0,j.jsx)(e_.h,{className:"insert-card-button",variant:"plain","aria-label":H.ag._({id:"g+7nXG"}),icon:(0,j.jsx)(T.G,{icon:e9.r8p}),onClick:()=>l(),onMouseDown:ez.Wg,size:"sm",shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:s})}),a&&(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"kLZLXX"}),children:(0,j.jsx)(e_.h,{borderLeft:"none",className:"insert-ai-card-button",variant:"plain","aria-label":H.ag._({id:"g+7nXG"}),icon:(0,j.jsx)(E.U,{spacing:0,children:(0,j.jsx)(T.G,{icon:e9.JyM})}),onClick:()=>{if(d){l("aiCardAfter");return}eA.pw.emit("queueDesignPartnerTask",{message:H.ag._({id:"JoMQgx",values:{placeholder:""}}),submit:!1})},onMouseDown:ez.Wg,size:"sm",shadow:"none",borderRadius:"md",minW:12,transitionProperty:"none",borderColor:s,borderRightRadius:"none"})}),(0,j.jsxs)(ef.J,{placement:"end",isLazy:!0,closeOnBlur:!0,closeOnEsc:!0,children:[(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"UgOs5x"}),shouldWrapChildren:!0,children:(0,j.jsx)(ex.x,{children:(0,j.jsx)(e_.h,{"aria-label":"Add from template",size:"sm",shadow:"none",borderColor:s,icon:(0,j.jsx)(ep.v,{}),fontSize:"lg",fontWeight:"500",borderRadius:"md",borderLeftRadius:"none",borderLeft:"none","data-guider-highlight":"add-card-template-button",transitionProperty:"none",onMouseDown:ez.Wg})})}),(0,j.jsx)(ev.h,{children:(0,j.jsx)(ey.y,{shadow:"xl",maxH:"90vh",overflowY:"scroll",w:"400px",p:"0",children:(0,j.jsx)(tN,{editor:t,appendCard:l})})})]})]})})}})});var tT=n(1088),tR=n(50645);let tH=()=>(0,j.jsx)(I.xu,{position:"absolute",inset:"0",pointerEvents:"none",overflow:"hidden",display:{base:"none",lg:"block"},children:(0,j.jsxs)(I.xu,{position:"absolute",top:"var(--card-min-height)",left:"0",w:"100%",h:"1px",borderBottom:"2px dashed",borderBottomColor:"var(--body-color)",opacity:"0.15",children:[(0,j.jsx)(tP,{left:0}),(0,j.jsx)(tP,{right:0})]})}),tP=e=>(0,j.jsx)(ee.kH,{placement:"top",w:"250px",label:(0,j.jsx)(R.cC,{id:"0Gqs/k",components:{0:(0,j.jsx)(L.x,{}),1:(0,j.jsx)(L.x,{color:"gray.500"})}}),children:(0,j.jsx)(I.xu,{position:"absolute",w:"var(--card-inner-padding-x)",h:"".concat(20,"px"),top:"-".concat(10,"px"),pointerEvents:"auto",cursor:"help",...e})});var tO=n(67109),tD=n(82554),tW=n(74105),tF=n(92768),tB=n(87651),tG=n(16556),tU=n(94818),tV=n(96023),tq=n(40346),tK=n(62204),tY=n(67688),tX=n(40382),t$=n(20437),tZ=n(75009),tQ=n(82655),tJ=n(71098),t0=n(89337);let t1=e=>{let{isDark:t,selectedTemplate:n,setSelectedTemplate:i}=e,r=(0,t0.M)(),o=t?"invert(.8) brightness(1.2)":"invert(0)",a=t?"invert(.8) brightness(2)":"invert(0)";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(L.x,{color:"var(--body-color-muted)",fontSize:"sm",fontFamily:"Inter",fontWeight:"normal",children:(0,j.jsx)(R.cC,{id:"hQDrYd"})}),(0,j.jsxs)(t$.M,{spacing:2,columns:[2,3,5,r.length+1],children:[(0,j.jsx)(tJ.L,{isDark:t,templateIcon:(0,j.jsx)(T.G,{icon:tQ.Y$l,fixedWidth:!0,size:"lg"}),label:(0,j.jsx)(R.cC,{id:"wtGmzA"}),tooltip:H.ag._({id:"ERTBmO"}),isSelected:null===n,onClick:()=>i(null)}),r.map(e=>{let{key:r,image:l,name:s}=e,d=r===n;return(0,j.jsx)(tJ.L,{isDark:t,templateIcon:(0,j.jsx)(tZ.E,{src:l.src,filter:d?a:o,bg:"white"}),tooltip:s,isSelected:d,onClick:()=>i(r)},r)})]})]})},t2=e=>{let{theme:t,handle:n,editor:i,getPos:r,input:o,displayFullBleed:a,isFocused:l}=e,{isGenerating:s,getContextAndGenerate:d,updateInput:u,locale:p}=(0,tu.Xv)({theme:t,editor:i,getPos:r,input:o}),h=(0,tX.Kt)(u,500),{prompt:m,template:g}=o,[f,x]=(0,S.useState)(m),v=(0,te.YO)(()=>{u({prompt:f}),d(f)},"generateCard",tn.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),y=(0,e6.ff)(!1,!0),b=(0,S.useRef)(null),{suggestions:w,generateSuggestionsStatus:C}=(0,tu.vO)(l);if((0,S.useEffect)(()=>{l&&b.current&&setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.focus()})},[l]),s)return(0,j.jsxs)(es.k,{position:"relative",maxW:"100%",w:"var(--card-width)",minH:32,contentEditable:"false",justify:"center",direction:"column",p:"var(--card-inner-padding)",children:[n,(0,j.jsxs)(eb.K,{zIndex:1,w:"100%",children:[(0,j.jsx)(tO.O,{height:"3em",w:"33%",mb:4}),(0,j.jsx)(tO.O,{height:"1.5em"}),(0,j.jsx)(tO.O,{height:"1.5em"}),(0,j.jsx)(tO.O,{height:"1.5em"}),(0,j.jsx)(tO.O,{height:"1.5em",w:"75%"})]})]});let k=y?tV.rO:tV.ZQ;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.ms,{style:{position:"absolute",opacity:0}}),(0,j.jsxs)(es.k,{contentEditable:"false",w:"var(--card-width)",maxW:"100%",minH:32,position:"relative",borderRadius:a?"none":"var(--card-border-radius)",p:"var(--card-inner-padding)",direction:"column",justify:"center",m:"-1px",fontFamily:"Inter, sans-serif",onMouseDown:e=>{!(e.target instanceof HTMLElement&&e.target.closest(".drag-handle"))&&(e.preventDefault(),b.current&&b.current===document.activeElement?b.current.blur():i.view.hasFocus()&&i.commands.blur())},children:[(0,j.jsx)(I.xu,{...k,bgSize:"cover",bgPosition:"center center",borderRadius:"inherit",pos:"absolute",inset:0,pointerEvents:"none",w:a?"var(--editor-width)":void 0,left:a?"calc(50% - var(--doc-padding-left, 0px) / 2 + var(--doc-padding-right, 0px) / 2)":void 0,transform:a?"translateX(-50%)":void 0}),n,(0,j.jsx)(I.xu,{position:"absolute",zIndex:0,pointerEvents:"none",inset:0,bgImage:"url(".concat(tY.Z.src,")"),bgRepeat:"repeat",bgPosition:"center center",sx:{animation:"".concat(tV.Mb," 180s linear infinite"),maskImage:"linear-gradient(to left, rgba(0,0,0,.75), transparent, rgba(0,0,0,.75))",maskRepeat:"repeat",maskSize:"140px"},opacity:y?.2:1}),(0,j.jsx)(e_.h,{position:"absolute",top:2,right:2,variant:"ghost",colorScheme:y?"gray":"blackAlpha",isRound:!0,size:"sm","aria-label":H.ag._({id:"DIQZR1"}),icon:(0,j.jsx)(T.G,{fixedWidth:!0,icon:_.NBC}),onClick:()=>{h.cancel(),i.commands.deleteCard(r())}}),(0,j.jsxs)(eb.K,{spacing:4,pos:"relative",zIndex:1,maxWidth:"100%",children:[(0,j.jsxs)(E.U,{justify:"end",flexWrap:"wrap",children:[(0,j.jsx)(L.x,{fontFamily:"p22-mackinac-pro, sans-serif",fontWeight:700,fontSize:"2xl",color:y?"white":"gray.800",children:(0,j.jsx)(R.cC,{id:"8e1wQN"})}),(0,j.jsx)(tD.C,{colorScheme:"green",children:"Beta"}),(0,j.jsx)(J.L,{}),(0,j.jsx)(tK.r,{modalId:"ai-credits-modal-generate-card",variant:"ghost",isDark:y,justify:"flex-end",segmentEvent:tn.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD}),(0,j.jsx)(tq.k,{locale:p,setLocale:e=>u({settings:{locale:e}}),buttonProps:{variant:"plain",size:"sm",textAlign:"left",w:["100%","100%","auto"]}})]}),(0,j.jsxs)(tW.B,{color:y?"white":"gray.800",bg:y?"blackAlpha.900":"white",boxShadow:"sm",border:"none",borderRadius:"md",display:"flex",alignItems:"start",gap:"0",onMouseDown:ez.UW,_focusWithin:{boxShadow:"var(--chakra-shadows-sm), var(--chakra-shadows-outline)"},transitionProperty:"box-shadow",transitionDuration:"normal",children:[(0,j.jsx)(tU.o,{ref:b,"data-in-editor-focus":!0,fontWeight:"500",border:"none",fontSize:"lg",initialHeight:"4rem",placeholder:H.ag._({id:"BiLwIi"}),value:f,onChange:e=>{x(e.target.value),h({prompt:e.target.value})},onKeyDown:e=>{e.shiftKey||("Enter"===e.key?v():"ArrowDown"!==e.key||f?"ArrowUp"!==e.key||f||i.chain().focus(r()).selectInsideNextCard(!1).run():i.chain().focus(r()).selectInsideNextCard(!0).run())},_focus:{boxShadow:"none"},_focusVisible:{boxShadow:"none"},p:5}),(0,j.jsx)(tF.xW,{h:"100%",border:"none",color:y?"white":"gray.800",bg:y?"blackAlpha.900":"white",p:3,pl:0,alignItems:"end",display:["none","none","flex"],children:(0,j.jsxs)(N.z,{variant:"solid","aria-label":"Generate card",isDisabled:!f,onClick:v,onMouseDown:ez.br,children:[(0,j.jsx)(tc.J,{type:"generateCard",ml:0,mr:2}),(0,j.jsx)(T.G,{icon:e9.XCy})]})})]}),(0,j.jsxs)(N.z,{variant:"solid","aria-label":"Generate card",isDisabled:!f,onClick:v,onMouseDown:ez.br,display:["flex","flex","none"],leftIcon:(0,j.jsx)(T.G,{icon:e9.XCy}),children:[(0,j.jsx)(R.cC,{id:"ziAjHi"}),(0,j.jsx)(tc.J,{type:"generateCard",ml:0,mr:2})]}),(0,j.jsx)(tB.U,{in:!f&&(w.length>0||"generating"===C),children:(0,j.jsxs)(E.U,{direction:["column","row"],spacing:2,wrap:"wrap",children:[null==w?void 0:w.map((e,t)=>(0,j.jsx)(tG.Vp,{as:N.z,variant:"subtle",colorScheme:y?"whiteAlpha":"blackAlpha",color:y?"whiteAlpha.700":"blackAlpha.700",p:1,px:2,minH:"auto",h:"auto",onClick:()=>{x(e),u({prompt:e})},children:(0,j.jsx)(tG.Sn,{children:e})},t)),"generating"===C&&(0,j.jsxs)(tG.Vp,{variant:"subtle",colorScheme:y?"whiteAlpha":"blackAlpha",color:y?"whiteAlpha.500":"blackAlpha.500",children:[(0,j.jsx)(tG.AD,{boxSize:"12px",as:td.$}),(0,j.jsx)(tG.Sn,{children:(0,j.jsx)(R.cC,{id:"AUV+TY"})})]})]})}),(0,j.jsx)(t1,{isDark:y,selectedTemplate:g,setSelectedTemplate:e=>u({template:e})})]})]})]})},t4=e=>{let{displayLayout:t,children:n,isExpandableSelected:i,isFocused:r,displayFullBleed:o,isPresentMode:a,isEditable:l,isNested:s,attrs:d,hasLayoutItem:c,onDoubleClick:u,cardDimensions:p,theme:h,handle:m,editor:g,getPos:f,updateAttributes:x}=e;if(d.generatorInput&&"done"!==d.generatorInput.status&&l)return(0,j.jsx)(t2,{theme:h,handle:m,editor:g,getPos:f,input:d.generatorInput,updateAttributes:x,displayFullBleed:o,isFocused:r});let y=(0,v.$U)(t),b=(0,v.jS)(t),w=d.layoutTemplateColumns,C=(0,tT.yT)(h)&&a&&!s&&"right"!==t&&"top"!==t&&"behind"!==t;return(0,j.jsxs)(I.xu,{className:(0,M.cx)(e3.CJ,i&&"expandable-selected"),onDoubleClick:u,w:"var(--card-width)",maxW:"100%",position:"relative",spellCheck:r,cursor:"auto",color:"var(--body-color)",sx:{["> .".concat(k.pL)]:{padding:c?void 0:"var(--card-inner-padding)",counterReset:"footnote",...C&&t3,'> [data-node-view-content-inner="card"]':{...c?{display:"grid",alignItems:"stretch",justifyContent:"stretch",minH:"100%",transitionDuration:"".concat(k.nY,"ms"),transitionProperty:"grid-template-columns, min-height",...y.grid,...w&&y.allowResizing&&{gridTemplateColumns:w},...b}:{display:"block",mx:"auto",maxW:"var(--max-content-width)",width:"100%",boxSizing:"border-box",minW:0},"> .node-cardLayoutItem":{"> [data-node-view-wrapper]":{"> .card-layout-cell-bg":{"> [data-node-view-content]":{"> [data-node-view-content-inner]":{maxWidth:"var(--max-content-width)",margin:"auto"},padding:"var(--card-inner-padding)"}}}}}}},children:[m,n,r&&p.aspectRatio&&!s&&(0,j.jsx)(tH,{}),C&&(0,j.jsx)(tR.LN,{})]})},t3={".first-block-in-card":{marginRight:"\n        max(0px,\n          calc(\n            var(--logo-push-x) - \n            max(\n              calc((var(--card-width) - var(--max-content-width)) / 2),\n              var(--card-inner-padding-x)\n            )\n          )\n        )\n      "}};var t5=n(29342),t7=n(83693),t8=n(43988);let t6=e=>{let{hasNotes:t,isReadonly:n}=e;return t?n?(0,j.jsx)(R.cC,{id:"nqt+Fj"}):(0,j.jsx)(R.cC,{id:"+kQy/G"}):n?null:(0,j.jsx)(R.cC,{id:"GquPwe"})},t9=e=>{let{cardId:t,decorations:n,editor:i,getPos:r,hasNonEmptyCardNotes:o,isReadonly:a,...l}=e,d=(0,S.useCallback)(()=>{let e=r();if(!a){let{hasCardNotesNode:t}=(0,C.$D)(n);t||(0,t8.Fi)(i,e)}let o=(0,s.bh)(),l=(0,t7.AD)(o.getState());t5.T.emit("toggle",{clickedCardId:t,activeNotesCardId:l}),(0,t8.vS)(i,e)||i.commands.selectInsideNodeAtPos(e)},[t,n,a,i,r]),{color:c,bg:u,hoverColor:p,hoverBg:h,borderColor:m}=(0,eL.lv)();return(0,j.jsx)(ee.kH,{label:(0,j.jsx)(t6,{hasNotes:o,isReadonly:a}),placement:"top",children:(0,j.jsx)(N.z,{height:e3.fD,fontWeight:"900",alignItems:"center",fontFamily:"Inter, sans-serif",display:"flex",backdropFilter:"blur(8px)",borderRadius:"sm",borderColor:m,color:c,boxShadow:"sm",cursor:"pointer",pointerEvents:"auto",fontSize:"14px",bg:u,minW:"auto",px:2,_hover:{color:p,background:h},onMouseDown:ez.br,onClick:d,...l,children:(0,j.jsx)(I.xu,{as:"span",display:"inline-flex",children:(0,j.jsx)(T.G,{icon:o?e9.s0r:_.s0r})})})})},ne=e=>{let{attrs:t,children:n,presentVariant:i,isPresentMode:r,isDark:o,isNested:a,isThumbnail:l,css:d}=e,{background:c,id:u}=t,p=(0,s.CG)(A.P7),h=a||l?void 0:(0,eY.wh)(c,o);return(0,j.jsx)(es.k,{onDragOver:ez.Gb,top:0,left:0,position:"relative",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",cursor:"default","data-animate-value":i,fontSize:"var(--editor-font-size, 1rem)",py:"var(--card-outer-padding-y)",pl:"var(--card-outer-padding-left)",pr:"var(--card-outer-padding-right)","data-card-id":u,"data-card-scroll-element":!0,overflow:r&&!a?"hidden auto":void 0,sx:{scrollbarGutter:!r||a||ty.cx?void 0:"stable"},className:(0,M.cx)(k.vD,"card-expanded",r&&k.aY,r&&"card-present-mode card-present-mode--".concat(i)),transitionProperty:"transform, padding",transitionDuration:"".concat(p?k.id:0,"ms"),...h,css:d,children:n})};ne.displayName="CardContainer";var nt=n(26073),nn=n(92035);let ni=(0,j.jsx)(T.G,{icon:_.V9$}),nr=(0,S.memo)(function(e){let{cardId:t,getPos:n,editor:i,isNested:o,isCollapsed:a,isPresentMode:l,isEditable:s,isDark:c,top:u}=e,p=(0,tn.z$)(),h=(0,S.useCallback)(()=>{if(l&&!s)i.commands.spotlightCollapseCard(n());else{(0,x.Nn)(t,!0);let{selection:e}=i.state,o=(0,r.Kk)(d.KH)(e);o&&o.node.attrs.id===t&&i.commands.selectNodeAtPos(n())}null==p||p.track(tn.AA.CARD_COLLAPSED,{method:"collapse_button",is_present_mode:!1})},[i,n,p,t,s,l]),m=(0,nt.jj)(),g=(0,S.useMemo)(()=>(0,j.jsx)(ee.kH,{label:(0,j.jsx)(R.cC,{id:"kBUgVh"}),placement:"top",portalProps:{containerRef:m},children:(0,j.jsx)(e_.h,{variant:"ghost",size:"sm",pl:(0,nn.s2)()?6:0,pr:(0,nn.s2)()?2:0,onClick:h,onMouseDown:ez.br,colorScheme:"gray",isRound:!0,"aria-label":H.ag._({id:"H86f9p"}),"data-collapse-card-button":!0,icon:ni,color:c?"gray.300":"gray.600"})}),[h,m,c]),f=(0,S.useMemo)(()=>(0,j.jsx)(N.z,{size:"sm",variant:"ghost",position:"absolute",zIndex:2,bottom:[1,3],right:[2,4],rightIcon:(0,j.jsx)(T.G,{icon:_.mTx}),colorScheme:"gray","data-collapse-card-button":!0,onMouseDown:ez.br,onClick:h,fontWeight:"normal",color:c?"gray.300":"gray.600",children:(0,j.jsx)(R.cC,{id:"H86f9p"})}),[h,c]);return(0,j.jsxs)(es.k,{contentEditable:!1,onClick:ez.UW,className:"manage-card-controls","data-print-hidden":!0,transitionProperty:"common",transitionDuration:"normal",display:"inherit",fontFamily:"Inter, sans-serif",sx:{"[data-collapse-card-button]":{visibility:o&&!a?"visible":"hidden"}},children:[(0,j.jsx)(E.U,{spacing:1,position:"absolute",top:u||[1,3],right:[2,4],zIndex:2,children:g}),o&&!a&&f]})});var no=n(3194),na=n(32817),nl=n(18960);let ns=()=>{let e=(0,em.p)(),[t,n]=(0,na.I)(nl.H.hasSeenPresentModeDblClickNotification,!1),i=(0,s.CG)(A.Tf);return{onDoubleClick:(0,S.useCallback)(()=>{if(!i||t)return;let r=new Date,o=new Date("2024-08-15");r.getTime()>o.getTime()||(n(!0),e({title:(0,j.jsx)(R.cC,{id:"xtaPrg"}),status:"info",position:"bottom",duration:3e3,isClosable:!0}))},[i,t,n,e])}},nd=e=>{let{getPos:t,editor:n,decorations:i}=e,r=(0,Y.v)(e),{isPresentMode:o,isNested:l,isFocused:d,isEditable:u,isMobileDevice:p,cardAccentBackgroundMaskEffect:h,cardId:m,isFullBleed:g,hasNonEmptyCardNotes:f}=r,x=(0,no.HQ)(r),v=(0,et.ye)("realUserMetrics");(0,en.MI)(v,m,r.presentVariant,r.prevPresentVariant);let y=(0,eo.WE)(i),b=(0,el.EL)(i),w=(0,s.CG)((0,e4.OU)(m,"styling")),C=(0,s.CG)((0,e4.OU)(m,"editWithAI")),S=y||b||d,A=u&&(S||C||w),I=(0,et.ye)("cardNotes")&&!l&&!n.isThumbnail&&!n.isStatic&&!p&&!n.shouldUsePublishedVersion&&!o&&(f||u&&S),z=(0,s.CG)((0,a.l_)(m)),{onDoubleClick:N}=ns();return(0,j.jsx)(U.lO,{as:"div",style:{minHeight:o&&!l?"100vh":0},hideComments:!0,...e,children:(0,j.jsxs)(ne,{...r,css:x,children:[(0,j.jsx)(tC,{...r,children:(0,j.jsxs)(t4,{...r,...e,onDoubleClick:N,handle:(0,j.jsx)(V.A,{...e,"data-testid":"card-drag-handle",zIndex:ea.S.cardButtons,left:2,top:3,width:"18px",height:e3.fD,label:(0,j.jsxs)(Q.g,{spacing:0,children:[(0,j.jsx)(L.x,{color:"gray.400",children:(0,j.jsx)(R.cC,{id:"63lY3K",components:{0:(0,j.jsx)(L.x,{color:"white",as:"span"})}})}),(0,j.jsx)(L.x,{color:"gray.400",children:(0,j.jsx)(R.cC,{id:"COhrZ5",components:{0:(0,j.jsx)(L.x,{color:"white",as:"span"})}})})]})}),children:[(0,j.jsx)(eu,{...e}),(0,j.jsxs)(E.U,{pos:"absolute",left:8,right:2.5,zIndex:ea.S.cardButtons,top:3,align:"start",contentEditable:!1,pointerEvents:"none",spacing:1.5,children:[A&&(0,j.jsx)(e7,{editor:n,getPos:t,...r,accentBackgroundMaskEffect:h}),A&&(0,j.jsx)(e8.y,{...e,...r}),(0,j.jsx)(J.L,{}),u?z?(0,j.jsx)(ts,{...e,...r,isDark:r.isDark,isInteracting:S,suggestions:z}):r.attrs.generatorInput?(0,j.jsx)(th,{...e,...r,isDark:r.isDark,input:r.attrs.generatorInput,isInteracting:S}):null:null,(0,j.jsx)(J.L,{}),I&&(0,j.jsx)(t9,{editor:n,cardId:m,decorations:i,getPos:t,hasNonEmptyCardNotes:f,isReadonly:!u})]}),(0,j.jsx)(c.ms,{className:(0,M.cx)(k.pL,d&&"is-focused",l&&"is-nested",(o||g)&&"is-full-width",g&&!l&&!o&&"is-borderless",r.isDark&&"is-dark")}),l&&(0,j.jsx)(nr,{top:[1,3],...r,...e})]})}),(0,j.jsx)(er.a,{children:(0,j.jsx)(ee.Wk,{isDark:(0,ei.wj)(r.theme),children:(0,j.jsx)(t_,{display:!u||l||o?"none":"flex",editor:n,getPos:t,isNested:l})})})]})})},nc=e=>{let{node:t}=e,{id:n}=t.attrs;return(0,s.CG)((0,A.yH)(n))?(0,j.jsx)(X,{...e}):(0,j.jsx)(nd,{...e})};var nu=n(23186);(()=>{if(w)return;let e=y.Q.valid;y.Q.valid=t=>{if(!(0,b.u)(t.doc).cardLayoutsEnabled)return e(t);let n=e(t);return!(n&&(t.nodeAfter&&(0,d.pv)(t.nodeAfter)||t.nodeBefore&&(0,d.pv)(t.nodeBefore)))&&n},w=!0})();let np=e=>{if((0,p.bR)(e)||1===e.childCount&&(0,p.bR)(e.firstChild))return!0;if("blank"!==e.attrs.layout)return!1;let t=(0,d.c6)(e);if(0===t.length)return!1;let n=t.find(e=>"body"===e.attrs.itemId);return!!n&&1===n.childCount&&(0,p.bR)(n.firstChild)},nh=e=>{let{newNode:t,newDecorations:n,oldNode:i,oldDecorations:r,updateProps:o}=e,a=JSON.stringify(t.attrs)!==JSON.stringify(i.attrs),l=(0,f.I1)(r,n),s=np(t)!==np(i);return(a||l||s)&&(console.debug("[cardUpdateFn] Card ".concat(t.attrs.id," updateProps will be called:"),{oldDecorations:r,newDecorations:n,decorationsChanged:l}),o()),!0},nm=r.NB.create({name:k.W4,content:"(block | cardBlock)+ | cardLayoutItemGroup{1,2} cardNotes?",group:"cardBlock",defining:!1,isolating:!0,selectable:!1,draggable:!0,priority:m.a.Card,containerHandle:!0,imageKeyPath:"background.image",expandable:!0,addNodeView(){return(0,c.fW)(nc,{update:nh,ignoreMutation:e=>{let{mutation:t}=e,n=this.editor.state.selection,i=t.target instanceof HTMLElement?t.target:t.target.parentElement,r="selection"!==t.type&&ng(i),a="selection"===t.type&&n instanceof o.qv&&(0,g.fP)(n.node);return!!r||!!a}})},addProseMirrorPlugins(){return[(0,C.xL)(this.editor)]},addOptions:()=>({isStatic:!1}),addAttributes:()=>({id:{},previewContent:{default:null},background:{default:u.jg,...(0,p.sw)("background")},container:{default:{},...(0,p.sw)("container")},cardSize:{default:"default"},layout:{default:"blank",parseHTML:e=>e.getAttribute("image-layout")||e.getAttribute("layout")||"blank"},layoutTemplateColumns:{default:null},verticalAlign:{default:null},generatorInput:{default:null,...(0,p.sw)("generatorInput")}}),addExtensions(){return[tM.pK.configure({callback:(e,t,n)=>{0!==t.length&&t.forEach(e=>{let{val:t,pos:n}=e;console.debug("[Card.UniqueCardId] New card id(".concat(t,") created. Will be created in postgres through content service.")),(0,x.Ay)(t)})},types:[this.name]})]},addCommands:()=>({}),parseHTML(){return[{tag:"div[class=gamma-card]"},{tag:"section"},{tag:"card[bookmark]",getAttrs:(0,h.xF)(this.storage),getContent:(0,h.eV)(this.storage)}]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,r.P1)(t,{class:"gamma-card"}),0]},addStorage:h.gk,renderHTMLforAI(e){let{node:t}=e,n=(0,x.HD)(t.attrs.id),r=(0,a.MU)((0,s.bh)().getState());if(!1===n||r)return["section",{"image-layout":t.attrs.layout},0];let o=(0,h.ml)(this.storage,t),d=(0,i.getCardTitle)(t.toJSON()),c=(0,v.Ap)(t);return["card",{bookmark:o,title:d,accentPosition:t.attrs.layout,accentImage:(null==c?void 0:c.image)?(0,l.K)(c.image):void 0}]}}),ng=e=>{var t;return(null==e?void 0:e.parentElement)&&(e.classList.contains(k.vD)||(null===(t=e.parentElement.closest(".".concat(k.pL,", .").concat(k.vD)))||void 0===t?void 0:t.classList.contains(k.vD)))}},81047:function(e,t,n){"use strict";n.d(t,{Gq:function(){return u},Yh:function(){return c},lo:function(){return g},pt:function(){return f},xn:function(){return p}});var i=n(37243),r=n(3027),o=n(12971),a=n(98775),l=n(22156),s=n(43988),d=n(54317);let c=(e,t,n)=>{let i=t.doc.resolve(e),o=t.doc.nodeAt(e),l=e+i.nodeAfter.nodeSize,c=t.doc.resolve(l),u=t.doc.nodeAt(l);if(!u||!(0,d.KH)(u))return!1;let h=o&&(0,s.Qp)(o),f=(0,s.Qp)(u),x=null;f&&(x=h?g(t.doc,i.pos,!0):o?i.pos+o.nodeSize-1:null);let v=p(t,l);if(!v)return!1;t.delete(l,l+u.nodeSize);let y=m(t,e,!0);if(x&&f){let e=(0,s.cM)(c);if(e){let n=h?e.node.content:e.node;t.insert(x,n),t.setMeta("cardNotesHandled",!0)}}t.insert(y,v.node.content);let b={type:"merge-cards",contentPos:v.pos,insertPos:y};if(t.setMeta("annotationEvent",b),n.selection instanceof r.Q){let e=(0,a.E)(t.doc.resolve(y));e&&t.setSelection(e)}return!0},u=(e,t)=>{let n=t.doc.resolve(e);if(!n.nodeBefore)return!1;let i=e-n.nodeBefore.nodeSize,r=t.doc.nodeAt(i);if(!r||!(0,d.KH)(r))return!1;let o=(0,s.Qp)(r),l=n.nodeAfter&&(0,s.Qp)(n.nodeAfter),c=null;l&&(c=o?g(t.doc,i,!0):i+r.nodeSize-1);let u=p(t,e);if(!u)return!1;t.delete(e,e+n.nodeAfter.nodeSize);let h=m(t,i,!0);if(c&&l){let e=(0,s.cM)(n);if(e){let n=o?e.node.content:e.node;t.insert(c,n),t.setMeta("cardNotesHandled",!0)}}t.insert(h,u.node.content);let f=(0,a.E)(t.doc.resolve(h));f&&t.setSelection(f);let x={type:"merge-cards",contentPos:u.pos,insertPos:h};return t.setMeta("annotationEvent",x),!0},p=(e,t)=>{let n=(0,l.wz)(e,t);return 0===Object.entries(n).length?{node:e.doc.nodeAt(t),pos:t}:n.body||null},h=e=>{let t=(0,o.Ru)(e,e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId||"card"===e.type.name);return 0===t.length?null:t[0]},m=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=(0,l.wz)(e,t),r=e.doc.resolve(t);if(0===Object.entries(i).length)return n?r.doc.resolve(r.start(r.depth+1)).end():t+1;if(!i.body)throw Error("Could not find card body at cardPos=".concat(t));let o=e.doc.resolve(i.body.pos);return n?o.doc.resolve(o.start(o.depth+1)).end():o.pos+1},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.resolve(t),r=(0,s.cM)(i);if(!r)return null;let o=e.resolve(r.pos);return n?o.doc.resolve(o.start(o.depth+1)).end():o.pos+1},f=(e,t)=>{if(!e.empty)return!1;let n=e instanceof r.Q;if(!(0,i.xh)(e)&&!n)return!1;let{from:o,$from:a}=e;if(!t&&0!==a.parentOffset||t&&a.parentOffset!==a.parent.content.size)return!1;let l=h(a);if(!l)return!1;if(n)return t?o===l.pos+l.node.nodeSize-1:o===l.pos+1;let s=["paragraph","heading","title"],c=!0;for(let e=a.depth;e>0;e--){let t=a.node(e);if("card"===t.type.name||(0,d.pv)(t))break;if(!s.includes(t.type.name)){c=!1;break}}return!!c&&(t?o===l.pos+l.node.nodeSize-2:o===l.pos+2)}},46577:function(e,t,n){"use strict";n.d(t,{C2:function(){return c},Zs:function(){return p},pK:function(){return h}});var i=n(38564),r=n(37164),o=n(30764),a=n(27191),l=n(30240),s=n(46924),d=n(65050);let c={generate:(0,r.kP)("0123456789abcdefghijklmnopqrstuvwxyz",15)},u=new a.H$("UniqueCardId"),p=e=>{let t=e=>{var n;return null===(n=e.content)||void 0===n?void 0:n.map(e=>{if(!e.content||e.type!==d.W4)return e;let n={...e,attrs:{...e.attrs,id:c.generate()}};return n.content=t(n),n})};return Object.assign({},e,{content:t(e)})},h=s.I.extend({name:"UniqueCardId"}).configure({attributeName:"id",initialValue:()=>c.generate(),syncWithFilmstrip:()=>l.VH.get("transactionalFilmstrip"),filterTransaction:e=>{let t=e.getMeta(i.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:u,transformPasted:(e,t,n)=>{let{types:i,initialValue:r,attributeName:a}=t,l={},s=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if(!i.includes(e.type.name)){t.push(e.copy(s(e.content)));return}let n=r(),o=e.type.create({...e.attrs,[a]:n},s(e.content),e.marks);e.type.name===d.W4&&(l={...l,[e.attrs.id]:n}),t.push(o)}),o.HY.from(t)},c=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if("cardMention"===e.type.name){let i=l[e.attrs.id];if(i){let r=e.type.create({...e.attrs,...i?{id:i}:{},docId:n});t.push(r)}else t.push(e);return}t.push(e.copy(c(e.content)))}),o.HY.from(t)},u=c(s(e.content));return new o.p2(u,e.openStart,e.openEnd)}})},80708:function(e,t,n){"use strict";n.d(t,{o:function(){return G}});var i=n(52322),r=n(43297),o=n(75768),a=n(32899),l=n(41098),s=n(74008),d=n(38035),c=n(62614),u=n(42946),p=n(49929),h=n(64253),m=n(5879),g=n(87254),f=n(46148),x=n(30240),v=n(9325),y=n(88881),b=n(29117),w=n(77533),C=n(36474),k=n(28535);let j=e=>{let{label:t,control:n,icon:r}=e;return(0,i.jsxs)(b.U,{spacing:4,children:[r,(0,i.jsx)(w.x,{children:t}),(0,i.jsx)(C.L,{}),(0,i.jsx)(k.xu,{children:n})]})};function S(e,t){return function(n,i,r){var o;return t({chartAttributes:{...r,[e]:{...null!==(o=r[e])&&void 0!==o?o:{},[n]:i}}})}}let A=e=>{var t;let{chartType:n,attributes:r,updateAttributes:o}=e,a=r.chartAttributes||{},s=a[n],d=S(n,o);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(j,{label:g.ag._({id:"Y7a6MU"}),control:(0,i.jsx)(l.r,{isChecked:null===(t=null==s?void 0:s.axisPullToZero)||void 0===t||t,onChange:e=>d("axisPullToZero",e.target.checked,a)})})})},I=e=>{let{chartType:t="bar",...n}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A,{chartType:t,...n})})};var z=n(83906),L=n(10625),E=n(67046),N=n(99058),M=n(44035),_=n(39237);let T=e=>{var t;let{attributes:n,updateAttributes:r}=e,o=n.chartAttributes||{},a=o.pie||{},l=S("pie",r),s=null!==(t=a.legendPosition)&&void 0!==t?t:"bottom",d={top:g.ag._({id:"WWy8TN"}),right:g.ag._({id:"nOPbWJ"}),bottom:g.ag._({id:"zsiX7I"}),left:g.ag._({id:"UlKSMd"})},u=e=>void 0===d[e]?"bottom":e;return(0,i.jsx)(j,{label:g.ag._({id:"G4H8LE"}),control:(0,i.jsxs)(L.v,{isLazy:!0,children:[(0,i.jsx)(E.j,{as:c.z,variant:"plain",size:"sm",w:40,boxShadow:"none",textAlign:"left",rightIcon:(0,i.jsx)(z.v,{}),sx:{"span:first-of-type":{overflow:"clip",textOverflow:"ellipsis"}},children:d[s]}),(0,i.jsx)(N.q,{zIndex:"modalPopover",children:(0,i.jsx)(M._,{value:s,type:"radio",onChange:e=>{l("legendPosition",u(Array.isArray(e)?e[0]:e),o)},children:Object.entries(d).map(e=>{let[t,n]=e;return(0,i.jsx)(_.i,{value:t,children:(0,i.jsx)(b.U,{children:(0,i.jsx)(w.x,{children:n})})},t)})})})]})})},R={pie:T,donut:T,line:e=>{let{...t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(A,{chartType:"line",...t})})},bar:I,"horizontal-bar":e=>(0,i.jsx)(I,{...e,chartType:"horizontal-bar"})};var H=n(2784),P=n(98621),O=n.n(P),D=n(96154),W=n(37904);let F=e=>{let{accentColor:t,selected:n,onChange:r,steps:o=5}=e,a=Array(o).fill(0).map((e,t)=>t),l=(0,H.useMemo)(()=>Object.fromEntries(Object.entries(f.cb).map(e=>{let[n,{label:i}]=e;return[n,{label:i,scale:(0,D.$)(t,a,n)}]})),[t,o]);n&&!l[n]&&(n=void 0);let s=g.ag._({id:"ovBPCi"});return(0,i.jsx)(j,{icon:(0,i.jsx)(p.G,{icon:u.re8}),label:g.ag._({id:"tvmuQ0"}),control:(0,i.jsxs)(L.v,{isLazy:!0,children:[(0,i.jsx)(E.j,{as:c.z,variant:"plain",size:"sm",w:40,boxShadow:"none",textAlign:"left",rightIcon:(0,i.jsx)(z.v,{}),sx:{"span:first-of-type":{overflow:"clip",textOverflow:"ellipsis"}},children:n?l[n].label():s}),(0,i.jsx)(N.q,{zIndex:"modalPopover",children:(0,i.jsx)(M._,{value:n||"default",type:"radio",onChange:e=>{r("default"===e?void 0:e)},children:Object.entries({default:{...l[f.bT],label:()=>s},...l}).map(e=>{let[r,{label:o,scale:l}]=e;return 1.5>[...l.values()].map(e=>O().readability(e,t)).reduce((e,t)=>Math.max(e,t),0)&&r!==n?null:(0,i.jsx)(_.i,{value:r,children:(0,i.jsxs)(b.U,{children:[(0,i.jsx)(w.x,{children:o()}),(0,i.jsx)(C.L,{}),(0,i.jsx)(B,{scale:l,data:a})]})},r)})})})]})})},B=e=>{let{scale:t,data:n}=e;return(0,i.jsx)(b.U,{spacing:1,children:n.map(e=>(0,i.jsx)(W.L,{color:t.get(e),size:W.c.small,tooltipIsDisabled:!0},e))})},G=e=>{let{attributes:t,updateAttributes:n,accentColor:b,setEditing:w,editor:C}=e,k=R[t.chartType],{data:S}=t,A=(0,x.ye)("chartInlineLabels");return(0,i.jsxs)(r.K,{spacing:0,children:[(0,i.jsxs)(r.K,{spacing:4,p:4,children:[(0,i.jsx)(o.h,{mb:2,children:Object.entries(f.CK).map(e=>{let[r,{icon:o,selectedIcon:l,label:s}]=e,d=t.chartType===r;return(0,i.jsx)(h.kH,{placement:"top",label:s(),children:(0,i.jsx)(a.h,{"aria-label":s(),flex:1,variant:"plain",size:"md",icon:d?l:o,boxShadow:"none",background:d?"trueblue.50":"white",color:d?"trueblue.400":"gray.600",onClick:()=>n({chartType:r})})},"".concat(s()))})}),(0,i.jsx)(F,{accentColor:b,selected:t.colorScheme,steps:5,onChange:e=>{n({colorScheme:e})}}),(0,i.jsx)(j,{icon:(0,i.jsx)(p.G,{icon:u.Lc0}),label:g.ag._({id:"sgzcYD"}),control:(0,i.jsx)(l.r,{isChecked:!t.hideLabels,onChange:e=>n({hideLabels:!e.target.checked})})}),A&&(0,i.jsx)(j,{icon:(0,i.jsx)(p.G,{icon:u.HkY}),label:g.ag._({id:"hw0byi"}),control:(0,i.jsx)(l.r,{isChecked:t.showInlineLabels,onChange:e=>n({showInlineLabels:e.target.checked})})}),C&&(0,i.jsx)(j,{icon:(0,i.jsx)(p.G,{icon:u.elf}),label:g.ag._({id:"0j+RGO"}),control:(0,i.jsx)(o.h,{spacing:1,size:"sm",children:v.Ec.map(e=>{let{name:t,icon:n,checkActive:r,apply:o}=e;if(r&&o)return(0,i.jsx)(y.h,{label:t(),icon:n,onClick:()=>{o(C)},isActive:r(C),my:0},t())})})}),k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.i,{my:3}),(0,i.jsx)(k,{...e})]})]}),w&&(0,i.jsx)(d.k,{px:5,py:3,bg:"gray.100",alignItems:"center",justify:"center",children:(0,i.jsx)(c.z,{variant:"link",size:"sm",colorScheme:"gray",my:0,leftIcon:(0,i.jsx)(p.G,{icon:u.Xcf}),onClick:()=>w(!0),children:S?(0,i.jsx)(m.cC,{id:"BhcOHV"}):(0,i.jsx)(m.cC,{id:"UHoZ5e"})})})]})}},92999:function(e,t,n){"use strict";n.d(t,{_:function(){return s}});var i=n(82655),r=n(87254),o=n(549),a=n(39198),l=n(59700);let s=()=>[{key:"barChartVertical",name:()=>r.ag._({id:"kaIve5"}),icon:i.Wpq,chartType:"bar"},{key:"barChartHorizontal",name:()=>r.ag._({id:"JXpNuP"}),icon:i.AGo,chartType:"horizontal-bar"},{key:"lineChart",name:()=>r.ag._({id:"Kt/Lzz"}),icon:i.Stf,chartType:"line"},{key:"pieChart",name:()=>r.ag._({id:"5+y+OQ"}),icon:i.OS1,chartType:"pie"},{key:"donutChart",name:()=>r.ag._({id:"DNipMm"}),icon:i.epv,chartType:"donut"}].map(e=>({nodeName:"chart",keywords:["graph",e.chartType],featureFlag:"enableCharts",execute:t=>{t.chain().insertChart(e.chartType,!0).editSelectedChart().run()},dragStartFn:t=>{let n=(0,o.P2)();(0,a.UV)(t,{type:"chart",attrs:{chartType:e.chartType,id:n,data:(0,l.W)(e.chartType)||{}}})},dragEndFn:e=>{e.commands.editSelectedChart()},...e}))},59700:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var i=n(87254),r=n(91436);let o=e=>{let t={bar:{rows:[{id:"nFhPL"},{id:"y1R2-"},{id:"3r4Ua"},{id:"MSE5x"},{id:"FcqdP"}],columns:[{id:"mX0nZ",type:"label",label:i.ag._({id:"EWo9RV"}),format:"raw"},{id:"BOdWT",type:"data",label:i.ag._({id:"VbWX2u"}),format:"raw"}],cells:{nFhPL:{mX0nZ:{type:"label",label:i.ag._({id:"lOahyi"})},BOdWT:{isEmpty:!1,type:"data",data:45}},"y1R2-":{mX0nZ:{type:"label",label:i.ag._({id:"j1OP+i"})},BOdWT:{isEmpty:!1,type:"data",data:60}},"3r4Ua":{mX0nZ:{type:"label",label:i.ag._({id:"/9w9pX"})},BOdWT:{isEmpty:!1,type:"data",data:40}},MSE5x:{mX0nZ:{type:"label",label:i.ag._({id:"o/x3y/"})},BOdWT:{isEmpty:!1,type:"data",data:25}},FcqdP:{mX0nZ:{type:"label",label:i.ag._({id:"ubsult"})},BOdWT:{isEmpty:!1,type:"data",data:35}}}},"horizontal-bar":{rows:[{id:"1I_TU"},{id:"20qEC"},{id:"5Jsuy"},{id:"hzkOo"},{id:"ULLT1"},{id:"BZInJ"}],columns:[{id:"oJsDt",type:"label",label:i.ag._({id:"XbvKCP"}),format:"raw"},{id:"V-dVk",type:"data",label:i.ag._({id:"pzRr22"}),format:"raw"}],cells:{"1I_TU":{oJsDt:{type:"label",label:i.ag._({id:"RBu6h+"})},"V-dVk":{isEmpty:!1,type:"data",data:4e3}},"20qEC":{oJsDt:{type:"label",label:i.ag._({id:"OwYxvS"})},"V-dVk":{isEmpty:!1,type:"data",data:2500}},"5Jsuy":{oJsDt:{type:"label",label:i.ag._({id:"fZmoQy"})},"V-dVk":{isEmpty:!1,type:"data",data:2e3}},hzkOo:{oJsDt:{type:"label",label:i.ag._({id:"7wOL0x"})},"V-dVk":{isEmpty:!1,type:"data",data:1500}},ULLT1:{oJsDt:{type:"label",label:i.ag._({id:"8Dlczv"})},"V-dVk":{isEmpty:!1,type:"data",data:1200}},BZInJ:{oJsDt:{type:"label",label:i.ag._({id:"nhrYIN"})},"V-dVk":{isEmpty:!1,type:"data",data:900}}}},line:{rows:[{id:"7qjO7"},{id:"pUSEi"},{id:"Zu-WJ"},{id:"sXcmX"}],columns:[{id:"Ig69-",type:"label",label:i.ag._({id:"2vudsu"}),format:"raw"},{id:"5L4m1",type:"data",label:i.ag._({id:"pzRr22"}),format:"raw"}],cells:{"7qjO7":{"Ig69-":{type:"label",label:i.ag._({id:"i+odAu"})},"5L4m1":{isEmpty:!1,type:"data",data:220}},pUSEi:{"Ig69-":{type:"label",label:i.ag._({id:"K6Dm4P"})},"5L4m1":{isEmpty:!1,type:"data",data:458}},"Zu-WJ":{"Ig69-":{type:"label",label:i.ag._({id:"KHx01x"})},"5L4m1":{isEmpty:!1,type:"data",data:359}},sXcmX:{"Ig69-":{type:"label",label:i.ag._({id:"quAHHk"})},"5L4m1":{isEmpty:!1,type:"data",data:500}}}},pie:{rows:[{id:"O-_SP"},{id:"WDnaO"},{id:"b3NQG"}],columns:[{id:"LyrdY",type:"label",label:i.ag._({id:"+zy2Nq"}),format:"raw"},{id:"nKpLt",type:"data",label:i.ag._({id:"wBMjJ2"}),format:"raw"}],cells:{"O-_SP":{LyrdY:{type:"label",label:i.ag._({id:"QsDjlD"})},nKpLt:{isEmpty:!1,type:"data",data:7}},WDnaO:{LyrdY:{type:"label",label:i.ag._({id:"dv/+ow"})},nKpLt:{isEmpty:!1,type:"data",data:5}},b3NQG:{LyrdY:{type:"label",label:i.ag._({id:"DOTf1E"})},nKpLt:{isEmpty:!1,type:"data",data:3}}}},donut:{rows:[{id:"4ZhNy"},{id:"wPMNK"},{id:"rQ2Pv"}],columns:[{id:"GzvxQ",type:"label",label:i.ag._({id:"kpSWBA"}),format:"raw"},{id:"mznT3",type:"data",label:i.ag._({id:"wBMjJ2"}),format:"raw"}],cells:{"4ZhNy":{GzvxQ:{type:"label",label:i.ag._({id:"dCeEtx"})},mznT3:{isEmpty:!1,type:"data",data:7}},wPMNK:{GzvxQ:{type:"label",label:i.ag._({id:"IMSFDD"})},mznT3:{isEmpty:!1,type:"data",data:12}},rQ2Pv:{GzvxQ:{type:"label",label:i.ag._({id:"Cj3qRS"})},mznT3:{isEmpty:!1,type:"data",data:11}}}}},n=r.m.parse(t[e]).clone();return r.m.serialize(n)}},65780:function(e,t,n){"use strict";n.d(t,{O:function(){return o},g:function(){return a}});var i=n(27191),r=n(98775);function o(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}let a=(e,t,n)=>{if(!n)return!0;let a=o(n),l=a&&e.state.selection instanceof i.qv,s=a?e.state.tr.replaceSelectionWith(a,e.input.shiftKey):e.state.tr.replaceSelection(n),d=(0,r.a)(s);return d?s.setSelection(d):l&&s.setSelection(i.qv.create(s.doc,e.state.selection.from)),e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}},92322:function(e,t,n){"use strict";n.d(t,{Lv:function(){return h},i1:function(){return g},tf:function(){return m}});var i=n(37243),r=n(3027),o=n(27191),a=n(12971),l=n(70617),s=n(33279),d=n(98775),c=n(92621),u=n(81878);let p=e=>"gallery"===e.type.name,h=(e,t,n)=>{var c;let h=x(n);if(h.length>0)return h.forEach(t=>{let{mark:n}=t;(0,u.Td)(n)||(0,u.m7)(n.attrs.href,e)}),!1;let g=null===(c=t.clipboardData)||void 0===c?void 0:c.getData("text/plain");if(!g||!m(g))return!1;let{selection:v}=e.state;if(v instanceof o.Bs&&!v.empty)return t.preventDefault(),f(e,g),!0;if(g.match(s.nP)||(0,l.hU)(g))return!1;if(!e.schema.nodes.embed)return(0,u.m7)(g,e),!1;let y=v instanceof r.Q,b=v.empty&&["paragraph","heading","title"].includes(v.$from.parent.type.name)&&(0,a.bR)(v.$from.parent),w=p(v.$from.parent),C=(0,i.EG)(v)&&p(v.node);if(!(b||w||C||y))return!1;let k=v.from-1,j=C?{from:v.to-1,to:v.to-1}:b?{from:k,to:k+v.$from.parent.nodeSize}:{from:v.from,to:v.to};return e.chain().setTextSelection(j).insertEmbedAndFetchMetadata(g,void 0,!0).command(e=>{let{tr:t}=e,n=(0,d.a)(t);return n&&t.setSelection(n),!0}).run(),!0},m=e=>(0,l.kr)(e)&&!e.includes("\n")&&(0,l.jv)(e),g=e=>1===e.content.childCount&&e.content.firstChild.isTextblock&&m(e.content.firstChild.textContent),f=(e,t)=>{e.commands.setMark(c.r.name,{href:t}),(0,u.m7)(t,e)},x=e=>{let t=[];return e.content.descendants((e,n)=>{e.marks.filter(e=>"link"===e.type.name).forEach(e=>{t.push({mark:e,pos:n})})}),t}},55898:function(e,t,n){"use strict";n.d(t,{Ck:function(){return h},MF:function(){return m},M_:function(){return g},aT:function(){return d},c$:function(){return u},c8:function(){return p},iO:function(){return s}});var i=n(19870),r=n(6382),o=n(92322),a=n(50738),l=n(48972);let s=(e,t)=>{if(!e.isEditable||!t.clipboardData)return!1;let n=t.clipboardData.getData("text/plain");if(!n||(0,o.tf)(n))return!1;let i=t.clipboardData.getData("text/html");if(null==i?void 0:i.includes("data-pm-slice"))return!1;let{state:r}=e;if(r.selection.$from.parent.type.spec.code){let t=r.tr.insertText(n);return e.view.dispatch(t),!0}let a=t.clipboardData.getData("vscode-editor-data"),l=a?JSON.parse(a):void 0,s=null==l?void 0:l.mode;if(!(!i||"markdown"===s||c(n)))return!1;let{from:d,to:u}=r.selection;return t.preventDefault(),e.commands.insertMarkdownAt({from:d,to:u},n)},d=(e,t,n)=>{let r=i.TU.parse(e),{slice:o}=(0,a.T)(r,t,n,!1);return o},c=e=>{let t=e.match(/^```/gm);if(t&&t.length>1||e.match(/\[[^]+\]\(https?:\/\/\S+\)/gm)||e.match(/\[[^]+\]\(\/\S+\)/gm)||e.match(/^#{1,6}\s+\S+/gm))return!0;let n=e.match(/^\s*[\d-*].\s\S+/gm);return!!(n&&n.length>1||e.match(/^\s*-{3,}\s*$/gm))},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;t&&(r.Z.prototype.escape=e=>e);let i=n.turndown(e);return t&&(r.Z.prototype.escape=x),i},p=e=>i.TU.parse(e,{}),h=(e,t,n,i,r)=>{try{let o=e.slice(t,n).content,a=(0,l.Xb)(o,e.type.schema),s=document.createElement("div");s.appendChild(a);let d=s.innerHTML;return u(d,i,r)}catch(i){return console.error("[caught] rangeToMarkdown: ",t,n,e.nodeSize,i),""}},m=(e,t,n)=>h(e,0,void 0,t,n),g=()=>new r.Z({headingStyle:"atx",bulletListMarker:"-",codeBlockStyle:"fenced",hr:"---"}).remove(["style"]).addRule("list",{filter:["ul","ol"],replacement:function(e,t){let n=t.parentNode;return((null==n?void 0:n.nodeName.match(/^(UL|OL)$/i))&&(e="    "+e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ")),(null==n?void 0:n.nodeName)==="LI"&&n.lastElementChild===t)?"\n"+e:"\n\n"+e+"\n\n"}}).addRule("listItem",{filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");let i=n.bulletListMarker+"   ",r=t.parentNode;if(1===t.children.length&&t.children[0].nodeName.match(/^(UL|OL)$/i)&&t.textContent===t.children[0].textContent)i="    ";else if((null==r?void 0:r.nodeName)==="OL"){let e=r.getAttribute("start"),n=Array.prototype.indexOf.call(Array.prototype.filter.call(r.children,e=>"LI"===e.nodeName),t);i=(e?Number(e)+n:n+1)+".  "}return i+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}}),f=g(),x=r.Z.prototype.escape},50738:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var i=n(30764),r=n(89393),o=n(98835);let a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=(0,o.B)(e),s=new DOMParser().parseFromString(l,"text/html"),d=i.aw.fromSchema(t).parseSlice(s,{preserveWhitespace:a}),c=(0,r.iu)(d,t,n);return{content:c.content,dom:s.body,slice:c}}},89393:function(e,t,n){"use strict";n.d(t,{iu:function(){return m}});var i=n(30764),r=n(52138),o=n(57822);let a=e=>{if((0,r.zx)()&&e&&0!==e.length)for(let t=0;t<e.length;t++)l(e[t],e,t)},l=(e,t,n)=>{if("text"===e.type){if(!e.text)return;let{replaced:i,nodes:r}=(0,o.W)(e.text,e.marks);i&&t.splice(n,1,...r);return}if(e.content&&e.content.length>0)for(let t=0;t<e.content.length;t++)l(e.content[t],e.content,t)};var s=n(27875),d=n.n(s),c=n(35676),u=n.n(c);let p=(e,t)=>{let n={type:"document",content:[]},i=(e,t)=>{var i,r;let o=n;for(let e=0;e<t;e++){(r=o).content||(r.content=[]);let e=o.content[o.content.length-1];e&&"card"===e.type||(e={type:"card",content:[]},o.content.push(e)),o=e}null===(i=o.content)||void 0===i||i.push(e)},r=1,o=null;for(let n=0;n<e.length;n++){var a;let l=e[n];if(t.splitOnHeadings&&"heading"===l.type&&(null===(a=l.content)||void 0===a?void 0:a.length)){let{level:e}=l.attrs||{};if(null==o?o=e:e>o?(r+=1,o=e):e<o&&(r=e,o=e),r>1&&!t.nested){o=1,i(l,r=1);continue}i({type:"card",content:[]},(r=d()(r,1,3))-1)}else if(t.splitOnDividers&&"divider"===l.type){i({type:"card",content:[]},r-1);continue}i(l,r)}let l=u()(h(n));return console.debug("splitCards",n,l),l},h=e=>{var t;return(null===(t=e.content)||void 0===t?void 0:t.every(e=>"card"===e.type))?u()(e.content.map(h)):[e]},m=(e,t,n)=>{var r;let o=null===(r=e.toJSON())||void 0===r?void 0:r.content;if(a(o),!o||0===o.length||1===o.length&&("document"===o[0].type||"card"===o[0].type))return e;if(o.every(e=>t.nodes[e.type].isInline))return i.p2.fromJSON(t,{...e,content:o});try{return o=f(o,t),o=g(o),n&&(o=p(o,n)),i.p2.fromJSON(t,{...e,content:o})}catch(t){return console.error("Error transforming slice",t),e}},g=e=>{let t=[...e];return e.forEach((n,i)=>{var r;if(i<1)return;let o=e[i-1];if(o.type!==n.type||!o.content)return;let a=null===(r=n.content)||void 0===r?void 0:r[0];a&&"footnote"===a.type&&(o.content=o.content.concat(n.content),t[i]=null)}),t.filter(e=>null!==e)},f=(e,t)=>{let n=[];return e.forEach(e=>{var i,r;if(e.type){if(null===(i=t.nodes[e.type])||void 0===i?void 0:i.isBlock)n.push(e);else{let i=n[n.length-1];if(!i||!i.content||!t.nodes[i.type].isTextblock||"text"===e.type&&(null===(r=e.text)||void 0===r?void 0:r.trim())==="")return;i.content.push(e)}}}),n}},87549:function(e,t,n){"use strict";n.d(t,{q:function(){return x}});var i=n(82655),r=n(87254),o=n(9850),a=n.n(o),l=n(39198),s=n(77221);let d={flywheel:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1024.2205225919886,y:545.3520002984831,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:sBqhkO1gaRDC33E9nLFRf",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Two</h4>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:605.5691768594324,y:545.3520002984831,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:LuxCoSOJiKidTHonK_r3y",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Four</h4>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:811.2936767672497,y:332.49917028373386,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:jNEccTSx5tCosurJ5Ot2M",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">One</h4>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:786.7936767672497,y:753.4464458368486,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:OUIb317WtLr7vTROMJmRY",type:"text",props:{color:"black",size:"m",w:145.68119328124112,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Three</h4>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:774.4554909171899,y:664.006697053962,rotation:3.141592653589793,isLocked:!1,opacity:1,meta:{},id:"shape:gOmdcWQlSymeyfc0iFv_H",type:"arrow",parentId:"page:page",index:"a8",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-143.39749318568477,y:299.6671450013758},end:{type:"point",x:-296.8596898701958,y:124.06206342608016},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:949.3708512974239,y:475.1522148190538,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:FoSkoOljiovlpXtyepQ0L",type:"arrow",parentId:"page:page",index:"a8G",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-165.31582160993514,y:295.60684693665877},end:{type:"point",x:-292.70420767490987,y:127.69426010254801},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:749.9432407400066,y:507.6958283407593,rotation:4.555309347705199,isLocked:!1,opacity:1,meta:{},id:"shape:xJbFH6GE8sktyfodgK-9d",type:"arrow",parentId:"page:page",index:"a8V",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-141.06822675649278,y:304.84894107910753},end:{type:"point",x:-293.7665666504506,y:149.96506626343376},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:973.8831014746072,y:631.4630835322564,rotation:1.413716694115406,isLocked:!1,opacity:1,meta:{},id:"shape:98AlWuZ3MNJ8HXkw_0SX8",type:"arrow",parentId:"page:page",index:"a9",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:-33.715948517019974,start:{type:"point",x:-138.9882886080492,y:300.5849857402369},end:{type:"point",x:-290.8832143177716,y:128.98965564678986},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"}],assets:[],meta:{},width:420.44444444444446,svg:'<svg direction="ltr" width="530.6513457325561" height="483.94727555311476" viewBox="597.5691768594324 324.49917028373386 530.6513457325561 483.94727555311476" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1024.2205, 545.352)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Two</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 605.5692, 545.352)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Four</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 811.2937, 332.4992)" opacity="1"><g><foreignObject width="97" height="47"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">One</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 786.7937, 753.4464)" opacity="1"><g><foreignObject width="146" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Three</h4></div></div></foreignObject></g></g><g transform="matrix(-1, 0, 0, -1, 774.4555, 664.0067)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_gOmdcWQlSymeyfc0iFv_H_clip"><rect x="-396.85968987019567" y="24.0620634260801" width="353.4621966845109" height="375.60508157529574" fill="white"></rect><path d="M -300.40378806246554 133.94585662522945 L -296.8596898701958 124.06206342608016 L -290.0721229701155 132.07323909366693" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_gOmdcWQlSymeyfc0iFv_H_clip)"><rect x="-100" y="-100" width="353.4621966845109" height="375.60508157529574" fill="transparent" stroke="none"></rect><path d="M-143.39749318568477,299.6671450013758 A218.4976762338476 218.4976762338476 0 0 1 -296.8596898701958,124.06206342608016" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -300.40378806246554 133.94585662522945 L -296.8596898701958 124.06206342608016 L -290.0721229701155 132.07323909366693" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 949.3709, 475.1522)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_FoSkoOljiovlpXtyepQ0L_clip"><rect x="-392.70420767491" y="27.694260102547986" width="327.38838606497484" height="367.9125868341108" fill="white"></rect><path d="M -297.41216590820414 137.0796279309049 L -292.70420767490987 127.69426010254801 L -286.93021982833875 136.46415544671538" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_FoSkoOljiovlpXtyepQ0L_clip)"><rect x="-100" y="-100" width="327.38838606497484" height="367.9125868341108" fill="transparent" stroke="none"></rect><path d="M-165.31582160993514,295.60684693665877 A181.55168626818823 181.55168626818823 0 0 1 -292.70420767490987,127.69426010254801" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -297.41216590820414 137.0796279309049 L -292.70420767490987 127.69426010254801 L -286.93021982833875 136.46415544671538" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(-0.1564, -0.9877, 0.9877, -0.1564, 749.9432, 507.6958)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_xJbFH6GE8sktyfodgK-9d_clip"><rect x="-393.7665666504507" y="49.96506626343373" width="352.69833989395795" height="354.88387481567383" fill="white"></rect><path d="M -297.06219035877035 159.93446265304337 L -293.7665666504506 149.96506626343376 L -286.7806279708117 157.80385831095774" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_xJbFH6GE8sktyfodgK-9d_clip)"><rect x="-100" y="-100" width="352.69833989395795" height="354.88387481567383" fill="transparent" stroke="none"></rect><path d="M-141.06822675649278,304.84894107910753 A192.24158262862494 192.24158262862494 0 0 1 -293.7665666504506,149.96506626343376" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -297.06219035877035 159.93446265304337 L -293.7665666504506 149.96506626343376 L -286.7806279708117 157.80385831095774" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g><g transform="matrix(0.1564, 0.9877, -0.9877, 0.1564, 973.8831, 631.4631)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_98AlWuZ3MNJ8HXkw_0SX8_clip"><rect x="-390.8832143177716" y="28.989655646789856" width="351.8949257097224" height="371.59533009344705" fill="white"></rect><path d="M -294.4496119884513 138.86542435887353 L -290.8832143177716 128.98965564678986 L -284.11374656654743 137.01613098563794" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_98AlWuZ3MNJ8HXkw_0SX8_clip)"><rect x="-100" y="-100" width="351.8949257097224" height="371.59533009344705" fill="transparent" stroke="none"></rect><path d="M-138.9882886080492,300.5849857402369 A211.56192029954403 211.56192029954403 0 0 1 -290.8832143177716,128.98965564678986" fill="none" stroke="#e1e1e1" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -294.4496119884513 138.86542435887353 L -290.8832143177716 128.98965564678986 L -284.11374656654743 137.01613098563794" fill="none" stroke="#e1e1e1" stroke-width="3.5"></path></g></g></svg>'}},quadrant:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1074.82421875,y:229.03125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:0ok4F6wp2WXfO_JbW55tI",type:"arrow",parentId:"page:page",index:"a1",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:400},arrowheadStart:"arrow",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:869.5924737463713,y:27.95840719431982,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lfd5uMWVGIIFlwc_gfUf_",type:"arrow",parentId:"page:page",index:"a2",props:{dash:"solid",size:"m",fill:"solid",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:400},end:{type:"point",x:400,y:400},arrowheadStart:"arrow",arrowheadEnd:"arrow",text:"",labelPosition:.5,font:"draw",shapeColor:null,strokeWidth:"md"},typeName:"shape"},{x:1026.82421875,y:170.3671875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:c4kLEFg-x_YebbalM4bbJ",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a3",typeName:"shape"},{x:1275.47265625,y:404.9296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:rr2bWXVlRik_OTR3-Mzxb",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:770.2109375,y:404.9296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:4nADMgFMClNzOAl0NqJsR",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a4V",typeName:"shape"},{x:1026.82421875,y:640.79296875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:pQUKVKJOu78f_j_B0Y1_-",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:27,html:'<h4 class="themed-heading">Title</h4>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"}],assets:[],meta:{},width:434.6666666666667,svg:'<svg direction="ltr" width="617.26171875" height="533.42578125" viewBox="762.2109375 162.3671875 617.26171875 533.42578125" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1074.8242, 229.0313)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_0ok4F6wp2WXfO_JbW55tI_clip"><rect x="-100" y="-100" width="200.00000000000009" height="599.8566231113605" fill="white"></rect><path d="M -5.249999999999997 9.093266739736608 L 0 0 L 5.250000000000001 9.093266739736604" fill="none" stroke="none"></path><path d="M 5.250000000000076 390.7633563716238 L 7.904787935331115e-14 399.8566231113604 L -5.249999999999922 390.76335637162384" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_0ok4F6wp2WXfO_JbW55tI_clip)"><rect x="-100" y="-100" width="200.00000000000009" height="599.8566231113605" fill="transparent" stroke="none"></rect><path d="M0,0L7.904787935331115e-14,399.8566231113604" fill="none" stroke="#1d1d1d" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M -5.249999999999997 9.093266739736608 L 0 0 L 5.250000000000001 9.093266739736604" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path><path d="M 5.250000000000076 390.7633563716238 L 7.904787935331115e-14 399.8566231113604 L -5.249999999999922 390.76335637162384" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 869.5925, 27.9584)" opacity="1"><g data-shape-type="arrow" style="--stroke-width: 4;"><defs><mask id="shape_lfd5uMWVGIIFlwc_gfUf__clip"><rect x="-99.99999999999991" y="299.8566231113604" width="610.4634900072574" height="202.2890625" fill="white"></rect><path d="M 401.39964227952714 396.84505693463564 L 410.46349000725746 402.1456856113604 L 401.34108705332034 407.3448936612464" fill="none" stroke="none"></path><path d="M 9.06384772773043 405.1572517880852 L 7.904787935331115e-14 399.8566231113604 L 9.122402953937236 394.65741506147447" fill="none" stroke="none"></path></mask></defs><g mask="url(#shape_lfd5uMWVGIIFlwc_gfUf__clip)"><rect x="-100" y="-100" width="610.4634900072574" height="202.2890625" fill="transparent" stroke="none"></rect><path d="M410.46349000725746,402.1456856113604L7.904787935331115e-14,399.8566231113604" fill="none" stroke="#1d1d1d" stroke-width="3.5" stroke-dasharray="none" stroke-dashoffset="none"></path></g><path d="M 401.39964227952714 396.84505693463564 L 410.46349000725746 402.1456856113604 L 401.34108705332034 407.3448936612464" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path><path d="M 9.06384772773043 405.1572517880852 L 7.904787935331115e-14 399.8566231113604 L 9.122402953937236 394.65741506147447" fill="none" stroke="#1d1d1d" stroke-width="3.5"></path></g></g><g transform="matrix(1, 0, 0, 1, 1026.8242, 170.3672)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1275.4727, 404.9297)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 770.2109, 404.9297)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1026.8242, 640.793)" opacity="1"><g><foreignObject width="97" height="47"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading">Title</h4></div></div></foreignObject></g></g></svg>'}},venn:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:1175.87109375,y:508.45703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YuAAYaKmNVXbxRM9Ym0z4",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:904.79296875,y:508.45703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ywvivjfUEJxH_FT8HCp6E",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:1040.3320312500002,y:270.0929726013588,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:uoJ_xUvPbDuyBaVh94J02",type:"geo",props:{w:394.4375,h:394.4375,geo:"ellipse",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3",typeName:"shape"},{x:1092.234375,y:547.42578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:W8BtDrKhUUa_fmB-YfrG4",type:"text",props:{color:"black",size:"m",w:108,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:24,html:'<p class="paragraph">Expensive</p>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:1282.02734375,y:547.42578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lLHXbsMOmu2pfYDmh7SMV",type:"text",props:{color:"black",size:"m",w:104,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:24,html:'<p class="paragraph">Take time</p>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:1185.5507812500002,y:689.046875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:FJv1W-bQpfCY0dAUn_ezA",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:52,html:'<p class="paragraph">Low<br>quality</p>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:1373.08984375,y:705.67578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tT7vEjVJGLo0tv18nWtJV",type:"text",props:{color:"black",size:"m",w:107,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Cheap</h3>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:1017.1328125,y:705.67578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:gaQCyTxoxdrsvbDkqQV9C",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Fast</h3>',shapeColor:null},parentId:"page:page",index:"a8",typeName:"shape"},{x:1189.5507812500002,y:424.234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VAbhvBq-Ec1CIYnCjzhl2",type:"text",props:{color:"black",size:"m",w:96,text:"",font:"draw",align:"middle",autoSize:!0,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">Good</h3>',shapeColor:null},parentId:"page:page",index:"a9",typeName:"shape"}],assets:[],meta:{},width:431.1111111111111,svg:'<svg direction="ltr" width="681.5156250000002" height="648.2953009459236" viewBox="896.7929687499998 262.3461014527175 681.5156250000002 648.2953009459236" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 1175.8711, 508.457)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:YuAAYaKmNVXbxRM9Ym0z4" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 904.793, 508.457)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:ywvivjfUEJxH_FT8HCp6E" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1040.332, 270.093)" opacity="1"><g data-shape-type="geo"><path d="M0,197.21875a197.21875,197.21875,0,1,1,394.4375,0a197.21875,197.21875,0,1,1,-394.4375,0" width="394.4375" height="394.4375" id="shape:uoJ_xUvPbDuyBaVh94J02" style="fill-opacity: 0.5; stroke-width: 2;"></path><foreignObject width="394.43750000000017" height="393.93124229728244"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1092.2344, 547.4258)" opacity="1"><g><foreignObject width="109" height="44"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Expensive</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1282.0273, 547.4258)" opacity="1"><g><foreignObject width="105" height="44"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Take time</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1185.5508, 689.0469)" opacity="1"><g><foreignObject width="97" height="72"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p class="paragraph">Low<br>quality</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1373.0898, 705.6758)" opacity="1"><g><foreignObject width="108" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Cheap</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1017.1328, 705.6758)" opacity="1"><g><foreignObject width="97" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Fast</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1189.5508, 424.2344)" opacity="1"><g><foreignObject width="97" height="54"><div data-autosize="true" class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">Good</h3></div></div></foreignObject></g></g></svg>'}},calendarWeek:{type:"diagram",attrs:{horizontalAlign:null,shapes:[{x:179.0625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hF6E8P7CiXiSsRo7LG0FF",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"Zy",typeName:"shape"},{x:495.4840350809791,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:taayoSjVZnQxAEAkYzW8F",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"Zz",typeName:"shape"},{x:811.9055701619584,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:DogbW2-V83SiEhlezSTF1",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0",typeName:"shape"},{x:1128.3271052429373,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:SzwGSCVn7h1Uo_B_b-0jU",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:1445.4682141660628,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IAo_g6FQp9YK2JWBCaGMU",type:"geo",props:{w:301.9961468758189,h:873.9095562737236,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:832.3614242096944,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:l_vkpYMsSpaE9s3TN_mKw",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Wed",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Wed</h3>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:1148.7829592906733,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Cw9jJcIeB18UZCowlxx0A",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Thu",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Thu</h3>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:1465.9240682137988,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VvguEUBmR1u7tIdodua_7",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Fri",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Fri</h3>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:204.97813786171344,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:lqef5zWrrlQl9HENeGEnL",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Meeting with Jon",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Meeting with Jon</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aD",typeName:"shape"},{x:204.97813786171344,y:605.0019073645135,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IgEYD45iYr1sSFMoAwbyu",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Team bonding",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team bonding</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDG",typeName:"shape"},{x:204.97813786171344,y:297.31890598073045,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Qim4eNR90mSPnWlJh468S",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Checking emails",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Checking emails</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDV",typeName:"shape"},{x:1154.2427431046506,y:295.64859941977187,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IL-fsOSVuSRXre2dwItqj",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"HR meetings",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">HR meetings</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDZ",typeName:"shape"},{x:1154.2427431046506,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:bH7UwVBlNxoEzsh_1zjen",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Onboarding new hire",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Onboarding new hire</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDb",typeName:"shape"},{x:521.3996729426926,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:HAHtaenTwvKec_w0q3MVQ",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Attend CS meeting",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Attend CS meeting</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDd",typeName:"shape"},{x:1471.3838520277761,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:7ONsfQ5KbFBdZuwBMYOXz",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Team happy hour",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team happy hour</p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"aDe",typeName:"shape"},{x:1471.3838520277761,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ov9MLbM2hIPHiHbKtLXgq",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Attend CS meeting",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Attend CS meeting</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDf",typeName:"shape"},{x:1471.3838520277761,y:295.64859941977187,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:JcWFs24GgyS_MNCWFyy4F",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Office tour",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Office tour</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDg",typeName:"shape"},{x:837.8212080236717,y:211.51595163729675,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:avNg2b0XCoj-PSVRH9NqC",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"1:1 with Zach",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">1:1 with Zach</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDh",typeName:"shape"},{x:837.8212080236717,y:297.45150900814224,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:B3hQTKLjKcuwSsT8VwJpR",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Company all hands",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Company all hands</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDj",typeName:"shape"},{x:837.8212080236717,y:379.7812472022469,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Ew3E_uQg_oIqeazf2vqpP",type:"geo",props:{w:251,h:101.34061312191727,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Bugbashing diagrams V2 with eng team",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Bugbashing diagrams V2 with eng team</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDk",typeName:"shape"},{x:837.8212080236717,y:500.13645302107966,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Fg4fxWRIxgyovffXhHIzF",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Customer call",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Customer call</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDkV",typeName:"shape"},{x:1154.2427431046506,y:211.51595163729678,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VvbN_RGjDdrkdA1f5rsRd",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Vendor call",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Vendor call</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDkl",typeName:"shape"},{x:204.97813786171344,y:381.1218603241642,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:2vK8h6FMVleRUW2G9Od19",type:"geo",props:{w:251,h:121.0625,geo:"rectangle",color:"black",labelColor:"black",fill:"semi",dash:"solid",size:"m",font:"draw",text:"Setup a call with our food vendor at the office in SF",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Setup a call with our food vendor at the office in SF</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aDl",typeName:"shape"},{x:204.97813786171344,y:521.1989530210797,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:9SYkhq44JuzFO637hB390",type:"geo",props:{w:250.16487115239204,h:64.78836164651827,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:" Lunch",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"><span id="hamburger" native="\uD83C\uDF54" class="emoji">\uD83C\uDF54</span> Lunch</p>',shapeColor:"#26A688",strokeWidth:"none"},parentId:"page:page",index:"aDt",typeName:"shape"},{x:515.9398891287151,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:SDZcV2JidoSxClP0MxiaV",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Tue",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Tue</h3>',shapeColor:null},parentId:"page:page",index:"aE",typeName:"shape"},{x:199.518354047736,y:134.56584632459914,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tSOF89upJLNWmMbbVcY6R",type:"text",props:{color:"black",size:"m",w:261.08443878034683,text:"Mon",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading" style="text-align: center">Mon</h3>',shapeColor:null},parentId:"page:page",index:"aF",typeName:"shape"}],assets:[{meta:{},id:"asset:1703535279",type:"image",typeName:"asset",props:{name:"Screen Shot 2024-04-10 at 3.37.50 PM.png",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/b63db3d6baac4d469108cf61a4c7ee71/original/Screen-Shot-2024-04-10-at-3.37.50-PM.png",w:2842,h:1550,mimeType:"image/png",isAnimated:!1}},{meta:{},id:"asset:-1866522948",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/c494e974b8cc46b8910df2aa1a4051db/original/tldrawFile.png",w:3841,h:2161,mimeType:"image/png",isAnimated:!1}}],meta:{},width:null,svg:'<svg direction="ltr" width="1584.4018610418816" height="889.9095562737236" viewBox="171.0625 111.1171875 1584.4018610418816 889.9095562737236" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 204.9781, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:lqef5zWrrlQl9HENeGEnL" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 605.0019)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IgEYD45iYr1sSFMoAwbyu" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 297.3189)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Qim4eNR90mSPnWlJh468S" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IL-fsOSVuSRXre2dwItqj" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:bH7UwVBlNxoEzsh_1zjen" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 521.3997, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:HAHtaenTwvKec_w0q3MVQ" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:ov9MLbM2hIPHiHbKtLXgq" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:JcWFs24GgyS_MNCWFyy4F" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:avNg2b0XCoj-PSVRH9NqC" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 297.4515)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:B3hQTKLjKcuwSsT8VwJpR" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,97.3406 Q251,101.3406 247,101.3406 L4,101.3406 Q0,101.3406 0,97.3406 L0,4 Q0,0 4,0 " id="shape:Ew3E_uQg_oIqeazf2vqpP" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 500.1365)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Fg4fxWRIxgyovffXhHIzF" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:VvbN_RGjDdrkdA1f5rsRd" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 381.1219)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,117.0625 Q251,121.0625 247,121.0625 L4,121.0625 Q0,121.0625 0,117.0625 L0,4 Q0,0 4,0 " id="shape:2vK8h6FMVleRUW2G9Od19" class="tl-shape-background" style="fill-opacity: 0.75; stroke-width: 0;"></path></g></g><g transform="matrix(1, 0, 0, 1, 179.0625, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:hF6E8P7CiXiSsRo7LG0FF" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 495.484, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:taayoSjVZnQxAEAkYzW8F" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 811.9056, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:DogbW2-V83SiEhlezSTF1" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1128.3271, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:SzwGSCVn7h1Uo_B_b-0jU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1445.4682, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L297.9961,0 Q301.9961,0 301.9961,4 L301.9961,869.9096 Q301.9961,873.9096 297.9961,873.9096 L4,873.9096 Q0,873.9096 0,869.9096 L0,4 Q0,0 4,0 " id="shape:IAo_g6FQp9YK2JWBCaGMU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="301.9961468758189" height="873.9095562737236"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 832.3614, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Wed</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1148.783, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Thu</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1465.9241, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Fri</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:lqef5zWrrlQl9HENeGEnL" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Meeting with Jon</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 605.0019)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IgEYD45iYr1sSFMoAwbyu" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team bonding</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 297.3189)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Qim4eNR90mSPnWlJh468S" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Checking emails</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:IL-fsOSVuSRXre2dwItqj" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">HR meetings</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:bH7UwVBlNxoEzsh_1zjen" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Onboarding new hire</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 521.3997, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:HAHtaenTwvKec_w0q3MVQ" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Attend CS meeting</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:7ONsfQ5KbFBdZuwBMYOXz" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team happy hour</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:ov9MLbM2hIPHiHbKtLXgq" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Attend CS meeting</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1471.3839, 295.6486)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:JcWFs24GgyS_MNCWFyy4F" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Office tour</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:avNg2b0XCoj-PSVRH9NqC" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">1:1 with Zach</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 297.4515)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:B3hQTKLjKcuwSsT8VwJpR" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Company all hands</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 379.7812)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,97.3406 Q251,101.3406 247,101.3406 L4,101.3406 Q0,101.3406 0,97.3406 L0,4 Q0,0 4,0 " id="shape:Ew3E_uQg_oIqeazf2vqpP" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="251" height="101.34061312191727"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Bugbashing diagrams V2 with eng team</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 837.8212, 500.1365)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:Fg4fxWRIxgyovffXhHIzF" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Customer call</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1154.2427, 211.516)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:VvbN_RGjDdrkdA1f5rsRd" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="250.16487115239204" height="64.78836164651827"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Vendor call</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 381.1219)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L247,0 Q251,0 251,4 L251,117.0625 Q251,121.0625 247,121.0625 L4,121.0625 Q0,121.0625 0,117.0625 L0,4 Q0,0 4,0 " id="shape:2vK8h6FMVleRUW2G9Od19" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="251" height="121.0625"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Setup a call with our food vendor at the office in SF</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 204.9781, 521.199)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L246.1649,0 Q250.1649,0 250.1649,4 L250.1649,60.7884 Q250.1649,64.7884 246.1649,64.7884 L4,64.7884 Q0,64.7884 0,60.7884 L0,4 Q0,0 4,0 " id="shape:9SYkhq44JuzFO637hB390" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 0;"></path><foreignObject width="250.16487115239204" height="64.78836164651827" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"><span id="hamburger" native="\uD83C\uDF54" class="emoji">\uD83C\uDF54</span> Lunch</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 515.9399, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Tue</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 199.5184, 134.5658)" opacity="1"><g><foreignObject width="262.08443878034683" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading" style="text-align: center">Mon</h3></div></div></foreignObject></g></g></svg>'}},calendarMonths:{type:"diagram",attrs:{horizontalAlign:null,shapes:[{x:187.0625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hF6E8P7CiXiSsRo7LG0FF",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"Zy",typeName:"shape"},{x:621.23828125,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:taayoSjVZnQxAEAkYzW8F",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"Zz",typeName:"shape"},{x:1055.4140625,y:119.1171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:DogbW2-V83SiEhlezSTF1",type:"geo",props:{w:419.6875,h:677.9375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"none"},parentId:"page:page",index:"a0",typeName:"shape"},{x:1479.765625,y:227.52734375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:n-HH4IouUsStSFr3VNbU-",type:"line",parentId:"page:page",index:"a2",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:-4.6640625,y:22115642650533118e-29},a2:{id:"a2",index:"a2",x:-1292.703125,y:2220446049250313e-28}},shapeColor:null,strokeWidth:"none"},typeName:"shape"},{x:201.34708590770333,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:BEBrp9VENbneWCEP9Z57D",type:"text",props:{color:"black",size:"m",w:389.55916409229667,text:"January",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">January</h3>',shapeColor:null},parentId:"page:page",index:"a3",typeName:"shape"},{x:631.6081020625556,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:-3Bu-xyyud5-NY1mEsn_r",type:"text",props:{color:"black",size:"m",w:399.24346043744436,text:"February",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">February</h3>',shapeColor:null},parentId:"page:page",index:"a4",typeName:"shape"},{x:1064.4140625,y:145.867869309553,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:97V6hIrYPl_7kahzLVj4Y",type:"text",props:{color:"black",size:"m",w:397.96463853034425,text:"March",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:34,html:'<h3 class="themed-heading">March</h3>',shapeColor:null},parentId:"page:page",index:"a5",typeName:"shape"},{x:213.4453125,y:262.6015625,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:hqEIx0gJpckN8eL0a3_eG",type:"geo",props:{w:377.57421875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Campaign brief",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Campaign brief</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a6",typeName:"shape"},{x:424.8515625,y:350.465234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:L4SJqvXoG-EotQtRMTPY8",type:"geo",props:{w:242.98046875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Brainstorming idea",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Brainstorming idea</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a7",typeName:"shape"},{x:642.359375,y:438.32890625000005,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:5PsZHZLZu4_CVVyhnfMhV",type:"geo",props:{w:317.4921875,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Pitching V1 draft",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Pitching V1 draft</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a8",typeName:"shape"},{x:801.10546875,y:526.192578125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:gaTWbH01oHY5U8i7-0YWM",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Team sync",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Team sync</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a9",typeName:"shape"},{x:1017.24609375,y:614.05625,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:LTp09wJ7CZ4hmqxK3TqOs",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"Product launch",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">Product launch</p>',shapeColor:"#26A688",strokeWidth:"none"},parentId:"page:page",index:"aA",typeName:"shape"},{x:1224.703125,y:701.919921875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YRlBT-re2qFu7J2lowdkX",type:"geo",props:{w:216.140625,h:68.80859375,geo:"rectangle",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"PR push",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph">PR push</p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"aB",typeName:"shape"}],assets:[],meta:{},width:null,svg:'<svg direction="ltr" width="1304.0390625" height="693.9375" viewBox="179.0625 111.1171875 1304.0390625 693.9375" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 187.0625, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:hF6E8P7CiXiSsRo7LG0FF" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 621.2383, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:taayoSjVZnQxAEAkYzW8F" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1055.4141, 119.1172)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L415.6875,0 Q419.6875,0 419.6875,4 L419.6875,673.9375 Q419.6875,677.9375 415.6875,677.9375 L4,677.9375 Q0,677.9375 0,673.9375 L0,4 Q0,0 4,0 " id="shape:DogbW2-V83SiEhlezSTF1" style="fill-opacity: 1; stroke-width: 0;"></path><foreignObject width="419.6875" height="677.9375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1479.7656, 227.5273)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M-4.66, 0L-1292.7, 0" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 201.3471, 145.8679)" opacity="1"><g><foreignObject width="390.55916409229667" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">January</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 631.6081, 145.8679)" opacity="1"><g><foreignObject width="400.24346043744436" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">February</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1064.4141, 145.8679)" opacity="1"><g><foreignObject width="399" height="54"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h3 class="themed-heading">March</h3></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 213.4453, 262.6016)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L373.5742,0 Q377.5742,0 377.5742,4 L377.5742,64.8086 Q377.5742,68.8086 373.5742,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:hqEIx0gJpckN8eL0a3_eG" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="377.57421875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Campaign brief</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 424.8516, 350.4652)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L238.9805,0 Q242.9805,0 242.9805,4 L242.9805,64.8086 Q242.9805,68.8086 238.9805,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:L4SJqvXoG-EotQtRMTPY8" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="242.98046875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Brainstorming idea</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 642.3594, 438.3289)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L313.4922,0 Q317.4922,0 317.4922,4 L317.4922,64.8086 Q317.4922,68.8086 313.4922,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:5PsZHZLZu4_CVVyhnfMhV" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="317.4921875" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Pitching V1 draft</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 801.1055, 526.1926)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:gaTWbH01oHY5U8i7-0YWM" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="216.140625" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Team sync</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1017.2461, 614.0562)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:LTp09wJ7CZ4hmqxK3TqOs" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 0;"></path><foreignObject width="216.140625" height="68.80859375" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">Product launch</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1224.7031, 701.9199)" opacity="1"><g data-shape-type="geo"><path d="M4,0 L212.1406,0 Q216.1406,0 216.1406,4 L216.1406,64.8086 Q216.1406,68.8086 212.1406,68.8086 L4,68.8086 Q0,68.8086 0,64.8086 L0,4 Q0,0 4,0 " id="shape:YRlBT-re2qFu7J2lowdkX" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="216.140625" height="68.80859375"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph">PR push</p></div></div></foreignObject></g></g></svg>'}},concentricCircles:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:565.8710406141417,y:267.2348052328804,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:TAw6_9rfNRYvwwWYH_HCE",type:"geo",props:{w:477.70836857906545,h:477.70836857906545,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1",typeName:"shape"},{x:616.0939715727751,y:367.685804457496,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EgzihrX9ISnR1IDnH3Nb-",type:"geo",props:{w:377.2573693544499,h:377.2573693544499,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2",typeName:"shape"},{x:668.9469658115557,y:473.48237590821486,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:PjG3dFUaDsYRxpsyfV9pW",type:"geo",props:{w:271.5513808768887,h:271.5513808768887,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3",typeName:"shape"},{x:710.2141277616566,y:556.2474435629489,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:q-kyMkxhO2b6WeTH0ets_",type:"geo",props:{w:189.21399728645815,h:189.21399728645815,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"a4",typeName:"shape"},{x:464.90514248458214,y:65.35157205630884,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:j5viwZdfHENtGXtzpl0By",type:"geo",props:{w:679.628218169672,h:679.628218169672,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0",typeName:"shape"},{x:510.91801733541865,y:157.35060141748204,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:ktAwuZYMrly1jH7bcYmPU",type:"geo",props:{w:587.634481733614,h:587.634481733614,geo:"ellipse",color:"black",labelColor:"black",fill:"none",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0V",typeName:"shape"},{x:725.4037617637376,y:93.6328125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:arpSUqzdolhE3v92x2Hlg",type:"text",props:{color:"black",size:"m",w:159,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Strangers</p>',shapeColor:null},parentId:"page:page",index:"a6",typeName:"shape"},{x:698.7226562500001,y:191.5703125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:p4dDCuUjLEG9hLXieB7uX",type:"text",props:{color:"black",size:"m",w:211.83203125000003,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Community</p>',shapeColor:null},parentId:"page:page",index:"a7",typeName:"shape"},{x:698.7226562500001,y:300.83203125,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:IQ2anr8KXqvDn1DTJJIM1",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Acquaintances</p>',shapeColor:null},parentId:"page:page",index:"a8",typeName:"shape"},{x:698.7226562500001,y:410.09375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:O77tcKAFokcE_JogX_h3n",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Friends</p>',shapeColor:null},parentId:"page:page",index:"a9",typeName:"shape"},{x:698.7226562500001,y:497.0234375,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Ku24cDrP5-0A12pFZdch1",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:28,html:'<p style="text-align: center" data-font-size="default" class="paragraph">Family</p>',shapeColor:null},parentId:"page:page",index:"aA",typeName:"shape"},{x:698.7226562500001,y:628.6171875,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Bd8YnNb0vDeKdtlRMcNh_",type:"text",props:{color:"black",size:"m",w:212,text:"",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading" style="text-align: center">Me</h4>',shapeColor:"#FFFFFF"},parentId:"page:page",index:"aB",typeName:"shape"}],assets:[{meta:{},id:"asset:1250396056",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/1503bafa04414cc2a7b9848c75a23885/original/tldrawFile.png",w:800,h:801,mimeType:"image/png",isAnimated:!1}}],meta:{},width:360,svg:'<svg direction="ltr" width="695.4817604046791" height="695.5549853416027" viewBox="457.05160024957496 57.38818847034315 695.4817604046791 695.5549853416027" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 464.9051, 65.3516)" opacity="1"><g data-shape-type="geo"><path d="M0,339.814109084836a339.814109084836,339.814109084836,0,1,1,679.628218169672,0a339.814109084836,339.814109084836,0,1,1,-679.628218169672,0" width="679.628218169672" height="679.628218169672" id="shape:j5viwZdfHENtGXtzpl0By" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="679.4817604046791" height="679.5549853416026"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 510.918, 157.3506)" opacity="1"><g data-shape-type="geo"><path d="M0,293.817240866807a293.817240866807,293.817240866807,0,1,1,587.634481733614,0a293.817240866807,293.817240866807,0,1,1,-587.634481733614,0" width="587.634481733614" height="587.634481733614" id="shape:ktAwuZYMrly1jH7bcYmPU" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="587.4668563326944" height="587.5506630553135"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 565.871, 267.2348)" opacity="1"><g data-shape-type="geo"><path d="M0,238.85418428953272a238.85418428953272,238.85418428953272,0,1,1,477.70836857906545,0a238.85418428953272,238.85418428953272,0,1,1,-477.70836857906545,0" width="477.70836857906545" height="477.70836857906545" id="shape:TAw6_9rfNRYvwwWYH_HCE" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="477.7083685790655" height="477.70836857906556"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 616.094, 367.6858)" opacity="1"><g data-shape-type="geo"><path d="M0,188.62868467722495a188.62868467722495,188.62868467722495,0,1,1,377.2573693544499,0a188.62868467722495,188.62868467722495,0,1,1,-377.2573693544499,0" width="377.2573693544499" height="377.2573693544499" id="shape:EgzihrX9ISnR1IDnH3Nb-" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="377.2573693544497" height="377.25736935444945"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 668.947, 473.4824)" opacity="1"><g data-shape-type="geo"><path d="M0,135.77569043844434a135.77569043844434,135.77569043844434,0,1,1,271.5513808768887,0a135.77569043844434,135.77569043844434,0,1,1,-271.5513808768887,0" width="271.5513808768887" height="271.5513808768887" id="shape:PjG3dFUaDsYRxpsyfV9pW" style="fill-opacity: 0; stroke-width: 2;"></path><foreignObject width="271.1891698494137" height="271.3702149305733"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 710.2141, 556.2474)" opacity="1"><g data-shape-type="geo"><path d="M0,94.60699864322908a94.60699864322908,94.60699864322908,0,1,1,189.21399728645815,0a94.60699864322908,94.60699864322908,0,1,1,-189.21399728645815,0" width="189.21399728645815" height="189.21399728645815" id="shape:q-kyMkxhO2b6WeTH0ets_" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="189.2139972864582" height="188.17746321153578" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 725.4038, 93.6328)" opacity="1"><g><foreignObject width="160" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Strangers</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 191.5703)" opacity="1"><g><foreignObject width="212.83203125000003" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Community</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 300.832)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Acquaintances</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 410.0938)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Friends</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 497.0234)" opacity="1"><g><foreignObject width="213" height="48"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><p style="text-align: center" data-font-size="default" class="paragraph">Family</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 698.7227, 628.6172)" opacity="1"><g><foreignObject width="213" height="47" class="themed-heading-no-gradient" style="--body-color: #FFFFFF; --heading-color: #FFFFFF; --link-color: #FFFFFF; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading" style="text-align: center">Me</h4></div></div></foreignObject></g></g></svg>'}},targetCircles:{type:"diagram",attrs:{horizontalAlign:"center",shapes:[{x:929.6197161942252,y:155.0916582850458,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Lyhoe8Jk5MAMoudOizb8X",type:"geo",props:{w:500.14804571219815,h:500.14804571219815,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0G",typeName:"shape"},{x:967.92743672945,y:193.45976889185556,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:RYOvVH5HKvjk5GXZojXEJ",type:"geo",props:{w:423.4118244985782,h:423.4118244985782,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a0l",typeName:"shape"},{x:1007.5906901264586,y:233.06263221727892,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:guJhyRC2_2GgZ9f0HcNJR",type:"geo",props:{w:344.20609784773154,h:344.20609784773154,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a1V",typeName:"shape"},{x:1043.7799729004403,y:269.2519149912604,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:seEkM5XtC9yIw7hoXfdbS",type:"geo",props:{w:271.8275322997684,h:271.8275322997684,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a2V",typeName:"shape"},{x:1081.7319672065987,y:307.3344023477454,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:NS2ahjw0mGlpg-PMYOxM8",type:"geo",props:{w:195.6625575867985,h:195.6625575867985,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:null,strokeWidth:"sm"},parentId:"page:page",index:"a3V",typeName:"shape"},{x:1115.50785950286,y:340.94563257104426,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:3f1yjdcch_VMlWXK600PT",type:"geo",props:{w:128.4400971402006,h:128.4400971402006,geo:"ellipse",color:"black",labelColor:"black",fill:"solid",dash:"solid",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:"",html:'<p class="paragraph"></p>',shapeColor:"#26A688",strokeWidth:"sm"},parentId:"page:page",index:"a4V",typeName:"shape"},{x:1073.6937390503244,y:381.6656811411451,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:1FLv65NIvaurbbxTQrE18",type:"text",props:{color:"black",size:"m",w:212,text:"Me",font:"draw",align:"middle",autoSize:!1,scale:1,h:20,growY:27,html:'<h4 class="themed-heading" style="text-align: center">Me</h4>',shapeColor:"#FFFFFF"},parentId:"page:page",index:"aB",typeName:"shape"},{x:1381.0026472829704,y:173.17393949526377,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Q6dHtLEQiLE4grg0RCM-A",type:"line",parentId:"page:page",index:"aC",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:2.417216937863941,y:7.723304968297555},a2:{id:"a2",index:"a2",x:-52.226471674030236,y:48.30663418059406}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:245.48057367585784,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:V6TsnoH4I7lC4eFh_jCVf",type:"line",parentId:"page:page",index:"aCV",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:48.001155258881184,y:41.665293041944466},a2:{id:"a2",index:"a2",x:-47.682312332765534,y:66.29026038484135}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1418.8041070476638,y:554.4103614129623,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:Z7iFyapJSWnC-Nj48trDz",type:"line",parentId:"page:page",index:"aCd",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:28.116150018295414,y:-27.85190422662322},a2:{id:"a2",index:"a2",x:-138.26659908197,y:-91.24836881350053}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:405.1656811411451,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:UyPPQxh5Izzrta_PeC4Lv",type:"line",parentId:"page:page",index:"aCl",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:94.52397902306642,y:3674838211509268e-29},a2:{id:"a2",index:"a2",x:-62.28449928723883,y:3674838211509268e-29}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1396.40422015788,y:680.9410126688012,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:YvmG2cbsMv-yBAjUCLAZV",type:"line",parentId:"page:page",index:"aD",props:{dash:"solid",size:"m",color:"black",spline:"line",points:{a1:{id:"a1",index:"a1",x:-30.33301659894073,y:-34.31453399190673},a2:{id:"a2",index:"a2",x:-187.1016230443878,y:-198.11935311752904}},shapeColor:null,strokeWidth:"sm"},typeName:"shape"},{x:1456.428646134135,y:520.7240691140834,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:EdTs6rzP02YRCn-NSSouG",type:"text",props:{color:"black",size:"m",w:190.61066381032765,text:"Friends",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Friends</p>',shapeColor:null},parentId:"page:page",index:"aE",typeName:"shape"},{x:1373.8179823238074,y:633.1902718076452,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:9DzQSxc3Xru2fKGSdFx16",type:"text",props:{color:"black",size:"m",w:191,text:"Family",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Family</p>',shapeColor:null},parentId:"page:page",index:"aF",typeName:"shape"},{x:1496.9281991809464,y:383.1656811411449,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:VKIjJjszvAlrkJQJfGUV1",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Acquaintances",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Acquaintances</p>',shapeColor:null},parentId:"page:page",index:"aG",typeName:"shape"},{x:1451.2460195004435,y:263.4599680925235,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:V6a9zGihrEPKbWp0WyYFu",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Community",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Community</p>',shapeColor:null},parentId:"page:page",index:"aH",typeName:"shape"},{x:1389.4198642208344,y:155.14109047464459,rotation:0,isLocked:!1,opacity:1,meta:{},id:"shape:tneIatSl5yj2J6kQLD4Hy",type:"text",props:{color:"black",size:"m",w:204.36525326738322,text:"Strangers",font:"draw",align:"start",autoSize:!1,scale:1,h:44,growY:0,html:'<p class="paragraph">Strangers</p>',shapeColor:null},parentId:"page:page",index:"aI",typeName:"shape"}],assets:[{meta:{},id:"asset:1250396056",type:"image",typeName:"asset",props:{name:"tldrawFile",src:"https://cdn-staging.gamma.app/QWjS6fBfpt/1503bafa04414cc2a7b9848c75a23885/original/tldrawFile.png",w:800,h:801,mimeType:"image/png",isAnimated:!1}}],meta:{},width:534.2222222222222,svg:'<svg direction="ltr" width="788.1107737708712" height="538.0491813330007" viewBox="921.8174254100752 147.14109047464459 788.1107737708712 538.0491813330007" stroke-linecap="round" stroke-linejoin="round" style="background-color: transparent;"><defs></defs><g transform="matrix(1, 0, 0, 1, 929.6197, 155.0917)" opacity="1"><g data-shape-type="geo"><path d="M0,250.07402285609908a250.07402285609908,250.07402285609908,0,1,1,500.14804571219815,0a250.07402285609908,250.07402285609908,0,1,1,-500.14804571219815,0" width="500.14804571219815" height="500.14804571219815" id="shape:Lyhoe8Jk5MAMoudOizb8X" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="499.9503364963482" height="500.04918133300066"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 967.9274, 193.4598)" opacity="1"><g data-shape-type="geo"><path d="M0,211.7059122492891a211.7059122492891,211.7059122492891,0,1,1,423.4118244985782,0a211.7059122492891,211.7059122492891,0,1,1,-423.4118244985782,0" width="423.4118244985782" height="423.4118244985782" id="shape:RYOvVH5HKvjk5GXZojXEJ" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="423.17913672789973" height="423.29546462452595"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1007.5907, 233.0626)" opacity="1"><g data-shape-type="geo"><path d="M0,172.10304892386577a172.10304892386577,172.10304892386577,0,1,1,344.20609784773154,0a172.10304892386577,172.10304892386577,0,1,1,-344.20609784773154,0" width="344.20609784773154" height="344.20609784773154" id="shape:guJhyRC2_2GgZ9f0HcNJR" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="343.9254156609416" height="344.0657281324484"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1043.78, 269.2519)" opacity="1"><g data-shape-type="geo"><path d="M0,135.9137661498842a135.9137661498842,135.9137661498842,0,1,1,271.8275322997684,0a135.9137661498842,135.9137661498842,0,1,1,-271.8275322997684,0" width="271.8275322997684" height="271.8275322997684" id="shape:seEkM5XtC9yIw7hoXfdbS" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="271.4649529254623" height="271.6461821185811"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1081.732, 307.3344)" opacity="1"><g data-shape-type="geo"><path d="M0,97.83127879339925a97.83127879339925,97.83127879339925,0,1,1,195.6625575867985,0a97.83127879339925,97.83127879339925,0,1,1,-195.6625575867985,0" width="195.6625575867985" height="195.6625575867985" id="shape:NS2ahjw0mGlpg-PMYOxM8" style="fill-opacity: 1; stroke-width: 2;"></path><foreignObject width="195.1606169331522" height="195.41142609724233"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1115.5079, 340.9456)" opacity="1"><g data-shape-type="geo"><path d="M0,64.2200485701003a64.2200485701003,64.2200485701003,0,1,1,128.4400971402006,0a64.2200485701003,64.2200485701003,0,1,1,-128.4400971402006,0" width="128.4400971402006" height="128.4400971402006" id="shape:3f1yjdcch_VMlWXK600PT" style="fill-opacity: 1; --shape-bg-color-override: #26A688; --shape-border-color-override: #3fbfa1ff; stroke-width: 2;"></path><foreignObject width="127.72281225789044" height="128.08095257852762" class="themed-heading-no-gradient" style="--body-color: #fff; --heading-color: #fff; --link-color: #fff; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center; --vertical-align: center;"><div class="text"><p class="paragraph"></p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1073.6937, 381.6657)" opacity="1"><g><foreignObject width="213" height="47" class="themed-heading-no-gradient" style="--body-color: #FFFFFF; --heading-color: #FFFFFF; --link-color: #FFFFFF; --link-color-inverted: #000; --link-color-hover: #e6e6e6ff;"><div class="textbox" style="--text-align: center; --horizontal-align: center;"><div class="text"><h4 class="themed-heading" style="text-align: center">Me</h4></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1381.0026, 173.1739)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M2.42, 7.72L-52.23, 48.31" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 245.4806)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M48, 41.67L-47.68, 66.29" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1418.8041, 554.4104)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M28.12, -27.85L-138.27, -91.25" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 405.1657)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M94.52, 0L-62.28, 0" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1396.4042, 680.941)" opacity="1"><g data-shape-type="line"><path stroke-width="3.5px" stroke="#1d1d1d" fill="none" d="M-30.33, -34.31L-187.1, -198.12" style="--stroke-width: 2;"></path></g></g><g transform="matrix(1, 0, 0, 1, 1456.4286, 520.7241)" opacity="1"><g><foreignObject width="191" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Friends</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1373.818, 633.1903)" opacity="1"><g><foreignObject width="192" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Family</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1496.9282, 383.1657)" opacity="1"><g><foreignObject width="206" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Acquaintances</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1451.246, 263.46)" opacity="1"><g><foreignObject width="205" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Community</p></div></div></foreignObject></g></g><g transform="matrix(1, 0, 0, 1, 1389.4199, 155.1411)" opacity="1"><g><foreignObject width="205" height="44"><div class="textbox" style="--text-align: left; --horizontal-align: start;"><div class="text"><p class="paragraph">Strangers</p></div></div></foreignObject></g></g></svg>'}}};var c={src:"/_next/static/media/Concentric.2b092fc4.svg",height:96,width:253,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/Flywheel.fd4813bb.svg",height:96,width:254,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/Gantt.9e741fcd.svg",height:96,width:253,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/Kanban.004b9ebf.svg",height:96,width:253,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/Quadrants.61681555.svg",height:96,width:254,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/Target.99d9a5a8.svg",height:96,width:253,blurWidth:0,blurHeight:0},f={src:"/_next/static/media/Venn.7a87e038.svg",height:96,width:254,blurWidth:0,blurHeight:0};let x=()=>[{key:"diagram",name:()=>r.ag._({id:"G1q1hG"}),keywords:["sketch","drawing","shapes","diagram","canvas","freeform"],shortcut:"/diagram"},{key:"flywheel",name:()=>r.ag._({id:"6BBMcV"}),keywords:["cycle","circle","diagram","flywheel"],previewImage:u,icon:i.zio},{key:"quadrant",name:()=>r.ag._({id:"tmk28W"}),keywords:["matrix","quadrant","diagram","2x2"],previewImage:m,icon:i.jtV},{key:"venn",name:()=>r.ag._({id:"z5TX2d"}),previewImage:f,icon:i.Arq,keywords:["venn","diagram"]},{key:"targetCircles",name:()=>r.ag._({id:"s07vVU"}),keywords:["target","circles","nested","concentric","diagram","bullseye"],icon:i.scR,previewImage:g},{key:"concentricCircles",name:()=>r.ag._({id:"SqseBa"}),keywords:["concentric","circles","diagram"],icon:i.W3K,previewImage:c},{key:"calendarWeek",name:()=>r.ag._({id:"ToE1YL"}),keywords:["week","days","calendar","diagram","kanban","schedule","timeline"],icon:i.Nl7,previewImage:h},{key:"calendarMonths",name:()=>r.ag._({id:"jIipv0"}),keywords:["month","days","calendar","diagram","kanban","schedule","gantt chart","timeline"],icon:i.jAY,previewImage:p}].map(e=>{let t="diagram"===e.key?{type:"diagram",attrs:{}}:d[e.key];return{nodeName:"diagram",icon:i.Kak,...e,execute:e=>{let n=(0,s.RA)(),i=a()(t);i.attrs.id=n,(0,s.Sc)(n,!0),e.commands.insertContent(i)},dragStartFn:e=>{let n=(0,s.RA)(),i=a()(t);i.attrs.id=n,(0,s.Sc)(n,!0),(0,l.UV)(e,i)}}}).filter(e=>!!e)},10806:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});let i={cardLayoutsEnabled:!1},r=e=>{if(!e)return{...i};let t=null;return("doc"===e.type.name?t=e.nodeAt(0):"document"===e.type.name&&(t=e),t)?{...i,...t.attrs.docFlags}:(console.debug("[getDocFlags] could not find document node, returning defaults"),{...i})}},50645:function(e,t,n){"use strict";n.d(t,{Dw:function(){return v},LN:function(){return g},WD:function(){return C},kT:function(){return f},pG:function(){return x}});var i=n(52322),r=n(38035),o=n(75009),a=n(24772),l=n(27875),s=n.n(l),d=n(71383),c=n(87103),u=n(97912),p=n(78112),h=n(33945),m=n(53078);let g=()=>{let e=(0,d.CG)(p.gh)===h.q.SLIDE_VIEW,{src:t,width:n,height:a,paddingY:l,paddingX:s}=C();if(!t)return null;let c=(0,u.SN)(t,u.gJ),g=e?{position:"absolute",right:"".concat(s,"px"),top:"".concat(l,"px"),justify:"end",align:"start",width:"".concat(n,"px"),height:"".concat(a,"px")}:{position:"sticky",left:"".concat(s,"px"),top:"calc(100% - ".concat(a,"px - ").concat(l,"px)"),justify:"start",width:"".concat(n,"px"),height:"".concat(a,"px")};return(0,i.jsx)(r.k,{...g,className:"logo",zIndex:m.S.customerLogo,borderRadius:"md",contentEditable:!1,userSelect:"none",children:(0,i.jsx)(o.E,{src:c,maxH:"100%",maxW:"100%",transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none","data-testid":"customer-logo","data-customer-logo-image":!0,objectFit:"contain",objectPosition:e?"top right":"bottom left"})})},f=()=>{let{src:e,width:t,height:n}=x((0,d.CG)(p.Pu),w);if(!e)return null;let a=(0,u.SN)(e,u.gJ);return(0,i.jsx)(r.k,{w:"100%",justify:"center",align:"center",mt:6,mb:8,"data-id":"customer-logo-wrapper",children:(0,i.jsx)(o.E,{src:a,w:"".concat(t,"px"),zIndex:m.S.customerLogo,h:"".concat(n,"px"),transitionProperty:"width, height",transitionDuration:"normal",pointerEvents:"none",objectFit:"contain",objectPosition:"bottom"})})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,n=1,i=e.logoUrl,{logoImage:r}=e.config;if(r&&r.meta){var o;n=s()(r.meta.aspect_ratio||r.meta.width/r.meta.height,.5,3),i=null!==(o=r.src)&&void 0!==o?o:i}if(!i)return{width:0,height:0,paddingY:0,paddingX:0};let a=Math.sqrt(t/n),l=t>8e3?30:t>5e3?24:18;return{width:Math.round(a*n),height:Math.round(a),paddingY:l,paddingX:l,src:i}},v={base:900,lg:2500,xl:4900,"2xl":8100,"3xl":1e4},y={base:1600,md:2500,lg:4225,xl:7225,"2xl":9025,"4xl":12100},b=4900,w=5625,C=()=>{let e=(0,d.CG)(p.gh)===h.q.SLIDE_VIEW,t=(0,a.S)(e?y:v),n=c.Pv?b:c.QX?8100:t;return{...x((0,d.CG)(p.Pu),n),position:e?"top-right":"bottom-left"}}},34584:function(e,t,n){"use strict";n.d(t,{x:function(){return c},S:function(){return d}});var i=n(37243),r=n(27191),o=n(18149),a=n.n(o),l=n(78112);class s{compute(e){let t=e.firstChild;if(!t)return this;let n=t.attrs;return a()(n,this.value)||(this.hasChanges=!0),this.value=n,this}apply(e,t){return e.docChanged&&this.compute(e.doc),this}processChanges(e){this.hasChanges&&this.value&&e((0,l.Qt)({docAttrs:this.value})),this.hasChanges=!1}constructor(){this.hasChanges=!1,this.value=null}}let d=new r.H$("documentAttrs"),c=i.hj.create({name:"documentAttrs",addProseMirrorPlugins:()=>[new r.Sy({key:d,state:{init:()=>new s,apply:(e,t,n,i)=>t.apply(e,i)}})]})},58284:function(e,t,n){"use strict";n.d(t,{i:function(){return r},m:function(){return i}});let i="10vh",r="80vh"},53078:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});let i={presentBg:1,customerLogo:4,cardButtons:11,siteNav:21,filmstrip:21,toolbar:22}},92179:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var i=n(52322),r=n(2784),o=n(71383),a=n(78112),l=n(3063),s=n(26714),d=n(83091),c=n(1496),u=n(42822),p=n(64253),h=n(65068);let m=e=>{let{icon:t="⋮",isVisible:n,isSelected:r,label:o,onClick:a,onDragStart:l,...s}=e,{color:d,bg:c,hoverColor:m,hoverBg:g,borderColor:f}=(0,h.lv)(r);return(0,i.jsx)(p.kH,{placement:"top",label:r?void 0:o,children:(0,i.jsx)(u.M,{position:"absolute",width:"16px",height:"22px",fontWeight:"900",fontFamily:"Inter, sans-serif",background:c,backdropFilter:"blur(8px)",border:"1px solid",borderColor:f,color:d,borderRadius:"sm",boxShadow:"sm",fontSize:"16px",cursor:"pointer",opacity:r||n?1:0,_hover:{color:m,background:g,opacity:1},...s,className:"drag-handle",onClick:a,onDragStart:l,draggable:!0,contentEditable:!1,_after:{position:"absolute",content:'""',inset:-2},children:t})})},g={top:{top:"0",left:"50%",height:"16px",width:"26px",pt:"1px",icon:"⋯",zIndex:"3",transform:"translateY(-50%) translateX(-50%)",fontSize:"15px"},left:{top:"50%",left:"0",height:"26px",width:"16px",zIndex:"3",transform:"translateY(-50%) translateX(-50%)",fontSize:"15px"},outside:{top:0,left:-6},inside:{top:2,left:3}},f=e=>{let{handlePlacement:t="outside",editor:n,getPos:u,decorations:p,isVisible:h,onClick:f,node:x,selected:v,extension:y,updateAttributes:b,deleteNode:w,...C}=e,k=(0,o.CG)(a.hN),j=(0,r.useCallback)(e=>{n.commands.selectNodeAtPos(u()),e.stopPropagation()},[n,u]),S=(0,r.useCallback)(e=>{var t;let i=(null===(t=e.target.closest("[data-node-view-wrapper]"))||void 0===t?void 0:t.querySelector("[data-selection-ring]"))||void 0;(0,c.SS)(n,e.nativeEvent,u(),i),e.stopPropagation()},[n,u]);if(!k)return null;let A=(0,l.WE)(p),I=(0,d.v)(p),z=(0,s.EL)(p);return null!=h||(h=A||I),(0,i.jsx)(m,{isSelected:z,isVisible:h,onClick:f||j,onDragStart:S,...g[t],...C})}},1496:function(e,t,n){"use strict";n.d(t,{SS:function(){return b},YR:function(){return f},nM:function(){return w},rc:function(){return v},z7:function(){return y}});var i=n(37243),r=n(27191),o=n(31335),a=n(92035),l=n(38636),s=n(88594),d=n(54563),c=n(42616),u=n(40405),p=n(46007),h=n(31292),m=n(96236),g=n(20706);let f=24,x=(e,t,n,i)=>{if(i&&((0,m.BF)(i)||(0,h.E)(i)||(0,s.m)(i))||w(e)||(0,g.O4)(e)||!(0,o.zh)(e))return!1;if((0,p.fP)(e)){let e=n.state.doc.resolve(t);return!(0,u.u5)(e)}return!0},v=(e,t)=>{var n,r,o;let a;let l=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1,(null===(r=t.posAtCoords({...e,left:e.left+26}))||void 0===r?void 0:r.inside)||-1,(null===(o=t.posAtCoords({...e,left:e.left+26+22}))||void 0===o?void 0:o.inside)||-1);if(-1==l)return;try{a=t.state.doc.resolve(l)}catch(e){return}let s=a.nodeAfter,d=s&&x(s,l,t,a.parent)?{pos:l,depth:a.depth,node:s}:(0,i.qv)(a,e=>x(e,l,t));if(!d)return;let{pos:c,depth:u,node:p}=d,h=t.nodeDOM(c);if(!(h instanceof HTMLElement))return;let m=h,g=h.querySelector("[data-content-reference]");if(g){let e=t.posAtDOM(g,0);(p.isAtom&&e===c||e===c+1)&&(m=g)}return{pos:c,depth:u,el:m,node:p}},y=(e,t)=>{let n={left:0,top:0};if(e.isTextblock){let e=t.querySelector("[data-node-view-content]")||t,i=parseInt(window.getComputedStyle(e).lineHeight);n.top=(i-22)/2}else(0,o.KH)(e)?(0,c.HD)(e)?n.left=0-t.clientWidth*(d.r0-1)/2:(n.left=32,n.top=12):(0,m.CU)(e)&&(n.left=-22);return n},b=(e,t,n,i)=>{let{view:o,state:s}=e;if(!t.dataTransfer||!i&&!(i=e.view.domAtPos(n).node))return;let d=i.dataset.contentReference,c=0,u=0;if((0,a.i7)()&&d){let[e,t]=d.split(",").map(parseFloat);e&&t&&(c=e,u=t)}t.dataTransfer.clearData(),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",i.innerHTML),t.dataTransfer.setData("text/plain",i.textContent||""),t.dataTransfer.setDragImage(i,c,u);let p=r.qv.create(s.doc,n),h=p.content();o.dispatch(o.state.tr.setSelection(p)),o.dragging={slice:h,move:!0};let m=(0,l.lG)({pos:n,editor:e,from:p.from,to:p.to});m&&(o.dragging.annotations=m)},w=e=>e.type.spec.containerHandle},77221:function(e,t,n){"use strict";n.d(t,{RA:function(){return c},Sc:function(){return d},Us:function(){return l},ZF:function(){return s}});var i=n(37164),r=n(71383),o=n(27102),a=n(78112);let l=(e,t,n)=>{e&&t&&e.replacePageContent(t.shapes,t.bindings,n)},s=(e,t)=>{e.setSetting("isSnapping",t),setTimeout(()=>{(0,o.kC)(e,t?128:10)})},d=(e,t)=>{(0,r.bh)().dispatch((0,a.h)(t?{drawingId:e}:{drawingId:null}))},c=()=>(0,i.x0)(5)},35013:function(e,t,n){"use strict";n.d(t,{Hy:function(){return C},Pi:function(){return k}});var i=n(52322),r=n(37243),o=n(27191),a=n(2784),l=n(52138),s=n(12971),d=n(72205),c=n(78851);let u=(e,t)=>(n,i)=>{let r={...n.getState(e.view.state)};r.active=!0,r.key=i,r.query="",t.setMeta(n,r)};var p=n(71383),h=n(78112),m=n(97134),g=n(9237);let f=e=>{let{ref:t,pickerInstance:n}=e;(0,a.useImperativeHandle)(t,()=>{let e=e=>{var t,i,r;let o=null===(r=n.component)||void 0===r?void 0:null===(i=r.refs)||void 0===i?void 0:null===(t=i.searchInput)||void 0===t?void 0:t.current;if(o){let{key:t,code:n}=e;o.dispatchEvent(new KeyboardEvent("keydown",{key:t,code:n}))}return e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:t=>{let{event:n}=t;return!!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"].includes(n.key)&&e(n)}}})},x=(0,a.forwardRef)((e,t)=>{let{query:n,onSelect:r}=e,o=(0,p.CG)(h.yx),s=(0,m.py)("edit",o),[d,c]=(0,a.useState)(null),u=(0,a.useCallback)(e=>{if(c(e),e.shadowRoot){let t=document.createElement("style");t.innerHTML="nav + div.padding-lr { display: none }",e.shadowRoot.appendChild(t)}e.addEventListener("mousedown",g.br)},[]);f({ref:t,pickerInstance:d}),(0,a.useEffect)(()=>{var e,t,i;if(!d)return;let r=null===(i=d.component)||void 0===i?void 0:null===(t=i.refs)||void 0===t?void 0:null===(e=t.searchInput)||void 0===e?void 0:e.current;r&&(r.value=n,r.dispatchEvent(new Event("input",{bubbles:!0})))},[d,n]);let x=(0,a.useCallback)(e=>{let t=(0,l.Oj)(e.id);t&&r(t)},[r]);return s?(0,i.jsx)(l.h5,{onCreate:u,perLine:9,searchPosition:"sticky",handlePick:x,shouldFocusSearch:!1,dataTargetName:"emoji-list"}):(0,i.jsx)(i.Fragment,{})});var v=n(57822);let y=/:([a-zA-Z0-9_+-]+):$/,b=new o.H$("EmojiMenu"),w=e=>{let t=(0,l.N$)(e);return{id:e.id,native:t}},C=r.NB.create({name:"emoji",group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes:()=>({id:{},native:{}}),addStorage:()=>({hasMigrated:!1,isMigrationScheduled:!1}),parseHTML:()=>[{tag:"span.emoji:not([id])",skip:!0},{tag:"span[class=emoji]"}],addCommands(){return{openEmojiPicker:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return t=>{let{commands:n,tr:i,editor:r}=t;return u(r,i)(b,":"),!e||n.insertContent(":")}},migrateNativeEmojis:()=>e=>{let{editor:t}=e;return!this.storage.hasMigrated&&!this.storage.isMigrationScheduled&&(this.storage.isMigrationScheduled=!0,l.V5.then(()=>{t.commands.command(e=>{let{tr:t,state:n}=e,{doc:i,schema:r}=n;return i.descendants((e,n,i)=>{j({node:e,pos:n,parent:i,tr:t,schema:r})}),this.storage.hasMigrated=!0,this.storage.isMigrationScheduled=!1,!0})}),!0)}}},addInputRules:()=>[new r.VK({find:y,handler:e=>{let{range:t,match:n,commands:i}=e,r=n[1],o=(0,l.Oj)(r);if(!o)return;let a=w(o);i.insertContentAt(t,{type:"emoji",attrs:a})}})],renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["span",(0,r.P1)(t,{class:"emoji"}),"".concat(n.attrs.native||"�")]},renderHTMLforAI(e){let{node:t}=e;return t.attrs.native||""},renderText(e){let{node:t}=e;return"".concat(t.attrs.native||"�")},addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("emojiTransform"),appendTransaction:(e,t,n)=>(0,s.gj)(e,n,j)})]}),k=(0,c.ty)({name:"emojiShortcuts",char:":",pluginKey:b,MenuComponent:(0,a.forwardRef)((e,t)=>{let{query:n,editor:r}=e;return r.isEditable?(0,i.jsx)(x,{ref:t,query:n,onSelect:e=>{let{id:t}=e,i=(0,l.N$)(e),o=r.state.selection;r.chain().deleteRange({from:o.from-n.length-1,to:o.to}).insertContent({type:"emoji",attrs:{id:t,native:i}}).insertContent(" ").run()}}):null}),priority:d.a.EmojiShortcuts}),j=e=>{let{node:t,pos:n,tr:i,schema:r}=e;if(!(0,l.zx)())return!1;if(!t.isText||!t.text)return!0;let o=t.marks.map(e=>e.toJSON()),{replaced:a,nodes:s}=(0,v.W)(t.text,o);try{a&&i.replaceWith(i.mapping.map(n),i.mapping.map(n+t.nodeSize),s.map(e=>r.nodeFromJSON(e)))}catch(e){console.error("[migratePlugin] Error migrating emoji",{err:e,pos:n,text:t.text,node:t,nodes:s})}return!0}},61839:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var i=n(56230);let r=n.n(i)()()},57822:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var i=n(52138),r=n(61839);let o=(e,t)=>{let n=[],o=e.matchAll(r.V),a=0;for(let r of o){let o=r.index;if(void 0===o)continue;let l=o+r[0].length,s=r[0],d=(0,i.vb)(s);if(!d)continue;let c=(0,i.Oj)(d),u=e.slice(a,o);u.length>0&&n.push({type:"text",text:u,marks:t});let p={type:"emoji",attrs:{native:s,id:null==c?void 0:c.id},marks:t};a=l,n.push(p),console.debug("[migratePlugin] Replacing bad emoji",{start:o,end:l,native:s,newNode:p,textBefore:u,match:r})}let l=e.slice(a);return 0===a?{replaced:!1,nodes:n}:(l&&n.push({type:"text",text:l,marks:t}),{replaced:!0,nodes:n})}},8607:function(e,t,n){"use strict";n.d(t,{R:function(){return d},_:function(){return s}});var i=n(37243),r=n(27191),o=n(52780),a=n(12971);let l=e=>e.isTextblock||["gallery","cardLayoutItem","buttonGroup","navbarLinks","navbarButtons","toggleSummary"].includes(e.type.name),s=i.hj.create({name:"emptyNodes",addOptions:()=>({emptyNodeClass:"is-empty",showOnlyWhenEditable:!0,showOnlyCurrent:!1}),addProseMirrorPlugins(){return[new r.Sy({key:new r.H$("emptyNodes"),props:{decorations:e=>{let{doc:t,selection:n}=e,i=[],r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=n;if(r)return t.descendants((e,t)=>{if(!l(e))return;let n=s>=t&&s<=t+e.nodeSize,r=(0,a.$y)(e);(n||!this.options.showOnlyCurrent)&&r&&i.push(o.p.node(t,t+e.nodeSize,{class:this.options.emptyNodeClass},{isEmpty:!0}))}),o.EH.create(t,i)}}})]}}),d=e=>e.some(e=>e.spec.isEmpty)},73281:function(e,t,n){"use strict";n.d(t,{_g:function(){return A},ei:function(){return w},yv:function(){return b}});var i=n(73200),r=n(37243),o=n(27191),a=n(52780),l=n(71383),s=n(52659),d=n(31601),c=n(78112),u=n(33945),p=n(12971),h=n(48105),m=n(42616),g=n(54317),f=n(43911),x=n(63053),v=n(20706);let y=new o.H$("expandableNodes"),b=e=>e.some(e=>e.spec.isExpandableNode),w=e=>e instanceof h.c&&0===e.side&&C(e.node),C=e=>!0===e.type.spec.expandable,k=(e,t)=>{if(!(null==t?void 0:t.from))return!1;let n=(0,p.Sh)(e,t.from),i=(0,s.v4)(n);return(null==i?void 0:i.inView)===!0},j=(e,t,n)=>{let i=(0,g.XE)(e.view.nodeDOM(t)),r=(0,s.v4)(i);if(!r)return!1;let{bottomInView:o,topInView:a}=r;return"top"===n?a:o},S=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e.state.selection,a=r instanceof h.c&&1===r.side?r.to:r.from;if(a<=t){if(j(e,t,"top"))return null}else if(a>=n){if(j(e,t,"bottom"))return null}else{if(k(e,r))return null;let t=e.state.doc.resolve(a);if(k(e,o.Y1.findFrom(t,-1,!1))||k(e,o.Y1.findFrom(t,1,!1)))return null}let l=(0,p.TV)({editor:e,side:i?"bottom":"top",margin:200});if(l.pos){let t=o.Y1.findFrom(e.state.doc.resolve(l.pos),i?1:-1,!1);return(null==t?void 0:t.from)||null}return null},A=r.hj.create({name:"expandableNodes",extendNodeSchema(e){var t;return{expandable:null!==(t=(0,r.nU)((0,r.Nl)(e,"expandable",e)))&&void 0!==t&&t}},addCommands:()=>({expandOrCollapseExpandableNode:e=>t=>{let{state:n,chain:i}=t,r=null!=e?e:n.selection.from,o=n.doc.nodeAt(r);if(!o||!C(o))return!1;let a=(0,l.bh)();switch(o.type.name){case"card":if(a.dispatch((0,c.Qx)({attached:!1})),null===d.co||void 0===d.co||d.co.track(d.AA.CARD_EXPANDED,{is_present_mode:!0,method:"enter_key"}),(0,m.HD)(o.attrs.id))return i().descendIntoCurrentCard(r).reHighlightExpandableNode().run();return i().spotlightCollapseCard(r).reHighlightExpandableNode().run();case"toggle":{(0,v.xB)(o.attrs.id,!(0,v.fH)(o.attrs.id));let t=i();return e&&t.spotlightNextBlock(),t.reHighlightExpandableNode().run(),!0}case"image":case"video":case"embed":return a.dispatch((0,c.RW)({nodeId:o.attrs.id})),!0;case"gallery":{let e=o.firstChild;if(e)return a.dispatch((0,c.RW)({nodeId:e.attrs.id})),!0;return!1}default:return!1}},goToNextExpandableNode:e=>t=>{var n;let{editor:i,tr:r,state:o}=t,a=x.M.getState(i.state),l=(0,g.Bw)(i,a.cardId);if(!l)return!1;let d=l.node.attrs.id,c=l.pos,u=l.pos+l.node.nodeSize,p=i.state.selection,m=w(p),v=p instanceof h.c,b=S(i,c,u,e),k=(null===(n=y.getState(o))||void 0===n?void 0:n.lastApplied)||+new Date;if(m&&!b&&+new Date-k>3e3)return i.commands.reHighlightExpandableNode();r.setMeta(y,{});let j=v&&(-1===p.side&&e||1===p.side&&!e)?-1:0,A=Math.min(Math.max(b||(m||!v?p.from:1===p.side?p.to+j:p.from+j),c),u-1),I=(0,f.xd)(i,d,A,C,e);if(console.debug("[ExpandableNodes] goToNextExpandableNode",{posToUse:A,overridePos:b},I),!I.pos||!I.domNode||I.cardId!==d)return r.setSelection(h.c.create(i.state.doc,c,e?-1:1)),!1;let z=(0,s.v4)(I.domNode,50);return(null==z?void 0:z.inView)?(r.setSelection(h.c.create(i.state.doc,I.pos)),(0,s.cC)("editor").scrollElementIntoView({element:I.domNode,attempts:0,offsetFromTop:null}),!0):(m&&r.setSelection(h.c.create(i.state.doc,p.from,e?-1:1)),!1)},reHighlightExpandableNode:()=>e=>{let{tr:t,editor:n}=e;return t.setMeta(y,{shouldAddResetClass:!0}),requestAnimationFrame(()=>{n.commands.command(e=>{let{tr:t}=e;return t.setMeta(y,{shouldAddResetClass:!1}),!0})}),!0}}),addProseMirrorPlugins:()=>[new o.Sy({key:y,state:{init:()=>({lastApplied:0,shouldAddResetClass:!1}),apply(e,t){let n=e.getMeta(y);return n?{...t,lastApplied:+new Date,...n}:t}},props:{decorations(e){let t=x.M.getState(e);if(null==t?void 0:t.pos)return a.EH.empty;let n=y.getState(e);if((0,c.gh)((0,l.bh)().getState())!==u.q.SLIDE_VIEW)return a.EH.empty;let r=e.selection;if(!w(r)||!(r instanceof h.c))return a.EH.empty;let o=r.node;return a.EH.create(e.doc,[a.p.node(r.from,r.from+o.nodeSize,{class:(0,i.cx)("expandable-node-selected",(null==n?void 0:n.shouldAddResetClass)&&"expandable-node-reset")},{isExpandableNode:!0})])}}})]})},20145:function(e,t,n){"use strict";n.d(t,{Bf:function(){return s},Bi:function(){return u},Zh:function(){return d},hY:function(){return c}});var i=n(37243),r=n(84305),o=n(18617),a=n(56907),l=n(35275);let s=i.hj.create({name:"fontSize",addProseMirrorPlugins:()=>[(0,a.a)()],addInputRules:()=>Object.entries((0,o.yw)()).map(e=>{let[t,{inputRegex:n,type:i}]=e;return n?(0,r.A0)({find:n,getAttributes:e=>("heading"!==i||c(e).includes("heading"))&&("title"!==i||c(e).includes("title"))?{fontSize:t}:null}):null}).filter(e=>!!e),addKeyboardShortcuts(){return Object.entries((0,o.yw)()).reduce((e,t)=>{let[n,{level:i,type:r}]=t;return"heading"===r&&i?{...e,["Mod-Alt-".concat(i)]:()=>this.editor.commands.setFontSize(n)}:e},{})},addCommands:()=>({setFontSize:e=>t=>{let{tr:n,dispatch:i,state:r}=t;return!i||(n.selection.ranges.forEach(t=>{let i=t.$from.pos,o=t.$to.pos,{type:a,level:s}=(0,l.hx)(e),{nodes:d}=r.schema;r.doc.nodesBetween(i,o,(t,i)=>{var r;if("footnote"===t.type.name)return!1;if(t.isTextblock){if("heading"===a&&!c(t).includes("heading")){n.setNodeMarkup(i,d.heading,{...t.attrs,level:s}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i});return}if("title"===a&&!c(t).includes("title")){n.setNodeMarkup(i,d.title,{...t.attrs,level:s}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i});return}(null===(r=t.type.spec.attrs)||void 0===r?void 0:r.fontSize)?n.setNodeMarkup(i,void 0,{...t.attrs,fontSize:e}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i}):["heading","title"].includes(t.type.name)&&n.setNodeMarkup(i,d.paragraph,{...t.attrs,fontSize:e}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i})}})}),!0)}}),extendNodeSchema(e){var t;return{allowFontSizes:null!==(t=(0,i.nU)((0,i.Nl)(e,"allowFontSizes",e)))&&void 0!==t?t:""}}}),d=e=>{let{state:t}=e,{from:n,to:r}=t.selection;return[...new Set((0,i.b5)(t.doc,{from:n,to:r},e=>e.isTextblock).reverse().map(e=>{let{node:t}=e;return t.attrs.fontSize}).filter(e=>void 0!==e))]},c=e=>{var t,n;return null!==(n=null===(t=e.type.spec.allowFontSizes)||void 0===t?void 0:t.split(" "))&&void 0!==n?n:[]},u={default:null,keepOnSplit:!0,renderHTML:e=>({"data-font-size":e.fontSize}),parseHTML:e=>e.getAttribute("data-font-size")}},56907:function(e,t,n){"use strict";n.d(t,{a:function(){return l},z:function(){return s}});var i=n(27191),r=n(52780),o=n(35275);let a=e=>["calloutBox","smartLayoutCell"].includes(e.type.name),l=()=>new i.Sy({key:new i.H$("fontSize"),props:{decorations(e){let t=[];if(e.doc.descendants((e,n)=>{if(!a(e)||!e.firstChild)return;let i=(0,o.Aw)(e.firstChild);t.push(r.p.node(n,n+e.nodeSize,{},{isFirstChildFontSizeDecoration:!0,firstChildSize:i}))}),0!=t.length)return r.EH.create(e.doc,t)}}}),s=e=>{var t;return(null===(t=e.find(e=>e.spec.isFirstChildFontSizeDecoration))||void 0===t?void 0:t.spec)||{}}},24524:function(e,t,n){"use strict";n.d(t,{AW:function(){return h},H:function(){return p},NX:function(){return c},RV:function(){return u},t0:function(){return d}});var i=n(54073),r=n.n(i),o=n(37164),a=n(27191),l=n(71383),s=n(78112);let d=(e,t)=>{let n=(0,l.bh)();n.dispatch((0,s.K7)(t?{noteId:e}:{noteId:null}));let i=n.getState();!t&&(0,s.tY)(i)&&n.dispatch((0,s.AK)({isEditingMedia:!1})),!t&&(0,s._I)(i)&&n.dispatch((0,s.RW)({nodeId:null}))},c=r()(d,30),u=()=>{let e=(0,l.bh)().getState();return(0,s.II)(e)},p=()=>(0,o.x0)(5),h=e=>e instanceof a.qv&&"footnote"===e.node.type.name},39437:function(e,t,n){"use strict";n.d(t,{e:function(){return i},z:function(){return r}});let i="fromInnerEditor",r="fromOuterEditor"},21514:function(e,t,n){"use strict";n.d(t,{M:function(){return o},W:function(){return a}});var i=n(26151),r=n(39437);let o=e=>"footnote"==e.schema.topNodeType.name,a=function(e,t,n,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"footnote";e.forEach(e=>{let t=e.steps.filter(e=>e instanceof i.WJ||e instanceof i.xu);0==t.length||e.getMeta(r.e)||e.getMeta("appendedTransaction")||t.forEach(e=>{let{from:t,to:r,mark:l}=e;n.doc.nodesBetween(t,r,(n,s)=>{n.type.name===a&&s<t&&(e instanceof i.WJ?o.removeMark(t,r,l):e instanceof i.xu&&o.addMark(t,r,l))})})})}},97509:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});let i=n(39949).U.extend({addKeyboardShortcuts(){return{"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})},57941:function(e,t,n){"use strict";n.d(t,{X6:function(){return x},MQ:function(){return f}});var i=n(71391),r=n(27210),o=n(84305),a=n(44170),l=n(52322),s=n(73200),d=n(87254),c=n(7096),u=n(45075),p=n(50576),h=n(9325);let m=e=>{let{node:t,decorations:n}=e,{level:i,horizontalAlign:o,placeholder:a}=t.attrs,m=(0,p.V)(n),g=a||(m?d.ag._({id:"gLDJuJ"}):d.ag._({id:"1nLERW",values:{level:i}}));return(0,l.jsx)(u.lO,{...e,style:{display:"flex",flexDirection:"column",...(0,h.nN)(o)},children:(0,l.jsx)(r.ms,{level:i,"data-placeholder":g,className:(0,s.cx)("heading",c.A8),style:{minWidth:"min(100%, 10em)"}})})},g=[1,2,3,4],f=Math.max(...g),x=i.X.extend({selectable:!1,group:"block cardNotesBlock",addAttributes:()=>({level:{default:1,rendered:!1}}),addNodeView:()=>(0,r.fW)(m,{update:a.E7}),addInputRules(){return this.options.levels.map(e=>(0,o.Wy)({find:new RegExp("^(#{1,".concat(e,"})\\s$")),type:this.type,getAttributes:{level:e}},[this.editor.state.schema.nodes.bullet,this.editor.state.schema.nodes.numbered,this.editor.state.schema.nodes.todo]))}}).configure({levels:g})},9325:function(e,t,n){"use strict";n.d(t,{Ec:function(){return x},Kq:function(){return m},ZE:function(){return u},nN:function(){return p},yg:function(){return h}});var i=n(42946),r=n(87254),o=n(37243),a=n(27191),l=n(12971),s=n(72205);let d=["paragraph","heading","title","drawing","diagram","image","contributors","mediaPlaceholder","buttonGroup","navbarLinks","gallery","chart"],c=["left","right","center"],u=e=>c.find(t=>e.isActive({horizontalAlign:t})),p=e=>{let t=h(e);return{textAlign:e||void 0,alignItems:t||"var(--flex-align)","--flex-align":t}},h=e=>{if(e)return({left:"flex-start",center:"center",right:"flex-end"})[e]},m=o.hj.create({name:"horizontalAlign",priority:s.a.HorizontalAlign,addOptions:()=>({types:d,alignments:c,defaultAlignment:null}),addGlobalAttributes(){return[{types:this.options.types,attributes:{horizontalAlign:{default:this.options.defaultAlignment,keepOnSplit:!0,parseHTML:e=>e.style.textAlign||e.getAttribute("align")||this.options.defaultAlignment,renderHTML:e=>e.horizontalAlign?{style:"text-align: ".concat(e.horizontalAlign)}:{}}}}]},addCommands:()=>({toggleHorizontalAlign:e=>t=>{let{tr:n,dispatch:i,state:r,editor:o}=t;if(!i)return!0;let a=g(o,e)?null:e;return n.selection.ranges.forEach(e=>{let t=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(t,i,(e,t)=>{if("footnote"===e.type.name)return!1;d.includes(e.type.name)&&n.setNodeMarkup(t,void 0,{...e.attrs,horizontalAlign:a}).setMeta("annotationEvent",{type:"update-node-attrs",pos:t})})}),!0}}),addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.toggleHorizontalAlign("left"),"Mod-Shift-e":()=>this.editor.commands.toggleHorizontalAlign("center"),"Mod-Shift-r":()=>this.editor.commands.toggleHorizontalAlign("right"),Backspace:()=>{let{selection:e}=this.editor.state;if(!(e instanceof a.Bs)||!e.empty)return!1;let t=e.$from.parent;return!!d.includes(t.type.name)&&!!t.isTextblock&&!(t.nodeSize>2)&&t.attrs.horizontalAlign!=this.options.defaultAlignment&&this.editor.commands.toggleHorizontalAlign(this.options.defaultAlignment)}}}}),g=(e,t)=>{let n=c.filter(e=>e!==t);return e.isActive({horizontalAlign:t})&&!n.some(t=>e.isActive({horizontalAlign:t}))},f=e=>!(0,l.V2)(e,"horizontalAlign"),x=[{key:"alignLeft",name:()=>r.ag._({id:"VjjKVj"}),icon:i.elf,checkActive:e=>g(e,"left"),checkDisabled:f,apply:e=>e.chain().toggleHorizontalAlign("left").run(),shortcut:"Mod+Shift+L",enabledForTables:!0,alignment:"left"},{key:"alignCenter",name:()=>r.ag._({id:"95ckMP"}),icon:i.MB3,checkActive:e=>g(e,"center"),checkDisabled:f,apply:e=>e.chain().toggleHorizontalAlign("center").run(),shortcut:"Mod+Shift+E",enabledForTables:!0,alignment:"center"},{key:"alignRight",name:()=>r.ag._({id:"vTKw81"}),icon:i.S3c,checkActive:e=>g(e,"right"),checkDisabled:f,apply:e=>e.chain().toggleHorizontalAlign("right").run(),shortcut:"Mod+Shift+R",enabledForTables:!0,alignment:"right"}]},62580:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});var i=n(98775);let r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.nodeAfter;if(!r)return!1;e.deleteRange(t.pos,t.pos+r.nodeSize);let o=e.doc.nodeAt(t.pos),a=t.pos,l=1;(!n&&t.nodeBefore||n&&!o&&t.nodeBefore)&&(a=t.pos-t.nodeBefore.nodeSize,l=-1);let s=e.doc.resolve(a+1),d=(0,i.E)(e.doc.resolve(l>0?s.pos:s.end()),l);return d&&e.setSelection(d),!0}},95216:function(e,t,n){"use strict";n.d(t,{h:function(){return i},x:function(){return r}});let i=4,r={type:"gridCell",content:[{type:"paragraph"}]}},71355:function(e,t,n){"use strict";n.d(t,{BF:function(){return d},SA:function(){return l},TH:function(){return f},Tl:function(){return y},_5:function(){return s},oc:function(){return x},ug:function(){return b}});var i=n(37243),r=n(12971);let o=["card","document","gridLayout","gallery"],a=e=>e.isBlock&&!o.includes(e.type.name)&&!(e.isTextblock&&(0,r.bR)(e)),l=e=>"gridLayout"===e.type.name,s=e=>"gridCell"===e.type.name,d=(e,t,n,i)=>{let r=n&&c(e,n,t);if(r)return r;if(n&&!m(n,e.state.schema)||i)return null;let o=u(e,t,"right")||u(e,t,"left");return!o||n&&n.content.firstChild===o.node?null:o},c=(e,t,n)=>{var o;if(!g(t,e.state.schema))return null;let a=null===(o=e.posAtCoords({left:n.clientX,top:n.clientY}))||void 0===o?void 0:o.inside;if(!a||-1==a)return null;let{doc:l}=e.state,d=l.resolve(a),c=l.nodeAt(a),u=c&&s(c)?{node:c,pos:a}:(0,i.qv)(d,s),p=(null==u?void 0:u.pos)&&(0,r.Fu)(u.pos,e);if(!u||!p)return null;let h=n.clientX>p.left+p.width/2?"right":"left";return{pos:u.pos,node:u.node,rect:p,side:h}},u=(e,t,n)=>{var o;let l=null===(o=e.posAtCoords({left:t.clientX+("left"==n?40:-40),top:t.clientY}))||void 0===o?void 0:o.inside;if(!l||-1==l)return null;let{doc:s,schema:d}=e.state,c=s.resolve(l),u=s.nodeAt(l),m=u&&a(u)?{node:u,pos:l}:(0,i.qv)(c,a);if(!m)return null;let g=(0,r.Fu)(l,e);if(!g)return null;let f="left"==n?t.clientX-g.left:g.right-t.clientX,x=f<0;if(!(x&&f>-40||"right"==n&&f<(g.right-g.left)*.15))return null;let v=s.resolve(m.pos),y=(null==u?void 0:u.type.name)==="gridCell"&&p(v,d)||h(v,d);if(x||!y){let t=(0,i.qv)(c,e=>"gridCell"===e.type.name);if(t&&p(s.resolve(t.pos),d)){let i=(0,r.Fu)(t.pos,e);return i?{pos:t.pos,node:t.node,side:n,rect:i}:null}}return y?{pos:m.pos,rect:g,node:m.node,side:n}:null},p=(e,t)=>e.parent.canReplaceWith(e.index(),e.index(),t.nodes.gridCell),h=(e,t)=>e.parent.canReplaceWith(e.index(),e.indexAfter(),t.nodes.gridLayout),m=(e,t)=>t.nodes.gridCell.validContent(e.content),g=(e,t)=>t.nodes.gridLayout.validContent(e.content),f=e=>v(e,"gridLayout"),x=e=>{let t=v(e,"gridLayout");if(!t||!t.nodeAfter)throw Error();let n=t.nodeAfter,i=[],r=t.start(t.depth+1);for(let e=0;e<n.childCount;e++){let t=n.child(e);r+=0===e?0:n.child(e-1).nodeSize,i.push({node:t,pos:r})}return i},v=(e,t)=>{var n;if((null===(n=e.nodeAfter)||void 0===n?void 0:n.type.name)===t)return e;let i=e.doc;for(let n=e.depth;n>0;n--)if(e.node(n).type.name===t)return i.resolve(e.before(n));return null},y=(e,t)=>{let n=x(e),i=n[-1===t?n.length-1:t];return i?e.doc.resolve(i.pos):null},b=e=>x(e).findIndex(t=>t.pos===e.pos)},10902:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let i=["tel","mailto"]},92621:function(e,t,n){"use strict";n.d(t,{r:function(){return D}});var i=n(37243),r=n(70675),o=n(30764),a=n(27191),l=n(39198),s=n(12971),d=n(87103),c=n(1776),u=n(72205),p=n(59053),h=n(46007),m=n(10902),g=n(71383),f=n(78112),x=n(85391);let v=e=>new a.Sy({key:new a.H$("handleCmdClickLink"),props:{handleDOMEvents:{click:(t,n)=>{var i;let r=(0,g.bh)(),o=(0,f.hN)(r.getState()),a=null===(i=n.target)||void 0===i?void 0:i.closest("a"),l=null==a?void 0:a.href;if(!l||(null==a?void 0:a.closest("[data-comments-wrapper]")))return!1;n.preventDefault();let d=n.ctrlKey||n.metaKey,c=(0,s.g)(l),u=(0,f.xb)(r.getState()),p=(0,s.NC)(l,u);if(o){if(!d)return!1;if(p)return(0,x.l)(e,n,c),!1}else if(!d&&p)return(0,x.l)(e,n,c),!1;return window.open(l,"_blank"),!1}}}});var y=n(52322),b=n(28535),w=n(77533),C=n(332),k=n(11881),j=n(5879),S=n(38045),A=n(25925),I=n(2784),z=n(95405),L=n(68927),E=n(80834),N=n(27821),M=n(27210),_=n(92035),T=n(40382),R=n(31527);let H=(0,S.E)(b.xu),P=e=>{let{node:t,children:n}=e,{href:i,meta:r}=t.attrs,o=(0,N.C7)(),{linkUrl:a,handleClick:l}=(0,E.H)({url:i||""}),{interceptLinkClick:s,linkUrlSafe:d,isUntrusted:c,linkInterceptEnabled:u}=(0,L.x)(a),p=(0,I.useCallback)(e=>{if(null==l||l(e),u)return s(e)},[l,s,u]),{popperRef:h,referenceRef:m,isHovering:g,onMouseOver:f,onMouseOut:x,getPopperProps:v}=(0,T.Ux)({disabled:(0,_.f_)()}),b=!o&&!z.v.GAMMA_CYPRESS_TEST&&(0,_.i7)();return(0,y.jsxs)(M.T5,{as:"span",children:[c?(0,y.jsx)(w.x,{as:"span",textDecoration:"underline",color:"gray.500",children:(0,y.jsx)(j.cC,{id:"b7jHrl"})}):(0,y.jsxs)(w.x,{as:"a",className:"link",rel:"noopener nofollow",href:u?d||"":a,onClick:p,onMouseOver:f,onMouseOut:x,ref:m,children:[b&&(0,y.jsx)("span",{contentEditable:!1,children:"​"}),o?n:(0,y.jsx)(M.ms,{as:"span"}),b&&(0,y.jsx)("span",{contentEditable:!1,children:"​"})]}),!1===o&&g&&a&&r?(0,y.jsx)(C.h,{children:(0,y.jsx)(A.M,{children:(0,y.jsx)(H,{position:"relative",zIndex:"popover",ref:h,onMouseOver:f,onMouseOut:x,className:"link-preview-hover",...v(),...T.rc,w:"min(500px, 80vw)",minW:"auto !important",children:(0,y.jsxs)(k.f,{backgroundColor:"white",border:"1px solid",borderColor:"gray.200",shadow:"lg",borderRadius:"lg",_hover:{backgroundColor:"trueblue.50"},children:[(0,y.jsx)(R.fu,{node:t}),(0,y.jsx)(k.A,{href:a,target:"_blank",rel:"noopener nofollow",onClick:p})]})})})}):null]})};var O=n(81878);let D=r.ZP.extend({priority:u.a.Link,inclusive:!1,excludes:"underline footnoteLabel link",addAttributes:()=>({href:{default:""},source:{},thumbnail:{...(0,s.sw)("thumbnail")},embed:{...(0,s.sw)("embed")},meta:{...(0,s.sw)("meta")}}),addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),convertLinkToMedia:e=>t=>{let{chain:n,editor:i}=t,{href:r,...o}=i.getAttributes("link");if(!r||(0,O.H7)(r))return!1;if(!o.source)return n().extendMarkRange("link").insertEmbedAndFetchMetadata(r,e,!1).run(),!0;let a=p.ah[o.source],l=(null==a?void 0:a.nodeName)||"embed";return n().extendMarkRange("link").insertContent({type:l,attrs:{...o,sourceUrl:r,url:r,displayStyle:e}}).selectInsertedNode().run(),!0},convertMediaToLink:()=>e=>{let{state:t,chain:n}=e;if(!(t.selection instanceof a.qv))return!1;let{from:i,to:r,node:o}=t.selection;if(!(0,h.Bp)(o))return!1;let{sourceUrl:l,meta:s}=o.attrs,d=(null==s?void 0:s.title)||l||"link",c={from:i+1,to:i+1+d.length};return n().insertContentAt({from:i,to:r},[{type:"paragraph",attrs:{},content:[{type:"text",text:d}]}],{updateSelection:!0}).setTextSelection(c).setMark(D.name,{...o.attrs,href:l}).run(),!0},convertLinkToButton:()=>e=>{let{editor:t,chain:n}=e,{href:i=""}=t.getAttributes("link");return n().extendMarkRange("link").deleteSelection().insertContentAndSelect((0,l.e1)().buttonGroup).updateAttributes("button",{href:i}).run(),!0},convertButtonToLink:()=>e=>{let{chain:t,state:n,editor:r}=e,{selection:a}=n,l=(0,i.Kk)(e=>"button"===e.type.name)(a),s=(0,i.Kk)(e=>"buttonGroup"===e.type.name)(a);if(!s||!l)return!1;let{node:d,pos:c}=l,{node:u,pos:p}=s;if(!d)return!1;let h={type:"paragraph",content:d.content.toJSON()},m=u.maybeChild(0)===d,g=m?p:c,f=g+(m?1:2),x=f+o.NB.fromJSON(r.schema,h).content.size,v=t();return 1===u.childCount?v.deleteNode("buttonGroup"):v.deleteNode("button"),v.insertContentAt(g,h,{updateSelection:!1}).setTextSelection({from:f,to:x}).setMark(D.name,{href:d.attrs.href}).focus().run(),!0},convertButtonToMedia:e=>t=>{let{chain:n,state:r}=t,{selection:o}=r,a=(0,i.Kk)(e=>"button"===e.type.name)(o),l=(0,i.Kk)(e=>"buttonGroup"===e.type.name)(o);if(!a||!l)return!1;let{node:s,pos:d}=a,{node:c,pos:u}=l;if(!s||!c)return!1;let{href:p}=s.attrs;if(!p||(0,O.H7)(p))return!1;if(c.maybeChild(0)===s){let t=[];c.forEach(e=>{"button"===e.type.name&&e!==s&&t.push(e.toJSON())});let i=n();i.setNodeSelection(u).deleteNode("buttonGroup").insertEmbedAndFetchMetadata(p,e,!1),1!==c.childCount&&t.length>0&&i.insertContentAt(u+1,{type:"buttonGroup",content:t},{updateSelection:!1}),i.focus().run()}else n().setNodeSelection(d).insertEmbedAndFetchMetadata(p,e,!1).selectInsertedNode().focus().run();return!0},convertMediaToButton:()=>e=>{let{chain:t,state:n}=e;if(!(n.selection instanceof a.qv))return!1;let{node:i}=n.selection;if(!(0,h.Bp)(i))return!1;let{sourceUrl:r=""}=i.attrs;return t().deleteSelection().insertContentAt(n.selection.from,(0,l.e1)().buttonGroup).updateAttributes("button",{href:r}).focus().run(),!0},updateSurroundingLink:e=>t=>{let{state:n,chain:i,editor:r}=t,{from:o,to:a}=n.selection;return(0,O.m7)(e,r),i().extendMarkRange(D.name).unsetMark(D.name).setMark(D.name,{href:e}).setMeta("preventAutolink",!0).setTextSelection({from:o,to:a}),!0},removeSurroundingLink:()=>e=>{let{state:t,chain:n}=e,{from:i,to:r}=t.selection;return n().extendMarkRange("link").unsetMark("link").setMeta("preventAutolink",!0).setTextSelection({from:i,to:r}).focus(),!0}}},addKeyboardShortcuts(){return{"Mod-k":e=>{let{editor:t}=e,{selection:n}=t.state;return!n.empty&&t.commands.toggleMark(this.name)}}},addProseMirrorPlugins(){var e;let t=(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[];return d.cx||t.push((0,c.r)(this,P)),t.push(v(this.editor)),t}}).configure({HTMLAttributes:{target:void 0,rel:"noopener noreferrer",class:"link"},validate:O.DE,protocols:m.v,linkOnPaste:!1})},85391:function(e,t,n){"use strict";n.d(t,{l:function(){return a}});var i=n(36660),r=n(12971),o=n(48869);let a=(e,t,n)=>{if(!n)return;let a=(0,r.lI)(e,100);a&&(0,i.lO)({data:{fromPos:a.pos,fromPct:a.pct},emitChange:!1}),(0,o.D)({cardId:n,method:"push",data:{fromPos:null,fromPct:null}})}},81878:function(e,t,n){"use strict";n.d(t,{DE:function(){return a},H7:function(){return d},Td:function(){return s},m7:function(){return l}});var i=n(1960),r=n(70089),o=n(10902);let a=e=>!!e.includes("://"),l=(e,t)=>{d(e)||(0,i.ft)(e,n=>{let{doc:i,schema:o,tr:a}=t.state;(0,r.Nv)(i,t.schema.marks.link).forEach(t=>{let{node:i,pos:r}=t,l=i.marks.find(t=>"link"===t.type.name&&t.attrs.href==e);l&&a.removeMark(r,r+i.nodeSize,l).addMark(r,r+i.nodeSize,o.marks.link.create({...l.attrs,...n}))}),t.view.dispatch(a)}).catch(e=>{console.error("[Link.fetchUrlThenUpdateMarks]",e)})},s=e=>e.attrs.source||e.attrs.meta||e.attrs.embed,d=e=>{if(!e)return!1;let t=e&&e.toLowerCase();for(let e of o.v)if(t.startsWith(e+":"))return!0;return!1}},84092:function(e,t,n){"use strict";n.d(t,{Z:function(){return h},Q:function(){return m}});var i=n(37243);n(89902);var r=n(88892),o=n(27191),a=n(30240);let l=i.NB.create({name:"math_display",group:"block math",content:"text*",atom:!0,code:!0,renderHTML(e){let{HTMLAttributes:t}=e;return["math-display",(0,i.P1)(t,{class:"math-node"}),0]},parseHTML:()=>[{tag:"math-display"}]});var s=n(26245);let d=i.NB.create({name:"math_inline",group:"inline math",content:"text*",inline:!0,atom:!0,renderHTML(e){let{HTMLAttributes:t}=e;return["math-inline",(0,i.P1)(t,{class:"math-node"}),0]},parseHTML:()=>[{tag:"math-inline"}],addCommands(){return{insertMathInline:()=>e=>{let{state:t,dispatch:n,view:i}=e;return(0,s.$O)(this.type," ")(t,n,i)},convertToMathInline:()=>e=>{let{state:t,chain:n}=e,i=t.doc.textBetween(t.selection.from,t.selection.to);return n().insertContent({type:"math_inline",content:[{type:"text",text:i}]}).run(),!0}}}}),c=/\$([^ $]+)\$[ ]$/,u=/^\${2}\s+$/,p=/^\${2}(.+)\${2}$/,h=i.hj.create({name:"math",addExtensions:()=>[d,l],addProseMirrorPlugins(){let e=a.VH.get("math")?[new o.Sy({props:{clipboardTextSerializer:e=>s.qk.serializeSlice(e)}}),(0,r.Hw)({rules:[(0,s.Yx)(u,this.editor.schema.nodes.math_display),(0,s.Yx)(p,this.editor.schema.nodes.math_display),(0,s.Oi)(c,this.editor.schema.nodes.math_inline)]})]:[];return[(0,s.c1)({undo:()=>this.editor.commands.undo(),redo:()=>this.editor.commands.redo()})].concat(e)}}),m=e=>"math_display"===e.type.name||"math_inline"===e.type.name},26245:function(e,t,n){"use strict";let i;n.d(t,{$O:function(){return w},Yx:function(){return v},Oi:function(){return x},Ly:function(){return m},c1:function(){return h},qk:function(){return k}});var r=n(27191),o=n(52780),a=n(26151),l=n(17890),s=n(60737);function d(e,t,n){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(o,a)=>{let l=e.state,{to:s,from:d}=l.selection,{to:c,from:u}=o.selection;if(i&&c!==u)return!1;let p=t>0?c:u;if(n){let e=o.doc.nodeSize-2;if(t>0&&p<e||t<0&&p>0)return!1}return a&&(e.dispatch(l.tr.setSelection(r.Bs.create(l.doc,t>0?s:d))),e.focus()),!0}}class c{destroy(){this.closeEditor(!1),this._mathRenderElt&&(this._mathRenderElt.remove(),delete this._mathRenderElt),this._mathSrcElt&&(this._mathSrcElt.remove(),delete this._mathSrcElt),this.dom.remove()}ensureFocus(){this._innerView&&this._outerView.hasFocus()&&this._innerView.focus()}update(e,t){if(!e.sameMarkup(this._node))return!1;if(this._node=e,this._innerView){let t=this._innerView.state,n=e.content.findDiffStart(t.doc.content);if(null!=n){let i=e.content.findDiffEnd(t.doc.content);if(i){let{a:r,b:o}=i,a=n-Math.min(r,o);a>0&&(r+=a,o+=a),this._innerView.dispatch(t.tr.replace(n,o,e.slice(n,r)).setMeta("fromOutside",!0))}}}return this._isEditing||this.renderMath(),!0}updateCursorPos(e){let t=this._getPos(),n=this._node.nodeSize;e.selection.from<t+n&&t<e.selection.to||(this.cursorSide=t<e.selection.from?"end":"start")}selectNode(){this._outerView.editable&&(this.dom.classList.add("ProseMirror-selectednode"),this._isEditing||this.openEditor())}deselectNode(){this.dom.classList.remove("ProseMirror-selectednode"),this._isEditing&&this.closeEditor()}stopEvent(e){return void 0!==this._innerView&&void 0!==e.target&&this._innerView.dom.contains(e.target)}ignoreMutation(){return!0}renderMath(){if(!this._mathRenderElt)return;let e=this._node.content.content,t="";if(e.length>0&&null!==e[0].textContent&&(t=e[0].textContent.trim()),t.length<1){for(this.dom.classList.add("empty-math");this._mathRenderElt.firstChild;)this._mathRenderElt.firstChild.remove();return}if(this.dom.classList.remove("empty-math"),!i){this._mathRenderElt.textContent=t;return}try{i.render(t,this._mathRenderElt,this._katexOptions),this._mathRenderElt.classList.remove("parse-error"),this.dom.setAttribute("title","")}catch(e){if(e instanceof Error)console.error(e),this._mathRenderElt.classList.add("parse-error"),this.dom.setAttribute("title",e.toString());else throw e}}dispatchInner(e){if(!this._innerView)return;let{state:t,transactions:n}=this._innerView.state.applyTransaction(e);if(this._innerView.updateState(t),!e.getMeta("fromOutside")){let e=this._outerView.state.tr,t=a.KS.offset(this._getPos()+1);for(let i=0;i<n.length;i++){let r=n[i].steps;for(let n=0;n<r.length;n++){let i=r[n].map(t);if(!i)throw Error("step discarded!");e.step(i)}}e.docChanged&&this._outerView.dispatch(e)}}openEditor(){var e;this._innerView&&this.closeEditor(!1),this._innerView=new o.tk(this._mathSrcElt,{state:r.yy.create({doc:this._node,plugins:[(0,l.h)({Tab:(e,t)=>(t&&t(e.tr.insertText("	")),!0),Backspace:(0,s.QF)(s.NE,(e,t,n)=>!!e.selection.empty&&!(this._node.textContent.length>0)&&(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0)),"Ctrl-Backspace":(e,t,n)=>(this._outerView.dispatch(this._outerView.state.tr.insertText("")),this._outerView.focus(),!0),Enter:(0,s.QF)(s.QK,d(this._outerView,1,!1)),"Ctrl-Enter":d(this._outerView,1,!1),ArrowLeft:d(this._outerView,-1,!0),ArrowRight:d(this._outerView,1,!0),ArrowUp:d(this._outerView,-1,!0),ArrowDown:d(this._outerView,1,!0),"Mod-z":this._options.undo,"Shift-Mod-z":this._options.redo})]}),dispatchTransaction:this.dispatchInner.bind(this)});let t=this._innerView.state;this._innerView.focus();let n=null===(e=this._mathPluginKey.getState(this._outerView.state))||void 0===e?void 0:e.prevCursorPos;null==n&&console.error("[prosemirror-math] Error:  Unable to fetch math plugin state from key.");let i=(null!=n?n:0)<=this._getPos()?0:this._node.nodeSize-2;this._innerView.dispatch(t.tr.setSelection(r.Bs.create(t.doc,i))),this._isEditing=!0}closeEditor(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this._innerView&&(this._innerView.destroy(),this._innerView=void 0),e&&this.renderMath(),this._isEditing=!1}constructor(e,t,r,o={},a,l){n.e(4620).then(n.bind(n,66929)).then(e=>{i=e.default,this.renderMath()}),this._node=e,this._outerView=t,this._getPos=r,this._onDestroy=l&&l.bind(this),this._mathPluginKey=a,this.cursorSide="start",this._isEditing=!1,this._options=o,this._katexOptions=Object.assign({globalGroup:!0,throwOnError:!1},o.katexOptions),this._tagName=o.tagName||this._node.type.name.replace("_","-"),this.dom=document.createElement(this._tagName),this.dom.classList.add("math-node"),this._mathRenderElt=document.createElement("span"),this._mathRenderElt.textContent="",this._mathRenderElt.classList.add("math-render"),this.dom.appendChild(this._mathRenderElt),this._mathSrcElt=document.createElement("span"),this._mathSrcElt.classList.add("math-src"),this.dom.appendChild(this._mathSrcElt),this.dom.addEventListener("click",()=>this.ensureFocus()),this.renderMath()}}let u=new r.H$("prosemirror-math");function p(e,t){return(n,i,r)=>{let o=u.getState(i.state);if(!o)throw Error("no math plugin!");let a=o.activeNodeViews,l=new c(n,i,r,{katexOptions:{displayMode:e,macros:o.macros},...t},u,()=>{a.splice(a.indexOf(l))});return a.push(l),l}}let h=e=>new r.Sy({key:u,state:{init:(e,t)=>({macros:{},activeNodeViews:[],prevCursorPos:0}),apply:(e,t,n,i)=>({activeNodeViews:t.activeNodeViews,macros:t.macros,prevCursorPos:n.selection.from})},props:{nodeViews:{math_inline:p(!1,e),math_display:p(!0,e)}}});n(30764);let m=(e,t)=>{let{$from:n}=e.selection,i=n.nodeBefore;if(!i)return!1;if("math_inline"==i.type.name){let i=n.index(n.depth),o=e.doc.resolve(n.posAtIndex(i-1));return t&&t(e.tr.setSelection(new r.qv(o))),!0}return i.type.name,!1};var g=n(88892);let f=/\$(.+)\$/;function x(e,t,n){return new g.VK(e,(e,i,r,o)=>{let a=e.doc.resolve(r),l=a.index(),s=e.doc.resolve(o),d=n instanceof Function?n(i):n;if(!a.parent.canReplaceWith(l,s.index(),t))return null;let c=[t.create(d,t.schema.text(i[1]))];return i[0].endsWith(" ")&&" "!==e.doc.textBetween(o,o+1)&&c.push(t.schema.text(" ")),e.tr.replaceWith(r,o,c)})}function v(e,t,n){return new g.VK(e,(e,i,o,a)=>{let l=e.doc.resolve(o),s=n instanceof Function?n(i):n;if(!l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),t))return null;let d=e.tr.delete(o,a).setBlockType(o,o,t,s);return i[1]&&d.insertText(i[1],o,o),d.setSelection(r.qv.create(d.doc,d.mapping.map(l.pos-1)))})}(()=>{try{return RegExp("(?<!\\\\)\\$(.+)(?<!\\\\)\\$")}catch(e){return f}})();let y=e=>{let{from:t,to:n}=e.selection,i=e.selection.content().content,r=[];return i.descendants((e,n,i)=>"text"!=e.type.name&&(!e.type.name.startsWith("math_")||(r.push({start:Math.max(t+n-1,0),end:t+n+e.nodeSize-1}),!1))),o.EH.create(e.doc,r.map(e=>{let{start:t,end:n}=e;return o.p.node(t,n,{class:"math-select"})}))},b=new r.Sy({state:{init:(e,t)=>y(t),apply:(e,t)=>e.selection&&e.selectionSet?y(e):t},props:{decorations:e=>b.getState(e)}});function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n,i){let{$from:o}=n.selection,a=o.index();if(!o.parent.canReplaceWith(a,a,e))return!1;if(i){let a=e.create({},t?n.schema.text(t):null),l=n.tr.replaceSelectionWith(a);i(l=l.setSelection(r.qv.create(l.doc,o.pos)))}return!0}}class C{serializeFragment(e){let t;let n="",i=!0,r=e.size;return e.nodesBetween(0,r,(e,o)=>{let a=this.serializeNode(e);if(null!==a)return n+=a,!1;if(e.isText){var l;n+=(null===(l=e.text)||void 0===l?void 0:l.slice(Math.max(0,o)-o,r-o))||"",i=!1}else e.isLeaf&&t?(n+=t,i=!1):!i&&e.isBlock&&(n+="\n\n",i=!0)},0),n}serializeSlice(e){return this.serializeFragment(e.content)}serializeNode(e){let t=this.nodes[e.type.name];return void 0!==t?t(e):null}constructor(e,t){this.nodes={...null==t?void 0:t.nodes,...e.nodes},this.marks={...null==t?void 0:t.marks,...e.marks}}}let k=new C({nodes:{math_inline:e=>"$".concat(e.textContent,"$"),math_display:e=>"\n\n$$\n".concat(e.textContent,"\n$$")}})},26140:function(e,t,n){"use strict";n.d(t,{nk:function(){return W},s6:function(){return er},cB:function(){return el}});var i=n(52322),r=n(77533),o=n(5740),a=n(42946),l=n(54933),s=n(64253),d=n(5879),c=n(37243),u=n(2784),p=n(44598),h=n(71383),m=n(27821),g=n(28535),f=n(49929);let x={card:a.lCX,doc:a.s2,user:a.IBq},v=e=>{let{type:t}=e,n=x[t];return(0,i.jsx)(g.xu,{as:"span",display:"inline-flex",className:"mention",minW:"5em",opacity:"0.6",borderRadius:"sm",color:"gray.800",children:(0,i.jsx)(g.xu,{display:"inline-flex",py:"0.125em",children:(0,i.jsx)(f.G,{icon:n,style:{marginLeft:"0.5em",alignSelf:"center"}})})})};var y=n(85391),b=n(27210),w=n(78112),C=n(69465),k=n(33279),j=n(72205),S=n(92065),A=n(44170);let I=e=>{let{filterFn:t,getAttributesFn:n}=e;return e=>(function(e){let{type:t}=e;if(!t.isInline)throw Error("[nodePasteRule] This paste rule was only designed to consider inline nodes.");return new c.hD({find:e.find,handler:t=>{let{state:n,range:i,match:r}=t,{tr:o}=n,a=i.from,l=i.to,s=(0,c.nU)(e.getAttributes,void 0,r)||{};o.replaceWith(a,l,e.type.create(s))}})})({find:e=>{let n=[...e.matchAll(k.nP)];return n?n.map(e=>{var t;return{index:null!==(t=e.index)&&void 0!==t?t:-1,text:e[0],match:e}}).filter(e=>{let n=(0,k.Wp)(e.text),{cardId:i}=(0,k.sY)(e.text);return t(n,i,e)}):[]},type:e,getAttributes:e=>{let t=(0,k.Wp)(e[0]),{cardId:i}=(0,k.sY)(e[0]);return n({match:e,docId:t,cardId:i})}})};var z=n(29117),L=n(11082),E=n(81540),N=n(39097),M=n.n(N),_=n(95405);let T={borderRadius:"md",padding:"0.05em 0.1em",display:"inline",color:"gray.800"},R=(0,u.forwardRef)((e,t)=>{let{mentionLabel:n,mentionIcon:o,mentionTargetUrl:a,onClick:l,hasError:s=!1,isSimpleLinkVersion:d=!1,...c}=e,u=d?M():"span";return(0,i.jsxs)(g.xu,{ref:t,position:"relative","data-selection-ring":!0,className:"mention",onClick:l,...T,color:s?"gray.600":T.color,...c,as:u,href:d?a:void 0,cursor:l||d?"pointer":"default",children:[(0,i.jsxs)(z.U,{display:"inline-flex",spacing:0,children:[o&&(0,i.jsx)(g.xu,{display:"inline-block",textAlign:"center",minWidth:4,children:(0,i.jsx)(f.G,{icon:o,fixedWidth:!0,size:"sm",style:{marginLeft:"0.1em",marginRight:"0.3em"}})}),(0,i.jsx)(r.x,{noOfLines:1,whiteSpace:"normal",wordBreak:"break-all",flex:1,lineHeight:"normal",children:n})]}),_.v.GAMMA_PUPPETEER_SERVICE&&a&&(0,i.jsx)(L.r,{href:a,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0,top:"0",left:"0"})]})});R.displayName="MentionTag";let H=()=>(0,i.jsx)(g.xu,{as:"span",className:"mention",...T,children:(0,i.jsx)(E.$,{size:"xs",opacity:"0.8",margin:"0 0.1em"})}),P="Untitled",O=e=>{let{node:t,editor:n}=e,{id:c}=t.attrs,g=(0,p.c)(c),f=(null==g?void 0:g.archived)===!1,x=null==g?void 0:g.title,v=(0,h.CG)(w.hN);(0,u.useEffect)(()=>{n.storage[W.name][c]=x},[x,n.storage,c]);let j=(0,u.useCallback)(e=>{(0,y.l)(n,e,c)},[n,c]),S=(0,m.C7)(),A=(0,u.useMemo)(()=>{let e=(0,k.gq)({cardId:c,docId:null==g?void 0:g.docId});return S?(0,C.Op)({url:e}):e},[c,null==g?void 0:g.docId,S]);return(0,i.jsx)(b.T5,{as:"span",children:f?(0,i.jsx)(R,{"data-testid":"card-mention",onClick:v?void 0:j,onDoubleClick:v?j:void 0,mentionLabel:x||P,mentionIcon:a.lCX,mentionTargetUrl:A}):(0,i.jsx)(s.kH,{label:(0,i.jsx)(r.x,{children:(0,i.jsx)(d.cC,{id:"HAIPtO",components:{0:(0,i.jsx)(o.T,{fontSize:"sm",color:"blackAlpha.800"})}})}),children:(0,i.jsx)(R,{"data-testid":"card-mention",hasError:!0,mentionLabel:"Cannot find referenced card",mentionIcon:l.QQm})})})},D=e=>(0,i.jsx)(b.T5,{as:"span",children:(0,i.jsx)(v,{type:"card"})}),W=c.NB.create({name:"cardMention",addStorage:()=>({}),addOptions:()=>({HTMLAttributes:{},suggestion:{char:S.p}}),priority:j.a.CardMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null},docId:{default:null},mentionedById:{default:null}}),addPasteRules(){return[I({filterFn:(e,t)=>e===this.editor.gammaDocId&&!!t,getAttributesFn:e=>{let{docId:t,cardId:n}=e;return{id:n,docId:t}}})(this.type)]},addCommands(){return{addCardMention:(e,t)=>{let{id:n,docId:i,mentionedById:r}=e;return e=>{var o;let{state:a,chain:l}=e,s=a.selection.$to.nodeAfter;return(null==s?void 0:null===(o=s.text)||void 0===o?void 0:o.startsWith(" "))&&(t.to+=1),l().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,docId:i,mentionedById:r}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e,{id:i,docId:r}=n.attrs,o=this.storage[i]||P;return["a",(0,c.P1)({"data-type":this.name,href:(0,k.gq)({docId:r,cardId:i})},this.options.HTMLAttributes,t),o]},renderText(e){let{node:t}=e,{id:n,docId:i}=t.attrs,r=this.storage[n]||P,o=(0,k.gq)({docId:i,cardId:n});return"[".concat(r,"](").concat(o,")")},addNodeView(){return this.editor.isThumbnail?(0,b.fW)(D,{update:A.E7}):(0,b.fW)(O,{update:A.E7})}});var F=n(23691);let B="docMention";var G=n(332),U=n(38045),V=n(89786),q=n(16426),K=n(69971),Y=n(30240),X=n(86290),$=n(80834),Z=n(97134),Q=n(40382);let J="Private ".concat(F.Yc),ee=(0,U.E)(g.xu),et=e=>{var t,n;let{node:r,editor:o}=e,{id:l}=r.attrs,c=(0,Y.ye)("screenshotsEnabled"),p=(0,m.C7)(),{user:h}=(0,Z.SE)(),[g]=(0,K.$4k)(),f=(0,Q.gF)(),{data:x,error:v,loading:y,subscribeToMore:w}=(0,K.y5Q)({variables:{id:l},skip:p||!l}),C=!!(!p&&h);(0,u.useEffect)(()=>{if(C)return w({document:K.dcb,variables:{id:l},updateQuery:(e,t)=>{let{subscriptionData:n}=t;return n.data&&n.data.doc?{doc:{...e.doc,...n.data.doc,__typename:"Doc"}}:e}})},[l,w,C]);let{title:j,createdTime:S,createdBy:A,editedTime:I,editors:z,docUser:L}=(null==x?void 0:x.doc)||{},{linkUrl:E,handleClick:N}=(0,$.H)({url:(0,k.Gn)({docId:l,docTitle:j,absolute:!0}),nonPublishedUrl:(0,k.Gn)({docId:l,docTitle:j})});(0,u.useEffect)(()=>{o.storage[B][l]=v?J:j},[j,o.storage,l,v]);let M={src:c?null==x?void 0:null===(n=x.doc)||void 0===n?void 0:null===(t=n.titleCard)||void 0===t?void 0:t.previewUrl:q.Z.src,fallbackSrc:q.Z.src},_=e=>()=>{if(!h)return;let t={input:{docId:l,userId:h.id,favorited:e}};g({variables:t,update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(l),fragment:K.VRt,data:{docUser:null==n?void 0:n.updateDocUser}})},optimisticResponse:{updateDocUser:{...L,favorited:t.input.favorited,__typename:"DocUser"}}})},{popperRef:T,referenceRef:P,isHovering:O,onMouseOver:D,onMouseOut:W,getPopperProps:U}=(0,Q.Ux)();return(0,i.jsxs)(b.T5,{as:"span",children:[y?(0,i.jsx)(H,{}):E?(0,i.jsx)(R,{onMouseOver:p?void 0:D,onMouseOut:p?void 0:W,onClick:N,ref:P,isSimpleLinkVersion:p,mentionLabel:j||"",mentionIcon:a.s2,mentionTargetUrl:E}):v?(0,i.jsx)(s.kH,{label:"You don't have access to the linked ".concat(F.Yc,". Try asking the owner of this ").concat(F.Yc," for access."),children:(0,i.jsx)(R,{hasError:!0,mentionLabel:J,mentionIcon:a.byT})}):null,(0,i.jsx)(G.h,{children:O&&x&&x.doc&&!p&&(0,i.jsx)(ee,{width:"320px","data-target-name":"doc-mention-popup",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",overflow:"hidden",shadow:"lg",maxW:"80vw",zIndex:"tooltip",ref:T,onMouseOver:D,onMouseOut:W,...U(),...Q.rc,children:(0,i.jsx)(V.F7,{createdByYou:(null==A?void 0:A.id)===(null==h?void 0:h.id),title:j||"",timestampDescription:f?(0,i.jsx)(d.cC,{id:"yxz5Og",values:{0:(0,X.Dw)(I)}}):"---",NextLink:null,href:E,onClick:N,id:l,createdByName:(null==A?void 0:A.displayName)||"",createdByEmail:(null==A?void 0:A.email)||"",createdByProfileImageUrl:(null==A?void 0:A.profileImageUrl)||"",createdTime:S,thumbnailImageUrl:M,editors:z,isFavorited:!!(null==L?void 0:L.favorited),onFavorite:_(new Date),onUnfavorite:_(null),menuEnabled:!1,openInNewWindow:!0})})})]})},en=e=>(0,i.jsx)(b.T5,{as:"span",children:(0,i.jsx)(v,{type:"doc"})}),ei="Unknown ".concat(F.Yc),er=c.NB.create({name:B,addStorage:()=>({}),addOptions:()=>({HTMLAttributes:{},suggestion:{char:S.p}}),priority:j.a.DocMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null},mentionedById:{default:null}}),addPasteRules(){return[I({filterFn:(e,t)=>e!==this.editor.gammaDocId||!t,getAttributesFn:e=>{let{docId:t}=e;return{id:t}}})(this.type)]},addCommands(){return{addDocMention:(e,t)=>{let{id:n,mentionedById:i}=e;return e=>{var r;let{state:o,chain:a}=e,l=o.selection.$to.nodeAfter;return(null==l?void 0:null===(r=l.text)||void 0===r?void 0:r.startsWith(" "))&&(t.to+=1),a().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,mentionedById:i}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'a[data-type="'.concat(this.name,'"]'),priority:51}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e,i=this.storage[n.attrs.id]||ei;return["a",(0,c.P1)({"data-type":this.name,href:(0,k.Gn)({docId:n.attrs.id,absolute:!0})},this.options.HTMLAttributes,t),i]},renderText(e){let{node:t}=e,n=this.storage[t.attrs.id]||ei,i=(0,k.Gn)({docId:t.attrs.id,absolute:!0});return"[".concat(n,"](").concat(i,")")},addNodeView(){return this.editor.isThumbnail?(0,b.fW)(en,{update:A.E7}):(0,b.fW)(et,{update:A.E7})}}),eo=e=>{let{node:t}=e,{label:n}=t.attrs;return(0,i.jsx)(b.T5,{as:"span",children:(0,i.jsx)(R,{mentionLabel:"@".concat(n)})})},ea=e=>(0,i.jsx)(b.T5,{as:"span",children:(0,i.jsx)(v,{type:"user"})}),el=c.NB.create({name:"mention",addOptions:()=>({HTMLAttributes:{},renderLabel(e){var t;let{options:n,node:i}=e;return"".concat(n.suggestion.char).concat(null!==(t=i.attrs.label)&&void 0!==t?t:i.attrs.id)},suggestion:{char:S.p}}),priority:j.a.UserMention,group:"inline",inline:!0,selectable:!0,atom:!0,addAttributes:()=>({id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}},profileImageUrl:{default:null,parseHTML:e=>e.getAttribute("data-profile-image-url"),renderHTML:e=>e.profileImageUrl?{"data-profile-image-url":e.profileImageUrl}:{}},mentionedById:{default:null,parseHTML:e=>e.getAttribute("data-mentioned-by-id"),renderHTML:e=>e.mentionedById?{"data-mentioned-by-id":e.mentionedById}:{}}}),addCommands(){return{addUserMention:(e,t)=>{let{id:n,label:i,profileImageUrl:r,mentionedById:o}=e;return e=>{var a;let{state:l,chain:s}=e,d=l.selection.$to.nodeAfter;return(null==d?void 0:null===(a=d.text)||void 0===a?void 0:a.startsWith(" "))&&(t.to+=1),s().focus().insertContentAt(t,[{type:this.name,attrs:{id:n,label:i,profileImageUrl:r,mentionedById:o}},{type:"text",text:" "}]).run(),!0}}}},parseHTML(){return[{tag:'span[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["span",(0,c.P1)({"data-type":this.name},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:t})]},renderText(e){let{node:t}=e;return this.options.renderLabel({options:this.options,node:t})},addNodeView(){return this.editor.isThumbnail?(0,b.fW)(ea,{update:A.E7}):(0,b.fW)(eo,{update:A.E7})}})},92065:function(e,t,n){"use strict";n.d(t,{p:function(){return G},L:function(){return U}});var i=n(27191),r=n(52322),o=n(77533),a=n(29117),l=n(109),s=n(38035),d=n(81540),c=n(42946),u=n(54933),p=n(49929),h=n(64253),m=n(5879),g=n(14304),f=n.n(g),x=n(82108),v=n.n(x),y=n(2784),b=n(69971),w=n(23691),C=n(77574),k=n(71383),j=n(71184),S=n(78851),A=n(97134),I=n(9237),z=n(78112),L=n(1547);let E=(e,t,n)=>RegExp(t?e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):e,n?"gu":"gui"),N="Type to mention a person or a ".concat(w.Yc),M=e=>{let{html:t}=e;return(0,r.jsx)(o.x,{paddingInlineStart:"0.2rem",wordBreak:"break-word",noOfLines:1,maxW:300,lineHeight:"1.5",dangerouslySetInnerHTML:{__html:t?f().sanitize(t):""}})},_=e=>e.replace(/(<em>|<\/em>)/g,""),T=e=>{let{result:t}=e,{__typename:n}=t;return"User"===n?(0,r.jsxs)(a.U,{children:[(0,r.jsx)(l.q,{size:"2xs",minWidth:4,m:0,name:t.displayName&&_(t.displayName),src:t.profileImageUrl}),(0,r.jsx)(M,{html:t.displayName})]}):"Card"===n?(0,r.jsxs)(a.U,{children:[(0,r.jsx)(s.k,{color:"gray.600",minWidth:4,justifyContent:"flex-end",children:(0,r.jsx)(p.G,{icon:u.nZ9,transform:{size:6}})}),(0,r.jsx)(M,{html:t.title})]}):"DocResult"===n?(0,r.jsx)(j.y5,{result:t,context:"mentionsList"}):(console.warn("[MentionList] Invalid __typename for search result:",t.__typename),null)},R=(0,y.forwardRef)((e,t)=>{let{result:n,index:i,selectedIndex:o,selectItem:a,...l}=e;return(0,r.jsx)(h.m9,{ref:t,tabIndex:i===o?0:-1,onClick:()=>a(i),onMouseDown:I.br,...l,children:(0,r.jsx)(T,{result:n})},i)}),H=(0,r.jsx)(p.G,{icon:c.lCX}),P=(0,r.jsx)(p.G,{icon:c.s2}),O=(0,r.jsx)(p.G,{icon:c.V3X}),D={Card:{title:(0,r.jsx)(m.cC,{id:"gXnPmp",values:{GAMMA_ARTIFACT_PROPER_NOUN:w.Yc}}),iconComponent:H},DocResult:{title:v()(w.aq),iconComponent:P},User:{title:(0,r.jsx)(m.cC,{id:"1wdjme"}),iconComponent:O}},W=(0,y.forwardRef)((e,t)=>{let{editor:n,query:i,command:l}=e,{isConnected:c}=(0,b.$gs)(),u=(0,k.CG)(e=>{var t;return((null===(t=(0,z.yx)(e))||void 0===t?void 0:t.collaborators)||[]).map(e=>e.user)}),p=!i||!n.gammaOrgId||!c,{data:g,previousData:f,error:x,loading:v}=function(e,t){let{isConnected:n}=(0,L.$)(),i=!e||!t||!n;return function(e){function t(e,t,n){n&&(e[t]||(e[t]={search:[]}),e[t].search=[...e[t].search,...n.search])}return e.reduce((e,n)=>{let{data:i,previousData:r,error:o,loading:a}=n;return!i&&a&&r&&(i=r),t(e,"data",i),t(e,"previousData",r),a&&(e.loading=!0),o&&(e.error=o),e},{})}([(0,b.OY$)({variables:{workspaceId:t,types:[b.Sc3.User],query:e},skip:i}),(0,b.OY$)({variables:{workspaceId:t,types:[b.Sc3.Doc],query:e},skip:i})])}(i,n.gammaOrgId),{user:w}=(0,A.SE)(),{searchDocs:j,searchUsers:I}=(0,y.useMemo)(()=>{let e=E(i,!0,!1),t=(g?g.search:f?f.search:[]).filter(e=>"User"===e.__typename),n=(g?g.search:f?f.search:[]).filter(e=>"DocResult"===e.__typename),r=u.filter(e=>!t.find(t=>t.id===e.id)).filter(e=>{var t,n;return(null===(t=e.email)||void 0===t?void 0:t.startsWith(i.toLowerCase()))||(null===(n=e.displayName)||void 0===n?void 0:n.toLowerCase().includes(i.toLowerCase()))}),o=[...t,...r].map(t=>{var n;return{...t,displayName:null===(n=t.displayName)||void 0===n?void 0:n.replace(e,"<em>$&</em>")}});return{searchDocs:i?[...n]:[],searchUsers:i?o:[]}},[g,f,i,u]),{data:M}=(0,b.WHS)({variables:{docId:n.gammaDocId},skip:p,fetchPolicy:"cache-only",nextFetchPolicy:"cache-only",returnPartialData:!0}),T=[...I,...(0,y.useMemo)(()=>{let e=E(i,!0,!1);return(null==M?void 0:M.docCards)&&i?M.docCards.map(t=>{let n=t.title||"";if(n.match(e)){let i=n.replace(e,"<em>$&</em>");return{...t,title:i}}return null}).filter(Boolean):[]},[M,i]),...j],H=e=>{let t=T[e]?{...T[e]}:null;t&&("User"===t.__typename&&t.displayName&&(t.displayName=_(t.displayName)),l({item:t,user:w}))},{selectedIndex:P,selectedItemEl:O}=(0,S.Yg)({ref:t,selectItem:H,options:T}),W=n.state.selection,F=!W.$anchor.parent.isLeaf&&W.$anchor.parent.textContent===G;return 0===i.length&&F?(0,r.jsx)(s.k,{w:"100%",p:1,align:"flex-start",justify:"flex-start",flex:"1",mt:-9,ml:3,"data-testid":"mention-list-empty",children:(0,r.jsx)(o.x,{fontSize:"md",color:"gray.400",children:N})}):(0,r.jsx)(h.wb,{"data-testid":"mention-list",children:(0,r.jsxs)(h.Dw,{"data-target-name":"mention-list",w:"540px",maxW:"90vw",overflowY:"auto",maxH:"65vh",sx:{em:{bg:"var(--chakra-colors-trueblue-100)",fontStyle:"normal",borderRadius:"base",display:"inline-block",padding:"0px 2px",margin:"0px -2px"}},children:[(0,r.jsx)(C.V,{isConnected:c,description:(0,r.jsx)(m.cC,{id:"KnLL/m"})}),x?(0,r.jsx)(s.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,r.jsxs)(o.x,{fontSize:"sm",color:"gray.500",children:[(0,r.jsx)(m.cC,{id:"sBH7nV"}),x&&(null==x?void 0:x.message)]})}):0===i.length?(0,r.jsxs)(s.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,"data-testid":"mention-list-empty",children:[(0,r.jsx)(o.x,{fontSize:"md",color:"gray.400",children:N})," "]}):!v&&i.length>1&&0===T.length?(0,r.jsx)(s.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,r.jsx)(o.x,{fontSize:"sm",color:"gray.500",children:"No results for this query."})}):null,T.map((e,t)=>{let n=T.findIndex(t=>t.__typename===e.__typename)===t&&e.__typename?D[e.__typename]:null;return(0,r.jsxs)(y.Fragment,{children:[n&&(0,r.jsxs)(a.U,{mt:4,mb:2,color:"gray.500",children:[n.iconComponent,(0,r.jsx)(h.NZ,{children:n.title})]}),(0,r.jsx)(R,{"data-testid":"mention-list-item-".concat(e.id),ref:t===P?O:null,result:e,index:t,selectedIndex:P,selectItem:H},t)]},e.id)}),v&&(0,r.jsx)(s.k,{p:1,align:"center",justify:"center",flex:"1",minH:12,children:(0,r.jsx)(d.$,{opacity:"0.8",size:"xs"})})]})})});var F=n(72205);let B=new i.H$("MentionGamma"),G="@",U=(0,S.ty)({name:"GammaMention",char:G,pluginKey:B,allowSpaces:!0,MenuComponent:W,priority:F.a.MentionSuggestionMenu,command:e=>{let{editor:t,range:n,props:i}=e,{item:r,user:o}=i;if("User"===r.__typename){let{id:e,displayName:i,profileImageUrl:a}=r,{id:l}=o;t.commands.addUserMention({id:e,label:i,profileImageUrl:a,mentionedById:l},n)}else if("Card"===r.__typename){let{id:e,docId:i}=r,{id:a}=o;t.commands.addCardMention({id:e,docId:i,mentionedById:a},n)}else if("DocResult"===r.__typename){let{id:e}=r,{id:i}=o;t.commands.addDocMention({id:e,mentionedById:i},n)}}})},41086:function(e,t,n){"use strict";n.d(t,{n:function(){return g}});var i=n(37243),r=n(38438),o=n(27210),a=n(20145),l=n(44170),s=n(52322),d=n(53719),c=n(45075),u=n(43988),p=n(8607),h=n(83091);let m=e=>{let{node:t,decorations:n,editor:i}=e,r=(0,p.R)(n),a=(0,h.v)(n),{horizontalAlign:l,fontSize:m,placeholder:g}=t.attrs,f=a&&r&&(!l||"left"===l)&&!(0,u.$v)(i)&&!g;return(0,s.jsxs)(c.lO,{...e,style:{position:"relative"},children:[(0,s.jsx)(o.ms,{"data-font-size":m,"data-multiline-placeholder":g,style:{textAlign:l}}),f&&(0,s.jsx)(d.B,{...e})]})},g=r.Z.extend({name:"paragraph",group:"block cardNotesBlock",selectable:!1,addNodeView:()=>(0,o.fW)(m,{update:l.E7}),allowFontSizes:"body",addAttributes:()=>({fontSize:a.Bi}),parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",(0,i.P1)(t,{class:"paragraph"}),0]},renderHTMLforAI(e){let{HTMLAttributes:t}=e;return["p",{},0]}})},61241:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(27191),r=n(53719),o=n(72205),a=n(78851);let l=new i.H$("SlashMenu"),s=(0,a.ty)({name:"slashMenu",char:"/",pluginKey:l,MenuComponent:r.Z,priority:o.a.SlashMenu})},99872:function(e,t,n){"use strict";n.d(t,{z:function(){return E}});var i=n(37243),r=n(27191),o=n(31753),a=n(27210),l=n(12971),s=n(72205),d=n(62580),c=n(44170),u=n(35500),p=n(31292),h=n(65780),m=n(67221),g=n(97925);class f{constructor(e=null){this.dragging=e}}let x=new r.H$("smartLayoutPlugin"),v=e=>new r.Sy({key:x,state:{init:()=>new f,apply:(e,t)=>t},props:{decorations:e=>(0,m.r4)(e),handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=x.getState(e.state);if(!i)return!1;i.dragging=n}},handleDrop:(t,n,i)=>{let r=x.getState(t.state),o=null==r?void 0:r.dragging;return r&&(r.dragging=null),!!(b(e,t,n,i,o)||y(t,n,i))},handlePaste:(t,n,i)=>{let{selection:o}=t.state;if(!(o instanceof r.qv&&(0,p.E)(o.node)))return!1;let a=(0,h.O)(i);return!!a&&"image"===a.type.name&&e.commands.updateNestedAttributesAtPos(o.from,{image:a.attrs})}}}),y=(e,t,n)=>{let i=(0,g.fC)(e,t,n);if(!i)return!1;let r=e.state.tr;return r.setNodeAttribute(i.pos,"image",i.image),r.deleteSelection(),e.dispatch(r),!0},b=(e,t,n,i,r)=>{let o=null;try{if(!(o=(0,g.cQ)(t,n,i)))return!1}catch(e){return!1}try{let{selection:n}=t.state,a=!n.empty,{node:l,pos:s,side:d}=o;if(s>n.from&&s<n.to)return!0;let c=i.content.toJSON(),u="left"===d||"top"===d?s:s+l.nodeSize;e.chain().insertContentAt({from:u,to:u},c,{updateSelection:!1}).command(e=>{let{tr:t}=e;return a&&t.deleteSelection(),r&&t.setMeta("annotationEvent",{type:"drop",dragging:r,droppedBlockPos:u+1}),!0}).focusMapped(u,1).run()}catch(e){console.error("(caught) [SmartLayoutPlugin] handleDrop error:",e)}return!0};var w=n(52322),C=n(73200),k=n(87254),j=n(71383),S=n(78112),A=n(45075),I=n(92179),z=n(7553);let L=e=>{let{node:t,decorations:n}=e,i=t.attrs,r=(0,z.P)(i.variantKey),{Wrapper:o}=r,l=(0,m.Xo)(n),s=(0,g.jM)(i),d=(0,j.CG)(S.hN),c=(0,j.CG)(S.Pu);return(0,w.jsxs)(A.lO,{...e,className:(0,C.cx)(d&&"is-editable"),style:{position:"relative",display:"grid",gridTemplateColumns:"100%"},children:[(0,w.jsx)(o,{...l,options:s,theme:c,variant:r,node:t,children:(0,w.jsx)(a.ms,{"data-node-view-content-outer":"smartLayout"})}),(0,w.jsx)(I.A,{...e,label:k.ag._({id:"Szg6OU"}),"data-testid":"smart-layout-drag-handle"})]})},E=i.NB.create({name:"smartLayout",group:"cardBlock layoutBlock",content:"smartLayoutCell+",isolating:!0,containerHandle:!0,defining:!0,priority:s.a.SmartLayout,addAttributes:()=>({variantKey:{default:void 0},options:{default:{},...(0,l.sw)("options")},fullWidthBlock:{default:!1}}),parseHTML:()=>[{tag:"div[class=smart-layout]"},...Object.values((0,z.m)()).filter(e=>e.htmlTag).map(e=>({tag:e.htmlTag,getAttrs:t=>{let n={variantKey:e.key,options:{...e.defaultOptions}};return e.options.forEach(e=>{let i=t.getAttribute(e.key);if(i){try{n.options[e.key]=JSON.parse(i)}catch(t){n.options[e.key]=i}return}if(e.getDefaultOnParse&&!n.options[e.key]){n.options[e.key]=e.getDefaultOnParse(t);return}}),n}}))],renderHTMLforAI(e){let{node:t}=e,n=(0,z.P)(t.attrs.variantKey),i={};return n.options.forEach(e=>{var n;let r=null!==(n=t.attrs.options[e.key])&&void 0!==n?n:e.defaultValue;i[e.key]="string"==typeof r?r:JSON.stringify(r)}),[n.htmlTag||n.key,i,0]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,i.P1)(t,{class:"smart-layout"}),0]},addNodeView:()=>(0,a.fW)(L,{update:c.E7,ignoreMutation:o.j}),addProseMirrorPlugins(){return[v(this.editor)]},addCommands:()=>({insertSmartLayoutCell:e=>t=>{var n,r;let{chain:o,state:a}=t,l=a.doc.resolve(e),s=(0,i.qv)(l,e=>"smartLayout"===e.type.name),d=null==s?void 0:s.node.lastChild;if(!s||!d)return!1;let c=d.attrs,p=(0,u.J)(null===(n=d.firstChild)||void 0===n?void 0:n.attrs.level);return o().insertContentAt(e,{type:"smartLayoutCell",content:p,attrs:{image:{source:null===(r=c.image)||void 0===r?void 0:r.source}}}).selectInsertedNode().run(),!0},handleSmartLayoutDelete:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return n=>{let{dispatch:o,state:a,tr:l,chain:s}=n;if(!o)return!0;let{selection:c}=a,u=c instanceof r.qv&&(0,p.E)(c.node)?{node:c.node,pos:c.from}:(0,i.Kk)(e=>"smartLayoutCell"===e.type.name)(a.selection);if(e&&u&&u.pos!==c.from)return!1;let h=(0,i.Kk)(e=>"smartLayout"===e.type.name)(a.selection);if(!u||!h)return!1;if(1==h.node.childCount)s().selectNodeAtPos(h.pos).deleteSelectionAndSelectNear(t?1:-1).run();else{let e=l.doc.resolve(u.pos);(0,d.D)(l,e,t)}return!0}}})})},23096:function(e,t,n){"use strict";n.d(t,{Ne:function(){return T},js:function(){return _},ne:function(){return R}});var i=n(2689),r=n.n(i),o=n(39198),a=n(21860),l=n(35500),s=n(87254),d={src:"/_next/static/media/ArrowsHorizontal.a774f944.svg",height:71,width:253,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/ArrowsVertical.836da72e.svg",height:97,width:253,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/BarStats.f950fb86.svg",height:76,width:253,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/BigNumbers.a8dd3c72.svg",height:65,width:253,blurWidth:0,blurHeight:0},h={src:"/_next/static/media/BulletsLg.095a87c4.svg",height:97,width:253,blurWidth:0,blurHeight:0},m={src:"/_next/static/media/BulletsSm.b752361e.svg",height:96,width:253,blurWidth:0,blurHeight:0},g={src:"/_next/static/media/CircleStats.d28f4999.svg",height:83,width:253,blurWidth:0,blurHeight:0},f={src:"/_next/static/media/Funnel.49ef311d.svg",height:94,width:253,blurWidth:0,blurHeight:0},x={src:"/_next/static/media/ImagesWithTextIcons.85edfaa6.svg",height:97,width:253,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/ImagesWithTextPhotos.a55ab106.svg",height:96,width:253,blurWidth:0,blurHeight:0},y={src:"/_next/static/media/ImagesWithTextTeam.af1be4d1.svg",height:97,width:253,blurWidth:0,blurHeight:0},b={src:"/_next/static/media/Pyramid.ef92f89c.svg",height:94,width:253,blurWidth:0,blurHeight:0},w={src:"/_next/static/media/Stairs.d60e32c7.svg",height:94,width:253,blurWidth:0,blurHeight:0},C={src:"/_next/static/media/SteppedPyramid.def15490.svg",height:94,width:253,blurWidth:0,blurHeight:0},k={src:"/_next/static/media/TextBoxes3.f6cbbf0a.svg",height:97,width:253,blurWidth:0,blurHeight:0},j={src:"/_next/static/media/TextBoxes4.7125fc69.svg",height:110,width:253,blurWidth:0,blurHeight:0},S={src:"/_next/static/media/TimelineHorizontalNumbered.4bc4869b.svg",height:97,width:253,blurWidth:0,blurHeight:0},A={src:"/_next/static/media/TimelineHorizontalTwoSided.acd4bc4a.svg",height:97,width:253,blurWidth:0,blurHeight:0},I={src:"/_next/static/media/TimelineVerticalNumbered.e4851152.svg",height:111,width:253,blurWidth:0,blurHeight:0},z={src:"/_next/static/media/TimelineVerticalTwoSided.e09967af.svg",height:151,width:253,blurWidth:0,blurHeight:0};let L=()=>[{name:()=>s.ag._({id:"o6dKT5"}),key:"timelineVerticalTwoSided",keywords:["timeline","vertical","agenda","steps"],previewImage:z,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,twoSided:!0,hasLine:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"o2PvSp"}),key:"timelineVerticalNumbered",keywords:["timeline","vertical","agenda","steps"],previewImage:I,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"vertical"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"EGQH/j"}),key:"timelineHorizontalTwoSided",keywords:["timeline","horizontal","agenda","steps"],previewImage:A,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!1,hasLine:!0,twoSided:!0,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur do"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}},{name:()=>s.ag._({id:"tmwL4E"}),key:"timelineHorizontalNumbered",keywords:["timeline","horizontal","agenda","steps"],previewImage:S,content:{type:"smartLayout",attrs:{variantKey:"timeline",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"OsVXoX"}),key:"bulletsLg",keywords:["agenda","steps","bullets"],previewImage:h,content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:20},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"XY2IHD"}),key:"bulletsSm",previewImage:m,keywords:["agenda","steps","bullets"],content:{type:"smartLayout",attrs:{variantKey:"bullets",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"7xlpDo"}),key:"textBoxes3",keywords:["squares"],previewImage:k,content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 1"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 2"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Item 3"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident."}]}]}]}},{name:()=>s.ag._({id:"X4kXBV"}),key:"textBoxes4",previewImage:j,keywords:["squares","callouts","matrix","quadrant"],content:{type:"smartLayout",attrs:{variantKey:"textBoxes",options:{cellSize:20},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"+kQMBP"}),key:"imagesWithTextTeam",previewImage:y,keywords:["team","images","headshot","bio","roles"],content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:10,imageSize:1,horizontalAlign:"center",imageShape:"circle"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/c1414815be03462f8862cb80f89f720d/optimized/tesla.jpg",meta:{width:820,height:709,date_file_modified:"2023/02/07 22:20:08 GMT",aspect_ratio:1.157,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#828282",orientation:"Horizontal (normal)"},name:"tesla.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Nikola Tesla"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor"},{type:"hardBreak"},{type:"text",text:"@ Tesla Inc. "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/53ab692111294834a286002e3ecfdf2b/optimized/marie-curie.jpg",meta:{width:1200,height:1631,date_file_modified:"2023/02/07 22:20:11 GMT",aspect_ratio:.736,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#3b3b3b"},name:"marie-curie.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Marie Curie"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Physicist and Chemist"},{type:"hardBreak"},{type:"text",text:"@ Radioactivity"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e5d0250f2e054ee3a4c63a8e11f39c36/optimized/thomas-edison.webp",meta:{width:360,height:450,date_file_modified:"2023/02/07 22:20:22 GMT",aspect_ratio:.8,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,average_color:"#606060",orientation:"Horizontal (normal)"},name:"thomas edison.webp"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Thomas Edison"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Inventor "},{type:"hardBreak"},{type:"text",text:"@ Light bulb "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.custom",uploadStatus:0,showPlaceholder:!1,src:"https://cdn.gamma.app/zc87vhr30n8uf3n/86aa2820df484599b26ab9bbb79737d3/optimized/einstein.jpg",meta:{width:500,height:500,date_file_modified:"2023/02/07 22:20:26 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,colorspace:"sRGB",has_transparency:!1,orientation:"Horizontal (normal)",average_color:"#575757"},name:"einstein.jpg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Albert Einstein"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:"default"},content:[{type:"text",marks:[{type:"bold"}],text:"Theoretical Physicist"},{type:"hardBreak"},{type:"text",text:"@ EMC2 "}]}]}]}},{name:()=>s.ag._({id:"kX68M5"}),key:"imagesWithTextIcons",previewImage:x,keywords:["icons"],content:{type:"smartLayout",attrs:{variantKey:"iconsText",options:{cellSize:10,shapeSize:"md",horizontalAlign:"center"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/e169d76934d642e2999d195fb50cfd88/optimized/mountain.svg",tempUrl:"https://gamma.app/api/icons/mountain.svg?provider=fa&style=light",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:46:24 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#cbcbcb"},query:"mountain",providerMeta:{name:"fa",id:"mountain"},uploadStatus:0,showPlaceholder:!1,name:"mountain.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/1f156e4486744695b40e109958afc3fb/optimized/user-astronaut.svg",tempUrl:"https://gamma.app/api/icons/user-astronaut.svg?provider=fa&style=light",meta:{height:512,width:448,svgViewBoxWidth:448,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:45:45 GMT",aspect_ratio:.875,has_clipping_path:!1,frame_count:1,average_color:"#9c9c9c"},query:"astronaut",providerMeta:{name:"fa",id:"user-astronaut"},uploadStatus:0,showPlaceholder:!1,name:"user-astronaut.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",uploadStatus:0,showPlaceholder:!1,tempUrl:"https://gamma.app/api/icons/bullseye-arrow.svg?provider=fa&style=light",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/69f7d571bf7d4af1b2aab06149d5ce4d/optimized/bullseye-arrow.svg",meta:{height:512,width:512,svgViewBoxWidth:512,svgViewBoxHeight:512,date_file_modified:"2023/02/07 21:47:16 GMT",aspect_ratio:1,has_clipping_path:!1,frame_count:1,average_color:"#acacac"},query:"goal",providerMeta:{name:"fa",id:"bullseye-arrow"},name:"bullseye-arrow.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.icon",src:"https://cdn.gamma.app/zc87vhr30n8uf3n/ce830d7ed3c543d5b88ecdf6ec6c26ad/optimized/chess-king-piece.svg",tempUrl:"https://gamma.app/api/icons/chess-king-piece.svg?provider=fa&style=light",meta:{height:512,width:256,svgViewBoxWidth:256,svgViewBoxHeight:512,date_file_modified:"2023/02/07 22:21:25 GMT",aspect_ratio:.5,has_clipping_path:!1,frame_count:1,average_color:"#a1a1a1"},providerMeta:{name:"fa",id:"chess-king-piece"},query:"strategy",uploadStatus:0,showPlaceholder:!1,name:"chess-king-piece.svg"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"tVJ1RK"}),key:"imagesWithTextPhotos",keywords:["photos","captions"],previewImage:v,content:{type:"smartLayout",attrs:{variantKey:"imagesText",options:{cellSize:15,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&w=2592&q=25",tempUrl:"https://images.unsplash.com/photo-1457459686225-c7db79d4e59f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwxOXx8bW91bnRhaW58ZW58MXx8fHwxNjc1ODA2MDQw&ixlib=rb-4.0.3&q=80&w=200",meta:{height:3872,width:2592},query:"mountain"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&w=2731&q=25",tempUrl:"https://images.unsplash.com/photo-1536697246787-1f7ae568d89a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyfHxhc3Ryb25hdXR8ZW58MXx8fHwxNjc1ODA1OTkz&ixlib=rb-4.0.3&q=80&w=200",meta:{height:4096,width:2731},query:"astronaut"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:{source:"image.unsplash",src:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&w=2832&q=25",tempUrl:"https://images.unsplash.com/photo-1598091874986-7da3b270fead?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=MnwxOTgwNzN8MHwxfHNlYXJjaHwyNHx8Z29hbHxlbnwxfHx8fDE2NzU4MDU4NjQ&ixlib=rb-4.0.3&q=80&w=200",meta:{height:2832,width:2832},query:"goal"},label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"B52ZvK"}),key:"pyramidOutside",previewImage:b,content:{type:"smartLayout",attrs:{variantKey:"pyramid",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium "}]}]}]}},{name:()=>s.ag._({id:"WJphpV"}),key:"funnelOutside",previewImage:f,content:{type:"smartLayout",attrs:{variantKey:"funnel",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"crBPvK"}),key:"staircaseOutside",previewImage:w,content:{type:"smartLayout",attrs:{variantKey:"staircase",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"OxTZir"}),key:"steppedPyramid",previewImage:C,content:{type:"smartLayout",attrs:{variantKey:"staircase",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10,outsideText:!0,horizontalAlign:"center"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"zd+VK0"}),key:"horizontalArrows",previewImage:d,content:{type:"smartLayout",attrs:{variantKey:"arrows",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"horizontal",cellSize:10},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Strategy"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Foste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"bkPcLj"}),key:"verticalArrows",previewImage:c,content:{type:"smartLayout",attrs:{variantKey:"arrows",options:{numbered:!0,hasLine:!1,twoSided:!1,orientation:"vertical",cellSize:10,horizontalAlign:"left"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:null},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium"}]}]}]}},{name:()=>s.ag._({id:"W78uBz"}),key:"stats3",previewImage:p,content:{type:"smartLayout",attrs:{variantKey:"stats",options:{cellSize:15,numberMax:100,shapeSize:"lg"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"25%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"3/4"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{numberMax:100},width:null,image:null,label:50},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"PFo2A/"}),key:"circleStats3",previewImage:g,content:{type:"smartLayout",attrs:{variantKey:"circleStats",options:{cellSize:15,imageSize:.8,shapeSize:"lg"},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"54%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:75},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"1/3"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}},{name:()=>s.ag._({id:"0LeG7j"}),key:"barStats3",previewImage:u,content:{type:"smartLayout",attrs:{variantKey:"barStats",options:{cellSize:10,numberMax:100},fullWidthBlock:!1},content:[{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"25%"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Vision"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor"}]}]},{type:"smartLayoutCell",attrs:{options:{},width:null,image:null,label:"3/4"},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Mission"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit "}]}]},{type:"smartLayoutCell",attrs:{options:{numberMax:100},width:null,image:null,label:50},content:[{type:"heading",attrs:{horizontalAlign:null,level:3},content:[{type:"text",text:"Goal"}]},{type:"paragraph",attrs:{horizontalAlign:null,fontSize:null},content:[{type:"text",text:"Sed ut perspiciatis unde omnis iste natus error sit volupta tem accusa ntium eius modi tempora"}]}]}]}}];var E=n(97925),N=n(7553);let M=()=>(0,N.m)().filter(e=>!e.disabled),_=()=>M().map(e=>{let{key:t,commandName:n,description:i,icon:a,keywords:s=[],defaultAttrs:d,defaultOptions:c,featureFlag:u}=e,p={type:"smartLayout",attrs:{variantKey:t,options:c},content:r()(3).map(()=>({type:"smartLayoutCell",content:(0,l.J)(),attrs:d}))};return{key:"smartLayout-".concat(t),name:n,keywords:[...s,"layout","smart"],description:i,nodeName:"smartLayout",icon:a,execute:e=>{e.chain().focus().insertContentAndSelect(p).run()},dragStartFn:e=>(0,o.UV)(e,p),dragEndFn:e=>{(0,E.X1)(e,e.state.selection.$from)},featureFlag:u}}),T=()=>M().map(e=>{let{key:t,name:n,description:i,icon:r,featureFlag:o}=e;return{key:"listToSmartLayout-".concat(t),name:n,icon:r,description:i,group:"list",apply:e=>e.commands.listToSmartLayout(t),checkDisabled:e=>!(0,a.Ah)(e),featureFlag:o}}),R=()=>L().map(e=>{let{name:t,key:n,keywords:i=[],content:r,previewImage:a}=e,l=(0,N.P)(r.attrs.variantKey);return{key:n,name:t,keywords:[...i,...l.keywords||[],"layout","smart"],nodeName:"smartLayout",icon:l.icon,previewImage:a,execute:e=>{e.chain().focus().insertContentAndSelect(r).run()},dragStartFn:e=>(0,o.UV)(e,r),dragEndFn:e=>{(0,E.X1)(e,e.state.selection.$from)},featureFlag:l.featureFlag}})},35500:function(e,t,n){"use strict";n.d(t,{J:function(){return o},p:function(){return a}});var i=n(87254),r=n(60699);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return[r.i.heading(i.ag._({id:"HX5SVx"}),{level:e}),r.i.paragraph(i.ag._({id:"Nu4oKW"}))]},a="1em"},67221:function(e,t,n){"use strict";n.d(t,{PX:function(){return m},Xo:function(){return h},r4:function(){return p}});var i=n(71644),r=n.n(i),o=n(27191),a=n(52780),l=n(12971),s=n(3194),d=n(1142),c=n(99872),u=n(89886);let p=e=>{let{doc:t}=e,n=[];return t.descendants((i,s)=>{if(i.type.name!==c.z.name)return;let d=r()((0,l.Jn)(i.content).map(e=>(0,u.g9)(e.attrs.label))),p=g(t.resolve(s)),h=e.selection instanceof o.qv&&e.selection.node===i||e.selection.from>s&&e.selection.to<s+i.nodeSize,m={isSmartLayoutDecoration:!0,numCells:i.childCount,containerSize:p};return n.push(a.p.node(s,s+i.nodeSize,{},m)),i.forEach((e,t,r)=>{let o=s+1+t,c={isSmartLayoutCellDecoration:!0,index:r,numCells:i.childCount,maxLabelValue:d,smartLayoutAttrs:i.attrs,layoutContainerSize:p,isContentEmpty:(0,l.$y)(e),isLayoutFocused:h};n.push(a.p.node(o,o+e.nodeSize,{},c))}),!1}),a.EH.create(t,n)},h=e=>{let t=e.find(e=>e.spec.isSmartLayoutDecoration);return t?t.spec:(console.error("[SmartLayout] Decoration not found. This should never happen!",e),{isSmartLayoutDecoration:!0,numCells:0,containerSize:1})},m=e=>{let t=e.find(e=>e.spec.isSmartLayoutCellDecoration);return t?t.spec:(console.error("[SmartLayoutCell] Decoration not found. This should never happen!",e),{isSmartLayoutCellDecoration:!0,numCells:0,index:0,smartLayoutAttrs:{options:{},fullWidthBlock:!1},layoutContainerSize:1,isContentEmpty:!1,isLayoutFocused:!1})},g=e=>{let t=1;try{for(let i=e.depth;i>0;i--){let r=e.node(i),o=e.index(i-1);if("gridCell"===r.type.name){let n=e.node(i-1).attrs.colWidths;n&&n[o]&&(t*=parseInt(n[o])/100)}if("card"===r.type.name){var n;let{layout:i,layoutTemplateColumns:o,container:a}=r.attrs;if("left"===i){let e=o?parseInt(o.split(" ")[1])/100:d.ZQ;t*=e}if("right"===i){let e=o?parseInt(o.split(" ")[0])/100:d.ZQ;t*=e}let l=e.doc.firstChild.attrs;(null!==(n=a.width)&&void 0!==n?n:l.settings.defaultContentWidth)==="lg"&&(t*=s.Bk/s.r1);break}}}catch(e){console.error("[SmartLayout] Error getting container size decoration",e)}return t}},9244:function(e,t,n){"use strict";n.d(t,{x:function(){return m},K:function(){return h}});var i=n(52322),r=n(42946),o=n(87254),a=n(62614),l=n(49929),s=n(64253),d=n(67577),c=n(9237);let u=e=>{var t;let{value:n,updateValue:o,choices:u,defaultIcon:p,option:h}=e;return(0,i.jsxs)(d.Lt,{isLazy:!0,children:[(0,i.jsx)(s.kH,{placement:"top",label:h.name(),shouldWrapChildren:!0,children:(0,i.jsx)(d.PS,{as:a.z,variant:"toolbar",onMouseDown:c.br,rightIcon:(0,i.jsx)(l.G,{icon:r.ptq,transform:"shrink-6"}),children:(0,i.jsx)(l.G,{icon:(null===(t=u[n])||void 0===t?void 0:t.icon)||p})})}),(0,i.jsx)(d.sV,{children:Object.entries(u).map(e=>{let[t,{icon:n,name:r,disabled:a}]=e;return a?null:(0,i.jsx)(d.hP,{icon:(0,i.jsx)(l.G,{icon:n,fixedWidth:!0}),onClick:()=>o(t),children:r},t)})})]})},p=()=>({square:{name:o.ag._({id:"1DA6ap"}),icon:r.pL1},circle:{name:o.ag._({id:"7xMmki"}),icon:r.diR},landscape:{name:o.ag._({id:"XxIeKn"}),icon:r.r9b},portrait:{name:o.ag._({id:"3bV9gD"}),icon:r.j8N}}),h={square:{aspectRatio:"1 / 1"},circle:{borderRadius:"full",aspectRatio:"1 / 1"},landscape:{aspectRatio:"1.618 / 1"},portrait:{aspectRatio:"4 / 5"}},m={key:"imageShape",defaultValue:null,Control:e=>{let{value:t,updateValue:n,editor:o,option:a}=e;return(0,i.jsx)(u,{value:t,updateValue:n,editor:o,choices:p(),option:a,defaultIcon:r.pL1})},name:()=>o.ag._({id:"JbOau/"})}},97925:function(e,t,n){"use strict";n.d(t,{X1:function(){return m},cQ:function(){return h},fC:function(){return p},jM:function(){return d},yU:function(){return c}});var i=n(37243),r=n(12971),o=n(28817),a=n(65780),l=n(31292),s=n(7553);let d=e=>{let t=(0,s.P)(e.variantKey),n={};return t.options.forEach(t=>{var i;let{key:r,defaultValue:o}=t;n[r]=null!==(i=e.options[r])&&void 0!==i?i:o}),n},c=e=>{var t;let n=(0,s.P)(e.variantKey),i=d(e);return(null===(t=n.addDirection)||void 0===t?void 0:t.call(n,i))||"right"},u=(e,t)=>t.nodes.smartLayout.validContent(e.content),p=(e,t,n)=>{let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return null;let s=e.state.doc.resolve(i.inside),d=(0,r.Ru)(s,l.E)[0],c=(0,r.Ru)(s,l.G)[0],u=n&&(0,a.O)(n);if(!d&&!c||!u||"image"!==u.type.name)return null;let p=(0,o.tl)(t.target,e.dom,e=>e.hasAttribute("data-smart-layout-image-drop-target"));if(p){let{src:e,source:t,query:n,name:r,uploadStatus:o}=u.attrs,a=p.getBoundingClientRect();return{pos:i.inside,node:u,rect:a,image:{src:e,source:t,query:n,name:r,uploadStatus:o}}}return null},h=(e,t,n)=>{let r;if(!n||!u(n,e.state.schema))return null;let o=e.posAtCoords({left:t.clientX,top:t.clientY});if(!o||-1==o.inside)return null;let{doc:a}=e.state,s=a.nodeAt(o.pos),d=a.nodeAt(o.inside);if(d&&(0,l.E)(d))r={node:d,pos:o.inside};else if(s&&(0,l.E)(s))r={node:s,pos:o.pos};else{let e=a.resolve(o.inside);r=(0,i.qv)(e,l.E)}let p=r&&e.nodeDOM(r.pos),h=null==p?void 0:p.querySelector("[data-content-reference]"),m=null==h?void 0:h.getBoundingClientRect();if(!r||!m)return null;let g=a.resolve(r.pos).parent;if(!g||!(0,l.G)(g))return null;let f="right"===c(g.attrs)?t.clientX>m.left+m.width/2?"right":"left":t.clientY>m.top+m.height/2?"bottom":"top";return{pos:r.pos,node:r.node,rect:m,side:f}},m=(e,t)=>{let n=(0,i.qv)(t,l.G);n&&e.commands.selectNodeAtPos(n.pos)}},7553:function(e,t,n){"use strict";n.d(t,{P:function(){return ts},m:function(){return ta}});var i=n(52322),r=n(20437),o=n(38035),a=n(28535),l=n(73200),s=n(42946),d=n(87254),c=n(2784),u=n(7096),p=n(21491),h=n(38799),m=n(46238),g=n(9325),f=n(58905),x=n(75230),v=n(64951),y=n(71383),b=n(78112);let w=e=>{let{updateAttributes:t,value:n,placeholder:r,inputProps:o,...a}=e,l=(0,c.useCallback)(e=>{t&&t({label:""===e?null:e})},[t]),s=(0,y.CG)(b.Pw)&&t;return(0,i.jsxs)(f.C,{value:n||"",placeholder:r,onChange:l,isDisabled:!s,...a,children:[(0,i.jsx)(x.w,{width:"100%",h:"1em",py:0,noOfLines:1,userSelect:s?void 0:"none",lineHeight:1}),(0,i.jsx)(v.V,{width:"100%",my:-1,py:1,lineHeight:1,...o})]})};var C=n(35500),k=n(93593),j=n(56216),S=n(54154),A=n(43271);let I=function(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=(0,y.CG)(b.Pu),a=null!==(n=null==t?void 0:t.color)&&void 0!==n?n:e.color,l=a,s=(0,S.f)(o),d=k.Nu[s.shapeFill].opacity,p=(0,A.PL)(o);if(!l&&"custom"===s.shapeColorScheme&&p.length>0){let e=(0,A.PL)(o).map(A.H_);l=e[i%e.length]}let h=!0===r?0:!1===r?1:d,m=(0,c.useMemo)(()=>(0,j._M)(l,h),[l,h]),g=l?(0,u.Mt)(l):void 0;return{color:l,colorVars:m,headingColorCss:g,colorOverride:a}};var z=n(29117),L=n(17993),E=n(77533),N=n(55233),M=n(24772),_=n(49929),T=n(64253),R=n(27875),H=n.n(R),P=n(33945),O=n(87103);let D=()=>({sm:{targetColumns:4,label:d.ag._({id:"4Revpc"}),width:10},md:{targetColumns:3,label:d.ag._({id:"agPptk"}),width:15},lg:{targetColumns:2,label:d.ag._({id:"k7rCa/"}),width:20},xl:{targetColumns:1,label:d.ag._({id:"vp6Yr4"}),width:25}}),W={key:"cellSize",defaultValue:D().md.width,Control:e=>{let{value:t,updateValue:n,option:r}=e,o=Object.values(D()).find(e=>e.width===t);return(0,i.jsxs)(z.U,{spacing:2,mr:2,children:[(0,i.jsx)(T.kH,{placement:"top",label:(0,i.jsxs)(L.g,{spacing:0,children:[(0,i.jsx)(E.x,{color:"gray.400",children:r.name()}),(0,i.jsx)(E.x,{children:null==o?void 0:o.label})]}),children:(0,i.jsx)(E.x,{fontSize:"sm",fontWeight:"600",children:(0,i.jsx)(_.G,{icon:s.blG})})}),(0,i.jsxs)(N.iR,{min:D().sm.width,max:D().xl.width,step:5,value:t,onChange:n,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(N.Uj,{children:(0,i.jsx)(N.Ms,{})}),o?(0,i.jsx)(T.kH,{placement:"top",label:(0,i.jsxs)(L.g,{spacing:0,children:[(0,i.jsx)(E.x,{color:"gray.400",children:r.name()}),(0,i.jsx)(E.x,{children:o.label})]}),children:(0,i.jsx)(N.gs,{background:"trueblue.500"})}):(0,i.jsx)(N.gs,{background:"trueblue.500"})]})]})},getDefaultOnParse:e=>e.childElementCount%2==0?D().lg.width:D().md.width,name:()=>d.ag._({id:"LNoaEH"})},F=e=>{var t;let n,{containerSize:r,numCells:o,options:l,mobileMaxColumns:s=1,forceBalance:d=!1}=e,c=(null===(t=Object.values(D()).find(e=>e.width===l.cellSize))||void 0===t?void 0:t.targetColumns)||3,u=40/c,p=(0,h.TZ)(),m=(0,y.CG)(b.gh)===P.q.SLIDE_VIEW,g=(0,M.S)({base:s,sm:2,md:3,xl:4},{fallback:p?"base":"xl"})||s,f=O.cx||m?4:p?s:g,x=H()(40*r,10,10*f),v=Math.max(1,Math.floor(x/u)),w=Math.min(v,o);if(d&&o>w&&o<=4)for(;w>=1&&o%w!=0;w--);let C=Math.ceil(o/w),k=o%w;if(k&&"center"===l.horizontalAlign){let e=(w-k)/2;n=(0,i.jsx)(a.xu,{gridColumn:"span ".concat(6*e),gridRow:"".concat(C),className:"grid-offset"})}else if(k&&"right"===l.horizontalAlign){let e=w-k;n=(0,i.jsx)(a.xu,{gridColumn:"span ".concat(6*e),gridRow:"".concat(C),className:"grid-offset"})}return{maxWidth:x,targetWidth:u,targetColumns:c,maxColumns:v,columns:w,lastRowAligner:n}};var B=n(9069);let G={key:"color",Control:e=>{let{value:t,updateValue:n,editor:r}=e;return(0,i.jsx)(B.E,{color:t,setColor:e=>n(e,!0),editor:r,analyticsSource:"SmartLayout"})},name:()=>"Color"};var U=n(88881);let V={key:"horizontalAlign",defaultValue:null,Control:e=>{let{value:t,updateValue:n}=e;return(0,i.jsx)(z.U,{spacing:0,children:g.Ec.map(e=>{let{name:r,icon:o,alignment:a}=e;return(0,i.jsx)(U.h,{label:r(),icon:o,onClick:()=>{n(a===t?null:a)},isActive:t===a},r())})})},name:()=>d.ag._({id:"0j+RGO"})},q={key:"orientation",defaultValue:"vertical",Control:e=>{let{value:t,updateValue:n,option:r}=e;return(0,i.jsx)(U.h,{label:r.name(),onClick:()=>n("horizontal"===t?"vertical":"horizontal"),isActive:"horizontal"===t,icon:"horizontal"===t?s.eFW:s.r5q,testId:"smart-layout-orientation-option"})},name:()=>d.ag._({id:"MRB7nI"})},K="1.5em",Y=(e,t,n)=>{let i=(0,h.TZ)(),{columns:r}=F({containerSize:n,numCells:t,options:e,forceBalance:!0});return"vertical"===e.orientation||i||t>1&&1===r?{columns:1,isHorizontal:!1}:{columns:r,isHorizontal:!0}},X=(0,c.memo)(e=>{let{children:t,options:n,numCells:o,containerSize:a}=e,{isHorizontal:l,columns:s}=Y(n,o,a),d=l?{columns:s,rowGap:K}:{columns:1};return(0,i.jsx)(r.M,{"data-selection-ring":!0,...d,pos:"relative",children:t})});X.displayName="ArrowsWrapper";let $=(0,c.memo)(e=>{let{layoutOptions:t,children:n,numCells:r,layoutContainerSize:l,dragHandle:s,cellOptions:d}=e,{isHorizontal:c}=Y(t,r,l),u=t.horizontalAlign,h=(0,g.nN)(u||"left"),{colorVars:m}=I(t,d,e.index,!0),f=c?{minW:0,transformOrigin:"center top",p:C.p,pt:0}:{transformOrigin:"left center",p:C.p,px:0};return(0,i.jsxs)(o.k,{direction:c?"column":"right"===u?"row-reverse":"row","data-selection-ring":!0,"data-content-reference":!0,pos:"relative",gap:K,minH:c?void 0:"8em",children:[(0,i.jsx)(Z,{...e}),(0,i.jsx)(a.xu,{flex:"1",sx:{...f,...h,...m},className:p._B,children:n}),s]})});$.displayName="ArrowsCell";let Z=(0,c.memo)(e=>{let{layoutOptions:t,cellOptions:n,label:r,index:s,updateAttributes:d,numCells:c,layoutContainerSize:h}=e,{colorVars:f}=I(t,n,s),{isHorizontal:x}=Y(t,c,h),{width:v,height:y,ref:b}=(0,m.h)(),C=b.current?parseFloat(window.getComputedStyle(b.current).fontSize):16,k=(x?4:5)*C,j=1*C,S=x?"\n    M ".concat(v-j," 0\n    L ").concat(v," ").concat(k/2,"\n    L ").concat(v-j," ").concat(k,"\n    L 0 ").concat(k,"\n    L ").concat(j," ").concat(k/2,"\n    L 0 0 Z"):"\n    M 0 ".concat(y-j,"\n    L ").concat(k/2," ").concat(y,"\n    L ").concat(k," ").concat(y-j,"\n    L ").concat(k," 0\n    L ").concat(k/2," ").concat(j,"\n    L 0 0 Z"),A={fontSize:"1.5em",pos:"absolute",my:"0.5em",alignItems:"center",justifyContent:"center"};return(0,i.jsxs)(o.k,{lineHeight:"1",contentEditable:!1,align:"center",justify:"center",position:"relative",sx:{...f,...(0,g.nN)("center")},...x?{width:"100%",height:"".concat(4,"em")}:{width:"".concat(5,"em"),height:"100%"},ref:b,"data-export-as-image":!0,className:p.lA,children:[(0,i.jsx)(a.xu,{as:"svg",pos:"absolute",inset:"0",overflow:"visible",children:(0,i.jsx)(a.xu,{as:"path",d:S,className:p.G$})}),x?(0,i.jsx)(w,{value:r||"",updateAttributes:d,placeholder:"".concat(s+1),className:(0,l.cx)(u.A8),sx:A,display:"flex",style:{width:"100%",userSelect:"none"}}):(0,i.jsx)(o.k,{sx:A,className:(0,l.cx)(u.A8),children:s+1})]})});Z.displayName="ArrowsLabel";let Q={key:"arrows",name:()=>d.ag._({id:"YUGjgn"}),commandName:()=>d.ag._({id:"IsJ7Ns"}),icon:s.irl,options:[{...q,defaultValue:"horizontal"},G,V,{...W,checkEnabled:e=>"vertical"!==e.options.orientation}],cellOptions:[G],Wrapper:X,Cell:$,addDirection:e=>"horizontal"===e.orientation?"right":"bottom",isFullWidth:e=>"horizontal"===e.orientation,htmlTag:"arrows",keywords:["sequence","ordered","steps","arrows","chevrons","roadmap"],defaultOptions:{cellSize:D().sm.width}};var J=n(42822),ee=n(92035),et=n(18617),en=n(61372),ei=n(97925);let er=e=>{var t,n;let{index:r,theme:a,firstChildSize:s,layoutOptions:d,cellOptions:h,children:m,positionProps:g,markerProps:f,alignText:x,getPos:v,editor:y,markerFontSize:b}=e,w=(0,en.v0)(s,a),C=null===(n=d.numbered)||void 0===n||n,k=null===(t=(0,et.yw)()[b||"h3"])||void 0===t?void 0:t.size,j="".concat((C?k:1)+.75,"em"),S=(0,c.useCallback)(()=>{if(!y.isEditable)return;let e=y.state.doc.resolve(v());(0,ei.X1)(y,e)},[v,y]),A=(0,c.useMemo)(()=>(0,en.v0)(b||"h3",a),[b,a]),{colorVars:z}=I(d,h,r),L={...(0,ee.G6)()?(0,u.Mt)():void 0};return(0,i.jsxs)(o.k,{my:x?"var(--block-margin)":0,...g,contentEditable:!1,userSelect:"none",onMouseDown:S,cursor:"default",css:z,children:[(0,i.jsx)(J.M,{sx:w,h:"".concat(w.lineHeight,"em"),children:(0,i.jsx)(J.M,{fontSize:"var(--font-size)",h:j,w:j,className:p.w7,sx:L,...f,children:(0,i.jsx)(E.x,{sx:A,className:(0,l.cx)(u.A8),textAlign:"center",style:{lineHeight:1},children:C?r+1:""})})}),m]})},eo={key:"numbered",defaultValue:!0,Control:e=>{let{value:t,updateValue:n,option:r}=e;return(0,i.jsx)(U.h,{label:r.name(),onClick:()=>n(!t),isActive:t,icon:s.nFo})},name:()=>d.ag._({id:"mVQI+S"})},ea=(0,c.memo)(e=>{let{children:t}=e;return(0,i.jsx)(o.k,{gap:"1em",direction:"row",wrap:"wrap","data-selection-ring":!0,pos:"relative",children:t})});ea.displayName="BulletsWrapper";let el=(0,c.memo)(e=>{let{children:t,...n}=e,{layoutOptions:r,cellOptions:l,numCells:s,layoutContainerSize:d,dragHandle:c}=n,{columns:u}=F({options:r,numCells:s,containerSize:d}),{colorVars:h}=I(r,l,e.index,!0);return(0,i.jsxs)(o.k,{direction:"row",align:"flex-start",gap:C.p,flex:"1 1 auto",w:"calc(".concat(100/u,"% - ").concat("1em",")"),"data-selection-ring":!0,"data-content-reference":!0,pos:"relative",children:[(0,i.jsx)(er,{...n,alignText:!0}),(0,i.jsx)(a.xu,{flex:"1",minW:"0",className:p._B,css:h,pt:"var(--block-margin)",children:t}),c]})});el.displayName="BulletsCell";let es={key:"bullets",commandName:()=>d.ag._({id:"eKiifW"}),name:()=>d.ag._({id:"RYtHky"}),icon:s.M7i,options:[W,G,eo],cellOptions:[G],Wrapper:ea,Cell:el,htmlTag:"bullets",keywords:["bullets","layout","list","bullet"]};var ed=n(62710),ec=n(2557),eu=n(9244),ep=n(43255);let eh=[{label:()=>d.ag._({id:"yrC1Cd"}),key:"xs"},{label:()=>d.ag._({id:"4Revpc"}),key:"sm"},{label:()=>d.ag._({id:"agPptk"}),key:"md"},{label:()=>d.ag._({id:"k7rCa/"}),key:"lg"},{label:()=>d.ag._({id:"vp6Yr4"}),key:"xl"},{label:()=>d.ag._({id:"CK1KXz"}),key:"full"}],em={key:"shapeSize",defaultValue:null,Control:e=>{let{value:t,updateValue:n,option:r}=e,o=eh.findIndex(e=>e.key===t);-1===o&&(o=3);let{label:a}=eh[o],l=(0,c.useCallback)(e=>{let{key:t}=eh[e];n(t)},[n]);return(0,i.jsxs)(z.U,{spacing:2,mr:2,children:[(0,i.jsx)(T.kH,{placement:"top",label:(0,i.jsxs)(L.g,{spacing:0,children:[(0,i.jsx)(E.x,{color:"gray.400",children:r.name()}),(0,i.jsx)(E.x,{children:a()})]}),children:(0,i.jsx)(E.x,{fontSize:"sm",fontWeight:"600",children:(0,i.jsx)(_.G,{icon:r.icon,fixedWidth:!0})})}),(0,i.jsxs)(N.iR,{min:0,max:eh.length-1,step:1,value:o,onChange:l,w:"60px",focusThumbOnChange:!1,colorScheme:"trueblue",size:"sm",children:[(0,i.jsx)(N.Uj,{children:(0,i.jsx)(N.Ms,{})}),(0,i.jsx)(T.kH,{placement:"top",label:(0,i.jsxs)(L.g,{spacing:0,children:[(0,i.jsx)(E.x,{color:"gray.400",children:r.name()}),(0,i.jsx)(E.x,{children:a()})]}),children:(0,i.jsx)(N.gs,{background:"trueblue.500"})})]})]})},name:()=>d.ag._({id:"FeDgKA"}),icon:s.cxi},eg=(0,c.memo)(e=>{let{children:t,options:n,numCells:o,containerSize:a}=e,{columns:l,lastRowAligner:s}=F({containerSize:a,options:n,numCells:o,forceBalance:!0});return(0,i.jsxs)(r.M,{columns:6*l,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,s]})});eg.displayName="ImagesWithTextWrapper";let ef={xs:.3,sm:.44,md:.58,lg:.72,xl:.86,full:1},ex={xs:.15,sm:.2,md:.25,lg:.3,xl:.35,full:.4},ev=(0,c.memo)(e=>{var t,n,r,s;let{children:d,image:u,layoutOptions:h,cellOptions:m,numCells:f,layoutContainerSize:x,isContentEmpty:v,isLayoutFocused:y,variant:b,dragHandle:w,...C}=e,k="left"==h.imagePosition,S=null!==(n=h.imageShape)&&void 0!==n?n:"square",A=eu.K[S],I=b.key==eb.key,z=(null==u?void 0:u.source)==ed.j.key||I,L=h.shapeSize||!h.imageSize||z?z?ex[h.shapeSize||"md"]:ef[h.shapeSize||"full"]:h.imageSize,E=null==u?void 0:null===(t=u.meta)||void 0===t?void 0:t.has_transparency,N=null!==(r=h.horizontalAlign)&&void 0!==r?r:"center",M=(0,g.nN)(N),_=null!==(s=null==m?void 0:m.color)&&void 0!==s?s:h.color,T=(0,c.useMemo)(()=>(0,j._M)(_,0),[_]),{columns:R}=F({containerSize:x,options:h,numCells:f,forceBalance:!0}),H=1===R,P=L<=ef.xs,O=(0,c.useMemo)(()=>I?"min(100%, ".concat(D().sm.width*L,"em)"):H?"min(100%, ".concat(D().xl.width*L,"em)"):"100%",[L,I,H]),W=z?{"svg.colorable-icon path":{fill:_||"url(#theme-accent-gradient-linear) var(--accent-color-readable)"},aspectRatio:"1 / 1"}:E?{...A}:{...ec.c,...A},B={...T};return(0,i.jsxs)(o.k,{borderRadius:"var(--box-border-radius)",gap:v&&!y?0:P?"1em":"1.25em",direction:k?"row":"column",align:"center",justify:"center",sx:M,"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gridColumn:"span ".concat(6),children:[(0,i.jsx)(a.xu,{"data-smart-layout-image-drop-target":"true",className:(0,l.cx)("image"),w:"".concat(100*L,"%"),maxW:O,overflow:"hidden",sx:W,children:(0,i.jsx)(ep.Z,{image:u,imageShape:S,...C})}),(0,i.jsx)(a.xu,{minW:k?"8em":"100%",maxW:"100%",flex:"1",sx:B,className:p._B,"data-content-empty":v,css:T,children:d}),w]})});ev.displayName="ImageWithTextCell";let ey={key:"imagesText",name:()=>d.ag._({id:"cDxTeG"}),commandName:()=>d.ag._({id:"d+mR/1"}),keywords:["team","caption","images","text","layout"],icon:s.dLO,options:[{...W,getDefaultOnParse:()=>D().sm.width},{...em,icon:s.VmB,name:()=>d.ag._({id:"8J92vb"})},eu.x,V],cellOptions:[],Wrapper:eg,Cell:ev,addDirection:e=>"left"===e.imagePosition?"bottom":"right",htmlTag:"images",defaultOptions:{horizontalAlign:"left",imageShape:"landscape"}},eb={name:()=>d.ag._({id:"joUkNe"}),commandName:()=>d.ag._({id:"oEHjy6"}),key:"iconsText",icon:s.ocQ,keywords:["icons","text","layout"],options:[G,{...W,getDefaultOnParse:()=>D().sm.width},{...em,icon:s.VmB,name:()=>d.ag._({id:"bwZEQG"})},V],cellOptions:[G],Wrapper:eg,Cell:ev,addDirection:e=>"left"===e.imagePosition?"bottom":"right",defaultOptions:{horizontalAlign:"left"},defaultAttrs:{image:{source:ed.j.key}},htmlTag:"icons"},ew="40em",eC="0.25em";var ek=n(2689),ej=n.n(ek);let eS=(e,t)=>{let n=(0,h.TZ)(),i=(0,M.S)({base:1,sm:2,md:3,xl:4})||2;return(O.cx?4:n?2:i)*e<(t?3:2)},eA=(0,c.memo)(e=>{let{Step:t=eM,node:n,...r}=e,{children:a,numCells:l,options:s,theme:d}=r,c=s.horizontalAlign||"center",u=(0,g.nN)(c),p="funnel"===r.variant.key,h="staircase"===r.variant.key,m=ej()(l).map(e=>{var r;let o=null===(r=n.maybeChild(e))||void 0===r?void 0:r.attrs.options;return(0,i.jsx)(eI,{index:e,numCells:l,theme:d,isFunnel:p,alignment:c,isStepped:h,cellOptions:o,layoutOptions:s,Step:t},e)});return(0,i.jsxs)(o.k,{direction:"column","data-selection-ring":!0,align:"stretch",gap:"1em",children:[(0,i.jsx)(o.k,{direction:"column",sx:u,contentEditable:!1,gap:eC,"data-alternate-colors":!0,children:m}),(0,i.jsx)(o.k,{gap:"0.5em",direction:"column",children:a})]})});eA.displayName="StackedPyramidWrapper";let eI=e=>{let{index:t,numCells:n,cellOptions:r,layoutOptions:o,isFunnel:a,alignment:l,isStepped:s,Step:d}=e,c=!s&&a&&t===n-1?{pos:"relative",bottom:"0.25em"}:s||a||0!==t?{}:{pos:"relative",top:"0.25em"},{colorVars:u}=I(o,r,t,!1);return(0,i.jsx)(d,{index:t,numCells:n,isOutside:!0,isNumbered:!0,isStacked:!0,isFunnel:a,alignment:l,stepSx:u,children:(0,i.jsx)(eN,{index:t,...c})},t)},ez=(0,c.memo)(e=>{let{children:t,layoutOptions:n,...r}=e,{index:l}=r,{colorVars:s}=I(n,e.cellOptions,l,!0);return(0,i.jsxs)(o.k,{direction:"row",align:"flex-start",gap:C.p,w:"100%","data-selection-ring":!0,"data-content-reference":!0,pos:"relative",children:[(0,i.jsx)(er,{...r,layoutOptions:n,alignText:!0,markerFontSize:"h4"}),(0,i.jsx)(a.xu,{flex:"1",minW:"0",className:p._B,css:s,pt:"var(--block-margin)",children:t})]})});ez.displayName="StackedPyramidCell";let eL=(0,c.memo)(e=>{let t=eS(e.containerSize,e.options.outsideText),{colorVars:n}=I(e.options,void 0,void 0,!0);return t?(0,i.jsx)(eA,{...e}):(0,i.jsx)(r.M,{columns:1,autoRows:"1fr","data-selection-ring":!0,gap:eC,sx:e.options.outsideText?n:void 0,children:e.children})});eL.displayName="PyramidWrapper";let eE=(0,c.memo)(e=>{let{Step:t=eM,isFunnel:n=!1,isStepped:r=!1,alignment:l="center",...s}=e,{children:d,layoutOptions:c,index:u,numCells:h,dragHandle:m}=s,f=c.outsideText,x=eS(s.layoutContainerSize,f),{colorVars:v}=I(c,s.cellOptions,u),{colorVars:y}=I(c,s.cellOptions,u,!0);if(x)return(0,i.jsx)(ez,{...s});let b=c.numbered,w={...(0,g.nN)("right"===l?"right":"left")},k=r?{bottom:"-1px"}:n?{top:"calc(-1px - ".concat(eC," / 2 )")}:{bottom:"calc(-1px - ".concat(eC," / 2 )")},j=n?0===u:u===h-1,S=r?"0.5em":eC,A=b&&f&&!r,z=A&&n&&u===h-1?{pos:"relative",bottom:"15%"}:A&&!n&&0===u?{pos:"relative",top:"15%"}:{};return(0,i.jsxs)(o.k,{"data-selection-ring":!0,"data-content-reference":!0,pos:"relative",w:"100%",direction:"right"===l?"row-reverse":"row",justify:f||"center"!==l?void 0:"center",children:[(0,i.jsxs)(t,{numCells:h,index:u,isFunnel:n,isOutside:f,isNumbered:b,alignment:l,selectCell:s.selectCell,stepSx:v,children:[f?b?(0,i.jsx)(eN,{index:u,...z}):null:d,m]}),f&&(0,i.jsxs)(o.k,{direction:"column",justify:"center",minW:0,flex:1,px:C.p,py:C.p,pos:"relative",sx:w,className:p._B,css:y,children:[d,!j&&(0,i.jsx)(a.xu,{contentEditable:!1,position:"absolute",...k,left:S,right:S,h:"var(--line-thickness)",transform:"scaleY(0.5)",className:p.zQ})]})]})});eE.displayName="PyramidCell";let eN=(0,c.memo)(e=>{let{index:t,...n}=e;return(0,i.jsx)(E.x,{className:(0,l.cx)(u.A8,p.lA),fontSize:"1.25em",display:"flex",sx:(0,g.nN)("center"),pos:"relative",contentEditable:!1,...n,children:t+1})});eN.displayName="PyramidLabel";let eM=(0,c.memo)(e=>{let{numCells:t,index:n,isFunnel:r,isOutside:a,isStacked:l,children:s,alignment:d,selectCell:c,stepSx:u}=e,h=r?t-n-1:n,{width:f,height:x,ref:v}=(0,m.h)(),y=a?0:45,b=a&&!l?50:100,w=eT(t,h,y),k=.99*eT(t,h+1,y),j=b/100*k,S=(0,g.nN)(d),A=l?void 0:a?{ml:"center"===d?"".concat((b-j)/2,"%"):void 0}:{maxW:"calc(".concat(ew," * ").concat(j/100,")")};return(0,i.jsxs)(o.k,{direction:"column",ref:v,pos:"relative",w:"".concat(j,"%"),sx:{...S,...u},onClick:a?c:void 0,contentEditable:!a&&void 0,...A,children:[(0,i.jsx)(e_,{width:f,height:x,alignment:d,topSize:r?1:w/k,bottomSize:r?w/k:1}),(0,i.jsx)(o.k,{direction:"column",justify:"center",h:"100%",p:a?"0.5em":C.p,boxSizing:"border-box",sx:{...S,alignItems:a?S.alignItems:"stretch"},className:p.lA,w:"".concat((w+k)/2/k*100,"%"),minW:"3em",children:s})]})});eM.displayName="PyramidStep";let e_=(0,c.memo)(e=>{let{width:t,height:n,topSize:r,bottomSize:o,alignment:l}=e,s=t*(1-r)/2,d=t*(1-o)/2,c="left"===l?"\n    M 0 0\n    L ".concat(t-2*s," 0\n    L ").concat(t-2*d," ").concat(n,"\n    L 0 ").concat(n,"\n    L 0 0 Z"):"right"===l?"\n    M ".concat(2*s," 0\n    L ").concat(t," 0\n    L ").concat(t," ").concat(n,"\n    L ").concat(2*d," ").concat(n,"\n    L ").concat(2*s," 0 Z"):"\n    M ".concat(s," 0\n    L ").concat(t-s," 0\n    L ").concat(t-d," ").concat(n,"\n    L ").concat(d," ").concat(n,"\n    L ").concat(s," 0 Z");return(0,i.jsx)(a.xu,{as:"svg",pos:"absolute",inset:"0",overflow:"visible",contentEditable:!1,w:"".concat(t,"px"),h:"".concat(n,"px"),children:(0,i.jsx)(a.xu,{as:"path",d:c,className:p.G$})})});e_.displayName="TrapezoidSVG";let eT=(e,t,n)=>n+t/e*(100-n),eR={...eo,checkEnabled:e=>e.options.outsideText},eH={key:"pyramid",name:()=>d.ag._({id:"MYceoI"}),commandName:()=>d.ag._({id:"CPkQNq"}),icon:s.Ta_,options:[{key:"outsideText",defaultValue:!0,Control:e=>{let{value:t,updateValue:n,option:r}=e;return(0,i.jsx)(U.h,{label:r.name(),onClick:()=>n(!t),isActive:t,icon:s.bnx})},name:()=>d.ag._({id:"OtsbQu"})},eR,G],cellOptions:[G],Wrapper:eL,Cell:eE,addDirection:()=>"bottom",htmlTag:"pyramid",featureFlag:"pyramidSmartLayouts"},eP=(0,c.memo)(e=>(0,i.jsx)(eE,{...e,isFunnel:!0}));eP.displayName="FunnelCell";let eO={...eH,key:"funnel",name:()=>d.ag._({id:"MWYJBI"}),commandName:()=>d.ag._({id:"HTZVrr"}),icon:s.Ct,htmlTag:"funnel",Cell:eP},eD=(0,c.memo)(e=>{let{children:t,options:n,containerSize:r}=e,a=(0,g.nN)(n.horizontalAlign||"left"),{colorVars:l}=I(n);if(eS(r,n.outsideText))return(0,i.jsx)(eA,{...e,Step:eW});let s={...a,...n.outsideText?l:{}};return(0,i.jsx)(o.k,{direction:"column","data-selection-ring":!0,gap:"0.5em",sx:s,children:t})});eD.displayName="StaircaseWrapper";let eW=(0,c.memo)(e=>{let{numCells:t,index:n,isOutside:r,isStacked:a,children:l,alignment:s,selectCell:d,stepSx:c}=e,u=(0,g.nN)(s),h={...u,alignItems:r?u.alignItems:"stretch",...c},m=r&&!a?50:100,f=m/100*eT(t,n+1,r?0:45),x=a?void 0:r?{ml:"center"===s?"".concat((m-f)/2,"%"):void 0}:{maxW:"calc(".concat(ew," * ").concat(f/100,")")};return(0,i.jsx)(o.k,{py:r?"0.5em":C.p,px:C.p,sx:h,className:p.w7,w:"".concat(f,"%"),boxSizing:"border-box",...x,direction:"column",justify:"center",contentEditable:!r&&void 0,onClick:r?d:void 0,pos:"relative",children:l})});eW.displayName="StaircaseStep";let eF=(0,c.memo)(e=>{let t=e.layoutOptions.horizontalAlign||"left";return(0,i.jsx)(eE,{...e,Step:eW,isFunnel:!1,isStepped:!0,alignment:t})});eF.displayName="StaircaseCell";let eB={...eH,key:"staircase",name:()=>d.ag._({id:"CFVHFO"}),commandName:()=>d.ag._({id:"DuZtoX"}),options:[...eH.options,V],icon:s.jUS,Wrapper:eD,Cell:eF,htmlTag:"staircase"};var eG=n(30401),eU=n(89886);let eV=(0,c.memo)(e=>{let{children:t,options:n,containerSize:o,numCells:a}=e,{columns:l,lastRowAligner:s}=F({containerSize:o,options:n,numCells:a,forceBalance:!0});return(0,i.jsxs)(r.M,{columns:6*l,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,s]})});eV.displayName="CircleStatsWrapper";let eq={xs:.35,sm:.48,md:.61,lg:.74,xl:.87,full:1},eK=(0,c.memo)(e=>{let{theme:t,children:n,layoutOptions:r,cellOptions:s,label:d,updateAttributes:c,isContentEmpty:m,isLayoutFocused:f,dragHandle:x,index:v}=e,y=(0,S.f)(t),b=r.horizontalAlign,C=(0,g.nN)(b||"center"),k=(0,eU.y7)(e),j=(0,eG.Nb)({innerRadius:41,outerRadius:50}),A=j({startAngle:0,endAngle:2*k*Math.PI}),z=j({startAngle:0,endAngle:2*Math.PI}),L=eq[r.shapeSize]||1,E="min(100%, ".concat(D().md.width*L,"em)"),N=(0,h.TZ)(),{colorOverride:M,headingColorCss:_}=I(r,s,v,!0),{colorVars:T}=I(r,s,v),{colorVars:R}=I(r,s,v,!1),{useTransparentTrack:H,shouldRecolorTrack:P}=eX(y,M);return(0,i.jsxs)(o.k,{borderRadius:"var(--box-border-radius)",direction:"column",align:"center",justify:"start","data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:m&&!f?0:"1em",sx:C,className:p._B,gridColumn:"span ".concat(6),children:[(0,i.jsxs)(o.k,{direction:"column",align:"center",justify:"center",width:"".concat(100*L,"%"),maxW:E,pos:"relative",contentEditable:!1,py:"0.25em",css:{..._},children:[(0,i.jsx)(w,{value:d||"",updateAttributes:c,pos:"absolute",left:"".concat(9,"%"),className:(0,l.cx)(u.A8),fontSize:N?"".concat(2*L,"em"):"".concat(2.5*L,"em"),lineHeight:1,display:"flex",alignItems:"center",sx:(0,g.nN)("center"),style:{width:"".concat(82,"%")}}),(0,i.jsxs)("svg",{width:"100%",viewBox:"".concat(-50," ").concat(-50," ").concat(100," ").concat(100),overflow:"visible",children:[(0,i.jsx)(a.xu,{as:"path",d:z||void 0,className:p.G$,style:{fill:H?"var(--card-color)":void 0},"data-testid":"stats-track",css:P?T:void 0}),(0,i.jsx)(a.xu,{as:"path",d:A||void 0,className:p.gg,"data-testid":"stats-fill",css:R})]})]}),(0,i.jsx)(a.xu,{w:"100%","data-content-empty":m,children:n}),x]})});eK.displayName="CircleStatsCell";let eY={key:"circleStats",name:()=>d.ag._({id:"mvpFPS"}),commandName:()=>d.ag._({id:"4Rg7EO"}),icon:s.NWt,options:[W,{...em,name:()=>d.ag._({id:"1C+7U1"}),icon:s.diR},G,V],cellOptions:[G],Wrapper:eV,Cell:eK,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats","circle"],htmlTag:"circles",featureFlag:"statsSmartLayouts"},eX=(e,t)=>{let n="default"!==e.shapeColorScheme;return{useTransparentTrack:"none"===e.shapeFill||"solid"===e.shapeFill&&"custom"===e.shapeColorScheme||t&&n,shouldRecolorTrack:n}},e$=(0,c.memo)(e=>{let{children:t,options:n,containerSize:o,numCells:a}=e,{columns:l,lastRowAligner:s}=F({containerSize:o,options:n,numCells:a,forceBalance:!0});return(0,i.jsxs)(r.M,{columns:6*l,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,s]})});e$.displayName="BarStatsWrapper";let eZ=(0,c.memo)(e=>{let{theme:t,children:n,layoutOptions:r,cellOptions:s,label:d,updateAttributes:c,isContentEmpty:h,isLayoutFocused:m,dragHandle:f,index:x}=e,v=(0,S.f)(t),y=r.horizontalAlign,b=(0,g.nN)(y||"left"),C=(0,eU.y7)(e),{colorOverride:k,headingColorCss:j}=I(r,s,x,!0),{colorVars:A}=I(r,s,x),{colorVars:z}=I(r,s,x,!1),{useTransparentTrack:L,shouldRecolorTrack:E}=eX(v,k);return(0,i.jsxs)(o.k,{borderRadius:"var(--box-border-radius)",direction:"column",align:"center",justify:"start",sx:b,"data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:h&&!m?0:"0.75em",gridColumn:"span ".concat(6),className:p._B,children:[(0,i.jsxs)(o.k,{direction:"row",align:"center",justify:"stretch",width:"100%",pos:"relative",contentEditable:!1,gap:"0.75em",css:j,children:[(0,i.jsxs)(a.xu,{flex:"1",my:"0.5em",pos:"relative",borderRadius:"var(--box-border-radius)",children:[(0,i.jsx)(a.xu,{pos:"absolute",inset:"0",className:p.w7,style:L?{background:"var(--card-color)"}:void 0,css:E?A:void 0}),(0,i.jsx)(a.xu,{w:"".concat(100*C,"%"),h:"1.25em",pos:"relative",className:p.kv,borderRadius:"inherit",css:z})]}),(0,i.jsx)(w,{value:d||"",updateAttributes:c,className:(0,l.cx)(u.A8),lineHeight:1,display:"flex",alignItems:"center",sx:b,fontSize:"1.25em",inputProps:{textAlign:"right",width:"4em",py:0},minW:"1em"})]}),(0,i.jsx)(a.xu,{w:"100%","data-content-empty":h,children:n}),f]})});eZ.displayName="BarStatsCell";let eQ={key:"barStats",name:()=>d.ag._({id:"LYRXtx"}),commandName:()=>d.ag._({id:"MSp/ys"}),icon:s.xJn,options:[W,G,V],cellOptions:[G],Wrapper:e$,Cell:eZ,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats","bar","progress","number","percentage"],htmlTag:"percentages",featureFlag:"statsSmartLayouts"},eJ=(0,c.memo)(e=>{let{children:t,options:n,containerSize:o,numCells:a}=e,{columns:l,lastRowAligner:s}=F({containerSize:o,options:n,numCells:a,mobileMaxColumns:1,forceBalance:!0});return(0,i.jsxs)(r.M,{columns:6*l,rowGap:"3em",columnGap:"1.5em","data-selection-ring":"padded",pos:"relative",borderRadius:"var(--box-border-radius)",children:[t,s]})});eJ.displayName="PlainStatsWrapper";let e0={xs:2,sm:2.65,md:3.3,lg:3.95,xl:4.6,full:5.25},e1=(0,c.memo)(e=>{let{children:t,layoutOptions:n,cellOptions:r,label:s,isContentEmpty:d,isLayoutFocused:c,updateAttributes:m,index:f,dragHandle:x}=e,{headingColorCss:v,colorVars:y}=I(n,r,f,!0),b=n.horizontalAlign,C=(0,g.nN)(b||"center"),k=e0[n.shapeSize||"md"],j={...C,...y},S=(0,h.TZ)();return(0,i.jsxs)(o.k,{borderRadius:"var(--box-border-radius)",direction:"column",align:"center",justify:"start","data-selection-ring":"padded","data-content-reference":!0,pos:"relative",gap:d&&!c?0:"0.75em",sx:j,className:p._B,gridColumn:"span ".concat(6),children:[(0,i.jsx)(o.k,{direction:"column",align:"center",justify:"center",width:"100%",pos:"relative",contentEditable:!1,py:"0.5em",css:v,fontSize:S?"0.75em":"1em",children:(0,i.jsx)(w,{value:s||"",updateAttributes:m,className:(0,l.cx)(u.A8),fontSize:"".concat(k,"em"),lineHeight:1,display:"flex",alignItems:"center",sx:(0,g.nN)(b||"center"),style:{width:"100%"},placeholder:"—"})}),(0,i.jsx)(a.xu,{w:"100%","data-content-empty":d,children:t}),x]})});e1.displayName="PlainStatsCell";let e2={key:"stats",name:()=>d.ag._({id:"29Hx9U"}),commandName:()=>d.ag._({id:"v2fVzA"}),icon:s.jGC,options:[W,{...em,name:()=>d.ag._({id:"IfKwpr"}),icon:s.UgL},G,V],cellOptions:[G],Wrapper:eJ,Cell:e1,defaultAttrs:{label:"50%"},addDirection:()=>"right",keywords:["stats"],htmlTag:"numbers",featureFlag:"statsSmartLayouts"},e4=(0,c.memo)(e=>{let{children:t}=e;return(0,i.jsx)(o.k,{gap:"1em",wrap:"wrap","data-selection-ring":!0,pos:"relative",children:t})});e4.displayName="TextBoxesWrapper";let e3=(0,c.memo)(e=>{let{children:t,layoutOptions:n,cellOptions:r,numCells:o,layoutContainerSize:l,dragHandle:s,index:d}=e,{columns:c}=F({options:n,numCells:o,containerSize:l}),{colorVars:u}=I(n,r,d),h=n.horizontalAlign,m=(0,g.nN)(h),f={...u,...m};return(0,i.jsxs)(a.xu,{flex:"1 1 auto",w:"calc(".concat(100/c,"% - ").concat("1em",")"),boxSizing:"border-box",p:C.p,"data-content-reference":!0,"data-selection-ring":!0,pos:"relative",sx:f,className:p.w7,children:[t,s]})});e3.displayName="TextBoxCell";let e5={key:"textBoxes",name:()=>d.ag._({id:"b7qbjN"}),commandName:()=>d.ag._({id:"xAk5nC"}),icon:s.Lc0,options:[W,G,V],cellOptions:[G],Wrapper:e4,Cell:e3,addDirection:()=>"right",htmlTag:"boxes",keywords:["textbox","layout"]};var e7=n(69251),e8=n(70965);let e6={base:!1,md:!0},e9={base:!1,md:!0},te=e=>{let t=(0,e8.iq)(e6)||!1,n=(0,e8.iq)(e9)||!1,i="horizontal"===e.orientation&&n,r=e.twoSided&&(i||t);return{isHorizontal:i,isTwoSided:r}},tt=e=>e?1.5:.5,tn=(0,c.memo)(e=>{let{children:t,options:n}=e,{isHorizontal:r,isTwoSided:o}=te(n),l=tt(n.numbered),s=r?(0,i.jsx)(a.xu,{gridRow:2,gridColumn:1,"data-spotlight-dim":!0,contentEditable:!1,children:(0,i.jsx)(a.xu,{position:"absolute",height:"var(--line-thickness)",width:"100%",left:"0",right:"0",className:p.zQ})}):(0,i.jsx)(J.M,{gridColumn:2,gridRow:1,"data-spotlight-dim":!0,contentEditable:!1,children:(0,i.jsx)(a.xu,{position:"absolute",width:"var(--line-thickness)",top:"0",bottom:"0",className:p.zQ})});return(0,i.jsxs)(e7.r,{...r?{templateRows:"auto 0px auto",autoColumns:"1fr",justifyContent:"center",columnGap:"1em",mt:o?void 0:"".concat(l,"em")}:{templateColumns:o?"1fr 0px 1fr":"0px 0px 1fr",autoRows:"auto",justifyContent:"center",rowGap:"1em",ml:o?void 0:"".concat(l,"em")},"data-selection-ring":!0,pos:"relative",children:[s,t,o&&(0,i.jsx)(a.xu,{...r?{gridColumn:"1 / span 1",gridRow:3,minW:"0.5fr"}:{gridColumn:3,gridRow:"1 / span 1",minH:"".concat(4,"em")},contentEditable:!1})]})});tn.displayName="TimelineWrapper";let ti=(0,c.memo)(e=>{let{children:t,layoutOptions:n,index:r,dragHandle:l,cellOptions:s}=e,d=r+1,{isHorizontal:c,isTwoSided:u}=te(n),m=u&&d%2==1,f=n.hasLine?"inside":"none",x=tt(n.numbered),{colorVars:v}=I(n,s,r,!0),y=(0,h.TZ)(),b="".concat(("inside"===f?y?1.75:3.5:0)+(c?"none"===f?x+1:1:2),"em"),w=c?{minW:"min(100%, ".concat(8,"em)"),...(0,g.nN)("center"),...v}:{minH:u?"".concat(8,"em"):void 0,...(0,g.nN)(m?"right":"left"),py:"".concat(1,"em"),...v};return(0,i.jsxs)(o.k,{minW:"0",position:"relative",transitionProperty:"border, padding, right, margin","data-selection-ring":!0,"data-content-reference":!0,...c?{gridColumn:"span 2",gridRow:m?1:3,align:m?"flex-end":"flex-start",justify:"center",transformOrigin:m?"center bottom":"center top",pt:m?void 0:b,pb:m?b:void 0,px:"".concat(1,"em")}:{gridRow:"span 2",gridColumn:m?1:3,align:"flex-start",transformOrigin:m?"right center":"left center",pl:m?void 0:b,pr:m?b:void 0},"data-test-timeline-item":r,children:[(0,i.jsx)(tr,{...e}),(0,i.jsxs)(a.xu,{sx:w,className:p._B,flex:"1",maxW:"100%",children:[t,l]})]})});ti.displayName="TimelineCell";let tr=(0,c.memo)(e=>{let{index:t,layoutOptions:n}=e,{isHorizontal:r,isTwoSided:o}=te(n),l=o&&t%2==0,s=n.hasLine?"inside":"none",d=(0,h.TZ)(),c="none"===s?0:"inside"===s?"".concat(d?1.75:3.5,"em"):"100%";return(0,i.jsx)(er,{...e,alignText:!r,positionProps:{...r?l?{bottom:0,transform:"translateY(50%)"}:{top:0,transform:"translateY(-50%)"}:l?{right:0,transform:"translateX(50%)"}:{left:0,transform:"translateX(-50%)"},position:"absolute"},children:"none"!==s&&(0,i.jsx)(a.xu,{position:"absolute",zIndex:"-1","data-testid":"timeline-line",...r?{height:c,width:"var(--line-thickness)",left:"50%",top:l?void 0:"50%",bottom:l?"50%":void 0,transform:"translateX(-50%)"}:{width:c,height:"var(--line-thickness)",top:"50%",transform:"translateY(-50%)",left:l?void 0:"calc(100% - var(--line-thickness))",right:l?"calc(100% - var(--line-thickness))":void 0},className:p.zQ})})});tr.displayName="TimelineCellMarker";let to={key:"timeline",name:()=>d.ag._({id:"cklVjM"}),commandName:()=>d.ag._({id:"jJ1FpU"}),icon:s.PZJ,options:[q,{key:"twoSided",defaultValue:!0,Control:e=>{let{value:t,updateValue:n,option:r}=e;return(0,i.jsx)(U.h,{label:r.name(),onClick:()=>n(!t),isActive:t,icon:s.cp3,testId:"smart-layout-two-sided-option"})},name:()=>d.ag._({id:"ovs7iP"})},eo,{key:"hasLine",defaultValue:!0,Control:e=>{let{value:t,updateValue:n,option:r}=e;return(0,i.jsx)(U.h,{label:r.name(),onClick:()=>n(!t),isActive:t,icon:s.ql$})},name:()=>d.ag._({id:"aPb1AT"})},G],cellOptions:[G],Wrapper:tn,Cell:ti,addDirection:e=>"horizontal"===e.orientation?"right":"bottom",isFullWidth:e=>"horizontal"===e.orientation,htmlTag:"timeline",keywords:["timeline","layout","list","horizontal","vertical"]},ta=()=>[es,e5,ey,eb,to,Q,e2,eY,eQ,eH,eO,eB],tl=()=>ta().reduce((e,t)=>(e[t.key]=t,e),{}),ts=e=>e&&tl()[e]||es},89886:function(e,t,n){"use strict";n.d(t,{g9:function(){return d},y7:function(){return o}});var i=n(27875),r=n.n(i);let o=e=>{let{label:t}=e,n=d(t);return n?r()(n/100,0,1):0},a=/[0-9,.]+/g,l=/[,.](?=\d{3})/g,s=/([0-9]+)\s?\/\s?([0-9]+)/g,d=e=>{if(e){if("number"==typeof e)return e;try{var t,n;let i=null===(t=e.match(s))||void 0===t?void 0:t[0];if(i){let[e,t]=i.split("/").map(e=>e.trim());return 100*parseFloat(e)/parseFloat(t)}let r=null===(n=e.match(a))||void 0===n?void 0:n[0],o=null==r?void 0:r.replaceAll(l,"");return o?parseFloat(o):void 0}catch(t){console.error("[SmartLayout] Failed to parse label number: ".concat(e),t);return}}}},78851:function(e,t,n){"use strict";n.d(t,{ty:function(){return g},Yg:function(){return m}});var i=n(27191),r=n(52780),o=n(37243);let a=new i.H$("suggestion"),l={from:0,to:0};var s=n(64253),d=n(27875),c=n.n(d),u=n(2784),p=n(55079),h=n(86332);let m=e=>{let{ref:t,selectItem:n,options:i}=e,[r,o]=(0,u.useState)(0),a=(0,u.useRef)(null),l=(0,u.useRef)({selectedIndex:r,options:i,selectItem:n});return l.current={selectedIndex:r,options:i,selectItem:n},(0,u.useImperativeHandle)(t,()=>{let e=e=>{let{key:t}=e,n=l.current;return"ArrowUp"===t?(e.preventDefault(),n.selectedIndex<=0?o(i.length-1):o(c()(n.selectedIndex-1,0,n.options.length-1))):"ArrowDown"===t?(e.preventDefault(),n.selectedIndex>=n.options.length-1?o(0):o(c()(n.selectedIndex+1,0,n.options.length-1))):("Enter"===t||"Tab"===t)&&(e.preventDefault(),n.options.length>0&&n.selectItem(r)),e.stopPropagation(),e.preventDefault(),!0};return{onKeyDown:t=>{let{event:n}=t;return!!["ArrowUp","ArrowDown","Enter","Tab"].includes(n.key)&&e(n)}}}),(0,u.useEffect)(()=>{if(a.current){var e;null==a||null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}},[r]),{selectedIndex:r,selectedItemEl:a}},g=e=>{let{char:t,MenuComponent:n,pluginKey:d,command:c,allowSpaces:u=!1,...m}=e;return o.hj.create({...m,addOptions:()=>({HTMLAttributes:{},suggestion:{char:t,pluginKey:d,allowSpaces:u,startOfLine:!1,command:c,render:()=>{let e=null,t=null;return{onStart:i=>{if(t&&e){e.updateProps(i),t.setProps({getReferenceClientRect:i.clientRect}),t.show();return}e=new h.M(n,{props:i,editor:i.editor});let r=i.editor.view.dom.parentElement;t=(0,p.ZP)(r,{getReferenceClientRect:i.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start",zIndex:s.qZ.zIndices.dropdown,popperOptions:{modifiers:[{name:"preventOverflow",options:{padding:{bottom:8}}},{name:"flip",options:{fallbackPlacements:["auto-start"]}}]}})},onUpdate(n){null==e||e.updateProps(n),null==t||t.setProps({getReferenceClientRect:n.clientRect})},onKeyDown(n){var i;return"Escape"===n.event.key?(null==t||t.destroy(),null==e||e.destroy(),t=null,e=null,!0):null==e?void 0:null===(i=e.ref)||void 0===i?void 0:i.onKeyDown(n)},onExit(n){!0!==d.getState(n.editor.view.state).active&&(null==t||t.destroy(),null==e||e.destroy(),t=null,e=null)}}}}}),addProseMirrorPlugins(){return[function(e){let t,{pluginKey:n=a,editor:s,char:d="@",allowSpaces:c=!1,prefixSpace:u=!0,startOfLine:p=!1,decorationTag:h="span",decorationClass:m="suggestion",command:g=()=>null,items:f=()=>[],render:x=()=>({}),allow:v=()=>!0}=e,y=null==x?void 0:x(),b=e=>{e.dispatch(e.state.tr.setMeta(n,{active:!1,decorationId:"",key:null,range:l,query:null,text:null,composing:!1}))};return new i.Sy({key:n,view(){return{update:async(e,n)=>{var i,r,o,a,l;let d=null===(i=this.key)||void 0===i?void 0:i.getState(n),c=null===(r=this.key)||void 0===r?void 0:r.getState(e.state),u=d.active&&c.active&&d.range.from!==c.range.from,p=!d.active&&c.active,h=d.active&&!c.active,m=!p&&!h&&d.query!==c.query,x=p||u,v=m&&!u,b=h||u;if(!x&&!v&&!b)return;let w=b&&!x?d:c,C=document.querySelector('[data-decoration-id="'.concat(w.decorationId,'"]'));t={editor:s,range:w.range,query:w.query,text:w.text,items:v||x?await f({editor:s,query:w.query}):[],command:e=>{g({editor:s,range:w.range,props:e})},decorationNode:C,clientRect:C?()=>{var e;let{decorationId:t}=null===(e=this.key)||void 0===e?void 0:e.getState(s.state);return document.querySelector('[data-decoration-id="'.concat(t,'"]')).getBoundingClientRect()}:null},b&&(null==y||null===(o=y.onExit)||void 0===o||o.call(y,t)),v&&(null==y||null===(a=y.onUpdate)||void 0===a||a.call(y,t)),x&&(null==y||null===(l=y.onStart)||void 0===l||l.call(y,t))},destroy:()=>{var e;t&&(null==y||null===(e=y.onExit)||void 0===e||e.call(y,t))}}},state:{init:()=>({active:!1,decorationId:"",range:l,key:null,query:null,text:null,composing:!1}),apply(e,t,i,r){let a;a=e.getMeta(n)?{...e.getMeta(n)}:{...t};let{isEditable:h}=s,{composing:m}=s.view,{selection:g}=e,{empty:f,from:x}=g;if(a.composing=m,!a.active&&a.key!==d)return a;if(a.active&&a.key===d)return a.key=null,a;if(h&&(f||s.view.composing)){t.range&&(x<t.range.from||x>t.range.to)&&!m&&!t.composing&&(a.active=!1);let e=function(e){var t;let{char:n,allowSpaces:i,prefixSpace:r,startOfLine:a,$position:l}=e,s=(0,o.Ov)(n),d=new RegExp("\\s".concat(s,"$")),c=a?"^":"",u=i?RegExp("".concat(c).concat(s,".*?(?=\\s").concat(s,"|$)"),"gm"):RegExp("".concat(c,"(?:^)?").concat(s,"[^\\s").concat(s,"]*"),"gm"),p=null===(t=l.nodeBefore)||void 0===t?void 0:t.text;if(!p)return null;let h=l.pos-p.length,m=Array.from(p.matchAll(u)).pop();if(!m||void 0===m.input||void 0===m.index)return null;let g=m.input.slice(Math.max(0,m.index-1),m.index),f=/^[\s\0]?$/.test(g);if(r&&!f)return null;let x=h+m.index,v=x+m[0].length;return(i&&d.test(p.slice(v-1,v+1))&&(m[0]+=" ",v+=1),x<l.pos&&v>=l.pos)?{range:{from:x,to:v},query:m[0].slice(n.length),text:m[0]}:null}({char:d,allowSpaces:c,prefixSpace:u,startOfLine:p,$position:g.$from});e&&v({editor:s,state:r,range:e.range})?(a.active=!0,a.decorationId=t.decorationId?t.decorationId:"id_".concat(Math.floor(4294967295*Math.random())),a.range=e.range,a.query=e.query,a.text=e.text):a.active=!1}else a.active=!1;return a.active||(a.decorationId=null,a.range=l,a.query=null,a.text=null),a}},props:{handleKeyDown(e,t){var i;let r=e.state.tr,o=this.getState(e.state);if(!o)return!1;let{active:a,range:l}=o;if(!l)return!1;if(a||t.key!==d||t.metaKey){if(!a)return!1;"Escape"===t.key&&b(e)}else{let i={...o};i.active=!0,i.key=t.key,i.query="",e.dispatch(r.setMeta(n,i))}return(null==y?void 0:null===(i=y.onKeyDown)||void 0===i?void 0:i.call(y,{view:e,event:t,range:l}))||!1},decorations(e){let t=this.getState(e);if(!t)return null;let{active:n,range:i,decorationId:o}=t;return n&&i?r.EH.create(e.doc,[r.p.inline(i.from,i.to,{nodeName:h,class:m,"data-decoration-id":o||""})]):null}}})}({editor:this.editor,...this.options.suggestion})]}})}},63162:function(e,t,n){"use strict";n.d(t,{y:function(){return s},d:function(){return c}});var i=n(6776),r=n(37243),o=n(23491),a=n(72205),l=n(39449);let s=i.ZP.extend({name:"highlight",priority:a.a.Highlight,excludes:"textColor highlight",addAttributes:()=>({variant:{},hex:{}}),addCommands(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),setHighlightColor:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:e,variant:null})},setHighlightVariant:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{variant:e,hex:null})}}},parseHTML:()=>[{tag:"mark[class=highlight]"},{tag:"*[highlight]",getAttrs(e){let t=e.getAttribute("highlight");return!!t&&(l.RJ.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}],renderHTML(e){let{HTMLAttributes:t,mark:n}=e,i=n.attrs.hex&&(0,o.DP)(n.attrs.hex),a="var(".concat(i?"--highlight-color-dark":"--highlight-color-light",")"),l=["--highlight-color: ".concat(n.attrs.hex),"color: ".concat(a),"--link-color: ".concat(a),"--link-color-hover:".concat("var(".concat(i?"--highlight-link-color-hover-dark":"--highlight-link-color-hover-light",")"))].join("; ");return["mark",(0,r.P1)(this.options.HTMLAttributes,t,{class:"highlight",style:l})]},renderHTMLforAI(e){var t;let{mark:n}=e;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}}).configure({multicolor:!0});var d=n(7553);let c=r.vc.create({name:"textColor",excludes:"highlight textColor",priority:a.a.TextColor,addAttributes:()=>({variant:{},hex:{}}),addCommands(){return{setTextColorVariant:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:null,variant:e})},setTextColor:e=>t=>{let{commands:n}=t;return n.setMark(this.name,{hex:e,variant:null})}}},parseHTML:()=>[{tag:"span[class=textColor]"},{tag:"*[color]",getAttrs(e){if(["ASIDE","DIV",...Object.values((0,d.m)()).map(e=>{var t;return null===(t=e.htmlTag)||void 0===t?void 0:t.toUpperCase()}).filter(Boolean)].includes(e.tagName))return!1;let t=e.getAttribute("color");return!!t&&(l.RJ.includes(t)?{variant:t}:{hex:t})},consuming:!1,priority:60}],renderHTML(e){let{HTMLAttributes:t,mark:n}=e;return["span",(0,r.P1)(t,{class:"textColor",style:n.attrs.hex?"--text-color: ".concat(n.attrs.hex):void 0})]},renderHTMLforAI(e){var t;let{mark:n}=e;return["span",{color:null!==(t=n.attrs.hex)&&void 0!==t?t:n.attrs.variant}]}})},27581:function(e,t,n){"use strict";n.d(t,{D:function(){return x},Y:function(){return r}});var i,r,o=n(37243),a=n(18617),l=n(27210),s=n(84305),d=n(44170),c=n(52322),u=n(73200),p=n(87254),h=n(7096),m=n(45075),g=n(9325);let f=e=>{let{node:t}=e,{level:n,horizontalAlign:i,placeholder:o}=t.attrs,a=o||(n===r.DefaultTitle?p.ag._({id:"wja8aL"}):p.ag._({id:"MHrjPM"}));return(0,c.jsx)(m.lO,{...e,style:{display:"flex",flexDirection:"column",...(0,g.nN)(i)},children:(0,c.jsx)(l.ms,{level:n,className:(0,u.cx)("title",h.A8),"data-placeholder":a,style:{minWidth:"min(100%, 10em)"}})})};(i=r||(r={}))[i.DefaultTitle=1]="DefaultTitle",i[i.LargeTitle=2]="LargeTitle",i[i.XLargeTitle=3]="XLargeTitle";let x=o.NB.create({name:"title",content:"inline*",group:"block cardNotesBlock",defining:!0,selectable:!1,addAttributes:()=>({level:{default:1}}),addNodeView:()=>(0,l.fW)(f,{update:d.E7}),parseHTML:()=>[{tag:"h1[class=title]"}],addInputRules(){return(0,a.Yt)().map(e=>{let[,t]=e,{inputRegex:n,level:i}=t;return n?(0,s.zK)({find:n,type:this.type,getAttributes:{level:i}}):null}).filter(e=>!!e)},renderHTML(e){let{HTMLAttributes:t}=e;return["h1",(0,o.P1)(t,{class:"title"}),0]}})},40981:function(e,t,n){"use strict";n.d(t,{C:function(){return l},w:function(){return s}});var i=n(38564),r=n(37164),o=n(27191),a=n(46924);let l=()=>(0,r.x0)(5),s=a.I.extend({name:"UniqueToggleId"}).configure({attributeName:"id",types:["toggle"],initialValue:l,filterTransaction:e=>{let t=e.getMeta(i.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:new o.H$("UniqueToggleId")})},20706:function(e,t,n){"use strict";n.d(t,{AH:function(){return s},O4:function(){return d},U6:function(){return l},fH:function(){return o},xB:function(){return a}});var i=n(71383),r=n(78112);let o=e=>{let t=(0,i.bh)();return(0,r.R)(e)(t.getState())||!1},a=(e,t)=>{(0,i.bh)().dispatch((0,r.pD)({toggleIds:[e],isExpanded:t}))},l=(e,t)=>{let n=[],o=(0,i.bh)();e.state.doc.descendants(e=>{if(!s(e))return;let{id:t}=e.attrs;n.push(t)}),o.dispatch((0,r.pD)({toggleIds:n,isExpanded:t}))},s=e=>"toggle"===e.type.name,d=e=>"toggleSummary"===e.type.name},76505:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var i=n(37243),r=n(97030),o=n.n(r);let a=i.hj.create({name:"updateAttributesAtPos",addCommands:()=>({updateAttributesAtPos:(e,t)=>n=>{let{tr:i}=n;return Object.entries(t).forEach(t=>{let[n,r]=t;i.setNodeAttribute(e,n,r)}),!0},updateNestedAttributesAtPos:(e,t)=>n=>{let{tr:i}=n,r=i.doc.nodeAt(e);return!!r&&(Object.entries(t).forEach(t=>{let[n,a]=t,l=o()(a)?{...r.attrs[n],...a}:a;i.setNodeAttribute(e,n,l)}),!0)}})})},3063:function(e,t,n){"use strict";n.d(t,{RT:function(){return w},vz:function(){return x},Sz:function(){return f},iS:function(){return v},WE:function(){return y}});var i=n(37243),r=n(27191),o=n(52780),a=n(12971),l=n(92035),s=n(38636),d=n(54563),c=n(54317),u=n(1496),p=n(4490),h=n(9936);let m=new r.H$("BlockHoverKey");class g{getHoverAbsPos(e){return this.hoverPos?(0,h.XV)(e,this.hoverPos):null}getAnnotableAbsPos(e){return this.annotatablePos?(0,h.XV)(e,this.annotatablePos):null}apply(e,t){let n=e.getMeta(m);return n&&"setHoverPos"in n&&this.handleSetPos(t,n),this}handleSetPos(e,t){return this.hoverPos=null===t.setHoverPos?null:(0,h.jS)(e,t.setHoverPos),this.annotatablePos=null===t.setAnnotatablePos?null:(0,h.jS)(e,t.setAnnotatablePos),this}constructor(){this.hoverPos=null,this.annotatablePos=null}}let f=e=>{var t;return(null===(t=e.find(e=>e.spec.isTableHover))||void 0===t?void 0:t.spec)||{}},x=e=>{var t;return(null===(t=e.find(e=>e.spec.isTableFocus))||void 0===t?void 0:t.spec)||{}},v=e=>e.some(e=>e.spec.isAnnotatableHover),y=e=>e.some(e=>e.spec.isBlockHover),b=(e,t)=>(0,s.R1)(e,t)||(0,u.nM)(e);function w(e){return new r.Sy({key:m,state:{init:()=>new g,apply:(e,t,n,i)=>t.apply(e,i)},props:{handleDOMEvents:{mousemove(e,t){if((0,l.s2)()||!t.target.closest(".".concat(d.vD)))return;let{clientX:n,clientY:i}=t,r=e.posAtCoords({left:n,top:i}),o=r&&e.state.doc.resolve(r.inside),a=null,s=null;if((null==o?void 0:o.nodeAfter)&&(a=o.pos,(0,c.KH)(o.nodeAfter)||(0,c.pv)(o.nodeAfter)||(s=o.pos)),!s){let t=e.posAtCoords({left:n-100,top:i}),r=t&&e.state.doc.resolve(t.inside);(null==r?void 0:r.nodeAfter)&&!(0,c.KH)(r.nodeAfter)&&!(0,c.pv)(r.nodeAfter)&&(s=r.pos)}let u=m.getState(e.state);if(a!==u.getHoverAbsPos(e.state)||s!==u.getAnnotableAbsPos(e.state)){let t=e.state.tr;t.setMeta(m,{setHoverPos:a,setAnnotatablePos:s}),e.dispatch(t)}}},decorations(e){var t,n;let r;let l=m.getState(e),d=l.getHoverAbsPos(e);if(null===d)return o.EH.empty;try{r=e.doc.resolve(d)}catch(e){return o.EH.empty}let c=[];(0,a.Ru)(r,b).forEach(e=>{let{pos:t,node:n}=e;c.push(o.p.node(t,t+n.nodeSize,{},{isBlockHover:!0}))});let u=(0,i.qv)(r,e=>"table"===e.type.name),h=(null===(t=r.nodeAfter)||void 0===t?void 0:t.type.name)==="tableCell"?{pos:r.pos,node:r.nodeAfter}:(0,i.qv)(r,e=>"tableCell"===e.type.name);if(u&&h){let{left:e,top:t}=p.rU.get(u.node).findCell(h.pos-(u.pos+1));c.push(o.p.node(u.pos,u.pos+u.node.nodeSize,{},{isTableHover:!0,rowHover:t,colHover:e}))}let g=e.selection.$from,f=(0,i.qv)(g,e=>"table"===e.type.name),x=(null===(n=g.nodeAfter)||void 0===n?void 0:n.type.name)==="tableCell"?{pos:g.pos,node:g.nodeAfter}:(0,i.qv)(g,e=>"tableCell"===e.type.name);if(f&&x){let{left:e}=p.rU.get(f.node).findCell(x.pos-(f.pos+1));c.push(o.p.node(f.pos,f.pos+f.node.nodeSize,{},{isTableFocus:!0,colFocus:e}))}let v=l.getAnnotableAbsPos(e);if(null!==v){let t;try{t=e.doc.resolve(v)}catch(e){return o.EH.empty}(0,a.Ru)(t,s.R1).forEach(e=>{let{pos:t,node:n}=e;c.push(o.p.node(t,t+n.nodeSize,{},{isAnnotatableHover:!0}))})}try{return o.EH.create(e.doc,c)}catch(e){return o.EH.empty}}}})}},53295:function(e,t,n){"use strict";n.d(t,{w:function(){return i}}),n(54317);let i=e=>{var t;return(null===(t=e.find(e=>e.spec.isBlockWidthDecoration))||void 0===t?void 0:t.spec)||{}}},64012:function(e,t,n){"use strict";n.d(t,{X:function(){return m}});var i=n(52322),r=n(38035),o=n(32899),a=n(42946),l=n(49929),s=n(64253),d=n(5879),c=n(87254),u=n(2784),p=n(71383),h=n(78112);let m=e=>{let{editor:t,getPos:n,node:m,direction:g,maxButtons:f,tooltip:x}=e,v=(0,p.CG)(h.Pw),y=!f||m.childCount<f,b=(0,u.useCallback)(()=>{t.commands.addButtonToGroup(n())},[t,n]);return y&&v?(0,i.jsx)(r.k,{position:"relative",align:"center",children:(0,i.jsx)(s.kH,{label:x||(0,i.jsx)(d.cC,{id:"xe7fzh"}),placement:"top",children:(0,i.jsx)(o.h,{icon:(0,i.jsx)(l.G,{icon:a.r8p}),"aria-label":c.ag._({id:"6oU9VZ"}),size:"xs",variant:"plain",isRound:!0,onClick:b,opacity:0,className:"add-button",transitionProperty:"opacity",transitionDuration:"normal",position:"absolute",left:"column"===g?"50%":0,top:"50%",transform:"column"===g?"translateX(-50%)":"translateY(-50%)",zIndex:"sticky"})})}):null}},9891:function(e,t,n){"use strict";n.d(t,{z:function(){return I}});var i=n(37243),r=n(98775),o=n(19732),a=n(27210),l=n(12971),s=n(44170),d=n(52322),c=n(62614),u=n(28535),p=n(11082),h=n(77533),m=n(73200),g=n(2784),f=n(68927),x=n(71383),v=n(80834),y=n(7096),b=n(56216),w=n(78112),C=n(8607),k=n(83091),j=n(29874);let S=e=>{let{editor:t,node:n,decorations:i}=e,{href:r,variant:o,color:l}=n.attrs,s=(0,x.CG)(w.Pw),S=(0,k.v)(i),A=s&&S,I=(0,C.R)(i),{linkUrl:z,handleClick:L,isCurrentPage:E}=(0,v.H)({url:r}),{interceptLinkClick:N,linkUrlSafe:M,isUntrusted:_,linkInterceptEnabled:T}=(0,f.x)(z),R=T&&!0!==t.isSiteNavbarEditor,{textColor:H}=(0,b.Yw)(l),P="solid"===o?{backgroundColor:l||"var(--button-color)",backgroundImage:l?void 0:"var(--button-gradient)",borderRadius:"var(--button-border-radius, var(--box-border-radius))"}:"outline"===o?{border:"0px",boxShadow:"inset 0 0 0 max(1px, var(--shape-border-width)) ".concat(l||"var(--button-color)"),backgroundColor:"var(--shape-bg-color-override, var(--card-color))",borderRadius:"var(--button-border-radius, var(--box-border-radius))"}:void 0,O=(0,g.useMemo)(()=>({...(0,j.$)({variant:o})}),[o]);return(0,d.jsx)(a.T5,{children:(0,d.jsx)(c.z,{as:A?u.xu:p.r,isDisabled:!!R&&_,cursor:s?"text":"pointer",userSelect:s?"auto":"none",href:R?M||void 0:z,onClick:R?N:L,...O,style:P,className:(0,m.cx)("button","solid"===o&&y.LY),"data-export-as-image":!0,"data-export-link":r,sx:{"@media print":{width:"auto"},outline:S?"2px solid var(--chakra-ring-color) !important":void 0,lineHeight:"var(--line-height-body)"},"data-is-current-page":E,children:(0,d.jsxs)(h.x,{as:"div",noOfLines:A||I?void 0:1,wordBreak:"break-all",style:{color:"solid"===o?H||"var(--button-color-inverted)":"outline"===o?l||"var(--button-color)":void 0},textAlign:"center",children:[I&&(0,d.jsx)(h.x,{opacity:"0.3",pointerEvents:"none",contentEditable:!1,pos:"absolute",w:"100%",left:"0",textAlign:"center",children:"…"}),(0,d.jsx)(a.ms,{})]})})})};var A=n(43273);let I=i.NB.create({name:"button",content:"(text | emoji)*",marks:"",defining:!0,isolating:!0,selectable:!1,addNodeView:()=>(0,a.fW)(S,{update:s.E7}),addAttributes:()=>({href:{default:""},variant:{default:"solid"},color:{default:null}}),addCommands:()=>({addButtonToGroup:e=>t=>{let{state:n,chain:i}=t,r=n.doc.nodeAt(e);if(!r)return!1;let a=e+r.nodeSize-1;return i().insertContentAt(a,{...(0,o.e)().button,attrs:{variant:A.e6[r.type.name].defaultVariant,href:""}}).selectInsertedNode().run(),!0},handleButtonDelete:e=>t=>{let{dispatch:n,state:o,chain:a}=t;if(!n)return!0;let s=(0,i.Kk)(e=>"button"===e.type.name)(o.selection);if(!s||e&&!(0,l.bR)(s.node))return!1;let d=(0,i.Kk)(e=>"buttonGroup"===e.type.name)(o.selection),c=(0,i.Kk)(e=>"navbarButtons"===e.type.name)(o.selection),u=(0,i.Kk)(e=>"navbarLinks"===e.type.name)(o.selection);return c||u||!d||1!==d.node.childCount?c&&1===c.node.childCount||u&&1===u.node.childCount?a().deleteNode("button").blur().run():a().deleteNode("button").command(e=>{let{tr:t}=e,n=(0,r.E)(t.doc.resolve(s.pos-1),-1);return n&&t.setSelection(n),!0}).focus().run():a().deleteNode("buttonGroup").command(e=>{let{tr:t}=e,n=(0,r.E)(t.doc.resolve(d.pos));return n&&t.setSelection(n),!0}).focus().run(),!0}}),parseHTML:()=>[{tag:"button"}],renderHTML(e){let{HTMLAttributes:t}=e;return["button",(0,i.P1)(t),0]}})},1564:function(e,t,n){"use strict";n.d(t,{N:function(){return u},m:function(){return p}});var i=n(52322),r=n(38035),o=n(38799),a=n(27210),l=n(45075),s=n(9325),d=n(64012),c=n(43273);let u=e=>{let{node:t}=e,{horizontalAlign:n}=t.attrs,u=(0,o.TZ)(),h=u?"column":"row";return(0,i.jsx)(l.lO,{...e,children:(0,i.jsxs)(r.k,{w:"100%","data-selection-ring":"padded",borderRadius:"var(--box-border-radius)",direction:h,justify:(0,s.yg)(n)||"var(--flex-align)",sx:p(u),gap:"0.5em",alignItems:"center",children:[(0,i.jsx)(a.ms,{}),(0,i.jsx)(d.X,{...e,direction:h,maxButtons:c.YZ})]})})},p=e=>({"> [data-node-view-content]":{display:"contents","> [data-node-view-content-inner]":{display:"contents"}},"--button-width":e?"100%":"auto",".node-button":{width:"var(--button-width)",".button":{width:"100%"}},_hover:{".add-button":{opacity:1}}})},43273:function(e,t,n){"use strict";n.d(t,{Y0:function(){return l},YZ:function(){return a},e6:function(){return s}});var i=n(42946),r=n(54933),o=n(87254);let a=3,l=()=>[{name:o.ag._({id:"bjuYAW"}),key:"solid",icon:r.r9b},{name:o.ag._({id:"bCuf07"}),key:"outline",icon:i.r9b},{name:o.ag._({id:"1lWK8g"}),key:"link",icon:i.nNP}],s={buttonGroup:{alignEnabled:!0,colorEnabled:!0,linkDropdownEnabled:!0,variants:["solid","outline"],defaultVariant:"solid"},navbarButtons:{alignEnabled:!1,colorEnabled:!0,linkDropdownEnabled:!1,variants:["solid","outline"],defaultVariant:"solid"},navbarLinks:{alignEnabled:!0,colorEnabled:!1,linkDropdownEnabled:!1,variants:["link"],defaultVariant:"link"}}},29874:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=e=>{let{variant:t}=e;return{variant:"unstyled",display:"inline-flex",position:"relative",_hover:{textDecoration:"none"},minW:"min(100%, 12em)",maxW:"100%",fontSize:"1em",py:"0.5em",minH:"2.75em",w:"var(--button-width)",h:"auto",px:"link"===t?"0.5em":"1em",transitionProperty:"none","data-variant":t}}},74919:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var i=n(52322),r=n(25059),o=n(27210),a=n(45075),l=n(44170);let s=e=>(0,i.jsx)(a.lO,{...e,children:(0,i.jsx)("pre",{children:(0,i.jsx)(o.ms,{as:"code"})})}),d=r.ZP.extend({selectable:!1,isolating:!0,addNodeView:()=>(0,o.fW)(s,{update:l.E7})})},72205:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});let i={UniqueAttribute:1e4,CardMention:1001,DocMention:1001,UserMention:1001,UndoInputRuleKeymap:1001,HorizontalAlign:1001,Collaboration:1e3,Highlight:150,FootnoteLabel:150,TextColor:150,Code:150,Link:140,SlashMenu:104,EmojiShortcuts:104,MentionSuggestionMenu:104,List:103,CardAccentLayoutItem:103,Table:102,Image:102,Gallery:102,CardLayoutItem:101,MediaPlaceholder:101,Layout:101,Footnote:101,Card:101,Toggle:101,SmartLayout:101,KeyMapOverride:100,GlobalDragHandle:99,CardIds:1,KeyBoardCatchall:1,UndoHistory:-100}},83256:function(e,t,n){"use strict";n.d(t,{$7:function(){return f},$m:function(){return h},zL:function(){return m}});var i=n(37243),r=n(3027),o=n(27191),a=n(98775);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>0,{parent:i,doc:r}=e,o=e.start(),s=e.after();if(i.type.spec.isolating){let e=r.resolve(n?s-1:o),t=(0,a.E)(e,n?1:-1);if(n){let e=r.resolve(t.to).node();if(e&&e.isTextblock&&0===e.content.size)return t.to+1}return n?t.to:t.from}let d=e.start(e.depth-1);return l(e.doc.resolve(d),t)}n(31335);var s=n(65050),d=n(72205),c=n(26245);let u=e=>{let t=l(e,-1);return e.pos===t?s.k_:t},p=(e,t)=>{let n=l(t,1);return t.pos===n?e.state.doc.content.size-s.k_:n},h=i.hj.create({name:"KeyMapOverride",priority:d.a.KeyMapOverride,addOptions:()=>({addSelectionKeyMaps:!1}),addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleCardAccentDelete(),()=>{var e;return null===(e=t.handleSmartLayoutDelete)||void 0===e?void 0:e.call(t,!0,!1)},()=>t.deleteSelectionAndSelectNear(-1),()=>t.deleteSelection(),e=>{let{view:t,state:n,dispatch:i}=e;return(0,c.Ly)(n,i,t)},()=>t.unwrapQuoteOnDelete(),e=>{let{view:n,state:i,tr:r}=e,o=t.joinBackward();return o&&r.setMeta("annotationEvent",{type:"join-backward",joinPos:i.selection.from,atBeginning:n.endOfTextblock("backward")}),o},()=>t.selectNodeBackward(),()=>t.handleLayoutDelete(!1),()=>t.handleButtonDelete(!0),()=>t.deleteCardIfEmpty(!1),()=>t.mergeCardsOnDelete(!1)]}),t=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleCardAccentDelete(),()=>{var e;return null===(e=t.handleSmartLayoutDelete)||void 0===e?void 0:e.call(t,!0,!0)},()=>t.deleteSelectionAndSelectNear(),()=>t.deleteSelection(),e=>{let{view:n,state:i,tr:r}=e,o=t.joinForward();return o&&r.setMeta("annotationEvent",{type:"join-forward",joinPos:i.selection.from,atEnd:n.endOfTextblock("forward")}),o},()=>t.selectNodeForward(),()=>t.handleLayoutDelete(!0),()=>t.handleButtonDelete(!0),()=>t.deleteCardIfEmpty(!0),()=>t.mergeCardsOnDelete(!0)]}),n={};return this.options.addSelectionKeyMaps&&(n={"Mod-a":e=>{let{editor:t}=e,{selection:n}=t.state;if(n instanceof o.qv&&n.node.type.spec.isolating)return t.commands.selectAll();let i=l(t.state.selection.$from,-1),r=l(t.state.selection.$to,1);return n.from===i&&n.to===r?t.commands.selectAll():(t.commands.command(e=>{let{tr:t}=e;return t.setSelection(o.Bs.create(t.doc,i,r)),!0}),!0)},"Mod-ArrowUp":e=>{let{editor:t}=e,n=u(t.state.selection.$from);if(!n)return!1;let i=t.state.doc.resolve(n);if(r.Q.valid(i)){let e=new r.Q(i);return t.view.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowUp":e=>{let{editor:t}=e,n=u(t.state.selection.$from);return!!n&&t.chain().setTextSelection({from:n,to:t.state.selection.to}).scrollIntoView().run()},"Mod-ArrowDown":e=>{let{editor:t}=e,n=p(t,t.state.selection.$to),i=t.state.doc.resolve(n);if(r.Q.valid(i)){let e=new r.Q(i);return t.view.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}return t.chain().setTextSelection(n).scrollIntoView().run()},"Mod-Shift-ArrowDown":e=>{let{editor:t}=e,n=p(t,t.state.selection.$to);return t.chain().setTextSelection({from:t.state.selection.from,to:n}).scrollIntoView().run()},"Shift-Mod-a":e=>{let{editor:t}=e;return t.commands.selectAll()}}),{...n,Enter:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),e=>{let{view:n,state:i,tr:r}=e;return r.setMeta("annotationEvent",{type:"split-block",splitPos:i.selection.from,atBeginning:n.endOfTextblock("backward")}),t.splitBlock()}]}),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,Space:()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.handleSpaceToZoom()]})}}}),m=i.hj.create({name:"UndoInputRuleKeymap",priority:d.a.UndoInputRuleKeymap,addKeyboardShortcuts:()=>({"Shift-Mod-a":e=>{let{editor:t}=e;return t.commands.selectAll()},"Mod-z":e=>{let{editor:t}=e;return t.commands.undoInputRule()},Backspace:e=>{let{editor:t}=e;return t.commands.undoInputRule()},"Mod-Backspace":e=>{let{editor:t}=e;return t.commands.undoInputRule()}})});var g=n(53650);let f=i.hj.create({name:"KeyBoardCatchall",priority:d.a.KeyBoardCatchall,addKeyboardShortcuts:()=>({Tab:e=>{let{editor:t}=e;return t.view.hasFocus()},"Shift-Tab":e=>{let{editor:t}=e;return t.view.hasFocus()}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("KeyBoardCatchall"),props:{handleKeyDown:(e,t)=>g.F7.handleKeydown(t)}})]})},21386:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(37243),r=n(27210),o=n(20145),a=n(44170),l=n(52322),s=n(45075);let d=e=>{let{node:t}=e,{fontSize:n,placeholder:i}=t.attrs;return(0,l.jsx)(s.lO,{...e,children:(0,l.jsx)(r.ms,{as:"li","data-testid":"bullet-list-item","data-font-size":n,"data-placeholder":i})})};var c=n(88371),u=n(82807);let p=/^\s*([-*])\s$/,h=i.NB.create({name:u.W.Bullet,content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addNodeView:()=>(0,r.fW)(d,{as:"ul",update:a.E7,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addOptions:()=>({HTMLAttributes:{}}),addAttributes:()=>({indent:{default:0},fontSize:o.Bi}),addInputRules(){return[(0,c.Bx)({find:p,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-Shift-8":e=>{let{editor:t}=e;return t.commands.setListItems({variant:u.W.Bullet})},"Mod-.":e=>{let{editor:t}=e;return t.commands.setListItems({variant:u.W.Bullet})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,i.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},88371:function(e,t,n){"use strict";n.d(t,{aV:function(){return v},N:function(){return x},S3:function(){return y},Bx:function(){return b}});var i=n(37243),r=n(84305),o=n(54317),a=n(72205),l=n(2689),s=n.n(l),d=n(27191),c=n(52780),u=n(82807);let p=s()(10),h=["blockquote","card","sectionBreak","calloutBox"],m=(e,t)=>"numbered"===e.type.name||(0,u.y)(e)&&e.attrs.indent>t||e.isAtom||h.includes(e.type.name),g=e=>new d.Sy({key:new d.H$("ListPlugin"),props:{decorations:e=>{let{doc:t}=e,n=[],i=new Map,r=(e,t)=>{var n;return(null===(n=i.get(e))||void 0===n?void 0:n[t])||1},o=(e,t,n)=>{let r=i.get(e);try{r[t]=n}catch(e){console.error("(caught) [ListPlugin] setCounter error",e)}},a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=i.get(e)||{};p.filter(e=>e>=t).forEach(e=>{n[e]=1}),i.set(e,n)},l=0;return t.descendants((e,t,s)=>{if((0,u.y)(e)&&e.firstChild){let i=e.firstChild.marks.find(e=>"textColor"===e.type.name);(null==i?void 0:i.attrs.variant)&&n.push(c.p.node(t,t+e.nodeSize,{"data-text-color":i.attrs.variant})),(null==i?void 0:i.attrs.hex)&&n.push(c.p.node(t,t+e.nodeSize,{style:"--text-color: ".concat(i.attrs.hex)}))}if(!s||(m(e,l)||a(s),"numbered"!==e.type.name))return;i.get(s)||a(s);let d=e.attrs.indent;l=d;let p=r(s,d);o(s,d,p+1),a(s,d+1),n.push(c.p.node(t,t+e.nodeSize,{},{listNumber:p}))}),0==n.length?c.EH.empty:c.EH.create(t,n)}}});var f=n(21860);let x=8,v=i.hj.create({name:"list",priority:a.a.List,addProseMirrorPlugins(){return[g(this.editor)]},addCommands:()=>({listToCards:()=>e=>{let{chain:t,state:n}=e,{selection:r,doc:a}=n,{from:l,to:s}=r,d=(0,i.b5)(a,{from:l,to:s},u.y),c=(0,i.Kk)(o.KH)(r);if(!d.length||!c)return!1;let p=c.pos+c.node.nodeSize,h=(0,f.OH)(d),m=(0,f.GV)(h);return t().insertContentAt(p,m).scrollIntoView().run(),!0},listToSmartLayout:e=>t=>{let{chain:n,state:r}=t,{selection:o,doc:a}=r,{from:l,to:s,$from:d,$to:c}=o,p=d.blockRange(c),h=(0,i.b5)(a,{from:l,to:s},u.y);if(!h.length||!p)return!1;let m=(0,f.OH)(h),g=(0,f.Pl)(m,e);return n().insertContentAt({from:p.start,to:p.end},g).selectInsertedNode().scrollIntoView().run(),!0},indent:e=>t=>{let{tr:n,dispatch:i,state:r}=t;if(!i)return!0;let o=!1;return n.selection.ranges.forEach(t=>{let i=t.$from.pos,a=t.$to.pos;r.doc.nodesBetween(i,a,(t,i)=>{let{indent:r}=t.attrs;Object.values(u.W).includes(t.type.name)&&r+e>=0&&r+e<=x&&(n.setNodeMarkup(i,void 0,{...t.attrs,indent:r+e}),o=!0)})}),o},setListItems:e=>{let{variant:t}=e;return e=>{let{tr:n,dispatch:i,state:r}=e;return!i||(n.selection.ranges.forEach(e=>{let i=e.$from.pos,o=e.$to.pos;r.doc.nodesBetween(i,o,(e,i)=>{Object.values(u.W).includes(e.type.name)?n.setNodeMarkup(i,r.schema.nodes[t],e.attrs):e.isTextblock&&n.setNodeMarkup(i,r.schema.nodes[t],{...e.attrs,indent:0})})}),!0)}},toggleListItems:e=>{let{variant:t}=e;return e=>{let{commands:n,editor:i}=e;return y(i,t)?n.setNode("paragraph"):n.setListItems({variant:t})}}}),addKeyboardShortcuts:()=>({Enter:e=>{let t,n,{editor:i}=e;for(let e of Object.values(u.W))if(i.isActive(e)){n=i.getAttributes(e),t=e;break}if(void 0===t)return!1;let{from:r,$from:o,empty:a}=i.state.selection;return!!a&&(0==o.parent.content.size?n.indent>0?i.commands.indent(-1):i.commands.setNode("paragraph",n):0===o.parentOffset?(n.checked&&(n.checked=!1),i.chain().insertContentAt(r-1,{type:t,attrs:n}).selectInsertedNode().run()):o.parentOffset===o.parent.content.size&&(n.checked&&(n.checked=!1),i.chain().insertContentAt(r+1,{type:t,attrs:n}).selectInsertedNode().run()))},Backspace:e=>{let t,n,{editor:i}=e;for(let e of Object.values(u.W))if(i.isActive(e)){n=i.getAttributes(e),t=e;break}if(void 0===t)return!1;let{$from:r,empty:o}=i.state.selection;return!!o&&0==r.parentOffset&&i.commands.setNode("paragraph",n)},Tab:e=>{let{editor:t}=e;return t.commands.indent(1)},"Shift-Tab":e=>{let{editor:t}=e;return t.commands.indent(-1)},"Mod-]":e=>{let{editor:t}=e;return t.commands.indent(1)},"Mod-[":e=>{let{editor:t}=e;return t.commands.indent(-1)}})}),y=(e,t)=>{let n=Object.values(u.W).filter(e=>e!==t);return e.isActive(t)&&!n.some(t=>e.isActive(t))},b=(e,t)=>(0,r.Wy)(e,[t.nodes.heading,t.nodes.title])},66562:function(e,t,n){"use strict";n.d(t,{k:function(){return m}});var i=n(37243),r=n(27210),o=n(20145),a=n(44170),l=n(88371),s=n(82807),d=n(52322),c=n(45075);let u=[e=>e.toString(),e=>String.fromCharCode(96+e),e=>(function(e){let t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},n="";for(let i of Object.keys(t)){let r=Math.floor(e/t[i]);e-=r*t[i],n+=i.repeat(r)}return n})(e).toLowerCase()],p=e=>{var t;let{decorations:n,node:i}=e,{indent:o,fontSize:a,placeholder:l}=i.attrs,s=null===(t=n.find(e=>e.spec.listNumber))||void 0===t?void 0:t.spec.listNumber,p=(u[o%u.length]||u[0])(s);return(0,d.jsx)(c.lO,{...e,children:(0,d.jsx)(r.ms,{as:"li","data-list-counter":p,"data-font-size":a,"data-placeholder":l})})},h=/^(\d+)\.\s$/,m=i.NB.create({name:s.W.Numbered,content:"inline*",defining:!0,group:"block cardNotesBlock",selectable:!1,allowFontSizes:"body",addOptions:()=>({HTMLAttributes:{}}),addNodeView:()=>(0,r.fW)(p,{as:"ol",update:a.E7,updateWrapperEl:(e,t)=>{e.setAttribute("indent",t.node.attrs.indent)}}),addAttributes:()=>({indent:{default:0},fontSize:o.Bi}),addInputRules(){return[(0,l.Bx)({find:h,type:this.type},this.editor.state.schema)]},addKeyboardShortcuts:()=>({"Mod-/":e=>{let{editor:t}=e;return t.commands.setListItems({variant:s.W.Numbered})},"Mod-Shift-7":e=>{let{editor:t}=e;return t.commands.setListItems({variant:s.W.Numbered})}}),parseHTML(){return[{tag:'li[variant="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["li",(0,i.P1)(this.options.HTMLAttributes,t,{variant:this.name}),0]}})},21860:function(e,t,n){"use strict";n.d(t,{Ah:function(){return p},GV:function(){return c},OH:function(){return s},Pl:function(){return u}});var i=n(54004),r=n.n(i),o=n(82807),a=n(12971),l=n(57941);let s=e=>{let t=[];for(let n=0;n<e.length;n++){let i=e[n],r=i.node.attrs.indent,o=d(e,n,e=>e.node.attrs.indent>r),a=s(o);t.push({node:i.node,pos:i.pos,children:a}),n+=o.length}return t},d=(e,t,n)=>{let i=[];for(let r=t+1;r<e.length;r++){let t=e[r];if(n(t))i.push(t);else break}return i},c=e=>e.map(e=>{let t=c(e.children);return{type:"card",content:[{type:"heading",attrs:{level:Math.min(e.node.attrs.indent+1,l.MQ)},content:[{type:"text",text:e.node.textContent}]},...t]}}),u=(e,t)=>({type:"smartLayout",attrs:{variantKey:t},content:e.map(e=>{let t=[{type:"heading",attrs:{level:4},content:r()(e.node.content.toJSON())}];return t.push(...e.children.map(e=>{let t=r()(e.node.toJSON());return t.attrs.indent-=1,t})),{type:"smartLayoutCell",content:t}})}),p=e=>(0,a.pm)(e,o.y)},29020:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(52322),r=n(11881),o=n(71383),a=n(78112),l=n(87103),s=n(4856);let d=e=>{let{enterZoom:t,zoomBoxProps:n,url:d,handleOpenLink:c,handleOpenInNewTab:u}=e,p=(0,o.CG)(a.hN);return l.cx?null:!p&&c&&d?(0,i.jsx)(r.f,{inset:0,w:"100%",h:"100%",position:"absolute",zIndex:1,cursor:"pointer",children:(0,i.jsx)(r.A,{onClick:c,href:d,target:"_blank",rel:"noopener"})}):(0,i.jsx)(s.c,{enterZoom:t,doubleClickNonZoomHandler:p?u:void 0,...n})}},31527:function(e,t,n){"use strict";n.d(t,{cx:function(){return ev},Yn:function(){return Y},fu:function(){return ep},CG:function(){return eh},XX:function(){return em},v0:function(){return q}});var i=n(37243),r=n(72842),o=n(1960),a=n(90887),l=n(27210),s=n(12971),d=n(26923),c=n(44170),u=n(59053),p=n(68527),h=n(46007),m=n(52322),g=n(28535),f=n(38035),x=n(73200),v=n(38045),y=n(95405),b=n(71383),w=n(33886),C=n(38799),k=n(78112),j=n(94672),S=n(26714),A=n(40405),I=n(67762),z=n(52175),L=n(29020),E=n(50019),N=n(2784),M=n(68927),_=n(61707),T=n(9237),R=n(62304),H=n(85573),P=n(75768),O=n(32899),D=n(42946),W=n(49929),F=n(64253),B=n(5879),G=n(87254),U=n(24409);let V=e=>{let{frameRef:t,node:n,isStealth:i=!1,isDark:r}=e,o=(0,h.iJ)(n.attrs),{handleOpenLinkWithInterstitial:a}=(0,U.l)(o);return(0,m.jsxs)(f.k,{direction:"row",background:r?"gray.800":"gray.50",align:"center",borderBottom:"1px solid",borderColor:r?"gray.600":"gray.200",w:"100%",p:1,zIndex:2,position:i?"absolute":"relative",transitionProperty:"common",transitionDuration:"normal",opacity:i?0:1,_hover:{opacity:1},fontFamily:"var(--chakra-fonts-body)",children:[(0,m.jsx)(H.I,{size:"xs",value:o,border:"0",noOfLines:1,color:r?"gray.200":"gray.600",pointerEvents:"none",readOnly:!0}),(0,m.jsxs)(P.h,{size:"xs",spacing:1,variant:"ghost",colorScheme:"gray",ml:2,children:[(0,m.jsx)(F.kH,{label:(0,m.jsx)(B.cC,{id:"HpK/8d"}),placement:"top",children:(0,m.jsx)(O.h,{isRound:!0,"aria-label":G.ag._({id:"HpK/8d"}),icon:(0,m.jsx)(W.G,{icon:D.XSV}),onClick:()=>{if(!t.current)return;let e=t.current.src;t.current.src="about:blank",setTimeout(()=>{t.current&&(t.current.src=e)},50)}})}),(0,m.jsx)(F.kH,{label:(0,m.jsx)(B.cC,{id:"Alx2/L"}),placement:"top",children:(0,m.jsx)(O.h,{isRound:!0,"aria-label":G.ag._({id:"Alx2/L"}),icon:(0,m.jsx)(W.G,{icon:D.gJF}),onClick:a})})]})]})},q=e=>e&&r.zX[e]?r.zX[e]:r.Hw,K=e=>"".concat(y.v.EMBED_PROXY_URL,"?alt_url=").concat(e),Y=e=>{let{isZoomed:t,useStealthNav:n,...i}=e,{node:r}=i,o=(0,N.useRef)(null),{colorMode:a}=(0,E.If)(),l="dark"===a,s=(0,C.TZ)(),{url:d,proxy:c,source:u,embed:p}=r.attrs,h=q(u),g=h.rewriteEmbedUrl&&d?h.rewriteEmbedUrl(d):d,v=c?K(g):g||"about:blank",{isUntrusted:y}=(0,M.x)(v);return h.preferHtml&&(null==p?void 0:p.html)?(0,m.jsx)(R.$,{html:p.html,w:t?"100%":void 0,onClick:t?T.UW:void 0,...h.minWidth?{minW:"min(".concat(h.minWidth,", 100vw)"),left:"50%",transform:"translateX(-50%)"}:void 0}):y?(0,m.jsx)(f.k,{h:"100%",w:"100%",align:"center",justify:"center",children:"unknown embed"}):(0,m.jsxs)(f.k,{direction:"column",h:"100%",w:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",borderRadius:t?"lg":"var(--box-border-radius)",border:"1px solid",borderColor:l?"gray.600":"gray.200",overflow:"hidden",position:"relative","data-selection-ring":"inside","data-selection-background":!0,className:(0,x.cx)("embed-viewer"),onClick:t?T.UW:void 0,children:[(0,m.jsx)(V,{...i,frameRef:o,isDark:l,isStealth:n}),!t&&(0,m.jsx)(z.Y$,{...i,frameRef:o}),(0,m.jsx)(_.A,{initialUrl:v,frameRef:o,iframeOptions:h.iframeOptions,css:{aspectRatio:s?"1 / 1.618":"1.618 / 1"},flex:"1"})]})};var X=n(11082),$=n(29117),Z=n(77533),Q=n(87103),J=n(97912),ee=n(70617),et=n(17993),en=n(75009);let ei=e=>{var t;let{node:n,disableOpenButton:i=!1}=e,{meta:r,source:o}=n.attrs,a=(0,h.iJ)(n.attrs),l=q(o),{handleOpenLinkWithInterstitial:s}=(0,U.l)(a),d="embed.custom"===o||"video.custom"===o,c=(null==r?void 0:r.icon)||(null===(t=l.image)||void 0===t?void 0:t.src),u=(null==r?void 0:r.site)||(d?(0,ee.Gr)(a):l.label());return(0,m.jsxs)(et.g,{spacing:"0.25em",align:"flex-start",color:"black",w:"100%",fontSize:"0.9em",children:[(0,m.jsxs)($.U,{align:"center",spacing:"0.25em",w:"100%",color:"var(--body-color-muted)",children:[(0,m.jsx)(er,{icon:c}),(0,m.jsx)(Z.x,{noOfLines:1,flex:1,"data-testid":"site-name",fontSize:"0.9em",children:u}),l.downloadable&&a&&(0,m.jsx)(F.kH,{label:(0,m.jsx)(B.cC,{id:"mzI/c+"}),placement:"top",children:(0,m.jsx)(O.h,{"aria-label":G.ag._({id:"mzI/c+"}),icon:(0,m.jsx)(W.G,{icon:D.q7m}),onClick:()=>{let e=document.createElement("a");e.href=a,e.target="_blank",e.download=(null==r?void 0:r.title)||"file.pdf",e.dispatchEvent(new MouseEvent("click"))},variant:"unstyled",sx:w.un,fontSize:"0.7em",zIndex:2,onMouseDown:T.br})}),!i&&a&&(0,m.jsx)(F.kH,{label:(0,m.jsx)(B.cC,{id:"Alx2/L"}),placement:"top",children:(0,m.jsx)(O.h,{"aria-label":G.ag._({id:"Alx2/L"}),icon:(0,m.jsx)(W.G,{icon:D.gJF}),onClick:s,variant:"unstyled",zIndex:2,fontSize:"0.7em",onMouseDown:T.br,sx:w.un})})]}),(0,m.jsx)(Z.x,{fontWeight:"bold",noOfLines:1,maxW:"90%","data-testid":"title",color:"var(--body-color)",wordBreak:"break-all",children:null==r?void 0:r.title}),(null==r?void 0:r.description)&&(0,m.jsx)(Z.x,{noOfLines:[2,3],whiteSpace:"normal",maxW:"100%",color:"var(--body-color-muted)",children:r.description})]})},er=e=>{let{icon:t,...n}=e;return t?(0,m.jsx)(en.E,{src:t,h:"1.5em",borderRadius:"sm",...n}):(0,m.jsx)(Z.x,{as:"span",...n,children:(0,m.jsx)(W.G,{icon:D.m6E})})};var eo=n(54933),ea=n(19034),el=n.n(ea),es=n(9355),ed=n(9160);let ec=e=>{let{node:t}=e,{thumbnail:n,meta:i,source:r}=t.attrs,o=(null==n?void 0:n.src)||(null==n?void 0:n.tempUrl);return(null==n?void 0:n.showPlaceholder)?(0,m.jsx)(ed.k3,{hasUploadError:n.uploadStatus===es.D.Error,isUploading:n.uploadStatus===es.D.Uploading,width:"100%",borderRadius:"none",icon:"embed.pdf"===r?D.gSj:D.m6E}):o?(0,m.jsxs)(f.k,{flex:1,color:"white",position:"relative",children:[(0,m.jsx)(g.xu,{flex:1,overflow:"hidden",bgColor:"white",children:(0,m.jsx)(en.E,{src:o,position:"absolute",objectFit:"cover",width:"100%",height:"100%"})}),(null==n?void 0:n.uploadStatus)===es.D.Uploading&&(0,m.jsx)(ed.HI,{}),(null==i?void 0:i.duration)&&(0,m.jsxs)($.U,{fontSize:"0.75em",backgroundColor:"blackAlpha.700",color:"white",position:"absolute",right:0,bottom:0,py:1,px:2,"data-thumbnail-hidden":!0,children:[(0,m.jsx)(W.G,{icon:eo.zc}),(0,m.jsx)(Z.x,{children:function(e){let t=el().duration(e,"seconds"),n=t.hours().toString().padStart(2,"0"),i=t.minutes().toString().padStart(2,"0"),r=t.seconds().toString().padStart(2,"0");return t>=el().duration(1,"hour")?n+":"+i+":"+r:i+":"+r}(i.duration)})]})]}):null},eu=e=>e&&(!e.height||e.height>=50)&&(!e.width||e.width>=50),ep=e=>{let{node:t}=e,{thumbnail:n,sourceUrl:i}=t.attrs;return(0,m.jsxs)(f.k,{overflow:"hidden",direction:"row",align:"stretch",wrap:"wrap",contentEditable:!1,transitionProperty:"common",transitionDuration:"normal",position:"relative",borderRadius:"inherit","data-selection-ring":"inside","data-selection-background":!0,fontFamily:"Inter, sans-serif","data-drag-handle":!0,h:"100%",maxW:"var(--media-maxW)",maxH:"var(--media-maxH)",children:[n&&eu(n)&&(0,m.jsx)(f.k,{flex:1,minH:"10em",minW:"min(10em, 100%)",maxW:"100%",maxH:"var(--media-maxH)",children:(0,m.jsx)(ec,{node:t})}),(0,m.jsx)(f.k,{flex:1.618,minW:"min(16em, 100%)",maxW:"100%",p:"1em",position:"relative",children:(0,m.jsx)(ei,{node:t})}),Q.cx&&i&&(0,m.jsx)(X.r,{href:i,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},eh=e=>{var t;let{node:n}=e,{thumbnail:i,meta:r,sourceUrl:o,source:a}=n.attrs,l=q(a);return(0,m.jsxs)(f.k,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},maxW:"100%",maxH:"var(--media-maxH)",h:"100%",align:"stretch",boxSizing:"content-box",overflow:"hidden","data-selection-ring":"inside",position:"relative",bg:"gray.100",children:[i&&eu(i)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ec,{node:n}),(0,m.jsxs)($.U,{backgroundColor:"whiteAlpha.700",backdropFilter:"blur(8px)",py:1,px:2,position:"absolute",bottom:"0",fontSize:"0.75em","data-thumbnail-hidden":!0,children:[(0,m.jsx)(er,{icon:(null==r?void 0:r.icon)||(null===(t=l.image)||void 0===t?void 0:t.src)}),o&&(0,m.jsx)(Z.x,{color:"black",noOfLines:1,children:(null==r?void 0:r.title)||(null==r?void 0:r.site)||(0,ee.Gr)(o)})]})]}):(0,m.jsx)(f.k,{align:"flex-start",flex:"1",p:4,children:(0,m.jsx)(ei,{node:n,disableOpenButton:!0})}),y.v.GAMMA_PUPPETEER_SERVICE&&o&&(0,m.jsx)(X.r,{href:o,h:"100%",w:"100%",position:"absolute",zIndex:"-10","data-pdf-link":!0})]})},em=e=>{var t;let{node:n}=e,{meta:i,source:r,thumbnail:o}=n.attrs,a=q(r),l=(null==o?void 0:o.src)||(null==o?void 0:o.tempUrl),s=l&&(0,J.SN)(l,J.Iv);return(0,m.jsx)(f.k,{minW:"var(--media-maxH)",w:"100%",css:{aspectRatio:"16 / 9"},bg:"var(--body-color-muted)",align:"center",justify:"center",bgImage:(0,J.Ly)(s),backgroundSize:"cover",children:(0,m.jsx)(er,{icon:(null==i?void 0:i.icon)||(null===(t=a.image)||void 0===t?void 0:t.src),fontSize:"7.5em"})})},eg=(0,v.E)(g.xu),ef=(0,v.E)(f.k),ex=e=>{let{node:t,editor:n,decorations:i}=e,r=t.attrs,{source:o,embed:a,displayStyle:l,id:s,sourceUrl:d}=r,c=q(o),{isZoomed:u,enterZoom:p,exitZoom:h}=(0,z.d8)(s),f="inline"===l&&c.preferHtml&&(null==a?void 0:a.html),v=(0,A.Ah)(e),E=(0,C.TZ)(),N=(0,b.CG)(k.hN),M=(0,S.Od)(i)||!n.view.hasFocus(),_=!y.v.GAMMA_PUPPETEER_SERVICE&&(f||"inline"===l)&&!v&&!(E&&c.forcePreviewOnMobile),{handleOpenLinkWithInterstitial:T,handleOpenNativeLinkWithInterstitial:R,url:H}=(0,I.d)({attrs:r,inGallery:v,shouldDisableClick:!!(c.inlineInteractive&&_)})||{},P=!v&&!n.isThumbnail;return(0,m.jsxs)(j.l,{...e,children:[(0,m.jsxs)(eg,{h:"100%",className:(0,x.cx)("embed-preview",!f&&!(c.inlineInteractive&&_)&&w.wY),"data-export-as-image":!0,"data-export-link":d,position:"relative",overflow:f&&c.minWidth?"visible":"hidden",children:[_&&n.isThumbnail?(0,m.jsx)(em,{...e}):v?(0,m.jsx)(eh,{...e}):_?(0,m.jsx)(Y,{...e,useStealthNav:!0}):(0,m.jsx)(ep,{...e}),c.inlineInteractive&&!E&&_?(0,m.jsx)(g.xu,{position:"absolute",inset:0,zIndex:1,pointerEvents:N&&!M&&"inline"===l?"auto":"none",cursor:"default"}):c.inlineInteractive&&E&&_?(0,m.jsx)(m.Fragment,{}):(0,m.jsx)(L.l,{enterZoom:p,handleOpenLink:R,handleOpenInNewTab:T,url:H})]}),P&&(0,m.jsx)(z.aF,{isZoomed:u,exitZoom:h,editor:n,children:(0,m.jsx)(ef,{h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,m.jsx)(Y,{...e,isZoomed:!0})})})]})},ev=i.NB.create({name:"embed",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:()=>(0,l.fW)(ex,{update:c.E7}),addAttributes:()=>({id:(0,a.b)(p.G),url:{},source:{default:r.Hw.key},thumbnail:{...(0,s.sw)("thumbnail")},embed:{...(0,s.sw)("embed")},meta:{...(0,s.sw)("meta")},proxy:{},sourceUrl:{},displayStyle:{default:"preview"},fullWidthBlock:{default:!1},clickBehavior:{default:null}}),parseHTML(){return[{tag:"div[class=embed]"},{tag:"iframe[bookmark]",getAttrs:(0,d.xF)(this.storage)}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["div",(0,i.P1)(t,{class:"embed"}),["a",{href:(0,h.iJ)(n),target:"_blank"},(0,h.k7)(n)]]},addStorage:d.gk,renderHTMLforAI(e){let{node:t}=e;return["iframe",{bookmark:(0,d.ml)(this.storage,t)}]},addCommands:()=>({replaceEmbedsById:(e,t)=>n=>{let{editor:r,chain:o}=n,a=(0,i.N2)(r.state.doc,t=>"embed"===t.type.name&&t.attrs.id===e),l=o();return a.forEach(e=>{let{pos:n,node:i}=e;l.insertContentAt({from:n,to:n+i.nodeSize},t,{updateSelection:!1})}),l.run(),!0},updateEmbedsById:(e,t)=>n=>{let{editor:r,chain:o}=n,a=(0,i.N2)(r.state.doc,t=>("embed"===t.type.name||"video"===t.type.name)&&t.attrs.id===e),l=o();return a.forEach(e=>{let{pos:n}=e;l.updateAttributesAtPos(n,{thumbnail:t.thumbnail})}),l.run(),!0},insertEmbedAndFetchMetadata:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i=>{let{commands:r,editor:a}=i,l=(0,p.G)();r.insertContent({type:"embed",attrs:{id:l,url:e,sourceUrl:e,displayStyle:null!=t?t:"preview",meta:{title:"Loading..."}}},{updateSelection:!1});let s=!1;return(0,o.ft)(e,e=>{if(s){a.commands.updateEmbedsById(l,e);return}let n=u.ah[e.source];a.commands.replaceEmbedsById(l,{type:(null==n?void 0:n.nodeName)||"embed",attrs:{...e,id:l,displayStyle:null!=t?t:"video"===n.nodeName?"inline":"preview"}}),s=!0}).catch(t=>{console.warn("(caught) insertEmbedAndFetchMetadata error fetching url",t,e),n&&a.commands.replaceEmbedsById(l,e)}),!0}}})})},45312:function(e,t,n){"use strict";n.d(t,{r:function(){return $}});var i=n(37243),r=n(31753),o=n(27210),a=n(72205),l=n(44170),s=n(9116),d=n(27191),c=n(52780),u=n(38636),p=n(46007),h=n(28789),m=n(40405);let g="gallery-prevent-flex";class f{constructor(e=null){this.dragging=e}}let x=new d.H$("galleryPlugin"),v=e=>new d.Sy({key:x,state:{init:()=>new f,apply:(e,t)=>t},props:{handleDOMEvents:{drop(e){var t;let n=null===(t=e.dragging)||void 0===t?void 0:t.annotations,i=x.getState(e.state);if(!i)return!1;i.dragging=n}},decorations:e=>{let{doc:t}=e,n=[];return t.descendants((e,t,i)=>{if((0,m.N5)(e))n.push(c.p.node(t,t+e.nodeSize,{class:"gallery-layout-".concat(e.attrs.layout)},{children:e.content}));else if((0,m.N5)(i)){var r;let o="image"===e.type.name&&(null===(r=e.attrs.resize)||void 0===r?void 0:r.clipType)==="circle";n.push(c.p.node(t,t+e.nodeSize,{class:o?g:""},{inGallery:!0,layout:i.attrs.layout,dimensions:i.attrs.dimensions,thumbHeight:i.attrs.thumbHeight,thumbSpacing:i.attrs.thumbSpacing}))}}),c.EH.create(t,n)},handlePaste:(e,t,n)=>{let{selection:i,schema:r}=e.state;if(!(i instanceof d.qv&&(0,m.N5)(i.node)))return!1;if((0,h.cg)(r,n,t)){let t=e.state.tr.setSelection(d.Bs.create(e.state.doc,i.to-1));e.dispatch(t)}return!1},handleDrop:(t,n,i)=>{let r;let o=x.getState(t.state),a=null==o?void 0:o.dragging;o&&(o.dragging=null);try{if(!(r=(0,h.yT)(t,n,i,!1)))return!1}catch(e){return console.error("(caught) [GalleryPlugin] handleDrop checkGalleryDropTarget error:",e),!1}try{let{selection:n}=t.state,o=!n.empty,l=i.content.toJSON(),{pos:s,side:d,node:c}=r;if(c&&(0,m.N5)(c)){let t="left"===d?s:s+1;e.chain().insertContentAt({from:t,to:t},l,{updateSelection:!1}).command(n=>{let{tr:i}=n;if(o&&i.deleteSelection(),a){let n=e.state.tr;n.deleteSelection(),i.setMeta("annotationEvent",{type:"drop",dragging:a,droppedBlockPos:n.mapping.map(t)})}return!0}).focusMapped(t).run()}else if(c&&(0,p.fP)(c)){let n="left"===d?[...l,c.toJSON()]:[c.toJSON(),...l];e.chain().insertContentAt({from:s,to:s+c.nodeSize},{type:"gallery",content:n},{updateSelection:!1}).command(n=>{let{tr:i}=n;if(o&&i.deleteSelection(),a){let n=(0,u.mS)({side:d,view:t,tr:i,dragging:a,dropPos:s,dropNode:c});requestAnimationFrame(()=>{var t,i;null===(t=(i=e.commands).moveAnnotations)||void 0===t||t.call(i,n)})}return!0}).run()}}catch(e){console.error("(caught) [GalleryPlugin] handleDrop error:",e)}return!0}}});var y=n(52322),b=n(38035),w=n(17993),C=n(62614),k=n(77533),j=n(32899),S=n(82655),A=n(42946),I=n(49929),z=n(64253),L=n(5879),E=n(87254),N=n(38045),M=n(2784),_=n(71383),T=n(15222),R=n(10232),H=n(38799),P=n(36230),O=n(78112),D=n(45075),W=n(92179),F=n(9325),B=n(31527),G=n(13850),U=n(7578),V=n(62528),q=n(82708),K=n(52175);let Y=(0,N.E)(b.k),X=e=>{let{node:t,editor:n,getPos:i}=e,r=t.attrs,a=(0,H.TZ)(),l=(0,h.Dz)(e),d=0===l.length,c=(0,T.Yy)(),u=d?s.vf:a?s.iC:r.thumbHeight||s.vf,p=r.layout,m="grid"===p?r.dimensions||"square":void 0,f=(0,F.yg)((null==r?void 0:r.horizontalAlign)||"center"),{isZoomed:x,isZoomComplete:v,exitZoom:N,zoomedId:X,setZoomedId:$}=(0,K.RM)(l.map(e=>e.attrs.id)),Z=(0,_.CG)(O.hN),Q=(0,M.useRef)(null),J=(0,P.Z)(Q,e=>(0,h.nF)(n.view,e)),ee=(0,M.useCallback)(e=>{try{var t;e.stopPropagation(),e.preventDefault();let r=i(),o=n.state.doc.nodeAt(r);if(!o)return;let a=null===(t=o.lastChild)||void 0===t?void 0:t.attrs.source,l=r+(null==o?void 0:o.nodeSize)-1;n.chain().insertContentAt(l,{type:"mediaPlaceholder",attrs:{source:a||"image.custom"}}).run(),setTimeout(()=>{n.commands.focus(),n.commands.setNodeSelection(l),(0,R.T)()})}catch(e){console.error("(caught) [GalleryView] addImage",e)}},[i,n]),et=(0,M.useCallback)(e=>{var t;n.isEditable&&(null===(t=e.target.closest(".gallery, .block"))||void 0===t?void 0:t.classList.contains("gallery"))&&n.commands.selectNodeAtPos(i())},[n,i]),en=(0,M.useMemo)(()=>"grid"===p?{overflow:"hidden",aspectRatio:"square"===m?"1":"landscape"===m?"4/3":"3/4"}:"logo"===p?{height:void 0}:{h:"".concat(u,"em"),flex:r.stretchFill?"1 1 auto":null===r.stretchFill?"1 1 auto":void 0},[p,m,u,r.stretchFill]),ei=(0,M.useMemo)(()=>"grid"===p?{justifyContent:"center",display:"grid",gridTemplateColumns:1===l.length?"repeat(auto-fit, ".concat(r.thumbHeight,"em)"):l.length<6?r.thumbHeight>=s.C_/(1+.1*l.length)?"repeat(auto-fit, minmax(".concat(r.thumbHeight,"em, 1fr))"):"repeat(auto-fit, ".concat(r.thumbHeight,"em)"):"repeat(auto-fit, minmax(".concat(r.thumbHeight,"em, 1fr))"),gap:r.thumbHeight>=s.C_/2?"".concat(s.Nj,"em"):r.thumbHeight<=s.C_/3?"".concat(s.Nj/1.25,"em"):"".concat(s.Nj/1.5,"em")}:{gap:r.thumbHeight<=s.vf/3?"".concat(s.Nj/2,"em"):r.thumbHeight<=s.vf/2?"".concat(s.Nj/1.5,"em"):"".concat(s.Nj,"em"),display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",placeContent:f,w:l.length>=3&&(null===r.stretchFill||r.stretchFill)?"100%":void 0},[p,r.thumbHeight,r.stretchFill,f,l.length]);return(0,y.jsxs)(D.lO,{...e,children:[(0,y.jsxs)(b.k,{className:"gallery",cursor:"default",onClick:et,ref:Q,align:f,direction:"column",position:"relative","data-selection-ring":!0,"data-selection-background":!0,...d?J:{},css:{"--media-maxH":"flex"===p?"".concat(u,"em"):void 0,"--media-maxW":"100%"},w:"100%",sx:{".gallery-content":{w:"100%",display:"flex"===p?"contents":void 0},"[data-node-view-content-inner=gallery]":{"@media print":{justifyContent:"center"},...ei,".block":{...en,"@media print":{flex:"unset !important"},["&.".concat(g)]:{flex:"0 0 auto"},my:0,transitionProperty:"filter",transitionDuration:"normal",_hover:{[":not(.block-mediaPlaceholder) > :not(.".concat(G.F,")")]:{filter:"brightness(0.9)"}},"[data-node-view-wrapper]":{h:"100%"}},".block-mediaPlaceholder":{overflow:"visible"}},".block-gallery.is-focused & .placeholder":{bg:c?V.Z.DARK_GALLERY_BG:V.Z.LIGHT_GALLERY_BG},".placeholder":{minW:"flex"===p?"12em":"logo"===p?"6em":void 0,h:"logo"===p?(0,h.mB)(r.thumbHeight,r.thumbSpacing):void 0}},children:[d?(0,y.jsxs)(w.g,{spacing:3,h:"".concat(u,"em"),justify:"center",contentEditable:!1,color:c?V.Z.DARK_COLOR:V.Z.LIGHT_COLOR,className:"gallery-placeholder","data-testid":"gallery-placeholder",userSelect:"none",children:[(0,y.jsx)(I.G,{size:"2x",icon:S.l9f}),Z?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(C.z,{size:"xs",onClick:ee,children:"Add images"})," ",(0,y.jsx)(k.x,{color:c?V.Z.DARK_ICON_COLOR:V.Z.LIGHT_ICON_COLOR,fontSize:"sm",textAlign:"center",children:(0,y.jsx)(L.cC,{id:"oyPIji"})})]}):null]}):(0,y.jsx)(o.ms,{className:"gallery-content"}),Z&&!d&&(0,y.jsx)(b.k,{position:"absolute",bottom:"0",h:"grid"===p||"logo"===p?"100%":"".concat(u,"em"),align:"center",w:6,right:-3,className:"add-image",opacity:"0",transitionProperty:"opacity",zIndex:"tooltip",transitionDuration:"normal",children:(0,y.jsx)(z.kH,{label:(0,y.jsx)(L.cC,{id:"P5MuiB"}),placement:"top",children:(0,y.jsx)(j.h,{icon:(0,y.jsx)(I.G,{icon:A.r8p}),"aria-label":E.ag._({id:"P5MuiB"}),position:"absolute",size:"xs",variant:"plain",isRound:!0,onClick:ee})})}),(0,y.jsx)(W.A,{...e,label:E.ag._({id:"wnA/4R"})})]}),(0,y.jsx)(K.EW,{isZoomed:x,isZoomComplete:v,exitZoom:N,zoomedId:X,setZoomedId:$,editor:n,children:l.filter(e=>e.attrs.id).map(e=>{let{id:t}=e.attrs,i=e.type.name;return{id:t,thumbnail:"image"===i?(0,y.jsx)(U.R,{imageAttrs:e.attrs,objectFit:"cover",isThumbnail:!0}):(0,y.jsx)(B.CG,{node:e}),full:(0,y.jsx)(b.k,{justify:"center",align:"center",h:"100%",w:"100%",children:"image"===i?(0,y.jsx)(U.R,{isZoomed:!0,imageAttrs:e.attrs}):"video"===i?(0,y.jsx)(Y,{width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,y.jsx)(q.Y7,{isZoomed:!0,node:e,decorations:[],editor:n})}):(0,y.jsx)(Y,{h:"100%",w:"100%",direction:"column",justify:"center",align:"center",children:(0,y.jsx)(B.Yn,{isZoomed:!0,node:e,decorations:[],editor:n})})})}})})]})},$=i.NB.create({name:"gallery",group:"cardBlock layoutBlock",content:"media*",isolating:!0,draggable:!0,selectable:!0,priority:a.a.Gallery,containerHandle:!0,expandable:!0,addNodeView:()=>(0,o.fW)(X,{update:l.E7,ignoreMutation:r.j}),addAttributes:()=>({thumbHeight:{default:s.vf},fullWidthBlock:{default:!1},layout:{default:"flex"},stretchFill:{},dimensions:{default:"square"},thumbSpacing:{default:s.GE}}),addProseMirrorPlugins(){return[v(this.editor)]},parseHTML:()=>[{tag:"div[class=gallery]"},{tag:"gallery"}],renderHTMLforAI(e){let{node:t}=e;return["gallery",{thumbHeight:t.attrs.thumbHeight},0]},renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,i.P1)(t,{class:"gallery"}),0]}})},9116:function(e,t,n){"use strict";n.d(t,{C_:function(){return a},GE:function(){return s},Ly:function(){return d},Nj:function(){return i},iC:function(){return o},jq:function(){return l},rA:function(){return c},vf:function(){return r}});let i=.8,r=12,o=8,a=15,l=5,s=1,d=2,c=.1},40405:function(e,t,n){"use strict";n.d(t,{Ah:function(){return r.Ah},N5:function(){return r.N5},Ol:function(){return r.Ol},XZ:function(){return r.XZ},gS:function(){return r.gS},jq:function(){return i.jq},mB:function(){return r.mB},rR:function(){return r.rR},t0:function(){return r.t0},u5:function(){return r.u5}});var i=n(9116),r=n(28789);n(45312)},28789:function(e,t,n){"use strict";n.d(t,{Ah:function(){return f},Dz:function(){return w},N5:function(){return h},Ol:function(){return b},XZ:function(){return y},cg:function(){return A},gS:function(){return x},mB:function(){return z},nF:function(){return S},rR:function(){return C},t0:function(){return v},u5:function(){return g},yT:function(){return k}});var i=n(37243),r=n(30764);n(2784);var o=n(65702),a=n(11569),l=n(12971),s=n(38636),d=n(54317),c=n(92322),u=n(44415),p=n(46007);let h=e=>"gallery"===e.type.name,m=e=>(0,i.qv)(e,h),g=e=>!!m(e),f=e=>{let{decorations:t}=e;return t.some(e=>e.spec.inGallery)},x=e=>{let{decorations:t}=e;return t.some(e=>"grid"===e.spec.layout)},v=e=>{var t;let{decorations:n}=e;return null===(t=n.find(e=>e.spec.thumbHeight))||void 0===t?void 0:t.spec.thumbHeight},y=e=>{var t;let{decorations:n}=e;return null===(t=n.find(e=>e.spec.thumbSpacing))||void 0===t?void 0:t.spec.thumbSpacing},b=e=>{let{decorations:t}=e;return t.some(e=>"logo"===e.spec.layout)},w=e=>{var t;let{decorations:n}=e,i=null===(t=n.find(e=>e.spec.children))||void 0===t?void 0:t.spec.children;return i?(0,l.Jn)(i):[]},C=e=>{let t=(0,s.bg)(e.$from);t&&!(0,d.KH)(t.node)?o.pw.emit(o.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:t.pos,text:(0,a.ho)(e.node)}):o.pw.emit(o.TI.CREATE_COMMENT_FROM_SELECTION,{selectionPos:e.from,parentPos:e.from,text:(0,a.ho)(e.node)})},k=(e,t,n,i)=>{let r,o;if(n&&!j(n,e.state.schema))return null;let a=e.posAtCoords({left:t.clientX,top:t.clientY});if(!a)return null;let{doc:s}=e.state,{pos:d}=a,c=s.resolve(d),u=m(c);if(u&&u.node.childCount>0)d=a.pos,(r=(0,l.Fu)(d,e))||d!=u.pos+u.node.nodeSize-1||(d-=1,r=(0,l.Fu)(d,e)),o=u.node;else{d=a.inside;try{o=s.resolve(d).nodeAfter}catch(e){return null}if(!o||!(0,p.fP)(o)||o==(null==n?void 0:n.content.firstChild)||i)return null;let t=c.parent;if(t&&!I(e.state.schema,t))return null;r=(0,l.Fu)(d,e)}if(!r)return null;let h=t.clientX-r.left,g=r.right-t.clientX,f=h>g?"right":"left";return("left"==f?h<0:g<0)&&!u?null:{pos:d,side:f,rect:r,node:o}},j=(e,t)=>e.content.size>0&&t.nodes.gallery.validContent(e.content),S=(e,t)=>{var n;let i=null===(n=e.dragging)||void 0===n?void 0:n.slice;if(!i){let e=[...t.dataTransfer.items];return e.length>0&&e.every(e=>e.type.startsWith("image/"))}return j(i,e.state.schema)},A=(e,t,n)=>{let i=(0,u.bC)(n,t);return(0,c.i1)(t)||j(t,e)||i&&i.length>0},I=(e,t)=>{let n=e.nodes[t.type.name];return!!n&&n.validContent(r.HY.fromJSON(e,[{type:"gallery",content:[]}]))},z=(e,t)=>"calc(".concat(.25*e,"em + ").concat(t,"em)")},62304:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(52322),r=n(28535);let o=e=>{let{html:t,...n}=e;return(0,i.jsx)(r.xu,{position:"relative",role:"group",className:"html-embed-viewer","data-selection-ring":"inside","data-selection-background":!0,borderRadius:"var(--box-border-radius)",contentEditable:!1,dangerouslySetInnerHTML:{__html:t},...n})}},43255:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var i=n(52322),r=n(28535),o=n(42822),a=n(38035),l=n(82655),s=n(14304),d=n.n(s),c=n(2784),u=n(94804),p=n(9355),h=n(71383),m=n(15222),g=n(10232),f=n(78112),x=n(97912),v=n(74216),y=n(9244),b=n(59053),w=n(88424),C=n(9160),k=n(99843),j=n(46007);let S=e=>{var t,n,s,S;let{image:A,editor:I,getPos:z,imageShape:L,imageSx:E,node:N}=e,M=(0,k.q)(I,z),_=I.state.selection.from===z(),T=(0,j.zd)((null==A?void 0:A.src)||(null==A?void 0:A.tempUrl)),R=(0,m.Yy)(),H=!A||A.showPlaceholder||!A.src&&!A.tempUrl,P=null!==(s=A&&(null===(t=A.loadImageParams)||void 0===t?void 0:t.provider))&&void 0!==s?s:void 0,O=A&&"queued"===A.loadImageStatus&&!I.isThumbnail,{src:D,tempUrl:W,uploadStatus:F,meta:B}=A||{},G=(0,h.CG)(f.hN),U=(0,g.B)(),V=N.attrs.source,q=D&&(0,x.SN)(D,I.isThumbnail?x.Iv:I.isSiteNavbarEditor?x.gJ:{width:1e3,height:1e3},B),K=(0,x.Ly)(q,q?void 0:W),Y={backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:T?void 0:K,backgroundPosition:(0,v.x_)(A),width:"100%",height:"100%",borderRadius:"circle"!==L||T?"var(--box-border-radius)":"full",transitionProperty:"border-radius",transitionDuration:"normal",...E},X=null!==(S=y.K[L||"square"])&&void 0!==S?S:y.K.square,$=(0,c.useCallback)(()=>{_?U({isOpen:!0}):M()},[_,M,U]);return(0,i.jsxs)(r.xu,{position:"relative",cursor:_?"pointer":"default",contentEditable:!1,h:"100%",onClick:G?$:void 0,onDoubleClick:()=>{U({isOpen:!0})},transitionProperty:"filter background",transitionDuration:"normal",_hover:G&&_?{filter:R?"brightness(1.15)":"brightness(0.85)",bg:T?R?"whiteAlpha.100":"blackAlpha.100":void 0}:void 0,children:[H?(0,i.jsx)(C.k3,{...Y,isLoading:!!O,loadingProvider:P,icon:(null===(n=b.ah["image.custom"])||void 0===n?void 0:n.icon)||l.VmB,h:"100%",onSelectAndFocus:()=>{G&&M()},defaultSource:V,cursor:_?"pointer":"default"}):T?(0,i.jsx)(o.M,{...Y,objectFit:"contain",sx:{svg:{width:"100%",aspectRatio:null==X?void 0:X.aspectRatio}},children:(0,i.jsx)(u.Z,{src:D||W||"",viewBox:(null==B?void 0:B.width)&&(null==B?void 0:B.height)?"0 0 ".concat(B.width," ").concat(B.height):void 0,className:"colorable-icon",preProcessor:e=>d().sanitize(e,{USE_PROFILES:{svg:!0,svgFilters:!0}})})}):(0,i.jsx)(a.k,{"data-content-reference":!0,"data-change-focus-point-el":!0,className:"card-layout-cell-bg",position:"relative",sx:Y}),F==p.D.Uploading&&G&&(0,i.jsx)(w.HI,{}),F==p.D.Error&&(0,i.jsx)(w.s7,{})]})}},45879:function(e,t,n){"use strict";n.d(t,{C3:function(){return S},CC:function(){return j},bn:function(){return C}});var i=n(52322),r=n(65610),o=n(87202),a=n(2784),l=n(42418),s=n(53650),d=n(71383),c=n(74122),u=n(90561),p=n(33315);let h=["0%","0%","0%","0%"],m="clippable-control-wrapper",g=(e,t,n)=>e/Math.sqrt((t*t+n*n)/2)*100,f=(e,t,n)=>e/100*Math.sqrt((t*t+n*n)/2),x=(e,t,n)=>{if("circle"===e){let e=Math.min(t,n)/2;return["".concat(g(e,t,n),"%"),"at","50%","50%"]}return h},v=(e,t,n)=>"circle"===e?1:"inset"===e?t/n:null,y=(e,t)=>{if("inset"===t){let[t,n]=e[0],[i,r]=e[4];return(i-t)/(r-n)}return 1},b=(e,t,n,i)=>{let[r,o,a,l]=e;if("inset"===t){let t=parseFloat(r),s=parseFloat(o),d=parseFloat(a),u=parseFloat(l),p=c.lt/n*100,h=c.lt/i*100;if(100-u-s<p){let t=100-u-p;t>=0?e[1]="".concat(t,"%"):(e[1]="0%",e[3]="".concat(100-p,"%"))}if(100-t-d<h){let n=100-t-h;n>=0?e[2]="".concat(n,"%"):(e[2]="0%",e[0]="".concat(100-h,"%"))}}else if("circle"===t){let t=Math.max(f(parseFloat(r),n,i),c.lt);e[0]="".concat(g(t,n,i),"%")}},w=e=>{let{clipType:t,clipStyles:n,w:i,h:r}=e,[o,a,l,s]=n;if("inset"===t){let e=parseFloat(o),t=parseFloat(a),n=parseFloat(l),i=parseFloat(s),r=i/(t+i)*100,d=e/(e+n)*100,c=isNaN(r)?50:r,u=isNaN(d)?50:d,p=100-i-t,h=100-e-n;return{mask:"\n        linear-gradient(#000 0 0) ".concat(c,"% ").concat(u,"% / ").concat(p,"% ").concat(h,"%,\n        linear-gradient(rgba(0,0,0,0.4) 0 0)"),width:p,height:h,top:e,right:t,bottom:n,left:i}}if("circle"===t){let e=parseFloat(o),t=parseFloat(l),n=parseFloat(s),a=f(e,i,r),d=n/100*r-a,c=t/100*i-a,u=2*a/i*100,p=2*a/r*100,h=d/r*100,m=c/i*100;return{mask:"radial-gradient(".concat(u,"% ").concat(p,"% at ").concat(t,"% ").concat(n,"%, black 50%, rgba(0, 0, 0, 0.4) 50%) no-repeat"),width:u,height:p,top:Math.max(h,0),left:Math.max(m,0),bottom:0,right:0}}return{mask:"",width:0,height:0,top:0,left:0,bottom:0,right:0}},C=(e,t,n,i)=>{if(!e||!e.clipType||!i)return{clipType:"inset",scaleCrop:1,scaleX:1,scaleY:1,aspectRatio:i||void 0,referenceXOffset:1,referenceYOffset:1,clipPathCSSString:"",translateX:0,translateY:0};let r=e.clipPath||x(e.clipType,t,n),{clipType:o}=e,{width:a,height:l,top:s,left:d,right:c,bottom:u}=w({w:t,h:n,clipType:o,clipStyles:r}),p=100/a,h=100/l,m=(null==e?void 0:e.clipAspectRatio)||1,g=(null==e?void 0:e.clipAspectRatio)||i;return{scaleCrop:i/m<1?Math.min(h,p):Math.max(h,p),aspectRatio:g,scaleX:p,scaleY:h,translateX:d,translateY:s,referenceXOffset:t*(100/(100-d+c)-1),referenceYOffset:n*(100/(100-s+u)-1),clipPathCSSString:"".concat(o,"(").concat(r.join(" "),")"),clipType:o}},k=(0,l.mz)([l.Rn]),j={[".".concat(m)]:{zIndex:2,".moveable-control":{zIndex:2,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal"},"&.data-clip-type-inset":{".moveable-control":{zIndex:2,bg:"0 none !important",borderRadius:"0px",width:"".concat(16,"px"),height:"".concat(16,"px"),border:"6px solid var(--chakra-colors-trueblue-300)",'&[data-clip-index="0"]':{borderRight:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(2,"px"),cursor:"nw-resize"},'&[data-clip-index="1"]':{borderRight:"0",borderBottom:"0",borderLeft:"0",marginTop:"-".concat(2,"px"),cursor:"n-resize"},'&[data-clip-index="2"]':{borderLeft:"0",borderBottom:"0",marginTop:"-".concat(2,"px"),marginLeft:"-".concat(14,"px"),cursor:"ne-resize"},'&[data-clip-index="3"]':{borderBottom:"0",borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),cursor:"e-resize"},'&[data-clip-index="4"]':{borderTop:"0",borderLeft:"0",marginLeft:"-".concat(14,"px"),marginTop:"-".concat(14,"px"),cursor:"se-resize"},'&[data-clip-index="5"]':{borderTop:"0",borderLeft:"0",borderRight:"0",marginTop:"-".concat(14,"px"),cursor:"s-resize"},'&[data-clip-index="6"]':{borderTop:"0",borderRight:"0",marginTop:"-".concat(14,"px"),marginLeft:"-".concat(2,"px"),cursor:"sw-resize"},'&[data-clip-index="7"]':{borderTop:"0",borderBottom:"0",borderRight:"0",marginLeft:"-".concat(2,"px"),cursor:"w-resize"}}},"&.data-clip-type-circle":{".moveable-control":{bg:"trueblue.300"}},".moveable-clip-ellipse":{borderWidth:"2px",borderColor:"var(--chakra-colors-trueblue-300) !important"},".moveable-line":{display:"none"}}},S=e=>{let{clipPath:t,clipAspectRatio:n,updateResizeAttrs:l,imageWrapperRef:c,refreshDeps:h,currentWidth:g,currentHeight:f,onFinishCrop:C}=e,j=(0,d.TL)(),S=(0,d.CG)(p.Ig),A=(0,a.useRef)(null),[I,z]=(0,a.useState)({clipPath:t||x(S,g,f),clipAspectRatio:n||v(S,g,f)}),L=(0,a.useCallback)(e=>{if(!g||!f||!c.current)return;let{mask:t}=w({w:g,h:f,clipType:S,clipStyles:e});c.current.style["-webkit-mask"]=t,c.current.style["-webkit-mask-repeat"]="no-repeat"},[c,S,g,f]),E=JSON.stringify(I.clipPath);(0,a.useEffect)(()=>{L(I.clipPath)},[L,E,I.clipPath]),(0,r.r)(()=>{z(e=>({...e,clipPath:x(S,g,f),clipAspectRatio:v(S,g,f)}))},[S]),(0,a.useEffect)(()=>{var e;null===(e=A.current)||void 0===e||e.updateTarget()},[h]);let N=(0,a.useCallback)(()=>{let e={clipType:S,...I};e.clipAspectRatio&&e.clipPath&&l(e)},[l,I,S]),M=(0,a.useRef)({fn:N,confirmOnUnmount:!0});M.current.fn=N,(0,a.useEffect)(()=>u.T.on("endClip",e=>{let{confirm:t}=e;M.current.confirmOnUnmount=t,j((0,p.uR)()),C&&C()}),[j,C]),(0,a.useEffect)(()=>{let e=M.current;return()=>{e.confirmOnUnmount&&setTimeout(e.fn,0)}},[]),(0,a.useEffect)(()=>s.F7.on("keydown","CLIPPABLE",e=>!!(0,o.ZP)("mod+x")(e)&&(e.preventDefault(),!0)),[]);let _="".concat(S,"(").concat((I.clipPath||x(S,g,f)).join(" "),")");return(0,i.jsx)(k,{ref:e=>{A.current=e},className:"".concat(m," data-clip-type-").concat(S),target:c.current,renderDirections:["ne","nw","se","sw"],origin:!1,draggable:!1,clippable:!0,clipTargetBounds:!0,clipRelative:!0,clipArea:!0,defaultClipPath:S,customClipPath:_,dragWithClip:!0,keepRatio:!0,onClip:e=>{let{clipStyles:t,clipType:n}=e;b(t,n,g,f),L(t)},onClipEnd:e=>{let{lastEvent:t}=e;if(!(null==t?void 0:t.clipStyles))return;let{clipStyles:n,clipType:i}=t;b(n,i,g,f),z({clipPath:n,clipAspectRatio:y(t.poses,S)})}})}},7578:function(e,t,n){"use strict";n.d(t,{R:function(){return w}});var i=n(52322),r=n(28535),o=n(75009),a=n(2784),l=n(27821),s=n(97912),d=n(9160),c=n(11082),u=n(68927),p=n(71383),h=n(80834),m=n(78112);let g=e=>{let{link:t,children:n,...r}=e,o=(0,p.CG)(m.hN),{linkUrl:l,handleClick:s}=(0,h.H)({url:t||""}),{interceptLinkClick:d,linkUrlSafe:g,isUntrusted:f,linkInterceptEnabled:x}=(0,u.x)(l),v=(0,a.useCallback)(e=>{if(null==s||s(e),!o)return x?d(e):void 0;e.preventDefault()},[o,s,d,x]);return t&&!f?(0,i.jsx)(c.r,{href:x?g||"":l,isExternal:!0,onClick:v,rel:"noopener nofollow",...r,children:n}):(0,i.jsx)(i.Fragment,{children:n})};var f=n(46007),x=n(45879);let v=(e,t,n)=>Math.sqrt(t*t+n*n)/Math.sqrt(2)*(e/100)*2,y=e=>{let t,n,i,r,o,{w:a,h:l,clipPath:d,clipType:c,src:u}=e;if(!d||!c||!u)return null;if("inset"===c){let e=.01*parseFloat(d[0]),o=.01*parseFloat(d[1]),s=.01*parseFloat(d[2]),c=.01*parseFloat(d[3]);t=(1-c-o)*a,n=(1-e-s)*l,i=a*c,r=l*e}else{n=t=v(parseFloat(d[0]),a,l);let e=t/2;i=(.01*parseFloat(d[2])-e/a)*a,r=(.01*parseFloat(d[3])-e/l)*l,o=!0}return{url:(0,s.aN)(u,b({crop:{cropWidth:t,cropHeight:n},gravity:{xOffset:i,yOffset:r}})),isCircle:o}},b=e=>{let{crop:{cropWidth:t,cropHeight:n},gravity:{xOffset:i,yOffset:r}}=e;return{crop:"".concat(t,":").concat(n,":nowe:").concat(i,":").concat(r),resizing_type:"auto"}},w=(0,a.forwardRef)((e,t)=>{let{imageAttrs:{src:n,tempUrl:a,resize:c,meta:u},isCroppingThisImage:p=!1,isZoomed:h=!1,objectFit:m="contain",containerWidth:v,intrinsicAspectRatio:b,isThumbnail:w,linkHref:C,containerProps:k,shouldUseImgProxyCrop:j,...S}=e,A=(0,l.C7)(),I=(null==u?void 0:u.frame_count)&&u.frame_count>1,z=h||!n||I?n:(0,s.SN)(n,w?{height:400}:{width:2e3},u),L=v||(null==u?void 0:u.width)||1,E=v&&b?v/b:(null==u?void 0:u.height)||1,{scaleCrop:N,scaleY:M,clipPathCSSString:_,translateX:T,translateY:R,aspectRatio:H,referenceXOffset:P,referenceYOffset:O}=(0,x.bn)(c,L,E,b||(u?u.width/u.height:1))||{},D=!p&&!!(null==c?void 0:c.clipPath),W=p?"":"scale(".concat(N,") translate(-").concat(T,"%, -").concat(R,"%)"),F=(0,f.zd)(n||a),B=y({w:L,h:E,clipPath:null==c?void 0:c.clipPath,clipType:null==c?void 0:c.clipType,src:n});return(0,i.jsx)(g,{link:C,w:h?void 0:"100%",children:(0,i.jsx)(r.xu,{css:{aspectRatio:"".concat(D?H:"")},className:"image","data-content-reference":"".concat(P,",").concat(O),"data-export-link":C,maxH:"var(--media-maxH)",maxW:"var(--media-maxW)",overflow:"hidden",w:h?void 0:"100%",h:"cover"==m?"100%":void 0,sx:{"@media print":{height:"unset"}},...k,children:j&&(null==B?void 0:B.url)?(0,i.jsx)(o.E,{alt:"",objectFit:m,maxH:"calc(var(--media-maxH) * ".concat(M||1,")"),minH:"cover"==m?"calc(var(--media-maxH) / ".concat(N||1,")"):void 0,ref:t,...n||a?{}:d.W6,src:(null==B?void 0:B.url)||z||a||"",...S}):(0,i.jsx)(o.E,{alt:"",objectFit:m,maxH:"calc(var(--media-maxH) * ".concat(M||1,")"),minH:"cover"==m?"calc(var(--media-maxH) / ".concat(N||1,")"):void 0,transformOrigin:"left top",clipPath:p?"":_,ignoreFallback:h||A,transform:W,src:z||a||"",fallbackSrc:a||"",ref:t,w:F?"100%":void 0,...n||a?{}:d.W6,...S})})})});w.displayName="CroppedImage"},53771:function(e,t,n){"use strict";n.d(t,{E:function(){return d}});var i=n(37243),r=n(24424),o=n(27210),a=n(72205),l=n(44170),s=n(43870);let d=r.ZP.extend({selectable:!0,draggable:!0,group:"block media",priority:a.a.Image,addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),placeholders:{}}},addNodeView:()=>(0,o.fW)(s.Y,{update:l.E7}),parseHTML:()=>[{tag:"img[src], img[tempUrl]"}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.P1)(t,{class:"gamma-simple-image"})]},addAttributes:()=>({src:{},tempUrl:{},uploadStatus:{},source:{},showPlaceholder:{}})})},43870:function(e,t,n){"use strict";n.d(t,{Y:function(){return c}});var i=n(52322),r=n(28535),o=n(11082),a=n(75009),l=n(9355),s=n(27210),d=n(88424);let c=e=>{let{node:t}=e,{src:n,tempUrl:c,uploadStatus:u,showPlaceholder:p,id:h}=t.attrs;return(0,i.jsxs)(s.T5,{as:"div",children:[p&&(0,i.jsx)(d.gH,{...e}),!p&&(n||c)&&(0,i.jsxs)(r.xu,{position:"relative",w:"100%",children:[(0,i.jsx)(o.r,{className:"image-link",href:n||c||"",target:"_blank",children:(0,i.jsx)(a.E,{src:n||c||""})}),u==l.D.Uploading&&(0,i.jsx)(d.HI,{}),u==l.D.Error&&(0,i.jsx)(d.s7,{})]})]})};c.displayName="simple-image-view"},13850:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});let i="non-clickable"},90802:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(2784),r=n(71383),o=n(6643);let a=e=>{let t=(0,r.TL)(),n=(0,i.useCallback)(e=>{let{clipType:n}=e;n&&t((0,o.Nf)({clipType:n}))},[t]),a=(0,i.useCallback)(n=>{let{id:i}=n;o.TB.emit("endClip",{id:i,confirm:!1}),t((0,o.uR)()),e.commands.resetImageClip()},[t,e]),l=(0,i.useCallback)(e=>{let{id:n}=e;o.TB.emit("endClip",{id:n,confirm:!1}),t((0,o.uR)())},[t]),s=(0,i.useCallback)(e=>{let{id:n}=e;o.TB.emit("endClip",{id:n,confirm:!0}),t((0,o.uR)())},[t]);return{cancelCrop:l,startCrop:(0,i.useCallback)(e=>{let{id:n,clipType:i}=e;t((0,o.iq)({id:n,clipType:i})),o.TB.emit("startCrop",{id:n})},[t]),confirmCrop:s,resetCrop:a,setCropClipType:n}}},90561:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});let i=new(n(8848)).v},6643:function(e,t,n){"use strict";n.d(t,{OT:function(){return er},Ee:function(){return eo},uR:function(){return J.uR},l_:function(){return J.l_},TB:function(){return v.T},Ig:function(){return J.Ig},v_:function(){return J.v_},GI:function(){return J.GI},Nf:function(){return J.Nf},dD:function(){return J.dD},jJ:function(){return J.jJ},iq:function(){return J.iq},_8:function(){return J._8}});var i=n(37243),r=n(24424),o=n(27191),a=n(21086),l=n(71030),s=n(45989),d=n(71383),c=n(90887),u=n(27210),p=n(12971),h=n(26923),m=n(72205),g=n(44170),f=n(68527),x=n(46007),v=n(90561),y=n(52322),b=n(78112),w=n(38035),C=n(28535),k=n(75009),j=n(82554),S=n(77533),A=n(98537),I=n.n(A),z=n(2784),L=n(30240),E=n(9355),N=n(93593),M=n(2557),_=n(38799),T=n(40382),R=n(97912),H=n(987),P=n(45075),O=n(53295),D=n(73360),W=n(21514),F=n(9325),B=n(26714),G=n(74122),U=n(40405),V=n(88424),q=n(95341),K=n(52175),Y=n(45879),X=n(13850),$=n(7578),Z=n(90802),Q=n(57675),J=n(33315),ee=n(3423);let et=e=>{let{theme:t,...n}=e,i=(0,d.TL)(),{node:r,editor:o,updateAttributes:a,selected:l,decorations:s}=n,{src:c,tempUrl:u,uploadStatus:p,meta:h,showPlaceholder:m,horizontalAlign:g,resize:f,id:j,href:S,clickBehavior:A,source:et}=r.attrs,ei=(null==f?void 0:f.width)||(null==h?void 0:h.width),er=(0,x.zd)(c||u),eo=(0,R.Kl)(c||u)||(null==h?void 0:h.frame_count)&&h.frame_count>1,{isFullWidth:ea}=(0,O.w)(s),el=(0,F.nN)(ea?"center":g),es=(0,_.TZ)(),ed=(0,U.Ah)(n),ec=(0,U.gS)(n),eu=(0,U.Ol)(n),ep=(0,B.Od)(s),eh=(0,d.CG)(b.hN),em=(0,W.M)(o),{isCardDark:eg}=(0,D.$D)(s),ef=null!=eg?eg:(0,N.wj)(t),ex=p===E.D.Uploading,ev=eh?"expand":(0,x.Fj)(A),ey="newTab"===ev&&!!S,eb=(0,L.ye)("debugCardViewed"),{isZoomed:ew,enterZoom:eC,exitZoom:ek}=(0,K.d8)(j),{width:ej,height:eS,aspectRatio:eA,containerWrapperRef:eI,imageRef:ez,setSize:eL}=(0,Q.A)();(0,z.useEffect)(()=>v.T.on("startCrop",e=>{let{id:t}=e;j===t&&(eL(),requestAnimationFrame(()=>{var e,t;null===(e=(t=o.commands).refreshBubbleMenu)||void 0===e||e.call(t)}))}),[j,eL,o]);let eE=(0,z.useCallback)(e=>{a(I()({},r.attrs,e,{meta:{has_transparency:!0}}))},[a,r.attrs]),{bgRemovalInProgress:eN,removeBgUrl:eM}=(0,ee.CI)({editor:o,id:r.attrs.id,src:r.attrs.src,updateAttributes:eE}),{ref:e_,isResizing:eT,setIsResizing:eR,resizeableSx:eH}=(0,q.ow)(o),eP=e_.current&&ep&&!ed&&!em,eO=e_.current&&!ed&&!em,eD=(0,z.useCallback)((e,t)=>{a({...r.attrs,fullWidthBlock:void 0===t?r.attrs.fullWidthBlock:t,resize:{...r.attrs.resize,...e}})},[r.attrs,a]),eW=(0,T.lz)(),eF=(0,d.CG)((0,J.v_)(j)),{confirmCrop:eB}=(0,Z.k)(o);(0,T.vm)(()=>{if(eF&&!l&&eB({id:j}),!l){var e,t;eR(!1),null===(e=(t=o.commands).forceHideBubbleMenu)||void 0===e||e.call(t,!1)}},[o,i,l,eF,j,eB,eR],[l]);let eG=!eF&&!eT&&!ed&&!o.isThumbnail,eU=!o.isThumbnail&&"expand"===ev,eV=(0,z.useCallback)(()=>{eF||eT||eC()},[eC,eF,eT]),eq=(0,z.useCallback)(()=>{if(l){var e,t;null===(e=(t=o.commands).refreshBubbleMenu)||void 0===e||e.call(t)}},[l,o]),eK=eM?{...r.attrs,src:eM,tempUrl:r.attrs.src}:r.attrs,eY=eu?{height:(0,U.mB)((0,U.t0)(n),(0,U.XZ)(n)),padding:"".concat((0,U.XZ)(n)/2,"em ").concat((0,U.XZ)(n),"em")}:{};return(0,y.jsxs)(P.lO,{...n,as:"div",className:eh||"none"!==ev?void 0:X.F,style:{height:ed?"100%":void 0},children:[(m||!c&&!u)&&(0,y.jsx)(V.gH,{...n}),!m&&(c||u)&&(0,y.jsxs)(w.k,{"data-testid":"image-node-wrapper",ref:eI,h:"100%",w:"100%",direction:"column",className:H.d,sx:eH,css:el,children:[eO&&eF&&(0,y.jsx)(Y.C3,{imageWrapperRef:e_,updateResizeAttrs:eD,refreshDeps:[eW],currentWidth:ej,currentHeight:eS,clipPath:null==f?void 0:f.clipPath,clipAspectRatio:null==f?void 0:f.clipAspectRatio,onFinishCrop:()=>{requestAnimationFrame(()=>{var e,t;null===(e=(t=o.commands).refreshBubbleMenu)||void 0===e||e.call(t)})}}),eP&&!eF&&l&&!ea&&(0,y.jsx)(q.R4,{imageWrapperRef:e_,setIsResizing:eR,updateResizeAttrs:eD,refreshDeps:[r.attrs,eW]}),(0,y.jsxs)(C.xu,{ref:e_,css:{mask:eF?"":"none !important","--media-maxH":!ex||eT||(null==f?void 0:f.width)||ed?void 0:"".concat(100*G.m4,"vh")},sx:M.c,"data-drag-handle":!0,"data-image-node-element":!0,"data-selection-ring":"inside","data-selection-background":!0,"data-node-image-testid":j,w:ea||ed?"100%":ei?"calc(".concat(ei," * var(--font-size) / 16)"):"fit-content",maxW:"100%",position:"relative",overflow:"hidden",...ed?{h:ec?"100%":void 0,display:"flex",justifyContent:"center",alignContent:"center"}:{},children:[eU&&(0,y.jsx)(K.cp,{enterZoom:eV,as:k.E,src:es||!o.isEditable||null===c?void 0:c,loading:"lazy"}),eb&&(0,y.jsx)(en,{imageAttrs:eK}),(0,y.jsx)($.R,{containerWidth:ej,intrinsicAspectRatio:eA||void 0,isCroppingThisImage:eF,imageAttrs:eK,onLoad:eq,linkHref:ey?S||"":void 0,filter:"image.icon"===et?"url(#theme-body-color-fill)":void 0,ref:ez,width:ed?"auto":ei||eT||ea||er?"100%":null==h?void 0:h.width,minW:ed?"100%":void 0,objectFit:ed?"cover":"contain",isThumbnail:ed||o.isThumbnail,flex:ec?1:void 0,containerProps:{display:ec?"flex":"block"},shouldUseImgProxyCrop:ec&&!eo&&!er,...eY}),eG&&(0,y.jsx)(K.aF,{isZoomed:ew,exitZoom:ek,editor:o,children:(0,y.jsx)($.R,{imageAttrs:r.attrs,backgroundColor:ef?"black":"white",w:er?"80vw":void 0,isZoomed:!0})}),(ex||eN)&&eh&&(0,y.jsx)(V.HI,{removeBackground:eN}),p==E.D.Error&&(0,y.jsx)(V.s7,{})]})]})]})},en=e=>{let{imageAttrs:t}=e;return(0,y.jsxs)(C.xu,{position:"absolute",as:"span",maxW:"95%",zIndex:1,bottom:0,m:1,children:[(0,y.jsx)(j.C,{maxW:"100%",colorScheme:"green",m:0,children:(0,y.jsxs)(S.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"10px",maxW:"100%",children:["url: ",t.src]})}),(0,y.jsx)(j.C,{maxW:"100%",colorScheme:"yellow",children:(0,y.jsxs)(S.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",fontSize:"10px",maxW:"100%",children:["tempUrl: ",t.tempUrl]})})]})},ei=e=>{let t=(0,d.CG)(b.Pu);return t?(0,y.jsx)(et,{...e,theme:t}):null},er={clipType:null,clipPath:null,clipAspectRatio:null,width:null},eo=r.ZP.extend({selectable:!0,draggable:!0,group:"block media",priority:m.a.Image,expandable:!0,addOptions(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this),placeholders:{}}},addStorage:h.gk,addNodeView:()=>(0,u.fW)(ei,{update:g.E7}),extendNodeSchema(e){var t;return{accessoryImageKey:(0,i.nU)((0,i.Nl)(e,"accessoryImageKey",e)),imageKeyPath:null!==(t=(0,i.nU)((0,i.Nl)(e,"imageKeyPath",e)))&&void 0!==t?t:""}},parseHTML(){return[{tag:"img[src], img[tempUrl]"},{tag:"img[bookmark]",getAttrs:(0,h.xF)(this.storage)},{tag:"img[".concat(a.L,"]"),getAttrs:l.z},{tag:"div[class=card-accent-layout-item]",context:"cardLayoutItem//",getAttrs:e=>{try{let t=JSON.parse(e.getAttribute("data-background")||"{}");if("image"!==t.type||!t.image)return!1;let n={...t.image,source:t.source};return(0,x.UZ)(n)}catch(t){return console.error("[Image] Error parsing accent image background",e,t),!1}}}]},renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.P1)(this.options.HTMLAttributes,t,{loading:"lazy"})]},renderHTMLforAI(e){let{node:t}=e;return["img",{bookmark:(0,h.ml)(this.storage,t),alt:(0,s.K)(t.attrs)}]},addAttributes:()=>({id:(0,c.b)(f.G),savedMediaId:{},src:{},tempUrl:{},uploadStatus:{},meta:{...(0,p.sw)("meta")},providerMeta:{...(0,p.sw)("providerMeta")},aiParams:{...(0,p.sw)("aiParams")},loadImageParams:{...(0,p.sw)("loadImageParams")},loadImageStatus:{},loadImageId:{},name:{},query:{},source:{},showPlaceholder:{},fullWidthBlock:{default:!1},resize:{...(0,p.sw)("resize"),default:er},clickBehavior:{default:null},href:{default:null}}),addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e,n=t.state.selection;if(n instanceof o.qv&&n.node.type.name===r.ZP.name){let e=(0,J.kv)((0,d.bh)().getState()),{id:t}=n.node.attrs;if(e)return v.T.emit("endClip",{id:t,confirm:!0}),!0}return!1}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("imageDrag"),props:{handleDOMEvents:{dragstart:(e,t)=>{var n;let{selection:r}=e.state,o=(0,i.EG)(r)&&(null===(n=r.node)||void 0===n?void 0:n.type.name)==="image"?r.node.attrs.id:null;if(o){let e=(0,d.bh)().getState();if((0,J.v_)(o)(e))return t.preventDefault(),!0}return!1}}}})],addCommands(){let e=this.name,t=t=>{let{selection:n}=t;return n instanceof o.qv&&n.node.type.name===e?n.node:void 0};return{resetImageClip:()=>n=>{let{chain:i,state:r}=n,o=t(r);if(!o)return console.warn("[resetImageClip] Selected node is not an image: ",r.selection),!0;let{clipPath:a,clipType:l,clipAspectRatio:s}=er;return i().updateAttributes(e,{resize:{...o.attrs.resize,clipPath:a,clipType:l,clipAspectRatio:s}}).run()},resetImageScale:()=>n=>{let{chain:i,state:r}=n,o=t(r);return o?i().updateAttributes(e,{resize:{...o.attrs.resize,width:null,isAuto:null}}).run():(console.warn("[resetImageClip] Selected node is not an image: ",r.selection),!0)}}}});n(53771),n(43870)},3423:function(e,t,n){"use strict";n.d(t,{CI:function(){return f},i:function(){return x},tk:function(){return g}});var i=n(70065),r=n(87254),o=n(2784),a=n(95405),l=n(25556),s=n(13090),d=n(71383),c=n(31601),u=n(6643),p=n(78112),h=n(97912),m=n(33315);let g=e=>{let{editor:t,id:n}=e,i=(0,d.TL)(),r=(0,d.CG)((0,m.GI)(n)),a=(0,d.CG)((0,m.r0)(n)),s=(0,o.useCallback)(()=>{i((0,u._8)({id:n})),u.TB.emit("startRemoveBg",{id:n}),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})},[i,t,n]);return{startRemoveBg:(0,l.YO)(s,"removeBackground",c.AA.GAMMA_PRO_UPSELL_REMOVE_BACKGROUND),isRemovingBg:r,isRemoveBgLoading:"loading"===a}},f=e=>{let{editor:t,id:n,src:a,updateAttributes:l}=e,c=(0,d.TL)(),g=(0,d.qr)(),f=(0,i.p)(),v=(0,d.CG)(p.Wl),y=t.isEditable,b=(0,d.CG)((0,m.r0)(n)),w=(0,d.CG)((0,m.EA)(n));return(0,o.useEffect)(()=>{if(!y||!a)return;let e=new AbortController,i="User aborted",o=async o=>{let{id:l}=o,d=null==v?void 0:v.id;if(n===l&&a&&d)try{c((0,u.dD)({id:n,status:"loading"}));let t=await x({imageUrl:a,workspaceId:d,abortController:e});c((0,u.jJ)({id:n,url:t})),(0,s.i)("removeBackground",v),await (0,h.GN)(t),setTimeout(()=>{requestAnimationFrame(()=>{u.TB.emit("endRemoveBg",{id:n,url:t})})},500)}catch(a){var p,m;if(a===i)return;let e="AbortError"===a.name,o=(null===(p=a.cause)||void 0===p?void 0:p.statusCode)&&(null===(m=a.cause)||void 0===m?void 0:m.statusCode)<500;f({title:r.ag._({id:"xwVKp4"}),position:"top",description:e?r.ag._({id:"sSkbaZ"}):o?a.message:r.ag._({id:"2ePs/6"}),status:"error",duration:5e3,isClosable:!0}),c((0,u.l_)({id:n})),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})}},l=t=>{let{id:n}=t;c((0,u.l_)({id:n})),e.abort(i)};return u.TB.on("startRemoveBg",o),u.TB.on("cancelRemoveBg",l),()=>{u.TB.off("startRemoveBg",o),u.TB.off("cancelRemoveBg",l)}},[n,t,a,l,c,g,y,v,f]),(0,o.useEffect)(()=>{if(y&&a)return u.TB.on("endRemoveBg",async e=>{let{id:i,url:r}=e;n===i&&(l({src:r||(0,m.EA)(n)(g.getState()),source:"image.custom"}),requestAnimationFrame(()=>{c((0,u.l_)({id:n})),requestAnimationFrame(()=>{var e,n;null===(e=(n=t.commands).refreshBubbleMenu)||void 0===e||e.call(n)})}))})},[n,l,t,c,g,y,a]),{bgRemovalInProgress:"loading"===b,removeBgUrl:w}},x=async e=>{let{imageUrl:t,workspaceId:n,abortController:i}=e,r="".concat(a.v.API_HOST,"/media/images/edit"),o=i||new AbortController,l=setTimeout(()=>o.abort(),3e4),s=await fetch(r,{method:"POST",signal:o.signal,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({url:t,operation:"remove-background",workspaceId:n})});if(clearTimeout(l),!s.ok){let e=await s.json();throw Error("".concat(e.error,": ").concat(e.message),{cause:e})}return(await s.json()).url}},2191:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var i=n(60111),r=n(10232),o=n(59053);let a=()=>Object.entries(o.ah).filter(e=>{let[t,n]=e;return n.nodeName&&!n.disabled}).map(e=>{let[t,n]=e;return{key:t,name:n.label,nodeName:n.nodeName||"mediaPlaceholder",execute:e=>e.commands.insertMediaBlock(n.key),dragStartFn:e=>{(0,i.U)(e,{type:"mediaPlaceholder",attrs:{source:n.key}})},dragEndFn:()=>{(0,r.T)()},description:n.description,icon:n.icon,image:n.image,testId:n.key,keywords:n.keywords,featureFlag:n.featureFlag,priority:n.priority,categories:n.categories,checkDisabled:n.checkDisabled,badge:n.badge}})},59053:function(e,t,n){"use strict";n.d(t,{dz:function(){return y},ah:function(){return b},mC:function(){return v},X8:function(){return w}});var i=n(52322),r=n(82655),o=n(87254),a=n(72842),l=n(93593),s=n(17993),d=n(47443),c=n(52929),u=n(74444),p=n(5879),h=n(71383),m=n(52949),g=n(78112),f=n(26845),x=n(91492);let v="default",y={Default:[{label:()=>o.ag._({id:"EdQY6l"}),availableOffline:!0,key:v,backgroundType:x.E.NONE,Panel:()=>(0,i.jsx)(i.Fragment,{})}],Image:[{...a.in,nodeName:"image",backgroundType:x.E.IMAGE,priority:10},{...a.ud,nodeName:"image",disabled:!0,backgroundType:x.E.IMAGE},{...a.QT,nodeName:"image",backgroundType:x.E.IMAGE},{...a.jt,nodeName:"image",disabled:!0,backgroundType:x.E.IMAGE},{...a.NX,nodeName:"image",backgroundType:x.E.IMAGE},{...a.hq,nodeName:"image",backgroundType:x.E.IMAGE},{...a.$5,nodeName:"image",backgroundType:x.E.IMAGE},{...a.RE,nodeName:"image",backgroundType:x.E.IMAGE},{...a.jS,nodeName:"image"},{...a.bD,nodeName:"image",disabled:!0,backgroundType:x.E.IMAGE},{...a.Q0,nodeName:"image"},{label:()=>o.ag._({id:"COXEr5"}),key:l.cx,availableOffline:!0,icon:r.l9f,Panel:e=>{let{currentAttributes:t,updateAttributes:n,editType:r}=e,o=(0,h.CG)(g.Pu),{accentBackgrounds:a}=o.config;return(0,i.jsxs)(s.g,{align:"stretch",children:[a&&(0,i.jsx)(m.U,{currentAttributes:t,accentImages:a,isDark:(0,l.wj)(o),handleItemClick:n,editType:r}),(0,i.jsxs)(d.b,{status:"info",children:[(0,i.jsx)(c.z,{}),(0,i.jsx)(u.X,{children:(0,i.jsx)(p.cC,{id:"zOCB9A"})})]})]})},backgroundType:x.E.IMAGE,nodeName:"image",keywords:["accent image"]}],Video:[{...a.wj,nodeName:"video"},{...a.Vy,nodeName:"video"},{...a.qz,nodeName:"video"},{...a.oC,nodeName:"video"},{...a.BM,nodeName:"video"},{...a.zs,nodeName:"video"},{...a.p7,nodeName:"video"}],Embed:[{...a.Hw,nodeName:"embed",priority:10},{...a.VI,nodeName:"embed"},{...a.BR,nodeName:"embed"},{...a.bO,nodeName:"embed"},{...a.DN,nodeName:"embed"},{...a.f0,nodeName:"embed"},{...a.iL,nodeName:"embed"},{...a.Bo,nodeName:"embed"},{...a.LE,nodeName:"embed"},{...a.QR,nodeName:"embed"},{...a.Ds,nodeName:"embed"},{...a.FH,nodeName:"embed"},{...a.F6,nodeName:"embed"},{...a.w4,nodeName:"embed"},{...a.BF,nodeName:"embed"},{...a.DU,nodeName:"embed"},{...a.TQ,nodeName:"embed"}],Color:[{label:()=>o.ag._({id:"iFeLoB"}),key:"color.solid",availableOffline:!0,icon:r.q2v,Panel:f.c,backgroundType:x.E.COLOR,keywords:["solid color"]},{...a.eK,availableOffline:!0,backgroundType:x.E.GRADIENT}]},b=Object.fromEntries(Object.values(y).flat().map(e=>[e.key,e])),w={Default:()=>o.ag._({id:"ovBPCi"}),Image:()=>o.ag._({id:"hG89Ed"}),Video:()=>o.ag._({id:"vSJd18"}),Embed:()=>o.ag._({id:"KKBlUU"}),Color:()=>o.ag._({id:"jZlrte"})}},88424:function(e,t,n){"use strict";n.d(t,{om:function(){return C},gH:function(){return w},s7:function(){return v.s7},k3:function(){return v.k3},HI:function(){return v.HI}});var i=n(37243),r=n(27191),o=n(10232),a=n(27210),l=n(72205),s=n(46007),d=n(52322),c=n(38035),u=n(82655),p=n(9355),h=n(94672),m=n(53295),g=n(9325),f=n(40405),x=n(59053),v=n(9160),y=n(21800);let b=e=>(0,d.jsx)(h.l,{...e,as:"div",children:(0,d.jsx)(w,{...e})}),w=e=>{var t;let{node:n,decorations:i,editor:r}=e,{source:o,horizontalAlign:a,uploadStatus:l,loadImageParams:s,loadImageStatus:h}=n.attrs,{getPos:b}=e,{isFullWidth:w}=(0,m.w)(i),C=(null===(t=x.ah[o])||void 0===t?void 0:t.icon)||u.VmB,k=(0,f.Ah)(e),j=(0,y.qs)(r,b);return(0,d.jsx)(c.k,{w:"100%",h:"100%",direction:"column",sx:(0,g.nN)(a),children:(0,d.jsx)(v.k3,{hasUploadError:l===p.D.Error,isUploading:l===p.D.Uploading,isLoading:"queued"===h&&!r.isThumbnail,loadingProvider:null==s?void 0:s.provider,"data-content-reference":!0,icon:C,width:w||k?"100%":"18em",maxW:"100%",h:k?"100%":"10em",maxH:"100%",onSelectAndFocus:j,defaultSource:o,"data-drag-handle":!0,"data-selection-ring":!0,"data-selection-background":!0,borderRadius:"var(--box-border-radius)",hideQuickActions:r.isThumbnail})})},C=i.NB.create({name:"mediaPlaceholder",group:"block media",atom:!0,selectable:!0,draggable:!0,priority:l.a.MediaPlaceholder,addNodeView:()=>(0,a.fW)(b),addAttributes:()=>({source:{},fullWidthBlock:{default:!1}}),addKeyboardShortcuts:()=>({Enter:e=>{let{editor:t}=e,n=t.state.selection;return!!(n instanceof r.qv&&(0,s.fP)(n.node))&&((0,o.T)(),!0)}}),addCommands:()=>({insertMediaBlock:e=>t=>{let{commands:n}=t;return n.insertContentAndSelect({type:"mediaPlaceholder",attrs:{source:e}}),requestAnimationFrame(()=>{(0,o.T)()}),!0}}),parseHTML:()=>[{tag:"img[placeholder=true]",priority:60}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,i.P1)(t,{placeholder:"true"})]}})},95341:function(e,t,n){"use strict";n.d(t,{R4:function(){return x},Wv:function(){return f},ow:function(){return g}});var i=n(52322),r=n(65610),o=n(12436),a=n.n(o),l=n(2784),s=n(42418),d=n(74122),c=n(40382),u=n(53979);let p="resizeable-control-wrapper",h=(0,s.mz)([s.ez]),m=(e,t)=>Math.max(e,d.lt*Math.max(t.clientWidth/t.clientHeight,1));function g(e){let[t,n]=(0,l.useState)(!1),i=(0,c.lz)(),o=(0,l.useRef)(null),a=(0,u.Br)(o),[s,d]=(0,l.useState)(!1),p=(0,l.useCallback)(()=>{var t,i;null===(t=(i=e.commands).forceHideBubbleMenu)||void 0===t||t.call(i,!0),n(!0)},[e]),h=(0,l.useCallback)(()=>{var t,i;null===(t=(i=e.commands).forceHideBubbleMenu)||void 0===t||t.call(i,!1),n(!1)},[e]);return(0,r.r)(()=>{var t,n;null===(t=(n=e.commands).forceHideBubbleMenu)||void 0===t||t.call(n,s||a)},[e,s,a]),{ref:o,isResizing:s,setIsResizing:d,isAnimating:t,resizeableSx:{".moveable-control":{display:i||a||t?"none":""}},onLayoutAnimationStart:p,onLayoutAnimationComplete:h}}let f={[".".concat(p)]:{zIndex:11,".moveable-control":{bg:"white",border:"2px solid var(--chakra-colors-trueblue-300)",w:"".concat(8,"px"),h:"".concat(8,"px"),opacity:1,zIndex:10,borderRadius:0,_hover:{opacity:1},transitionProperty:"opacity",transitionDuration:"normal","&.moveable-ne, &.moveable-sw":{cursor:"nesw-resize"},"&.moveable-nw, &.moveable-se":{cursor:"nwse-resize"},"&.moveable-se, &.moveable-ne, &.moveable-e":{marginLeft:"-".concat(5,"px")},"&.moveable-sw, &.moveable-nw, &.moveable-w":{marginLeft:"-".concat(3,"px")},"&.moveable-ne, &.moveable-nw, &.moveable-n":{marginTop:"-".concat(3,"px")},"&.moveable-se, &.moveable-sw, &.moveable-s":{marginTop:"-".concat(5,"px")},"&.moveable-e, &.moveable-w":{cursor:"ew-resize",marginTop:"-".concat(4,"px")},"&.moveable-n, &.moveable-s":{cursor:"ns-resize",marginLeft:"-".concat(4,"px")}},".moveable-line":{display:"none"}}},x=e=>{let{imageWrapperRef:t,setIsResizing:n,updateResizeAttrs:r,refreshDeps:o,keepRatio:s=!0,onResizing:c}=e,u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{setTimeout(()=>{requestAnimationFrame(()=>{var e,t;null===(e=u.current)||void 0===e||e.updateRect(),null===(t=u.current)||void 0===t||t.updateTarget()})},300)},[o]),(0,l.useEffect)(()=>{let e=()=>{var e;null===(e=u.current)||void 0===e||e.updateTarget()},t=a()(e,250);return document.addEventListener("drop",e),window.addEventListener("resize",t),()=>{document.removeEventListener("drop",e),window.removeEventListener("resize",t)}},[]),(0,i.jsx)(h,{ref:e=>{u.current=e},className:p,target:t.current,renderDirections:["se","nw","sw","ne","n","s","e","w"],keepRatio:s,draggable:!1,resizable:!0,origin:!1,onResizeStart:()=>{n(!0)},onResize:e=>{let{target:t,width:n,height:i}=e,r=m(n,t),o=s?i:m(i,t);t.style.width="".concat(r,"px"),s||(t.style.height="".concat(o,"px")),null==c||c({width:r,height:o})},onResizeEnd:e=>{let{target:t}=e,i=t.clientWidth,o=t.clientHeight,a=parseFloat(getComputedStyle(t).fontSize)/d.SV;r({width:i/a,height:s?null:o/a,isAuto:!1}),n(!1),t.style.width="",t.style.height=""}})}},68527:function(e,t,n){"use strict";n.d(t,{G:function(){return s},z:function(){return d}});var i=n(38564),r=n(37164),o=n(27191),a=n(46924);let l=new o.H$("UniqueMediaId"),s=()=>(0,r.x0)(5),d=a.I.extend({name:"UniqueMediaId"}).configure({attributeName:"id",types:["image","embed","video","smartLayoutCell"],initialValue:s,filterTransaction:e=>{let t=e.getMeta(i.Gt);return(null==t?void 0:t.isChangeOrigin)!==!0},pluginKey:l})},82708:function(e,t,n){"use strict";n.d(t,{nk:function(){return R},Y7:function(){return N}});var i=n(37243),r=n(90887),o=n(27210),a=n(12971),l=n(26923),s=n(44170),d=n(68527),c=n(46007),u=n(52322),p=n(28535),h=n(38035),m=n(73200),g=n(38045),f=n(95405),x=n(33886),v=n(94672),y=n(31527),b=n(29020),w=n(40405),C=n(67762),k=n(52175),j=n(2784),S=n(61707),A=n(9237),I=n(62304),z=n(72842);let L=e=>e&&z.zX[e]?z.zX[e]:z.wj,E=16/9,N=e=>{let{isZoomed:t,...n}=e,{node:i}=n,{embed:r,source:o,sourceUrl:a}=i.attrs,l=L(o),s=(0,j.useRef)(null),d=l.preferHtml&&(null==r?void 0:r.html),c=(null==r?void 0:r.height)&&!(null==r?void 0:r.width),h=(null==r?void 0:r.height)&&(null==r?void 0:r.width)?r.width/r.height:(null==r?void 0:r.aspectRatio)||E,g=t?{width:"min(var(--media-maxW), calc(var(--media-maxH) * ".concat(h,"))"),height:"video.tiktok"===o?void 0:c?r.height:"min(var(--media-maxH), calc(var(--media-maxW) / ".concat(h,"))"),alignContent:"center"}:d?void 0:c?{height:r.height}:{height:0,pb:"".concat(100/h,"%")},f=(null==r?void 0:r.url)||i.attrs.embedUrl||a,x=l&&l.rewriteEmbedUrl&&f?l.rewriteEmbedUrl(f):f;return(0,u.jsxs)(p.xu,{position:"relative","data-drag-handle":!0,...g,onClick:t?A.UW:void 0,children:[!t&&(0,u.jsx)(k.Y$,{...n,frameRef:s}),d?(0,u.jsx)(I.$,{html:r.html,w:t?"100%":void 0,onClick:t?A.UW:void 0,...l.minWidth?{minW:"min(".concat(l.minWidth,", 100vw)"),left:"50%",transform:"translateX(-50%)"}:void 0,maxW:l.maxWidth}):(0,u.jsx)(S.A,{initialUrl:x,backgroundColor:"none",borderRadius:"var(--box-border-radius)",overflow:"hidden","data-selection-ring":"inside","data-selection-background":!0,className:(0,m.cx)("video-player"),iframeOptions:{preventScroll:!0,...l.iframeOptions},position:"absolute",inset:0,frameRef:s})]})},M=(0,g.E)(p.xu),_=(0,g.E)(h.k),T=e=>{let{node:t,editor:n}=e,i=t.attrs,{source:r,embed:o,displayStyle:a,id:l,sourceUrl:s}=i,{isZoomed:d,enterZoom:c,exitZoom:p}=(0,k.d8)(l),h=(0,w.Ah)(e),g=(0,y.v0)(r),j=!f.v.GAMMA_PUPPETEER_SERVICE&&"inline"===a,S="inline"===a&&g.preferHtml&&(null==o?void 0:o.html),A=!h&&!n.isThumbnail,{handleOpenLinkWithInterstitial:I,handleOpenNativeLinkWithInterstitial:z,url:L}=(0,C.d)({attrs:i,inGallery:h,shouldDisableClick:j&&!h})||{};return(0,u.jsxs)(v.l,{...e,as:"div",children:[(0,u.jsx)(M,{h:"100%",className:(0,m.cx)("embed-preview",!j&&x.wY),"data-export-as-image":!0,"data-export-link":s,position:"relative",overflow:S&&g.minWidth?"visible":"hidden",children:n.isThumbnail?(0,u.jsx)(y.XX,{...e}):h?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.l,{enterZoom:c,url:L,handleOpenLink:z,handleOpenInNewTab:I}),(0,u.jsx)(y.CG,{...e})]}):j?(0,u.jsx)(N,{...e}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(b.l,{enterZoom:c,url:L,handleOpenLink:z,handleOpenInNewTab:I}),(0,u.jsx)(y.fu,{...e})]})}),A&&(0,u.jsx)(k.aF,{isZoomed:d,exitZoom:p,editor:n,children:(0,u.jsx)(_,{width:"var(--media-maxW)",height:"var(--media-maxH)",direction:"column",align:"center",justify:"center",children:(0,u.jsx)(N,{...e,isZoomed:!0})})})]})},R=i.NB.create({name:"video",group:"block media",atom:!0,draggable:!0,selectable:!0,expandable:!0,addNodeView:()=>(0,o.fW)(T,{update:s.E7}),addAttributes:()=>({id:(0,r.b)(d.G),embedUrl:{},source:{},thumbnail:{...(0,a.sw)("thumbnail")},embed:{...(0,a.sw)("embed")},meta:{...(0,a.sw)("meta")},sourceUrl:{},displayStyle:{default:"inline"},fullWidthBlock:{default:!1},clickBehavior:{default:null}}),parseHTML(){return[{tag:"div[class=video]"},{tag:"video[bookmark]",getAttrs:(0,l.xF)(this.storage)}]},addStorage:()=>({bookmarks:{}}),renderHTMLforAI(e){let{node:t}=e;return["video",{bookmark:(0,l.ml)(this.storage,t)}]},renderHTML(e){let{HTMLAttributes:t,node:n}=e;return["div",(0,i.P1)(t,{class:"video"}),["a",{href:(0,c.iJ)(n),target:"_blank"},(0,c.k7)(n)]]}})},4856:function(e,t,n){"use strict";n.d(t,{Y:function(){return u},c:function(){return c}});var i=n(52322),r=n(28535);n(2784);var o=n(95405),a=n(71383),l=n(12971),s=n(78112),d=n(26714);let c=e=>{let{enterZoom:t,doubleClickNonZoomHandler:n,...l}=e,d=(0,a.CG)(s.hN),c=!d,u=d&&!n;return o.v.GAMMA_PUPPETEER_SERVICE?null:(0,i.jsx)(r.xu,{inset:0,w:"100%",h:"100%",position:"absolute",zIndex:1,cursor:c?"zoom-in":"default",onDoubleClick:u?t:n,onClick:c?t:void 0,"data-drag-handle":!0,"data-testid":"zoom-click-capture",opacity:0,...l})},u=e=>{let{decorations:t,node:n,editor:o}=e,c=(0,d.Od)(t)||!(0,l.KB)(o),u=(0,a.CG)(s.hN),{displayStyle:p}=n.attrs;return(0,i.jsx)(r.xu,{position:"absolute",inset:0,zIndex:1,pointerEvents:u&&!c&&"inline"===p?"auto":"none",cursor:"default"})}},52175:function(e,t,n){"use strict";n.d(t,{Y$:function(){return D.Y},cp:function(){return D.c},EW:function(){return O},aF:function(){return R},RM:function(){return U},d8:function(){return G}});var i=n(52322),r=n(69339),o=n(33570),a=n(38035),l=n(29117),s=n(32899),d=n(28535),c=n(87254),u=n(38045),p=n(25925),h=n(12982),m=n.n(h),g=n(56974),f=n.n(g),x=n(2784),v=n(53650),y=n(87103),b=n(9237),w=n(92035);let C={type:"spring",duration:.5,bounce:0},k=(0,w.s2)()?"0.75rem":"2.5rem";var j=n(82642),S=n(332),A=n(87202),I=n(43997),z=n(62861),L=n(71383),E=n(8142),N=n(76599);let M=()=>{let e=(0,L.CG)(N.Lw),{inPreviewContext:t}=(0,E.My)();return e&&!t};var _=n(40382);let T=(0,u.E)(d.xu),R=e=>{let{children:t,isZoomed:n,exitZoom:r,editor:o}=e,l=(0,I.I0)(),u=M();(0,x.useEffect)(()=>{if(!u)return v.F7.on("keydown","ZOOMABLE_OVERLAY",e=>n&&["ArrowDown","ArrowUp"].includes(e.key)?(e.preventDefault(),!0):!!((0,A.P6)("Esc")(e)||(0,A.P6)("Enter")(e))&&!!n&&(r(),e.preventDefault(),!0))},[r,n,u]),(0,x.useEffect)(()=>{u||l((0,z.VN)({id:"zoomableOverlay",isOpen:n}))},[l,n,u]);let p=(0,x.useRef)(null);return((0,_.vm)(()=>{if(o.isEditable){if(n){var e;null===(e=p.current)||void 0===e||e.focus()}else o.commands.focus()}},[o,n],[n],!1),u)?null:(0,i.jsx)(S.h,{children:n&&(0,i.jsxs)(d.xu,{position:"fixed",inset:0,padding:k,zIndex:"modal",userSelect:"none",onClick:e=>{!(0,w.f_)()&&(e.target.closest(".image")||e.target.closest("[data-carousel-filmstrip]")||r())},onMouseDown:b.br,"data-in-editor-focus":!0,"data-testid":"zoomable-overlay",children:[(0,i.jsx)(T,{position:"absolute",inset:0,initial:{opacity:0},animate:{opacity:(0,w.s2)()?.9:.86},transition:C,backgroundColor:"black"},"shade"),(0,i.jsx)(d.xu,{position:"absolute",right:2,top:2,zIndex:"docked",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,i.jsx)(s.h,{"aria-label":c.ag._({id:"8qZ5De"}),colorScheme:"whiteAlpha",color:"whiteAlpha.800",size:"md",onClick:r,onMouseDown:b.br,icon:(0,i.jsx)(j.T,{}),variant:"ghost",className:"exit-button",ref:p})}),(0,i.jsx)(a.k,{position:"relative",zIndex:"1",h:"100%",w:"100%",pt:"2.8rem",align:"center",justify:"center",direction:"column",css:{"--overlay-maxH":"calc(100vh - 2 * ".concat(k,")"),"--overlay-maxW":"calc(100vw - 2 * ".concat(k,")"),"--media-maxH":"var(--overlay-maxH)","--media-maxW":"var(--overlay-maxW)"},children:t})]})})},H=(0,u.E)(a.k),P="80px",O=e=>{let{children:t,zoomedId:n,isZoomComplete:u,setZoomedId:h,isZoomed:g,exitZoom:w,editor:j}=e,S=m()(t,e=>e.id===n),A=t[S],I=(0,x.useRef)(null),z=(0,x.useCallback)(()=>{h((t[S+1]||t[0]).id)},[S,t,h]),L=(0,x.useCallback)(()=>{h((t[S-1]||f()(t)).id)},[S,t,h]);return((0,x.useEffect)(()=>{if(g&&!(t.length<2))return v.F7.on("keydown","ZOOMABLE_OVERLAY",e=>{switch(e.key){case"ArrowLeft":return L(),!0;case"ArrowRight":return z(),!0;default:return!1}})},[w,g,h,t,S,z,L]),(0,x.useEffect)(()=>{if(I.current&&u){let e=I.current.querySelector('[data-thumb-id="'.concat(n,'"]'));null==e||e.scrollIntoView({inline:"center",behavior:"smooth"})}},[n,u]),y.cx)?null:(0,i.jsxs)(R,{isZoomed:g,exitZoom:w,editor:j,children:[(0,i.jsx)(a.k,{flex:1,w:"100%",justify:"center",align:"center","data-testid":"zoomable-carousel-expanded",pos:"relative",children:(0,i.jsx)(p.M,{children:A&&(0,i.jsx)(H,{css:{"--media-maxH":"calc(var(--overlay-maxH) - ".concat(P," - ").concat(k,")")},initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},position:"absolute",transition:C,w:"100%",h:"100%",children:A.full},A.id)})}),t.length>1&&(0,i.jsx)(l.U,{w:"100vw",mt:k,px:k,gap:0,"data-carousel-filmstrip":!0,children:(0,i.jsxs)(a.k,{overflowX:"auto",width:"100%",justify:"center",align:"stretch",overflow:"hidden",children:[(0,i.jsx)(s.h,{icon:(0,i.jsx)(r.w,{boxSize:"24px"}),"aria-label":c.ag._({id:"MHk+7g"}),colorScheme:"whiteAlpha",variant:"ghost",size:"md",color:"whiteAlpha.900",borderColor:"whiteAlpha.200",borderWidth:"2px",borderStyle:"solid",onClick:L,_hover:{bg:"whiteAlpha.200",borderColor:"whiteAlpha.400"},h:"auto",mr:2}),(0,i.jsx)(l.U,{spacing:1,onClick:b.UW,"data-testid":"zoomable-carousel-thumbnails",ref:I,overflow:"scroll",sx:{"::-webkit-scrollbar":{display:"none"}},children:t.map(e=>{let t=e.id===n;return(0,i.jsx)(d.xu,{border:t?"2px solid white":"2px solid transparent",boxSizing:"content-box",borderRadius:"md",overflow:"hidden",onClick:()=>h(e.id),transitionProperty:"border",transitionDuration:"normal",h:P,css:{"--media-maxH":P,"--media-maxW":"200px",flexShrink:0},"data-thumb-id":e.id,cursor:"pointer",padding:"2px",_hover:{borderColor:!t&&"whiteAlpha.500"},children:(0,i.jsx)(d.xu,{w:"100%",h:"100%",borderRadius:"sm",overflow:"hidden",children:e.thumbnail})},e.id)})}),(0,i.jsx)(s.h,{icon:(0,i.jsx)(o.X,{boxSize:"24px"}),"aria-label":c.ag._({id:"EatZYJ"}),colorScheme:"whiteAlpha",variant:"ghost",size:"md",color:"whiteAlpha.900",borderColor:"whiteAlpha.200",borderWidth:"2px",borderStyle:"solid",onClick:z,_hover:{bg:"whiteAlpha.200",borderColor:"whiteAlpha.400"},h:"auto",ml:2})]})})]})};var D=n(4856),W=n(78112);let F=e=>t=>(0,W._I)(t)===e,B=e=>t=>{let n=(0,W._I)(t);return n&&e.includes(n)?n:null},G=e=>{let t=(0,I.I0)(),n=(0,L.CG)(F(e)),i=(0,x.useCallback)(n=>{t((0,W.RW)({nodeId:n?e:null}))},[t,e]),r=(0,x.useCallback)(()=>i(!0),[i]),o=(0,x.useCallback)(()=>i(!1),[i]);return{isZoomed:n,setIsZoomed:i,enterZoom:r,exitZoom:o}},U=e=>{let t=(0,I.I0)(),n=(0,L.CG)(B(e)),i=!!n,r=(0,x.useCallback)(e=>{t((0,W.RW)({nodeId:e}))},[t]),o=(0,x.useCallback)(()=>r(null),[r]),[a,l]=(0,x.useState)(i);return(0,x.useEffect)(()=>{let e;return i?e=window.setTimeout(()=>{l(!0)},1e3*C.duration):l(!1),()=>clearTimeout(e)},[i]),{isZoomed:i,isZoomComplete:a,zoomedId:n,setZoomedId:r,exitZoom:o}}},987:function(e,t,n){"use strict";n.d(t,{d:function(){return o},l:function(){return a}});var i=n(45879),r=n(95341);let o="gamma-moveable-wrapper",a={...i.CC,...r.Wv}},67762:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var i=n(2784),r=n(24409),o=n(30240),a=n(27821),l=n(46007);let s=e=>{let{attrs:t,inGallery:n,shouldDisableClick:s}=e,d=(0,l.iJ)(t),c=t.displayStyle,u=(0,o.ye)("linksV2"),p=(0,a.C7)(),h=(0,l.gp)(t,u&&"preview"===c&&!n),{handleOpenLinkWithInterstitial:m,handleOpenNativeLinkWithInterstitial:g,linkUrlSafe:f}=(0,r.l)(d),x=u&&"newTab"===h&&!s;return(0,i.useMemo)(()=>x?{url:p?d:f,handleOpenLinkWithInterstitial:m,handleOpenNativeLinkWithInterstitial:g}:void 0,[m,g,f,d,x,p])}},43826:function(e,t,n){"use strict";n.d(t,{$K:function(){return a},GI:function(){return l},JB:function(){return d},ZQ:function(){return i},aX:function(){return s},ik:function(){return r},s6:function(){return o}});let i=75,r="".concat(i,"px"),o=10,a="navbar-view-backdrop",l="navbar-view-content",s="data-navbar-closed-toggle",d=()=>({type:"doc",content:[{type:"navbar",attrs:{image:{source:"image.custom"}},content:[{type:"navbarLinks",attrs:{horizontalAlign:"center"}},{type:"navbarButtons"}]}]})},66054:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var i=n(37243),r=n(27191),o=n(51161),a=n(98775);let l=i.hj.create({name:"focusHelpers",addCommands:()=>({focusDelayed:()=>e=>{let{editor:t}=e;return requestAnimationFrame(()=>t.commands.focus()),!0},insertContentAndSelect:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n=>{let{chain:i,state:r}=n,{from:o,$from:a}=r.selection;return 0===a.parentOffset?i().insertContentAt({from:o-1,to:o},e,{updateSelection:!1}).selectInsertedNode(t).run():i().insertContent(e,{updateSelection:!1}).selectInsertedNode(t).run()}},focusMapped:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return i=>{let{tr:r,view:a}=i,l=r.mapping.map(e,n)+t;try{let e=(0,o.t)(r.doc.resolve(l));e&&r.setSelection(e),a.focus()}catch(e){console.error("[focusMapped] error selecting pos",l,e)}return!0}},selectInsertedNode:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=>{let{tr:n,view:i}=t,r=(0,o.G)(n);if(!r)return!1;let a=(0,o.t)(r,e);return!!a&&(n.setSelection(a),i.focus(),!0)}},selectNodeAtPos:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{state:i,tr:o,view:a}=n;try{o.setSelection(r.qv.create(i.doc,e)),t&&o.scrollIntoView(),a.focus()}catch(t){console.warn("[selectNodeAtPos] Error selecting node",e,t)}return!0}},selectInsideNodeAtPos:(e,t)=>n=>{let{tr:i,state:r}=n,a=r.doc.resolve(e),l=(0,o.t)(a,t);return!!l&&(i.setSelection(l),!0)},deleteSelectionAndSelectNear:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return t=>{let{tr:n,state:i}=t,{selection:r}=i;if(r.empty)return!1;n.deleteSelection().scrollIntoView();let o=(0,a.E)(n.doc.resolve(r.from),e);return o&&n.setSelection(o),!0}}})})},26714:function(e,t,n){"use strict";n.d(t,{EL:function(){return m},Jn:function(){return g},Od:function(){return h}});var i=n(37243),r=n(27191),o=n(52780),a=n(12971),l=n(40405),s=n(4490),d=n(69416),c=n(96236);let u=e=>e.isLeaf||["paragraph","table","tableRow","tableCell","gridLayout","gridCell","heading","title","card","cardLayoutItem","cardAccentLayoutItem","button","buttonGroup","gallery","blockquote","calloutBox","smartLayout","smartLayoutCell","toggle","navbar","navbarLinks"].includes(e.type.name),p=e=>e.isAtom||["gallery","card"].includes(e.type.name),h=e=>e.some(e=>e.spec.focusedNode),m=e=>e.some(e=>e.spec.isSelectingNode),g=i.hj.create({name:"focusedNodes",addProseMirrorPlugins(){let e=this.editor;return[new r.Sy({props:{decorations(t){var n;if(!e.isEditable||!(0,a.KB)(e)||(null===(n=document.activeElement)||void 0===n?void 0:n.tagName)==="IFRAME")return;let i=t.selection,h=[];return t.doc.nodesBetween(i.from,i.to,(e,t,n)=>{if(u(e)){let a=i instanceof d.hA&&"tableRow"===e.type.name&&i.getTableNode()===n&&i.isRowSelection()&&!i.isColSelection(),l=i instanceof d.hA&&(0,c.CU)(e)&&i.getTableNode()===e&&i.isSelectingAllCells(),s={focusedNode:!0,isSelected:i.from<=t,isFocusedInside:i.from>t||i.to<t+e.nodeSize,isSelectingNode:i instanceof r.qv&&i.node===e||a||l,isSelectingAround:p(e)&&i.from<=t&&i.to>=t+e.nodeSize&&!(i instanceof r.qv)},u=[s.focusedNode?"is-focused":"",s.isSelected?"is-selected":"",s.isFocusedInside?"is-focused-inside":"",s.isSelectingNode?"is-selecting-node":"",s.isSelectingAround?"is-selecting-around":""].join(" ");h.push(o.p.node(t,t+e.nodeSize,{class:u},s))}if((0,l.N5)(e)&&i.from<=t&&i.from<=t)return!1;if("table"===e.type.name&&i instanceof d.hA&&i.isColSelection()&&!i.isSelectingAllCells()){let n=i.$anchorCell.pos,{left:r}=s.rU.get(e).findCell(n-(t+1));h.push(o.p.node(t,t+e.nodeSize,{},{isColumnSelected:!0,colNumber:r}))}}),o.EH.create(t.doc,h)}}})]}})},83091:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let i=e=>e.some(e=>e.spec.isFocusedInside)},43911:function(e,t,n){"use strict";n.d(t,{$1:function(){return z},Jg:function(){return b},m8:function(){return I},xd:function(){return N},yV:function(){return A}});var i=n(37243),r=n(30240),o=n(24759),a=n(71383),l=n(52659),s=n(78112),d=n(31335),c=n(48105),u=n(48869),p=n(28817),h=n(12971),m=n(54563),g=n(42616),f=n(54317),x=n(20706),v=n(63053);let y=()=>r.VH.get("presentModeFlat"),b=(e,t)=>{let n=t.pos?e.state.doc.nodeAt(t.pos):null;return n&&A(n,t.cardId)},w=e=>{let{tr:t,editor:n,spotlight:i,bias:r=0,method:o="replace"}=e;t.setMeta(v.M,i);let a=v.M.getState(n.state);if(i.cardId||(0,u.D)({cardId:null,method:o,emitChange:!1}),a.cardId!==i.cardId&&i.cardId){(0,u.D)({cardId:i.cardId,method:o,emitChange:!1});let e=(0,f.Bw)(n,i.cardId);e&&t.setSelection(c.c.create(t.doc,e.pos,r))}n.commands.user({spotlight:i})},C=(e,t)=>{if(!t)return;let n=document.querySelector("".concat(e," ").concat((0,m.U8)(t)));n&&(null==n||n.classList.add("cardWiggle"),setTimeout(()=>{null==n||n.classList.remove("cardWiggle")},750))},k=(e,t)=>{let n=b(e,t),i=n&&t.cardId&&t.pos&&N(e,t.cardId,t.pos,e=>A(e,t.cardId),!0).cardId!==t.cardId;return{isSpotlightingBlock:n,isSpotlightingFirstBlock:i}},j=e=>{switch(e.type.name){case"card":return!(0,g.HD)(e);case"toggle":return(0,x.fH)(e.attrs.id);default:return!1}},S=e=>{switch(e.type.name){case"card":return(0,g.Nn)(e.attrs.id,!0),!0;case"toggle":return(0,x.xB)(e.attrs.id,!1),!0;default:return!1}},A=(e,t)=>{switch(e.type.name){case"paragraph":case"heading":case"title":case"math_display":case"codeBlock":return e.textContent.trim().length>0||e.content.content.some(e=>"text"!==e.type.name);case"calloutBox":case"blockquote":case"bullet":case"numbered":case"todo":case"embed":case"video":case"image":case"mediaPlaceholder":case"gallery":case"drawing":case"diagram":case"chart":case"contributors":case"tableOfContents":case"toggleSummary":case"table":case"buttonGroup":case"gridCell":case"smartLayoutCell":return!0;case"toggle":return!(0,x.fH)(e.attrs.id);case"card":{let n=(0,s.X9)((0,a.bh)().getState()).parents[e.attrs.id].slice(-1)[0];if(y())return!0===(0,g.HD)(e)&&!1===(0,g.HD)(n);return n===t}default:return!1}},I=e=>{switch(e.type.name){case"toggle":return(0,x.fH)(e.attrs.id);case"card":return!(0,g.HD)(e);case"footnote":case"gallery":case"gridCell":case"smartLayoutCell":case"table":case"cardNotes":case"blockquote":case"calloutBox":return!1;default:return!0}},z=i.hj.create({name:"spotlight",addOptions:()=>({scrollerSelector:"body"}),addCommands(){var e=this;return{syncSpotlightAndScroll:e=>{let{spotlight:t,scroll:n,scrollOffset:i,isFollowing:r=!1}=e;return e=>{let{editor:a,view:l,tr:s}=e,{pos:c,cardId:u}=t,p=v.M.getState(a.state).cardId!==u;if(c){let e=l.state.doc.nodeAt(c),t=l.nodeDOM(c);if(e&&t instanceof HTMLElement){console.debug("[Spotlight.syncSpotlight] Scrolling to specific card at pos: ".concat(c),t);let n=(0,d.KH)(e)&&e.attrs.id===u;setTimeout(()=>requestAnimationFrame(()=>{n?T({}):_({element:t})}),p?m.id:0)}}else if(null==n?void 0:n.pos){let{pos:e,pct:t}=n;setTimeout(()=>requestAnimationFrame(()=>{a.commands.scrollToPositionInCard(e,t||void 0,i)}),p?m.id:0)}return(0,o.p7)({following:r}),(0,o.Pp)({cardId:u}),w({editor:a,tr:s,spotlight:{pos:c,cardId:u}}),!0}},spotlightCardById:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{let{editor:i,view:r}=n,o=v.M.getState(i.state),a=(0,f.Bw)(i,e);if(!a)return!0;let l=i.state.doc.resolve(a.pos),s=l.depth>1&&y(),d=s?(0,m.AQ)(i.state.doc,a.pos):a;if(d){let n=o.cardId!==e;if(s){(0,g.Nn)(e,!1),(0,m.pE)({pos:l.pos,editor:i});let t=r.nodeDOM(a.pos);t instanceof HTMLElement&&setTimeout(()=>requestAnimationFrame(()=>{_({element:t,behavior:"smooth"})}),n?m.id:0)}return t&&y()?i.commands.spotlightNextBlock(!1,{pos:a.pos,cardId:e}):i.commands.syncSpotlightAndScroll({spotlight:{pos:null,cardId:d.node.attrs.id}})}return!0}},spotlightCurrentCard:()=>e=>{let t,{editor:n,tr:i}=e,r=()=>{console.warn("[Spotlight.spotlightCurrentCard] Couldnt find a card to spotlight, so using first card.");let e=n.view.state.doc.nodeAt(1);return e&&(0,d.KH)(e)?w({editor:n,tr:i,spotlight:{pos:null,cardId:e.attrs.id}}):console.error("[Spotlight.spotlightCurrentCard] nodeAt(1) is unexpectedly not a card. Cannot spotlight"),!0};if(!document.querySelector(this.options.scrollerSelector))return r();let o=n.state.selection.from,a=o&&n.view.coordsAtPos(o);if(a&&a.top<window.innerHeight&&a.bottom>0)console.debug("%c [Spotlight.spotlightCurrentCard] Using cursor pos","background-color: deeppink",{posToUse:t=o});else{let e=(0,h.Je)(n,this.options.scrollerSelector,135).pos;console.debug("%c [Spotlight.spotlightCurrentCard] Using top center pos","background-color: deeppink",{posToUse:t=null==e?void 0:e.pos})}(!t||t<2)&&console.warn("%c [Spotlight.spotlightCurrentCard] Using fallback pos","background-color: deeppink",{posToUse:t=2});let l=y()?(0,m.AQ)(n.state.doc,t):(0,m.J9)(n,t,!1);return l&&l.pos?(y()&&(0,m.pE)({editor:n,pos:t}),w({editor:n,tr:i,spotlight:{pos:null,cardId:l.node.attrs.id}}),!0):r()},ascendUpToParentCard:function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return n=>{let{editor:r,view:a,tr:l}=n,s=v.M.getState(r.state),c=s.pos;if(!c){let t=(0,h.Je)(r,e.options.scrollerSelector,window.innerHeight/2).pos;c=null==t?void 0:t.pos}if(!c)return!1;let u=r.view.state.doc.nodeAt(c),p=(0,m.J9)(r,c,!1);if(y())return!!p&&!!t&&(C(e.options.scrollerSelector,s.cardId),!0);if(!p)return!1;let g=(0,i.qv)(r.state.doc.resolve(p.pos),d.KH);if(!g)return p&&t&&C(e.options.scrollerSelector,p.node.attrs.id),!1;{let e=a.nodeDOM(p.pos);if(!e)return console.warn("[Spotlight.ascendUpToParentCard] Cant find dom node",{domNode:e,presentingCard:p,parentOfPresentingCard:g,node:u,lastSpotlight:s}),!1;let t=g.node.attrs.id,{isSpotlightingBlock:n}=k(r,s);if(n)return r.commands.spotlightNextBlock(!1,{pos:g.pos,cardId:t});(0,o.Pp)({cardId:t}),w({editor:r,tr:l,spotlight:{pos:null,cardId:t}}),M(_,m.nY)({element:e})}return!0}},descendIntoCurrentCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"replace";return n=>{let{editor:i,tr:r}=n,o=v.M.getState(i.state),a=e||o.pos;if(y())return i.commands.spotlightExpandCard(a);if(!a)return!0;let l=i.view.state.doc.nodeAt(a);if(!(l&&(0,d.KH)(l)&&l.attrs.id!==o.cardId))return!0;let s=l.attrs.id,{isSpotlightingBlock:c}=k(i,o);return(console.debug("[Spotlight.descendIntoCurrentCard]",{node:l,isSpotlightingBlock:c}),c)?i.commands.spotlightNextBlock(!1,{pos:a,cardId:s}):(w({editor:i,tr:r,spotlight:{pos:null,cardId:s},method:t}),setTimeout(()=>{requestAnimationFrame(()=>{T({})})},m.id),!0)}},spotlightCollapseCard:e=>t=>{let{editor:n,tr:i}=t;if(!y())return n.commands.ascendUpToParentCard();let r=n.view.state.doc.nodeAt(e);if(!r||!(0,d.KH)(r))return console.warn("[Spotlight.spotlightCollapseCard] pos does not resolve to a card node. This is a noop",e),!0;let o=v.M.getState(n.state),a=r.attrs.id;return(0,g.Nn)(a,!0),w({editor:n,tr:i,spotlight:o}),(0,l.cC)("editor").scrollElementIntoView({element:n.view.nodeDOM(e),attempts:0,offsetFromTop:null}),!0},spotlightCollapseNearestExpandableNode:e=>t=>{let{editor:n,tr:r}=t,o=v.M.getState(n.state),a=e||n.state.selection.from,s={pos:a,node:n.view.state.doc.nodeAt(a)};if(!s.node||!j(s.node)){let e=(0,i.qv)(n.state.doc.resolve(a),j);s.node=(null==e?void 0:e.node)||null,s.pos=(null==e?void 0:e.pos)||0}let d=s.pos&&(0,m.AQ)(n.state.doc,s.pos);if(!s.node||!s.pos||!d||d.node.attrs.id===s.node.attrs.id)return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] pos does not resolve to a valid collapsible node. This is a noop",s.pos),!1;if(!(d.pos<=s.pos&&d.pos+d.node.nodeSize>=s.pos))return console.warn("[Spotlight.spotlightCollapseNearestExpandableNode] posToUse is outside of the presenting card. This is a noop",s.pos),!1;console.debug("[Spotlight.spotlightCollapseNearestExpandableNode]",{result:s});let u=S(s.node);return u&&((0,l.cC)("editor").scrollElementIntoView({element:n.view.nodeDOM(s.pos),attempts:0,offsetFromTop:null}),s.pos===n.state.selection.from?n.commands.reHighlightExpandableNode():r.setSelection(c.c.create(n.state.doc,s.pos)),b(n,o)&&w({editor:n,tr:r,spotlight:{pos:s.pos,cardId:d.node.attrs.id}})),u},spotlightExpandCard:e=>t=>{let{editor:n}=t,i=v.M.getState(n.state),r=e&&n.view.state.doc.nodeAt(e);if(!r||!(0,d.KH)(r))return console.warn("[Spotlight.spotlightExpandCard] pos does not resolve to a card node. This is a noop",e),!0;let o=r.attrs.id,{isSpotlightingBlock:a}=k(n,i);return(0,g.Nn)(o,!1),console.debug("[Spotlight.spotlightExpandCard]",{node:r,isSpotlightingBlock:a}),setTimeout(()=>{a?n.commands.spotlightNextBlock(!1,{pos:e,cardId:o},"smooth"):n.commands.scrollToPositionInCard(e,0,50)},m.nY),!0},spotlightNextExpandedCard:e=>t=>{let{editor:n,commands:i}=t,r=v.M.getState(n.state);if(!r.pos||!r.cardId)return!0;let o=(0,m.AQ)(n.state.doc,r.pos),a=(0,f._O)(n,r.pos);if(!o||!a)return!0;let l={node:null,pos:null,cardId:null},s=r.pos;return(n.state.doc.descendants((t,i,r)=>{if(!e&&l.pos)return!1;let o=!(0,g.HD)(t);if(!((0,d.KH)(t)&&o&&(e?i<s:i>s)))return o;let c=t!==a.node||!e;if(!c){let{isSpotlightingFirstBlock:e}=k(n,{pos:s,cardId:t.attrs.id});c=!e}return c&&(l.node=t,l.pos=i,l.cardId=t.attrs.id),o}),l.pos&&l.cardId)?i.spotlightNextBlock(!1,{pos:l.pos,cardId:l.cardId}):(C(this.options.scrollerSelector,o.node.attrs.id),!0)},spotlightNextCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return n=>{let{editor:r,commands:a,tr:l}=n,s=v.M.getState(r.state),c=s.pos,{isSpotlightingBlock:u,isSpotlightingFirstBlock:p}=k(r,s);if(u&&y())return a.spotlightNextExpandedCard(e);if(!c){let e=(0,f.Bw)(r,s.cardId);c=null==e?void 0:e.pos}if(!c)return console.warn("[Spotlight.spotlightNextCard] Could not find posToUse",{lastSpotlight:s}),!1;let h=r.view.state.doc.nodeAt(c),g=!!(h&&e&&u&&!p&&h.attrs.id!==s.cardId),x=h&&s.cardId&&h.attrs.id===s.cardId?{node:h,pos:c}:(0,i.qv)(r.state.doc.resolve(c),d.KH),b=g?x:(null==x?void 0:x.pos)?L(r,x.pos,e):null;if(b&&null!==b.pos){console.debug("[Spotlight.spotlightNextCard] Found next card:",{next:b,posToUse:c,isSpotlightingBlock:u});let n=b.node.attrs.id,i=b.pos;if(u)return r.commands.spotlightNextBlock(!1,{pos:i,cardId:n});(0,o.Pp)({cardId:n}),w({editor:r,tr:l,bias:e?1:-1,spotlight:{pos:null,cardId:n}});let a=s.cardId!==n,d="top"==t?T:R;null!==t&&setTimeout(()=>{d({sync:!0,behavior:"auto"})},a?m.id:0)}else console.debug("[Spotlight.spotlightNextCard] No next node. Will attempt to ascendUp",{lastSpotlight:s,posToUse:c,node:h}),r.commands.ascendUpToParentCard();return!0}},spotlightNextBlock:(e,t,n)=>i=>{let{editor:r,tr:a}=i,l=v.M.getState(r.state);if(!l.cardId)return!0;let s=r.state.selection,u=s instanceof c.c,p=u&&(-1===s.side&&e||1===s.side&&!e)?-1:0,h=u?e?s.to+p:s.from+p:void 0,g=(null==t?void 0:t.cardId)||l.cardId,f=(null==t?void 0:t.pos)||l.pos||h,x=u&&null===l.pos&&(0,d.KH)(s.node)&&1===s.$from.depth,{pos:b,cardId:C,domNode:k}=f&&!x?N(r,g,f,A,e):E(r,l.cardId,this.options.scrollerSelector,e);if(null!==b&&k instanceof HTMLElement){var j;let t=y()?null===(j=(0,m.AQ)(r.state.doc,b))||void 0===j?void 0:j.node.attrs.id:C;if(!t)return!0;(0,o.Pp)({cardId:t}),console.debug("%c [Spotlight.spotlightNextBlock]","background-color: deeppink",{prevCardId:l.cardId,cardId:t,pos:b}),setTimeout(()=>{_({element:k,behavior:n})},l.cardId===t?0:m.id),w({editor:r,tr:a,bias:e?1:-1,spotlight:{pos:b,cardId:t}})}else r.commands.ascendUpToParentCard();return!0},spotlightNodeAtPos:e=>t=>{let{editor:n,tr:i}=t,r=v.M.getState(n.state);if(!r.cardId)return!1;let o=r.cardId,a=(0,h.nv)(n.state.doc.resolve(e),e=>A(e)),l=a.reverse().find((e,t)=>!(t!==a.length-1&&I(e.node)));return!!l&&(l.pos!==r.pos?(w({editor:n,tr:i,spotlight:{pos:l.pos,cardId:o}}),!0):n.commands.turnOffSpotlight())},turnOffSpotlight:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{editor:n,tr:i}=t,r=v.M.getState(n.state);return w({editor:n,tr:i,spotlight:{pos:null,cardId:e?null:r.cardId}}),!0}},scrollToPositionInCard:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{let{editor:r}=i,o=(0,p.N_)((0,h.fW)(r,e)),a=null==o?void 0:o.getBoundingClientRect();if(!o||!a)return!0;let l=(t||0)*a.height;return console.debug("%c [Spotlight.scrollToPositionInCard]","background-color: deeppink",JSON.stringify({pos:e,offset:n-l}),o),(0,p.wO)({element:o,color:"deeppink",requiredCookie:"spotlightScrollDebug=true"}),_({element:o,offset:n-l}),!0}},scrollToNodeWithPin:(e,t)=>()=>(console.debug("%c [Spotlight.scrollToNodeWithPin] WITH NODE","background-color: deeppink",{scrollToNode:e}),M(_,m.nY,0)({element:e,offset:t}),!0)}},addProseMirrorPlugins(){return[(0,v.O)((e,t)=>A(e,t),this.editor)]}}),L=function(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.view.state.doc.nodeAt(t),a=o&&(0,d.KH)(o)?{node:o,pos:t}:(0,i.qv)(e.state.doc.resolve(t),d.KH);if(!a)return;let l=e.state.doc.resolve(r?a.pos:a.pos+(null===(n=a.node)||void 0===n?void 0:n.nodeSize)),s=r?l.nodeBefore:l.nodeAfter;if(!s)return;let c=r?l.pos-s.nodeSize:l.pos;if((0,d.KH)(s))return console.debug("[Spotlight.findNextDirectSiblingCard]",{nextNode:s,nextPos:c}),{node:s,pos:c}},E=function(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={node:null,pos:null,cardId:null,domNode:null},a=(null===(i=(0,h.Je)(e,n,135).pos)||void 0===i?void 0:i.inside)||null,l=a?e.state.doc.nodeAt(a):null;if(!a||!l)return o;if(l.attrs.id===t)return N(e,t,a,e=>A(e,t),r);let s=e.state.doc.resolve(a),d=(0,f._O)(e,s.before());if(!d)return o;let c=s.before(d.depth+2),u=e.state.doc.nodeAt(c);if(u&&A(u,t)){let t=e.state.doc.resolve(c);return o.pos=t.pos,o.node=u,o.cardId=null==d?void 0:d.node.attrs.id,o.domNode=e.view.nodeDOM(o.pos),o}return N(e,t,c,e=>A(e,t),r)},N=function(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a={node:null,pos:null,cardId:null,domNode:null},l=e.state.doc.resolve(n),s=e.view.state.doc.nodeAt(n),c=(0,i.qv)(l,e=>(0,d.KH)(e)&&e.attrs.id===t),u=s&&(0,d.KH)(s)&&(null==s?void 0:s.attrs.id)===t?{node:s,pos:n}:c;if(!u)return console.debug("[Spotlight.findNextNode] - No card found:",{cardId:t,from:n,node:s}),a;let p=(e,t)=>{let i=e.attrs.id;e.descendants((l,s)=>{let d=t+s+1,c=r(l,i)&&(o?d<n:d>n);return(!!o||!a.node)&&(c&&(a.node=l,a.pos=d,a.cardId=e.attrs.id),I(l))})};p(u.node,u.pos);let h=u.pos;for(;null===a.pos;){let t=L(e,h,o);if(t)p(t.node,t.pos),h=t.pos;else break}return null!==a.pos&&(a.domNode=e.view.nodeDOM(a.pos)),console.debug("[Spotlight.findNextNode]",{result:a}),a},M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i=>{let r;let o={...i,sync:!0,behavior:"auto"};e(o);let a=!1;Promise.race([new Promise(e=>setTimeout(()=>e(!1),n+t+300)),new Promise(e=>{r=()=>e(!0),i.element.addEventListener("transitionend",r)})]).then(e=>{console.debug("[scrollTo withDurationPin] transitionend race result",e),a=!0}).finally(()=>{i.element.removeEventListener("transitionend",r)});let l=+new Date,s=()=>requestAnimationFrame(()=>{e(o),(+new Date-l<t+n||!a)&&s()});setTimeout(s,n)}},_=e=>{var t;let{element:n,sync:i=!1,behavior:r="smooth",offset:o}=e;if(!(0,p.cd)(n)){let e=n.querySelector("[data-content-reference]");if(!e||!(0,p.cd)(e))return;n=e}let a=(0,l.cC)("editor");if(!(null===(t=a.scroller)||void 0===t?void 0:t.clientHeight))return;let s=(0,p.LY)(n,a.scrollSelector),d=n.clientHeight/2,c=.45*a.scroller.clientHeight-d;a.scrollTo({top:s-Math.max(void 0!==o?o:c,125),sync:i,behavior:r})},T=e=>{let{sync:t=!1,behavior:n="smooth"}=e;(0,l.cC)("editor").scrollTo({top:0,behavior:n,sync:t})},R=e=>{let{sync:t=!1,behavior:n="smooth"}=e,i=(0,l.cC)("editor"),r=i.scroller;r&&i.scrollTo({top:r.scrollHeight,behavior:n,sync:t})}},63053:function(e,t,n){"use strict";n.d(t,{M:function(){return m},O:function(){return f}});var i=n(73200),r=n(38564),o=n(27191),a=n(52780),l=n(71383),s=n(65702),d=n(78112),c=n(31335),u=n(12971),p=n(43911);let h=null,m=new o.H$("spotlight"),g=(e,t,n)=>{if(null===t.pos)return a.EH.create(e.doc,[]);let r=[],o=e.doc.nodeAt(t.pos);o&&(0,c.KH)(o)&&!n(o,t.cardId)?r.push(a.p.node(t.pos,t.pos+o.nodeSize,{class:"presenting-card"})):o&&n(o,t.cardId)&&r.push(a.p.node(t.pos,t.pos+o.nodeSize,{class:"spotlight-block"}));let l=t.pos;return e.doc.descendants((e,o)=>(n(e,t.cardId)&&r.push(a.p.node(o,o+e.nodeSize,{class:(0,i.cx)("spotlightable",o>l&&"after-spotlight")})),(0,p.m8)(e)||(0,c.KH)(e))),a.EH.create(e.doc,r)},f=(e,t)=>new o.Sy({key:m,state:{init:(t,n)=>{let i={pos:null,cardId:""};return{...i,decorations:g(n,i,e)}},apply(t,n,i,o){let a=r.Gt.getState(o),l=t.getMeta(m),s=a&&a.isChangeOrigin;if(l||s){let t=l||n;return{...t,decorations:g(o,t,e)}}let d=n.decorations.map(t.mapping,t.doc);return{...n,decorations:d}}},props:{attributes:t=>{let n=m.getState(t);if(!n||null===n.pos)return{class:""};let i=t.doc.nodeAt(n.pos);return i&&e(i,n.cardId)?{class:"spotlight-active"}:{class:""}},decorations:e=>{let t=m.getState(e);return t?t.decorations:null},handleDOMEvents:{click(e,n){if(n.detail>1)return;let i=e.state.selection;if(i instanceof o.Bs&&!i.empty)return;let r=(0,l.bh)(),a=r.getState(),s=(0,d.k8)(a);if(!(!(s&&(0,p.Jg)(t,s))||(0,d.JA)(a))){if((0,d.Od)(a)){r.dispatch((0,d.kI)());return}h=setTimeout(()=>{let i=m.getState(e.state);if(!(null==i?void 0:i.cardId))return;let r=e.posAtDOM(n.target,0);null!==r&&!(r<1)&&e.state.doc.nodeAt(r)&&t.commands.spotlightNodeAtPos(r)},300)}},dblclick(){h&&clearTimeout(h)},contextmenu(e,n){let i=m.getState(e.state);if(!(null==i?void 0:i.cardId))return;let r=(0,l.bh)().getState();if((0,d.JA)(r))return;let o=e.posAtDOM(n.target,0),a=t.state.doc.resolve(o),c=e.state.doc.nodeAt(o),[h]=c&&(0,p.yV)(c)?[{pos:o,start:a.start(a.depth+1)}]:(0,u.nv)(t.state.doc.resolve(o),e=>(0,p.yV)(e));s.pw.emit(s.TI.OPEN_PRESENT_MODE_CONTEXT_MENU,{e:n,cardId:i.cardId,pos:h?h.start:null})}}}})},23345:function(e,t,n){"use strict";n.d(t,{i:function(){return _}});var i=n(37243),r=n(27210),o=n(72205),a=n(44170),l=n(4490),s=n(1338),d=n(52322),c=n(28535),u=n(62614),p=n(73200),h=n(42946),m=n(49929),g=n(64253),f=n(87254),x=n(68015),v=n.n(x),y=n(2784),b=n(33886),w=n(4433),C=n(38799),k=n(51161),j=n(9237),S=n(40382),A=n(45075),I=n(3063),z=n(92179);let L=e=>{let{colWidths:t}=e;return(0,d.jsxs)("colgroup",{children:[(0,d.jsx)("col",{style:{width:"0%"}}),t.map((e,t)=>(0,d.jsx)("col",{className:"col-width-control",style:{width:"".concat(e,"%")}},t))]})};L.displayName="ColGroup";let E=e=>{var t;let n=(0,C.TZ)(),{node:i,editor:o,getPos:a,decorations:x,updateAttributes:I}=e,{colMinPercent:E,newColSize:M}=o.schema.nodes.table.spec,_=(0,s.Ux)(i.attrs.colWidths,M,E),T=l.rU.get(i),R=x.some(e=>e.spec.isFocusedInside),H=null===(t=x.find(e=>e.spec.isColumnSelected))||void 0===t?void 0:t.spec.colNumber,{colWidths:P}=i.attrs,O=(0,S.gF)();(0,y.useEffect)(()=>{T.width!==P.length&&setTimeout(()=>{I({colWidths:(0,s.RS)(T.width)})},0)},[T.width,P,I]);let D=(0,y.useCallback)(e=>a()+1+T.positionAt(0,e,i),[a,i,T]),W=(0,y.useCallback)(e=>{let t=D(e+1)+1;o.chain().addColumnAfter(e).command(e=>{let{tr:n}=e,i=(0,k.t)(n.doc.resolve(t));return i&&n.setSelection(i),!0}).run()},[o,D]),F=(0,y.useCallback)(()=>{W(T.width-1)},[W,T.width]),B=v()(i.attrs.colWidths.reduce((e,t)=>e+t,0),20);return O?(0,d.jsx)(A.lO,{as:"div",...e,...i.attrs,children:(0,d.jsxs)(c.xu,{w:"fit-content",overflowX:n?"auto":void 0,position:"relative",width:"100%",className:(0,p.cx)("table-wrapper",w.IR),"data-selection-ring":!0,children:[(0,d.jsxs)("table",{style:{width:n?"max-content":"".concat(B,"%"),minWidth:n?"100%":void 0,maxWidth:n?"200vw":void 0,tableLayout:n?"auto":"fixed",position:"relative"},children:[(0,d.jsx)(L,{cols:T.width,colWidths:P}),(0,d.jsx)("thead",{children:(0,d.jsx)(N,{numColumns:T.width,selectedColumn:H,getColumnPosition:D,...e})}),(0,d.jsx)(r.ms,{as:"tbody",className:"table-content"})]}),(0,d.jsx)(z.A,{...e,"data-testid":"select-table-button",onClick:()=>{let e=D(0);o.chain().focus().selectTable(e).run()},label:f.ag._({id:"3xRGMR"})}),R&&(0,d.jsxs)(c.xu,{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,d.jsx)(g.kH,{placement:"right",label:f.ag._({id:"AgvHni"}),children:(0,d.jsx)(u.z,{position:"absolute",left:"100%",top:"0",height:"100%",onClick:F,onMouseDown:j.br,minWidth:"0",width:"auto",isDisabled:!_,zIndex:1,"data-testid":"add-col-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:b.wY,backgroundColor:"var(--clickable-background-color)",ml:1,w:5,children:(0,d.jsx)(m.G,{icon:h.r8p})})}),(0,d.jsx)(g.kH,{placement:"bottom",label:f.ag._({id:"qZd/ph"}),children:(0,d.jsx)(u.z,{position:"absolute",left:"0",top:"100%",width:"100%",onClick:()=>{let e=a()+1,t=T.height-1,n=T.width-1,r=e+T.positionAt(t,n,i);o.chain().focus(r).addRowAfter().run(),requestAnimationFrame(()=>o.chain().focus(r).goToNextCell().run())},onMouseDown:j.br,minHeight:"0",height:6,zIndex:4,"data-testid":"add-row-end-button",size:"xs",shadow:"sm",variant:"unstyled",color:"var(--body-color)",className:b.wY,mt:1,children:(0,d.jsx)(m.G,{icon:h.r8p})})})]})]})}):null},N=e=>{let{numColumns:t,selectedColumn:n,getColumnPosition:i,...r}=e,{editor:o}=r,a=(0,y.useCallback)(e=>{let t=i(e);o.chain().focus().selectColumn(t).run()},[o,i]);if(!t)return null;let l=Array.from(Array(t).keys());return(0,d.jsxs)("tr",{contentEditable:!1,suppressContentEditableWarning:!0,children:[(0,d.jsx)("th",{style:{padding:0}}),l.map(e=>(0,d.jsx)(M,{colNumber:e,selectColumn:a,isSelected:e===n,...r},e))]})},M=(0,y.memo)(e=>{let{colNumber:t,selectColumn:n,...i}=e,{decorations:r}=i,{colHover:o}=(0,I.Sz)(r),{colFocus:a}=(0,I.vz)(r),l=(0,y.useCallback)(()=>n(t),[t,n]);return(0,d.jsx)("th",{style:{position:"relative",padding:0,border:0},className:"table-col-control",children:(0,d.jsx)(z.A,{...i,handlePlacement:"top",label:f.ag._({id:"K3GOZ1"}),zIndex:"3",isVisible:o===t||a===t,onClick:l,"data-test-column-control":t})},t)});M.displayName="SelectColumnHeader";let _=i.NB.create({name:"table",priority:o.a.Table,containerHandle:!0,addNodeView:()=>(0,r.fW)(E,{update:a.E7}),addOptions:()=>({resizable:!0,handleWidth:10,colMinPercent:10,newColSize:20,lastColumnResizable:!1,allowTableNodeSelection:!0}),content:"tableRow+",tableRole:"table",isolating:!0,allowGapCursor:!1,group:"cardBlock layoutBlock footnoteBlock calloutBlock",parseHTML:()=>[{tag:"table"}],renderHTML(e){let{HTMLAttributes:t}=e;return["table",(0,i.P1)(this.options.HTMLAttributes,t),["tbody",0]]},addAttributes(){let e="colWidths";return{colWidths:{default:[],renderHTML:t=>{let{colWidths:n}=t;return n&&n.length?{[e]:JSON.stringify(n)}:{}},parseHTML:t=>{let n=t.getAttribute(e);if(n)try{let e=JSON.parse(n);if(Array.isArray(e))return(0,s.jD)(e),e}catch(e){}let i=t.querySelector("tr");if(!i)return[];let r=0;return i.childNodes.forEach(e=>{"TD"===e.nodeName&&r++}),(0,s.RS)(r)}},fullWidthBlock:{default:!1}}},addCommands(){return{insertTable:function(){let{rows:e=3,cols:t=3,withHeaderRow:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{let{dispatch:r,editor:o,commands:a}=i;if(!r)return!1;let l=function(e,t,n,i,r){let o=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;let t={};return Object.keys(e.nodes).forEach(n=>{let i=e.nodes[n];i.spec.tableRole&&(t[i.spec.tableRole]=i)}),e.cached.tableNodeTypes=t,t}(e),a=[],l=[];for(let e=0;e<n;e+=1){let e=o.cell.createAndFill();e&&l.push(e)}let d=[];for(let e=0;e<t;e+=1)d.push(o.row.createChecked(null,i&&0===e?a:l));return o.table.createChecked({colWidths:(0,s.RS)(n)},d)}(o.schema,e,t,n);return a.insertContentAndSelect(l.toJSON())}},addColumnBefore:e=>t=>{let{state:n,dispatch:i,tr:r}=t;if(!(0,l.Lw)(n.selection)||!i)return!1;let{table:o,tableStart:a}=(0,l.zN)(n.selection);return(0,l.Wf)(r,{table:o,col:e,tableStart:a,newColSize:this.options.newColSize,colMinPercent:this.options.colMinPercent})},addColumnAfter:e=>t=>{let{state:n,dispatch:i,tr:r}=t;if(!(0,l.Lw)(n.selection)||!i)return!1;let{table:o,tableStart:a}=(0,l.zN)(n.selection);return(0,l.Wf)(r,{table:o,col:e+1,tableStart:a,newColSize:this.options.newColSize,colMinPercent:this.options.colMinPercent})},equalizeColumns:()=>e=>{let{state:t,dispatch:n,tr:i}=e;if(!(0,l.Lw)(t.selection)||!n)return!1;let{map:r,tableStart:o}=(0,l.zN)(t.selection);return i.setNodeMarkup(o-1,void 0,{colWidths:(0,s.RS)(r.width)}),!0},visualizeTable:()=>e=>{let{state:t,dispatch:n,tr:i}=e;if(!(0,l.Lw)(t.selection)||!n)return!1;let{map:r,tableStart:o}=(0,l.zN)(t.selection);return i.setNodeMarkup(o-1,void 0,{colWidths:(0,s.RS)(r.width)}),!0},deleteColumn:()=>e=>{let{state:t,dispatch:n,tr:i}=e;return!!n&&(0,l.oU)(t.selection,i,n)},addRowBefore:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.z2)(t,n)},addRowAfter:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.dl)(t,n)},deleteRow:()=>e=>{let{state:t,dispatch:n,tr:i}=e;return(0,l.A_)(t.selection,i,n)},deleteTable:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.Lh)(t.selection,n,i)},deleteTableWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.Fw)(t.selection,n,i)},deleteColWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l.mh)(t.selection,n,i)},deleteRowWhenEmpty:()=>e=>{let{state:t,tr:n,dispatch:i}=e;return!!i&&(0,l._W)(t.selection,n,i)},mergeCells:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.JX)(t,n)},splitCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.Cr)(t,n)},toggleHeaderColumn:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.sr)(t,n)},toggleHeaderRow:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.lm)(t,n)},toggleHeaderCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.II)(t,n)},mergeOrSplit:()=>e=>{let{state:t,dispatch:n}=e;return!!(0,l.JX)(t,n)||(0,l.Cr)(t,n)},setCellAttribute:(e,t)=>n=>{let{state:i,dispatch:r}=n;return(0,l.wb)(e,t)(i,r)},goToNextCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.nA)(1)(t,n)},goToPreviousCell:()=>e=>{let{state:t,dispatch:n}=e;return(0,l.nA)(-1)(t,n)},fixTables:()=>e=>{let{state:t,dispatch:n}=e;return n&&(0,l.tp)(t),!0},setCellSelection:e=>t=>{let{tr:n,dispatch:i}=t;if(i){let t=l.Xc.create(n.doc,e.anchorCell,e.headCell);n.setSelection(t)}return!0}}},addKeyboardShortcuts(){let e=()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.deleteTableWhenEmpty(),()=>t.deleteRowWhenEmpty(),()=>t.deleteColWhenEmpty()]});return{Tab:()=>!!this.editor.commands.goToNextCell()||!!this.editor.can().addRowAfter()&&this.editor.chain().addRowAfter().goToNextCell().run(),"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:e,"Mod-Backspace":e,Delete:e,"Mod-Delete":e}},addProseMirrorPlugins(){return this.options.resizable,[(0,l.VH)({handleWidth:this.options.handleWidth,colMinPercent:this.options.colMinPercent,lastColumnResizable:this.options.lastColumnResizable}),(0,l.G3)({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){var t,n;let r={name:e.name,options:e.options,storage:e.storage};return{colMinPercent:null===(t=e.options)||void 0===t?void 0:t.colMinPercent,newColSize:null===(n=e.options)||void 0===n?void 0:n.newColSize,tableRole:(0,i.nU)((0,i.Nl)(e,"tableRole",r))}}})},69416:function(e,t,n){"use strict";n.d(t,{FK:function(){return p},fI:function(){return u},hA:function(){return d}});var i=n(30764),r=n(27191),o=n(52780),a=n(86882),l=n(60863),s=n(81472);class d extends r.Y1{map(e,t){let n=e.resolve(t.map(this.$anchorCell.pos)),i=e.resolve(t.map(this.$headCell.pos));if((0,s.Fn)(n)&&(0,s.Fn)(i)&&(0,s.yL)(n,i)){let e=this.$anchorCell.node(-1)!=n.node(-1);return e&&this.isRowSelection()?d.rowSelection(n,i):e&&this.isColSelection()?d.colSelection(n,i):new d(n,i)}return r.Bs.between(n,i)}content(){let e=this.$anchorCell.node(-1),t=l.r.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},a=[];for(let n=r.top;n<r.bottom;n++){let l=[];for(let i=n*t.width+r.left,a=r.left;a<r.right;a++,i++){let n=t.map[i];if(!o[n]){o[n]=!0;let i=t.findCell(n),a=e.nodeAt(n),d=r.left-i.left,c=i.right-r.right;if(d>0||c>0){let e=a.attrs;d>0&&(e=(0,s.H6)(e,0,d)),c>0&&(e=(0,s.H6)(e,e.colspan-c,c)),a=i.left<r.left?a.type.createAndFill(e):a.type.create(e,a.content)}if(i.top<r.top||i.bottom>r.bottom){let e=(0,s.fi)(a.attrs,"rowspan",Math.min(i.bottom,r.bottom)-Math.max(i.top,r.top));a=i.top<r.top?a.type.createAndFill(e):a.type.create(e,a.content)}l.push(a)}}a.push(e.child(n).copy(i.HY.from(l)))}let d=this.isColSelection()&&this.isRowSelection()?e:a;return new i.p2(i.HY.from(d),1,1)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.p2.empty,n=e.steps.length,o=this.ranges;if(0===t.size){if(this.isSelectingAllCells()){(0,a.Lh)(this,e);return}if(this.isRowSelection()){(0,a.A_)(this,e);return}if(this.isColSelection()){(0,a.oU)(this,e);return}}for(let r=0;r<o.length;r++){let{$from:a,$to:l}=o[r],s=e.mapping.slice(n);e.replace(s.map(a.pos),s.map(l.pos),r?i.p2.empty:t)}let l=r.Y1.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);l&&e.setSelection(l)}replaceWith(e,t){this.replace(e,new i.p2(i.HY.from(t),0,0))}getTableNode(){return this.$anchorCell.node(-1)}isSelectingAllCells(){return l.r.get(this.$anchorCell.node(-1)).map.length===this.ranges.length}everyCell(e){let t=!0;return this.forEachCell((n,i)=>{e(n,i)||(t=!1)}),t}forEachCell(e){let t=this.$anchorCell.node(-1),n=l.r.get(t),i=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let n=0;n<r.length;n++)e(t.nodeAt(r[n]),i+r[n])}isColSelection(){let e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);return!(Math.min(e,t)>0)&&Math.max(e+this.$anchorCell.nodeAfter.attrs.rowspan,t+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount}static colSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=l.r.get(e.node(-1)),i=e.start(-1),r=n.findCell(e.pos-i),o=n.findCell(t.pos-i),a=e.node(0);return r.top<=o.top?(r.top>0&&(e=a.resolve(i+n.map[r.left])),o.bottom<n.height&&(t=a.resolve(i+n.map[n.width*(n.height-1)+o.right-1]))):(o.top>0&&(t=a.resolve(i+n.map[o.left])),r.bottom<n.height&&(e=a.resolve(i+n.map[n.width*(n.height-1)+r.right-1]))),new d(e,t)}isRowSelection(){let e=l.r.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),i=e.colCount(this.$headCell.pos-t);return!(Math.min(n,i)>0)&&Math.max(n+this.$anchorCell.nodeAfter.attrs.colspan,i+this.$headCell.nodeAfter.attrs.colspan)==e.width}eq(e){return e instanceof d&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=l.r.get(e.node(-1)),i=e.start(-1),r=n.findCell(e.pos-i),o=n.findCell(t.pos-i),a=e.node(0);return r.left<=o.left?(r.left>0&&(e=a.resolve(i+n.map[r.top*n.width])),o.right<n.width&&(t=a.resolve(i+n.map[n.width*(o.top+1)-1]))):(o.left>0&&(t=a.resolve(i+n.map[o.top*n.width])),r.right<n.width&&(e=a.resolve(i+n.map[n.width*(r.top+1)-1]))),new d(e,t)}toJSON(){return{type:"CellSelection2",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new d(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return new d(e.resolve(t),e.resolve(n))}getBookmark(){return new c(this.$anchorCell.pos,this.$headCell.pos)}constructor(e,t=e){let n=e.node(-1),i=l.r.get(n),o=e.start(-1),a=i.rectBetween(e.pos-o,t.pos-o),s=e.node(0),d=i.cellsInRect(a).filter(e=>e!=t.pos-o);d.unshift(t.pos-o);let c=d.map(e=>{let t=n.nodeAt(e),i=e+o+1;return new r.xm(s.resolve(i),s.resolve(i+t.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=t,this.$anchorCell=e,this.$headCell=t}}if(!d.prototype.jsonID)try{r.Y1.jsonID("CellSelection2",d)}catch(e){}class c{map(e){return new c(e.map(this.anchor),e.map(this.head))}resolve(e){let t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&(0,s.yL)(t,n)?new d(t,n):r.Y1.near(n,1)}constructor(e,t){this.anchor=e,this.head=t,this.anchor=e,this.head=t}}function u(e){if(!(e.selection instanceof d))return null;let t=[];return e.selection.forEachCell((e,n)=>{t.push(o.p.node(n,n+e.nodeSize,{class:"selectedCell"}))}),o.EH.create(e.doc,t)}function p(e,t,n){let i,o;let a=(t||e).selection,s=(t||e).doc;if(a instanceof r.qv&&(o=a.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)i=d.create(s,a.from);else if("row"==o){let e=s.resolve(a.from+1);i=d.rowSelection(e,e)}else if(!n){let e=l.r.get(a.node),t=a.from+1,n=t+e.map[e.width*e.height-1];i=d.create(s,t+1,n)}}else a instanceof r.Bs&&function(e){let{$from:t,$to:n}=e;if(t.pos==n.pos||t.pos<t.pos-6)return!1;let i=t.pos,r=n.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,i++);for(let e=n.depth;e>=0&&!(n.before(e+1)>n.start(e));e--,r--);return i==r&&/row|table/.test(t.node(o).type.spec.tableRole)}(a)?i=r.Bs.create(s,a.from):a instanceof r.Bs&&function(e){let t,n,{$from:i,$to:r}=e;for(let e=i.depth;e>0;e--){let n=i.node(e);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){t=n;break}}for(let e=r.depth;e>0;e--){let t=r.node(e);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}return t!==n&&0===r.parentOffset}(a)&&(i=r.Bs.create(s,a.$from.start(),a.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}},1338:function(e,t,n){"use strict";n.d(t,{CO:function(){return m},GI:function(){return p},RS:function(){return o},Ux:function(){return h},Z7:function(){return g},jD:function(){return f}});var i=n(68015),r=n.n(i);let o=e=>{let t=r()(100/e,2),n=[];for(let i=0;i<e;i++)n.push(t);return n},a=(e,t,n,i)=>i?s(e,t,n):l(e,t),l=(e,t)=>{let n=0,i=[];for(let r=t+1;r<e.length;r++)n+=e[r],i.push(r);let r=[];for(let t=0;t<e.length;t++){if(!i.includes(t)){r.push(0);continue}let o=e[t];r.push(o/n)}return r},s=(e,t,n)=>{let i=0,r=[];for(let o=t+1;o<e.length;o++){let t=e[o];t>n&&(i+=t,r.push(o))}let o=[];for(let t=0;t<e.length;t++){if(!r.includes(t)){o.push(0);continue}let n=e[t];o.push(n/i)}return o},d=e=>{let t=e.reduce((e,t)=>e+t,0),n=[];for(let i=0;i<e.length;i++)n.push(e[i]/t);return n},c=(e,t,n)=>{let i=0,r=[];for(let o=0;o<e.length;o++){if(o===t)continue;let a=e[o];a>n&&(i+=a,r.push(o))}let o=[];for(let r=0;r<e.length;r++){if(r===t){o.push(0);continue}let a=e[r];if(a<=n){o.push(0);continue}o.push(a/i)}return o},u=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=0;for(let o=0;o<e.length;o++){let a=t*n[o];a<0&&(a=Math.max(i-e[o],a)),r+=a,e[o]+=a}return r},p=(e,t,n,i)=>{let r=[...e],o=e[t],l=o-i,s=e.reduce((e,n,r)=>r<t?e+n:r>t?e+i:e,0),d=n>0?Math.min(n,100-s-o):Math.max(-l,n),c=a(r,t,i,d>0),p=Math.abs(d),h=d>0,m=0;for(;p>.001;){let e=Math.min(p,1);h&&(e*=-1);let n=u(r,e,c,i);if(r[t]-=n,p-=Math.abs(n),c=a(r,t,i,d>0),++m>1e3)break}return f(r,i),r},h=(e,t,n)=>m(e,e.length,t,n).length!==e.length,m=(e,t,n,i)=>{let r=n,o=[...e];o.splice(t,0,0);let a=c(o,t,i),l=!1;for(;r>.001;){if(a.every(e=>0===e)){l=!0;break}let e=u(o,-Math.min(r,1),a,i);o[t]-=e,a=c(o,t,i),r-=Math.abs(e)}return l?e:(f(o,i),o)},g=(e,t)=>{let n=0,i=t.sort((e,t)=>t-e),r=[...e];i.forEach(t=>{n+=e[t],r.splice(t,1)});let o=d(r);for(;n>.001;){let e=u(r,Math.min(n,1),o);o=d(r),n-=Math.abs(e)}return f(r,0),r},f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=0;e.forEach((t,n)=>{let r=Math.round(100*t);e[n]=r,i+=r});let r=100*n-i,o=Math.abs(r),a=0;for(;o>0;){let n=r<0?-1:1,i=a%e.length;if(void 0!==t&&n<0&&e[i]<=100*t){a++;continue}e[i]+=n,a++,o--}for(let t=0;t<e.length;t++)e[t]=e[t]/100}},86882:function(e,t,n){"use strict";n.d(t,{A_:function(){return x},Cr:function(){return b},Fw:function(){return L},II:function(){return A},JX:function(){return y},Lh:function(){return z},Wf:function(){return p},_W:function(){return E},dl:function(){return f},lm:function(){return j},mh:function(){return N},nA:function(){return I},oU:function(){return h},sr:function(){return S},wb:function(){return w},z2:function(){return g},zN:function(){return u}});var i=n(30764),r=n(27191),o=n(98775),a=n(69416),l=n(1338),s=n(20273),d=n(60863),c=n(81472);function u(e){let t=(0,c.Le)(e),n=t.node(-1),i=t.start(-1),r=d.r.get(n);return{...e instanceof a.hA?r.rectBetween(e.$anchorCell.pos-i,e.$headCell.pos-i):r.findCell(t.pos-i),map:r,table:n,tableStart:i}}function p(e,t){let{tableStart:n,col:i,table:r,colMinPercent:o,newColSize:a=20}=t,u=d.r.get(r),p=i>0?-1:0;(0,c.a2)(u,r,i+p)&&(p=0==i||i==u.width?null:0);for(let t=0;t<u.height;t++){let o=t*u.width+i;if(i>0&&i<u.width&&u.map[o-1]==u.map[o]){let a=u.map[o],l=r.nodeAt(a);e.setNodeMarkup(e.mapping.map(n+a),void 0,(0,c.hl)(l.attrs,i-u.colCount(a))),t+=l.attrs.rowspan-1}else{let a=null==p?(0,s.F)(r.type.schema).cell:r.nodeAt(u.map[o+p]).type,l=u.positionAt(t,i,r);e.insert(e.mapping.map(n+l),a.createAndFill())}}let{colWidths:h}=r.attrs,m=(0,l.CO)(h,i,a,o);return h.length===m.length?(e.setMeta("preventDispatch",!0),!1):(e.setNodeMarkup(n-1,void 0,{colWidths:[...m]}),!0)}function h(e,t,n){if(!(0,c.Lw)(e))return!1;let i=u(e);if(0==i.left&&i.right==i.map.width)return!1;let o=[];for(let e=i.right-1;!function(e,t,n){let{map:i,tableStart:r,table:o}=t,a=e.mapping.maps.length;for(let t=0;t<i.height;){let l=t*i.width+n,s=i.map[l],d=o.nodeAt(s);if(n>0&&i.map[l-1]==s||n<i.width-1&&i.map[l+1]==s)e.setNodeMarkup(e.mapping.slice(a).map(r+s),void 0,(0,c.H6)(d.attrs,n-i.colCount(s)));else{let t=e.mapping.slice(a).map(r+s);e.delete(t,t+d.nodeSize)}t+=d.attrs.rowspan}}(t,i,e),o.push(e),e!=i.left;e--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=d.r.get(i.table);let a=(0,l.Z7)(i.table.attrs.colWidths,o);if(t.setNodeMarkup(i.tableStart-1,void 0,{colWidths:a}),i.right===i.map.width){let e=i.tableStart+i.map.positionAt(0,i.left-1,i.table),n=t.doc.resolve(e),o=r.Y1.near(n);t.setSelection(o)}return n&&n(t),!0}function m(e,t,n){let{map:i,tableStart:r,table:o}=t,a=r;for(let e=0;e<n;e++)a+=o.child(e).nodeSize;let l=[],d=n>0?-1:0;(function(e,t,n){let i=(0,s.F)(t.type.schema).header_cell;for(let r=0;r<e.width;r++)if(t.nodeAt(e.map[r+n*e.width]).type!=i)return!1;return!0})(i,o,n+d)&&(d=0==n||n==i.height?null:0);for(let t=0,a=i.width*n;t<i.width;t++,a++)if(n>0&&n<i.height&&i.map[a]==i.map[a-i.width]){let n=i.map[a],l=o.nodeAt(n).attrs;e.setNodeMarkup(r+n,void 0,(0,c.fi)(l,"rowspan",l.rowspan+1)),t+=l.colspan-1}else{let e=null==d?(0,s.F)(o.type.schema).cell:o.nodeAt(i.map[a+d*i.width]).type;l.push(e.createAndFill())}return e.insert(a,(0,s.F)(o.type.schema).row.create(null,l)),e}function g(e,t){if(!(0,c.Lw)(e.selection))return!1;if(t){let n=u(e.selection);t(m(e.tr,n,n.top))}return!0}function f(e,t){if(!(0,c.Lw)(e.selection))return!1;if(t){let n=u(e.selection);t(m(e.tr,n,n.bottom))}return!0}function x(e,t,n){if(!(0,c.Lw)(e))return!1;let i=u(e);if(0==i.top&&i.bottom==i.map.height)return!1;for(let e=i.bottom-1;!function(e,t,n){let{map:i,table:r,tableStart:o}=t,a=0;for(let e=0;e<n;e++)a+=r.child(e).nodeSize;let l=a+r.child(n).nodeSize,s=e.mapping.maps.length;e.delete(a+o,l+o);for(let t=0,a=n*i.width;t<i.width;t++,a++){let l=i.map[a];if(n>0&&l==i.map[a-i.width]){let n=r.nodeAt(l).attrs;e.setNodeMarkup(e.mapping.slice(s).map(l+o),void 0,(0,c.fi)(n,"rowspan",n.rowspan-1)),t+=n.colspan-1}else if(n<i.width&&l==i.map[a+i.width]){let a=r.nodeAt(l),d=a.type.create((0,c.fi)(a.attrs,"rowspan",a.attrs.rowspan-1),a.content),u=i.positionAt(n+1,t,r);e.insert(e.mapping.slice(s).map(o+u),d),t+=a.attrs.colspan-1}}}(t,i,e),e!=i.top;e--)i.table=i.tableStart?t.doc.nodeAt(i.tableStart-1):t.doc,i.map=d.r.get(i.table);if(i.bottom===i.map.height){let e=i.tableStart+i.map.positionAt(i.top-1,0,i.table),n=t.doc.resolve(e),o=r.Y1.near(n);t.setSelection(o)}return n&&n(t),!0}function v(e){let t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function y(e,t){let n=e.selection;if(!(n instanceof a.hA)||n.$anchorCell.pos==n.$headCell.pos)return!1;let r=u(e.selection),{map:o}=r;if(function(e,t){let{width:n,height:i,map:r}=e,o=t.top*n+t.left,a=o,l=(t.bottom-1)*n+t.left,s=o+(t.right-t.left-1);for(let e=t.top;e<t.bottom;e++){if(t.left>0&&r[a]==r[a-1]||t.right<n&&r[s]==r[s+1])return!0;a+=n,s+=n}for(let e=t.left;e<t.right;e++){if(t.top>0&&r[o]==r[o-n]||t.bottom<i&&r[l]==r[l+n])return!0;o++,l++}return!1}(o,r))return!1;if(t){let n=e.tr,l={},s=i.HY.empty,d,u;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){let i=o.map[e*o.width+t],a=r.table.nodeAt(i);if(!l[i]){if(l[i]=!0,null==d)d=i,u=a;else{v(a)||(s=s.append(a.content));let e=n.mapping.map(i+r.tableStart);n.delete(e,e+a.nodeSize)}}}if(n.setNodeMarkup(d+r.tableStart,void 0,(0,c.fi)((0,c.hl)(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),"rowspan",r.bottom-r.top)),s.size){let e=d+1+u.content.size,t=v(u)?d+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,s)}n.setSelection(new a.hA(n.doc.resolve(d+r.tableStart))),t(n)}return!0}function b(e,t){var n;let i=(0,s.F)(e.schema);return(n=e=>{let{node:t}=e;return i[t.type.spec.tableRole]},(e,t)=>{let i,r;let o=e.selection;if(o instanceof a.hA){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(i=(0,c.Dq)(o.$from)))return!1;r=(0,c.m9)(o.$from).pos}if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(t){let l,s=i.attrs,d=[],p=s.colwidth;s.rowspan>1&&(s=(0,c.fi)(s,"rowspan",1)),s.colspan>1&&(s=(0,c.fi)(s,"colspan",1));let h=u(e.selection),m=e.tr;for(let e=0;e<h.right-h.left;e++)d.push(p?(0,c.fi)(s,"colwidth",p&&p[e]?[p[e]]:null):s);for(let e=h.top;e<h.bottom;e++){let t=h.map.positionAt(e,h.left,h.table);e==h.top&&(t+=i.nodeSize);for(let r=h.left,o=0;r<h.right;r++,o++)(r!=h.left||e!=h.top)&&m.insert(l=m.mapping.map(t+h.tableStart,1),n({node:i,row:e,col:r}).createAndFill(d[o]))}m.setNodeMarkup(r,n({node:i,row:h.top,col:h.left}),d[0]),o instanceof a.hA&&m.setSelection(new a.hA(m.doc.resolve(o.$anchorCell.pos),l&&m.doc.resolve(l))),t(m)}return!0})(e,t)}function w(e,t){return function(n,i){var r;if(!(0,c.Lw)(n.selection))return!1;let o=(0,c.Le)(n.selection);if((null===(r=o.nodeAfter)||void 0===r?void 0:r.attrs[e])===t)return!1;if(i){let r=n.tr;n.selection instanceof a.hA?n.selection.forEachCell((n,i)=>{n.attrs[e]!==t&&r.setNodeMarkup(i,void 0,(0,c.fi)(n.attrs,e,t))}):r.setNodeMarkup(o.pos,void 0,(0,c.fi)(o.nodeAfter.attrs,e,t)),i(r)}return!0}}function C(e,t,n){let i=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let e=0;e<i.length;e++){let r=t.table.nodeAt(i[e]);if(r&&r.type!==n.header_cell)return!1}return!0}function k(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t,n){if(!(0,c.Lw)(t.selection))return!1;if(n){let i=(0,s.F)(t.schema),r=u(t.selection),o=t.tr,a=r.map.cellsInRect("column"==e?new d.U(r.left,0,r.right,r.map.height):"row"==e?new d.U(0,r.top,r.map.width,r.bottom):r),l=a.map(e=>r.table.nodeAt(e));for(let e=0;e<a.length;e++)l[e].type==i.header_cell&&o.setNodeMarkup(r.tableStart+a[e],i.cell,l[e].attrs);if(0==o.steps.length)for(let e=0;e<a.length;e++)o.setNodeMarkup(r.tableStart+a[e],i.header_cell,l[e].attrs);n(o)}return!0}:function(t,n){if(!(0,c.Lw)(t.selection))return!1;if(n){let i=(0,s.F)(t.schema),r=u(t.selection),o=t.tr,a=C("row",r,i),l=C("column",r,i),c=("column"===e?a:"row"===e&&l)?1:0,p="column"==e?new d.U(0,c,1,r.map.height):"row"==e?new d.U(c,0,r.map.width,1):r,h="column"==e?l?i.cell:i.header_cell:"row"==e?a?i.cell:i.header_cell:i.cell;r.map.cellsInRect(p).forEach(e=>{let t=e+r.tableStart,n=o.doc.nodeAt(t);n&&o.setNodeMarkup(t,h,n.attrs)}),n(o)}return!0}}let j=k("row",{useDeprecatedLogic:!0}),S=k("column",{useDeprecatedLogic:!0}),A=k("cell",{useDeprecatedLogic:!0});function I(e){return function(t,n){if(!(0,c.Lw)(t.selection))return!1;let i=function(e,t){if(t<0){let t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let t=e.index(-1)-1,n=e.before();t>=0;t--){let i=e.node(-1).child(t);if(i.childCount)return n-1-i.lastChild.nodeSize;n-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;let t=e.node(-1);for(let n=e.indexAfter(-1),i=e.after();n<t.childCount;n++){let e=t.child(n);if(e.childCount)return i+1;i+=e.nodeSize}}}((0,c.Le)(t.selection),e);if(null==i)return!1;if(n){let e=t.doc.resolve(i);n(t.tr.setSelection(r.Bs.between(e,(0,c.SZ)(e))).scrollIntoView())}return!0}}function z(e,t,n){let i=e.$anchor;for(let e=i.depth;e>0;e--)if("table"==i.node(e).type.spec.tableRole){t.delete(i.before(e),i.after(e)).scrollIntoView();let r=(0,o.a)(t);return r&&t.setSelection(r),n&&n(t),!0}return!1}let L=(e,t,n)=>e instanceof a.hA&&!!(e.isSelectingAllCells()&&e.everyCell(v))&&z(e,t,n),E=(e,t,n)=>!!(e instanceof a.hA&&e.isRowSelection())&&!!e.everyCell(v)&&x(e,t,n),N=(e,t,n)=>!!(e instanceof a.hA&&e.isColSelection())&&!!e.everyCell(v)&&h(e,t,n)},4490:function(e,t,n){"use strict";n.d(t,{Xc:function(){return r.hA},rU:function(){return a.r},Wf:function(){return U.Wf},dl:function(){return U.dl},z2:function(){return U.z2},VH:function(){return P},mh:function(){return U.mh},oU:function(){return U.oU},A_:function(){return U.A_},_W:function(){return U._W},Lh:function(){return U.Lh},Fw:function(){return U.Fw},tp:function(){return d},nA:function(){return U.nA},Lw:function(){return l.Lw},JX:function(){return U.JX},zN:function(){return U.zN},wb:function(){return U.wb},Cr:function(){return U.Cr},G3:function(){return V},II:function(){return U.II},sr:function(){return U.sr},lm:function(){return U.lm}});var i=n(27191),r=n(69416),o=n(20273),a=n(60863),l=n(81472);let s=new i.H$("fix-tables");function d(e,t){let n,i=(t,i)=>{"table"==t.type.spec.tableRole&&(n=function(e,t,n,i){let r,d;let c=a.r.get(t);if(!c.problems)return i;i||(i=e.tr);let u=[];for(let e=0;e<c.height;e++)u.push(0);for(let e=0;e<c.problems.length;e++){let r=c.problems[e];if("collision"==r.type){let e=t.nodeAt(r.pos);for(let t=0;t<e.attrs.rowspan;t++)u[r.row+t]+=r.n;i.setNodeMarkup(i.mapping.map(n+1+r.pos),void 0,(0,l.H6)(e.attrs,e.attrs.colspan-r.n,r.n))}else if("missing"==r.type)u[r.row]+=r.n;else if("overlong_rowspan"==r.type){let e=t.nodeAt(r.pos);i.setNodeMarkup(i.mapping.map(n+1+r.pos),void 0,(0,l.fi)(e.attrs,"rowspan",e.attrs.rowspan-r.n))}else if("colwidth mismatch"==r.type){let e=t.nodeAt(r.pos);i.setNodeMarkup(i.mapping.map(n+1+r.pos),void 0,(0,l.fi)(e.attrs,"colwidth",r.colwidth))}}for(let e=0;e<u.length;e++)u[e]&&(null==r&&(r=e),d=e);for(let a=0,l=n+1;a<c.height;a++){let n=t.child(a),s=l+n.nodeSize,c=u[a];if(c>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);let u=[];for(let n=0;n<c;n++)u.push((0,o.F)(e.schema)[t].createAndFill());let p=(0==a||r==a-1)&&d==a?l+1:s-1;i.insert(i.mapping.map(p),u)}l=s}return i.setMeta(s,{fixTables:!0})}(e,t,i,n))};return t?t.doc!=e.doc&&function e(t,n,i,r){let o=t.childCount,a=n.childCount;e:for(let l=0,s=0;l<a;l++){let a=n.child(l);for(let e=s,n=Math.min(o,l+3);e<n;e++)if(t.child(e)==a){s=e+1,i+=a.nodeSize;continue e}r(a,i),s<o&&t.child(s).sameMarkup(a)?e(t.child(s),a,i+1,r):a.nodesBetween(0,a.content.size,r,i+1),i+=a.nodeSize}}(t.doc,e.doc,0,i):e.doc.descendants(i),n}var c=n(17890),u=n(30764),p=n(26151);function h(e,t){let n=e.createAndFill();return new p.wx(n).replace(0,n.content.size,t).doc}function m(e,t,n,i,r,o,a,s){if(0==a||a==t.height)return!1;let d=!1;for(let c=r;c<o;c++){let r=a*t.width+c,o=t.map[r];if(t.map[r-t.width]==o){d=!0;let r=n.nodeAt(o),{top:u,left:p}=t.findCell(o);e.setNodeMarkup(e.mapping.slice(s).map(o+i),void 0,(0,l.fi)(r.attrs,"rowspan",a-u)),e.insert(e.mapping.slice(s).map(t.positionAt(a,p,n)),r.type.createAndFill((0,l.fi)(r.attrs,"rowspan",u+r.attrs.rowspan-a))),c+=r.attrs.colspan-1}}return d}function g(e,t,n,i,r,o,a,s){if(0==a||a==t.width)return!1;let d=!1;for(let c=r;c<o;c++){let r=c*t.width+a,o=t.map[r];if(t.map[r-1]==o){d=!0;let r=n.nodeAt(o),u=t.colCount(o),p=e.mapping.slice(s).map(o+i);e.setNodeMarkup(p,void 0,(0,l.H6)(r.attrs,a-u,r.attrs.colspan-(a-u))),e.insert(p+r.nodeSize,r.type.createAndFill((0,l.H6)(r.attrs,0,a-u))),c+=r.attrs.rowspan-1}}return d}function f(e,t,n,i,l){let s=n?e.doc.nodeAt(n-1):e.doc,d=a.r.get(s),{top:c,left:p}=i,h=p+l.width,f=c+l.height,x=e.tr,v=0;function y(){s=n?x.doc.nodeAt(n-1):x.doc,d=a.r.get(s),v=x.mapping.maps.length}(function(e,t,n,i,r,a,l){let s,d;let c=e.doc.type.schema,p=(0,o.F)(c);if(r>t.width)for(let o=0,a=0;o<t.height;o++){let l=n.child(o);a+=l.nodeSize;let c=[],u=null==l.lastChild||l.lastChild.type==p.cell?s||(s=p.cell.createAndFill()):d||(d=p.header_cell.createAndFill());for(let e=t.width;e<r;e++)c.push(u);e.insert(e.mapping.slice(0).map(a-1+i),c)}if(a>t.height){let o=[];for(let e=0,i=(t.height-1)*t.width;e<Math.max(t.width,r);e++){let r=!(e>=t.width)&&n.nodeAt(t.map[i+e]).type==p.header_cell;o.push(r?d||(d=p.header_cell.createAndFill()):s||(s=p.cell.createAndFill()))}let l=p.row.create(null,u.HY.from(o)),c=[];for(let e=t.height;e<a;e++)c.push(l);e.insert(e.mapping.slice(0).map(i+n.nodeSize-2),c)}return!!(s||d)})(x,d,s,n,h,f,0)&&y(),m(x,d,s,n,p,h,c,v)&&y(),m(x,d,s,n,p,h,f,v)&&y(),g(x,d,s,n,c,f,p,v)&&y(),g(x,d,s,n,c,f,h,v)&&y();for(let e=c;e<f;e++){let t=d.positionAt(e,p,s),i=d.positionAt(e,h,s);x.replace(x.mapping.slice(v).map(t+n),x.mapping.slice(v).map(i+n),new u.p2(l.rows[e-c],0,0))}y(),x.setSelection(new r.hA(x.doc.resolve(n+d.positionAt(c,p,s)),x.doc.resolve(n+d.positionAt(f-1,h-1,s)))),t(x)}let x=(0,c.$)({ArrowLeft:y("horiz",-1),ArrowRight:y("horiz",1),ArrowUp:y("vert",-1),ArrowDown:y("vert",1),"Shift-ArrowLeft":b("horiz",-1),"Shift-ArrowRight":b("horiz",1),"Shift-ArrowUp":b("vert",-1),"Shift-ArrowDown":b("vert",1),Backspace:w,"Mod-Backspace":w,Delete:w,"Mod-Delete":w});function v(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function y(e,t){return(n,o,a)=>{let s=n.selection;if(s instanceof r.hA)return v(n,o,i.Y1.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;let d=j(a,e,t);if(null==d)return!1;if("horiz"==e)return v(n,o,i.Y1.near(n.doc.resolve(s.head+t),t));{let r=n.doc.resolve(d),a=(0,l.li)(r,e,t),s;return s=a?i.Y1.near(a,1):t<0?i.Y1.near(n.doc.resolve(r.before(-1)),-1):i.Y1.near(n.doc.resolve(r.after(-1)),1),v(n,o,s)}}}function b(e,t){return(n,i,o)=>{let a=n.selection;if(!(a instanceof r.hA)){let i=j(o,e,t);if(null==i)return!1;a=new r.hA(n.doc.resolve(i))}let s=(0,l.li)(a.$headCell,e,t);return!!s&&v(n,i,new r.hA(a.$anchorCell,s))}}function w(e,t){let n=e.selection;if(!(n instanceof r.hA))return!1;if(t){let i=e.tr,r=(0,o.F)(e.schema).cell.createAndFill().content;n.forEachCell((e,t)=>{e.content.eq(r)||i.replace(i.mapping.map(t+1),i.mapping.map(t+e.nodeSize-1),new u.p2(r,0,0))}),i.docChanged&&t(i)}return!0}function C(e,t,n){if(!(0,l.Lw)(e.state.selection))return!1;let i=function(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:i}=e;for(;1==t.childCount&&(n>0&&i>0||"table"==t.firstChild.type.spec.tableRole);)n--,i--,t=t.firstChild.content;let r=t.firstChild,a=r.type.spec.tableRole,l=r.type.schema,s=[];if("row"==a)for(let e=0;e<t.childCount;e++){let r=t.child(e).content,a=e?0:Math.max(0,n-1),d=e<t.childCount-1?0:Math.max(0,i-1);(a||d)&&(r=h((0,o.F)(l).row,new u.p2(r,a,d)).content),s.push(r)}else{if("cell"!=a&&"header_cell"!=a)return null;s.push(n||i?h((0,o.F)(l).row,new u.p2(t,n,i)).content:t)}return function(e,t){let n=[];for(let e=0;e<t.length;e++){let i=t[e];for(let t=i.childCount-1;t>=0;t--){let{rowspan:r,colspan:o}=i.child(t).attrs;for(let t=e;t<e+r;t++)n[t]=(n[t]||0)+o}}let i=0;for(let e=0;e<n.length;e++)i=Math.max(i,n[e]);for(let r=0;r<n.length;r++)if(r>=t.length&&t.push(u.HY.empty),n[r]<i){let a=(0,o.F)(e).cell.createAndFill(),l=[];for(let e=n[r];e<i;e++)l.push(a);t[r]=t[r].append(u.HY.from(l))}return{height:t.length,width:i,rows:t}}(l,s)}(n),s=e.state.selection;if(s instanceof r.hA){i||(i={width:1,height:1,rows:[u.HY.from(h((0,o.F)(e.state.schema).cell,n))]});let t=s.$anchorCell.node(-1),r=s.$anchorCell.start(-1),d=a.r.get(t).rectBetween(s.$anchorCell.pos-r,s.$headCell.pos-r);return i=function(e,t,n){let{width:i,height:r,rows:o}=e;if(i!=t){let e=[],n=[];for(let i=0;i<o.length;i++){let r=o[i],a=[];for(let n=e[i]||0,o=0;n<t;o++){let s=r.child(o%r.childCount);n+s.attrs.colspan>t&&(s=s.type.create((0,l.H6)(s.attrs,s.attrs.colspan,n+s.attrs.colspan-t),s.content)),a.push(s),n+=s.attrs.colspan;for(let t=1;t<s.attrs.rowspan;t++)e[i+t]=(e[i+t]||0)+s.attrs.colspan}n.push(u.HY.from(a))}o=n,i=t}if(r!=n){let e=[];for(let t=0,i=0;t<n;t++,i++){let a=[],s=o[i%r];for(let e=0;e<s.childCount;e++){let i=s.child(e);t+i.attrs.rowspan>n&&(i=i.type.create((0,l.fi)(i.attrs,"rowspan",Math.max(1,n-i.attrs.rowspan)),i.content)),a.push(i)}e.push(u.HY.from(a))}o=e,r=n}return{width:i,height:r,rows:o}}(i,d.right-d.left,d.bottom-d.top),f(e.state,e.dispatch,r,d,i),!0}if(!i)return!1;{let t=(0,l.Le)(e.state.selection),n=t.start(-1);return f(e.state,e.dispatch,n,a.r.get(t.node(-1)).findCell(t.pos-n),i),!0}}function k(e,t){var n;let i;if(t.ctrlKey||t.metaKey)return!1;let o=S(e,t.target);if(t.shiftKey&&e.state.selection instanceof r.hA)a(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(i=(0,l.m9)(e.state.selection.$anchor))&&(null===(n=A(e,t))||void 0===n?void 0:n.pos)!=i.pos)a(i,t),t.preventDefault();else if(!o)return!1;function a(t,n){let i=A(e,n),o=null==l.Kv.getState(e.state);if(!i||!(0,l.yL)(t,i)){if(!o)return!1;i=t}let a=new r.hA(t,i);if(o||!e.state.selection.eq(a)){let n=e.state.tr.setSelection(a);o&&n.setMeta(l.Kv,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",d),null!=l.Kv.getState(e.state)&&e.dispatch(e.state.tr.setMeta(l.Kv,-1))}function d(n){let i=l.Kv.getState(e.state),r;if(null!=i)r=e.state.doc.resolve(i);else if(S(e,n.target)!=o&&!(r=A(e,t)))return s();r&&a(r,n)}return e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",d),!1}function j(e,t,n){if(!(e.state.selection instanceof i.Bs))return null;let{$head:r}=e.state.selection;for(let i=r.depth-1;i>=0;i--){let o=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:o.childCount))break;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){let o=r.before(i),a="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?o:null}}return null}function S(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function A(e,t){let n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?(0,l.m9)(e.state.doc.resolve(n.pos)):null}var I=n(68015),z=n.n(I),L=n(52780),E=n(53979),N=n(38564),M=n(36069),_=n(9936);let T=new i.H$("tableColumnResizing");class R{getActiveHandleAbs(e){return null===this.activeHandle?null:(0,_.XV)(e,this.activeHandle)}reset(){return this.activeHandle=null,this.dragging=null,this}setHandle(e,t){if(null===t.setHandle)return this.activeHandle=null,this;let n=N.Gt.getState(e);if(!n)return this;let{type:i,binding:r}=n;return this.activeHandle=(0,M.JR)(t.setHandle,i,r.mapping),this}setDragging(e){return this.dragging=e.setDragging,this}apply(e,t){let n=e.getMeta(T);return n&&"setHandle"in n?this.setHandle(t,n):n&&"setDragging"in n?this.setDragging(n):n&&"reset"in n?this.reset():this}constructor(e=null,t=null){this.activeHandle=e,this.dragging=t}}var H=n(1338);function P(){let{handleWidth:e=5,colMinPercent:t=10,lastColumnResizable:n=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.Sy({key:T,state:{init:()=>new R,apply:(e,t,n,i)=>t.apply(e,i)},props:{attributes:e=>null!==T.getState(e).getActiveHandleAbs(e)?{class:"resize-cursor"}:{class:""},handleDOMEvents:{mousemove:(t,i)=>((function(e,t,n,i){if(!e.editable)return;let r=T.getState(e.state);if(r.dragging)return;let o=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),a=null;if(o){let{left:i,right:r}=o.getBoundingClientRect();t.clientX-i<=n?a=O(e,t,"left"):r-t.clientX<=n&&(a=O(e,t,"right"))}a===r.getActiveHandleAbs(e.state)||!i&&null!==a&&F(e.state.doc.resolve(a))||D(e,a)})(t,i,e,n),!1),mouseleave:e=>((function(e){let t=T.getState(e.state);null===t.getActiveHandleAbs(e.state)||t.dragging||D(e,null)})(e),!1),mousedown:(e,n)=>((function(e,t,n){if(!e.editable)return;let r=T.getState(e.state),o=r.getActiveHandleAbs(e.state);if(null===o||r.dragging)return 0;let a=e.state.doc.resolve(o),l=a.node(-1),s=a.start(-1),d=[...l.attrs.colWidths],c=W(a),u=function(e,t){let n=e.domAtPos(t),i=e.domAtPos(t).node;for(;"TABLE"!=i.nodeName;)i=i.parentNode;return n.node.childNodes[n.offset].scrollWidth}(e,o),p=B(e,a),h=G(e,a),m=e.state.doc.resolve(o+2);e.state.selection.from>s&&e.state.selection.from<s+l.nodeSize||e.dispatch(e.state.tr.setSelection(i.Y1.findFrom(m,1)));let g={setDragging:{startX:t.clientX,startWidth:u,colWidths:d,tableWidth:h,colIndex:c}};e.dispatch(e.state.tr.setMeta(T,g));let f=null;function x(t){window.removeEventListener("mouseup",x),window.removeEventListener("mousemove",v);let n=T.getState(e.state);if(n.dragging){if(null===f){e.dispatch(e.state.tr.setMeta(T,{setDragging:null}));return}if(n.dragging)try{let t=n.getActiveHandleAbs(e.state);(function(e,t,n){let i=e.state.doc.resolve(t).before(-1),r=e.state.tr;e.dispatch(r.setNodeMarkup(i,void 0,{colWidths:[...n]}).setMeta("annotationEvent",{type:"update-node-attrs",pos:i}))})(e,t,f),e.dispatch(e.state.tr.setMeta(T,{setDragging:null}))}catch(t){e.dispatch(e.state.tr.setMeta(T,{reset:!0}))}f=null}}function v(t){if(!t.which)return x(t);let i=T.getState(e.state),r=i.getActiveHandleAbs(e.state);if(!i.dragging||null===r)return;let{colIndex:o,colWidths:a}=i.dragging,l=function(e,t){let{tableWidth:n}=e,i=t.clientX-e.startX;return z()(100*i/n,2)}(i.dragging,t);(function(e,t,n){let i=e.state.doc.resolve(t),r=B(e,i).querySelectorAll("colgroup > col.col-width-control");n.forEach((e,t)=>{r.item(t).style.width="".concat(e,"%")})})(e,r,f=(0,H.GI)(a,o,l,n)),(0,E.CI)(p)}window.addEventListener("mouseup",x),window.addEventListener("mousemove",v),t.preventDefault()})(e,n,t),!1)},decorations(e){let t=T.getState(e).getActiveHandleAbs(e);if(null!==t)return function(e,t){let n=[];try{let i=e.doc.resolve(t),r=i.node(-1),o=a.r.get(r),l=i.start(-1),s=o.colCount(i.pos-l)+i.nodeAfter.attrs.colspan;for(let e=0;e<o.height;e++){let t=s+e*o.width-1;if((s==o.width||o.map[t]!=o.map[t+1])&&(0==e||o.map[t-1]!=o.map[t-1-o.width])){let e=o.map[t],i=l+e+r.nodeAt(e).nodeSize-1,a=document.createElement("div");a.className="column-resize-handle",n.push(L.p.widget(i,a))}}return L.EH.create(e.doc,n)}catch(e){return console.error("(caught) columnResizing error: ".concat(e.message)),L.EH.empty}}(e,t)},nodeViews:{}}})}function O(e,t,n){let i=e.posAtCoords({left:t.clientX,top:t.clientY});if(!i)return null;let{inside:r}=i,o=(0,l.m9)(e.state.doc.resolve(r+1));if(!o)return null;if("right"===n)return o.pos;let s=a.r.get(o.node(-1)),d=o.start(-1),c=s.map.indexOf(o.pos-d);return c%s.width==0?null:d+s.map[c-1]}function D(e,t){e.dispatch(e.state.tr.setMeta(T,{setHandle:t}))}let W=e=>{let t=e.node(-1),n=a.r.get(t),i=e.start(-1);return n.colCount(e.pos-i)},F=e=>{let t=e.node(-1),n=a.r.get(t);return W(e)===n.width-1},B=(e,t)=>{let n=e.domAtPos(t.start(-1)).node;for(;"TABLE"!=n.nodeName;)n=n.parentNode;return n},G=(e,t)=>B(e,t).scrollWidth;var U=n(86882);function V(){let{allowTableNodeSelection:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new i.Sy({key:l.Kv,state:{init:()=>null,apply(e,t){let n=e.getMeta(l.Kv);if(null!=n)return -1==n?null:n;if(null==t||!e.docChanged)return t;let{deleted:i,pos:r}=e.mapping.mapResult(t);return i?null:r}},props:{decorations:r.fI,handleDOMEvents:{mousedown:k},createSelectionBetween:e=>null!=l.Kv.getState(e.state)?e.state.selection:null,handleKeyDown:x,handlePaste:C},appendTransaction:(t,n,i)=>(0,r.FK)(i,d(i,n),e)})}},20273:function(e,t,n){"use strict";function i(e){let t=e.cached.tableNodeTypes;if(!t)for(let n in t=e.cached.tableNodeTypes={},e.nodes){let i=e.nodes[n],r=i.spec.tableRole;r&&(t[r]=i)}return t}n.d(t,{F:function(){return i}})},60863:function(e,t,n){"use strict";let i,r;if(n.d(t,{U:function(){return o},r:function(){return a}}),"undefined"!=typeof WeakMap){let e=new WeakMap;i=t=>e.get(t),r=(t,n)=>(e.set(t,n),n)}else{let e=[],t=0;i=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},r=(n,i)=>(10==t&&(t=0),e[t++]=n,e[t++]=i)}class o{constructor(e,t,n,i){this.left=e,this.top=t,this.right=n,this.bottom=i}}class a{findCell(e){for(let t=0;t<this.map.length;t++){let n=this.map[t];if(n!=e)continue;let i=t%this.width,r=t/this.width|0,a=i+1,l=r+1;for(let e=1;a<this.width&&this.map[t+e]==n;e++)a++;for(let e=1;l<this.height&&this.map[t+this.width*e]==n;e++)l++;return new o(i,r,a,l)}throw RangeError("No cell with offset "+e+" found")}firstRowCells(){return this.map.slice(0,this.width)}firstColCells(){return this.map.filter((e,t)=>t%this.width==0)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw RangeError("No cell with offset "+e+" found")}nextCell(e,t,n){let{left:i,right:r,top:o,bottom:a}=this.findCell(e);return"horiz"==t?(n<0?0==i:r==this.width)?null:this.map[o*this.width+(n<0?i-1:r)]:(n<0?0==o:a==this.height)?null:this.map[i+this.width*(n<0?o-1:a)]}rectBetween(e,t){let{left:n,right:i,top:r,bottom:a}=this.findCell(e),{left:l,right:s,top:d,bottom:c}=this.findCell(t);return new o(Math.min(n,l),Math.min(r,d),Math.max(i,s),Math.max(a,c))}cellsInRect(e){let t=[],n={};for(let i=e.top;i<e.bottom;i++)for(let r=e.left;r<e.right;r++){let o=i*this.width+r,a=this.map[o];n[a]||(n[a]=!0,r==e.left&&r&&this.map[o-1]==a||i==e.top&&i&&this.map[o-this.width]==a||t.push(a))}return t}positionAt(e,t,n){for(let i=0,r=0;;i++){let o=r+n.child(i).nodeSize;if(i==e){let n=t+e*this.width,i=(e+1)*this.width;for(;n<i&&this.map[n]<r;)n++;return n==i?o-1:this.map[n]}r=o}}static get(e){return i(e)||r(e,function(e){if("table"!=e.type.spec.tableRole)throw RangeError("Not a table node: "+e.type.name);let t=function(e){let t=-1,n=!1;for(let i=0;i<e.childCount;i++){let r=e.child(i),o=0;if(n)for(let t=0;t<i;t++){let n=e.child(t);for(let e=0;e<n.childCount;e++){let r=n.child(e);t+r.attrs.rowspan>i&&(o+=r.attrs.colspan)}}for(let e=0;e<r.childCount;e++){let t=r.child(e);o+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=o:t!=o&&(t=Math.max(t,o))}return t}(e),n=e.childCount,i=[],r=0,o=null,l=[];for(let e=0,r=t*n;e<r;e++)i[e]=0;for(let a=0,s=0;a<n;a++){let d=e.child(a);s++;for(let e=0;;e++){for(;r<i.length&&0!=i[r];)r++;if(e==d.childCount)break;let c=d.child(e),{colspan:u,rowspan:p,colwidth:h}=c.attrs;for(let e=0;e<p;e++){if(e+a>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:s,n:p-e});break}let d=r+e*t;for(let e=0;e<u;e++){0==i[d+e]?i[d+e]=s:(o||(o=[])).push({type:"collision",row:a,pos:s,n:u-e});let n=h&&h[e];if(n){let i=(d+e)%t*2,r=l[i];null==r||r!=n&&1==l[i+1]?(l[i]=n,l[i+1]=1):r==n&&l[i+1]++}}}r+=u,s+=c.nodeSize}let c=(a+1)*t,u=0;for(;r<c;)0==i[r++]&&u++;u&&(o||(o=[])).push({type:"missing",row:a,n:u}),s++}let s=new a(t,n,i,o),d=!1;for(let e=0;!d&&e<l.length;e+=2)null!=l[e]&&l[e+1]<n&&(d=!0);return d&&function(e,t,n){e.problems||(e.problems=[]);for(let i=0,r={};i<e.map.length;i++){let o=e.map[i];if(r[o])continue;r[o]=!0;let a=n.nodeAt(o),l=null;for(let n=0;n<a.attrs.colspan;n++){let r=t[(i+n)%e.width*2];null==r||a.attrs.colwidth&&a.attrs.colwidth[n]==r||((l||(l=function(e){if(e.colwidth)return e.colwidth.slice();let t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}(a.attrs)))[n]=r)}l&&e.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:l})}}(s,l,e),s}(e))}constructor(e,t,n,i){this.width=e,this.height=t,this.map=n,this.problems=i}}},81472:function(e,t,n){"use strict";n.d(t,{Dq:function(){return d},Fn:function(){return p},H6:function(){return x},Kv:function(){return l},Le:function(){return u},Lw:function(){return c},SZ:function(){return h},a2:function(){return y},fi:function(){return f},hl:function(){return v},li:function(){return g},m9:function(){return s},yL:function(){return m}});var i=n(27191),r=n(69416),o=n(20273),a=n(60863);let l=new i.H$("selectingCells");function s(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function d(e){for(let t=e.depth;t>0;t--){let n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function c(e){let t=e.$head;for(let e=t.depth;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return!0;return!1}function u(e){return e instanceof r.hA?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e instanceof i.qv&&"cell"==e.node.type.spec.tableRole?e.$anchor:s(e.$head)||function(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){let i=t.type.spec.tableRole;if("cell"==i||"header_cell"==i)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){let i=t.type.spec.tableRole;if("cell"==i||"header_cell"==i)return e.doc.resolve(n-t.nodeSize)}}(e.$head)}function p(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function h(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function m(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function g(e,t,n){let i=e.start(-1),r=a.r.get(e.node(-1)).nextCell(e.pos-i,t,n);return null==r?null:e.node(0).resolve(i+r)}function f(e,t,n){let i={};for(let t in e)i[t]=e[t];return i[t]=n,i}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=f(e,"colspan",e.colspan-n);return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(t,n),i.colwidth.some(e=>e>0)||(i.colwidth=null)),i}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=f(e,"colspan",e.colspan+n);if(i.colwidth){i.colwidth=i.colwidth.slice();for(let e=0;e<n;e++)i.colwidth.splice(t,0,0)}return i}function y(e,t,n){let i=(0,o.F)(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=i)return!1;return!0}},96236:function(e,t,n){"use strict";n.d(t,{BF:function(){return r},CU:function(){return i}});let i=e=>"table"===e.type.name,r=e=>"tableCell"===e.type.name},44170:function(e,t,n){"use strict";n.d(t,{E7:function(){return a},I1:function(){return o},I_:function(){return l}});var i=n(30240);n(42616);let r=(e,t)=>{let n=e.filter(e=>Object.keys(e.spec).length>0),i=t.filter(e=>Object.keys(e.spec).length>0),r=n.map(e=>JSON.stringify(e.spec)),o=i.map(e=>JSON.stringify(e.spec));return{removed:r.filter(e=>!o.includes(e)),added:o.filter(e=>!r.includes(e))}},o=(e,t)=>{let n=e.filter(e=>Object.keys(e.spec).length>0),i=t.filter(e=>Object.keys(e.spec).length>0);return n.length!==i.length||JSON.stringify(n.map(e=>e.spec))!==JSON.stringify(i.map(e=>e.spec))},a=e=>{let{newNode:t,oldNode:n,updateProps:a,oldDecorations:l,newDecorations:s}=e;if(JSON.stringify(t.attrs)!==JSON.stringify(n.attrs))return a(),!0;if(o(l,s)){if(i.VH.get("debugLogging")){let e=r(l,s);console.debug("============== decos ================"),console.debug("decos changed",t.type.name),e.removed.length>0&&console.debug("%c  decos removed: ".concat(e.removed.join(" ")," "),"color: red"),e.added.length>0&&console.debug("%c  decos added:   ".concat(e.added.join(" ")," "),"color: green")}a()}return!0},l=e=>{let{newNode:t,oldNode:n,updateProps:i}=e;return t.content.childCount!==n.content.childCount?(i(),!0):a(e)}},38799:function(e,t,n){"use strict";n.d(t,{dh:function(){return N},Br:function(){return z},GX:function(){return S},LM:function(){return I},F1:function(){return A},vE:function(){return _},f3:function(){return L},Yk:function(){return E},p2:function(){return M},TZ:function(){return j}});var i=n(9850),r=n.n(i),o=n(3027),a=n(27191),l=n(2784);n(53650);var s=n(8142);let d={desktop:"xl",tablet:"md",mobile:"sm"};var c=n(76599),u=n(71383),p=n(97134),h=n(70965),m=n(92035),g=n(28817),f=n(65050),x=n(46577),v=n(54317),y=n(50738),b=n(55338),w=n(78112),C=n(12971),k=n(80180);function j(){let{inPreviewContext:e}=(0,s.My)(),t=(0,u.CG)(c.ws);return e?t:(0,m.s2)()}function S(e){let{inPreviewContext:t}=(0,s.My)(),n=(0,u.CG)(c.tv);return(0,h.iq)(e,t&&n?d[n]:void 0)}let A=e=>{let[t,n]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let t=()=>{n(t=>!e.state.selection.empty||e.isActive("link")||e.isActive("button")?t+1:0)};return e.on("update",t),e.on("selectionUpdate",t),()=>{e.off("update",t),e.off("selectionUpdate",t)}},[e]),t},I=e=>{let[t,n]=(0,l.useState)(!!e&&(0,C.KB)(e));return(0,l.useEffect)(()=>{if(!e)return;let t=t=>{requestAnimationFrame(()=>{n((0,C.KB)(e))})};return e.on("blur",t).on("focus",t),()=>{e.off("blur",t).off("focus",t)}},[e]),t},z=e=>{let t=(0,p.we)();return(0,u.CG)(n=>{let i=(0,w.yx)(n);return!!i&&t.can(e,i)})},L=(e,t)=>{let n=(0,b.A)(e);(0,l.useEffect)(()=>{if(!e||!t)return;let i=e=>{e.defaultPrevented||n(e)};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e,n,t])},E=e=>{(0,l.useEffect)(()=>{if(!e)return;let t=t=>{t.defaultPrevented||!e.isEditable||!e.isFocused||!(e.state.selection instanceof a.qv)||!t.target||e.view.dom.contains(t.target)||e.view.dispatchEvent(t)};return document.addEventListener("copy",t),document.addEventListener("cut",t),document.addEventListener("paste",t),()=>{document.removeEventListener("copy",t),document.removeEventListener("cut",t),document.removeEventListener("paste",t)}},[e])},N="tiptap-ignore-paste",M=e=>{(0,l.useEffect)(()=>{if(!e)return;let t=t=>{var n,i,o,a;let l=!!(null===(n=document.activeElement)||void 0===n?void 0:n.closest("[data-".concat(N,"]")));if(t.defaultPrevented||e.isFocused||!e.isEditable||!t.target||l||e.view.dom.contains(t.target))return;let s=null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text/html");if(!s)return;let{content:d}=(0,y.T)(s,e.schema),c=(((null===(o=d.firstChild)||void 0===o?void 0:o.type.name)==="document"?null===(a=d.firstChild)||void 0===a?void 0:a.content.content:d.content)||[]).filter(e=>(0,v.KH)(e));if(c.length){let n=e.state.doc.content.size-1,i=c.map(e=>(0,k.hs)(r()(e.toJSON()))).map(e=>(0,x.Zs)(e));e.chain().insertContentAt(n,i).selectInsertedNode().scrollIntoView().setMeta("uiEvent","paste").run(),t.preventDefault()}};return document.addEventListener("paste",t),()=>{document.removeEventListener("paste",t)}},[e])},_=e=>{(0,l.useEffect)(()=>{if(!e)return;let t=t=>{let n=t.target;if(!n.closest(".".concat(f.ar))||n.closest(".drag-handle"))return;let i=e.view.posAtDOM(t.target,0);if(e.state.selection.from===i)return;let r=e.view.posAtCoords({left:t.clientX,top:t.clientY});if(!r)return;let a=e.state.doc.nodeAt(r.inside);if(!a||!a.type.spec.isolating||!1===a.type.spec.allowGapCursor)return;let{node:l,offset:s}=e.view.domAtPos(r.inside),d=l.childNodes[s];if(!(!d||!d.classList.contains("react-renderer")||(0,g.tl)(t.target,d,e=>e.hasAttribute("data-node-view-content-inner"))))try{let n=e.state.doc.resolve(r.pos);if(!o.Q.valid(n))return!1;let i=new o.Q(n);e.view.dispatch(e.state.tr.setSelection(i)),t.stopPropagation(),t.preventDefault()}catch(e){console.error("[useFixReactNodeViewGapCursors] Error creating GapCursor",e)}};return e.view.dom.addEventListener("click",t),()=>e.view.dom.removeEventListener("click",t)},[e])}},3874:function(e,t,n){"use strict";n.d(t,{a:function(){return a}}),n(2784);var i=n(19358),r=n(15711),o=n(83751);let a=e=>{let{editorId:t,children:n}=e,a=(0,i.g)(),l=(0,r.H)();return(0,o.K)(t||l)&&a?n:null}},15711:function(e,t,n){"use strict";n.d(t,{H:function(){return a},O:function(){return o}});var i=n(2784);let r=(0,i.createContext)(void 0),o=r.Provider,a=()=>(0,i.useContext)(r)},83751:function(e,t,n){"use strict";n.d(t,{K:function(){return d},O:function(){return s}});var i=n(30733),r=n.n(i),o=n(2784);class a{subscribe(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),()=>{try{if(!this.listeners[e])return;let n=this.listeners[e].indexOf(t);n>-1&&this.listeners[e].splice(n,1)}catch(e){}}}isRendered(e){return this.renderedMap[e]}onRendered(e){var t;this.renderedMap[e]=!0,null===(t=this.listeners[e])||void 0===t||t.forEach(e=>e())}onEditorUnload(e){this.renderedMap[e]=!1,this.listeners[e]=[]}constructor(){this.renderedMap={main:!1},this.listeners={}}}let l=r()(()=>new a),s=e=>({setEditorRendered:(0,o.useCallback)(()=>{e&&l().onRendered(e)},[e]),onEditorUnload:(0,o.useCallback)(()=>{e&&l().onEditorUnload(e)},[e])}),d=e=>{var t;let[n,i]=(0,o.useState)(void 0===e||null===(t=l().isRendered(e))||void 0===t||t);return(0,o.useEffect)(()=>{if(e)return l().subscribe(e,()=>{i(!0)})},[e]),n}},46924:function(e,t,n){"use strict";n.d(t,{I:function(){return m},q:function(){return u}});var i=n(12483),r=n(37243),o=n(30764),a=n(27191),l=n(72205),s=n(26151),d=n(73639),c=n(42634);let u=new a.H$("UniqueAttribute"),p=new Map,h=e=>{let{editor:t,tr:n,node:r,initialValue:o,pos:a,attributeName:l,syncWithFilmstrip:s,pluginKey:d}=e;(s="function"==typeof s?s():!!s)&&!d&&console.error("Cannot sync with filmstrip without plugin key");let c=(()=>{if(t.isThumbnail&&s&&d){var e,n;let t=null===(e=p.get(d))||void 0===e?void 0:e.shift();if(t&&(null===(n=t.type)||void 0===n?void 0:n.name)===r.type.name&&t.pos===a)return console.debug("%c [UniqueAttribute] Reused ".concat(l,' "').concat(t.val,'" for ').concat(r.type.name),"background-color: deeppink",{pos:a}),t.val;i.Tb({message:"Mismatch trying to reuse attribute",attributeName:l,nodeType:r.type,pos:a,existing:t})}return o()})();return!t.isThumbnail&&s&&d&&(p.has(d)||p.set(d,[]),p.get(d).push({type:r.type,val:c,pos:a}),console.debug("%c [UniqueAttribute] Should reuse ".concat(l,' "').concat(c,'" for ').concat(r.type.name),"background-color: deeppink",{pos:a})),n.setNodeMarkup(a,void 0,{...r.attrs,[l]:c}),{node:r,val:c,pos:a}},m=r.hj.create({name:"UniqueAttribute",priority:l.a.UniqueAttribute,addOptions(){return{attributeName:"",pluginKey:new a.H$(this.name),types:[],initialValue:()=>void 0,filterTransaction:null,syncWithFilmstrip:!1}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:e=>this.options.parseHTML?this.options.parseHTML(e):e.getAttribute("data-".concat(this.options.attributeName)),renderHTML:e=>this.options.renderHTML?this.options.renderHTML(e):e[this.options.attributeName]?{["data-".concat(this.options.attributeName)]:e[this.options.attributeName]}:{}}}}]},onCreate(){let{view:e,state:t}=this.editor,{tr:n,doc:i}=t,{types:o,attributeName:a,pluginKey:l,initialValue:s,syncWithFilmstrip:d,callback:c}=this.options,u=(0,r.N2)(i,e=>o.includes(e.type.name)&&null===e.attrs[a]).map(e=>{let{node:t,pos:i}=e;return h({editor:this.editor,pos:i,node:t,tr:n,syncWithFilmstrip:d,initialValue:s,attributeName:a,pluginKey:l})});0!==u.length&&(e.dispatch(n),c&&c(this.editor,u,n.doc))},addProseMirrorPlugins(){let e=!1;return[new a.Sy({key:this.options.pluginKey,appendTransaction:(e,t,n)=>{let i=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),o=this.options.filterTransaction&&e.some(e=>{var t,n;return!(null===(t=(n=this.options).filterTransaction)||void 0===t?void 0:t.call(n,e))});if(!i||o)return;let{tr:a}=n,{types:l,attributeName:p,syncWithFilmstrip:m,initialValue:g,callback:f,pluginKey:x}=this.options,v=function(e,t){let n=new s.wx(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}(t.doc,e),{mapping:y}=v,b=(0,c.Z)(v),w=[],C=e.some(e=>!0===e.getMeta(u));if(b.forEach(e=>{let t={from:e.newStart,to:e.newEnd},i=(0,r.b5)(n.doc,t,e=>l.includes(e.type.name)),o=function(e){let t=e.filter((t,n)=>e.indexOf(t)!==n);return(0,d.Z)(t)}(i.map(e=>{let{node:t}=e;return t.attrs[p]}).filter(e=>null!==e));i.forEach(e=>{var t;let{node:n,pos:i}=e,r=null===(t=a.doc.nodeAt(i))||void 0===t?void 0:t.attrs[p];if(!r){w.push(h({editor:this.editor,pos:i,node:n,tr:a,syncWithFilmstrip:m,initialValue:g,attributeName:p,pluginKey:x}));return}let{deleted:l}=y.invert().mapResult(i),s=l&&o.includes(r),d=l&&C;if(s||d){let e=h({editor:this.editor,pos:i,node:n,tr:a,syncWithFilmstrip:m,initialValue:g,attributeName:p,pluginKey:x});w.push(e),console.debug("%c [UniqueAttribute][".concat(this.options.types,"] Replaced ").concat(n.attrs[p]," with new val: ").concat(e.val),"background-color: deeppink",{override:d,newNode:s})}})}),f&&f(this.editor,w,a.doc),a.steps.length)return a},props:{handleDOMEvents:{drop:(t,n)=>{var i,r;return((null===(i=t.dragging)||void 0===i?void 0:i.move)!==!0||(null===(r=n.dataTransfer)||void 0===r?void 0:r.effectAllowed)==="copy")&&(e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:t=>{var n;if(!e)return t;let{types:i,attributeName:r}=this.options,a=e=>{let t=[];return e.forEach(e=>{if(e.isText){t.push(e);return}if(!i.includes(e.type.name)){t.push(e.copy(a(e.content)));return}let n=e.type.create({...e.attrs,[r]:null},a(e.content),e.marks);t.push(n)}),o.HY.from(t)},l=this.options.transformPasted?this.options.transformPasted(t,this.options,null===this||void 0===this?void 0:null===(n=this.editor)||void 0===n?void 0:n.gammaDocId):new o.p2(a(t.content),t.openStart,t.openEnd);return e=!1,l}}})]}})},90887:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return{default:null,parseHTML:n=>{let i=n.getAttribute("data-".concat(t));if(i)return i;let r=e();return console.debug("[configureIdAttribute] generating id in parseHTML",r),r}}}},70089:function(e,t,n){"use strict";n.d(t,{B0:function(){return a},Nv:function(){return o},Tr:function(){return l}});var i=n(37243),r=n(27191);let o=(e,t)=>(0,i.N2)(e,e=>!!t.isInSet(e.marks)),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n=>{let i=r.Y1.findFrom(n.doc.resolve(e),t,!0);return i?n.setSelection(i):n}},l=e=>t=>(0,i.Kk)(t=>s(e,t))(t),s=(e,t)=>Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},59329:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var i=n(37243);n(2784);class r extends i.ML{constructor(...e){super(...e),this.contentComponent=null}}},72611:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i=n(52322),r=n(2784),o=n(28316);let a=e=>{let{renderers:t}=e;return(0,i.jsx)(i.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e;return o.createPortal(n.reactElement,n.element,t)})})};class l extends r.Component{componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,o.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(n=>{let{renderers:i}=n;return{renderers:{...i,[e]:t}}})})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(t=>{let{renderers:n}=t,i={...n};return delete i[e],{renderers:i}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,portalComponent:t,...n}=this.props;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:this.editorContentRef,...n}),(0,i.jsx)(this.portalComponent,{renderers:this.state.renderers})]})}constructor(e){super(e),this.editorContentRef=r.createRef(),this.initialized=!1,this.portalComponent=e.portalComponent||a,this.state={renderers:{}}}}let s=r.memo(l)},14581:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var i=n(52322),r=n(2784),o=n(30311);let a=r.forwardRef((e,t)=>{let{onDragStart:n}=(0,o.a)(),r=e.as||"div";return(0,i.jsx)(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})})},319:function(e,t,n){"use strict";n.d(t,{A:function(){return c},f:function(){return u}});var i=n(52322),r=n(37243),o=n(30764);n(2784);var a=n(92035),l=n(38636),s=n(86332),d=n(30311);class c extends r.DK{stopEvent(e){return"contextmenu"!==e.type&&r.DK.prototype.stopEvent.call(this,e)}updateAttributes(e){this.editor.commands.command(t=>{let{tr:n}=t,i=this.getPos();if(void 0===i)return;let r={type:"move",insertPos:i,insertPosRaw:i,pos:i,end:i+this.node.content.size+1};try{n.setNodeMarkup(i,void 0,{...this.node.attrs,...e}).setMeta("annotationEvent",r)}catch(e){console.error("(caught) [ReactNodeView updateAttributes]: setNodeMarkup",e)}return!0})}mount(){var e=this;let t={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.updateAttributes(t)},deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let n=e=>{let t=this.component,n=this.onDragStart.bind(this);return(0,i.jsx)(d.j.Provider,{value:{onDragStart:n,nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)},node:this.node,editor:this.editor,getPos:this.getPos},children:(0,i.jsx)(t,{...e})})};n.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline||this.node instanceof o.vc?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit",this.contentDOMElement.setAttribute("data-node-view-content-inner",this.node.type.name));let r=this.node.isInline?"span":"div";this.options.as&&(r=this.options.as);let{className:a=""}=this.options;this.renderer=new s.M(n,{editor:this.editor,props:t,as:r,className:"node-".concat(this.node.type.name," ").concat(a).trim(),updateWrapperEl:this.options.updateWrapperEl})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}update(e,t){let n=e=>{this.renderer.updateProps(e)};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let i=this.node,r=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:i,oldDecorations:r,newNode:e,newDecorations:t,updateProps:()=>n({node:e,decorations:t})})}return e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,n({node:e,decorations:t}),!0)}selectNode(){this.renderer.updateProps({selected:!0})}deselectNode(){this.renderer.updateProps({selected:!1})}destroy(){this.renderer.destroy(),this.contentDOMElement=null}ignoreMutation(e){return!this.dom||!this.contentDOM||"function"==typeof this.options.ignoreMutation&&this.options.ignoreMutation({mutation:e})||this.defaultIgnoreMutation(e)}defaultIgnoreMutation(e){return!!(this.node.isLeaf||this.node.isAtom||"selection"===e.type&&e.target.closest("[data-comments-wrapper]"))||!("selection"===e.type||this.dom.contains(e.target)&&"childList"===e.type&&(0,a.Tt)()&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(e=>e.isContentEditable))&&(this.contentDOM===e.target&&"attributes"===e.type||!this.contentDOM.contains(e.target))}onDragStart(e){var t,n,i,r,o;let a=e.target,s=a.querySelector("[data-drag-handle]");if(!s&&a.hasAttribute("data-drag-handle")&&(s=a),!this.dom||!s)return e.preventDefault(),!1;try{let e=this.editor.view.posAtDOM(s);if(!e||-1==e)return;let t=this.editor.state.doc.nodeAt(e);if(!t)return;this.editor.commands.setNodeSelection(e);let n=(0,l.lG)({from:e,to:e+t.nodeSize,editor:this.editor,pos:e});n&&requestAnimationFrame(()=>{var e;null!==(e=this.editor.view.dragging)&&void 0!==e&&e.annotations||null==this.editor.view.dragging||"object"!=typeof this.editor.view.dragging||(this.editor.view.dragging.annotations=n)})}catch(e){console.warn("(caught) [ReactNodeViewRenderer] onDragStart error moving annotations",e)}let d=0,c=0;document.querySelectorAll("[data-nodeview-drag-preview]").forEach(e=>e.parentNode.removeChild(e));let u=s.cloneNode(!0);document.body.appendChild(u),u.dataset.nodeviewDragPreview=!0,u.style.maxWidth="250px",u.style.width=getComputedStyle(s).width;let p=()=>{var e;return null===(e=u.parentElement)||void 0===e?void 0:e.removeChild(u)};if(document.addEventListener("dragend",p,{once:!0}),document.addEventListener("drop",p,{once:!0}),document.addEventListener("mouseup",p,{once:!0}),this.dom!==s){let t=null!==(r=e.offsetX)&&void 0!==r?r:null===(n=e.nativeEvent)||void 0===n?void 0:n.offsetX,a=null!==(o=e.offsetY)&&void 0!==o?o:null===(i=e.nativeEvent)||void 0===i?void 0:i.offsetY;d=t,c=a}null===(t=e.dataTransfer)||void 0===t||t.setDragImage(u,d,c)}}function u(e,t){return n=>n.editor.contentComponent?new c(e,n,t):{}}},86332:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});var i=n(52322);n(2784);class r{render(){var e,t,n;let r=this.component,o=this.props;("function"==typeof r&&r.prototype&&r.prototype.isReactComponent||"object"==typeof r&&(null===(n=r.$$typeof)||void 0===n?void 0:n.toString())==="Symbol(react.forward_ref)")&&(o.ref=e=>{this.ref=e}),this.reactElement=(0,i.jsx)(r,{...o}),this.updateWrapperEl&&this.updateWrapperEl(this.element,o),null===(t=this.editor)||void 0===t||null===(e=t.contentComponent)||void 0===e||e.setRenderer(this.id,this)}updateProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props={...this.props,...e},this.render()}destroy(){var e,t;null===(t=this.editor)||void 0===t||null===(e=t.contentComponent)||void 0===e||e.removeRenderer(this.id)}constructor(e,{editor:t,props:n={},as:i="div",className:r="",updateWrapperEl:o}){this.ref=null,this.id=Math.floor(4294967295*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.updateWrapperEl=o,this.element=document.createElement(i),this.element.classList.add("react-renderer"),r&&this.element.classList.add(...r.split(" ")),this.render()}}},1776:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var i=n(27191),r=n(319);let o=(e,t)=>new i.Sy({key:new i.H$("".concat(e.name,"_markview")),props:{nodeViews:{[e.name]:(n,i,o,a)=>(0,r.f)(t,{as:"span"})({editor:e.editor,node:n,getPos:o,decorations:a,extension:{name:e.name,type:e.type.name,options:e.options,storage:e.storage},HTMLAttributes:{}})}}})},27210:function(e,t,n){"use strict";n.d(t,{kg:function(){return i.k},ms:function(){return d},T5:function(){return u.T},Al:function(){return r.A},fW:function(){return r.f},jE:function(){return p.j}}),n(59329);var i=n(72611),r=n(319),o=n(52322);n(2784);var a=n(27821),l=n(85315),s=n(30311);let d=e=>(0,a.C7)()?(0,o.jsx)(l.m,{...e}):(0,o.jsx)(c,{...e}),c=e=>{let t=e.as||"div",{nodeViewContentRef:n}=(0,s.a)();return(0,o.jsx)(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style}})};c.displayName="NodeViewContentCore";var u=n(14581),p=n(16882)},16882:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var i=n(2784),r=n(59329);let o=()=>{},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.useMemo)(()=>(o(),new r.M(e)),[]),n=function(){let[,e]=(0,i.useState)(0);return()=>e(e=>e+1)}();return(0,i.useEffect)(()=>{let e=!0;return t.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e&&n()})})}),()=>{t.destroy(),e=!1}},[t]),t}},30311:function(e,t,n){"use strict";n.d(t,{a:function(){return o},j:function(){return r}});var i=n(2784);let r=(0,i.createContext)({onDragStart:void 0}),o=()=>(0,i.useContext)(r)},4031:function(e,t,n){"use strict";n.d(t,{J:function(){return i}});let i={'&[contenteditable="true"]':{"&:focus-within":{".ProseMirror-gapcursor":{display:"block",height:"1.5em",position:"relative","&:after":{width:"0px",height:"100%",borderTop:"0px",borderLeft:"1px solid black"}},".grid-cell":{".ProseMirror-gapcursor:first-child":{marginTop:"1em"},".ProseMirror-gapcursor:last-child":{marginBottom:"1em"}},".block-table td":{".ProseMirror-gapcursor:first-child":{marginTop:".75em"},".ProseMirror-gapcursor:last-child":{marginBottom:".75em"}},".is-dark":{".ProseMirror-gapcursor:after":{borderLeftColor:"white"}}}},".collaboration-cursor__caret":{position:"relative",marginLeft:"-1px",marginRight:"-1px",borderLeft:"1px solid #0d0d0d",borderRight:"1px solid #0d0d0d",wordBreak:"normal",pointerEvents:"none",textIndent:0},".collaboration-cursor__label":{position:"absolute",top:"-1.4em",left:"-1px",fontSize:"12px",fontStyle:"normal",fontFamily:"'Inter', sans-serif",fontWeight:"600",lineHeight:"normal",letterSpacing:"normal",textTransform:"none",userSelect:"none",color:"#0d0d0d",padding:"0.1rem 0.3rem",borderRadius:"3px 3px 3px 0",whiteSpace:"nowrap",zIndex:1,pointerEvents:"auto",spellCheck:"false",_hover:{opacity:.1}},'&[contenteditable="false"]':{".ProseMirror-gapcursor":{display:"none"},".collaboration-cursor__caret:not(.streaming-cursor)":{display:"none"}}}},3939:function(e,t,n){"use strict";n.d(t,{Y:function(){return k}});var i=n(28165),r=n(19273);let o="transparent",a=(0,i.F4)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),l=(0,i.F4)({"0%":{opacity:.5,color:"var(--chakra-colors-trueblue-500)"},"100%":{opacity:1,color:"inherit"}}),s={".autocomplete-loading":{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:"2px",borderBottomColor:o,borderLeftColor:o,animation:"".concat(a," ").concat("0.45s"," linear infinite"),width:"var(--spinner-size)",height:"var(--spinner-size)","--spinner-size":"1em",marginLeft:"0.25em",color:"var(--chakra-colors-trueblue-500)"},".autocomplete-inserted":{animation:"".concat(l," ").concat(r.X,"ms ease-out")}};var d=n(92035),c=n(32690);let u="%23553bff",p={backgroundRepeat:"no-repeat",backgroundSize:"11px",backgroundPosition:"8px center",fontSize:"13px",fontWeight:"bold",color:"var(--chakra-colors-trueblue-400)",position:"absolute",zIndex:1,top:"0px",left:"0px",backgroundColor:"var(--chakra-colors-trueblue-100)",padding:"4px 12px",paddingLeft:"24px",borderRadius:"0 0 4px 4px",pointerEvents:"none"},h={".block-card":{transitionProperty:"opacity",transitionDuration:"normal"},".ai-generate-streaming-card":{"&.node-card":{pointerEvents:(0,d.s2)()?void 0:"none !important"},"&.node-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"}},".streaming-cursor__label":{_after:{...p,backgroundImage:'/**/url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="'.concat(u,'"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M245.8 45.9C241.9 37.4 233.4 32 224 32s-17.9 5.4-21.8 13.9L142.7 174.7 13.9 234.2C5.4 238.1 0 246.6 0 256s5.4 17.9 13.9 21.8l128.8 59.5 59.5 128.8c3.9 8.5 12.4 13.9 21.8 13.9s17.9-5.4 21.8-13.9l59.5-128.8 128.8-59.5c8.5-3.9 13.9-12.4 13.9-21.8s-5.4-17.9-13.9-21.8L305.3 174.7 245.8 45.9z"/></svg>\')'),content:"var(--ai-generating-label)"}}},"&.sal-active":{".block-card:not(.sal-active-card, .sal-active-card-parent)":{opacity:.5},".sal-active-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"},_after:{...p,backgroundImage:'/**/url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 512 512" fill="'.concat(u,'"><!--! Font Awesome Pro 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path d="M327.5 85.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 128l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 128l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 64 426.8 7.5C425.1 3 420.8 0 416 0s-9.1 3-10.8 7.5L384 64 327.5 85.2zM205.1 73.3c-2.6-5.7-8.3-9.3-14.5-9.3s-11.9 3.6-14.5 9.3L123.3 187.3 9.3 240C3.6 242.6 0 248.3 0 254.6s3.6 11.9 9.3 14.5l114.1 52.7L176 435.8c2.6 5.7 8.3 9.3 14.5 9.3s11.9-3.6 14.5-9.3l52.7-114.1 114.1-52.7c5.7-2.6 9.3-8.3 9.3-14.5s-3.6-11.9-9.3-14.5L257.8 187.4 205.1 73.3zM384 384l-56.5 21.2c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L384 448l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L448 448l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L448 384l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L384 384z"/></svg>\')'),content:"var(--ai-editing-label)",left:"50%",transform:"translate(-50%,0px)"}},".sal-active-card-parent":{".block:not(.sal-active-card)":{opacity:.5},".sal-active-card":{".block":{opacity:1}}},".sal-selection-text":{backgroundColor:"rgba(100, 100, 100, 0.25)",...c.FC}}};var m=n(4031),g=n(79546);let f=".125em",x="scale(1.05)",v={transitionDuration:"slow",transitionTimingFunction:"ease-out"},y=".comments-wrapper, .block-comments-circle",b="> :is(".concat(y,")"),w="> :not(".concat(y,"), [data-spotlight-parent] > *"),C=e=>({"&.react-renderer > [data-node-view-wrapper]":{[w]:{transitionProperty:"filter, transform",...v,filter:"opacity(".concat(.2,") blur(").concat(e?f:"0",")")},[b]:{transitionProperty:"opacity",...v,filter:"opacity(".concat(.2,")  blur(").concat(e?f:"0",")"),"&[data-is-popup-open=true]":{filter:"none"},_hover:{filter:"none"}}},"&:not(.react-renderer)":{transitionProperty:"filter, transform",...v,filter:"opacity(".concat(.2,")  blur(").concat(e?f:"0",")")}}),k={".ProseMirror":{"&.spotlight-active":{"[data-spotlight-dim]":{opacity:.2},".spotlightable":C(!1),".spotlightable.after-spotlight":C(!0),".spotlightable.spotlight-block, .spotlight-block .spotlightable":{"&.react-renderer > [data-node-view-wrapper]":{[w]:{filter:"none",transform:"".concat(x," !important")},[b]:{filter:"none"}},"&:not(.react-renderer)":{filter:"none",transform:"".concat(x," !important")}}},...h,".block-card":{transitionProperty:"opacity",transitionDuration:"normal"},"&.card-notes-active":{".block-card:not(.card-notes-active-parent-card)":{opacity:.5},".card-notes-active-parent-card .block-card":{opacity:"revert"},".card-notes-active-parent-card > [data-node-view-wrapper] > .card-wrapper > .card-body":{_before:{content:"''",position:"absolute",inset:"0px",zIndex:1,boxShadow:"0px 0px 0px 5px var(--chakra-colors-trueblue-100)",borderRadius:"inherit",pointerEvents:"none"}}},...m.J,...s,...g.l,".card-present-mode":{"&--doc":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentCollapsed":{transform:"translateY(0)",position:"relative",zIndex:1},"&--presentPrev":{transform:"translateY(-100%)",position:"fixed",zIndex:2},"&--presentCurrent":{transform:"translateY(0)","@media print":{transform:"none"},position:"fixed",zIndex:3},"&--presentNext":{transform:"translateY(100%)",position:"fixed",zIndex:2},"&--presentParent":{transform:"translateY(0)",position:"fixed",zIndex:2}},".document-content.is-doc-mode":{".card-wrapper":{"&:hover":{".card-divider":{opacity:1},".manage-card-controls":{opacity:1}}}},".document-content":{".card-wrapper":{"&:hover":{".card-footer-reactions":{opacity:1},".card-collapsed":{".card-footer-reactions":{display:"none"}}}}}},".ProseMirror-dropcursor":{transitionProperty:"inset",transitionDuration:"fast",borderRadius:"md",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",outline:"1px solid",outlineColor:"whiteAlpha.800",pointerEvents:"none",backdropFilter:"blur(4px)","&::after":{backgroundColor:"gray.700",color:"whiteAlpha.900",px:"8px",py:"2px",borderRadius:"sm",fontWeight:"medium",shadow:"md",fontSize:"sm",w:"max-content",pointerEvents:"none",display:"none"},'&[data-type="column"]::after':{content:'"Drop to add column"',position:"absolute",top:"-2em",display:"block"}}}},21298:function(e,t,n){"use strict";n.d(t,{dE:function(){return d},fY:function(){return s}});var i=n(88371),r=n(27797);let o=[...Array(i.N+1).keys()],a="1.6em",l=["disc","circle","square"],s=e=>({listStyle:l[e%l.length],paddingLeft:"0.4em",_after:{paddingLeft:"0.4em"},marginLeft:"calc(".concat(e+1," * ").concat(a," - 0.4em)")}),d={[r.Sh]:{margin:"0",marginBottom:r.Li,textAlign:"left","&.first-block":{marginTop:r.Li}},"ol.block-numbered":{listStyle:"none"},".block-todo":{listStyle:"none","label.chakra-checkbox":{pointerEvents:"none",".chakra-checkbox__control":{pointerEvents:"auto",width:"1em",height:"1em",top:"0.3em",position:"relative",borderRadius:"var(--box-border-radius)",borderColor:"var(--link-color)",borderWidth:"0.125em","&[data-checked]":{backgroundColor:"var(--link-color)",color:"var(--body-color-inverted)"},svg:{fontSize:"0.5em"}}}},".block-bullet, .block-todo":{li:{position:"relative"}}};o.forEach(e=>{d['ol.block-numbered[indent="'.concat(e,'"]')]={"li[data-node-view-content]":{marginLeft:"calc(".concat(e+1," * ").concat(a,")"),position:"relative",_before:{position:"absolute",left:"-".concat(a),content:'attr(data-list-counter) "."'}}}}),o.forEach(e=>{d['ul.block-bullet[indent="'.concat(e,'"]')]={"li[data-node-view-content]":s(e)},d['ul.block-todo[indent="'.concat(e,'"]')]={"li.todo":{marginLeft:"calc(".concat(e+1," * ").concat(a,")"),listStyle:"none"},".chakra-checkbox__control":{left:"-".concat(a)}}})},79546:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});let i={".is-selecting-node, .sal-selection-node, .sal-selection-card":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="inside"]':{_before:{zIndex:10,outlineOffset:"-2px"}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}},".react-renderer [data-selection-ring]":{_before:{content:"none"}}},".is-selecting-around":{"[data-selection-background]":{_after:{content:'""',position:"absolute",inset:0,backgroundColor:"var(--chakra-ring-color)",borderRadius:"inherit",opacity:.75}},".react-renderer:not(.is-selecting-around) [data-selection-ring]":{_after:{content:"none"}}}}},11569:function(e,t,n){"use strict";n.d(t,{ho:function(){return a},iJ:function(){return l}});var i=n(37243),r=n(20435);let o=new Set(["bullet","numbered","todo","title","heading","paragraph","image","blockquote","embed","video"]),a=(e,t)=>{if(o.has(e.type.name)){let n={type:"card",content:[e.toJSON()]},o=(0,r.e)().map(e=>(null==t?void 0:t.includes(e.name))?e instanceof i.vc?e.extend({renderHTML:()=>["span",0]}):e.extend({renderHTML:()=>""}):e);return(0,i.ar)(n||{},o)}return""},l=(e,t)=>{if(o.has(e.type.name)){let n={type:"card",content:[e.toJSON()]},o=(0,r.e)().map(e=>(null==t?void 0:t.includes(e.name))?(i.vc,e.extend({renderText:()=>""})):e);return(0,i._4)(n||{},o)}return""}},31753:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});let i=e=>{var t;let{mutation:n}=e;return!!("attributes"===n.type&&(null===(t=n.attributeName)||void 0===t?void 0:t.startsWith("data-")))}},84305:function(e,t,n){"use strict";n.d(t,{A0:function(){return c},Wy:function(){return l},ok:function(){return d},zK:function(){return s}});var i=n(37243),r=n(27191),o=n(31601),a=n(70089);let l=(e,t)=>{let n=s(e);return new i.VK({find:e.find,handler:i=>{let{state:l,range:s}=i,d=new r.Bs(l.doc.resolve(s.from),l.doc.resolve(s.to));if((0,a.Tr)(t)(d))return null;let c=n.handler(i);return null!==c&&o.co.track(o.AA.NODE_INSERTED,{method:o.fe.INPUT_RULE,node_name:e.type.name}),c}})};function s(e){return new i.VK({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,a=n.doc.resolve(r.from),l=(0,i.nU)(e.getAttributes,void 0,o)||{},s={...a.parent.attrs,...l};if(!a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e.type))return;let{tr:d}=n;d.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}})}function d(e){return new i.VK({find:e.find,handler:t=>{let{state:n,range:r,match:o}=t,a=(0,i.nU)(e.getAttributes,void 0,o)||{},{tr:l}=n,s=r.from,d=r.to,c=n.doc.resolve(s).before();l.replaceWith(c,d,e.type.create(a))}})}function c(e){return new i.VK({find:e.find,handler:t=>{let{state:n,range:r}=t,o=n.doc.resolve(r.from),a=(0,i.nU)(e.getAttributes,void 0,o.parent);if(!a)return;let l=n.tr.delete(r.from,r.to);Object.entries(a).forEach(e=>{let[t,n]=e;l.setNodeAttribute(r.from-1,t,n)})}})}},9936:function(e,t,n){"use strict";n.d(t,{G8:function(){return s},XV:function(){return a},bb:function(){return l},jS:function(){return o}});var i=n(38564),r=n(36069);let o=(e,t)=>{let n=i.Gt.getState(e);if(!n)return null;let{type:o,binding:a}=n;return n.binding?(0,r.JR)(t,o,a.mapping):null},a=(e,t)=>{let n=i.Gt.getState(e);if(!n)return null;let{doc:o,type:a,binding:l}=n;return n.binding?(0,r.SF)(o,a,t,l.mapping):null},l=(e,t)=>({from:o(e,t.from),to:o(e,t.to)}),s=(e,t)=>{if(!t.from||!t.to)return null;let n=a(e,t.from),i=a(e,t.to);return null==n||null==i?null:{from:n,to:i}}},48105:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var i=n(30764),r=n(27191),o=n(51161),a=n(98775);class l extends r.Y1{map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return n?(0,a.E)(o)||r.Y1.near(o):new l(o,this.side)}content(){return new i.p2(i.HY.from(this.node),0,0)}eq(e){return e instanceof l&&e.anchor===this.anchor&&e.side===this.side}toJSON(){return{type:"presentation",anchor:this.anchor,side:this.side}}createSelectionNear(){let e=this.side<1?1:-1;return(0,o.t)(this.$from,e)||r.Y1.near(this.$from)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for PresentationSelection.fromJSON");return new l(e.resolve(t.anchor))}static create(e,t,n){return new l(e.resolve(t),n)}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}constructor(e,t=0){let n=e.nodeAfter;super(e,e.node(0).resolve(e.pos+n.nodeSize)),this.node=n,this.side=t}}if(l.prototype.visible=!1,!l.prototype.jsonID)try{r.Y1.jsonID("presentation",l)}catch(e){}},98775:function(e,t,n){"use strict";n.d(t,{E:function(){return c},a:function(){return u}});var i=n(3027),r=n(27191),o=n(26151);let a=(e,t,n)=>t&&r.qv.isSelectable(t)?r.qv.create(e,n):null,l=(e,t,n)=>t&&t.inlineContent?r.Bs.create(e,n):null;function s(e,t,n){return e&&n?n:e&&t?t:!e&&t?t:!e&&n?n:null}function d(e,t){let{doc:n,pos:o,parent:d,nodeAfter:c,nodeBefore:u}=e;if(d.inlineContent)return r.Bs.create(n,o);let p=t>0,h=s(p,l(n,u,o-1),l(n,c,o+1));if(h)return h;if(i.Q.valid(e))return new i.Q(e);if(d.type.spec.isolating){let t=s(p,a(n,u,o-((null==u?void 0:u.nodeSize)||0)),a(n,c,o));if(t)return t;if(0===d.childCount&&r.qv.isSelectable(d))return r.qv.create(n,e.before())}return null}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=d(e,t);if(n)return n;for(let n=e.depth-1;n>=0&&!e.node(n+1).type.spec.isolating;n--){let i=t<0?e.before(n+1):e.after(n+1),r=d(e.doc.resolve(i),t);if(r)return r}return null}let u=(e,t)=>{let n;let i=e.steps.length-1,r=e.steps[i];return r instanceof o.Pu||r instanceof o.FC?(e.mapping.maps[i].forEach((e,t,i,r)=>{null==n&&(n=r)}),null==n)?null:c(e.doc.resolve(n),t):null}},80180:function(e,t,n){"use strict";n.d(t,{G0:function(){return f},hs:function(){return h},qI:function(){return m}});var i=n(36069),r=n(37243),o=n(49431),a=n(55461),l=n.n(a),s=n(1842),d=n.n(s),c=n(69180);n(65133);var u=n(20435);let p=e=>{"card"===e.type&&e.attrs&&delete e.attrs.id},h=e=>{let t=e=>{var n;return null===(n=e.content)||void 0===n?void 0:n.map(e=>{if(!e.content)return e;let n={...e,attrs:{...e.attrs}};return p(n),n.content=t(n),n})};return p(e),Object.assign({},e,{content:t(e)})},m=e=>{let t=(0,u.e)(),n=(0,r.J1)(t),a=(0,i.uH)(n,e,"default"),l=(0,c.D$)(a);return(0,o.kZ)(l)},g=(e,t)=>!!(d()(e)&&d()(t))||void 0,f=(e,t)=>{let n=(0,i.uH)(e.schema,e.getJSON(),"default"),r=(0,i.R3)(n,"default"),o=(0,i.uH)(e.schema,t,"default"),a=(0,i.R3)(o,"default");return l()(r,a,g)}},27102:function(e,t,n){"use strict";n.d(t,{rJ:function(){return ep},kC:function(){return ef}});var i=n(35483),r=n(52322),o=n(38035),a=n(79729),l=n(28165),s=n(2784),d=n(97134),c=n(29117),u=n(43679),p=n(34071),h=n(39429),m=n(75768),g=n(82655),f=n(87254);let x=s.createContext({});function v(){return s.useContext(x)}var y=n(28535),b=n(32899),w=n(17993),C=n(97166),k=n(20437),j=n(62614),S=n(5879),A={src:"/_next/static/media/transparent-background.ccc186e7.png"};let I={[i.HQ.White]:"#f0f1f3",[i.HQ.Gray]:"#788492",[i.HQ.Green]:"#36b24d",[i.HQ.Blue]:"#1c7ed6",[i.HQ.Violet]:"#7746f1",[i.HQ.Red]:"#ff2133",[i.HQ.Orange]:"#ff9433",[i.HQ.Yellow]:"#ffc936"},z=e=>e.appState.currentStyle,L=e=>e.document.pageStates[e.appState.currentPageId].selectedIds,E=e=>e.settings.isDarkMode?"dark":"light",N=e=>{let{style:t,colorMode:n}=e;return(0,r.jsx)(y.xu,{backgroundColor:t.isFilled?i.tk.fills[n][t.color]:void 0,backgroundImage:t.isFilled?void 0:A.src,backgroundSize:"4em",borderColor:i.tk.strokes[n][t.color],borderWidth:"2px",h:"1em",w:"1em",borderRadius:"md"})},M=Object.keys(i.tk.defaultTextStyle),_=(e,t)=>{let{page:n}=e,i={};if(t.length<=0)return{};{let e=new Set([]);t.map(e=>n.shapes[e]).forEach(t=>{M.forEach(n=>{if(!e.has(n)){if(void 0===i[n])i[n]=t.style[n];else{if(i[n]===t.style[n])return;e.add(n)}}})}),e.forEach(e=>{delete i[e]})}return i},T=()=>{let e=v(),t=e.useStore(E),n=e.useStore(z),o=e.useStore(L),a=_(e,o),l={...n,...a};return(0,r.jsxs)(u.J,{trigger:"hover",children:[(0,r.jsx)(p.x,{children:(0,r.jsx)(b.h,{icon:(0,r.jsx)(N,{style:l,colorMode:t}),variant:"ghost",size:"sm","aria-label":""})}),(0,r.jsx)(h.y,{w:"fit-content",bg:"#F9FAFBFA",p:4,children:(0,r.jsxs)(w.g,{spacing:2,align:"flex-start",children:[(0,r.jsx)(C.l,{children:(0,r.jsx)(S.cC,{id:"TuM2Yu"})}),(0,r.jsx)(k.M,{columns:2,spacing:2,children:[!0,!1].map(n=>(0,r.jsx)(j.z,{leftIcon:(0,r.jsx)(N,{style:{...l,isFilled:n},colorMode:t}),variant:"ghost",size:"sm",isActive:l.isFilled===n,onClick:()=>e.style({isFilled:n}),children:n?(0,r.jsx)(S.cC,{id:"5bi1la"}):(0,r.jsx)(S.cC,{id:"dD7NPy"})},n?"fill":"outline"))}),(0,r.jsx)(C.l,{children:(0,r.jsx)(S.cC,{id:"1HfW/F"})}),(0,r.jsx)(k.M,{columns:4,spacing:2,w:"100%",children:Object.entries(i.HQ).map(n=>{let[i,o]=n;return I[o]?(0,r.jsx)(b.h,{icon:(0,r.jsx)(N,{style:{...l,color:o},colorMode:t}),variant:"ghost",size:"md","aria-label":i,isActive:l.color===o,onClick:()=>e.style({color:o})},o):null})})]})})]})};var R=n(29058),H=n(49929),P=n(64253);let O=(0,R.G)((e,t)=>{let{label:n,icon:i,tooltipPlacement:o="top",...a}=e;return(0,r.jsx)(P.kH,{placement:o,label:n,isDisabled:!n,children:(0,r.jsx)(b.h,{"aria-label":n||"",ref:t,size:"sm",variant:"",icon:(0,r.jsx)(H.G,{icon:i}),color:"trueblue.600",textShadow:"0px 1px 0px rgba(0,0,0,0)",fontWeight:"500",borderRadius:"md",borderWidth:"1px",backdropFilter:"blur(20px)",borderColor:"transparent",_hover:{bg:"gray.100",borderColor:"gray.200"},_focus:{bg:"gray.100",borderColor:"gray.200"},_active:{bg:"trueblue.100",borderColor:"trueblue.200"},...a})})}),D=e=>{let{children:t,...n}=e;return(0,r.jsx)(o.k,{bg:"#F9FAFBDD",p:1,borderWidth:"1px",borderColor:"whiteAlpha.600",borderRadius:"xl",shadow:"xl",...n,children:t})},W={[i.HE.Start]:g.elf,[i.HE.Middle]:g.MB3,[i.HE.End]:g.S3c},F=()=>{let e=v(),t=e.useStore(z),n=e.useStore(L),o=_(e,n),a={...t,...o};return(0,r.jsxs)(u.J,{trigger:"hover",children:[(0,r.jsx)(p.x,{children:(0,r.jsx)(O,{icon:W[a.textAlign||i.HE.Start]})}),(0,r.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,r.jsx)(D,{direction:"column",children:(0,r.jsxs)(m.h,{children:[(0,r.jsx)(O,{icon:g.elf,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.style({textAlign:i.HE.Start}),isActive:a.textAlign===i.HE.Start},"align-left"),(0,r.jsx)(O,{icon:g.MB3,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.style({textAlign:i.HE.Middle}),isActive:a.textAlign===i.HE.Middle},"align-center"),(0,r.jsx)(O,{icon:g.S3c,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.style({textAlign:i.HE.End}),isActive:a.textAlign===i.HE.End},"align-right"),(0,r.jsx)(O,{icon:g.z1q,label:f.ag._({id:"18P2qJ"}),onClick:()=>e.style({textAlign:i.HE.Justify}),isActive:a.textAlign===i.HE.Justify},"justify")]})})})]})},B=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.some(t=>void 0!==e.document.pages[e.appState.currentPageId].shapes[t].children),G=e=>"idle"===e.appState.status&&e.document.pageStates[e.appState.currentPageId].selectedIds.length>0,U=e=>e.document.pageStates[e.appState.currentPageId].selectedIds.length,V=e=>{let t=e.appState.currentPageId,n=e.document.pages[t];for(let i of e.document.pageStates[t].selectedIds)if("text"in n.shapes[i])return!0;return!1},q=s.memo(function(){let e=v(),{isGammaOrgUser:t}=(0,d.SE)(),n=e.useStore(G),a=e.useStore(B),l=e.useStore(U),s=e.useStore(V);return(0,r.jsx)(o.k,{w:"100%",direction:"row",position:"absolute",bottom:2,align:"flex-end",justify:"center",zIndex:1,children:(0,r.jsx)(D,{children:(0,r.jsxs)(c.U,{spacing:2,children:[t&&(0,r.jsx)(O,{icon:g.ISu,label:f.ag._({id:"SpTWH3"}),onClick:()=>e.exportImage(i.Uz.SVG,{scale:1,quality:1})},"download"),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{icon:g.XAH,label:f.ag._({id:"/Wgayn"}),onClick:()=>e.delete(),"data-testid":"drawing-edit-toolbar-delete"},"delete"),(0,r.jsx)(K,{}),l>=2&&(0,r.jsx)(Y,{}),l>=2||a?(0,r.jsx)(O,{icon:g.tU8,label:a?"Ungroup selection":"Group selection",onClick:()=>a?e.ungroup():e.group(),isActive:a},"group"):null]}),(0,r.jsx)(T,{}),s&&(0,r.jsx)(F,{})]})})})}),K=()=>{let e=v();return(0,r.jsxs)(u.J,{trigger:"hover",children:[(0,r.jsx)(p.x,{children:(0,r.jsx)(O,{icon:g.y3T})}),(0,r.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,r.jsxs)(D,{direction:"row",children:[(0,r.jsx)(O,{icon:g.XQV,label:f.ag._({id:"J6qWQV"}),onClick:()=>e.moveToFront()},"front"),(0,r.jsx)(O,{icon:g.y3T,label:f.ag._({id:"9xFjqz"}),onClick:()=>e.moveForward()},"forward"),(0,r.jsx)(O,{icon:g.QZW,label:f.ag._({id:"OfSb1W"}),onClick:()=>e.moveBackward()},"backward"),(0,r.jsx)(O,{icon:g.H5Z,label:f.ag._({id:"/zBSYY"}),onClick:()=>e.moveToBack()},"back")]})})]})},Y=()=>{let e=v();return(0,r.jsxs)(u.J,{trigger:"hover",children:[(0,r.jsx)(p.x,{children:(0,r.jsx)(O,{icon:g.I6v})}),(0,r.jsx)(h.y,{background:"none",shadow:"none",w:"fit-content",children:(0,r.jsxs)(D,{direction:"column",children:[(0,r.jsxs)(m.h,{children:[(0,r.jsx)(O,{icon:g.I6v,label:f.ag._({id:"IR6Txi"}),onClick:()=>e.align(i.MR.Left)},"align-left"),(0,r.jsx)(O,{icon:g.liD,label:f.ag._({id:"8nOdkO"}),onClick:()=>e.align(i.MR.CenterHorizontal)},"align-center"),(0,r.jsx)(O,{icon:g.xfv,label:f.ag._({id:"pd0UH2"}),onClick:()=>e.align(i.MR.Right)},"align-right"),(0,r.jsx)(O,{icon:g.ZC_,label:f.ag._({id:"8lqfXb"}),onClick:()=>e.distribute(i.XR.Horizontal)},"distribute-h")]}),(0,r.jsxs)(m.h,{children:[(0,r.jsx)(O,{icon:g.JhG,label:f.ag._({id:"/Q0jUh"}),onClick:()=>e.align(i.MR.Top)},"align-top"),(0,r.jsx)(O,{icon:g.UiH,label:f.ag._({id:"QhuQN2"}),onClick:()=>e.align(i.MR.CenterVertical)},"align-middle"),(0,r.jsx)(O,{icon:g.iXx,label:f.ag._({id:"EPnxoe"}),onClick:()=>e.align(i.MR.Bottom)},"align-bottom"),(0,r.jsx)(O,{icon:g.edW,label:f.ag._({id:"a1NrWf"}),onClick:()=>e.distribute(i.XR.Vertical)},"distribute-v")]})]})})]})};var X=n(74008),$=n(54933);let Z=()=>[{icon:$.qaO,label:f.ag._({id:"rG3WVm"}),tool:"select"},{icon:g.xf2,label:f.ag._({id:"Ajc4TJ"}),tool:"erase"},{icon:$.ZC5,label:f.ag._({id:"rjuFFw"}),tool:i.Uc.Line},{icon:$.nUK,label:f.ag._({id:"zFkhx3"}),tool:i.Uc.Arrow},{icon:$.lCX,label:f.ag._({id:"30KLDI"}),tool:i.Uc.Rectangle},{icon:$.diR,label:f.ag._({id:"7xMmki"}),tool:i.Uc.Ellipse},{icon:$.BwA,label:f.ag._({id:"ucHvJP"}),tool:i.Uc.Triangle},{icon:$.K5C,label:f.ag._({id:"xeiujy"}),tool:i.Uc.Text}],Q=e=>e.appState.activeTool,J=s.memo(function(){let e=v(),t=e.useStore(Q);return(0,r.jsx)(o.k,{h:"100%",direction:"column",position:"absolute",right:2,align:"flex-end",justify:"center",zIndex:1,children:(0,r.jsx)(D,{children:(0,r.jsx)(w.g,{spacing:2,children:Z().map(n=>{let{label:i,icon:o,tool:a}=n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O,{icon:o,label:i,onClick:()=>e.selectTool(a),isActive:t===a,tooltipPlacement:"left","data-testid":"drawing-insert-toolbar-".concat(a)},i),"select"==a&&(0,r.jsx)(X.i,{},"selectDivider")]})})})})})});var ee=n(10625),et=n(67046),en=n(99058),ei=n(25481);let er=e=>e.document.pageStates[e.appState.currentPageId].camera.zoom,eo=e=>e.settings.showGrid,ea=s.memo(function(){let e=v(),t=e.useStore(eo);return(0,r.jsx)(o.k,{position:"absolute",top:2,left:2,zIndex:1,children:(0,r.jsx)(D,{children:(0,r.jsxs)(c.U,{spacing:2,children:[(0,r.jsx)(el,{}),(0,r.jsx)(O,{icon:$.fnF,label:t?f.ag._({id:"IsBZFj"}):f.ag._({id:"mWgfWA"}),isActive:t,onClick:()=>e.setSetting("showGrid",!t)},"grid")]})})})}),el=s.memo(function(){let e=v(),t=e.useStore(er);return(0,r.jsxs)(ee.v,{children:[(0,r.jsxs)(et.j,{as:j.z,"data-test-id":"zoom-menu-button",size:"sm",colorScheme:"trueblue",variant:"ghost",leftIcon:(0,r.jsx)(H.G,{icon:g.Y$T}),children:[Math.round(100*t),"%"]}),(0,r.jsxs)(en.q,{children:[(0,r.jsx)(ei.s,{command:"#+",onClick:e.zoomIn,children:(0,r.jsx)(S.cC,{id:"AWOSPo"})}),(0,r.jsx)(ei.s,{command:"#-",onClick:e.zoomOut,children:(0,r.jsx)(S.cC,{id:"FjkaiT"})}),(0,r.jsx)(ei.s,{command:"⇧0",onClick:e.resetZoom,children:(0,r.jsx)(S.cC,{id:"41NrIs"})}),(0,r.jsx)(ei.s,{command:"⇧1",onClick:e.zoomToFit,"data-test-id":"zoom-to-fit-button",children:(0,r.jsx)(S.cC,{id:"pLI1Is"})})]})]})});var es=n(72842);let ed=e=>({onAssetCreate:(0,s.useCallback)(async(t,n,r)=>{if(!e)return console.warn("[useAssetUpload] OrgId is required to upload assets"),!1;let o=URL.createObjectURL(n);console.debug("[useAssetUpload] Handling upload for file",{file:n,id:r,tempUrl:o});let a=e=>{let n=t.assets.find(e=>e.id===r);if(n){console.debug("[useAssetUpload] Upload complete. Replacing temp asset",{id:r,src:e.src});let i={document:{assets:{[r]:{...n,src:e.src}}}};t.patchState(i,"upload"),t.persist(i,"upload")}};return(0,es.cT)(n,e,{onOriginalFileUpload:a,onUploadComplete:a}),t.patchState({document:{assets:{[r]:{id:r,type:i.LO.Image,fileName:n.name,src:o}}}}),o},[e]),onAssetDelete:(0,s.useCallback)(async(e,t)=>!0,[])});var ec=n(11254);let eu={dash:i.g6.Solid,isFilled:!0,color:i.HQ.White},ep=e=>{let{isDark:t,font:n,...c}=e,{currentWorkspace:u}=(0,d.SE)(),[p,h]=(0,s.useState)(),[m,g]=(0,s.useState)(!1),f=(0,s.useCallback)(e=>{h(e),e.style(eu,[]),g(!0)},[]),{onAssetCreate:v,onAssetDelete:y}=ed(null==u?void 0:u.id);(0,s.useEffect)(()=>{p&&void 0!==t&&p.setSetting("isDarkMode",t)},[p,t]);let b=(0,s.useMemo)(()=>(0,ec.c)(t),[t]),w=(0,s.useMemo)(()=>(0,ec.m)(n),[n]);return(0,r.jsxs)(o.k,{sx:{".tl-canvas":{"div, text, textarea":{...w},...b,'g[cursor="grab"][aria-label="link handle"]':{display:"none"}}},onDrop:()=>{},onPaste:()=>{},position:"relative",h:"100%",w:"100%",className:"highlight-mask",children:[(0,r.jsx)(l.xB,{styles:{"#__textLabelMeasure, #__textMeasure":{...w}}}),(0,r.jsxs)(x.Provider,{value:p||{},children:[(0,r.jsx)(i.Dr,{onAssetCreate:v,onAssetDelete:y,...c,onMount:(0,a.v0)(c.onMount,f)}),m&&!c.readOnly&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q,{}),(0,r.jsx)(J,{})]}),m&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ea,{})})]})]})};var eh=n(75054),em=n(51987);let eg=e=>eh.cQ.getCommonBounds(e.map(i.D9.getRotatedBounds)),ef=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,{shapes:n,pageState:{camera:r},rendererBounds:o}=e;if(0===n.length)return;let a=eg(n);if(!a)return;let l=i.D9.getCameraZoom(Math.min((o.width-t)/a.width,(o.height-t)/a.height)),s=(o.width-a.width*l)/2/l,d=(o.height-a.height*l)/2/l;e.setCamera(em.B.toFixed(em.B.sub([s,d],[a.minX,a.minY])),l,"zoomed_to_fit")}},11254:function(e,t,n){"use strict";n.d(t,{c:function(){return a},m:function(){return o}});var i=n(35483);let r=e=>"".concat(e," !important"),o=e=>({fontFamily:r(e)}),a=e=>{let t={"[data-shape=image]":{".tl-inner-div":{}},img:{'&[src^="blob:"]':{animation:"loading-pulse-animation 1.5s infinite"}}},n=Object.values(i.HQ),o=e?"dark":"light";return n.forEach(e=>{t['[data-color="'.concat(e,'"]')]={color:r(i.tk.strokes[o][e]),":not(mask) > [fill], &[fill]":{"&:not([fill=none])":{fill:r(i.tk.fills[o][e]),"text, tspan":{fill:r(i.tk.strokes[o][e])}}},"[stroke]":{"&:not([stroke=none])":{stroke:r(i.tk.strokes[o][e])}}}}),t}},65753:function(e,t,n){"use strict";n.d(t,{Hn:function(){return J},dU:function(){return Q}});var i=n(73235),r=n(85525);function o(){let e=(0,i._)(["\n  fragment DefaultThemeFontFields on ThemeFont {\n    id\n    name\n    url\n  }\n"]);return o=function(){return e},e}function a(){let e=(0,i._)(["\n  ","\n  fragment DefaultThemeFields on Theme {\n    id\n    workspaceId\n    name\n    headingFont\n    headingFontWeight\n    bodyFont\n    bodyFontWeight\n    accentColor\n    logoUrl\n    config\n    priority\n    archived\n    createdTime\n    updatedTime\n    fonts {\n      ... on ThemeFont {\n        ...DefaultThemeFontFields\n      }\n    }\n  }\n"]);return a=function(){return e},e}function l(){let e=(0,i._)(["\n  ","\n  mutation CreateTheme($input: CreateThemeInput!) {\n    createTheme(input: $input) {\n      ...DefaultThemeFields\n      docCount\n    }\n  }\n\n  mutation UpdateTheme($input: UpdateThemeInput!) {\n    updateTheme(input: $input) {\n      ...DefaultThemeFields\n      docCount\n    }\n  }\n\n  mutation MakeThemeStandard($id: ID!, $newId: ID) {\n    makeThemeStandard(id: $id, newId: $newId) {\n      ...DefaultThemeFields\n      docCount\n    }\n  }\n\n  mutation DuplicateTheme($id: ID!) {\n    duplicateTheme(id: $id) {\n      ...DefaultThemeFields\n    }\n  }\n\n  query GetTheme($id: ID) {\n    theme(id: $id) {\n      ...DefaultThemeFields\n      createdBy {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n\n  query GetThemeWithCount($id: ID) {\n    theme(id: $id) {\n      ...DefaultThemeFields\n      docCount\n      siteCount\n      createdBy {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n\n  query GetThemes($workspaceId: ID, $archived: Boolean) {\n    themes(workspaceId: $workspaceId, archived: $archived) {\n      ...DefaultThemeFields\n      createdBy {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n\n  mutation ArchiveTheme($id: ID!) {\n    archiveTheme(id: $id) {\n      ...DefaultThemeFields\n      docCount\n      siteCount\n    }\n  }\n\n  mutation UnarchiveTheme($id: ID!) {\n    unarchiveTheme(id: $id) {\n      ...DefaultThemeFields\n    }\n  }\n"]);return l=function(){return e},e}let s=(0,r.Ps)(o()),d=(0,r.Ps)(a(),s);function c(){let e=(0,i._)(["\n  query SearchMention(\n    $workspaceId: ID!\n    $query: String!\n    $types: [SearchType!] = [user, doc]\n  ) {\n    search(orgId: $workspaceId, query: $query, types: $types) {\n      __typename\n      ... on DocResult {\n        id\n        title\n        text\n        archived\n        previewUrl\n        createdBy {\n          id\n          displayName\n          profileImageUrl\n        }\n        organization {\n          id\n        }\n        editors {\n          user {\n            id\n            displayName\n            profileImageUrl\n          }\n          lastViewed\n          lastEdited\n        }\n        docUser {\n          lastViewed\n          lastEdited\n          favorited\n        }\n        orgAccess\n        updatedTime\n        createdTime\n        editedTime\n      }\n      ... on User {\n        id\n        displayName\n        email\n        profileImageUrl\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){let e=(0,i._)(["\n  fragment ReactionFields on Reaction {\n    emoji\n    count\n    targetId\n    targetType\n    docId\n    users {\n      id\n      displayName\n      profileImageUrl\n    }\n  }\n"]);return u=function(){return e},e}function p(){let e=(0,i._)(["\n  fragment CommentAuthorFields on User {\n    id\n    displayName\n    profileImageUrl\n    email\n  }\n"]);return p=function(){return e},e}function h(){let e=(0,i._)(["\n  ","\n  ","\n  fragment ReplyFields on Comment {\n    id\n    commentId\n    content\n    createdTime\n    updatedTime\n    archived\n    user {\n      ...CommentAuthorFields\n    }\n    reactions {\n      ...ReactionFields\n    }\n  }\n"]);return h=function(){return e},e}function m(){let e=(0,i._)(["\n  ","\n  ","\n  ","\n  fragment CommentFields on Comment {\n    id\n    docId\n    cardId\n    content\n    targetText\n    targetHtml\n    createdTime\n    updatedTime\n    archived\n    targetId\n    status\n    user {\n      ...CommentAuthorFields\n    }\n    replies {\n      ...ReplyFields\n    }\n    reactions {\n      ...ReactionFields\n    }\n  }\n"]);return m=function(){return e},e}function g(){let e=(0,i._)(["\n  fragment DocCollaboratorFields on DocCollaborator {\n    docId\n    user {\n      id\n      displayName\n      email\n      profileImageUrl\n    }\n    permission\n    guest\n    accessLinkId\n  }\n\n  fragment DocInvitationsFields on DocInvitation {\n    id\n    docId\n    email\n    permission\n  }\n"]);return g=function(){return e},e}function f(){let e=(0,i._)(["\n  fragment DocChannelFields on DocChannel {\n    id\n    name\n    slug\n    permission\n  }\n"]);return f=function(){return e},e}function x(){let e=(0,i._)(["\n  fragment DocEditorsFields on DocEditor {\n    user {\n      id\n      displayName\n      email\n      profileImageUrl\n    }\n    lastEdited\n  }\n"]);return x=function(){return e},e}function v(){let e=(0,i._)(["\n  ","\n  fragment DocSiteFields on Site {\n    id\n    archived\n    workspaceId\n    name\n    domains {\n      id\n      siteId\n      name\n      status\n      builtin\n    }\n    hasCustomDomain\n    routes {\n      id\n      siteId\n      docId\n      path\n      offline\n      doc {\n        id\n        title\n      }\n    }\n    currentDeployment {\n      id\n      siteId\n      buildHost\n      deploymentTime\n    }\n    createdTime\n    updatedTime\n    previewUrl\n    pageCount\n    archived\n    enabled\n    faviconUrl\n    themeId\n    navEnabled\n    navContent\n    gtmContainerId\n  }\n"]);return v=function(){return e},e}function y(){let e=(0,i._)(["\n  ","\n  mutation AddCollaborators(\n    $docId: ID!\n    $collaborators: [DocCollaboratorInput!]!\n  ) {\n    addCollaborators(docId: $docId, collaborators: $collaborators) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n    }\n  }\n"]);return y=function(){return e},e}function b(){let e=(0,i._)(["\n  ","\n  mutation RemoveCollaborators(\n    $docId: ID!\n    $collaborators: [DocCollaboratorRemovalInput!]!\n  ) {\n    removeCollaborators(docId: $docId, collaborators: $collaborators) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){let e=(0,i._)(["\n  ","\n  mutation AddCollaboratorByAccessLink($docId: ID!) {\n    addCollaboratorByAccessLink(docId: $docId) {\n      id\n      collaborators {\n        ...DocCollaboratorFields\n      }\n    }\n  }\n"]);return w=function(){return e},e}function C(){let e=(0,i._)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  query GetDoc($id: ID!, $password: String) {\n    doc(id: $id, password: $password) {\n      id\n      title\n      titleEdited\n      archived\n      disabled\n      createdTime\n      updatedTime\n      editedTime\n      savedTime\n      currentSnapshotId\n      publishedSnapshotId\n      publishedSnapshot {\n        content\n      }\n      publishedTime\n      comments {\n        ...CommentFields\n      }\n      reactions {\n        ...ReactionFields\n      }\n      accessLinks {\n        id\n        docId\n        type\n        permission\n        token\n        url\n      }\n      links {\n        url\n        status\n      }\n      orgAccess\n      organization {\n        id\n        name\n        products\n      }\n      theme {\n        ...DefaultThemeFields\n        fonts {\n          id\n          name\n          url\n        }\n      }\n      collaborators {\n        ...DocCollaboratorFields\n      }\n      invitations {\n        ...DocInvitationsFields\n      }\n      editors {\n        ...DocEditorsFields\n      }\n      createdBy {\n        displayName\n        id\n        email\n      }\n      channels {\n        ...DocChannelFields\n      }\n      site {\n        ...DocSiteFields\n      }\n      docGenerateInput {\n        id\n        docGeneration {\n          id\n          generationType\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}function k(){let e=(0,i._)(["\n  query GetDocRobots($id: ID!) {\n    doc(id: $id) {\n      id\n      title\n      createdTime\n      updatedTime\n      currentSnapshot {\n        id\n        docId\n        content\n      }\n      titleCard {\n        previewUrl\n        text\n      }\n      organization {\n        id\n        name\n        products\n      }\n      createdBy {\n        displayName\n        id\n        email\n      }\n    }\n  }\n"]);return k=function(){return e},e}function j(){let e=(0,i._)(["\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  subscription SubscribeToDoc($id: ID!) {\n    doc(id: $id) {\n      ... on DocSubscription {\n        id\n        title\n        titleEdited\n        archived\n        updatedTime\n        editedTime\n        savedTime\n        publishedTime\n        accessLinks {\n          id\n          docId\n          permission\n          token\n          url\n        }\n        channels {\n          ...DocChannelFields\n        }\n        collaborators {\n          ...DocCollaboratorFields\n        }\n        editors {\n          ...DocEditorsFields\n        }\n        invitations {\n          ...DocInvitationsFields\n        }\n        theme {\n          ...DefaultThemeFields\n        }\n        reactions {\n          ...ReactionFields\n        }\n        orgAccess\n      }\n\n      ... on DocCommentsSubscription {\n        id\n        comments {\n          ...CommentFields\n        }\n      }\n      ... on DocReactionsSubscription {\n        id\n        reactions {\n          ...ReactionFields\n        }\n      }\n      ... on DocLinksSubscription {\n        id\n        links {\n          url\n          status\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}function S(){let e=(0,i._)(["\n  mutation UpdateDocTitle($id: ID!, $title: String, $titleEdited: Boolean) {\n    updateDoc(input: { id: $id, title: $title, titleEdited: $titleEdited }) {\n      id\n      title\n      titleEdited\n    }\n  }\n"]);return S=function(){return e},e}function A(){let e=(0,i._)(["\n  mutation UpdateDocOrgAccess($id: ID!, $orgAccess: Permission) {\n    updateDoc(input: { id: $id, orgAccess: $orgAccess }) {\n      id\n      orgAccess\n    }\n  }\n"]);return A=function(){return e},e}function I(){let e=(0,i._)(["\n  mutation UpdateDocAccessLinks($id: ID!, $accessLinks: [AccessLinkInput!]) {\n    updateDoc(input: { id: $id, accessLinks: $accessLinks }) {\n      id\n      accessLinks {\n        permission\n        id\n      }\n    }\n  }\n"]);return I=function(){return e},e}function z(){let e=(0,i._)(["\n  ","\n  mutation UpdateDocTheme($id: ID!, $themeId: String) {\n    updateDoc(input: { id: $id, themeId: $themeId }) {\n      id\n      theme {\n        ...DefaultThemeFields\n      }\n    }\n  }\n"]);return z=function(){return e},e}function L(){let e=(0,i._)(["\n  mutation InviteMembers($workspaceId: ID!, $invitees: [InvitationInput!]!) {\n    inviteMembers(orgId: $workspaceId, invitees: $invitees) {\n      id\n      name\n      invitations {\n        email\n      }\n    }\n  }\n"]);return L=function(){return e},e}function E(){let e=(0,i._)(["\n  ","\n  ","\n  ","\n  mutation CreateComment($input: CreateCommentInput) {\n    createComment(input: $input) {\n      id\n      docId\n      cardId\n      content\n      targetText\n      targetHtml\n      createdTime\n      updatedTime\n      commentId\n      archived\n      targetId\n      status\n      user {\n        ...CommentAuthorFields\n      }\n      replies {\n        ...ReplyFields\n      }\n      reactions {\n        ...ReactionFields\n      }\n    }\n  }\n"]);return E=function(){return e},e}function N(){let e=(0,i._)(["\n  mutation UpdateComment($input: UpdateCommentInput!) {\n    updateComment(input: $input) {\n      id\n      docId\n      content\n      updatedTime\n    }\n  }\n"]);return N=function(){return e},e}function M(){let e=(0,i._)(["\n  mutation UpdateCommentStatus($input: UpdateCommentStatusInput!) {\n    updateCommentStatus(input: $input) {\n      id\n      status\n      updatedTime\n    }\n  }\n"]);return M=function(){return e},e}function _(){let e=(0,i._)(["\n  mutation RemoveComment($id: ID!) {\n    archiveComment(id: $id) {\n      id\n      archived\n    }\n  }\n"]);return _=function(){return e},e}function T(){let e=(0,i._)(["\n  ","\n  fragment DocReactionsCreate on Doc {\n    reactions {\n      ...ReactionFields\n    }\n  }\n"]);return T=function(){return e},e}function R(){let e=(0,i._)(["\n  ","\n  ","\n  fragment DocCommentsCreate on Doc {\n    comments {\n      id\n      docId\n      cardId\n      content\n      targetText\n      targetHtml\n      createdTime\n      updatedTime\n      archived\n      targetId\n      status\n      user {\n        ...CommentAuthorFields\n      }\n    }\n  }\n  fragment DocRepliesCreate on Doc {\n    comments {\n      id\n      replies {\n        ...ReplyFields\n      }\n    }\n  }\n  fragment DocCommentsUpdate on Doc {\n    comments {\n      id\n      docId\n      content\n      updatedTime\n      reactions {\n        ...ReactionFields\n      }\n    }\n  }\n  fragment DocRepliesUpdate on Doc {\n    comments {\n      id\n      replies {\n        id\n        docId\n        content\n        updatedTime\n        reactions {\n          ...ReactionFields\n        }\n      }\n    }\n  }\n  fragment DocCommentsRemove on Doc {\n    comments {\n      id\n      archived\n    }\n  }\n  fragment DocRepliesRemove on Doc {\n    comments {\n      id\n      replies {\n        id\n        archived\n      }\n    }\n  }\n"]);return R=function(){return e},e}function H(){let e=(0,i._)(["\n  ","\n  mutation AddReaction($reactionInput: AddReactionInput!) {\n    addReaction(input: $reactionInput) {\n      ...ReactionFields\n    }\n  }\n"]);return H=function(){return e},e}function P(){let e=(0,i._)(["\n  ","\n  mutation RemoveReaction($reactionInput: RemoveReactionInput!) {\n    removeReaction(input: $reactionInput) {\n      ...ReactionFields\n    }\n  }\n"]);return P=function(){return e},e}function O(){let e=(0,i._)(["\n  query GetMemoAnalytics($memoId: ID!) {\n    memoStats(id: $memoId) {\n      memoId\n      uniqueViewers\n      uniqueEditors\n      cardCount\n      lastOpened\n      viewers {\n        user {\n          id\n          displayName\n          email\n          profileImageUrl\n        }\n        visitorId\n        lastOpened\n        cardsViewed\n      }\n      dailyViews {\n        dayCount\n        timezone\n        everyone {\n          date\n          uniqueVisitors\n        }\n        viewers {\n          date\n          uniqueVisitors\n        }\n      }\n    }\n  }\n\n  query GetDocCardsAnalytics($docId: ID!, $userId: ID) {\n    docCardsStats(docId: $docId, userId: $userId) {\n      docId\n      uniqueVisitors\n      uniqueEditors\n      cardCount\n      everyone {\n        cardId\n        viewTimePercent\n        viewersPercent\n      }\n      viewers {\n        cardId\n        viewTimePercent\n        viewersPercent\n      }\n    }\n  }\n"]);return O=function(){return e},e}function D(){let e=(0,i._)(["\n  mutation SetDocPassword($docId: ID!, $password: String!) {\n    setDocPassword(id: $docId, password: $password) {\n      id\n      accessLinks {\n        id\n        permission\n        type\n      }\n    }\n  }\n"]);return D=function(){return e},e}function W(){let e=(0,i._)(["\n  mutation RemoveDocPassword($docId: ID!) {\n    removeDocPassword(id: $docId) {\n      id\n      accessLinks {\n        id\n        permission\n        type\n      }\n    }\n  }\n"]);return W=function(){return e},e}function F(){let e=(0,i._)(["\n  query GetDocPassword($docId: ID!) {\n    getDocPassword(id: $docId)\n  }\n"]);return F=function(){return e},e}function B(){let e=(0,i._)(["\n  query GetPublicDoc($docId: ID!) {\n    publicDoc(id: $docId) {\n      id\n      logoUrl\n    }\n  }\n"]);return B=function(){return e},e}function G(){let e=(0,i._)(["\n  query GetDocCurrentSnapshotId($id: ID!) {\n    doc(id: $id) {\n      id\n      currentSnapshotId\n    }\n  }\n"]);return G=function(){return e},e}(0,r.Ps)(l(),d),(0,r.Ps)(c());let U=(0,r.Ps)(u()),V=(0,r.Ps)(p()),q=(0,r.Ps)(h(),U,V),K=(0,r.Ps)(m(),q,U,V),Y=(0,r.Ps)(g()),X=(0,r.Ps)(f()),$=(0,r.Ps)(x()),Z=(0,r.Ps)(v(),d);(0,r.Ps)(y(),Y),(0,r.Ps)(b(),Y),(0,r.Ps)(w(),Y),(0,r.Ps)(C(),K,Y,$,X,Z,d,U),(0,r.Ps)(k());let Q=(0,r.Ps)(j(),K,Y,$,X,d,U);(0,r.Ps)(S()),(0,r.Ps)(A()),(0,r.Ps)(I()),(0,r.Ps)(z(),d),(0,r.Ps)(L()),(0,r.Ps)(E(),q,U,V),(0,r.Ps)(N()),(0,r.Ps)(M()),(0,r.Ps)(_()),(0,r.Ps)(T(),U);let J=(0,r.Ps)(R(),q,V);(0,r.Ps)(H(),U),(0,r.Ps)(P(),U),(0,r.Ps)(O()),(0,r.Ps)(D()),(0,r.Ps)(W()),(0,r.Ps)(F()),(0,r.Ps)(B()),(0,r.Ps)(G())},49214:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let i={generate:(0,n(37164).kP)("0123456789abcdefghijklmnopqrstuvwxyz",15)}},63416:function(e,t,n){"use strict";n.d(t,{P9:function(){return p},Yz:function(){return g},yd:function(){return x},z3:function(){return m}});var i=n(1997),r=n(86797),o=n(97495),a=n(85037),l=n(2562),s=n(45441),d=n(26034),c=n(23641),u=n(86290);let p=e=>{try{let t=(0,u.dN)(),n=(0,i.Z)(e),d=(0,r.Z)(n,0);if((0,o.Z)(n)||(0,a.Z)(n))return(0,l.Z)(d,new Date,{locale:t});return"".concat((0,s.Z)(n,"PPp",{locale:t}))}catch(e){return console.error("[normalizeDate] Error normalizing date:",e),"date unknown"}},h=e=>null==e?void 0:e.reduce((e,t)=>!e||t.updatedTime>(null==e?void 0:e.updatedTime)?t:e,null),m=e=>{let t=h(e.replies);return t?e.updatedTime>(null==t?void 0:t.updatedTime)?e.updatedTime:t.updatedTime:e.updatedTime},g=(e,t)=>{let n=h(e.replies),i=h(t.replies),r=n?n.updatedTime:e.updatedTime,o=i?i.updatedTime:t.updatedTime;return r>o?-1:o>r?1:0},f="createdTime",x=e=>{let{items:t,sortBy:n=f,latestTimeGetterFn:r}=e;return t.slice().sort((e,t)=>"function"==typeof n?n(e,t):(0,d.Z)((0,i.Z)(e[n]),(0,i.Z)(t[n]))).reduce((e,t)=>{let n=r?(0,i.Z)(r(t)):(0,i.Z)(t[f]),a=new Date;return(0,o.Z)(n)?e.today=e.today.concat(t):1>(0,c.Z)(a,n)?e.thisWeek=e.thisWeek.concat(t):e.earlier=e.earlier.concat(t),e},{today:[],thisWeek:[],earlier:[]})}},42907:function(e,t,n){"use strict";n.d(t,{Hs:function(){return i},Rf:function(){return r}}),n(84636),n(2784);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e.length?1===e.length?e[0]:2===e.length?e.join(" and "):e.length<=t?"".concat([e.slice(0,e.length-1).join(", "),e[e.length-1]].join(", and ")):"".concat([e.slice(0,t).join(", "),"".concat(e.length-t," ").concat(e.length-t>1?"others":"other")].join(", and ")):null},r=e=>{let{users:t,selfUserId:n}=e;return i(t?[...t].sort(e=>(null==e?void 0:e.id)===n?-1:1).map(e=>(null==e?void 0:e.id)===n?"You":(null==e?void 0:e.displayName)||""):[])}},53979:function(e,t,n){"use strict";n.d(t,{Br:function(){return u},CI:function(){return p}});var i=n(30733),r=n.n(i),o=n(54073),a=n.n(o),l=n(2784),s=n(8848);class d extends s.v{cleanup(){document.removeEventListener("containerResize",this.emitResize)}constructor(){super(),this.emitResize=e=>{this.emit("resize",e)},document.addEventListener("containerResize",this.emitResize)}}let c=r()(()=>new d),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,[n,i]=(0,l.useState)(!1),r=(0,l.useMemo)(c,[]);return(0,l.useEffect)(()=>{let n;let o=a()(r=>{let{target:o}=r;o&&e.current&&h(e.current,o)&&(clearTimeout(n),i(!0),n=setTimeout(()=>{i(!1)},t+100))},t,{leading:!0,trailing:!1,maxWait:t});return r.on("resize",o)},[r,t,e]),n},p=e=>{e.dispatchEvent(new Event("containerResize",{bubbles:!0}))},h=(e,t)=>{let n=e;do{if(n!==t)continue;return!0}while(n=n.parentElement);return!1}},36230:function(e,t,n){"use strict";n.d(t,{A:function(){return o},Z:function(){return a}});var i=n(2784),r=n(9237);let o="is-dragging-over",a=(e,t)=>{let n=(0,i.useCallback)(n=>{var i;(!t||t(n))&&(null===(i=e.current)||void 0===i||i.classList.add(o))},[e]),a=(0,i.useCallback)(()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.classList.remove(o)},[e]);return{onDragOver:r.Gb,onDragEnter:n,onDragLeave:a,onDrop:a}}},27003:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});let i=(e,t)=>o(new r(e,null),t);class r{get type(){return this.jsonNode.type}get text(){return this.jsonNode.text}get content(){return this.jsonNode.content?this.jsonNode.content.map(e=>new r(e,this)):this.jsonNode.content}get attrs(){return this.jsonNode.attrs}set attrs(e){this.jsonNode.attrs=e}constructor(e,t){this.jsonNode=e,this.parent=t,this.__type="JSONContentNode"}}let o=(e,t)=>{if(t(e),e.content)for(let n of e.content)o(n,t)}},48010:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var i=n(6238),r=n.n(i),o=n(37164);class a{_flush(){this._handle=0;let e=this._queue;this._queue=[],e.forEach(e=>{let{fn:t}=e;t()})}push(e,t){if(t){let n=this._queue.findIndex(e=>e.id===t);n>-1?this._queue.splice(n,1,{fn:e,id:t}):this._queue.push({fn:e,id:t})}else this._queue.push({fn:e,id:(0,o.x0)(5)});this._handle||(this._handle=requestAnimationFrame(this._flush.bind(this)))}constructor(){this._queue=[],this._handle=0,this._handle=requestAnimationFrame(this._flush.bind(this))}}let l=r()(()=>new a)},91998:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(87254),r=n(23691);let o=e=>e&&e.length?e:i.ag._({id:"7ZviFu",values:{GAMMA_ARTIFACT_PROPER_NOUN:r.Yc}})},62935:function(e,t,n){"use strict";let i;n.d(t,{R:function(){return o}});var r=n(35368);let o=n.n(r)()(i)},68951:function(e,t,n){"use strict";n.d(t,{q:function(){return r},v:function(){return i}});let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)throw Error("unexpected value ".concat(e))},r=e=>Object.entries(e)},36517:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KNOWN_BAD_HOSTNAMES=t.KNOWN_GOOD_HOSTNAMES=t.KNOWN_GOOD_TLDS=t.TRUSTED_WORKSPACE_IDS=t.GAMMA_WORKSPACE_ID_PRODUCTION=t.GAMMA_WORKSPACE_ID_STAGING=t.isTrustedTLD=t.removeWWWPrefix=void 0,t.removeWWWPrefix=e=>e.replace(/^www\./,""),t.isTrustedTLD=e=>t.KNOWN_GOOD_TLDS.some(t=>e===t||e.endsWith(".".concat(t))),t.GAMMA_WORKSPACE_ID_STAGING="QWjS6fBfpt",t.GAMMA_WORKSPACE_ID_PRODUCTION="zc87vhr30n8uf3n",t.TRUSTED_WORKSPACE_IDS=["acme",t.GAMMA_WORKSPACE_ID_STAGING,t.GAMMA_WORKSPACE_ID_PRODUCTION],t.KNOWN_GOOD_TLDS=["gamma.app","gamma.site","gammastaging.site","wikipedia.org"],t.KNOWN_GOOD_HOSTNAMES=["gamma.app","gamma.site","cdn.gamma.app","staging.gamma.app","cdn-staging.gamma.app","careers.gamma.app","design.gamma.site","orzo.gamma.site","www.markdownguide.org","www.youtube.com","www.linkedin.com","www.instagram.com","twitter.com","www.tiktok.com","help.gamma.app","gamma.new","join.slack.com","www.google.com","www.facebook.com","groups.google.com","en.wikipedia.org","replit.com","www.bea.gov","doi.org","es.wikipedia.org","app.stotles.com","docs.google.com","www.figma.com","www.ncbi.nlm.nih.gov","github.com","youtu.be","tr.wikipedia.org","uk.wikipedia.org","ru.wikipedia.org","ro.wikipedia.org","pt.wikipedia.org","example.com","zh.wikipedia.org","www.sciencedirect.com","fr.wikipedia.org","colab.research.google.com","player.fm","m.facebook.com","www.britannica.com","www.amazon.com","www.podcasts.com","ko.wikipedia.org","www.example.com","vi.wikipedia.org","www.notion.so","chat.openai.com","calendly.com","www.bing.com","pubmed.ncbi.nlm.nih.gov","open.spotify.com","de.wikipedia.org","id.wikipedia.org","www.researchgate.net","techcrunch.com","www.cnn.com","pl.wikipedia.org","api.whatsapp.com","youtube.com","hbr.org","podcasters.spotify.com","ar.wikipedia.org","th.wikipedia.org","dictionary.cambridge.org","www.kaggle.com","es.surveymonkey.com","www.canva.com","www.forbes.com","lookerstudio.google.com","unsplash.com","www.cdc.gov","az.wikipedia.org","it.wikipedia.org","www.investopedia.com","www.pinterest.com","music.amazon.com","kk.wikipedia.org","scholar.google.com","www.nature.com","www.producthunt.com","creativecommons.org","www.masterclass.com","fa.wikipedia.org","www.bbc.com","www.nytimes.com","en.m.wikipedia.org","sr.wikipedia.org","uz.wikipedia.org","ieeexplore.ieee.org","play.google.com","es.m.wikipedia.org","cloud.google.com","www.imdb.com","www.mckinsey.com","aws.amazon.com","www.microsoft.com","chrome.google.com","www.businessinsider.com","bing.com","www.porsche.com"].map(t.removeWWWPrefix),t.KNOWN_BAD_HOSTNAMES=["trixmovie.com","luna-3d.com","luna-3d.com:443","kiladkoerm.com","movie.geoflix.me","wtach.club","movstream.fun","novelastv.me","xzc.one","srv1.iyxwfree.my.id","followme.tribe.so","xzc.icu","marcolinks.click","multilibb.cc","exl-trk.com","uk.ebookarea.xyz","wemovietv.com","123moviesdb.com","www.realpdfdumps.com","pede.4tv.live","voxmovie.com","stream.evmovies.com","dmovie.fun","pdfhost.io","megavids.online","www.pdfdumpspro.com","gomovie.stream","dmovie.fun:443","go123.stream","ca.ebookarea.xyz","movie4you.online","www.123movieslink.com","moviedaily.site","maxstream.site","ftmovies.xyz","moviescreen.biz","moviesfox.site","morthenfile.web.app"].map(t.removeWWWPrefix)},27967:function(e,t,n){"use strict";var i=Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)}(n(36517),t)},99818:function(e,t){"use strict";var n,i;t.L9=t.tX=void 0;let r=16/9;t.tX={fluid:r,"16x9":r,"16x9_portrait":9/16,"4:3":4/3,"3:4":3/4,letter:11/8.5,letter_portrait:8.5/11,a4:11.69/8.27,a4_portrait:8.27/11.69,square:1,"4:5":5/4,"5:4":.8},(i=n||(t.L9=n={})).landscape="landscape",i.portrait="portrait"},80660:function(){}}]);
//# sourceMappingURL=7238-5150c7255763f9d6.js.map