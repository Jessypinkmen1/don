(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4332],{20342:function(e,t){"use strict";t.Z={src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",height:197,width:170,blurWidth:0,blurHeight:0}},77620:function(e,t){"use strict";t.Z={src:"/_next/static/media/google-drive.2d314cf9.svg",height:78,width:87,blurWidth:0,blurHeight:0}},20737:function(e,t,r){"use strict";r.d(t,{I:function(){return p}});var i=r(52322),n=r(26284),a=r(70065),o=r(24772),l=r(62614),s=r(85573),c=r(43297),d=r(74105),u=r(20816),h=r(5879),g=r(2784);let p=e=>{let{url:t,placeholder:r,isDisabled:p=!1,variant:m="plain",customLabel:f,onClick:x,...v}=e,[b,y]=(0,g.useState)(!1),{hasCopied:j,onCopy:w}=(0,n.V)(t),C=(0,g.useRef)(null),A=(0,a.p)(),k="link-copied-toast",_=(0,o.S)({base:!0,sm:!1},{fallback:"sm"});(0,g.useEffect)(()=>{C.current&&b&&(C.current.focus(),C.current.select())},[b]);let S=(0,g.useCallback)(()=>y(!0),[]),P=(0,g.useCallback)(()=>y(!1),[]),E=(0,g.useCallback)(()=>{w(),A.isActive(k)||A({id:k,title:(0,i.jsx)(h.cC,{id:"pQjjYo"}),status:"success",duration:5e3}),null==x||x()},[w,A]),I=f||(0,i.jsx)(h.cC,{id:"he3ygx"}),U=!!(_&&void 0!==f),R=(0,i.jsx)(l.z,{isDisabled:p,onClick:E,variant:m,w:"100%",...U?{}:{height:"2rem",margin:2},...p?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:j?(0,i.jsx)(h.cC,{id:"6V3Ea3"}):I}),T=(0,i.jsx)(s.I,{ref:C,type:"text",variant:"filled",value:t,isReadOnly:!0,isDisabled:p,placeholder:r||void 0,onClick:S,onBlur:P,pointerEvents:p?"none":void 0,h:"3rem",...v});return U?(0,i.jsxs)(c.K,{w:"100%",children:[T,R]}):(0,i.jsxs)(d.B,{children:[T,(0,i.jsx)(u.x,{h:"3rem",zIndex:1,w:"unset",children:R})]})}},94818:function(e,t,r){"use strict";r.d(t,{o:function(){return l}});var i=r(52322),n=r(29494),a=r(2784),o=r(40382);let l=(0,a.forwardRef)((e,t)=>{let{initialHeight:r="1em",bottomSpacing:l=0,onChange:s,...c}=e,d=(0,a.useCallback)(()=>{"function"!=typeof t&&(null==t?void 0:t.current)&&(t.current.style.height=r,t.current.style.height="".concat(t.current.scrollHeight+l,"px"))},[r,t,l]);(0,a.useEffect)(()=>{d()},[d]),(0,a.useEffect)(()=>{d()},[d,c.value]);let u=(0,o.lz)(100);return(0,a.useEffect)(()=>{u&&d()},[u,d]),(0,i.jsx)(n.g,{h:r,minH:r,ref:t,resize:"none",overflow:"hidden",...c,onChange:e=>{d(),null==s||s(e)}})});l.displayName="ResizingTextarea"},15377:function(e,t,r){"use strict";r.d(t,{Cn:function(){return A},zC:function(){return S}});var i=r(52322),n=r(70065),a=r(28535),o=r(43297),l=r(77533),s=r(29117),c=r(35183),d=r(97166),u=r(89099),h=r(29494),g=r(75768),p=r(62614),m=r(32899),f=r(42946),x=r(49929),v=r(64253),b=r(5879),y=r(87254),j=r(14304),w=r.n(j),C=r(2784);let A=e=>{let{isDark:t,feedbackTags:r=[],trackRating:m,trackFeedback:v}=e,[y,j]=(0,C.useState)(null),[A,P]=(0,C.useState)(!1),[E,I]=(0,C.useState)(""),[U,R]=(0,C.useState)(new Set),T=(0,C.useRef)(null),O=(0,n.p)(),M=(0,C.useCallback)(e=>{j(e),null==m||m(e),O({title:(0,i.jsx)(b.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(()=>{var e;null==T||null===(e=T.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[m,O]),D=(0,C.useCallback)(e=>{e||(null==v||v(y,w().sanitize(E),Array.from(U)),O({title:(0,i.jsx)(b.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),P(!0)},[E,U,y,v,O]);return(0,i.jsx)(a.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:t?"whiteAlpha.100":"gray.200",position:"relative",children:A?(0,i.jsxs)(l.x,{color:t?"green.400":"green.600",textAlign:"center",children:[(0,i.jsx)(x.G,{icon:f.fV7})," ",(0,i.jsx)(b.cC,{id:"SOk0EB"})]}):(0,i.jsxs)(o.K,{spacing:4,children:[(0,i.jsxs)(o.K,{alignItems:"center",spacing:"1",children:[(0,i.jsx)(l.x,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,i.jsx)(b.cC,{id:"/djJcD"})}),y?(0,i.jsxs)(l.x,{textAlign:"center",color:t?"green.400":"green.600",children:[(0,i.jsx)(x.G,{icon:f.fV7})," ",(0,i.jsx)(b.cC,{id:"SOk0EB"})]}):(0,i.jsx)(l.x,{children:(0,i.jsx)(b.cC,{id:"cguR5Y"})})]}),(0,i.jsx)(s.U,{fontSize:"xl",width:"100%",children:k.map(e=>{let{key:r,ariaLabel:n,label:a,icon:o,color:l}=e,s=y===r;return(0,i.jsx)(_,{ariaLabel:n,label:a,icon:o,color:l,onClick:()=>M(r),isSelected:s,isDisabled:!1,isDark:t},r)})}),y&&"good"!==y&&r.length>0&&(0,i.jsxs)(c.NI,{children:[(0,i.jsx)(d.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:(0,i.jsx)(b.cC,{id:"467HY8"})}),(0,i.jsx)(u.E,{children:r.map(e=>{let{key:r,label:n}=e;return(0,i.jsx)(u.U,{onClick:()=>{R(e=>{let t=new Set(e);return t.has(r)?t.delete(r):t.add(r),t})},children:(0,i.jsx)(S,{label:n,isDark:t,isSelected:U.has(r)})},r)})})]}),y&&(0,i.jsxs)(c.NI,{textAlign:"center",children:[(0,i.jsx)(d.l,{fontSize:"sm",color:t?"whiteAlpha.800":"gray.500",children:"good"===y?(0,i.jsx)(b.cC,{id:"AmM8eQ"}):(0,i.jsx)(b.cC,{id:"PhJTrf"})}),(0,i.jsx)(h.g,{value:E,onChange:e=>{I(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,i.jsxs)(g.h,{spacing:"4",ref:T,children:[(0,i.jsx)(p.z,{variant:"text",onClick:()=>{D(!0)},children:(0,i.jsx)(b.cC,{id:"6Uau97"})}),(0,i.jsx)(p.z,{variant:"solid",isDisabled:""===E&&0===U.size,onClick:()=>D(!1),minW:32,children:(0,i.jsx)(b.cC,{id:"hQRttt"})})]})]})]})})},k=[{key:"bad",label:(0,i.jsx)(b.cC,{id:"XSfVsn"}),ariaLabel:()=>y.ag._({id:"XSfVsn"}),icon:f.KfU,color:"red"},{key:"meh",label:(0,i.jsx)(b.cC,{id:"0ASQJH"}),ariaLabel:()=>y.ag._({id:"0ASQJH"}),icon:f.C4q,color:"yellow"},{key:"good",label:(0,i.jsx)(b.cC,{id:"9ZYnL5"}),ariaLabel:()=>y.ag._({id:"9ZYnL5"}),icon:f.ctA,color:"green"}],_=e=>{let{label:t,ariaLabel:r,icon:n,color:a,isSelected:o,onClick:s,isDisabled:c,isDark:d}=e,u=d?"".concat(a,".200"):"".concat(a,".100"),h=d?"".concat(a,".600"):"".concat(a,".500");return(0,i.jsx)(v.kH,{label:t,placement:"top",children:(0,i.jsx)(m.h,{"aria-label":r(),boxShadow:"none",bg:o?u:d?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(o?1:.5),cursor:"not-allowed"},color:o?h:d?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(a,".100"),color:"".concat(a,".500")},flex:1,icon:(0,i.jsx)(l.x,{fontSize:"2xl",children:(0,i.jsx)(x.G,{icon:n})}),isDisabled:c,variant:"plain",onClick:s})})},S=e=>{let{label:t,isDark:r,isSelected:n}=e;return(0,i.jsx)(p.z,{variant:"plain",size:"sm",height:"6",boxShadow:"none",bgGradient:"none",bg:n?r?"purple.500":"purple.100":r?"gray.800":"gray.50",color:n?r?"white":"purple.700":r?"white":"gray.800",borderColor:r?"whiteAlpha.200":"blackAlpha.200",_hover:{color:void 0},cursor:"pointer",children:t})}},46226:function(e,t,r){"use strict";r.d(t,{PZ:function(){return T},iX:function(){return R},sn:function(){return U}});var i=r(52322),n=r(55478),a=r(70065),o=r(43679),l=r(34071),s=r(332),c=r(39429),d=r(89833),u=r(43297),h=r(77533),g=r(89099),p=r(75768),m=r(62614),f=r(29058),x=r(32899),v=r(42946),b=r(49929),y=r(64253),j=r(5879),w=r(87254),C=r(14304),A=r.n(C),k=r(2784),_=r(94818),S=r(65068),P=r(15377);let E={bg:"red.100",_hover:{bg:"red.200"},borderColor:"red.600",color:"red.600"},I={bg:"green.100",_hover:{bg:"green.200"},borderColor:"green.600",color:"green.600"},U=e=>{let{rating:t,setRating:r,RatingButtons:f,trackFeedback:x,feedbackTags:v}=e,{isOpen:b,onOpen:y,onClose:C}=(0,n.q)(),S=(0,k.useCallback)(e=>{r(e),y()},[r,y]),[E,I]=(0,k.useState)(""),[U,R]=(0,k.useState)(new Set),T=(0,k.useCallback)(()=>{I(""),R(new Set),C()},[C]),O=(0,a.p)(),M=(0,k.useCallback)(()=>{null==x||x(t,A().sanitize(E),Array.from(U)),O({title:(0,i.jsx)(j.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0}),T()},[E,U,t,x,O,T]);return(0,i.jsxs)(o.J,{isOpen:b,onOpen:y,onClose:T,placement:"top",closeOnBlur:!0,isLazy:!0,variant:"modal",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(f,{rating:t,setRating:S})}),(0,i.jsx)(s.h,{children:(0,i.jsxs)(c.y,{borderRadius:"lg",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",p:3,children:[(0,i.jsx)(d.u,{}),(0,i.jsxs)(u.K,{alignItems:"flex-end",children:[(0,i.jsx)(h.x,{alignSelf:"flex-start",fontSize:"sm",color:"gray.500",children:"good"===t?(0,i.jsx)(j.cC,{id:"uA8iBc"}):(0,i.jsx)(j.cC,{id:"tq89gP"})}),t&&"good"!==t&&v&&v.length>0&&(0,i.jsx)(g.E,{children:v.map(e=>{let{key:t,label:r}=e;return(0,i.jsx)(g.U,{onClick:()=>{R(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},children:(0,i.jsx)(P.zC,{label:r,isSelected:U.has(t)})},t)})}),(0,i.jsx)(_.o,{initialHeight:"4em",value:E,onChange:e=>I(e.target.value),fontSize:"sm",placeholder:w.ag._({id:"eYeGuP"}),p:1,px:2,borderRadius:"0"}),(0,i.jsxs)(p.h,{size:"sm",children:[(0,i.jsx)(m.z,{variant:"ghost",onClick:T,children:(0,i.jsx)(j.cC,{id:"6Uau97"})}),(0,i.jsx)(m.z,{variant:"solid",onClick:M,children:(0,i.jsx)(j.cC,{id:"1m41/U"})})]})]})]})})]})},R=(0,f.G)((e,t)=>{let{rating:r,setRating:n}=e,a=(0,S.et)();return(0,i.jsxs)(p.h,{spacing:0,p:0,isAttached:!0,ref:t,children:[(0,i.jsx)(y.kH,{label:(0,i.jsx)(j.cC,{id:"kR82DG"}),placement:"top",children:(0,i.jsx)(x.h,{...a,icon:(0,i.jsx)(b.G,{icon:v.bam}),"aria-label":w.ag._({id:"kqV4i0"}),..."poor"===r?E:{},onClick:()=>n("poor"),position:"relative",zIndex:"poor"===r?1:0})}),(0,i.jsx)(y.kH,{label:(0,i.jsx)(j.cC,{id:"y1GvbS"}),placement:"top",children:(0,i.jsx)(x.h,{...a,icon:(0,i.jsx)(b.G,{icon:v.u8Q}),"aria-label":w.ag._({id:"nnIO9F"}),position:"relative",left:"-1px",..."good"===r?I:{},onClick:()=>n("good")})})]})});R.displayName="CardRatingButtons";let T=(0,f.G)((e,t)=>{let{rating:r,setRating:n}=e;return(0,i.jsxs)(p.h,{size:"sm",ref:t,children:[(0,i.jsx)(y.kH,{label:(0,i.jsx)(j.cC,{id:"kR82DG"}),placement:"top",children:(0,i.jsx)(x.h,{"aria-label":"thumbs down",color:"poor"===r?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===r?"red.600":"transparent",bg:"poor"===r?"red.100":void 0,_hover:{bg:"poor"===r?"red.200":"red.100"},icon:(0,i.jsx)(b.G,{icon:v.bam}),onClick:()=>{n("poor")}})}),(0,i.jsx)(y.kH,{label:(0,i.jsx)(j.cC,{id:"y1GvbS"}),placement:"top",children:(0,i.jsx)(x.h,{"aria-label":"thumbs up",color:"good"===r?"green.600":void 0,borderWidth:"1px",borderColor:"good"===r?"green.600":"transparent",bg:"good"===r?"green.100":void 0,_hover:{bg:"good"===r?"green.200":"green.100"},icon:(0,i.jsx)(b.G,{icon:v.u8Q}),onClick:()=>{n("good")}})})]})});T.displayName="ImageRatingButtons"},16749:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var i=r(69971),n=r(31691);class a extends n.j{getSystemChatMessage(e){return{role:i.XaP.System,operation:this.systemPromptOperation,variables:e}}getUserChatMessage(e){return{role:i.XaP.User,operation:this.userPromptOperation,variables:e}}constructor({variables:e,systemPromptOperation:t,userPromptOperation:r,params:i}){super({params:i}),this.variables=e,this.systemPromptOperation=t,this.userPromptOperation=r}}},31691:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});let i={model:"gpt-3.5-turbo-1106",provider:r(69971).nyn.Azure};class n{prepare(e){let{variables:t,history:r=[],params:i}=e;return{messages:[this.getSystemChatMessage(t),...r,this.getUserChatMessage(t)],params:{...this.params,...i}}}constructor({params:e}){this.params={...i,...e}}}},90025:function(e,t,r){"use strict";r.d(t,{c:function(){return o}});var i=r(37243),n=r(30764),a=r(82631);let o=(e,t)=>{let r=l(e),i=n.HY.from(t),o=r.serializeFragment(i),s=(0,a.S)(o),c=document.createElement("div");return c.appendChild(s),c.innerHTML},l=e=>{let{schema:t,extensionManager:r}=e;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;let a=n.PW.marksFromSchema(t),o=n.PW.nodesFromSchema(t),l=e.extensionManager.attributes;r.extensions.forEach(e=>{if(!e.config.renderHTMLforAI)return;let t=l.filter(t=>t.type===e.name);o[e.name]&&(o[e.name]=r=>{let n=(0,i.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:n})}),a[e.name]&&(a[e.name]=(r,n)=>{let a=(0,i.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:n,HTMLAttributes:a})})});let s=new n.PW(o,a);return t.cached.aiDomSerializer=s,s}},47406:function(e,t,r){"use strict";r.d(t,{X:function(){return h}});var i=r(95993),n=r(65701);async function a(e,t){let r;let i=e.getReader();for(;!(r=await i.read()).done;)t(r.value)}function o(){return{data:"",event:"",id:"",retry:void 0}}let l="text/event-stream",s="last-event-id";function c(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(l)))throw Error("Expected content-type to be ".concat(l,", Actual: ").concat(t))}class d extends i.GJ{constructor(){super({transform:async(e,t)=>{if("error"===e.event){t.error(new n.T1("StreamError message received: ".concat(JSON.stringify(e)),e.data));return}t.enqueue(e)}})}}class u extends Error{constructor(e){super(),this.timeout=e}}function h(e,t,r){var h;let g=r.retries||0,p=r.backoff||1e3,m=r.timeout||null,f=null!==(h=r.streamResumingEnabled)&&void 0!==h&&h,x=0,v=new AbortController,b=!1,y=!1,j=!1,w=null,C=!1,A=()=>p*Math.pow(2,Math.max(x-1,0)),k={};return f&&(k["gamma-stream-resuming-enabled"]="true"),{stream:new i.Pz({async start(r){null!=m&&(w=setTimeout(()=>{C=!0,v.abort(),r.error(new n.rm("Stream timed out after ".concat(m,"ms")))},m));let{headers:i,...d}=t;(function(e,t){let{signal:r,headers:i,onopen:n,onmessage:d,onclose:u,onerror:h,openWhenHidden:g,fetch:p,...m}=t;return new Promise((t,f)=>{let x;let v={...i};function b(){x.abort(),document.hidden||k()}v.accept||(v.accept=l),g||document.addEventListener("visibilitychange",b);let y=1e3,j=0;function w(){document.removeEventListener("visibilitychange",b),window.clearTimeout(j),x.abort()}null==r||r.addEventListener("abort",()=>{w(),t()});let C=null!=p?p:window.fetch,A=null!=n?n:c;async function k(){var r,i;x=new AbortController;try{let i,n,l,c;let h=await C(e,{...m,headers:v,signal:x.signal});await A(h),await a(h.body,(r=function(e,t,r){let i=o(),n=new TextDecoder,a=!1;return function(l,s){if(0===l.length)null==r||r(i),i=o(),a=!1;else if(s>0){let r=n.decode(l.subarray(0,s)),o=s+(32===l[s+1]?2:1),c=n.decode(l.subarray(o));switch(r){case"data":a?i.data=i.data+"\n"+c:(i.data=c,a=!0);break;case"event":i.event=c;break;case"id":e(i.id=c);break;case"retry":let d=parseInt(c,10);isNaN(d)||t(i.retry=d)}}}}(e=>{e?v[s]=e:delete v[s]},e=>{y=e},d),c=!1,function(e){void 0===i?(i=e,n=0,l=-1):i=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(i,e);let t=i.length,a=0;for(;n<t;){c&&(10===i[n]&&(a=++n),c=!1);let e=-1;for(;n<t&&-1===e;++n)switch(i[n]){case 58:-1===l&&(l=n-a);break;case 13:c=!0;case 10:e=n}if(-1===e)break;r(i.subarray(a,e),l),a=n,l=-1}a===t?i=void 0:0!==a&&(i=i.subarray(a),n-=a)})),null==u||u(),w(),t()}catch(e){if(!x.signal.aborted)try{let t=null!==(i=null==h?void 0:h(e))&&void 0!==i?i:y;window.clearTimeout(j),j=window.setTimeout(k,t)}catch(e){w(),f(e)}}}k()})})(e,{openWhenHidden:!0,credentials:"include",...d,headers:{...i,...k},signal:v.signal,onopen:async e=>{if(!e.ok||e.headers.get("content-type")!==l){if(e.status>=400&&e.status<500&&429!==e.status)v.abort(),r.error(new n.VG("Unable to complete request"));else if(x++<g&&!b)throw new u(A());else v.abort(),r.error(new n.VG("Unable to complete request"))}},onmessage(e){if(j){y||(y=!0,console.log("[AIStream] enqueue cancel event",{...e,event:"cancel",data:""}),r.enqueue({...e,event:"cancel",data:""}),r.close(),v.abort());return}C||(r.enqueue(e),b=!0)},onclose(){w&&(clearTimeout(w),w=null),r.close()},onerror(e){if(e instanceof u){if(j)throw console.error("Stream cancelled - not retrying"),Error("Stream cancelled");return e.timeout}if(e instanceof Error){if(console.error("Uncaught stream error",e),!f)throw e;if(x++<g)return A();throw e}if(b){let e="Stream closed unexpectedly";throw console.error("Uncaught stream error",e),new n.Vh(e)}}}).catch(e=>{w&&(clearTimeout(w),w=null),j||r.error(e)})}}).pipeThrough(new d),cancel:()=>{j||(j=!0)}}}},65701:function(e,t,r){"use strict";r.d(t,{T1:function(){return i},VG:function(){return a},Vh:function(){return o},rm:function(){return n}});class i extends Error{constructor(e,t){super(e),this.name="StreamError",this.code="stream_error",t&&(this.code=t)}}class n extends i{constructor(e){super(e),this.name="StreamTimeoutError",this.code="timeout"}}class a extends i{constructor(e){super(e),this.name="StreamOnOpenError",this.code="on_open"}}class o extends i{constructor(e){super(e),this.name="StreamUnexpectedCloseError",this.code="unexpected_close"}}},69964:function(e,t,r){"use strict";r.d(t,{P3:function(){return h},Kk:function(){return u},jz:function(){return d}});var i=r(2784),n=r(62216),a=r(11310),o=r(41019),l=r(95993);class s extends l.GJ{getContent(){return this.content}constructor(e){super({start:()=>{var t;null===(t=e.onStart)||void 0===t||t.call(e)},transform:async(t,r)=>{var i,n,a;"content"===t.event&&(this.content+=t.data,null===(i=e.onContent)||void 0===i||i.call(e,this.content)),"done"===t.event&&(null===(n=e.onComplete)||void 0===n||n.call(e,this.content)),"cancel"===t.event&&(null===(a=e.onCancel)||void 0===a||a.call(e)),r.enqueue(t)},flush(){var t;null===(t=e.onFlush)||void 0===t||t.call(e)}}),this.content=""}}var c=r(97134);let d=(e,t)=>({generate:(0,i.useCallback)(r=>u({...r,promptKey:e,opts:t}),[t,e])}),u=e=>{let{promptKey:t,opts:r,variables:i,interactionId:l,workspaceId:c}=e;l=l||(0,o.nZ)();let{cancel:d,stream:u}=(0,n.ZE)({promptKey:t,variables:i,interactionId:l,workspaceId:c},{timeout:r.timeout}),h=new s(r),g=u.pipeThrough(h);return{cancel:d,promise:new Promise((e,t)=>{(0,a.GO)(g,{onError(e){var i;null===(i=r.onError)||void 0===i||i.call(r,e),t(e)},onDone(){e(h.getContent())}})})}},h=e=>{let{promptKey:t,variables:r,interactionId:i,workspaceId:a=(0,c.n_)(),opts:l={}}=e;return i=i||(0,o.nZ)(),(0,n.Ur)({promptKey:t,interactionId:i,workspaceId:a,variables:r},l)}},62216:function(e,t,r){"use strict";r.d(t,{Ur:function(){return l},ZE:function(){return o},pM:function(){return c},z4:function(){return s}});var i=r(95405),n=r(65701),a=r(47406);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/v2/generation",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let o={method:"POST",headers:n,body:JSON.stringify(e)};return(0,a.X)(r,o,t)}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/v2/render-generation",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return(await u(r,n,t)).result}let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/chatCompletion",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let o={method:"POST",headers:n,body:JSON.stringify(e)};return(0,a.X)(r,o,t)},c=e=>{let{streamId:t,lastEventId:r,interactionId:n,...o}=e,l=new URL(i.v.API_HOST+"/ai/resumeChatCompletion");return l.searchParams.set("interactionId",n),(0,a.X)(l.toString(),{method:"GET",headers:{"gamma-chat-completion-stream-id":t,"last-event-id":r}},{streamResumingEnabled:!0,...o})},d=e=>new Promise(t=>setTimeout(t,e)),u=async(e,t,r)=>{let{timeout:i=null,maxRetries:a=3,retryAttempts:o=0}=r,l=new AbortController,s=null;null!=i&&(s=setTimeout(()=>{throw l.abort(),Error("Request timed out after ".concat(i,"ms"))},i));let c=()=>{s&&clearTimeout(s)},h=await fetch(e,{credentials:"include",...t,signal:l.signal});if(h.ok){let e=await h.json();return c(),e}if(c(),h.status>=400&&h.status<500&&429!==h.status)throw new n.VG("Unable to complete request");if(o++<a){let r=1e3*Math.pow(2,Math.max(o-1,0));return await d(r),u(e,t,{timeout:i,retryAttempts:o,maxRetries:a})}throw Error("Unable to complete request, status="+h.status)}},11310:function(e,t,r){"use strict";r.d(t,{GO:function(){return a},fZ:function(){return l},uS:function(){return o}});var i=r(37164),n=r(65701);let a=(e,t)=>{let r=e.getReader(),i=async()=>{var e,n,a;try{let{done:a,value:o}=await r.read();if(a)null===(n=t.onDone)||void 0===n||n.call(t);else{null===(e=t.onMessage)||void 0===e||e.call(t,o),i();return}}catch(e){null===(a=t.onError)||void 0===a||a.call(t,e instanceof Error?e:Error(e))}};i()},o=e=>e instanceof n.T1?{errorCode:e.code,errorMessage:e.message}:e instanceof Error?{errorMessage:e.message}:{errorMessage:e},l=(0,i.kP)("0123456789abcdefghijklmnopqrstuvwxyz",16)},41019:function(e,t,r){"use strict";r.d(t,{Io:function(){return j},Lt:function(){return y},Wf:function(){return m},XH:function(){return x},bj:function(){return C},e9:function(){return v},fM:function(){return f},gb:function(){return c},gf:function(){return b},hq:function(){return s},mV:function(){return d},nZ:function(){return l.n},o:function(){return h},pQ:function(){return p},qZ:function(){return u},vL:function(){return g},ym:function(){return w}});var i=r(95405),n=r(2529),a=r(31601),o=r(97134),l=r(54728);let s=e=>{a.co.track(a.AA.AI_REQUEST_SENT,{...e,gitSHA:i.v.GIT_SHA})},c=e=>{a.co.track(a.AA.AI_REQUEST_COMPLETE,{...e,gitSHA:i.v.GIT_SHA})},d=e=>{a.co.track(a.AA.AI_REQUEST_ABORT,{...e,gitSHA:i.v.GIT_SHA})},u=e=>{a.co.track(a.AA.AI_REQUEST_STREAM_START,{...e,gitSHA:i.v.GIT_SHA})},h=e=>{a.co.track(a.AA.AI_REQUEST_RESPONSE,{...e,gitSHA:i.v.GIT_SHA})},g=e=>{a.co.track(a.AA.AI_SUGGESTION_APPLY,{...e,gitSHA:i.v.GIT_SHA})},p=e=>{a.co.track(a.AA.AI_REQUEST_ERROR,{...e,gitSHA:i.v.GIT_SHA})},m=e=>{a.co.track(a.AA.AI_REQUEST_RETRY,{...e,gitSHA:i.v.GIT_SHA})},f=e=>{a.co.track(a.AA.AI_DOC_RATED,{...e,gitSHA:i.v.GIT_SHA,product:(0,n.K9)((0,o.rW)())})},x=e=>{let t=e.tags.reduce((e,t)=>(e[t]=!0,e),{});a.co.track(a.AA.AI_DOC_FEEDBACK_SUBMITTED,{...e,tags_map:t,gitSHA:i.v.GIT_SHA,product:(0,n.K9)((0,o.rW)())})},v=e=>{a.co.track(a.AA.AI_IMPORT_SLIDE_RATED,{...e,gitSHA:i.v.GIT_SHA})},b=e=>{a.co.track(a.AA.AI_IMPORT_SLIDE_FEEDBACK,{...e,gitSHA:i.v.GIT_SHA})},y=e=>{a.co.track(a.AA.AI_IMAGE_FEEDBACK_SUBMITTED,{...e,gitSHA:i.v.GIT_SHA})},j=e=>{a.co.track(a.AA.AI_IMAGE_RATED,{...e,gitSHA:i.v.GIT_SHA})},w=e=>{a.co.track(a.AA.AI_CARD_FEEDBACK,{...e,gitSHA:i.v.GIT_SHA})},C=e=>{a.co.track(a.AA.AI_CARD_RATING,{...e,gitSHA:i.v.GIT_SHA})}},62204:function(e,t,r){"use strict";r.d(t,{r:function(){return b}});var i=r(52322),n=r(38035),a=r(27238),o=r(35534),l=r(25556),s=r(26207),c=r(62614),d=r(81540),u=r(77533),h=r(42946),g=r(49929),p=r(64253),m=r(5879),f=r(2784),x=r(63935);let v=(0,f.memo)(e=>{let{credits:t,lowCreditStatus:r,onClick:n,variant:a="solid",isDark:o=!1}=e,l=null===t,s=(0,x.ko)();return(0,i.jsx)(p.kH,{label:(0,i.jsx)(m.cC,{id:"IY3q+2"}),placement:"top",children:(0,i.jsx)(c.z,{onClick:n,isDisabled:l,..."ghost"===a?{variant:"ghost",size:"sm",colorScheme:o?"gray":"blackAlpha"}:{variant:"unstyled",bg:"white",px:4},color:r?s[r].lightColor:void 0,fontWeight:"500",leftIcon:(0,i.jsx)(g.G,{icon:h.owJ,size:"sm"}),rightIcon:(0,i.jsx)(g.G,{color:o?"var(--chakra-colors-gray-400)":"var(--chakra-colors-gray-600)",icon:h.DBf,size:"xs"}),children:l?(0,i.jsx)(d.$,{size:"xs"}):(0,i.jsx)(u.x,{as:"span",color:null===r?void 0:s[r].lightColor,children:(0,i.jsx)(m.cC,{id:"T57gLR",values:{credits:t}})})})})}),b=e=>{let{modalId:t="ai-credits-modal",variant:r,segmentEvent:c,isDark:d,...u}=e,{credits:h,lowCreditStatus:g}=(0,l.qO)(),p=(0,o.Y)("unlimited_credits"),{isOpen:m,onOpen:f,onClose:x}=(0,a.M)({id:t});return p?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.k,{...u,children:(0,i.jsx)(v,{credits:h,onClick:f,lowCreditStatus:g,variant:r,isDark:d})}),(0,i.jsx)(s.H,{isOpen:m,onOpen:f,onClose:x,credits:h,segmentEvent:c})]})}},26207:function(e,t,r){"use strict";r.d(t,{H:function(){return Z}});var i=r(52322),n=r(29705),a=r(92850),o=r(26468),l=r(22226),s=r(2338),c=r(17993),d=r(77533),u=r(54326),h=r(29117),g=r(28535),p=r(81540),m=r(97217),f=r(75768),x=r(62614),v=r(82554),b=r(11082),y=r(42946),j=r(49929),w=r(64253),C=r(5879),A=r(87254),k=r(2784),_=r(20737),S=r(30240),P=r(12722),E=r(23691),I=r(82528),U=r(30191),R=r(35534),T=r(31601),O=r(97134),M=r(33279),D=r(63935),N=r(25556),H=r(49259),L=r(97010),z=r(87436),G=r(95897),F=r(89511),B=r(11121),W=r(45680);let q=e=>{let{onContactUsClick:t,...r}=e,n=(0,S.ye)("aiDebits"),a=(0,S.ye)("ai-credits").enabled,o=n.generateCard,l=n.wizardCreation,s=n.chatSuggestion,c=n.autocomplete,d=n.generateImage,u=(0,S.ye)("aiAutocomplete"),h=(0,S.ye)("aiGeneratedImages"),g=(0,S.ye)("addCard2");return(0,i.jsxs)(H.U,{allowMultiple:!0,...r,children:[(0,i.jsx)(V,{accordionLabel:A.ag._({id:"IVVQ18"}),children:(0,i.jsxs)(L.QI,{children:[(0,i.jsxs)(L.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"p4u+sD"})})," ",(0,i.jsx)(C.cC,{id:"XSCvWA",values:{aiGeneration:l,GAMMA_ARTIFACT_PROPER_NOUN:E.Yc}})]}),g&&(0,i.jsxs)(L.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"R8xLRW"})})," ",(0,i.jsx)(C.cC,{id:"M3I7Cf",values:{aiAddCard:o}})]}),(0,i.jsxs)(L.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"gPyWmV"})})," ",(0,i.jsx)(C.cC,{id:"8HgQlf",values:{aiEditing:s}}),(0,i.jsx)(C.cC,{id:"bO6EBT"})]}),h&&(0,i.jsxs)(L.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"0jmvoW"})})," ",(0,i.jsx)(C.cC,{id:"OY40J+",values:{aiImages:d}})]}),u&&(0,i.jsxs)(L.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"eBVeIQ"})})," ",(0,i.jsx)(C.cC,{id:"AJ11w6",values:{aiAutocomplete:c,AUTOCOMPLETE_SLASH_SHORTCUT:W.Y,AUTOCOMPLETE_INPUT_SHORTCUT:W.o}})]})]})}),a&&(0,i.jsx)(V,{accordionLabel:A.ag._({id:"1pwdRz"}),children:(0,i.jsx)(C.cC,{id:"1Ijs7v",values:{GAMMA_PRO_PROPER_NOUN:E.x8,GAMMA_PROPER_NOUN:E.N6}})})]})},V=e=>{let{accordionLabel:t,children:r}=e;return(0,i.jsxs)(z.Q,{children:[(0,i.jsx)("h2",{children:(0,i.jsxs)(G.K,{px:2,py:2,fontSize:"sm",children:[(0,i.jsx)(g.xu,{as:"span",flex:"1",textAlign:"left",fontWeight:500,children:t}),(0,i.jsx)(F.X,{})]})}),(0,i.jsx)(B.H,{pb:4,px:2,fontSize:"sm",children:r})]})},K=()=>({friend:{label:A.ag._({id:"uU68PM"})},teammate:{label:A.ag._({id:"O/k8gF"})},buy:{label:A.ag._({id:"/2RIKE"})}}),Q={fontWeight:500,letterSpacing:"normal",color:"gray.600"},X=e=>{let{onClose:t,onOpen:r,credits:A,segmentEvent:H=T.AA.GAMMA_PRO_UPSELL_CALLOUT_AI_CREDITS}=e,{user:L,currentWorkspace:z}=(0,O.SE)(),G=(0,O.d3)(),F=(0,S.ye)("upsellUXEnabled_Pro"),B=(0,R.Y)("unlimited_credits"),[W,V]=(0,k.useState)(F?"buy":"friend"),X=(0,S.ye)("ai-credits"),Z=(0,S.ye)("intercom"),Y=(0,I.G)(),{lowCreditStatus:J}=(0,N.qO)(),$=(0,k.useMemo)(()=>L?"teammate"===W&&z&&G?(0,M.Mr)({userId:L.id,workspace:z}):"friend"===W?(0,M.Mr)({userId:L.id}):"":"",[G,z,W,L]),ee=X.enabled,et=X.referralBonus,er=K()[W],ei=(0,k.useCallback)(()=>{Y(),t()},[Y,t]),en=(0,D.ko)();return(0,i.jsx)(w.Wk,{isDark:!1,children:(0,i.jsxs)(a.u_,{isOpen:!0,onClose:t,size:"xl",children:[(0,i.jsx)(o.Z,{}),(0,i.jsxs)(l.h,{children:[(0,i.jsx)(s.o,{}),(0,i.jsxs)(c.g,{py:4,px:6,textAlign:"center",children:[(0,i.jsx)(d.x,{...Q,fontSize:"md",color:J?en[J].darkColor:void 0,children:J?en[J].description:(0,i.jsx)(C.cC,{id:"xy3nnP"})}),(0,i.jsx)(u.x,{p:0,color:J?en[J].lightColor:void 0,children:(0,i.jsxs)(h.U,{children:[(0,i.jsx)(g.xu,{as:"span",fontSize:"xl",children:(0,i.jsx)(j.G,{icon:y.owJ})})," ",null===A?(0,i.jsx)(p.$,{size:"sm"}):(0,i.jsx)(C.cC,{id:"T57gLR",values:{credits:A}})]})}),(0,i.jsx)(d.x,{textAlign:"left",fontSize:"sm",pt:2,...Q,children:(0,i.jsx)(C.cC,{id:"lUUl1i"})})]}),(0,i.jsxs)(m.f,{pb:4,children:[ee?(0,i.jsxs)(c.g,{spacing:4,children:[(0,i.jsxs)(f.h,{variant:"ghost",size:"sm",spacing:0,gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center",children:[!B&&F&&(0,i.jsx)(x.z,{onClick:()=>V("buy"),isActive:"buy"===W,color:"buy"===W?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"KctW9G"})}),(0,i.jsx)(x.z,{onClick:()=>V("friend"),isActive:"friend"===W,color:"friend"===W?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"KSBmDv"})}),G&&(0,i.jsx)(x.z,{leftIcon:(0,i.jsx)(j.G,{icon:y.FKd}),onClick:()=>V("teammate"),isActive:"teammate"===W,color:"teammate"===W?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"dUOpaF"})})]}),("friend"===W||"teammate"===W)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.U,{spacing:2,children:[(0,i.jsxs)(d.x,{fontSize:"sm",minW:"50%",children:["friend"===W&&(0,i.jsx)(C.cC,{id:"tBKKYy",values:{referralBonusAmount:et,GAMMA_PROPER_NOUN:E.N6}}),"teammate"===W&&(0,i.jsx)(C.cC,{id:"q8MWFp",values:{referralBonusAmount:et}})]}),(0,i.jsxs)(v.C,{colorScheme:"green",fontSize:"xs",px:"0.4em",py:"0.2em",children:["+"," ",(0,i.jsx)(C.cC,{id:"NFNFrR",values:{referralBonusAmount:et}})]})]}),(0,i.jsx)(_.I,{url:$,customLabel:er.label,variant:"solid"})]}),"buy"===W&&(0,i.jsx)(U.m,{segmentEvent:H,onOpenCallback:t,onCloseCallback:r})]}):(0,i.jsxs)(h.U,{align:"baseline",spacing:1,children:[(0,i.jsx)(d.x,{children:(0,i.jsx)(C.cC,{id:"0TJN6B"})}),Z?(0,i.jsx)(x.z,{onClick:ei,variant:"link",children:(0,i.jsx)(C.cC,{id:"Bhgd0l"})}):(0,i.jsxs)(b.r,{href:"mailto:".concat(P.p),children:[(0,i.jsx)(C.cC,{id:"Bhgd0l"}),(0,i.jsx)(n.h,{ml:1,transform:"translateY(-2px)"})]})]}),(0,i.jsx)(q,{my:4,onContactUsClick:Z?ei:void 0})]})]})]})})},Z=(0,k.memo)(e=>{let{isOpen:t,...r}=e;return t?(0,i.jsx)(X,{...r}):null})},21829:function(e,t,r){"use strict";r.d(t,{J:function(){return p}});var i=r(52322),n=r(82554),a=r(29117),o=r(77533),l=r(42946),s=r(49929),c=r(64253),d=r(5879),u=r(30240),h=r(35534),g=r(63935);let p=e=>{var t;let{type:r,...p}=e,m=(0,u.ye)("aiDebits");if((0,h.Y)("unlimited_credits"))return null;let f=null!==(t=m[r])&&void 0!==t?t:g.Sy[r];return(0,i.jsx)(c.kH,{label:(0,i.jsx)(d.cC,{id:"B7jvsP",values:{numCredits:f}}),children:(0,i.jsx)(n.C,{colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2,...p,children:(0,i.jsxs)(a.U,{spacing:1,children:[(0,i.jsx)(o.x,{children:f}),(0,i.jsx)(s.G,{icon:l.owJ,size:"sm"})]})})})}},13090:function(e,t,r){"use strict";r.d(t,{d:function(){return u},i:function(){return h}});var i=r(69971),n=r(30240),a=r(35534),o=r(71383),l=r(31601),s=r(91076),c=r(63935),d=r(68981);let u=async(e,t,r)=>{var u,g;let p=(0,a.uL)("unlimited_credits",t),m=null!==(g=n.VH.get("aiDebits")[e])&&void 0!==g?g:c.Sy[e];if(h(e,t,r),0===m||p)return;let f=(null==t?void 0:t.id)||(0,s.n_)();if(!f)return;let x=(0,i.WQq)(),v=null===(u=(await x.mutate({mutation:i.ATM,variables:{value:m,workspaceId:f}})).data)||void 0===u?void 0:u.deductCredits;return v?(l.co.track(l.AA.AI_CREDITS_DEDUCTED,{operation:e,used:m,remaining:v.credits,interactionId:r}),(0,o.bh)().dispatch((0,d.B1)({availableCredits:v.credits})),v.credits):null},h=(e,t,r)=>{var i;let o=(0,a.uL)("unlimited_credits",t),s=null!==(i=n.VH.get("aiDebits")[e])&&void 0!==i?i:c.Sy[e];l.co.track(l.AA.AI_CREDITS_USED,{operation:e,used:s,has_unlimited_ai:o,interactionId:r})}},12722:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});let i="support@gamma.app"},99604:function(e,t,r){"use strict";r.d(t,{C:function(){return p},J:function(){return m}});var i=r(84636),n=r.n(i),a=r(95405),o=r(30240),l=r(97912),s=r(81674),c=r(38914),d=r(46152),u=r.n(d);let h=async e=>{let t=e.split(" ")[0];try{var r;let e=await fetch("/api/icons/search?count=5&query=".concat(t),{credentials:"include"}),i=null===(r=await e.json())||void 0===r?void 0:r.data;if(!i||0===i.length)return console.warn("[fetchIcons] No icons found. Using default set"),u()(g);return console.debug("[AI fetchIcons] fetched icons",i),i}catch(e){return console.error("(caught) [fetchIcons] fetchResults:",e),u()(g)}},g=[c.ILF,c.Y$T,c.Tab,c.Mzg,c.Qz9,c.gMD].map(e=>{let t=(0,s.qv)(e),[r,i]=t.icon;return{id:e.iconName,provider:"fa",styles:["light"],src:"".concat(a.v.FRONTEND_URL,"/api/icons/").concat(e.iconName,".svg?provider=fa&style=light"),html:t.html[0],width:r,height:i}}),p=async e=>{let{query:t,provider:r,options:i={},count:n=35,prefetch:a=!1}=e,s="web"===r?o.VH.get("webImageProviderType"):void 0;if("fontawesome"===r)return(await h(t)).map(e=>({id:e.id,imageUrl:e.src,width:e.width,height:e.height,attributionUrl:"",thumbnailUrl:"",credit:""}));let c=f({query:t,provider:r,options:{type:s,...i},count:n});try{let e=await fetch(c,{credentials:"include"}),t=await e.json();if(!((null==t?void 0:t.length)>=0))throw Error(t);return a&&Promise.all(t.map(e=>(0,l.GN)(e.imageUrl))).then(()=>{console.debug("[fetchImageSearchResults] images downloaded in background")}).catch(e=>{console.debug("[fetchImageSearchResults] error downloading image:",e)}),t}catch(e){return console.error("(caught) [fetchImages] fetchResults:",e),[]}},m=async e=>{let{queries:t,count:r,provider:i,prefetch:a,options:o}=e,l=(await Promise.all(t.map(e=>p({query:e,count:r,provider:i,prefetch:a,options:o}).then(t=>t.map(t=>({query:e,image:t,provider:i})))))).flat();return n()(l,e=>e.image.id||e.image.imageUrl)},f=e=>{let{query:t,count:r,provider:i,options:n={}}=e,o=new URLSearchParams,l=a.v.API_HOST||"https://api.gamma.app";return o.append("query",t),o.append("provider",i),o.append("count",String(r)),Object.entries(n).forEach(e=>{let[t,r]=e;void 0!==r&&o.append(t,String(r))}),"".concat(l).concat("/media/images/search","?").concat(o.toString())}},25968:function(e,t,r){"use strict";r.d(t,{Ge:function(){return f},N$:function(){return v},ND:function(){return b},WY:function(){return j},cT:function(){return y},eb:function(){return g},pK:function(){return h},u0:function(){return p}});var i=r(65616),n=r(48484),a=r(42340),o=r(13326),l=r(95405),s=r(5636),c=r(31452),d=r(97912);let u={auth:{key:l.v.TRANSLOADIT_AUTH_KEY},template_id:l.v.TRANSLOADIT_IMAGE_TEMPLATE_ID},h=["image/*",o.Z.heic,o.Z.heif],g=["application/vnd.openxmlformats-officedocument.presentationml.presentation"],p=[o.Z.doc,o.Z.docx],m=[...p,...g,o.Z.pdf],f=["font/otf","font/ttf","application/x-font-ttf","application/x-font-otf",".otf",".ttf"],x={all:[...m,...g,...h],importDoc:[...m],importPpt:[...g],importPdf:[o.Z.pdf],doc:m,font:f,image:h,icon:[".png",".ico",".gif",".svg"]},v={autoProceed:!0,restrictions:{allowedFileTypes:[],maxNumberOfFiles:1}},b={createUppyInstance:function(e,t){let{onUploadStart:r,onOriginalFileUpload:a,onUploadComplete:o,onUploadFailed:l,onProgress:h,setErrorMessage:g}=t,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=arguments.length>4?arguments[4]:void 0,b=arguments.length>5?arguments[5]:void 0,y=arguments.length>6?arguments[6]:void 0,j=2560,w="false";"background"===p||"themeBackground"===p?j=3840:"icon"===p?j=250:"profile"===p?(j=1024,w="true"):"workspaceLogo"===p&&(j=1024);let C=[];f=f||"image";let A=new i.ZP({...v,restrictions:{...v.restrictions,maxNumberOfFiles:m,allowedFileTypes:x[f],maxFileSize:y}});return A.use(n.ZP,{assemblyOptions:async()=>{let t=b||u.template_id,{signature:r,expires:i}=await (0,s.x)(t);return{params:{...u,auth:{...u.auth,expires:i},template_id:b||u.template_id},fields:{orgId:e,imageType:p,resizePx:j,cropPadding:"50%",detectAndCropFace:w},signature:r}},waitForEncoding:!0}),A.on("file-added",async e=>{try{var t;(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.includes("image"))&&(null==e?void 0:e.data)instanceof File&&await (0,d.sy)(e),r&&1===m&&r({tempUrl:URL.createObjectURL(e.data),file:e}),h&&h(0)}catch(t){console.error("[Uppy.file-added] ".concat(t.message)),A.removeFile(e.id)}}),A.on("files-added",e=>{r&&1!==m&&e.forEach(e=>{r({tempUrl:URL.createObjectURL(e.data),file:e})}),h&&h(0)}),A.on("error",e=>{let t="Error uploading to Transloadit: ".concat(e.message);g&&g(""),l&&l(t),console.error(t)}),A.on("upload-progress",(e,t)=>{h&&h(t.bytesUploaded/t.bytesTotal*100)}),A.on("transloadit:result",(e,t,r)=>{if(1===m){if(!a||"original_file"!==e||0===r.uploads.length||(0,d.Ns)(r.uploads[0].mime)||(0,c.kO)(r.uploads[0].mime,r.uploads[0].ext)||!t)return;let{url:i,meta:n,name:o}=t;g&&g(""),i?a({src:i,meta:n,name:o,uploadResultStep:"original"}):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}else{if("filter_skip_optimize"===e){C=C.concat(t);return}{let e,n;if((0,d.Ns)(t.mime))n=t;else{var i;e=null===(i=C.find(e=>e.name===t.name))||void 0===i?void 0:i.url,n=t}if(!n)return;let{url:a,meta:s,name:c}=n;g&&g(""),a?o&&o({src:a,meta:s,name:c,uploadResultStep:"optimized",fullResults:r.results},e):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}}}),A.on("transloadit:complete",e=>{var t,r,i,n,a;let s,u,h,p;if(1!=m)return;if(0===e.uploads.length)throw console.error("[transloadit:complete] No uploads in assembly",e),Error("No uploads in assembly");if("importDoc"===f)u=e.results.convert_to_html[0];else if("importPpt"===f)u=e.results.convert_to_html[0];else{if((0,c.S9)(e.uploads[0].ext))return;(0,c.O7)(e.uploads[0].mime)?(u=e.results.original_file[0],h=e.results.doc_thumbnail[0].url):(0,c.kO)(e.uploads[0].mime,e.uploads[0].ext)?(u=e.results.convert_to_pdf[0],h=e.results.doc_thumbnail[0].url):(0,d.Ns)(e.uploads[0].mime)?(u=(null===(t=e.results.optimized)||void 0===t?void 0:t[0])||(null===(r=e.results.filter_skip_optimize)||void 0===r?void 0:r[0]),p=null===(i=e.results.detect_and_crop_face)||void 0===i?void 0:i[0].url):(s=e.results.original_file[0].url,p=null===(n=e.results.detect_and_crop_face)||void 0===n?void 0:n[0].url,u=(null===(a=e.results.optimized)||void 0===a?void 0:a[0])||e.results.original_file[0])}let{url:x,ssl_url:v,meta:b,name:y}=u;g&&g(""),v||x?o&&o({src:v||x,meta:b,name:y,thumbnail:h,croppedFace:p,uploadResultStep:"optimized",fullResults:e.results},s):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}),A}},y=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"image",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let l=b.createUppyInstance(t,r,i,1,n,a,o);try{l.addFile({name:e.name,type:e.type,data:e})}catch(e){var s;null==r||null===(s=r.onUploadFailed)||void 0===s||s.call(r,e.message);return}await l.upload()},j=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",o=arguments.length>4?arguments[4]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let l=b.createUppyInstance(t,r,i,"themeBackground"===i?null:1,void 0,o);l.use(a.Z,{companionUrl:n.Zm});let s=await l.getPlugin("Url").addFile(e);if(s instanceof Error){var c;null==r||null===(c=r.onUploadFailed)||void 0===c||c.call(r,s.message)}}},69996:function(e,t,r){"use strict";r.d(t,{Q:function(){return e1}});var i=r(52322),n=r(17993),a=r(47443),o=r(52929),l=r(74444),s=r(29117),c=r(77533),d=r(28535),u=r(49259),h=r(87436),g=r(95897),p=r(74409),m=r(89511),f=r(11121),x=r(62614),v=r(42946),b=r(49929),y=r(5879),j=r(87254),w=r(2784),C=r(94818),A=r(41019),k=r(69971),_=r(62204),S=r(21829),P=r(25556),E=r(30240),I=r(38035),U=r(75641),R=r(97134),T=r(30523),O=r(75009),M=r(78071),D=r(42822),N=r(109),H=r(67109),L=r(64253),z=r(71383),G=r(78112),F=r(46238),B=r(97912),W=r(82642),q=r(70065),V=r(55478),K=r(75768),Q=r(32899),X=r(92850),Z=r(26468),Y=r(22226),J=r(9237);let $=e=>{var t;let{currentAttributes:r,deleteImage:n,showDelete:a=!0,...o}=e,l=(0,q.p)(),s=(0,w.useCallback)(async e=>{try{let t=document.createElement("a");t.href=e,t.target="_blank",t.download="image.jpg",document.body.appendChild(t),t.click(),document.body.removeChild(t),l({title:(0,i.jsx)(y.cC,{id:"BZBUfX"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}catch(e){console.error(e),l({title:(0,i.jsx)(y.cC,{id:"4+qb0c"}),description:(0,i.jsx)(y.cC,{id:"XLO6fp"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l]),{isOpen:c,onOpen:u,onClose:h}=(0,V.q)();return(0,i.jsxs)(K.h,{size:"sm",...o,children:[(0,i.jsx)(L.kH,{label:(0,i.jsx)(y.cC,{id:"niRN2H"}),placement:"top",children:(0,i.jsx)(Q.h,{"aria-label":"download image",borderWidth:"1px",icon:(0,i.jsx)(b.G,{icon:v.fuY}),onClick:()=>{var e;return s(null!==(e=r.src)&&void 0!==e?e:"")}})}),(0,i.jsx)(L.kH,{label:(0,i.jsx)(y.cC,{id:"GpbSs9"}),placement:"top",children:(0,i.jsx)(Q.h,{"aria-label":"zoom in",borderWidth:"1px",icon:(0,i.jsx)(b.G,{icon:v.q9v}),onClick:e=>{e.stopPropagation(),u()}})}),c&&(0,i.jsxs)(X.u_,{isOpen:c,size:"6xl",onClose:h,isCentered:!0,children:[(0,i.jsx)(Z.Z,{bg:"blackAlpha.900"}),(0,i.jsxs)(Y.h,{width:"fit-content",children:[(0,i.jsx)(d.xu,{position:"absolute",right:2,top:2,zIndex:"toast",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,i.jsx)(Q.h,{"aria-label":j.ag._({id:"8qZ5De"}),colorScheme:"gray",size:"md",onClick:h,onMouseDown:J.br,icon:(0,i.jsx)(W.T,{})})}),(0,i.jsx)(O.E,{src:null!==(t=r.src)&&void 0!==t?t:"",objectFit:"contain",rounded:"lg",maxH:"90vh",maxW:"90vw"})]})]}),a&&n&&(0,i.jsx)(L.kH,{label:(0,i.jsx)(y.cC,{id:"GBe7fh"}),placement:"top",children:(0,i.jsx)(Q.h,{"aria-label":j.ag._({id:"+jw/c1"}),color:"red.500",borderWidth:"1px",icon:(0,i.jsx)(b.G,{icon:v.XAH}),onClick:async e=>{var t;e.stopPropagation(),await n(null!==(t=r.savedMediaId)&&void 0!==t?t:"")}})})]})},ee=(0,w.memo)(e=>{let{image:t,currentAttributes:r,onImageClick:n,resizeThumbnail:a,h:o,deleteImage:l,isDeleting:s,showQuickActions:c=!0,showAvatar:u=!0}=e,[h,g]=(0,w.useState)(!0),{user:p}=(0,R.SE)(),m=(0,z.CG)(G.xy),f=null==m?void 0:m.find(e=>e.user.id===t.userId),j=(0,w.useMemo)(()=>(null==p?void 0:p.id)===t.userId,[null==p?void 0:p.id,t.userId]),C=(0,w.useMemo)(()=>(null==r?void 0:r.savedMediaId)===t.id,[null==r?void 0:r.savedMediaId,t.id]),A=a?(0,B.SN)(t.attrs.src,B.Iv,t.attrs.meta):t.attrs.src,{ref:k,width:_}=(0,F.h)();return(0,i.jsx)(T.P,{children:(0,i.jsxs)(x.z,{borderRadius:"base",display:"block",variant:"ghost",opacity:1,width:"100%",ref:k,height:"100%",minHeight:"0",textAlign:"left",pos:"relative",overflow:"hidden",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},isDisabled:s,"data-testid":"image-search-grid-item",role:"group",children:[(0,i.jsx)(O.E,{w:"100%",h:o||"100%",src:A,borderRadius:"base",objectFit:"cover",onLoad:()=>g(!1)}),!h&&(0,i.jsx)(M.p,{in:C,children:(0,i.jsx)(d.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(D.M,{h:"100%",w:"100%",children:(0,i.jsx)(b.G,{icon:v.LEp})})})}),!C&&_>=125&&c&&(0,i.jsx)(d.xu,{position:"absolute",bottom:-2,left:"50%",transform:"translate(-50%, -50%)",display:"none",_groupHover:{display:"block"},children:(0,i.jsx)($,{showDelete:j,currentAttributes:t.attrs,deleteImage:l})}),u&&f&&(0,i.jsx)(L.kH,{label:(0,i.jsx)(y.cC,{id:"3e7VB0",values:{0:f.user.displayName}}),placement:"top",children:(0,i.jsx)(N.q,{size:"sm",src:f.user.profileImageUrl,name:f.user.displayName,position:"absolute",top:2.5,right:2.5,_hover:{cursor:"pointer"}})}),!t.attrs.src&&(0,i.jsx)(T.P,{width:"100%",children:(0,i.jsx)(H.O,{height:"80px",borderRadius:"base"})})]})},t.id)});ee.displayName="AIImageHistoryItem";let et=e=>{let{onSelectImage:t,currentAttributes:r,resizeThumbnails:n,history:a,canLoadMore:o,loadMore:l,isLoadingMore:s,isDeleting:c,deleteImage:u}=e,{user:h}=(0,R.SE)(),g=w.useMemo(()=>a.map(e=>e.attrs?(0,i.jsx)(d.xu,{position:"relative",children:(0,i.jsx)(ee,{image:e,deleteImage:u,isDeleting:c,currentAttributes:r,onImageClick:t,resizeThumbnail:n,showQuickActions:!0,showAvatar:(null==h?void 0:h.id)!==e.userId})},e.id):(console.log("Image is missing attrs",e),null)),[a,u,c,r,t,n,null==h?void 0:h.id]);return(0,i.jsxs)(I.k,{direction:"column",align:"stretch",children:[(0,i.jsx)(U.Z,{columnsCount:3,gutter:"0.5rem",children:g}),o&&(0,i.jsx)(x.z,{variant:"plain",onClick:l,mt:4,isLoading:s,children:(0,i.jsx)(y.cC,{id:"yQ2kGp"})})]})};var er=r(35183),ei=r(10625),en=r(67046),ea=r(99058),eo=r(44035),el=r(39237),es=r(34742);let ec={square:v.pL1,portrait:v.j8N,landscape:v.r9b},ed=(0,w.memo)(e=>{let{value:t,setValue:r,isDisabled:n,model:a}=e,o=(0,es.mw)(a),l=(null==o?void 0:o.aspectRatios)||{},d=l[t]||es.vr;return(0,i.jsx)(er.NI,{children:(0,i.jsxs)(ei.v,{children:[(0,i.jsx)(en.j,{as:x.z,variant:"plain",isDisabled:n,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,i.jsx)(b.G,{icon:v.ptq}),boxShadow:"none",children:(0,i.jsxs)(s.U,{spacing:2,children:[(0,i.jsx)(I.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,i.jsx)(b.G,{icon:ec[d.key],fixedWidth:!0})}),(0,i.jsx)(c.x,{as:"span",flex:1,children:d.name()})]})}),(0,i.jsx)(ea.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",children:(0,i.jsx)(eo._,{value:t,type:"radio",onChange:e=>{r(e)},children:Object.values(l).map(e=>(0,i.jsx)(el.i,{value:e.key,children:(0,i.jsxs)(s.U,{spacing:2,children:[(0,i.jsx)(I.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,i.jsx)(b.G,{icon:ec[e.key],fixedWidth:!0})}),(0,i.jsx)(c.x,{as:"span",flex:1,children:e.name()})]})},e.key))})})]})})});ed.displayName="AspectRatioSelect";var eu=r(5946),eh=r(46105),eg=r(67548),ep=r(20183),em=r(81363),ef=r(27287),ex=r(57675),ev=r(40382),eb=r(29494),ey=r(20437),ej=r(63176);let ew=e=>{let{enabled:t,isGenerating:r,negativePrompt:a,setNegativePrompt:o,count:l,setCount:c,steps:d,setSteps:u,cfgScale:h,setCfgScale:g,model:m}=e,{usesNegativePrompt:f,usesSteps:x,usesCFG:v}={usesNegativePrompt:"stable-diffusion-xl-v1-0"===m||m.startsWith("imagen"),usesSteps:"stable-diffusion-xl-v1-0"===m||m.startsWith("flux"),usesCFG:"stable-diffusion-xl-v1-0"===m||m.startsWith("imagen")||m.startsWith("flux")};return(0,i.jsxs)(n.g,{align:"stretch",spacing:3,children:[f&&(0,i.jsxs)(n.g,{align:"stretch",spacing:2,children:[(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"cwxGog"})}),(0,i.jsx)(eb.g,{isDisabled:!t||r,value:a,onChange:e=>{o(e.target.value)},rows:3})]}),(0,i.jsxs)(ey.M,{columns:2,gap:2,children:[(0,i.jsxs)(s.U,{children:[(0,i.jsx)(L.kH,{placement:"top",label:(0,i.jsx)(y.cC,{id:"pKdwsO",values:{MAX_COUNT:eh.k8,DEFAULT_COUNT:eh.yD}}),children:(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"wBMjJ2"})})}),(0,i.jsx)(ej.Y2,{defaultValue:l,value:l||"",min:1,max:eh.k8,isDisabled:!t||r,onChange:(e,t)=>{c(t)},children:(0,i.jsx)(ej.zu,{paddingInline:2})})]}),x&&(0,i.jsxs)(s.U,{children:[(0,i.jsx)(L.kH,{placement:"top",label:(0,i.jsx)(y.cC,{id:"5H4Pmz",values:{MAX_STEPS:eh.Ac,DEFAULT_STEPS:eh.sK}}),children:(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"A9onc2"})})}),(0,i.jsx)(ej.Y2,{defaultValue:d,value:d||"",min:1,max:eh.Ac,isDisabled:!t||r,onChange:(e,t)=>{""===e?u(void 0):u(t)},children:(0,i.jsx)(ej.zu,{paddingInline:2})})]}),v&&(0,i.jsxs)(s.U,{children:[(0,i.jsx)(L.kH,{placement:"top",label:(0,i.jsx)(y.cC,{id:"Hcpaw+",values:{MAX_CFG_SCALE:eh.mG,DEFAULT_CFG_SCALE:eh.MI}}),children:(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"hsYa9i"})})}),(0,i.jsx)(ej.Y2,{defaultValue:h,value:h||"",min:1,max:eh.mG,isDisabled:!t||r,onChange:(e,t)=>{""===e?g(void 0):g(t)},children:(0,i.jsx)(ej.zu,{paddingInline:2})})]})]})]})};var eC=r(55963),eA=r(46226);let ek=(0,w.memo)(e=>{var t;let{attrs:r,onRateImage:n}=e,a=null===(t=r.aiParams)||void 0===t?void 0:t.interactionId,[o,l]=(0,w.useState)(null);(0,w.useEffect)(()=>{r.savedMediaId&&l(null)},[r.savedMediaId]);let s=(0,w.useCallback)((e,t,i)=>{var n;(null===(n=r.aiParams)||void 0===n?void 0:n.interactionId)&&(0,A.Lt)({feedback:t,rating:e,tags:i,aiParams:r.aiParams,imageUrl:r.src,interactionId:r.aiParams.interactionId})},[r]),c=(0,w.useCallback)(e=>{l(e),n(e)},[n]);return a?(0,i.jsx)(d.xu,{position:"absolute",bottom:2,zIndex:"sticky",right:2,children:(0,i.jsx)(eA.sn,{trackFeedback:s,rating:o||void 0,setRating:c,RatingButtons:eA.PZ,feedbackTags:e_},r.savedMediaId)}):null});ek.displayName="AIImageRating";let e_=[{key:"bad-people",label:(0,i.jsx)(y.cC,{id:"eft1Pc"})},{key:"bad-text",label:(0,i.jsx)(y.cC,{id:"BNmAIN"})},{key:"didnt-follow-prompt",label:(0,i.jsx)(y.cC,{id:"Tq32Jp"})},{key:"wrong-colors",label:(0,i.jsx)(y.cC,{id:"Lx0mWG"})},{key:"wrong-style",label:(0,i.jsx)(y.cC,{id:"HG712W"})},{key:"low-res",label:(0,i.jsx)(y.cC,{id:"i6Gj9B"})},{key:"inappropriate",label:(0,i.jsx)(y.cC,{id:"i/9pR4"})}];var eS=r(92763);let eP=e=>{let{imagesMatchingInteractionId:t,currentAttributes:r,isGenerating:n,isDeleting:a,selectedSavedMediaId:o,selectImage:l,onRateImage:s,deleteImage:c}=e,{user:d}=(0,R.SE)(),[u,h]=(0,w.useState)({wA:0,hA:0,wBCD:0,hBCD:0}),g=(0,w.useMemo)(()=>(0,eC.n)(),[]),{ref:p,width:m}=(0,F.h)(),f=(0,w.useMemo)(()=>!!t&&!(t.length<=1)&&!eI([...t.map(e=>e.attrs),r]),[t,r]),x=(0,w.useMemo)(()=>{let e=(null==t?void 0:t.length)>0,r=e?t.find(e=>e.id===o):null,i=(null==r?void 0:r.userId)===(null==d?void 0:d.id);return e&&i},[t,o,d]),v=f?100/3:0;return(0,ev.vm)(()=>{var e,i,n,a;if((null==r?void 0:null===(e=r.meta)||void 0===e?void 0:e.width)&&(null==r?void 0:null===(i=r.meta)||void 0===i?void 0:i.height)){let e=eE({vpWidth:m||624,gap:8,ratioW:(null==r?void 0:null===(n=r.meta)||void 0===n?void 0:n.width)||1024,ratioH:(null==r?void 0:null===(a=r.meta)||void 0===a?void 0:a.height)||1024,thumbCount:(null==t?void 0:t.length)||0});(Math.abs(e.wA-u.wA)>=g||Math.abs(e.hA-u.hA)>=g||Math.abs(e.wBCD-u.wBCD)>=g||Math.abs(e.hBCD-u.hBCD)>=g)&&h(e)}},[r,t,m,u,g],[r,t,m]),(0,i.jsxs)(I.k,{dir:"row",w:"100%",ref:p,overflow:"hidden",alignItems:"center",justifyContent:"center",gap:"".concat(8,"px"),children:[(0,i.jsxs)(I.k,{justifyContent:"center",position:"relative",overflow:"hidden",h:u.hA,w:"".concat(100-v,"%"),children:[n?(0,i.jsx)(H.O,{w:"100%",h:u.hA}):(0,i.jsx)(O.E,{h:"100%",w:"100%",objectFit:f?"cover":"contain",src:r.src||void 0,fallbackSrc:r.tempUrl||void 0,alt:"",borderRadius:"md"}),!n&&(0,i.jsx)($,{currentAttributes:r,position:"absolute",bottom:2,zIndex:"sticky",left:2,deleteImage:c,showDelete:x}),!n&&(0,i.jsx)(ek,{attrs:r,onRateImage:s})]}),f&&(0,i.jsx)(I.k,{alignItems:"center",justifyContent:"center",direction:"column",overflow:"hidden",gap:"".concat(8,"px"),h:u.hA,borderRadius:"base",children:n?Array.from({length:3},(e,t)=>(0,i.jsx)(H.O,{w:u.wBCD,h:u.hBCD})):(0,i.jsx)(i.Fragment,{children:t.slice(0,3).map(e=>(0,i.jsx)(ee,{image:e,currentAttributes:r,onImageClick:l,resizeThumbnail:!0,deleteImage:c,isDeleting:a,h:"".concat(u.hBCD,"px"),showQuickActions:!1,showAvatar:!1},e.id))})})]})},eE=e=>{let{vpWidth:t,gap:r,ratioW:i,ratioH:n,thumbCount:a}=e,o=i/n,l=o>eS.sl.square?eS.sl.landscape:o<eS.sl.square?eS.sl.portrait:eS.sl.square,s=t*(l===eS.sl.portrait?.6:.7),c=s/l;return{wA:Math.floor(s),hA:Math.floor(c),wBCD:Math.floor(t-s-r),hBCD:Math.floor((c-r*(a-1))/a)}},eI=e=>{if(e.length<=1)return!1;let t=eU(e[0]);return e.some(e=>eU(e)!==t)},eU=e=>{var t,r,i,n;let a=null!==(i=null==e?void 0:null===(t=e.meta)||void 0===t?void 0:t.width)&&void 0!==i?i:1,o=null!==(n=null==e?void 0:null===(r=e.meta)||void 0===r?void 0:r.height)&&void 0!==n?n:1;return a>o?"landscape":o>a?"portrait":"square"};var eR=r(81540),eT=r(23691);let eO=e=>{let{isEnhancingPrompt:t,isGenerating:r,runEnhancePrompt:n}=e;return(0,i.jsx)(s.U,{position:"absolute",bottom:2,right:2,children:(0,i.jsx)(L.kH,{placement:"top",label:(0,i.jsx)(y.cC,{id:"LwcIt2",values:{GAMMA_PROPER_NOUN:eT.N6}}),children:(0,i.jsx)(x.z,{variant:"ghost",rightIcon:(0,i.jsx)(b.G,{icon:v.qHV}),isLoading:t,isDisabled:r,"aria-label":j.ag._({id:"eoAiXB"}),onClick:n,zIndex:"sticky",size:"sm",loadingText:j.ag._({id:"6xU0OU"}),spinner:(0,i.jsx)(eR.$,{size:"sm",right:2,alignSelf:"flex-end"}),spinnerPlacement:"end",children:(0,i.jsx)(y.cC,{id:"Uehxdq"})})})})};var eM=r(36371),eD=r(73582),eN=r(2969),eH=r(3181),eL=r(13272);let ez=e=>{let{onSelectImage:t,savedMediaId:r,currentAttributes:n,setScope:a,canLoadMore:o,loadMore:l,isLoadingMore:s,history:d,deleteImage:u,isDeleting:h}=e;return(0,i.jsxs)(eM.m,{size:"sm",variant:"soft-rounded",onChange:e=>a&&a(1===e?"user":"doc"),isFitted:!0,children:[(0,i.jsxs)(eD.t,{children:[(0,i.jsx)(eN.O,{children:(0,i.jsx)(c.x,{children:(0,i.jsx)(y.cC,{id:"MaMO+E",values:{GAMMA_ARTIFACT_PROPER_NOUN:eT.Yc}})})}),(0,i.jsx)(eN.O,{children:(0,i.jsx)(c.x,{children:(0,i.jsx)(y.cC,{id:"tidZ1g"})})})]}),(0,i.jsxs)(eH.n,{children:[(0,i.jsx)(eL.x,{children:(0,i.jsx)(et,{onSelectImage:t,currentAttributes:n,savedMediaId:r,canLoadMore:o,loadMore:l,isLoadingMore:s,history:d,deleteImage:u,isDeleting:h,resizeThumbnails:!0})}),(0,i.jsx)(eL.x,{children:(0,i.jsx)(et,{onSelectImage:t,currentAttributes:n,savedMediaId:r,canLoadMore:o,loadMore:l,isLoadingMore:s,history:d,deleteImage:u,isDeleting:h,resizeThumbnails:!0})})]})]})};var eG=r(6114),eF=r(13090),eB=r(65397);let eW=e=>{let t,{selectImage:r,refetch:i}=e,n=(0,z.CG)(G.ke),a=(0,z.CG)(eB.OE);"new"===a&&(a=void 0,t=k.wNJ.Theme);let{currentWorkspace:o}=(0,R.SE)(),[l,s]=(0,w.useState)(""),[c,d]=(0,w.useState)(!1),[u,h]=(0,w.useState)(!1),[g,p]=(0,w.useState)("");return{generate:(0,w.useCallback)(async e=>{let l=(0,A.nZ)();s(e.prompt),d(!0),h(!1),p("");let c={...e,stylePreset:e.stylePreset||eS.si.Theme,stylePrompt:e.stylePrompt||"",docId:e.docId||n,themeId:e.themeId||a,context:e.context||t},u=(0,es.mw)(e.model),g=performance.now(),m={interactionId:l,interface:"generate-image",provider:null==u?void 0:u.provider,streaming:!1,inputContent:c.prompt,docId:c.docId,generateImageOptions:c};try{(0,A.hq)(m);let e=await (0,es.Qz)({interactionId:l,workspaceId:null==o?void 0:o.id,...c});if(d(!1),0===e.length)throw Error("No images generated");e.length>0&&(i(),r(e[0])),(0,eF.d)("generateImage",void 0,l),(0,A.o)({...m,latency:performance.now()-g,generateImageUrls:e.map(e=>e.attrs.src)})}catch(e){h(!0),p(e.messageTranslated?e.messageTranslated:j.ag._({id:"QcZqsh"})),d(!1),console.error("(caught) [AIGenerateImage] error:",e),(0,A.pQ)({...m,latency:performance.now()-g,errorName:"GenerateImageError",errorMessage:e.message,outputMessage:""})}d(!1)},[n,a,t,null==o?void 0:o.id,i,r]),isGenerating:c,hasError:u,errorMessage:g,searchQuery:l}};var eq=r(73208),eV=r(54326),eK=r(2338),eQ=r(97217),eX=r(50250),eZ=r(82713),eY=r(95405);let eJ=async e=>{let{imageUrl:t,upscaleFactor:r}=e,i="".concat(eY.v.API_HOST||"https://api.gamma.app","/media/images/upscale"),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t,upscaleFactor:r})});if(!n.ok){let e=await n.json();throw Error("".concat(e.error,": ").concat(e.message),e)}return(await n.json()).data},e$=e=>{let{canGenerate:t,isEnhancingPrompt:r,images:a,loadMore:o,canLoadMore:l,isLoadingMore:d}=e,{isOpen:u,onOpen:h,onClose:g}=(0,V.q)(),[m,f]=(0,w.useState)([]),[v,b]=(0,w.useState)(2),[C,A]=(0,w.useState)(!1),[k,_]=(0,w.useState)(!1),S=(0,q.p)(),P=(0,w.useCallback)(e=>{f(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},[]),E=(0,w.useCallback)(()=>{k?f([]):f(a.map(e=>e.id)),_(!k)},[a,k]),I=(0,w.useCallback)(async e=>{let t=atob(e),r=Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=new Blob([new Uint8Array(r)],{type:"image/jpeg"}),n=window.URL.createObjectURL(i),a=document.createElement("a");a.href=n,a.download="image.jpg",a.click()},[]),U=(0,w.useCallback)(async()=>{A(!0);let e=a.filter(e=>m.includes(e.id)),t=1;await Promise.all(e.map(async e=>{I(await eJ({imageUrl:e.attrs.src,upscaleFactor:v})),S({title:"Image ".concat(t," downloaded"),status:"success",duration:3e3,isClosable:!0}),t++})),A(!1)},[a,m,v,A,S,I]);return(0,i.jsxs)(n.g,{spacing:4,align:"stretch",children:[(0,i.jsx)(x.z,{variant:"outline",isDisabled:!t||r,onClick:h,px:12,children:(0,i.jsx)(y.cC,{id:"DN9OsQ"})}),(0,i.jsxs)(X.u_,{isOpen:u,onClose:g,size:"2xl",scrollBehavior:"inside",children:[(0,i.jsx)(Z.Z,{}),(0,i.jsxs)(Y.h,{children:[(0,i.jsx)(eV.x,{children:(0,i.jsx)(y.cC,{id:"Ud0Jjb"})}),(0,i.jsx)(eK.o,{}),(0,i.jsxs)(eQ.f,{children:[(0,i.jsx)(ey.M,{gap:2,columns:5,children:a.map(e=>(0,i.jsx)(e0,{image:e,isSelected:m.includes(e.id),onSelectImage:P},e.id))}),l&&(0,i.jsx)(x.z,{variant:"plain",onClick:o,mt:4,isLoading:d,children:(0,i.jsx)(y.cC,{id:"yQ2kGp"})})]}),(0,i.jsxs)(eX.m,{justifyContent:"space-between",children:[(0,i.jsxs)(s.U,{spacing:2,children:[(0,i.jsx)(eZ.X,{checked:k,onChange:E}),(0,i.jsx)(c.x,{size:"sm",children:(0,i.jsx)(y.cC,{id:"wgNoIs"})})]}),(0,i.jsxs)(s.U,{spacing:4,children:[(0,i.jsx)(L.kH,{placement:"top",label:(0,i.jsx)(y.cC,{id:"UiTWCg"}),children:(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"yT2JRA"})})}),(0,i.jsx)(x.z,{variant:"solid",mr:3,onClick:U,isLoading:C,isDisabled:0===m.length,children:j.ag._({id:"0/T2Xv",values:{0:m.length}})})]})]})]})]})]})},e0=e=>{let{image:t,isSelected:r,onSelectImage:n}=e,a=(0,B.Ly)(t.attrs.src);return(0,i.jsx)(T.P,{children:(0,i.jsx)(x.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),backgroundImage:a,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",role:"group",children:(0,i.jsx)(M.p,{in:r,children:(0,i.jsx)(d.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(D.M,{h:"100%",w:"100%",children:(0,i.jsx)(b.G,{icon:v.LEp})})})})})},t.id)},e1=e=>{var t,r;let{currentAttributes:I,updateAttributes:U,editor:R,contextualTheme:T,savedMediaContext:O}=e,M=(0,w.useRef)(null),D=(0,z.CG)(ef.lH),N=(0,z.CG)(G.ke),{hasEnoughCreditsToGenerateImage:H}=(0,P.qO)(),L=(0,E.ye)("aiGeneratedImagesAdvancedOptions"),F=(0,E.ye)("aiImageHistoryTabs"),W=(0,w.useMemo)(()=>F?R?"doc":"user":"legacy",[R,F]),[q,V]=(0,w.useState)(W),{prompt:K,addPrompt:Q,promptPageInfo:X,nextPrompt:Z,prevPrompt:Y,model:J,setModel:$,stylePreset:ee,setStylePreset:er,stylePrompt:ei,setStylePrompt:en,stylePresetOptions:ea,getTargetPresetData:eo,findThemeNameFromStylePrompt:el,aspectRatio:es,setAspectRatio:ec,imageGenerateConfig:eb,loadImageAiParams:ey,resetImageAiParams:ej,isPromptDirty:eC,count:eA,setCount:ek,negativePrompt:e_,setNegativePrompt:eE,steps:eI,setSteps:eU,cfgScale:eR,setCfgScale:eT}=(0,eh.Xc)(T,R,I),eM=eC(I),eD=(0,ex.b)(R),{isEnhancing:eN,setIsEnhancing:eH,runEnhanceImagePrompt:eL}=(0,eu.ec)({editor:R,prompt:(null==R?void 0:R.isSiteNavbarEditor)?"Logo for ".concat(null==D?void 0:D.name):K,stylePrompt:ei,addPrompt:Q}),{history:eF,loadMore:eB,canLoadMore:eV,isLoadingMore:eK,deleteImage:eQ,isDeleting:eX,refetch:eZ}=(0,eG.c)({docId:N,scope:q}),eY=(0,w.useCallback)(e=>{ey(e.attrs.aiParams,"select"),U({tempUrl:(0,B.SN)(e.attrs.src,B.Iv,e.attrs.meta),...e.attrs}),R&&eD(R.state.selection.from)},[R,ey,eD,U]),{generate:eJ,isGenerating:e0,hasError:e1,errorMessage:e2}=eW({selectImage:eY,refetch:eZ}),e4=(null==I?void 0:I.source)==="image.ai-generated"&&!!(null==I?void 0:I.src),e3=null==I?void 0:I.savedMediaId,e5=e4?null==I?void 0:I.src:void 0;(0,ev.vm)(()=>{var e;e4&&(null==I?void 0:null===(e=I.aiParams)||void 0===e?void 0:e.prompt)?ey(I.aiParams,"load"):!e4&&(null==I?void 0:I.query)&&Q(I.query,"load")},[Q,I,e4,ey],[I]),(0,w.useEffect)(()=>{setTimeout(()=>{var e;null===(e=M.current)||void 0===e||e.focus()},200)},[]);let e9=(0,w.useCallback)(()=>{var e,t;if(!R)return;let{stylePreset:r,model:i}=eb,n=null===(t=R.getAttributes("document").aiOptions)||void 0===t?void 0:null===(e=t.imageOptions)||void 0===e?void 0:e.stylePrompt,a={stylePreset:r,model:i,stylePrompt:eb.stylePreset===eS.si.Custom?eb.stylePrompt:n};R.commands.updateNestedAttributesAtPos(0,{aiOptions:{imageOptions:a}})},[R,eb]),e7=(0,w.useCallback)(async()=>{if(!eN&&!e0)try{if(0===K.trim().length){let e=await eL();e&&await eJ({...eb,prompt:e,...O?{context:O}:{}})}else await eJ({...eb,...O?{context:O}:{}});e9()}catch(e){console.error("Error generating AI image",e)}finally{eH(!1)}},[eJ,eb,O,eN,e0,K,eL,eH,e9]),e8=(0,P.YO)(e7,"generateImage",em.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),e6=(0,w.useCallback)(e=>{"Enter"===e.key&&e.metaKey&&(e.preventDefault(),e8()),e.stopPropagation()},[e8]),{saveImageRating:te}=(0,eu.S8)(),tt=(0,w.useCallback)(e=>{var t;(null==I?void 0:null===(t=I.aiParams)||void 0===t?void 0:t.interactionId)&&((0,A.Io)({rating:e,aiParams:I.aiParams,imageUrl:I.src,interactionId:I.aiParams.interactionId}),te(I,e))},[I,te]),tr=(null==I?void 0:null===(t=I.aiParams)||void 0===t?void 0:t.interactionId)||"",{savedMedia:ti}=(0,eu.Rq)(tr,(null==I?void 0:null===(r=I.aiParams)||void 0===r?void 0:r.prompt)||"");return(0,i.jsxs)(n.g,{spacing:4,align:"stretch",translate:"no",children:[e5&&(0,i.jsx)(eP,{imagesMatchingInteractionId:tr?ti:[],currentAttributes:I,isGenerating:e0,isDeleting:eX,selectedSavedMediaId:null!=e3?e3:"",selectImage:eY,onRateImage:tt,deleteImage:eQ}),e1&&(0,i.jsxs)(a.b,{status:"error",flexDirection:"row",alignItems:"start",justifyContent:"start",borderRadius:"md",children:[(0,i.jsx)(o.z,{}),(0,i.jsx)(l.X,{children:e2})]}),(0,i.jsxs)(n.g,{align:"stretch",spacing:4,children:[(0,i.jsxs)(n.g,{align:"stretch",spacing:1,children:[(0,i.jsx)(s.U,{position:"relative",align:"center",justify:"space-between",children:(0,i.jsx)(c.x,{fontSize:"sm",fontWeight:"semibold",color:e0?"gray.500":"",children:(0,i.jsx)(y.cC,{id:"sU1/3l"})})}),(0,i.jsxs)(d.xu,{position:"relative",children:[(0,i.jsx)(C.o,{ref:M,isDisabled:e0,placeholder:eN?"":O===k.wNJ.Dashboard?j.ag._({id:"+VHqP0"}):j.ag._({id:"6RfNWb"}),onKeyDown:e6,value:K,onChange:e=>Q(e.target.value,"update"),"data-testid":"image-search-input",rows:5,initialHeight:"65px",bottomSpacing:35}),R&&(0,i.jsx)(eO,{isEnhancingPrompt:eN,isGenerating:e0,runEnhancePrompt:eL})]}),X.total>1&&(0,i.jsx)(eg.O,{alignSelf:"end",promptPageInfo:X,nextPrompt:Z,prevPrompt:Y,isDisabled:e0||eN})]}),(0,i.jsxs)(n.g,{align:"stretch",gap:4,children:[(0,i.jsxs)(n.g,{align:"stretch",children:[(0,i.jsx)(c.x,{fontSize:"sm",fontWeight:"semibold",color:e0?"gray.500":"",children:(0,i.jsx)(y.cC,{id:"1CalO6"})}),(0,i.jsx)(ep.A,{stylePreset:ee,stylePrompt:ei,setStylePrompt:en,setStylePreset:er,presetOptions:ea,isDisabled:e0,contextualTheme:T,findThemeNameFromStylePrompt:el,getTargetPresetData:eo,onKeyDown:e6})]}),(0,i.jsxs)(s.U,{w:"100%",children:[(0,i.jsxs)(n.g,{w:"100%",align:"stretch",children:[(0,i.jsx)(c.x,{fontSize:"sm",fontWeight:"semibold",color:e0?"gray.500":"",children:(0,i.jsx)(y.cC,{id:"iKM2jY"})}),(0,i.jsx)(ed,{value:es,setValue:ec,model:J,isDisabled:e0})]}),(0,i.jsxs)(n.g,{w:"100%",align:"stretch",children:[(0,i.jsx)(c.x,{fontSize:"sm",fontWeight:"semibold",color:e0?"gray.500":"",children:(0,i.jsx)(y.cC,{id:"scu3wk"})}),J&&(0,i.jsx)(eq.q,{value:J,setValue:$,isDisabled:e0})]})]})]}),L&&(0,i.jsx)(u.U,{allowToggle:!0,children:(0,i.jsxs)(h.Q,{children:[(0,i.jsxs)(g.K,{children:[(0,i.jsx)(d.xu,{as:"span",flex:"1",textAlign:"left",children:(0,i.jsx)(p.X,{size:"sm",children:(0,i.jsx)(y.cC,{id:"sxkWRg"})})}),(0,i.jsx)(m.X,{})]}),(0,i.jsx)(f.H,{pb:4,children:(0,i.jsx)(ew,{enabled:!0,isGenerating:e0,negativePrompt:e_,setNegativePrompt:eE,count:eA,setCount:ek,steps:eI,setSteps:eU,cfgScale:eR,setCfgScale:eT,model:J})})]})}),(0,i.jsxs)(n.g,{spacing:1,align:"stretch",children:[(0,i.jsxs)(x.z,{variant:"solid",isLoading:e0,isDisabled:eN,onClick:e8,px:12,children:[(0,i.jsx)(y.cC,{id:"OSaxlZ"}),(0,i.jsx)(S.J,{type:"generateImage",position:"absolute",right:4})]}),R&&(0,i.jsx)(x.z,{onClick:()=>ej(I),leftIcon:(0,i.jsx)(b.G,{icon:v.XnX}),isDisabled:!eM||e0,sx:{opacity:eM?1:.5,transition:"opacity 0.2s ease-in-out",_hover:{color:eM?"trueblue.500":""}},children:(0,i.jsx)(y.cC,{id:"L+rMC9"})}),(0,i.jsx)(_.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:em.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES}),L&&(0,i.jsx)(e$,{canGenerate:H,isEnhancingPrompt:eN,images:eF,loadMore:eB,canLoadMore:eV,isLoadingMore:eK})]})]}),R&&(F?(0,i.jsx)(ez,{onSelectImage:eY,savedMediaId:e3,currentAttributes:I,setScope:V,canLoadMore:eV,loadMore:eB,isLoadingMore:eK,history:eF,deleteImage:eQ,isDeleting:eX,resizeThumbnails:!0}):(0,i.jsx)(et,{onSelectImage:eY,savedMediaId:e3,currentAttributes:I,canLoadMore:eV,loadMore:eB,isLoadingMore:eK,history:eF,deleteImage:eQ,isDeleting:eX,resizeThumbnails:!0}))]})}},26171:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var i=r(16749),n=r(8940);let a=new i.V({systemPromptOperation:n.Run.GenerateImagePromptSystem,userPromptOperation:n.Run.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},73208:function(e,t,r){"use strict";r.d(t,{q:function(){return A}});var i=r(52322),n=r(35183),a=r(10625),o=r(67046),l=r(62614),s=r(29117),c=r(38035),d=r(75009),u=r(77533),h=r(332),g=r(99058),p=r(25481),m=r(42946),f=r(49929),x=r(34742),v=r(10617),b=r(4476),y=r(16720),j=r(71383),w=r(31601),C=r(78112);let A=e=>{let{value:t,setValue:r,isDisabled:A}=e,k=(0,x.mw)(t),_=(0,j.CG)(C.yx),S=(0,v.Y)("ai_premium_models",null==_?void 0:_.organization),{openUpsellModal:P}=(0,y.z)();return(0,i.jsx)(n.NI,{children:(0,i.jsxs)(a.v,{children:[(0,i.jsx)(o.j,{as:l.z,variant:"plain",isDisabled:A,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,i.jsx)(f.G,{icon:m.ptq}),boxShadow:"none",children:(0,i.jsxs)(s.U,{spacing:2,children:[(0,i.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:k.image?(0,i.jsx)(d.E,{src:k.image.src,w:"1.25em",h:"1.25em",objectFit:"contain"}):(0,i.jsx)(f.G,{icon:k.icon,fixedWidth:!0})}),(0,i.jsx)(u.x,{as:"span",flex:1,children:null==k?void 0:k.label()})]})}),(0,i.jsx)(h.h,{children:(0,i.jsx)(g.q,{minWidth:"250px",w:"350px",maxH:"350px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",border:"1px solid",borderColor:"gray.200",children:Object.entries(x.Iw).map(e=>{let[t,{label:n,description:a,icon:o,image:l}]=e;if(!(0,x.Hr)(t))return null;let c=(0,x.Om)(t);return(0,i.jsxs)(p.s,{value:t,icon:l?(0,i.jsx)(d.E,{src:l.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):(0,i.jsx)(f.G,{icon:o,fixedWidth:!0}),onClick:()=>{if(c&&!S){P({segmentEvent:w.AA.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS});return}r(t)},children:[(0,i.jsxs)(s.U,{children:[(0,i.jsx)(u.x,{children:n()}),c&&(0,i.jsx)(b.U,{productFeature:"ai_premium_models",workspace:null==_?void 0:_.organization})]}),a&&(0,i.jsx)(u.x,{color:"gray.400",fontSize:"sm",children:a()})]},t)})})})]})})}},67548:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var i=r(52322),n=r(29117),a=r(32899),o=r(28535),l=r(42946),s=r(49929);let c=e=>{let{promptPageInfo:t,nextPrompt:r,prevPrompt:c,isDisabled:d,...u}=e;return(0,i.jsxs)(n.U,{spacing:1,...u,children:[(0,i.jsx)(a.h,{variant:"ghost",icon:(0,i.jsx)(s.G,{icon:l.A35}),isDisabled:d||!t.canGoPrev,onClick:()=>c(),"aria-label":"left",color:"gray.800",size:"xs"}),(0,i.jsxs)(o.xu,{as:"span",color:"gray.800",fontSize:"sm",children:[t.curr," / ",t.total]}),(0,i.jsx)(a.h,{variant:"ghost",icon:(0,i.jsx)(s.G,{icon:l._tD}),color:"gray.800",isDisabled:d||!t.canGoNext,onClick:()=>r(),"aria-label":"left",size:"xs"})]})}},20183:function(e,t,r){"use strict";r.d(t,{A:function(){return S}});var i=r(52322),n=r(55478),a=r(35183),o=r(38035),l=r(43679),s=r(34071),c=r(62614),d=r(29117),u=r(75009),h=r(28535),g=r(39429),p=r(48394),m=r(17993),f=r(74409),x=r(20437),v=r(29494),b=r(77533),y=r(42946),j=r(49929),w=r(2784),C=r(71383),A=r(78112),k=r(92763),_=r(5946);let S=(0,w.memo)(e=>{var t;let{stylePreset:r,setStylePreset:b,stylePrompt:S,setStylePrompt:E,presetOptions:I,isDisabled:U,contextualTheme:R,findThemeNameFromStylePrompt:T,getTargetPresetData:O,onKeyDown:M}=e,{isOpen:D,onToggle:N,onClose:H}=(0,n.q)(),L=(0,w.useMemo)(()=>k.gL.find(e=>e.stylePreset===r),[r]),[z,G]=(0,w.useState)(L),F=(0,C.CG)(A.Pu),B=R||F,W=null==B?void 0:null===(t=B.config)||void 0===t?void 0:t.stylePrompt,q=(0,w.useCallback)(e=>{E(e.target.value),r!==k.si.Custom&&(b(k.si.Custom),G(k.gL.find(e=>e.stylePreset===k.si.Custom)))},[E,b,r]),V=(0,w.useCallback)(e=>{let{targetStylePrompt:t,targetStylePreset:r}=O(e);E(t),b(e),G(r),H()},[O,H,b,E]),K=(0,w.useMemo)(()=>{if(r===k.si.Theme)return T(S)},[T,r,S]),{scrollContainerRef:Q}=(0,_.n1)(r||"",D);return(0,i.jsx)(a.NI,{children:(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsxs)(l.J,{placement:"bottom-start",matchWidth:!0,isOpen:D,onClose:H,closeOnBlur:!0,children:[(0,i.jsx)(s.x,{children:(0,i.jsx)(c.z,{width:"100%",type:"button",boxShadow:"none",onClick:N,rightIcon:(0,i.jsx)(j.G,{icon:y.ptq}),isDisabled:U,justifyContent:"space-between",children:(0,i.jsxs)(d.U,{spacing:2,children:[(null==z?void 0:z.icon)?(0,i.jsx)(j.G,{icon:z.icon}):(0,i.jsx)(u.E,{width:"24px",height:"24px",src:null==z?void 0:z.imageUrl,borderRadius:"md"}),(0,i.jsx)(h.xu,{flex:1,children:"".concat(null==z?void 0:z.name()).concat(K?" (".concat(K,")"):"")})]})})}),(0,i.jsx)(g.y,{width:"auto",maxHeight:"max(350px, 40vh)",overflowY:"auto",ref:Q,children:(0,i.jsx)(p.b,{children:(0,i.jsx)(m.g,{spacing:4,children:I.map(e=>(0,i.jsxs)(m.g,{alignItems:"start",width:"100%",spacing:0,children:[(0,i.jsx)(f.X,{size:"sm",mb:2,children:e.title()}),(0,i.jsx)(x.M,{columns:{base:3,"2xl":4},spacing:2,children:e.presets.filter(e=>!("Theme"===e.stylePreset&&!W)).map(e=>(0,i.jsx)(h.xu,{"data-popover-scroll-id":e.stylePreset,children:(0,i.jsx)(P,{preset:e,onClick:()=>V(e.stylePreset),isSelected:e.stylePreset===r},e.stylePreset)},e.stylePreset))})]},e.title()))})})})]}),r!==k.si.None&&(0,i.jsx)(v.g,{onKeyDown:M,isDisabled:U,height:"80px",value:S,onChange:q,resize:"none"})]})})});S.displayName="StylePresetMenu";let P=e=>{let{preset:t,onClick:r,isSelected:n}=e;return(0,i.jsxs)(m.g,{_hover:{cursor:n?"default":"pointer",borderColor:n?"trueblue.200":"gray.200",backgroundColor:n?"trueblue.50":"gray.50"},onClick:r,borderRadius:"md",spacing:1,p:2,border:"1px",width:"100%",color:n?"trueblue.500":"gray.900",bgColor:n?"trueblue.50":"transparent",borderColor:n?"trueblue.200":"transparent",children:[t.icon?(0,i.jsx)(h.xu,{width:{base:"120px","2xl":"123.5px"},height:"35px",display:"flex",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(h.xu,{width:"100%",height:"100%",bgColor:"transparent",rounded:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(j.G,{icon:t.icon})})}):(0,i.jsx)(u.E,{src:t.imageUrl,width:"100%",height:"auto",borderRadius:"md"}),(0,i.jsx)(b.x,{color:n?"trueblue.500":"gray.900",fontSize:"sm",children:t.name()})]})}},92763:function(e,t,r){"use strict";r.d(t,{sl:function(){return l},gL:function(){return s},me:function(){return a},si:function(){return o}});var i=r(42946),n=r(87254);let a={Default:()=>n.ag._({id:"46F406"}),Realistic:()=>n.ag._({id:"uFPBcL"}),Artistic:()=>n.ag._({id:"tqhB0N"})},o={None:"None",Anime:"Anime",Digital_Art_Concept_Art:"Digital_Art_Concept_Art",Ethereal_Fantasy_Art:"Ethereal_Fantasy_Art",Photography:"Photography",Analog_film:"Analog_film",Vaporwave:"Vaporwave",Isometric:"Isometric",Low_Poly:"Low_Poly",Claymation:"Claymation",Origami:"Origami",Line_Art:"Line_Art",Pixel_Art:"Pixel_Art",Texture:"Texture",Theme:"Theme",Custom:"Custom"},l={square:1,landscape:4/3,portrait:3/4},s=[{stylePreset:o.None,name:()=>n.ag._({id:"iXzipJ"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/default.jpg",icon:i.gPx,category:a.Default,stylePrompt:""},{stylePreset:o.Anime,name:()=>n.ag._({id:"RulMCV"}),imageUrl:"/_next/static/media/anime.c842eccd.jpg",category:a.Artistic,stylePrompt:"anime artwork. anime style, key visual, vibrant, studio anime, highly detailed"},{stylePreset:o.Digital_Art_Concept_Art,name:()=>n.ag._({id:"PADW9l"}),imageUrl:"/_next/static/media/digital-art.728c3ff0.jpg",category:a.Artistic,stylePrompt:"concept art. digital artwork, illustrative, painterly, matte painting, highly detailed"},{stylePreset:o.Ethereal_Fantasy_Art,name:()=>n.ag._({id:"C1chBY"}),imageUrl:"/_next/static/media/fantasy.86ede605.jpg",category:a.Artistic,stylePrompt:"ethereal fantasy concept art of. magnificent, celestial, ethereal, painterly, epic, majestic, magical, fantasy art, cover art, dreamy"},{stylePreset:o.Photography,name:()=>n.ag._({id:"j1ao1Y"}),imageUrl:"/_next/static/media/photography.bce47d9c.jpg",category:a.Realistic,stylePrompt:"cinematic photo. 35mm photograph, film, bokeh, professional, 4k, highly detailed"},{stylePreset:o.Analog_film,name:()=>n.ag._({id:"bK8OnA"}),imageUrl:"/_next/static/media/analog-film.105509c1.jpg",category:a.Realistic,stylePrompt:"analog film photo. faded film, desaturated, 35mm photo, grainy, vignette, vintage, Kodachrome, Lomography, stained, highly detailed, found footage"},{stylePreset:o.Vaporwave,name:()=>n.ag._({id:"rPpJGr"}),imageUrl:"/_next/static/media/vaporwave.f8a9afd0.jpg",category:a.Artistic,stylePrompt:"vaporwave synthwave style. cyberpunk, neon, vibes, stunningly beautiful, crisp, detailed, sleek, ultramodern, high contrast, cinematic composition"},{stylePreset:o.Isometric,name:()=>n.ag._({id:"rHgk/g"}),imageUrl:"/_next/static/media/isometric.86adffe4.jpg",category:a.Artistic,stylePrompt:"isometric style. vibrant, beautiful, crisp, detailed, ultra detailed, intricate"},{stylePreset:o.Low_Poly,name:()=>n.ag._({id:"X3ZAzR"}),imageUrl:"/_next/static/media/low-poly.e2805ce4.jpg",category:a.Artistic,stylePrompt:"low-poly style. ambient occlusion, low-poly game art, polygon mesh, jagged, blocky, wireframe edges, centered composition"},{stylePreset:o.Claymation,name:()=>n.ag._({id:"Q61KDs"}),imageUrl:"/_next/static/media/claymation.92bfacf1.jpg",category:a.Artistic,stylePrompt:"claymation style. sculpture, clay art, centered composition, play-doh"},{stylePreset:o.Origami,name:()=>n.ag._({id:"MHkaLx"}),imageUrl:"/_next/static/media/origami.2586b331.jpg",category:a.Artistic,stylePrompt:"origami style. paper art, pleated paper, folded, origami art, pleats, cut and fold, centered composition"},{stylePreset:o.Line_Art,name:()=>n.ag._({id:"i6SPYf"}),imageUrl:"/_next/static/media/line-art.bd2852c5.jpg",category:a.Artistic,stylePrompt:"line art drawing. professional, sleek, modern, minimalist, graphic, line art, vector graphics"},{stylePreset:o.Pixel_Art,name:()=>n.ag._({id:"3a27VZ"}),imageUrl:"/_next/static/media/pixel-art.ca70c7b3.jpg",category:a.Artistic,stylePrompt:"pixel-art. low-res, blocky, pixel art style, 16-bit graphics"},{stylePreset:o.Texture,name:()=>n.ag._({id:"MCId55"}),imageUrl:"/_next/static/media/texture.6214fde9.jpg",category:a.Artistic,stylePrompt:"texture. top down close-up, video game"},{stylePreset:o.Theme,name:()=>n.ag._({id:"c8dzFk"}),imageUrl:"",icon:i.q2v,category:a.Default,stylePrompt:""},{stylePreset:o.Custom,name:()=>n.ag._({id:"zkWoIW"}),imageUrl:"",icon:i.TzT,category:a.Default,stylePrompt:""}]},5946:function(e,t,r){"use strict";r.d(t,{Rq:function(){return A},S8:function(){return C},ec:function(){return v},jg:function(){return w},n1:function(){return _},oj:function(){return k}});var i=r(27191),n=r(2784),a=r(90025),o=r(69964),l=r(34742);r(26171);var s=r(10617),c=r(71383),d=r(23186),u=r(78112),h=r(12971),g=r(31335);r(97134);var p=r(32817),m=r(6114);let f=e=>{var t,r;if(!(e instanceof i.qv))return null;if("smartLayoutCell"===e.node.type.name&&(null===(t=e.node.textContent)||void 0===t?void 0:t.length)>=5)return e.node.content;let n=e.$from;for(;n.depth>0;){let e=n.node(n.depth);if("smartLayoutCell"===e.type.name&&(null===(r=e.textContent)||void 0===r?void 0:r.length)>=5)return e.content;n=n.doc.resolve(n.before(n.depth))}return null},x=e=>(0,n.useCallback)(()=>{if(!e)return null;let{selection:t}=e.state,r=(0,h.Ru)(t.$from,g.KH)[0],i=r&&(0,d.NE)(r.node,r.pos),{content:n}=e.state.doc.slice(i.pos+1,i.pos+i.node.nodeSize-1),o=f(t);return o?(0,a.c)(e,o):(0,a.c)(e,n)},[e]),v=e=>{let{editor:t,prompt:r,stylePrompt:i,addPrompt:a}=e,l=(0,c.CG)(u.Wl),[s,d]=(0,n.useState)(!1),h=x(t),g=(0,n.useCallback)(()=>{d(!0),a("","push")},[a]),p=(0,n.useCallback)(e=>{a(e,"update")},[a]),m=(0,n.useCallback)(()=>{d(!1)},[]),f=(0,n.useCallback)(e=>{console.error("Error enhancing image",e),d(!1)},[]),{generate:v}=(0,o.jz)("EnhanceAIImage",{onStart:g,onContent:p,onComplete:m,onError:f,timeout:3e4}),b=(0,n.useCallback)(()=>{var e;if(!s&&(null==l?void 0:l.id))return v({variables:{currentPrompt:r,stylePrompt:i,cardHtml:(null==t?void 0:t.isSiteNavbarEditor)?void 0:null!==(e=h())&&void 0!==e?e:void 0},workspaceId:l.id}).promise},[s,null==l?void 0:l.id,v,r,i,null==t?void 0:t.isSiteNavbarEditor,h]);return{isEnhancing:s,setIsEnhancing:d,runEnhanceImagePrompt:b}},b=e=>e.ind===e.history.length-1,y=e=>e.history[e.history.length-1],j={load:(e,t)=>({history:[t],ind:0}),push(e,t){return""===y(e).trim()?this.replace(e,t):{history:[...e.history,t],ind:e.history.length}},replace(e,t){let r=e.history.slice(0,-1);return{history:[...r,t],ind:r.length}},select(e,t){return b(e)&&y(e)===t?e:this.push(e,t)}},w=()=>{let e=(0,n.useRef)(!1),[t,r]=(0,n.useState)({history:[""],ind:0}),i=(0,n.useCallback)((t,i)=>{"load"===i&&r(e=>j.load(e,t)),"push"===i&&r(e=>j.push(e,t)),"update"===i&&(e.current?r(e=>j.push(e,t)):r(e=>j.replace(e,t))),"select"===i&&r(e=>j.select(e,t)),e.current="update"!==i},[]),a=(0,n.useCallback)(()=>{let{ind:e}=t;e<=0||r(e=>({...e,ind:e.ind-1}))},[t]),o=(0,n.useCallback)(()=>{let{history:e,ind:i}=t;i>=e.length-1||r(e=>({...e,ind:e.ind+1}))},[t]),{ind:l,history:s}=t;return{prompt:s[l]||"",addPrompt:i,promptPageInfo:{curr:l+1,total:s.length,canGoNext:l<s.length-1,canGoPrev:l>0},nextPrompt:o,prevPrompt:a}},C=()=>{let[e,t]=(0,p.I)("aiImageRatings",{});return{saveImageRating:(0,n.useCallback)((r,i)=>{r.savedMediaId&&(e[r.savedMediaId]=i,t(e))},[]),hasRatedImage:(0,n.useCallback)(t=>!t.savedMediaId||!!e[t.savedMediaId],[])}},A=(e,t)=>{let r=(0,c.CG)(u.ke),{data:i,loading:a}=(0,m.L)({interactionId:e,docId:r,scope:"doc"}),o="workspaceSavedMedia";return{savedMedia:(0,n.useMemo)(()=>{var e;let r=null==i?void 0:null===(e=i[o])||void 0===e?void 0:e.edges;return null==r?void 0:r.map(e=>e.node).filter(e=>e.attrs.query===t)},[i,o,t]),isLoading:a}},k=()=>{let e=(0,c.CG)(u.yx),t=(0,s.Y)("ai_premium_models",null==e?void 0:e.organization);return(0,n.useCallback)(e=>(0,l.Hr)(e)&&(t||!(0,l.Om)(e)),[t])},_=(e,t)=>{let r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!t)return;let i=r.current;if(!i)return;let n=i.querySelector('[data-popover-scroll-id="'.concat(e,'"]'));if(!(n instanceof HTMLElement))return;let a=n.offsetHeight/2,o=i.offsetHeight/2,l=n.offsetTop-o+a;i.scrollTo({top:l,behavior:"instant"})},[t,e]),{scrollContainerRef:r}}},6114:function(e,t,r){"use strict";r.d(t,{L:function(){return l},c:function(){return o}});var i=r(2784),n=r(69971),a=r(97134);let o=e=>{var t;let{docId:r,themeId:a,interactionId:o,scope:s="legacy"}=e,{data:c,loading:d,fetchMore:u,refetch:h}=l({scope:s,docId:r,themeId:a,interactionId:o}),g=(0,i.useMemo)(()=>{switch(s){case"user":return"userSavedMedia";case"doc":return"workspaceSavedMedia";default:return"savedMedia"}},[s]),p=(0,i.useMemo)(()=>{var e;return((null==c?void 0:null===(e=c[g])||void 0===e?void 0:e.edges)||[]).map(e=>e.node)},[c,g]),m=null==c?void 0:null===(t=c[g])||void 0===t?void 0:t.pageInfo,[f,x]=(0,i.useState)(!1),v=(0,i.useCallback)(async()=>{if((null==m?void 0:m.hasNextPage)&&(null==m?void 0:m.endCursor)){x(!0);try{await u({variables:{after:m.endCursor},updateQuery:(e,t)=>{var r,i;let{fetchMoreResult:n}=t;if(!n)return e;let a=(null===(r=n[g])||void 0===r?void 0:r.edges)||[],o=[...(null===(i=e[g])||void 0===i?void 0:i.edges)||[],...a];return{...e,[g]:{...n[g],edges:o}}}})}catch(e){console.error("Error loading more images:",e)}finally{x(!1)}}},[u,m,g]),[b,y]=(0,i.useState)(null),[j,w]=(0,i.useState)(!1),[C]=(0,n.BAq)(),A=(0,i.useCallback)(async e=>{y(e),w(!0);try{await C({variables:{id:e},update:t=>{t.evict({id:t.identify({id:e,__typename:"SavedMedia"})}),t.gc()},refetchQueries:["GetSavedMedia","GetUserSavedMedia","GetWorkspaceSavedMedia"]})}catch(e){console.error("Error deleting image:",e)}finally{y(null),w(!1)}},[C]);return{history:p,loadMore:v,isLoadingMore:f,canLoadMore:!!(null==m?void 0:m.hasNextPage),isLoading:d,deleteImage:A,deletingId:b,isDeleting:j,refetch:h}},l=e=>{var t;let{scope:r,interactionId:i,docId:o,themeId:l}=e,s=null!==(t=(0,a.n_)())&&void 0!==t?t:"",c=i?3:18,d={workspaceId:s,types:[n.DDH.Image],source:"image.ai-generated",first:c,...i?{interactionId:i}:{}},u={type:n.DDH.Image,source:"image.ai-generated",first:c},h={...o?{docId:o}:{},...l?{themeId:l}:{}},g=(0,n.p52)({variables:{...d},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"user"!==r}),p=(0,n.Unw)({variables:{...d,...h},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"doc"!==r}),m=(0,n.qOp)({variables:{...u,...h},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",skip:"legacy"!==r||!o&&!l});return"user"===r?g:"doc"===r?p:m}},46105:function(e,t,r){"use strict";r.d(t,{MI:function(){return y},yD:function(){return b},sK:function(){return v},mG:function(){return x},k8:function(){return f},Ac:function(){return m},Xc:function(){return j}});var i=r(27875),n=r.n(i),a=r(2784),o=r(30240),l=r(34742),s=r(5946),c=r(71383),d=r(45462),u=r(92566),h=r(78112),g=r(92763);let p=(e,t,r)=>{var i,n,o,l,s,p,m;(0,d.a)();let f=(0,c.CG)(u.ez),x=(0,c.CG)(h.Pu),v=e||x,b=!!(0,c.CG)(h.yx),y=(0,a.useMemo)(()=>{var e;return(null==r?void 0:null===(e=r.aiParams)||void 0===e?void 0:e.stylePreset)||(null==t?void 0:t.stylePreset)||g.si.None},[r,t]),j=(0,a.useMemo)(()=>{var e,i,n;let a=null===(e=g.gL.find(e=>e.stylePreset===y))||void 0===e?void 0:e.stylePrompt;return y===g.si.Theme?(null==v?void 0:null===(i=v.config)||void 0===i?void 0:i.stylePrompt)||"":a||(null==r?void 0:null===(n=r.aiParams)||void 0===n?void 0:n.stylePrompt)||(null==t?void 0:t.stylePrompt)||""},[null==r?void 0:null===(i=r.aiParams)||void 0===i?void 0:i.stylePrompt,null==v?void 0:null===(n=v.config)||void 0===n?void 0:n.stylePrompt,y,null==t?void 0:t.stylePrompt]),[w,C]=(0,a.useState)(y),[A,k]=(0,a.useState)(j),_=(0,a.useMemo)(()=>Object.values(g.me).map(e=>({title:e,presets:g.gL.filter(t=>t.category===e&&!t.hidden&&(b||t.stylePreset!==g.si.Custom))})),[b]),S=(0,a.useCallback)(e=>{var i,n,a,o,l;return e===g.si.Theme?(null==v?void 0:null===(n=v.config)||void 0===n?void 0:n.stylePrompt)||"":e===g.si.Custom?(null==r?void 0:null===(a=r.aiParams)||void 0===a?void 0:a.stylePrompt)===(null==v?void 0:null===(o=v.config)||void 0===o?void 0:o.stylePrompt)?(null==t?void 0:t.stylePrompt)||"":(null==r?void 0:null===(l=r.aiParams)||void 0===l?void 0:l.stylePrompt)||(null==t?void 0:t.stylePrompt)||"":(null===(i=g.gL.find(t=>t.stylePreset===e))||void 0===i?void 0:i.stylePrompt)||""},[null==r?void 0:null===(o=r.aiParams)||void 0===o?void 0:o.stylePrompt,null==v?void 0:null===(l=v.config)||void 0===l?void 0:l.stylePrompt,null==t?void 0:t.stylePrompt]),P=(0,a.useCallback)(e=>{var i,n,a;let o;let l=g.gL.find(t=>t.stylePreset===e),s=(null==l?void 0:l.stylePrompt)||"";switch(e){case g.si.Theme:o={targetStylePrompt:(null==v?void 0:null===(i=v.config)||void 0===i?void 0:i.stylePrompt)||"",targetStylePreset:l};break;case g.si.Custom:o={targetStylePrompt:(null==r?void 0:null===(n=r.aiParams)||void 0===n?void 0:n.stylePreset)===g.si.Custom?(null==r?void 0:null===(a=r.aiParams)||void 0===a?void 0:a.stylePrompt)||(null==t?void 0:t.stylePrompt)||"":(null==t?void 0:t.stylePrompt)||"",targetStylePreset:l};break;case g.si.None:o={targetStylePrompt:"",targetStylePreset:l};break;default:o={targetStylePrompt:s,targetStylePreset:l}}return o},[null==r?void 0:null===(s=r.aiParams)||void 0===s?void 0:s.stylePreset,null==r?void 0:null===(p=r.aiParams)||void 0===p?void 0:p.stylePrompt,null==v?void 0:null===(m=v.config)||void 0===m?void 0:m.stylePrompt,null==t?void 0:t.stylePrompt]),E=(0,a.useCallback)(e=>g.gL.find(t=>t.stylePreset===e),[]);return{stylePresetOptions:_,stylePreset:w,stylePrompt:A,defaultPreset:y,defaultPrompt:j,setStylePreset:C,setStylePrompt:k,getTargetPresetData:P,findStylePromptFromPreset:S,findThemeNameFromStylePrompt:(0,a.useCallback)(e=>{var t;return(null===(t=f.find(t=>t.config.stylePrompt===e))||void 0===t?void 0:t.name)||""},[f]),findStylePresetObjectFromPresetId:E}},m=100,f=8,x=200,v=void 0,b=1,y=void 0,j=(e,t,r)=>{var i,c,d,u,h,g,b,j,C;let A=(0,o.ye)("aiGeneratedImagesDefaultModel"),k=null==t?void 0:null===(c=t.getAttributes("document"))||void 0===c?void 0:null===(i=c.aiOptions)||void 0===i?void 0:i.imageOptions,[_,S]=(0,a.useState)(null!==(b=null!==(g=null==r?void 0:null===(d=r.aiParams)||void 0===d?void 0:d.model)&&void 0!==g?g:null==k?void 0:k.model)&&void 0!==b?b:A),[P,E]=(0,a.useState)(v),[I,U]=(0,a.useState)(y),[R,T]=(0,a.useState)((0,o.ye)("aiGeneratedImagesCount")),{prompt:O,addPrompt:M,promptPageInfo:D,nextPrompt:N,prevPrompt:H}=(0,s.jg)(),[L,z]=(0,a.useState)(""),[G,F]=(0,a.useState)(null!==(C=null!==(j=w(null==r?void 0:null===(u=r.aiParams)||void 0===u?void 0:u.height,null==r?void 0:null===(h=r.aiParams)||void 0===h?void 0:h.width))&&void 0!==j?j:w(null==k?void 0:k.height,null==k?void 0:k.width))&&void 0!==C?C:"square"),{stylePresetOptions:B,stylePrompt:W,setStylePrompt:q,stylePreset:V,setStylePreset:K,defaultPreset:Q,defaultPrompt:X,getTargetPresetData:Z,findThemeNameFromStylePrompt:Y}=p(e,k,r),J=(0,l.mw)(_),$=(null==J?void 0:J.aspectRatios[G])||l.vr,ee=(0,a.useMemo)(()=>({prompt:O,model:_,stylePreset:V,stylePrompt:W,height:$.height,width:$.width,steps:P?n()(P,1,m):void 0,count:n()(R,1,f),negative_prompt:L,cfg_scale:I?n()(I,1,x):void 0}),[O,_,V,W,$.height,$.width,P,R,L,I]),et=(0,s.oj)();(0,a.useEffect)(()=>{et(_)||S(A)},[_,A,S,et]);let er=(0,a.useCallback)((e,t)=>{if(!e)return;let{prompt:r,height:i,width:n,stylePreset:a,stylePrompt:o,negative_prompt:l,model:s}=e;i&&n&&F(w(i,n)),r&&M(r,t),o&&q(o),a&&K(a),l&&z(l),s&&et(s)&&S(s)},[M,K,q,et]),ei=(0,a.useCallback)(e=>{var t,r,i;let{aiParams:n}=e,{height:a,width:o,model:s,stylePrompt:c,stylePreset:d,prompt:u,negative_prompt:h,steps:g,cfg_scale:p}=null!=n?n:{};F(null!==(r=null!==(t=w(a,o))&&void 0!==t?t:w(null==k?void 0:k.height,null==k?void 0:k.width))&&void 0!==r?r:l.vr.key),S(null!==(i=null!=s?s:null==k?void 0:k.model)&&void 0!==i?i:A),q(null!=c?c:X),K(null!=d?d:Q),M(null!=u?u:"","load"),z(null!=h?h:""),E(null!=g?g:v),U(null!=p?p:y)},[M,A,Q,X,null==k?void 0:k.height,null==k?void 0:k.model,null==k?void 0:k.width,K,q]),en=(0,a.useMemo)(()=>e=>{if(!e||!e.aiParams)return!1;let t=w(e.aiParams.height,e.aiParams.width);return O!==e.aiParams.prompt||_!==e.aiParams.model||G!==t||V!==e.aiParams.stylePreset},[G,_,O,V]);return{model:_,setModel:S,prompt:O,addPrompt:M,promptPageInfo:D,nextPrompt:N,prevPrompt:H,stylePrompt:W,setStylePrompt:q,stylePreset:V,setStylePreset:K,stylePresetOptions:B,getTargetPresetData:Z,findThemeNameFromStylePrompt:Y,aspectRatio:G,setAspectRatio:F,imageGenerateConfig:ee,count:R,setCount:T,loadImageAiParams:er,resetImageAiParams:ei,isPromptDirty:en,negativePrompt:L,setNegativePrompt:z,steps:P,setSteps:E,cfgScale:I,setCfgScale:U}},w=(e,t)=>e&&t?e>t?"portrait":e<t?"landscape":"square":"square"},25870:function(e,t,r){"use strict";r.d(t,{A:function(){return b},E:function(){return v}});var i=r(52322),n=r(10625),a=r(67046),o=r(62614),l=r(332),s=r(99058),c=r(44035),d=r(39237),u=r(77533),h=r(54933),g=r(49929),p=r(87254);let m={label:()=>p.ag._({id:"DAmK+T"}),key:"All",description:()=>p.ag._({id:"Zz/1wq"})},f=[m,{label:()=>p.ag._({id:"10G8Kb"}),key:"Share",description:()=>p.ag._({id:"EVNJ2h"})},{label:()=>p.ag._({id:"SjDzTh"}),key:"ShareCommercially",description:()=>p.ag._({id:"DHhpJP"})}],x=m.key,v=e=>{var t;return null===(t=f.find(t=>t.key===e))||void 0===t?void 0:t.label()},b=e=>{let{value:t=x,onChange:r}=e;return(0,i.jsxs)(n.v,{children:[(0,i.jsx)(a.j,{w:"100%",as:o.z,boxShadow:"sm",size:"sm",variant:"plain",rightIcon:(0,i.jsx)(g.G,{icon:h.ptq}),textAlign:"left",children:v(t)}),(0,i.jsx)(l.h,{children:(0,i.jsx)(s.q,{zIndex:"tooltip",w:"350px",children:(0,i.jsx)(c._,{type:"radio",w:"100%",defaultValue:m.key,value:t,onChange:e=>r(e),children:f.map(e=>{let{key:t,label:r,description:n}=e;return(0,i.jsxs)(d.i,{value:t,children:[r(),(0,i.jsx)(u.x,{fontSize:"sm",color:"gray.400",children:n()})]},t)})})})})]})}},89858:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var i=r(52322),n=r(32899),a=r(17993),o=r(74105),l=r(20816),s=r(28535),c=r(85573),d=r(35183),u=r(97166),h=r(42946),g=r(49929),p=r(64253),m=r(5879),f=r(87254),x=r(38045),v=r(4742),b=r.n(v),y=r(2784),j=r(9237),w=r(40382),C=r(25870),A=r(95405),k=r(99604),_=r(38055),S=r(97912);let P=e=>(0,y.useCallback)(t=>{fetch("".concat(A.v.API_HOST||"","/media/images/track"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,id:t.id})})},[e]),E=e=>{let{provider:t,enablePagination:r,resultsPerPage:i}=e,[n,a]=(0,y.useState)(""),[o,l]=(0,y.useState)([]),[s,c]=(0,y.useState)(!1),[d,u]=(0,y.useState)(!1),[h,g]=(0,y.useState)(1),[p,m]=(0,y.useState)("All"),f=(0,y.useRef)(p),x=r&&o.length>0&&h<6,v=(0,y.useCallback)(async(e,r)=>{c(!0),u(!1);try{let n={license:f.current,page:r,gammaFeature:"mediaDrawer"};"bing"===t&&(n.minWidth=_.x.minWidth,n.maxWidth=_.x.maxWidth);let a=await (0,k.C)({query:e,count:i,provider:t,options:n});if(c(!1),!((null==a?void 0:a.length)>=0))throw Error("No images found");let o=a.filter(e=>(0,S.VE)(e.imageUrl));l(e=>e.concat(o))}catch(e){u(!0),c(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t,i]),b=(0,y.useCallback)(e=>{l([]),g(1),a(e),v(e,1)},[v]),j=(0,y.useCallback)(()=>{v(n,h+1),g(h+1)},[v,n,h]),w=(0,y.useCallback)(()=>{a(""),l([]),g(1)},[]),C=(0,y.useCallback)(e=>{m(e),f.current=e,w(),b(n)},[w,b,n]);return{search:b,isLoading:s,loadMore:j,canLoadMore:x,hasError:d,imageResults:o,resetResults:w,searchQuery:n,license:p,updateLicense:C}};var I=r(38035),U=r(62614),R=r(77533),T=r(47443),O=r(52929),M=r(20437),D=r(30523),N=r(67109),H=r(2689),L=r.n(H),z=r(75641),G=r(45989),F=r(75009),B=r(78071),W=r(42822),q=r(11082);let V=(0,y.memo)(e=>{let{image:t,isSelected:r,onImageClick:n,resizeThumbnail:a}=e,o=a?(0,S.SN)(t.thumbnailUrl,S.Iv):t.thumbnailUrl;return(0,i.jsxs)(U.z,{borderRadius:"base",overflow:"hidden",display:"block",variant:"ghost",width:"100%",opacity:1,textAlign:"left",pos:"relative",p:0,minH:"auto",h:"auto",_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",children:[(0,i.jsx)(F.E,{w:"100%",src:o,fallback:(0,i.jsx)(N.O,{height:"120px",borderRadius:"base"})}),(0,i.jsx)(B.p,{in:r,children:(0,i.jsx)(s.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(W.M,{h:"100%",w:"100%",children:(0,i.jsx)(g.G,{icon:h.LEp})})})}),!t.thumbnailUrl&&(0,i.jsx)(D.P,{width:"100%",children:(0,i.jsx)(N.O,{height:"80px",borderRadius:"base"})}),(0,i.jsxs)(s.xu,{left:0,right:0,bottom:0,p:2,pos:"absolute",color:"white",fontSize:"xs",textOverflow:"ellipsis",overflow:"hidden",bg:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)",borderBottomRadius:"base",className:"attribution-container",opacity:0,transitionProperty:"common",transitionDuration:"normal",children:[t.attributionUrl&&t.credit&&(0,i.jsx)(p.kH,{label:t.credit,placement:"left",children:(0,i.jsx)(q.r,{mr:1,target:"_blank",rel:"noopener noreferrer",href:t.attributionUrl,tabIndex:-1,children:(0,i.jsx)(g.G,{transform:"shrink-4",icon:h.Xjp})})}),t.credit]})]})});V.displayName="ImageSearchGridItem";let K=e=>{let{searchQuery:t,currentImageUrl:r,updateAttributes:n,provider:a,imageResults:o,isLoading:l,canLoadMore:c,loadMore:d,hasError:u,resultsPerPage:h,resizeThumbnails:g}=e,p=P(a),f=(0,y.useCallback)(e=>{p(e),n((0,G.C)(e,t,a))},[a,t,p,n]),x=o.map(e=>{let t=e.imageUrl.split("?")[0],n=r&&r.split("?")[0];return(0,i.jsx)(V,{provider:a,image:e,isSelected:t===n,onImageClick:f,resizeThumbnail:g},e.id)});return(0,i.jsxs)(I.k,{direction:"column",align:"stretch",children:[l&&0===o.length&&(0,i.jsx)(Q,{resultsPerPage:h}),o.length>0&&(0,i.jsx)(z.Z,{columnsCount:3,gutter:"0.5rem",children:x}),c&&(0,i.jsx)(U.z,{variant:"plain",onClick:d,mt:4,isLoading:l,children:(0,i.jsx)(m.cC,{id:"yQ2kGp"})}),0===o.length&&!l&&(0,i.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,i.jsx)(R.x,{style:{color:"gray"},children:(0,i.jsx)(m.cC,{id:"SihI8q",values:{searchQuery:t}})})}),u&&(0,i.jsxs)(T.b,{status:"error",children:[(0,i.jsx)(O.z,{}),(0,i.jsx)(m.cC,{id:"Fkbzp8"})]})]})},Q=e=>{let{resultsPerPage:t}=e;return(0,i.jsx)(M.M,{columns:3,spacing:2,children:L()(t).map((e,t)=>(0,i.jsx)(D.P,{children:(0,i.jsx)(N.O,{height:"120px",borderRadius:"base"})},t))})},X=(0,x.E)(n.h),Z=e=>{let{currentImageUrl:t,updateAttributes:r,defaultQuery:n,randomQueries:x,provider:v,enablePagination:A=!0,enableSearch:k=!0,enableLicenseFilter:_=!1,resultsPerPage:S=18,resizeThumbnails:P=!1}=e,[I,U]=(0,y.useState)(""),{search:R,isLoading:T,loadMore:O,canLoadMore:M,hasError:D,imageResults:N,resetResults:H,searchQuery:L,license:z,updateLicense:G}=E({provider:v,enablePagination:A,resultsPerPage:S});(0,w.vm)(()=>{if(n){U(n),R(n);return}U(""),x?R(b()(x)||""):H()},[n,x,H,R],[v]);let F=(0,y.useCallback)(()=>{let e=b()(x);e&&R(e)},[x,R]),B=(0,w.Kt)(R,1e3);return(0,i.jsxs)(a.g,{spacing:4,align:"stretch",translate:"no",children:[(0,i.jsx)(p.kH,{placement:"top",label:(0,i.jsx)(m.cC,{id:"wj1Zq8"}),isDisabled:k,children:(0,i.jsxs)(o.B,{size:"md",children:[(0,i.jsx)(l.Z,{pointerEvents:"none",children:(0,i.jsx)(s.xu,{color:"gray.400",children:(0,i.jsx)(g.G,{icon:h.wn1})})}),(0,i.jsx)(c.I,{isDisabled:!k,placeholder:f.ag._({id:"6YBjmV"}),value:I,onChange:e=>{U(e.target.value),B(e.target.value)},"data-testid":"image-search-input"}),x&&(0,i.jsx)(l.x,{children:(0,i.jsx)(p.kH,{placement:"top",label:(0,i.jsx)(m.cC,{id:"OVjfHO"}),children:(0,i.jsx)(X,{icon:(0,i.jsx)(g.G,{icon:h.RJo}),"aria-label":"Surprise me",variant:"ghost",onClick:F,size:"sm",whileTap:{y:"-5px"},onMouseDown:j.br})})})]})}),_&&(0,i.jsxs)(d.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(m.cC,{id:"6TSHCF"})}),(0,i.jsx)(C.A,{value:z,onChange:G})]}),L&&(0,i.jsx)(K,{updateAttributes:r,currentImageUrl:t,searchQuery:L,provider:v,imageResults:N,isLoading:T,canLoadMore:M,loadMore:O,hasError:D,resultsPerPage:S,resizeThumbnails:P})]})}},1960:function(e,t,r){"use strict";r.d(t,{v:function(){return _},ft:function(){return k},QW:function(){return w}});var i=r(52322),n=r(17993),a=r(74409),o=r(29117),l=r(85573),s=r(62614),c=r(47443),d=r(52929),u=r(5879),h=r(87254),g=r(2784),p=r(71383),m=r(78112),f=r(97912),x=r(70617);let v={thumbnail:void 0,embed:void 0,meta:void 0,sourceUrl:void 0},b=async e=>{var t,r,i,n,a,o;let l=await fetch("https://cdn.iframe.ly/api/iframely/?url=".concat(encodeURIComponent(e),"&key=").concat("a68bac8b6624d46b6d0ba46e5b3f8971","&iframe=1&omit_script=1")),s=await l.json();if(console.debug("[Iframely]",s),s.error)return Promise.reject(s);let{html:c,links:d,meta:u}=s,{icon:h,player:g,reader:p,app:m,thumbnail:f}=d,x=g||p||m,v=x?x.filter(e=>"text/html"===e.type&&e.href)[0]||x[0]:null,b=u&&!u.xframe&&(!u.csp||!u.csp.includes("frame-ancestors"));return{sourceUrl:(null==u?void 0:u.canonical)||e,embed:v?{url:v.href,html:c,height:null===(t=v.media)||void 0===t?void 0:t.height,width:(null===(r=v.media)||void 0===r?void 0:r.width)||(null===(i=v.media)||void 0===i?void 0:i["max-width"]),aspectRatio:null===(n=v.media)||void 0===n?void 0:n["aspect-ratio"]}:b?{url:e}:void 0,meta:{...u||{},icon:h&&h[0]?h[0].href:void 0},thumbnail:f&&f[0]?{src:f[0].href,height:null===(a=f[0].media)||void 0===a?void 0:a.height,width:null===(o=f[0].media)||void 0===o?void 0:o.width}:void 0}};var y=r(25968),j=r(89712);let w=e=>{try{var t,r;let i=new DOMParser().parseFromString(e,"text/html");return(null===(t=i.querySelector("iframe"))||void 0===t?void 0:t.src)||(null===(r=i.querySelector("blockquote"))||void 0===r?void 0:r.cite)||!1}catch(e){return!1}},C=e=>e.match(/^https?:\/\/www\.tiktok\.com/),A=async e=>{var t,r,i,n,a;let o,l;try{if(C(e)){let t=e.split("?")[0];o=await b(t)}else o=await b(e)}catch(t){if(403===t.status||404===t.status||415===t.status){for(let{key:t,urlRegex:r,canEmbedPrivate:i,label:n,defaultDisplayStyle:a}of j.yC)if(r&&e.match(r)&&i)return{...v,source:t,proxy:!1,url:e,meta:{title:h.ag._({id:"SuoEIZ"})},sourceUrl:e,displayStyle:a||"inline"}}throw Error("Code: ".concat(t.status,". Message: ").concat(t.error))}if(!o)throw Error("No link metadata found");for(let{key:e,urlRegex:t}of j.yC)if(t&&(null===(n=o.sourceUrl)||void 0===n?void 0:n.match(t))){l=e;break}if(l){let e=j.zX[l];return{...v,...o,source:l,proxy:!1,url:(null===(a=o.embed)||void 0===a?void 0:a.url)||o.sourceUrl,displayStyle:e.defaultDisplayStyle}}return(null===(t=o.meta)||void 0===t?void 0:t.medium)=="audio"||(null===(r=o.meta)||void 0===r?void 0:r.medium)==="video"?{...v,...o,source:j.wj.key}:(null===(i=o.embed)||void 0===i?void 0:i.url)?{...v,...o,source:j.Hw.key,proxy:!1,url:o.embed.url}:{...v,...o,source:j.Hw.key,proxy:!0,url:e}},k=async(e,t)=>await A(e).then(e=>(t(e),e)).then(e=>S(e,t)),_=e=>{let{currentUrl:t="",updateAttributes:r,handleSubmit:p,handleDataSubmit:m,placeholder:v,noHeader:b}=e,[y,j]=(0,g.useState)(t||""),[C,A]=(0,g.useState)(),_=y!==t;(0,g.useEffect)(()=>{t&&j(t)},[t]),(0,g.useEffect)(()=>{A(void 0)},[y]);let S=(0,g.useCallback)(e=>{if(0===e.indexOf("data:")){if(m){try{(0,f.v9)(e)}catch(e){A(h.ag._({id:"YqH0TR"}));return}return m(e)}return void A(h.ag._({id:"YqH0TR"}))}let t=w(e);if(t&&(e=t),!(0,x.kr)(e)&&(e="https://"+e,!(0,x.jv)(e))){A(h.ag._({id:"YqH0TR"}));return}return p?p(e):r?k(e,r).catch(e=>{console.error("Error fetching URL",e),A(h.ag._({id:"dZyJFB"}))}):void console.error("No submit handler provided")},[m,p,r]),P=(0,g.useCallback)(()=>{S(y.trim())},[S,y]),E=(0,g.useCallback)(e=>{t||S(e.clipboardData.getData("text/plain").trim())},[t,S]);return(0,i.jsxs)(n.g,{align:"flex-start",spacing:4,w:"100%",children:[!b&&(0,i.jsx)(a.X,{size:"md",children:(0,i.jsx)(u.cC,{id:"D89ve+"})}),(0,i.jsxs)(o.U,{align:"flex-start",spacing:2,w:"100%",children:[(0,i.jsx)(l.I,{placeholder:v,onKeyDown:e=>{"Enter"===e.key&&P()},onPaste:E,value:y,onChange:e=>j(e.target.value),flex:1,"data-testid":"url-input"}),(0,i.jsx)(s.z,{onClick:P,isDisabled:!_,children:(0,i.jsx)(u.cC,{id:"4pSxwB"})})]}),C&&(0,i.jsxs)(c.b,{status:"error",children:[(0,i.jsx)(d.z,{}),C]})]})},S=async(e,t)=>{let r=(0,p.bh)().getState(),i=(0,m.KV)(r);if(!i){console.error("[uploadIframelyThumbnail] No orgId specified, bailing");return}let n={...e.thumbnail},a=n.src;if(a&&void 0!==n)try{await (0,y.WY)(a,i,{onUploadComplete:e=>(n&&(n.src=e.src,n.width=e.meta.width,n.height=e.meta.height,t({thumbnail:n})),Promise.resolve()),onOriginalFileUpload:e=>(n&&(n.src=e.src,n.width=e.meta.width,n.height=e.meta.height,t({thumbnail:n})),Promise.resolve()),onUploadFailed:e=>(console.error("[iframely] Thumbnail upload error: ",e),Promise.reject())},"iframelyThumbnail")}catch(e){console.error("[iframely] Thumbnail upload error: ",e)}}},34928:function(e,t,r){"use strict";r.d(t,{u:function(){return s}});var i=r(52322),n=r(87254),a=r(2784),o=r(85329),l=r(25968);let s=e=>{let{orgId:t,uploadType:r,editType:s,onUploadStart:c,onUploadSuccess:d,onUploadFailed:u,dropHereText:h=n.ag._({id:"mgPDos",values:{0:"%{browse}"}}),customHeight:g,customFontSize:p,maxFilesAllowed:m=1,templateId:f,sx:x,tipText:v}=e,[b,y]=(0,a.useState)(""),j=(0,a.useMemo)(()=>l.ND.createUppyInstance(t,{onUploadStart:c,onOriginalFileUpload:d,onUploadComplete:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];d(...t),j.cancelAll()},onUploadFailed:u,setErrorMessage:y},s,m,r,f),[t,s,r,m,f,d,c,u]);return(0,i.jsx)(o.J,{uppyInstance:j,dropHereText:h,tipText:v,customHeight:g,errorMessage:b,fontSize:p,sx:x})}},72842:function(e,t,r){"use strict";r.d(t,{$5:function(){return a.$5},BF:function(){return a.BF},BM:function(){return a.BM},BR:function(){return a.BR},Bo:function(){return a.Bo},DN:function(){return a.DN},DU:function(){return a.DU},Ds:function(){return a.Ds},F6:function(){return a.F6},FH:function(){return a.FH},Ge:function(){return i.Ge},Hw:function(){return a.Hw},LE:function(){return a.LE},N$:function(){return i.N$},ND:function(){return i.ND},NX:function(){return a.NX},Q0:function(){return a.Q0},QR:function(){return a.QR},QT:function(){return a.QT},RE:function(){return a.RE},TQ:function(){return a.TQ},VI:function(){return a.VI},Vy:function(){return a.Vy},WY:function(){return i.WY},bD:function(){return a.bD},bO:function(){return a.bO},cT:function(){return i.cT},eK:function(){return a.eK},f0:function(){return a.f0},hq:function(){return a.hq},iL:function(){return a.iL},in:function(){return a.in},jS:function(){return a.jS},jt:function(){return a.jt},oC:function(){return a.oC},p7:function(){return a.p7},pK:function(){return i.pK},qz:function(){return a.qz},ud:function(){return a.ud},un:function(){return n.u},w4:function(){return a.w4},wj:function(){return a.wj},zX:function(){return a.zX},zs:function(){return a.zs}});var i=r(25968);r(89858);var n=r(34928),a=r(89712)},40857:function(e,t,r){"use strict";r.d(t,{N:function(){return l},r:function(){return o}});var i=r(54933),n=r(87254),a=r(69996);let o="image.ai-generated",l={key:o,Panel:a.Q,checkDisabled:()=>!1,label:()=>n.ag._({id:"O+LXs1"}),icon:i.ddb,description:()=>n.ag._({id:"yXA4hx"}),keywords:["ai","image","illustration","graphics","generate"],resizeToFit:!0}},38055:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});let i={minWidth:1800,maxWidth:5e3,count:10}},29689:function(e,t,r){"use strict";r.d(t,{E:function(){return w}});var i=r(52322),n=r(70065),a=r(17993),o=r(74409),l=r(77533),s=r(75009),c=r(62614),d=r(85573),u=r(29494),h=r(29117),g=r(5879),p=r(87254),m=r(34928),f=r(9355),x=r(71383),v=r(9160),b=r(78112),y=r(97912),j=r(1960);let w=e=>{let{updateAttributes:t,currentAttributes:r}=e,{sourceUrl:w,meta:C,thumbnail:A}=r,k=(0,x.CG)(b.KV),_=(0,n.p)(),S=async()=>{w&&await (0,j.ft)(w,t).catch(e=>{console.error("[EMBED METADATA] Error restoring preview defaults",e),_({title:p.ag._({id:"cgB+pO",values:{0:e.error}}),status:"error",isClosable:!0,position:"top"})})};return(0,i.jsxs)(a.g,{pt:4,align:"stretch",spacing:4,children:[(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(o.X,{size:"md",children:(0,i.jsx)(g.cC,{id:"qbzc6p"})}),(0,i.jsx)(l.x,{fontSize:"sm",color:"gray.600",children:(0,i.jsx)(g.cC,{id:"D9R1mI"})})]}),(0,i.jsxs)(a.g,{align:"stretch",p:4,borderRadius:"lg",border:"1px solid var(--chakra-colors-blue-500)",bg:"gray.100",spacing:4,children:[(null==A?void 0:A.showPlaceholder)?(0,i.jsx)(v.k3,{hasUploadError:(null==A?void 0:A.uploadStatus)===f.D.Error,isUploading:(null==A?void 0:A.uploadStatus)===f.D.Uploading}):A?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.E,{src:A.src||A.tempUrl||"",alt:(null==C?void 0:C.title)||"",ignoreFallback:!0,borderRadius:"md"}),(0,i.jsx)(c.z,{isDisabled:A.uploadStatus===f.D.Uploading,onClick:()=>{t({thumbnail:void 0})},children:(0,i.jsx)(g.cC,{id:"YFcW0s"})})]}):k&&(0,i.jsx)(m.u,{onUploadStart:e=>{let{file:r,tempUrl:i}=e;r.type&&(0,y.Ns)(r.type)?t({thumbnail:{uploadStatus:f.D.Uploading,showPlaceholder:!0,tempUrl:null}}):t({thumbnail:{tempUrl:i,uploadStatus:f.D.Uploading,showPlaceholder:!1}})},onUploadSuccess:e=>{let{src:r}=e;t({thumbnail:{src:r}})},onUploadFailed:e=>{console.error("[EMBED METADATA] Error uploading thumbnail image",e),t({thumbnail:{uploadStatus:f.D.Error,showPlaceholder:!0,tempUrl:null}})},orgId:k||"",uploadType:"image",editType:"icon",dropHereText:p.ag._({id:"yxTfZB",values:{0:"%{browse}"}}),customHeight:"200px",customFontSize:"sm"}),(0,i.jsxs)(a.g,{mt:2,align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(g.cC,{id:"MHrjPM"})}),(0,i.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.title)||"",placeholder:p.ag._({id:"bTzMt5"}),onChange:e=>{t({meta:{...C,title:e.target.value}})},"data-testid":"title-input"})]}),(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(g.cC,{id:"Nu4oKW"})}),(0,i.jsx)(u.g,{bg:"white",rows:4,value:(null==C?void 0:C.description)||"",placeholder:p.ag._({id:"2VBqT4"}),onChange:e=>{t({meta:{...C,description:e.target.value}})}})]}),(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(g.cC,{id:"On0aF2"})}),(0,i.jsxs)(h.U,{children:[(null==C?void 0:C.icon)&&(0,i.jsx)(s.E,{src:C.icon,h:"1.5em",borderRadius:"sm"}),(0,i.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.site)||"",placeholder:p.ag._({id:"SmWcKR"}),onChange:e=>{t({meta:{...r.meta,site:e.target.value}})}})]})]})]}),(0,i.jsx)(c.z,{onClick:S,children:(0,i.jsx)(g.cC,{id:"Z00hdC"})})]})}},62710:function(e,t,r){"use strict";r.d(t,{j:function(){return G}});var i=r(52322),n=r(82655),a=r(87254),o=r(30523),l=r(62614),s=r(28535),c=r(38035),d=r(20437),u=r(77533),h=r(47443),g=r(52929),p=r(82729),m=r(67109),f=r(32899),x=r(17993),v=r(74105),b=r(20816),y=r(85573),j=r(42946),w=r(49929),C=r(64253),A=r(5879),k=r(38045),_=r(2689),S=r.n(_),P=r(4742),E=r.n(P),I=r(2784),U=r(9237),R=r(40382),T=r(97912);let O="60px",M=(0,I.memo)(e=>{let{icon:t,isSelected:r,onIconClick:n}=e;return(0,i.jsx)(o.P,{height:O,width:O,children:(0,i.jsx)(l.z,{borderRadius:"base",bgColor:r?"trueblue.100":void 0,color:"gray.900",display:"block",width:"100%",height:"100%",maxH:"100%",pos:"relative",_hover:{bgColor:r?"trueblue.100":"trueblue.50"},_active:{bgColor:"trueblue.100"},transition:"box-shadow .2s ease",variant:"ghost",cursor:"pointer",onClick:()=>n(t),"data-testid":"icon-search-grid-item",children:(0,i.jsx)(s.xu,{height:"100%",maxH:"100%",sx:{svg:{width:"100%",height:"100%"}},dangerouslySetInnerHTML:{__html:t.html}})})},t.id)});M.displayName="ImageSearchGridItem";let D=e=>{let{searchQuery:t,currentAttributes:r,updateAttributes:n}=e,[a,o]=(0,I.useState)([]),[l,p]=(0,I.useState)(!0),[m,f]=(0,I.useState)(!1),[x,v]=(0,I.useState)(1),b=(0,I.useCallback)(async e=>{let r="/api/icons/search?count=".concat(100,"&query=").concat(t,"&page=").concat(e);p(!0),f(!1);try{var i;let e=await fetch(r,{credentials:"include"}),t=await e.json();if(p(!1),!((null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.length)>=0))throw Error(t);o(t.data)}catch(e){f(!0),p(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t]);(0,I.useEffect)(()=>{o([]),v(1),b(1)},[t,b]),(0,I.useCallback)(()=>{b(x+1),v(x+1)},[b,x]);let y=null==r?void 0:r.src,j=(0,I.useCallback)(async e=>{await (0,T.GN)(e.src),n({src:e.src,tempUrl:y,meta:{height:e.height,width:e.width},providerMeta:{name:e.provider,id:e.id},query:t})},[t,n,y]),w=a.map((e,t)=>{var n,a;let o=e.id===(null==r?void 0:null===(n=r.providerMeta)||void 0===n?void 0:n.id)&&e.provider===(null==r?void 0:null===(a=r.providerMeta)||void 0===a?void 0:a.name);return(0,i.jsx)(M,{provider:e.provider,icon:e,isSelected:o,onIconClick:j},t)});return(0,i.jsxs)(c.k,{direction:"column",align:"stretch",children:[(0,i.jsxs)(d.M,{gap:2,columns:{base:4,"2xl":6},children:[w,l&&(0,i.jsx)(N,{})]}),!1,0===a.length&&!l&&(0,i.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,i.jsx)(u.x,{style:{color:"gray"},children:(0,i.jsx)(A.cC,{id:"2AY48J",values:{searchQuery:t}})})}),m&&(0,i.jsxs)(h.b,{status:"error",children:[(0,i.jsx)(g.z,{}),(0,i.jsx)(A.cC,{id:"5hlcZg"})]})]})},N=()=>(0,i.jsx)(i.Fragment,{children:S()(100).map((e,t)=>(0,i.jsx)(o.P,{height:O,children:(0,i.jsx)(p.o,{ratio:1,children:(0,i.jsx)(m.O,{borderRadius:"base"})})},t))}),H=(0,k.E)(f.h),L=e=>{let{currentAttributes:t,updateAttributes:r,defaultQuery:n="",randomQueries:o}=e,[l,c]=(0,I.useState)(n),[d,u]=(0,I.useState)("");(0,I.useEffect)(()=>{u(n),c(n)},[n]);let h=(0,I.useCallback)(()=>{let e=E()(o);for(;e===l;)e=E()(o);e&&(c(e),u(""))},[o,l]),g=(0,R.Kt)(c,500);return(0,i.jsxs)(x.g,{spacing:4,align:"stretch",translate:"no",children:[(0,i.jsxs)(v.B,{size:"md",children:[(0,i.jsx)(b.Z,{pointerEvents:"none",children:(0,i.jsx)(s.xu,{color:"gray.400",children:(0,i.jsx)(w.G,{icon:j.wn1})})}),(0,i.jsx)(y.I,{placeholder:l||a.ag._({id:"oMAM3/"}),value:d,onChange:e=>{u(e.target.value),g(e.target.value)},"data-testid":"image-search-input"}),o&&(0,i.jsx)(b.x,{children:(0,i.jsx)(C.kH,{placement:"top",label:(0,i.jsx)(A.cC,{id:"OVjfHO"}),children:(0,i.jsx)(H,{icon:(0,i.jsx)(w.G,{icon:j.RJo}),"aria-label":a.ag._({id:"OVjfHO"}),variant:"ghost",onClick:h,size:"sm",whileTap:{y:"-5px"},onMouseDown:U.br})})})]}),(0,i.jsx)(D,{currentAttributes:t,updateAttributes:r,searchQuery:l||""})]})},z=["animals","arrows","business","party","nature","food"],G={key:"image.icon",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(L,{updateAttributes:t,currentAttributes:r,currentIconUrl:r.src,defaultQuery:r.query||"",randomQueries:z})},label:()=>a.ag._({id:"mcmuCe"}),icon:n.ocQ,keywords:["icon","symbol","picture"]}},71121:function(e,t,r){"use strict";r.d(t,{Q:function(){return a},s:function(){return o}});var i=r(40857),n=r(80940);let a={bing:"image.bing",giphy:"image.giphy",google:"image.google",web:"image.web",unsplash:"image.unsplash",lexica:"image.lexica",aiGenerated:"image.ai-generated",fontawesome:"image.icon",pictographic:"image.pictographic"},o={web:n.Q,aiGenerated:i.N}},80940:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var i=r(52322),n=r(82655),a=r(87254),o=r(89858);let l=["modern office workspace","sustainable energy landscape","vintage automobile collection","future technology concept","tropical beach paradise","urban street art","classical music instruments","mountain hiking adventure","wildlife safari","space exploration visuals","ancient ruins aerial view","deep sea marine life","high fashion runway event","robotics in manufacturing","gourmet food presentation","winter sports scene","abstract art paintings","traditional village festival","modern architecture landmarks","digital art fantasy worlds"],s={key:"image.web",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(o.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enablePagination:!0,enableLicenseFilter:!0,provider:"web",resultsPerPage:48,randomQueries:l,resizeThumbnails:!0})},featureFlag:"webImageSearch",label:()=>a.ag._({id:"fw+TMi"}),icon:n.Y$T,keywords:["image","photo","pic"],description:()=>a.ag._({id:"NMbF1d"}),resizeToFit:!0}},89712:function(e,t,r){"use strict";r.d(t,{NX:function(){return i.N},LE:function(){return b},BF:function(){return y},jt:function(){return A},QR:function(){return k},in:function(){return W},wj:function(){return q},DN:function(){return V},VI:function(){return Z},$5:function(){return ei},bO:function(){return eo},F6:function(){return el},bD:function(){return es},eK:function(){return ed},jS:function(){return eu.j},f0:function(){return eh},FH:function(){return eg},ud:function(){return em},Vy:function(){return ex},yC:function(){return eX},zX:function(){return eZ},DU:function(){return ev},Bo:function(){return eb},BR:function(){return ey},RE:function(){return ew},TQ:function(){return eA},Q0:function(){return eT},p7:function(){return eO},w4:function(){return eM},zs:function(){return eN},iL:function(){return eH},Ds:function(){return eL},hq:function(){return eF},oC:function(){return eB},QT:function(){return eW.Q},Hw:function(){return eV},BM:function(){return eK},qz:function(){return eQ}});var i=r(40857),n=r(52322),a=r(82655),o=r(5879),l=r(87254),s=r(17993),c=r(46007),d=r(29689),u=r(1960);let h=e=>{let{editor:t,updateAttributes:r,currentAttributes:i,urlPlaceholder:a,embedTip:o}=e,l=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:l,updateAttributes:r,placeholder:a||"https://..."}),o,l&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})};var g=r(29705),p=r(47443),m=r(52929),f=r(74444),x=r(11082);let v=e=>{let{guideLink:t,extraMessage:r,providerName:i}=e;return(0,n.jsxs)(p.b,{status:"info",children:[(0,n.jsx)(m.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"qBttXb",values:{providerName:i,extraMessage:r},components:{0:(0,n.jsx)(x.r,{href:t,textDecoration:"underline",isExternal:!0}),1:(0,n.jsx)(g.h,{mx:"2px"})}})})]})},b={label:()=>"Airtable",key:"embed.airtable",description:()=>l.ag._({id:"KlL5LU"}),icon:a.u7T,image:{src:"/_next/static/media/airtable.e403549a.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/airtable.com/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://airtable.com/...",embedTip:(0,n.jsx)(v,{guideLink:"https://support.airtable.com/hc/en-us/articles/217846478-Embedding-a-view-or-base",providerName:"Airtable",extraMessage:(0,n.jsx)(o.cC,{id:"gsZDsS"})})}),categories:["app","form"],defaultDisplayStyle:"inline",inlineInteractive:!0,iframeOptions:{allowPopups:!0},keywords:["airtable","database","spreadsheet","table"]},y={label:()=>"Amplitude",key:"embed.amplitude",keywords:["amplitude","analytics"],description:()=>l.ag._({id:"wa1wV8"}),icon:a.Ma4,image:{src:"/_next/static/media/amplitude.5828f141.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/analytics.amplitude.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,n.jsx)(v,{guideLink:"https://help.amplitude.com/hc/en-us/articles/235717108-Share-charts-dashboards-and-notebooks-with-stakeholders-outside-your-company#generate-embed-code-for-your-content",extraMessage:(0,n.jsx)(o.cC,{id:"NDM+Av"}),providerName:"Amplitude"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})}};var j=r(97143),w=r(38055),C=r(89858);let A={key:"image.bing",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enableSearch:!0,enablePagination:!1,provider:"bing",resultsPerPage:w.x.count})},label:()=>l.ag._({id:"2V6hMo"}),icon:j.hVS,image:{src:"/_next/static/media/bing.0f94cfbe.svg",height:1024,width:678,blurWidth:0,blurHeight:0},keywords:["image","photo","bing","pic"]},k={label:()=>"Calendly",key:"embed.calendly",description:()=>l.ag._({id:"grPhlY"}),icon:a.fT7,image:{src:"/_next/static/media/calendly.d1a57857.svg",height:150,width:150,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/calendly.com/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://calendly.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["calendly","meeting","schedule","appointment"]};var _=r(81540),S=r(75009),P=r(77533),E=r(62614),I=r(74409),U=r(71383),R=r(15222),T=r(9160),O=r(78112),M=r(97134),D=r(97912),N=r(34928),H=r(37164),L=r(2784),z=r(75325),G=r(25968),F=r(9355);let B=e=>{let{updateAttributes:t,editType:r,editor:i,source:n}=e,a=(0,U.CG)(O.KV),{currentWorkspace:o}=(0,M.SE)(),{orgId:l,templateId:s}=(0,R.Ds)(a||(null==o?void 0:o.id),r),c=(0,L.useRef)(null),d=(0,L.useCallback)(e=>{let{tempUrl:r,attributes:i}=e;t({uploadStatus:F.D.Uploading,showPlaceholder:!1,tempUrl:r,src:null,...i}),c.current=r},[t]),u=(0,L.useCallback)((e,a)=>{let o=c.current||a;if(o){if("node"!==r||!i){t({...(0,z.gM)({result:e,isError:!1}),source:n});return}(0,z.Ns)(i,o,e),c.current=null}},[i,r,t,n]),h=(0,L.useCallback)(e=>{if(!c.current||!i){t((0,z.gM)({isError:!0}));return}(0,z.f8)(i,c.current,e)},[i,t]),g=(0,L.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromDataURL - No orgId!");return}d({tempUrl:e});try{let t=(0,D.v9)(e,"image");(0,G.cT)(t,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:h},r,void 0,s)}catch(e){h()}},[r,l,h,d,u,s]),p=(0,L.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromUrl - No orgId!");return}d({tempUrl:e});try{(0,G.WY)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:h},r,s)}catch(e){h()}},[r,l,h,d,u,s]),m=(0,L.useCallback)(async e=>{let{blob:t,attributes:i}=e;if(!l){console.error("[QRCodePanel] saveImageFromDataBlob - No orgId!");return}d({tempUrl:window.URL.createObjectURL(t),attributes:i});try{let e=(0,D.GS)({blob:t,filename:"image",ext:"svg"});return await (0,G.cT)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:h},r)}catch(e){h()}},[r,l,h,d,u]),f=(0,L.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t({uploadStatus:F.D.Uploading,showPlaceholder:!0,tempUrl:e,src:null})},[t]),x=(0,L.useCallback)(e=>{let{file:t,tempUrl:r}=e;if(t.type&&(0,D.Ns)(t.type)){let e="HEIC_tempId_".concat((0,H.x0)());f(e),d({tempUrl:e})}else d({tempUrl:r})},[f,d]);return{setTempUrl:d,setUploadedImage:u,saveImageFromDataURL:g,saveImageFromUrl:p,saveImageFromDataBlob:m,onUploadStart:x,setUploadFailed:(0,L.useCallback)(()=>{t((0,z.gM)({isError:!0}))},[t])}},W={label:()=>l.ag._({id:"bk8Zu0"}),key:"image.custom",description:()=>l.ag._({id:"RPwTMJ"}),icon:a.VmB,Panel:e=>{let{editor:t,editType:r,updateAttributes:i,currentAttributes:a,resetToPlaceholder:c}=e,{onUploadStart:d,setUploadedImage:h,saveImageFromUrl:g,saveImageFromDataURL:x,setUploadFailed:v}=B({updateAttributes:i,editor:t,editType:r,source:W.key}),b=(0,U.CG)(O.KV),{currentWorkspace:y}=(0,M.SE)(),{orgId:j,templateId:w,useStandardThemeBucket:C}=(0,R.Ds)(b||(null==y?void 0:y.id),r),{src:A,tempUrl:k,meta:H,name:L,showPlaceholder:z,uploadStatus:G}=a,q=A?(0,D.aN)(A,{width:500}):void 0;return A||k||z?(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[G===F.D.Uploading&&(0,n.jsxs)(p.b,{status:"info",size:"sm",children:[(0,n.jsx)(m.z,{as:_.$,w:5,h:5}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"MEDU34"})})]}),z?(0,n.jsx)(T.k3,{isUploading:G===F.D.Uploading,hasUploadError:G===F.D.Error,width:"100%"}):(0,n.jsx)(S.E,{src:q||k,alt:"",ignoreFallback:!0,borderRadius:"md"}),H&&H.width&&H.height&&(0,n.jsxs)(P.x,{children:[H.width,"\xd7",H.height,"px"]}),L&&(0,n.jsx)(P.x,{children:L}),(0,n.jsx)(E.z,{onClick:c,mt:2,w:"100%",children:(0,n.jsx)(o.cC,{id:"HUPV+K"})})]}):(0,n.jsxs)(s.g,{align:"stretch",spacing:4,children:[C&&(0,n.jsxs)(p.b,{status:"warning",size:"sm",children:[(0,n.jsx)(m.z,{}),(0,n.jsx)(f.X,{children:"[Admin] Theme images will be uploaded to production theme_images bucket"})]}),G===F.D.Error&&(0,n.jsxs)(p.b,{status:"error",size:"sm",children:[(0,n.jsx)(m.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"GymiXM"})})]}),(0,n.jsx)(I.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"IagCbF"})}),(0,n.jsx)(u.v,{currentUrl:"",placeholder:l.ag._({id:"jurEzE"}),handleSubmit:g,handleDataSubmit:x,noHeader:!0}),(0,n.jsx)(I.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"ONWvwQ"})}),j&&(0,n.jsx)(N.u,{onUploadSuccess:h,onUploadStart:d,onUploadFailed:v,orgId:j,uploadType:"image",editType:r,templateId:w,tipText:l.ag._({id:"x4Ts51"})})]})},keywords:["image","upload"],resizeToFit:!0},q={label:()=>l.ag._({id:"0+gRao"}),description:()=>l.ag._({id:"w31i/H"}),key:"video.custom",icon:a.sl_,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["video","audio","podcast","embed"],iframeOptions:{allowPopups:!0},preferHtml:!0},V={label:()=>"Figma",key:"embed.figma",icon:j.uWT,keywords:["design","prototype","wireframe","figjam","whiteboard"],description:()=>l.ag._({id:"riUMyL"}),image:{src:"/_next/static/media/figma.14e7d0c1.svg",height:2500,width:1667,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.figma.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.figma.com/file/..."}),(0,n.jsx)(v,{guideLink:"https://help.figma.com/hc/en-us/articles/360039827134-Embed-files-and-prototypes",providerName:"Figma/FigJam"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,rewriteEmbedUrl:e=>e.includes("figma.com/embed")?e:"https://www.figma.com/embed?embed_host=share&url=".concat(encodeURIComponent(e))};var K=r(20342),Q=r(70617),X=r(33279);let Z={label:()=>"Gamma embed",key:"embed.gamma",icon:a.m6E,keywords:["embed"],description:()=>l.ag._({id:"wNr9uT"}),image:K.Z,urlRegex:/^https?:\/\/(www\.|staging\.)?gamma.app/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://gamma.app/docs/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,rewriteEmbedUrl:e=>{if((0,X.LQ)(e))return e;let t=(0,X.Wp)(e),r=(0,Q.Gr)(e)||"gamma.app";return"https://".concat(r,"/embed/").concat(t)}};var Y=r(38035),J=r(28535),$=r(42946),ee=r(38421),et=r.n(ee);let er=["funny","surprise","hooray","welcome","excited","nope","fail","sad","cry","angry","teamwork","cats","dogs","high five"],ei={key:"image.giphy",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:er,provider:"giphy"}),(0,n.jsx)(Y.k,{width:"100%",justify:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(J.xu,{maxW:"150px",children:(0,n.jsx)(et(),{src:"/images/powered-by-giphy.png",width:"150",height:"17",alt:"Powered by GIPHY"})})})]})},label:()=>l.ag._({id:"E435oC",values:{GIPHY_PROPER_NOUN:"GIPHY"}}),description:()=>l.ag._({id:"QmULXm"}),icon:$.qt5,image:{src:"/_next/static/media/giphy.2d92c9c6.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},keywords:["gif","animation","animated","giphy"],resizeToFit:!0};var en=r(23691),ea=r(77620);let eo={label:()=>"Google Drive",key:"embed.gdrive",description:()=>l.ag._({id:"1q3pN1",values:{SHEETS_PROPER_NOUN:"Sheets",DOCS_PROPER_NOUN:"Docs",SLIDES_PROPER_NOUN:"Slides",GAMMA_ARTIFACT_PROPER_NOUN:en.Yc}}),icon:j.Uuo,image:ea.Z,urlRegex:/^https?:\/\/docs.google.com\//,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://docs.google.com/...",embedTip:(0,n.jsx)(v,{guideLink:"https://support.google.com/docs/answer/183965?hl=en&co=GENIE.Platform%3DDesktop#zippy=%2Cedit-embedded-spreadsheets%2Cembed-a-document-spreadsheet-or-presentation",extraMessage:(0,n.jsx)(o.cC,{id:"G6PCHK",values:{GAMMA_ARTIFACT_PROPER_NOUN:en.Yc}}),providerName:"Google Sheets, Docs, or Slides"})}),canEmbedPrivate:!0,rewriteEmbedUrl:e=>{if(!e.includes("/presentation/"))return new URL(e.replace("/preview","/edit")).toString();{let t=new URL(e.replace("/edit","/preview"));return t.searchParams.set("rm","minimal"),t.toString()}},keywords:["docs","sheet","slide","gdrive","document"]},el={label:()=>"Google Form",key:"embed.google.form",description:()=>l.ag._({id:"sgbNf4"}),icon:j.Uuo,image:{src:"/_next/static/media/google-form.c5494f4d.svg",height:66,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\/forms/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://docs.google.com/forms/..."}),canEmbedPrivate:!0,keywords:["google form","form","survey","questionnaire"],defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},es={key:"image.google",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",provider:"google"})})},label:()=>l.ag._({id:"h2JWN5"}),icon:j.xYR,image:{src:"/_next/static/media/google-image.5d5a5835.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["image","photo"]};var ec=r(25111);let ed={key:"color.gradient",Panel:e=>{let{updateAttributes:t,currentAttributes:r,isDark:i}=e;return(0,n.jsx)(ec._,{value:r,updateValue:t,isDark:i})},label:()=>l.ag._({id:"/S8bMP"}),description:()=>l.ag._({id:"/XRwS6"}),icon:a.e2K,keywords:["gradient","color","mesh"]};var eu=r(62710);let eh={label:()=>"Instagram",key:"embed.instagram",icon:j.Zzi,image:{src:"/_next/static/media/instagram.d0a61bd7.svg",height:132,width:132,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.instagram.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.instagram.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},inlineInteractive:!0,preferHtml:!0,keywords:["instagram","insta","social"],minWidth:"328px"},eg={label:()=>"Jotform",key:"embed.jotform",description:()=>l.ag._({id:"7yLOnm"}),icon:a.Lc0,image:{src:"/_next/static/media/jotform.0a55e4a9.svg",height:334,width:304,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/form\.jotform\.com/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://form.jotform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["jotform","form","survey","questionnaire"]},ep=["wallpaper","textures","background","nature","gradient","relax","sky","water","pattern","abstract"],em={key:"image.lexica",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:ep,provider:"lexica",enablePagination:!1}),(0,n.jsx)(J.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(P.x,{fontSize:"sm",color:"gray.500",children:(0,n.jsx)(o.cC,{id:"rbDrRg",components:{0:(0,n.jsx)(x.r,{href:"https://lexica.art",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},featureFlag:"lexicaImageSearch",label:()=>l.ag._({id:"cSVX+F"}),description:()=>l.ag._({id:"RdyK6U"}),image:{src:"/_next/static/media/lexica.8699ff3f.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVMaXG5ubm/v782NjYNDQ0UFBSvr6+mpqa0tLSoMQVUAAAACXRSTlMAr+A2F1nir64H2A2bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGNgYGBmZoAAdjYog5GJMIODjYUFzGBmZWVlYQAACCkATB93BkwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},keywords:["ai","lexica","stable diffusion","generated","photo","photography","image"]},ef=L.lazy(()=>Promise.all([r.e(7576),r.e(4793)]).then(r.bind(r,14793)).then(e=>({default:e.LoomPanel}))),ex={key:"video.loom",Panel:e=>(0,n.jsx)(L.Suspense,{fallback:(0,n.jsx)(_.$,{size:"md"}),children:(0,n.jsx)(ef,{...e})}),label:()=>l.ag._({id:"yrPgHm"}),description:()=>l.ag._({id:"NMTPSf"}),icon:a.IyC,image:{src:"/_next/static/media/loom.a033778e.svg",height:190,width:190,blurWidth:0,blurHeight:0},urlRegex:/^https:\/\/www.loom.com/,rewriteEmbedUrl:e=>{if(!e.includes("/embed/"))return e;let t=new URL(e);return t.searchParams.set("hideEmbedTopBar","true"),t.toString()},keywords:["video","recording","loom","screen"]},ev={key:"embed.microsoft.office",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),(0,n.jsx)(v,{guideLink:"https://support.microsoft.com/en-us/office/embed-a-word-document-in-your-blog-0faa0253-2751-44bf-8486-ea7837fe7db1",extraMessage:(0,n.jsx)(o.cC,{id:"2csAkv"}),providerName:"Word, Excel, or PowerPoint"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"Office 365",description:()=>l.ag._({id:"cbRq5v",values:{MICROSOFT_PROPER_NOUN:"Microsoft",WORD_PROPER_NOUN:"Word",POWERPOINT_PROPER_NOUN:"PowerPoint",EXCEL_PROPER_NOUN:"Excel",ONENOTE_PROPER_NOUN:"OneNote"}}),icon:j.hVS,image:{src:"/_next/static/media/office-365.868363a8.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/.*\.sharepoint\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},rewriteEmbedUrl:e=>{let t=new URL(e.replace("/:p:/r","").replace("/doc2.aspx","/Doc.aspx"));return t.searchParams.set("action","embedview"),t.searchParams.delete("mobileredirect"),t.toString()},keywords:["word","excel","powerpoint","office","microsoft","msoffice"]},eb={label:()=>l.ag._({id:"yA1Sb+",values:{MIRO_PROPER_NOUN:"Miro"}}),key:"embed.miro",icon:a.EhQ,description:()=>l.ag._({id:"Px3dYF"}),image:{src:"/_next/static/media/miro.78878247.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/miro.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.miro.com/..."}),(0,n.jsx)(v,{guideLink:"https://help.miro.com/hc/en-us/articles/360016335640-How-to-embed-editable-boards-into-websites",providerName:"Miro"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,iframeOptions:{allowPopups:!0},keywords:["whiteboard","workshop","brainstorm","miro"],rewriteEmbedUrl:e=>e.includes("/embed/")||e.includes("/live-embed/")?e:e.replace("/board/","/embed/")},ey={label:()=>l.ag._({id:"1r0gtu"}),key:"embed.pdf",description:()=>l.ag._({id:"2SUV3x"}),icon:a.gSj,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,U.CG)(O.KV),h=(0,c.NW)(i),g=(0,L.useRef)(null),p=(0,L.useCallback)(e=>{let{tempUrl:t,file:i}=e,n=(0,z.B0)(i);g.current=t,r({...n,url:t})},[r]),m=(0,L.useCallback)((e,r)=>{if(!t)return;let i=g.current;(0,z.QZ)(t,i||r,e),g.current=null},[t]);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:h,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),h&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i}),(0,n.jsx)(I.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"ONWvwQ"})}),a&&(0,n.jsx)(N.u,{onUploadSuccess:m,onUploadStart:p,orgId:a,uploadType:"doc",dropHereText:l.ag._({id:"ByKyau",values:{0:"%{browse}"}}),editType:"node"})]})},urlRegex:/\.pdf$/,image:{src:"/_next/static/media/PDF_icon.2d280cf2.svg",height:512,width:512,blurWidth:0,blurHeight:0},featureFlag:"uploadPDF",iframeOptions:{noSandbox:!0},downloadable:!0,keywords:["pdf","doc","upload","file"]},ej=["business","rocket","graphs","build","gradient","sky","water"],ew={key:"image.pictographic",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:ej,provider:"pictographic",enablePagination:!0}),(0,n.jsx)(J.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(P.x,{fontSize:"sm",color:"gray.500",children:(0,n.jsx)(o.cC,{id:"wOdKZR",components:{0:(0,n.jsx)(x.r,{href:"https://pictographic.io",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},featureFlag:"pictographicImageSearch",label:()=>l.ag._({id:"ualVui"}),description:()=>l.ag._({id:"pnIyl1"}),image:{src:"/_next/static/media/pictographic.8d31fd42.png",height:128,width:128,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEX///9ra2uEhISYmJiMjIxeXl7b29t1dXV9fX28vLyjo6P5+fk/Pz/s7OwWFhY0NDTIyMixsbHHx8d03wjFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAO0lEQVR4nAXBhwGAMAzAMKfN7AT+PxYJ8EwHZr9SOSZx6slaQTPzcaKhGjp6V1JE92sNtyhbsYEK+eAHPBYBoyAdvBIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},keywords:["pictographic","illustrations","photo","image"]};var eC=r(54933);let eA={key:"embed.microsoft.powerbi",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"PowerBI",image:{src:"/_next/static/media/powerbi.94baf198.svg",height:630,width:630,blurWidth:0,blurHeight:0},icon:eC.t5N,urlRegex:/^https?:\/\/app\.powerbi\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["microsoft","powerbi"]};var ek=r(35183),e_=r(97166),eS=r(74105),eP=r(85573),eE=r(43297),eI=r(64253);let eU=e=>eR(e),eR=async e=>{let t=(await r.e(3542).then(r.t.bind(r,63542,23))).default,{text:i,foregroundColor:n,backgroundColor:a,logoUrl:o,dotOption:l}=e;return new t({width:300,height:300,type:"svg",data:i,image:o,margin:10,dotsOptions:{color:n||"#000",type:l},backgroundOptions:{color:a||"#fff"},imageOptions:{crossOrigin:"anonymous",imageSize:.4,margin:0}}).getRawData("svg")},eT={label:()=>l.ag._({id:"toutGW"}),key:"image.qrCode",icon:$.rtB,Panel:e=>{var t;let{editor:r,editType:i,updateAttributes:a,currentAttributes:c}=e,{saveImageFromDataBlob:d}=B({updateAttributes:a,editor:r,editType:i,source:eT.key}),[u,h]=(0,L.useState)(!1),g="#000000",x="#FFFFFF",v="square",[b,y]=(0,L.useState)(null==c?void 0:null===(t=c.meta)||void 0===t?void 0:t.title),[j,w]=(0,L.useState)(null==c?void 0:c.src),C=(0,L.useRef)(),A=(0,L.useCallback)(()=>{h(!0)},[]),k=(0,L.useCallback)(async()=>{if(!b)return;let e=await eU({text:b,foregroundColor:g,backgroundColor:x,dotOption:v});e&&(w(window.URL.createObjectURL(e)),C.current=e)},[b,g,x,v]);(0,L.useEffect)(()=>{k()},[v,x,g,b,b,k]);let{src:I,tempUrl:U,meta:R,showPlaceholder:O,uploadStatus:M}=c,N=I?(0,D.aN)(I,{width:500}):void 0,H=!u&&!!(I||U||O),z=(0,L.useCallback)(async()=>{C.current&&(h(!0),await d({blob:C.current,attributes:{meta:{title:b,foregroundColor:g,backgroundColor:x,dotOption:v}}}),h(!1))},[d,b,g,x,v]);return H?(0,n.jsxs)(s.g,{align:"center",spacing:4,children:[M===F.D.Uploading&&(0,n.jsxs)(p.b,{status:"info",size:"sm",children:[(0,n.jsx)(m.z,{as:_.$,w:5,h:5}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"MEDU34"})})]}),O?(0,n.jsx)(T.k3,{isUploading:M===F.D.Uploading,hasUploadError:M===F.D.Error,width:"100%"}):(0,n.jsx)(S.E,{src:N||U,alt:"",ignoreFallback:!0,borderRadius:"md"}),(null==R?void 0:R.title)&&(0,n.jsx)(P.x,{textAlign:"left",w:"100%",children:R.title}),M!==F.D.Uploading&&(0,n.jsx)(E.z,{onClick:A,mt:2,w:"100%",children:(0,n.jsx)(o.cC,{id:"4uW88M"})})]}):(0,n.jsxs)(s.g,{align:"stretch",spacing:4,children:[M===F.D.Error&&(0,n.jsxs)(p.b,{status:"error",size:"sm",children:[(0,n.jsx)(m.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"GymiXM"})})]}),(0,n.jsxs)(ek.NI,{id:"qr-url",children:[(0,n.jsx)(e_.l,{children:(0,n.jsx)(o.cC,{id:"IagCbF"})}),(0,n.jsx)(eS.B,{size:"lg",children:(0,n.jsx)(eP.I,{id:"qr-url",value:b,placeholder:l.ag._({id:"qf63PF"}),type:"url",onChange:e=>{y(e.target.value)}})})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.xu,{p:4,py:2,bg:"gray.100",borderRadius:"md",children:(0,n.jsxs)(eE.K,{spacing:2,children:[(0,n.jsx)(P.x,{children:(0,n.jsx)(o.cC,{id:"a37vfH"})}),(0,n.jsx)(Y.k,{align:"center",justify:"center",h:"200px",p:1,border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",bg:"white",children:j?(0,n.jsx)(eE.K,{h:"100%",children:(0,n.jsx)(S.E,{src:j,maxH:"100%"})}):(0,n.jsx)(J.xu,{p:2,children:(0,n.jsx)(P.x,{size:"xs",color:"gray.500",textAlign:"center",children:(0,n.jsx)(o.cC,{id:"eu7KCb"})})})}),(0,n.jsx)(P.x,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(o.cC,{id:"wjRHQb"})})]})}),(0,n.jsx)(eI.kH,{isDisabled:!!j,shouldWrapChildren:!0,label:(0,n.jsx)(o.cC,{id:"Y1WnIF"}),children:(0,n.jsx)(E.z,{onClick:z,w:"100%",variant:"solid",tabIndex:0,isDisabled:!j,children:(0,n.jsx)(o.cC,{id:"IChvxB"})})})]})]})},keywords:["qr","qrcode"],resizeToFit:!0},eO={label:()=>"Spotify",key:"video.spotify",keywords:["spotify","music","podcast","playlist","song","album"],description:()=>l.ag._({id:"lrKTd0"}),icon:j.Ha7,image:{src:"/_next/static/media/spotify.2dd06f33.svg",height:1333,width:1333,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/open.spotify.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a||"",updateAttributes:r,placeholder:"https://open.spotify.com/..."}),(0,n.jsx)(v,{guideLink:"https://artists.spotify.com/en/help/article/embedded-players-follow-buttons",providerName:"Spotify",extraMessage:(0,n.jsx)(o.cC,{id:"ItAUcI"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},preferHtml:!0},eM={label:()=>"Tally Form",key:"embed.tally",description:()=>l.ag._({id:"Qzo1BZ"}),icon:a.Lc0,image:{src:"/_next/static/media/tally.dd047104.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXHpG9s0E1swDVk0E1s0El/0GeU3H14yEVszEl03El8jElM0El5tFIXjG9v/HO6cF6Y5E2A9E2gHheKrAAAAEnRSTlMAVyclXeYiCNf+fdCl9uif/aFquzWYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANElEQVR4nC3FWRLAEBRFwWPKcxNi2P9iFaV/Grvw+fBQpjQHEJLUHcCr+rcHsPS5PcR4uhY8sgFUhN0cjQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},urlRegex:/^https?:\/\/tally.so/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://tally.so/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},eD=/\/video\/(\d+)/,eN={label:()=>"TikTok",key:"video.tiktok",icon:j.ABo,image:{src:"/_next/static/media/tiktok.cbd7f7ff.svg",height:256,width:256,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.tiktok.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.tiktok.com/..."}),(0,n.jsx)(v,{guideLink:"https://developers.tiktok.com/doc/embed-videos/",providerName:"TikTok"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},preferHtml:!0,rewriteEmbedUrl(e){var t;let r=null===(t=e.match(eD))||void 0===t?void 0:t[1];return r?"https://www.tiktok.com/embed/v2/".concat(r):e},keywords:["tiktok","video","social"],minWidth:"325px",maxWidth:"325px"},eH={key:"embed.twitter",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://twitter.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"Tweet",icon:j.mdU,image:{src:"/_next/static/media/twitter.c7499c85.svg",height:1110,width:1110,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(www\.)?twitter\.com/,keywords:["twitter","tweet"],preferHtml:!0,defaultDisplayStyle:"inline",inlineInteractive:!0},eL={label:()=>"Typeform",key:"embed.typeform",description:()=>l.ag._({id:"yjYR46"}),icon:eC.Lc0,image:{src:"/_next/static/media/typeform.6d709d2e.svg",height:800,width:800,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/([a-z0-9]*\.)?typeform\.com/,Panel:e=>(0,n.jsx)(h,{...e,urlPlaceholder:"https://typeform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["typeform","form","survey","questionnaire"]},ez="Unsplash",eG=["wallpaper","textures","architecture","background","nature","gradient","experimental","animals","california","flowers","relax","sky","water","pattern","abstract"],eF={key:"image.unsplash",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:eG,provider:"unsplash"}),(0,n.jsx)(J.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(P.x,{fontSize:"sm",color:"gray.500",children:(0,n.jsx)(o.cC,{id:"k16iQH",values:{UNSPLASH_PROPER_NOUN:ez},components:{0:(0,n.jsx)(x.r,{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},label:()=>l.ag._({id:"olwQVc",values:{UNSPLASH_PROPER_NOUN:ez}}),description:()=>l.ag._({id:"tQSDXx"}),icon:j.WxC,image:{src:"/_next/static/media/unsplash.1957709b.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["stock","photo","photography","image","unsplash"],resizeToFit:!0},eB={key:"video.vimeo",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://vimeo.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>l.ag._({id:"M1Uyl1"}),icon:j.XZc,image:{src:"/_next/static/media/vimeo.4de20653.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(player\.)?vimeo\.com/,keywords:["vimeo","video"]};var eW=r(80940),eq=r(82713);let eV={label:()=>l.ag._({id:"/hLjBB"}),description:()=>l.ag._({id:"wRlboO"}),key:"embed.custom",icon:a.m6E,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,{proxy:a,displayStyle:h}=i,g=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:g||"",updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),g&&h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eq.X,{isChecked:a,onChange:e=>r({proxy:e.target.checked}),children:(0,n.jsx)(o.cC,{id:"Fl9cgp"})}),(0,n.jsx)(P.x,{fontSize:"sm",color:"gray.500",mt:-2,children:(0,n.jsx)(o.cC,{id:"J87/8N"})})]}),g&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["webpage","website","app","embed","iframe"]},eK={label:()=>"Wistia",key:"video.wistia",icon:a.IyC,image:{src:"/_next/static/media/wistia.613af213.svg",height:1899,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/fast.wistia.net/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,n.jsx)(v,{guideLink:"https://wistia.com/support/embed-and-share/media-on-your-website",providerName:"Wistia"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["wistia","video"]},eQ={key:"video.youtube",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.youtube.com/watch?v=..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>l.ag._({id:"7J5KkU"}),icon:j.opf,image:{src:"/_next/static/media/youtube.b0610934.svg",height:461,width:461,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www\.youtube\.com/,keywords:["youtube","video"]},eX=[A,ei,es,eW.Q,em,eF,eQ,ex,V,el,eo,eV,W,eT,i.N,ev,eA,eH,eB,q,ey,eb,b,y,eK,eO,eN,eh,ed,eu.j,k,eL,eg,eM,Z,ew],eZ=Object.fromEntries(Object.values(eX).flat().map(e=>[e.key,e]))},9355:function(e,t,r){"use strict";var i,n;r.d(t,{D:function(){return i}}),(n=i||(i={}))[n.Done=0]="Done",n[n.Uploading=1]="Uploading",n[n.Error=2]="Error",n[n.Queued=3]="Queued"},45989:function(e,t,r){"use strict";r.d(t,{C:function(){return a},K:function(){return n}});var i=r(71121);let n=e=>{var t,r,i,n,a,o;return(null===(t=e.meta)||void 0===t?void 0:t.description)||(null===(r=e.meta)||void 0===r?void 0:r.alt_description)||(null===(i=e.meta)||void 0===i?void 0:i.title)||(null===(n=e.meta)||void 0===n?void 0:n.snippet)||(null===(o=e.meta)||void 0===o?void 0:null===(a=o.tags)||void 0===a?void 0:a.join(", "))||e.query},a=(e,t,r)=>{let n={src:e.imageUrl,tempUrl:e.thumbnailUrl,meta:{height:e.height,width:e.width,description:e.description,alt_description:e.altDescription,title:e.title,snippet:e.snippet},query:t,source:i.Q[r]};return"aiGenerated"===r&&(n.aiParams={prompt:e.aiPrompt,height:e.height,width:e.width,model:e.aiModel,stylePreset:e.aiStylePreset}),n}},27238:function(e,t,r){"use strict";r.d(t,{M:function(){return l}});var i=r(55478),n=r(2784),a=r(43997),o=r(62861);let l=e=>{let{id:t,...r}=e,{isOpen:l,onOpen:s,onClose:c}=(0,i.q)(r),d=(0,a.I0)();return(0,n.useEffect)(()=>{t&&d((0,o.VN)({id:t,isOpen:l}))},[l,d,t]),(0,n.useEffect)(()=>()=>{t&&d((0,o.VN)({id:t,isOpen:!1}))},[d,t]),{isOpen:l,onOpen:s,onClose:c}}},4476:function(e,t,r){"use strict";r.d(t,{ER:function(){return s},U:function(){return d},Y7:function(){return c}});var i=r(52322),n=r(82554),a=r(35534),o=r(2529),l=r(82302);let s=e=>{let{product:t="pro",...r}=e;return(0,i.jsx)(n.C,{size:"sm",variant:"solid",bottom:0,right:0,bg:"pro"===t?"linear-gradient(97deg, #3300D9 -10%, #9D20C9 56.82%, #DF7A6C 120%)":"plus"===t?"trueblue.500":"gray.100",color:"pro"===t||"plus"===t?"white":"gray.800",textShadow:"pro"===t||"plus"===t?"0px 0px 1px rgba(0, 0, 0, .5)":"none",fontSize:"11px",...r,children:(0,l.KL)()[t].name})},c=e=>{let{workspace:t,...r}=e,n=(0,o.K9)(t);return(0,i.jsx)(s,{variant:"subtle",...r,product:n||"free"})},d=e=>{let{workspace:t,productFeature:r,...n}=e,l=(0,a.Y)(r,t),c=(0,o.I4)(r);return l||null===c?null:(0,i.jsx)(s,{variant:"solid",product:c,...n})}},30191:function(e,t,r){"use strict";r.d(t,{m:function(){return v}});var i=r(52322),n=r(50019),a=r(38035),o=r(43297),l=r(29117),s=r(77533),c=r(62614),d=r(5879),u=r(69971),h=r(30240),g=r(23691),p=r(66754),m=r(16720),f=r(2529),x=r(4476);let v=e=>{let{title:t=(0,i.jsx)(d.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:g.x8}}),description:r,buttonLabel:v,onOpenCallback:b,onCloseCallback:y,segmentEvent:j,isNarrow:w,...C}=e,A=(0,h.ye)("upsellUXEnabled_Pro"),{openUpsellModal:k,product:_,proYearlyProductPrice:S}=(0,m.z)(),P={light:{bg:"trueblue.50",bgGradient:"linear-gradient(0deg, var(--chakra-colors-gray-50) 0%, white  100%)",border:"trueblue.200",title:"gray.900",description:"gray.700",borderGradient:"linear-gradient(97deg, #3300D9 -10%, #9D20C9 56.82%, #DF7A6C 120%)"},dark:{bg:"gray.800",bgGradient:"linear-gradient(0deg, var(--chakra-colors-gray-900) 0%, var(--chakra-colors-gray-800) 100%)",border:"trueblue.400",title:"gray.50",description:"gray.100",borderGradient:"linear-gradient(90deg, #3300D9 0%, #9D20C9 57%, #DF7A6C 100%)"}}["light"===(0,n.If)().colorMode?"light":"dark"];if("pro"===_||!A)return null;let E=((null==S?void 0:S.price)||19200)/(0,f.kK)(null==S?void 0:S.currency)/12,I=(null==S?void 0:S.currency)||u.Fa6.Usd,U=(0,f.aS)(null==S?void 0:S.currency);return(0,i.jsxs)(a.k,{flex:1,w:"100%",mb:4,p:4,bgGradient:P.bgGradient,position:"relative",flexDirection:w?"column":"row",align:"center",borderRadius:"lg",gap:4,zIndex:1,boxShadow:"md",_before:{content:'""',position:"absolute",inset:0,borderRadius:"lg",border:"".concat(2,"px solid transparent"),background:"".concat(P.borderGradient," border-box"),mask:"linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0)",maskComposite:"subtract",opacity:.7},...C,children:[(0,i.jsxs)(o.K,{flex:2,alignSelf:"stretch",children:[(0,i.jsxs)(l.U,{spacing:3,children:[(0,i.jsx)(x.ER,{variant:"solid"}),(0,i.jsx)(s.x,{color:P.title,fontWeight:"bold",lineHeight:"1.3",children:t})]}),(0,i.jsx)(s.x,{color:P.description,fontSize:"xs",children:r||(0,i.jsx)(d.cC,{id:"gGlaFH",values:{GAMMA_PROPER_NOUN:g.N6}})})]}),(0,i.jsxs)(o.K,{spacing:1,flex:1,alignSelf:"stretch",children:[(0,i.jsx)(c.z,{variant:"solid",colorScheme:"trueblue",size:"sm",onClick:()=>{k({onOpenCallback:b,onCloseCallback:y,segmentEvent:j})},children:v||(0,i.jsx)(d.cC,{id:"kwkhPe"})}),(0,i.jsx)(s.x,{textAlign:"center",fontSize:"xs",color:P.description,children:(0,i.jsx)(d.cC,{id:"LTohGv",values:{0:(0,p.x)(E,{currency:I,notation:U})}})})]})]})}},10617:function(e,t,r){"use strict";r.d(t,{R4:function(){return i.R},uL:function(){return n.uL},dU:function(){return n.dU},Y:function(){return n.Y},_O:function(){return n._O}}),r(552);var i=r(14421),n=r(35534);r(2784)},55963:function(e,t,r){"use strict";r.d(t,{n:function(){return i}});let i=()=>{let e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);let t=document.createElement("div");e.appendChild(t);let r=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),r}},25111:function(e,t,r){"use strict";r.d(t,{_:function(){return H}});var i=r(52322),n=r(29117),a=r(28535),o=r(43297),l=r(38035),s=r(10625),c=r(67046),d=r(62614),u=r(99058),h=r(44035),g=r(39237),p=r(75768),m=r(32899),f=r(42946),x=r(49929),v=r(64253),b=r(5879),y=r(87254),j=r(62349),w=r.n(j),C=r(2784),A=r(98621),k=r.n(A),_=r(40382),S=r(82729),P=r(27875),E=r.n(P);let I={soft:{name:"Soft",spin:[0,-40,40],lighten:[0,0,0]},duo:{name:"Duo",spin:[0,180],lighten:[0,0]},crescent:{name:"Crescent",spin:[0,-45,45,-90,90],lighten:[0,0,0,0,0]},wisp:{name:"Wisp",spin:[0,72,216],lighten:[0,0,0]},mono:{name:"Mono",spin:[0,0,0],lighten:[0,20,40]},cosmos:{name:"Cosmos",spin:[0,72,144,216,288],lighten:[0,0,0,0,0]}},U=e=>{let t=[];e.forEach((e,r)=>{let i=e.setAlpha(1),n=i.toHsl().h*r,a="radial-gradient(circle at ".concat(2*n%360/360*50,"% ").concat(3*n%360/360*50,"%, ").concat(i.setAlpha(.5).toHex8String()," 0, ").concat(i.setAlpha(0).toHex8String()," ").concat(1*n%360/360*50+50,"%)");t.push(a)});let r=e[0].setAlpha(.5).toHex8String();return t.push("linear-gradient(0deg, ".concat(r," 0%, ").concat(r," 100%)")),{backgroundImage:t.join(",")}},R=(e,t)=>{let r=I[e],i=[];return r.spin.forEach(e=>{let r=k()(t.toHsv()).spin(e);i.push(r)}),r.lighten.forEach((e,t)=>{i[t].lighten(e)}),i},T=(e,t)=>{let r=R(e,t),i=U(r);return{colors:r,gradient:i}},O=(e,t,r)=>{t.forEach(e=>{e&&(e.style.opacity="0")}),e.forEach((e,i)=>{let n=t[i];if(!n||!r)return;let a=function(e,t){let r=e.offsetWidth,i=k()(t),n=Math.PI/180*i.toHsl().h,a=-(i.toHsl().l*r)+r;return{x:r/2-a*Math.cos(n),y:r/2-a*Math.sin(n)}}(r,e);n.style.transform="translate(calc(".concat(a.x,"px - 50%),calc(").concat(a.y,"px - 50%))"),n.style.backgroundColor=e.toHexString(),n.style.opacity="1"})},M=(0,C.forwardRef)(function(e,t){let{isPrimary:r=!1,noTransition:n=!1}=e;return(0,i.jsx)(a.xu,{ref:t,borderRadius:"full",boxSize:r?7:5,pos:"absolute",zIndex:r?2:1,shadow:"base",border:"2px solid white",pointerEvents:"none",transitionProperty:n?"none":"transform",transitionDuration:"normal"})}),D=(0,C.memo)(e=>{let{updateColor:t,colors:r}=e,n=(0,C.useRef)(null),o=(0,C.useRef)(null),s=(0,C.useRef)(null),c=(0,C.useRef)(null),d=(0,C.useRef)(null),u=(0,C.useRef)(null),h=(0,C.useMemo)(()=>[o,s,c,d,u],[]);(0,C.useEffect)(()=>{O(r,h.map(e=>e.current),n.current)},[r,h]);let g=(0,C.useCallback)(e=>{if(!n.current)return;let r=n.current.getBoundingClientRect();(e.clientX||e.clientY)&&t(function(e,t,r){let i=e.current.offsetWidth,n=e.current.offsetHeight,a=i/2,o=n/2,l=function(e,t,r,i,n){let a=r-e,o=i-t;return E()(Math.sqrt(o*o+a*a),0,n)}(t,r,a,o,i/2),s=180/Math.PI*Math.atan2(o-r,a-t);return k().fromRatio({h:s+360*Math.ceil(-s/360)+1,s:1,l:Math.abs(-l/i+1)})}(n,e.clientX-r.left,e.clientY-r.top))},[t]),p=(0,C.useCallback)(()=>{document.removeEventListener("mousemove",g)},[g]),m=(0,C.useCallback)(e=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",p,{once:!0}),g(e)},[g,p]);return(0,i.jsxs)(a.xu,{onMouseDown:m,p:4,m:-4,position:"relative",children:[(0,i.jsx)(M,{ref:o,noTransition:!0,isPrimary:!0}),(0,i.jsx)(M,{ref:s}),(0,i.jsx)(M,{ref:c}),(0,i.jsx)(M,{ref:d}),(0,i.jsx)(M,{ref:u}),(0,i.jsx)(S.o,{ratio:1,children:(0,i.jsxs)(l.k,{ref:n,position:"relative",borderRadius:"full",shadow:"lg",children:[(0,i.jsx)(l.k,{pos:"absolute",borderRadius:"full",bg:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)",inset:0,zIndex:1}),(0,i.jsx)(l.k,{pos:"absolute",inset:0,bg:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",transform:"rotateZ(270deg)",borderRadius:"full"})]})})]})}),N={vibe:"mono",primaryColor:"#75d8ff",css:{}},H=e=>{let{value:t,updateValue:r,isDark:j}=e,{vibe:A,primaryColor:S}={...N,...t},[P,E]=(0,C.useState)(k()(S)),{colors:U,gradient:R}=(0,C.useMemo)(()=>T(A,P),[A,P]),O=(0,C.useCallback)(e=>{let{gradient:t}=T(A,e);r({vibe:A,primaryColor:e.toHexString(),css:t})},[A,r]),M=(0,_.Z_)(O,100),H=(0,C.useCallback)(e=>{E(e),M(e)},[M]);return(0,i.jsxs)(n.U,{spacing:4,alignItems:"stretch",wrap:"wrap",children:[(0,i.jsx)(a.xu,{flex:"1",minW:"120px",children:(0,i.jsx)(D,{vibe:I[A],color:P,updateColor:H,colors:U})}),(0,i.jsxs)(o.K,{flex:"2",spacing:4,minW:"180px",children:[(0,i.jsx)(l.k,{backgroundColor:j?"black":"white",...R,opacity:1,flex:"1",borderRadius:"md",shadow:"md",minH:"80px",mt:2}),(0,i.jsxs)(n.U,{children:[(0,i.jsxs)(s.v,{children:[(0,i.jsx)(c.j,{w:"100%",as:d.z,size:"sm",variant:"plain",textAlign:"left",rightIcon:(0,i.jsx)(x.G,{icon:f.ptq}),children:I[A].name}),(0,i.jsx)(u.q,{minWidth:"240px",zIndex:"dropdown",children:(0,i.jsx)(h._,{onChange:e=>{let{gradient:t}=T(e,P);r({vibe:e,primaryColor:P.toHexString(),css:t})},value:A,title:y.ag._({id:"1CalO6"}),type:"radio",children:Object.entries(I).map(e=>{let[t,{name:r}]=e;return(0,i.jsx)(g.i,{value:t,children:r},t)})})})]}),(0,i.jsx)(p.h,{size:"sm",variant:"plain",children:(0,i.jsx)(v.kH,{placement:"top",label:(0,i.jsx)(b.cC,{id:"OVjfHO"}),children:(0,i.jsx)(m.h,{icon:(0,i.jsx)(x.G,{icon:f.RJo}),"aria-label":y.ag._({id:"OVjfHO"}),onClick:()=>{H(k().fromRatio({h:w()(0,360),s:1,l:w()(.5,.8)}))}})})})]})]})]})}},45462:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var i=r(2784),n=r(69971),a=r(71383),o=r(92566),l=r(97134);let s=()=>{let e=(0,l.n_)(),t=(0,a.TL)(),{data:r,loading:s}=(0,n.BCl)({variables:{workspaceId:e,archived:!1},skip:!e,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),{data:c,loading:d}=(0,n.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),u=(0,i.useMemo)(()=>(null==c?void 0:c.themes)||[],[null==c?void 0:c.themes]),h=(0,i.useMemo)(()=>(null==r?void 0:r.themes)||[],[null==r?void 0:r.themes]);return(0,i.useEffect)(()=>{u.length>0&&t((0,o.cn)({globalThemes:u}))},[t,u]),(0,i.useEffect)(()=>{h.length>0&&t((0,o.PA)({workspaceThemes:h}))},[t,h]),{isLoadingThemes:s||d,globalThemes:u}}},10232:function(e,t,r){"use strict";r.d(t,{B:function(){return s},T:function(){return l}});var i=r(2784),n=r(71383),a=r(78112),o=r(40298);let l=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,n.bh)();if(!t){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(t));return}e&&t.dispatch((0,o.W7)()),t.dispatch((0,a.AK)({isEditingMedia:!0}))},s=()=>{let e=(0,n.qr)();return(0,i.useCallback)(t=>{let{isOpen:r,shouldResetSourceKey:i=!0}=t;i&&e.dispatch((0,o.W7)()),e.dispatch((0,a.AK)({isEditingMedia:r}))},[e])}},45680:function(e,t,r){"use strict";r.d(t,{Y:function(){return n},o:function(){return i}});let i="+++",n="/continue"},31818:function(e,t,r){"use strict";r.d(t,{CJ:function(){return n},dW:function(){return o},fD:function(){return a}});var i=r(87254);let n="card-layout",a="25px",o={accentImage:()=>i.ag._({id:"YXjp37"}),cardBackground:()=>i.ag._({id:"yYiJkI"})}},42616:function(e,t,r){"use strict";r.d(t,{Ay:function(){return x},E0:function(){return g},HD:function(){return p},I7:function(){return f},K9:function(){return h},Nn:function(){return m}});var i=r(37243),n=r(1842),a=r.n(n),o=r(27191),l=r(71383),s=r(78112),c=r(33945),d=r(31335),u=r(65050);let h=i.hj.create({name:"cardCollapse",addKeyboardShortcuts:()=>({Escape:e=>{let{editor:t}=e,r=(0,l.bh)();if((0,s.gh)(r.getState())!==c.q.DOC_VIEW)return!1;let{selection:n}=t.state;if(!n.empty)return!1;let a=(0,i.Kk)(d.KH)(n);return!!a&&a.depth>u.k_&&!p(a.node)&&(m(a.node.attrs.id,!0),!0)}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("cardCollapse"),appendTransaction:(e,t,r)=>{if(r.selection.eq(t.selection)||!r.selection.empty)return;let n=(0,i.Kk)(d.KH)(r.selection);if(!n)return;let{node:a,pos:l}=n;if(p(a))try{let{tr:e}=r,t=o.qv.create(e.doc,l);if(!t)return;return e.setSelection(t)}catch(e){console.error("Error moving selection out of collapsed card",{node:a,pos:l},e)}}})]}),g=(e,t)=>{let r=[],i=[];e.descendants((e,t,n)=>{if(!(0,d.KH)(e))return;let{id:a}=e.attrs;n&&"document"===n.type.name?r.push(a):i.push(a)}),t((0,s.rH)({cardIds:r,isCollapsed:!1})),t((0,s.rH)({cardIds:i,isCollapsed:!0}))},p=e=>{let t="string"==typeof e?e:e.attrs.id;if(!t)return;let r=(0,l.bh)().getState();return(0,s.yH)(t)(r)},m=(e,t)=>{if(a()(e)){console.error("[setCardCollapsed] Input is unexpectedly not string | string[]: ",e);return}let r=Array.isArray(e)?e:[e],i=(0,l.bh)();(1!==r.length||(0,s.yH)(r[0])(i.getState())!==t)&&i.dispatch((0,s.rH)({cardIds:r,isCollapsed:t}))},f=e=>{let t=[];e.state.doc.descendants(e=>{if(!(0,d.KH)(e))return;let{id:r}=e.attrs;t.push(r)}),m(t,!1)},x=e=>{let t=(0,l.bh)();void 0===t.getState().TipTap.memoState.expandedCards[e]&&t.dispatch((0,s.rH)({cardIds:[e],isCollapsed:!1}))}},22156:function(e,t,r){"use strict";r.d(t,{$U:function(){return u},Ap:function(){return w},BA:function(){return v},Fi:function(){return y},Hh:function(){return s},Ux:function(){return x},Vc:function(){return l},eZ:function(){return c},gF:function(){return h},jS:function(){return d},pt:function(){return b},q9:function(){return j},wz:function(){return g}});var i=r(91492),n=r(12971),a=r(54317),o=r(1142);let l=e=>["left","right"].includes(e),s=e=>{let{layout:t,parentCards:r,isMobileDevice:i}=e;return i&&"left"===t?"mobileLeft":i&&"right"===t?"mobileRight":l(t)&&c(r)?"blank":t},c=e=>e.some(e=>l(e.attrs.layout)),d=e=>{let t=u(e),r={};return Object.entries(t.items).forEach(e=>{var t;let[i,n]=e,a=null!==(t=null==n?void 0:n.style)&&void 0!==t?t:{gridArea:i};r['> [data-layout-item-id="'.concat(i,'"]')]=a}),r},u=e=>o.q[null!=e?e:"blank"]||o.q.blank,h=e=>{let t={},r=e.pos,i=e.nodeAfter;return i?i.descendants((e,i)=>{if(!(0,a.pv)(e))return!1;t[e.attrs.itemId]={node:e,pos:r+1+i}}):console.error("[getCardLayoutItems] could not find card node at pos ".concat(r)),t},g=(e,t)=>h(e.doc.resolve(t)),p=(e,t,r)=>{let i=e.doc.resolve(t.pos+1),n=i.blockRange(e.doc.resolve(i.end()));n&&e.wrap(n,[{type:r.nodes.cardLayoutItem}]).setMeta("annotationEvent",{type:"wrap-nodes",start:n.start,end:n.end,level:1})},m=(e,t,r,i)=>{let n=r.nodes.cardLayoutItem.createAndFill({itemId:"body",...i});e.insert(t+1,n)},f=(e,t,r,n)=>{let a=r.nodes.cardAccentLayoutItem.createAndFill({itemId:"accent",background:{type:i.E.NONE},...n});e.insert(t+1,a)},x=(e,t,r,i)=>{let n=e.doc.nodeAt(t),a=g(e,t);if(0===Object.keys(a).length){p(e,{node:n,pos:t},r),i.items.accent&&f(e,t,r);return}i.items.body&&!a.body&&m(e,t,r),i.items.accent&&!a.accent?f(e,t,r):a.accent&&"cardLayoutItem"===a.accent.node.type.name&&v(e,a.accent.pos,a.accent.node,r)},v=(e,t,r,i)=>{e.replaceRangeWith(t,t+r.nodeSize,i.nodes.cardAccentLayoutItem.createAndFill({...r.attrs}))},b=e=>"cardAccentLayoutItem"===e.type.name&&"accent"===e.attrs.itemId,y=e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId,j=(e,t)=>{if(!t)return 0;let r=t.findIndex(t=>t.accentId===e.accentId);return -1===r||void 0===r?0:(r+1)%t.length},w=e=>{let t=(0,n.sS)(e,b)[0];if(t)return t.node.attrs.background}},23186:function(e,t,r){"use strict";r.d(t,{AQ:function(){return f},J9:function(){return m},NE:function(){return w},YS:function(){return b},jz:function(){return y},pE:function(){return x}});var i=r(37243),n=r(27191),a=r(71383),o=r(52659),l=r(24151),s=r(78112),c=r(12971),d=r(28817),u=r(33945),h=r(42616),g=r(65050),p=r(54317);let m=(e,t,r)=>{let n=e=>{let t=(0,p.KH)(e),i="boolean"!=typeof r||(0,h.HD)(e)===r;return t&&i},a=e.state.doc.nodeAt(t),o=e.state.doc.resolve(t);return a&&n(a)?{node:a,pos:t,start:o.start,depth:o.depth}:(0,i.qv)(e.state.doc.resolve(t),n)},f=(e,t)=>{try{let r=(e,t)=>(0,p.KH)(e)&&t===g.k_,i=e.resolve(t),n=e.nodeAt(t);if(n&&r(n,i.depth+1))return{node:n,pos:t};return(0,c.Ci)(i,r)}catch(e){console.error("[findTopCardNodeParent] error",e);return}},x=e=>{let{pos:t,editor:r}=e,i=(0,c.nv)(r.state.doc.resolve(t),p.KH).map(e=>e.node.attrs.id);(0,h.Nn)(i,!1)},v=async e=>{let{cardId:t,pos:r,editor:i,cardEl:a,isNested:s=!1,origin:c="editor"}=e;if(!a){console.error("[scrollToCard] no cardEl specified");return}(0,h.Nn)(t,!1),x({pos:r,editor:i}),await (0,o.cC)("editor").scrollElementIntoView({element:a,delay:s?g.nY:0}),i.commands.command(e=>{let{tr:t}=e;return t.setSelection(n.Y1.near(i.state.doc.resolve(r))).setMeta(l.C,c),!0})},b=e=>{let{cardId:t,editor:r}=e;if(!t)return;let i=(0,a.bh)();if((0,s.gh)(i.getState())===u.q.SLIDE_VIEW){r.commands.spotlightCardById(t);return}let n=document.querySelector('[data-card-id="'.concat(t,'"]'));if(!n)return;let{pos:o}=(0,p.Bw)(r,t)||{};if(!o)return;let l=r.state.doc.resolve(o).depth>g.k_;v({cardId:t,pos:o,editor:r,cardEl:n,isNested:l})},y=(e,t,r)=>{let i;let n=t.target;if(n.closest(".".concat(g.ar))&&!n.closest("[data-outside-card-body]")||r&&!j(r,e.state.schema))return null;let a=n.closest(".".concat(g.vD));if(!a)return{pos:e.state.doc.content.size-1};let o=a.querySelector(".".concat(g.ar)),l=null==o?void 0:o.getBoundingClientRect();if(!l)return null;let{doc:s}=e.state;try{let t=e.posAtDOM(a,0);if(-1===t)return null;let r=(0,c.nv)(s.resolve(t),p.KH);if(0===r.length)return null;i=r[r.length-1]}catch(e){return console.error("(caught) [checkBetweenCardsDropTarget] error finding parent node:",e),null}let{node:u,pos:h}=i;if(!h||!u)return null;let[m]=(0,d.qs)(o),f=m+l.top,x=m+l.bottom,v=m+t.clientY;return v<f?{pos:h}:v>x?{pos:h+u.nodeSize}:null},j=(e,t)=>t.nodes.card.validContent(e.content),w=(e,t)=>{let r=(0,c.sS)(e,e=>"cardLayoutItem"===e.type.name);return r.length>0?{node:r[0].node,pos:t+r[0].pos+1}:{node:e,pos:t}}},62136:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});let i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[].slice.call(e.querySelectorAll(t),0);return r&&i.reverse(),i}},44884:function(e,t,r){"use strict";r.d(t,{e:function(){return o},v:function(){return a}});var i=r(82807),n=r(98835);let a=e=>{var t;if(null==e?void 0:null===(t=e.parentElement)||void 0===t?void 0:t.matches("ol, ul"))return e.parentElement;let r=[e],n=e;for(;(n=n.nextElementSibling)&&"LI"===n.tagName;){let t=parseInt(n.getAttribute("indent")||"0")-parseInt(e.getAttribute("indent")||"0");if(t<0)break;if(0==t){if(n.getAttribute("variant")!=e.getAttribute("variant"))break;r.push(n)}else n=a(n),r.push(n)}let o=e.getAttribute("variant")==i.W.Numbered?document.createElement("ol"):document.createElement("ul");return e.replaceWith(o),r.forEach(e=>{e.removeAttribute("variant"),e.removeAttribute("indent")}),o.append(...r),o},o=e=>{var t,r;let a;let o=e,l=0,s="false";for(e.innerHTML.startsWith("[ ]")?(a=i.W.Todo,s="false",e.innerHTML.startsWith("[ ]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)):e.innerHTML.startsWith("[x]")&&(a=i.W.Todo,s="true",e.innerHTML.startsWith("[x]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)),"checkbox"===e.getAttribute("role")&&(a=i.W.Todo,s=e.getAttribute("aria-checked")||"false"),("todo"===e.getAttribute("variant")||e.getAttribute("checked"))&&(a=i.W.Todo,s=e.getAttribute("checked")||"false"),(0,n.b)(e);o=null===(t=e.parentElement)||void 0===t?void 0:t.closest("li, ul, ol");){if(o.matches("ul, ol")){l++;let e=o.className.match(/lst-kix_\w+-(\d+)/);e&&(l=parseInt(e[1])+1),a||"OL"!=o.tagName?a||"UL"!=o.tagName||(a=i.W.Bullet):a=i.W.Numbered}o.after(e)}e.setAttribute("indent",Math.max(l-1,0).toString()),e.setAttribute("variant",a||i.W.Bullet),a==i.W.Todo&&e.setAttribute("checked",s),1===e.children.length&&(null===(r=e.firstElementChild)||void 0===r?void 0:r.tagName)==="P"&&(e.innerHTML=e.firstElementChild.innerHTML)}},82631:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var i=r(62136),n=r(44884);let a=e=>((0,i.F)(e,"li").forEach(e=>{(0,n.v)(e)}),e)},98835:function(e,t,r){"use strict";r.d(t,{b:function(){return j},B:function(){return b}});var i=r(48972),n=r(97912),a=r(62136);let o=e=>{(0,a.F)(e,"p.title").forEach(u),(0,a.F)(e,"br").forEach(d),(0,a.F)(e,"a[href]").forEach(g),(0,a.F)(e,"a[href][id]").forEach(p),(0,a.F)(e,"span").forEach(m),(0,a.F)(e,"a[href][id]").forEach(t=>x(t,e))},l=e=>{(0,a.F)(e,"h1").forEach(s),(0,a.F)(e,"li > span").forEach(c)},s=e=>{if("always"==e.style.pageBreakBefore){let t=document.createElement("hr");t.style.pageBreakBefore="always",t.classList.add("divider"),e.before(t)}},c=e=>{var t;(null===(t=e.textContent)||void 0===t?void 0:t.trim())==="•"&&e.remove()},d=e=>{var t;((null===(t=e.previousElementSibling)||void 0===t?void 0:t.tagName)=="P"||e.classList.contains("Apple-interchange-newline"))&&e.remove()},u=e=>{let t=document.createElement("h1");t.className="title",t.innerHTML=e.innerHTML,e.replaceWith(t)},h=/^https:\/\/docs\.google\.com\/document\/d\/[^/]+\/edit#heading=(h\.[^/]+)/,g=e=>{let t=e.getAttribute("href");if(t&&(t.startsWith("#h.")||h.test(t))){let t=e.closest("p");t&&t.textContent==e.textContent?t.remove():e.removeAttribute("href")}},p=e=>{var t,r;if(null===(t=e.getAttribute("id"))||void 0===t?void 0:t.startsWith("cmnt_ref")){let t=e.closest("sup");null==t||t.remove()}else if(null===(r=e.getAttribute("id"))||void 0===r?void 0:r.startsWith("cmnt")){let t=e.closest("div");null==t||t.remove()}},m=e=>{e.innerHTML=e.innerHTML.replace(/(&nbsp;){2,}/g,"").replace(/&nbsp;/g," ")},f=/ftnt_ref(\d+)/,x=(e,t)=>{let r=e.getAttribute("id");if(r&&r.startsWith("ftnt_ref")){var i;let n=parseInt((null===(i=r.match(f))||void 0===i?void 0:i[1])||""),a=e.closest("sup"),o=t.querySelector("#ftnt".concat(n)),l=null==o?void 0:o.closest("div");if(!n||!a||!l)return;null==o||o.remove();let s=document.createElement("div");s.className="imported-footnote",s.appendChild(l),a.replaceWith(s)}};var v=r(44884);let b=e=>{try{let t=new DOMParser().parseFromString(e,"text/html");return(0,a.F)(t,y).forEach(j),(0,a.F)(t,"li",!0).forEach(v.e),(0,a.F)(t,"img").forEach(w),(0,a.F)(t,"img").forEach(A),(0,a.F)(t,"script, style").forEach(e=>e.remove()),l(t),o(t),(0,a.F)(t,"p").forEach(C),t.body.innerHTML}catch(t){return console.error("Error transforming pasted HTML",t),e}},y="p, h1, h2, h3, h4, h5, h6",j=e=>{e.querySelectorAll(y).forEach(e=>{if(e.tagName.match(/H\d/)){let t=document.createElement("b");t.innerHTML=e.innerHTML,e.replaceWith(t)}e.replaceWith(...e.childNodes)})},w=e=>{let t=e.closest("p, h1, h2, h3, h4, h5, h6, ul, ol, li");t&&t.after(e)},C=e=>{if((0,i.np)(e)){var t;(null===(t=e.parentElement)||void 0===t?void 0:t.childElementCount)!==1&&e.remove()}},A=e=>{if(e.src){if(e.src.startsWith("data:")){let t=(0,n.v9)(e.src),r=URL.createObjectURL(t);e.src=r}else e.src.startsWith("blob:")||e.src.startsWith("http")||e.remove()}}},48972:function(e,t,r){"use strict";r.d(t,{G8:function(){return s},Xb:function(){return a},np:function(){return l}});var i=r(30764),n=r(82631);let a=(e,t,r)=>{null!=r||(r=i.PW.fromSchema(t));let a=r.serializeFragment(e);return(0,n.S)(a)},o=["img"],l=e=>{var t;return!e.hasChildNodes()||!((null===(t=e.textContent)||void 0===t?void 0:t.trim())!=""||o.includes(e.nodeName))&&[...e.childNodes].every(e=>l(e))},s=(e,t,r)=>{let i=a(e,t,r),n=document.createElement("div");return n.appendChild(i),n.innerHTML}},65068:function(e,t,r){"use strict";r.d(t,{et:function(){return d},lv:function(){return c},vu:function(){return l}});var i=r(2784),n=r(15222),a=r(31818);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={borderColor:e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-blackAlpha-200)"};return t?{...r,bg:e?"var(--chakra-colors-trueblue-300)":"var(--chakra-colors-trueblue-50)",color:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-300)",hoverBg:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-100)",hoverColor:e?"var(--chakra-colors-trueblue-900)":"var(--chakra-colors-trueblue-600)"}:{...r,bg:e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-whiteAlpha-900)",color:e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-500)",hoverBg:e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",hoverColor:e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-gray-800)"}},l=e=>{let t=o(e);return{"--global-drag-handle-background":t.bg,"--global-drag-handle-color":t.color,"--global-drag-handle-hover-background":t.hoverBg,"--global-drag-handle-hover-color":t.hoverColor,"--global-drag-handle-border":t.borderColor}},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?o(e,!0):{bg:"var(--global-drag-handle-background)",color:"var(--global-drag-handle-color)",hoverBg:"var(--global-drag-handle-hover-background)",hoverColor:"var(--global-drag-handle-hover-color)",borderColor:"var(--global-drag-handle-border)"}},c=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,n.Yy)();return(0,i.useMemo)(()=>s(t,e),[t,e])},d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=c(e);return{height:a.fD,borderRadius:"sm",fontSize:"xs",px:2,shadow:"sm",bg:t.bg,color:t.color,borderColor:t.borderColor,_active:{shadow:"var(--global-drag-handle-shadow-inner)"},_hover:{color:t.hoverColor,background:t.hoverBg}}}},90921:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var i=r(26151),n=r(12971),a=r(31292),o=r(22156),l=r(54317);let s=(e,t)=>!!c(e),c=e=>{if(!(e.parent&&(0,l.KH)(e.parent)))return!0;let t=(0,n.nv)(e,l.KH)[0];if(!t)return!0;let r=e.doc.resolve(t.pos);return 0===Object.keys((0,o.gF)(r)).length},d=(e,t,r)=>{var o;let l=e.posAtCoords({left:t.clientX,top:t.clientY});if(!l||l.inside<0||!e.state.doc.resolve(l.pos))return null;let c=l.pos,d=e.state.doc.resolve(l.inside),u=e.state.doc.nodeAt(l.inside),h=e.state.doc.nodeAt(l.pos);if((null==u?void 0:u.type.name)==="smartLayout"&&(null==h?void 0:h.type.name)==="smartLayoutCell")return null;let g=(0,n.Ru)(d,a.E)[0];return g&&(c=l.inside,g.pos===c)||!c||r&&null==(c=(0,i.nj)(e.state.doc,c,r))||!s(e.state.doc.resolve(c),null===(o=e.dragging)||void 0===o?void 0:o.slice)?null:c}},31292:function(e,t,r){"use strict";r.d(t,{E:function(){return i},G:function(){return n}});let i=e=>"smartLayoutCell"===e.type.name,n=e=>"smartLayout"===e.type.name},82807:function(e,t,r){"use strict";var i,n;r.d(t,{W:function(){return i},y:function(){return a}}),(n=i||(i={})).Todo="todo",n.Bullet="bullet",n.Numbered="numbered";let a=e=>["todo","bullet","numbered"].includes(e.type.name)},57675:function(e,t,r){"use strict";r.d(t,{A:function(){return n},b:function(){return a}});var i=r(2784);let n=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[r,n]=(0,i.useState)(0),[a,o]=(0,i.useState)(0),[l,s]=(0,i.useState)(null);return{width:r,height:a,aspectRatio:l,setSize:(0,i.useCallback)(()=>{var r,i;let a=null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if(a&&l){let e=l.width/l.height,t=a.width,r=a.width/e;if(0===t||isNaN(t)||0===r||isNaN(r))return;n(t),o(r),s(e)}},[]),containerWrapperRef:e,imageRef:t}},a=e=>(0,i.useCallback)(t=>{if(!e)return;let r=null==e?void 0:e.view.domAtPos(t);if(!r){console.warn("scrollOnImageLoad could not domAtPos",{pos:t});return}let i=r.node.childNodes[r.offset];if(!i){console.warn("scrollOnImageLoad could not find node",{parentNode:r.node,offset:r.offset});return}let n=i.querySelector("[data-image-node-element] img");if(!n){console.warn("scrollOnImageLoad could not find <img> element");return}let a=()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run(),setTimeout(()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run()},1e3),n.removeEventListener("load",a)};n.addEventListener("load",a)},[e])},9160:function(e,t,r){"use strict";r.d(t,{s7:function(){return E},k3:function(){return I},HI:function(){return P},W6:function(){return U}});var i=r(52322),n=r(16556),a=r(81540),o=r(77533),l=r(38035),s=r(17993),c=r(28535),d=r(29117),u=r(82655),h=r(42946),g=r(49929),p=r(5879),m=r(2784),f=r(71383),x=r(15222),v=r(10232),b=r(73235),y=r(28165),j=r(42822);function w(){let e=(0,b._)(["\n      from {transform: rotate(-5deg) scale(1)}\n        to {transform: rotate(5deg) scale(1.2)}\n  "]);return w=function(){return e},e}let C=e=>{let{provider:t,color:r="gray"}=e,n=(0,y.F4)(w()),l="aiGenerated"===t?h.ddb:h.Y$T;return(0,i.jsxs)(j.M,{className:"image-loading-spinner",children:[(0,i.jsx)(a.$,{color:"".concat(r,".300"),thickness:"3px",size:"xl",position:"absolute",speed:"0.7s",emptyColor:"transparent"}),(0,i.jsx)(o.x,{color:"".concat(r,".400"),position:"absolute",lineHeight:"2",fontSize:"lg",animation:"".concat(n," infinite alternate 700ms ease-out"),children:(0,i.jsx)(g.G,{icon:l,fixedWidth:!0})})]})};var A=r(78112),k=r(62528),_=r(21800),S=r(63590);let P=e=>{let{removeBackground:t=!1,scootRight:r=!1}=e;return(0,i.jsxs)(n.Vp,{size:"sm",variant:"subtle",colorScheme:"gray",pos:"absolute",top:4,left:4,p:1,ml:r?28:0,children:[(0,i.jsx)(a.$,{color:"gray.600",size:"xs"}),t&&(0,i.jsx)(o.x,{as:"span",ml:1,children:(0,i.jsx)(p.cC,{id:"gVcJ1/"})})]})},E=()=>(0,i.jsx)(n.Vp,{size:"sm",variant:"subtle",colorScheme:"red",pos:"absolute",top:4,left:4,children:(0,i.jsxs)(n.Sn,{children:[(0,i.jsx)(g.G,{icon:h.RLE})," ",(0,i.jsx)(p.cC,{id:"rmh/nq"})]})}),I=(0,m.memo)(e=>{let{children:t,icon:r=u.VmB,isLoading:n=!1,isUploading:a=!1,hasUploadError:o=!1,isAccentImageDrawer:h=!1,loadingProvider:p,openEditBackgroundDrawer:b,onSelectAndFocus:y,defaultSource:j,hideQuickActions:w=!1,...I}=e,[U,R]=(0,m.useState)(!1),T=(0,v.B)(),O=(0,f.CG)(A.hN),M=(0,x.Yy)();return(0,m.useEffect)(()=>{j&&!1===(0,_.FD)(j)?R(!1):w||!O?R(!1):R(!0)},[j,w,O]),(0,i.jsxs)(l.k,{"data-testid":"media-placeholder","data-test-media-source":j,color:M?k.Z.DARK_COLOR:k.Z.LIGHT_COLOR,align:"center",justify:"center",p:3,bg:M?k.Z.DARK_BG:k.Z.LIGHT_BG,className:"placeholder","data-drag-handle":!0,"data-export-as-image":!0,position:"relative",cursor:"default",sx:{containerType:"size","@container (width < 150px) or (height < 140px)":{".quick-actions":{display:"none"},".ai-image-loading-spinner":{transform:"scale(0.5)"}}},onClick:()=>{O&&y&&y()},onDoubleClick:()=>{O&&(y&&y(),h||T({isOpen:!0}))},transition:"background-color 0.2s",...I,children:[!n&&(0,i.jsxs)(s.g,{pointerEvents:"none",children:[(0,i.jsx)(c.xu,{color:M?k.Z.DARK_ICON_COLOR:k.Z.LIGHT_ICON_COLOR,sx:{"@container (0px <= width <= 32px) or (height < 100px)":{fontSize:"sm"},"@container (32px < width <= 80px)":{fontSize:"2xl"},fontSize:"4xl"},children:(0,i.jsx)(g.G,{icon:r,fixedWidth:!0})}),U&&(0,i.jsx)(d.U,{pointerEvents:"auto",className:"quick-actions",children:(0,i.jsx)(S.N,{onSelectImage:y,isAccentImageDrawer:h,openEditBackgroundDrawer:b})})]}),n&&(0,i.jsx)(C,{provider:p}),a&&(0,i.jsx)(P,{}),o&&(0,i.jsx)(E,{}),t]})});I.displayName="MediaPlaceholderImage";let U={minW:16,minH:16,bg:"gray.200"}},63590:function(e,t,r){"use strict";r.d(t,{N:function(){return b}});var i=r(52322),n=r(28535),a=r(38035),o=r(32899),l=r(54933),s=r(49929),c=r(64253),d=r(5879),u=r(87254),h=r(2784),g=r(72842),p=r(15222),m=r(10232),f=r(9237),x=r(62528),v=r(99843);let b=e=>{let{onSelectImage:t,isAccentImageDrawer:r=!1,openEditBackgroundDrawer:o,...s}=e,{setMediaDrawerSourceKeyAction:c,setBackgroundDrawerSourceKeyAction:h}=(0,v.j)(),p=[{id:"image.custom",label:(0,i.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),c(g.in.key,!0),setTimeout(()=>(0,m.T)(!1),0)}},{id:"image.web",label:(0,i.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),c(g.QT.key,!0),setTimeout(()=>(0,m.T)(!1),0)}},{id:"image.ai-generated",label:(0,i.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),c(g.NX.key,!0),setTimeout(()=>(0,m.T)(!1),0)}}],x=[{id:"image.custom",label:(0,i.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),h(g.in.key),setTimeout(()=>null==o?void 0:o(!1),0)}},{id:"image.web",label:(0,i.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),h(g.QT.key),setTimeout(()=>null==o?void 0:o(!1),0)}},{id:"image.ai-generated",label:(0,i.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),h(g.NX.key),setTimeout(()=>null==o?void 0:o(!1),0)}}];return(0,i.jsx)(n.xu,{pos:"relative",zIndex:100,...s,children:(0,i.jsx)(a.k,{marginBottom:"-8px",onClick:f.UW,children:(r?x:p).map((e,t)=>(0,i.jsx)(y,{...e},t))})})},y=(0,h.memo)(e=>{let{label:t,ariaLabel:r,icon:n,id:a,onClick:l}=e,d=(0,p.Yy)();return(0,i.jsx)(c.kH,{label:t,placement:"top",closeOnClick:!0,children:(0,i.jsx)(o.h,{icon:(0,i.jsx)(s.G,{icon:n,size:"1x"}),"aria-label":r,"data-testid":"quick-action","data-test-media-source":a,variant:"ghost",rounded:"md",onMouseDown:l,width:"32px",height:"32px",color:d?x.Z.DARK_ICON_COLOR:x.Z.LIGHT_ICON_COLOR,display:"flex",alignItems:"center",justifyContent:"center",p:1,cursor:"pointer",_hover:"image.ai-generated"===a?d?{color:x.Z.DARK_AI_BTN_HOVER_COLOR,bg:x.Z.DARK_AI_BTN_HOVER_BG}:{color:x.Z.LIGHT_AI_BTN_HOVER_COLOR,bg:x.Z.LIGHT_AI_BTN_HOVER_BG}:d?{color:x.Z.DARK_BTN_HOVER_COLOR,bg:x.Z.DARK_BTN_HOVER_BG}:{color:x.Z.LIGHT_BTN_HOVER_COLOR,bg:x.Z.LIGHT_BTN_HOVER_BG},animation:"fadeIn",transition:"color 0.2s, background-color 0.2s"})})});y.displayName="QuickActionButton"},99843:function(e,t,r){"use strict";r.d(t,{j:function(){return s},q:function(){return l}});var i=r(2784),n=r(71383),a=r(40298),o=r(84561);let l=(e,t)=>(0,i.useCallback)(()=>{e.chain().focus().selectNodeAtPos(t(),!1).run(),setTimeout(()=>{e.view.focus()})},[e,t]),s=()=>{let e=(0,n.TL)(),t=(0,n.CG)(a.RF),r=(0,n.CG)(a.Fk),l=(0,n.CG)(o.TB);return{currentMediaDrawerSourceKey:t,isQuickAction:r,setMediaDrawerSourceKeyAction:(0,i.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e((0,a.c9)({sourceKey:t,overrideDefault:r}))},[e]),currentEditBackgroundDrawerSourceKey:l,setBackgroundDrawerSourceKeyAction:(0,i.useCallback)(t=>{e((0,o.df)({sourceKey:t}))},[e])}}},21800:function(e,t,r){"use strict";r.d(t,{FD:function(){return a},jn:function(){return i.j},qs:function(){return i.q}}),r(63590);var i=r(99843);let n=["image.custom","image.web","image.ai-generated","accent.theme"],a=e=>n.includes(e)},62528:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i={LIGHT_BG:"gray.200",LIGHT_COLOR:"gray.300",LIGHT_ICON_COLOR:"gray.400",LIGHT_BTN_HOVER_BG:"gray.100",LIGHT_BTN_HOVER_COLOR:"gray.500",LIGHT_AI_BTN_HOVER_BG:"trueblue.100",LIGHT_AI_BTN_HOVER_COLOR:"trueblue.300",DARK_BG:"gray.800",DARK_COLOR:"gray.600",DARK_ICON_COLOR:"gray.600",DARK_BTN_HOVER_BG:"gray.700",DARK_BTN_HOVER_COLOR:"gray.400",DARK_AI_BTN_HOVER_BG:"trueblue.800",DARK_AI_BTN_HOVER_COLOR:"trueblue.300",LIGHT_GALLERY_BG:"gray.100",DARK_GALLERY_BG:"gray.900"}},50958:function(e,t,r){"use strict";r.d(t,{R:function(){return c}});var i=r(37243),n=r(9355),a=r(97912),o=r(46007),l=r(44415),s=r(92315);let c=i.hj.create({name:"mediaUpload",addCommands(){return{cancelImageUploadsOnLoad:()=>e=>{let{tr:t,state:r}=e;return!!this.editor.isEditable&&((0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.uploadStatus===n.D.Uploading)}).forEach(e=>{let r=(0,s.XU)(e.node),i=(0,s.j6)(e.node,(null==r?void 0:r.src)?{uploadStatus:n.D.Done}:{tempUrl:null,uploadStatus:n.D.Error});t.setNodeMarkup(e.pos,null,i).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0)},uploadBlobsOnLoad:()=>e=>{let{tr:t,state:r}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("blob:")}).forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let i=r.src,n=(0,s.j6)(e.node,(0,s.BF)(i));t.setNodeMarkup(e.pos,null,n).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.wG)(this.editor,i)}),!0)},uploadRemoteUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("http")&&(0,a.dW)(t.src)&&t.uploadStatus!==n.D.Done}).forEach(e=>{var r;let i=(0,s.XU)(e.node);if(!i)return;let a=i.src,o=(0,s.j6)(e.node,{uploadStatus:n.D.Uploading,source:null!==(r=i.source)&&void 0!==r?r:"image.custom",tempUrl:a});t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,a,void 0,!0)}),!0)},uploadDataUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;return!!this.storage.orgId&&!!this.editor.isEditable&&((0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("data:")}).forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let i=(0,a.v9)(r.src),n=URL.createObjectURL(i),o=(0,s.j6)(e.node,(0,s.BF)(n));t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,n,i)}),!0)},initializeUploadExtension:e=>t=>{let{chain:r}=t;return this.storage.orgId=e,r().cancelImageUploadsOnLoad().uploadBlobsOnLoad().uploadDataUrlsOnLoad().uploadRemoteUrlsOnLoad().revokeAllImageTempURLs().run(),!0},revokeAllImageTempURLs:()=>e=>{let{tr:t,state:r}=e;return(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.tempUrl&&t.src&&t.uploadStatus===n.D.Done)}).forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},revokeImageTempURLs:e=>t=>{let{tr:r,state:n}=t;return(0,i.N2)(n.doc,t=>{let r=(0,s.XU)(t);return!!r&&r.tempUrl===e}).forEach(e=>{let t=(0,s.j6)(e.node,{tempUrl:null});r.setNodeMarkup(e.pos,null,t).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),URL.revokeObjectURL(e),!0},updateImageOnUploadFailure:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{let{tr:i,state:a}=r,o=a.doc.nodeAt(e);if(!o||!o.attrs)return!1;let l=(0,s.XU)(o),c=t?{...l,uploadStatus:n.D.Done}:(0,s.gM)({isError:!0}),d=(0,s.j6)(o,c);return i.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}},updateImageOnUploadSuccess:(e,t)=>r=>{let{tr:i,state:n}=r,a=n.doc.nodeAt(e);if(!a||!a.attrs)return!1;let l=(0,s.gM)({isError:!1,result:t,attrs:a.attrs}),c=(0,o.UZ)(l),d=(0,s.j6)(a,c);return i.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}}},addStorage:()=>({orgId:void 0,completedUploads:{}}),addProseMirrorPlugins(){return[(0,l.SZ)(this.editor)]}})},75325:function(e,t,r){"use strict";r.d(t,{B0:function(){return n.B0},Ns:function(){return n.Ns},QZ:function(){return n.QZ},R:function(){return i.R},XU:function(){return n.XU},f8:function(){return n.f8},gM:function(){return n.gM},j6:function(){return n.j6}});var i=r(50958),n=r(92315)},92123:function(e,t,r){"use strict";r.d(t,{j:function(){return u},x:function(){return h}});var i=r(37164),n=r(72842),a=r(9355),o=r(91492),l=r(51161),s=r(31452),c=r(97912),d=r(92315);let u=(e,t,r,l)=>{var s;let u;let h={type:o.E.IMAGE,source:n.in.key,image:{uploadStatus:a.D.Uploading,source:n.in.key}};(0,c.Ns)(r.type)?(h.image.showPlaceholder=!0,u="HEIC_tempId_".concat((0,i.x0)())):u=URL.createObjectURL(r),h.image.tempUrl=u;let g=(t,r)=>{if(!u&&!r)return;let i=u||r;(0,d.Ns)(e,i,t)};t.setNodeAttribute(l,"background",h).setMeta("imageUploadUpdateAttrs",!0),(0,n.cT)(r,null===(s=e.storage.mediaUpload)||void 0===s?void 0:s.orgId,{onOriginalFileUpload:g,onUploadComplete:g,onUploadFailed:t=>{(0,d.f8)(e,u,t),URL.revokeObjectURL(u)}})},h=function(e,t,r){let i=t.map(t=>(0,c.fU)(t.type)?g(t,e):(0,s.kO)(t.type,(0,s.mD)(t))?p(t,e):null).filter(e=>null!==e);if(0==i.length)return;let n=i.map(e=>e.content),a=e.state.doc.resolve(r),o=a.parent.inlineContent,d=r;o&&0===a.parentOffset?d=r-1:o&&null===a.nodeAfter&&(d=r+1),e.chain().insertContentAt(d,n,{updateSelection:!1}).command(e=>{var t;let{tr:r}=e,i=r.doc.resolve(r.mapping.map(d)),n=(0,l.t)(r.doc.resolve(i.pos-((null===(t=i.nodeBefore)||void 0===t?void 0:t.nodeSize)||1)));return n&&r.setSelection(n),!0}).run(),i.forEach(e=>{e.upload()}),setTimeout(()=>{e.commands.scrollIntoView()},200)},g=(e,t)=>{let r={uploadStatus:a.D.Uploading,source:n.in.key};(0,c.Ns)(e.type)?(r.showPlaceholder=!0,r.tempUrl="HEIC_tempId_".concat((0,i.x0)())):r.tempUrl=URL.createObjectURL(e);let o=(e,i)=>{let n=r.tempUrl;(n||i)&&(0,d.Ns)(t,n||i,e)},l={onOriginalFileUpload:o,onUploadComplete:o,onUploadFailed:e=>{r.tempUrl&&((0,d.f8)(t,r.tempUrl,e),URL.revokeObjectURL(r.tempUrl))}};return{name:e.name,content:{type:"image",attrs:r},upload:()=>{var r;return(0,n.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,l)}}},p=(e,t)=>{let r=URL.createObjectURL(e),i={...(0,d.B0)(e),url:r},a=(e,i)=>{(r||i)&&(0,d.QZ)(t,r||i,e)},o={onOriginalFileUpload:a,onUploadComplete:a};return{name:e.name,content:{type:"embed",attrs:i},upload:()=>{var r;return(0,n.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,o,"node","doc")}}}},44415:function(e,t,r){"use strict";r.d(t,{SZ:function(){return p},RC:function(){return v},bC:function(){return m},wG:function(){return h},Sm:function(){return u}});var i=r(27191),n=r(72842),a=r(31452),o=r(97912),l=r(90921),s=r(92123);let c=e=>RegExp("^\\s*<svg.*<\\/svg>\\s*$","s").test(e);var d=r(92315);let u=(e,t,r,i)=>{let a=(r,i)=>{(0,d.Ns)(e,i||t,r)},o={onOriginalFileUpload:a,onUploadComplete:a,onUploadFailed:r=>{(0,d.f8)(e,t,r,i)}};r?(0,n.cT)(r,e.storage.mediaUpload.orgId,o):(0,n.WY)(t,e.storage.mediaUpload.orgId,o)},h=async(e,t)=>{try{let r=await fetch(t),i=await r.blob(),n=new File([i],"blob.png",{type:i.type});u(e,t,n)}catch(r){(0,d.f8)(e,t,r)}},g=e=>(0,o.fU)(e.type)||(0,a.kO)(e.type,(0,a.mD)(e)),p=e=>new i.Sy({props:{transformPasted:t=>(t.content.descendants(t=>{if("image"===t.type.name&&t.attrs.tempUrl){let r=e.storage.mediaUpload.completedUploads[t.attrs.tempUrl];r&&Object.assign(t.attrs,(0,d.j6)(t,(0,d.gM)({isError:!1,result:r})))}else if("image"===t.type.name&&t.attrs.src&&!(0,o.S6)(t.attrs.src)){let r,i=t.attrs.src;if(i.startsWith("blob:")){Object.assign(t.attrs,(0,d.BF)(i)),h(e,i);return}i.startsWith("data:")&&(r=(0,o.v9)(t.attrs.src),i=URL.createObjectURL(r)),Object.assign(t.attrs,(0,d.BF)(i)),u(e,i,r)}}),t),handlePaste:(t,r,i)=>x(e,t,r,i),handleDOMEvents:{drop:(t,r)=>f(e,t,r)}}}),m=(e,t)=>{var r;if(!e.clipboardData)return null;let i=e.clipboardData.getData("text/html"),n=e.clipboardData.getData("text/plain");if(n&&!i&&c(n))return[(0,o.K$)(n)];let a=Array.prototype.slice.call(e.clipboardData.items);return a.some(e=>"text/html"===e.type)&&(t.content.childCount>1||(null===(r=t.content.firstChild)||void 0===r?void 0:r.type.name)!=="image")?null:a.map(e=>e.getAsFile()).filter(e=>!!e).filter(g)},f=(e,t,r)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let i=v(r).filter(g);if(0===i.length)return!1;let n=(0,l.Z)(t,r);return!!n&&(r.preventDefault(),(0,s.x)(e,i,n),!0)},x=(e,t,r,i)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let n=m(r,i);if(!n||0===n.length)return!1;let{selection:a}=t.state,o=a.from;return a.empty||e.commands.deleteSelection(),(0,s.x)(e,n,o),!0};function v(e){let t=[],r=e.target;if(e.dataTransfer){let r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else r&&r.files&&(t=r.files);return Array.prototype.slice.call(t)}},92315:function(e,t,r){"use strict";r.d(t,{B0:function(){return w},BF:function(){return g},Ns:function(){return v},QZ:function(){return j},XU:function(){return m},f8:function(){return b},gM:function(){return h},j6:function(){return p}});var i=r(37243),n=r(72579),a=r.n(n),o=r(98537),l=r.n(o),s=r(16765),c=r.n(s),d=r(9355),u=r(31452);let h=e=>{let{result:t,isError:r,attrs:i}=e;if(r)return{uploadStatus:d.D.Error,showPlaceholder:!0,tempUrl:null,src:null};let{fullResults:n,...a}=t;return{uploadStatus:d.D.Done,showPlaceholder:!1,source:(null==i?void 0:i.source)||"image.custom",...a}},g=e=>({tempUrl:e,uploadStatus:d.D.Uploading,src:null,source:"image.custom"}),p=(e,t)=>{let r=e.type.spec.imageKeyPath,i=r?c()({},r,t):t;return l()({},e.attrs,i)},m=e=>{let t=e.type.spec.imageKeyPath;return t||"image"===e.type.name?t?a()(e.attrs,t,e.attrs):e.attrs:null},f=(e,t)=>(0,i.N2)(e.state.doc,e=>{let r=m(e);return[null==r?void 0:r.tempUrl,null==r?void 0:r.src].includes(t)}),x=(e,t)=>(0,i.N2)(e.state.doc,e=>"embed"===e.type.name&&e.attrs.url===t),v=(e,t,r)=>{e.parentEditor&&(e=e.parentEditor),t&&y(e,r,t);let i=f(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{let{pos:i}=t;e.commands.updateImageOnUploadSuccess(i,r)}),setTimeout(()=>{e.commands.revokeImageTempURLs(t)},3e4)},b=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.parentEditor&&(e=e.parentEditor);let n=f(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>e.commands.updateImageOnUploadFailure(t.pos,i)),console.error(r)},y=(e,t,r)=>{e.storage.mediaUpload.completedUploads[r]=t},j=(e,t,r)=>{let i=x(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{e.commands.updateAttributesAtPos(t.pos,{url:r.src,sourceUrl:r.src,embed:{url:r.src},thumbnail:{src:r.thumbnail,uploadStatus:d.D.Done,showPlaceholder:!1}})})},w=e=>({meta:{title:e.name,description:(0,u.td)(e.size,1)},thumbnail:{uploadStatus:d.D.Uploading,showPlaceholder:!0},source:"embed.pdf"})},51161:function(e,t,r){"use strict";r.d(t,{G:function(){return o},t:function(){return function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{doc:a}=t,o=r<0;if(!t.nodeAfter)return null;if(t.nodeAfter.inlineContent)return n.Y1.near(a.resolve(t.pos+(o?t.nodeAfter.content.size+1:0)),r);let l=(0,i.N2)(t.nodeAfter,e=>e.inlineContent||n.qv.isSelectable(e));if(!l||0===l.length)return n.qv.create(a,t.pos);let s=t.start(t.depth+1)+(o?l[l.length-1].pos:l[0].pos);return e(a.resolve(s),r)}}});var i=r(37243),n=r(27191),a=r(26151);let o=(e,t)=>{var r;let i;let n=e.doc,o=e.steps.length-1,l=e.steps[o];if(!l||!(l instanceof a.Pu||l instanceof a.FC)||0===l.slice.content.size)return null;let s=t||(null===(r=l.slice.content.child(l.slice.openStart))||void 0===r?void 0:r.type.name);if(e.mapping.maps[o].forEach((e,t,r)=>{null==i&&(i=r)}),null==i)return null;let c=n.nodeAt(i);if(c&&c.type.name===s)return n.resolve(i);if(!s)return console.warn("[getInsertedNodePos] Error selecting node, type not found in slice.lastChild",i),null;for(let t=l.from;t<e.mapping.map(l.to);t++){let r=e.doc.nodeAt(t);if(r&&r.type.name===s)return n.resolve(t)}return null}},85329:function(e,t,r){"use strict";r.d(t,{J:function(){return h}});var i=r(52322),n=r(47443),a=r(52929),o=r(17993),l=r(38035),s=r(82655),c=r(49929),d=r(87254),u=r(91710);r(65331),r(41779),r(24472);let h=e=>{let{uppyInstance:t,dropHereText:r=d.ag._({id:"mgPDos",values:{0:"%{browse}"}}),tipText:h,customHeight:g,errorMessage:p,...m}=e;return(0,i.jsxs)(o.g,{align:"stretch",spacing:4,pos:"relative",...m,children:[(0,i.jsx)(l.k,{pos:"absolute",inset:0,justify:"center",align:"center",zIndex:1,pointerEvents:"none",mt:-14,color:"gray.600",children:(0,i.jsx)(c.G,{icon:s.PLj,size:"3x"})}),(0,i.jsx)(u.v0,{width:"100%",height:g||"100%",note:h||void 0,uppy:t,locale:{strings:{dropHereOr:r,browse:d.ag._({id:"wZ9s+A"})}}}),p&&(0,i.jsxs)(n.b,{status:"error",children:[(0,i.jsx)(a.z,{}),p]})]})}},5636:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});let i={},n=async e=>{let t=i[e];if(t&&t.expires&&+new Date(t.expires)-3e5>Date.now())return i[e];let r=await fetch("/api/transloadit/signature",{method:"POST",body:JSON.stringify({templateId:e})}),{signature:n,expires:a}=await r.json();return n&&a?(i[e]={signature:n,expires:a},i[e]):(console.error("Error getting Transloadit signature"),{signature:"",expires:""})}},46238:function(e,t,r){"use strict";r.d(t,{h:function(){return c}});var i=r(30733),n=r.n(i),a=r(2784);class o{observe(e,t){this.observer?(this.observer.observe(e),this.observedElements.set(e,t)):t(s)}unobserve(e){this.observer&&(this.observer.unobserve(e),this.observedElements.delete(e),this.nextTickCallbacks.delete(e))}handleResize(e){let t=!1;for(let r of e){let e=this.observedElements.get(r.target);e&&(t=!0,this.nextTickCallbacks.set(r.target,()=>{e(r.contentRect)}))}t&&this.queueProcess()}queueProcess(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.frameId=requestAnimationFrame(()=>{for(let e of this.nextTickCallbacks.values())e();this.frameId=null})}constructor(){this.observedElements=new Map,this.nextTickCallbacks=new Map,this.frameId=null,this.observer=null,"undefined"!=typeof ResizeObserver&&(this.observer=new ResizeObserver(e=>this.handleResize(e)))}}let l=n()(()=>new o),s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function c(e){let t=(0,a.useRef)(null),[{width:r,height:i},n]=(0,a.useState)(s);return(0,a.useEffect)(()=>{let e=t.current;return e&&l().observe(e,n),()=>{e&&l().unobserve(e)}},[e]),{ref:t,width:r,height:i}}},31452:function(e,t,r){"use strict";r.d(t,{O7:function(){return o},S9:function(){return s},kO:function(){return l},mD:function(){return d},td:function(){return c}});var i=r(13326),n=r(56974),a=r.n(n);function o(e){return e===i.Z.pdf}function l(e,t){var r,n;return o(e)||(r=e)===i.Z.doc||r===i.Z.docx||"ppt"===(n=(n=t).toLocaleLowerCase())||"pptx"===n}function s(e){return"otf"===(e=e.toLocaleLowerCase())||"ttf"===e}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r])},d=e=>e.name&&a()(e.name.split("."))||""},24472:function(){}}]);
//# sourceMappingURL=4332-27da013e11e70548.js.map