(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6749,5742,2085,8225],{59246:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return s},noSSR:function(){return o}});let r=n(43219);n(52322),n(2784);let i=r._(n(84204));function a(e){return{default:(null==e?void 0:e.default)||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function s(e,t){let n=i.default,r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let s=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?n({...r,loader:()=>null!=s?s().then(a):Promise.resolve(a(()=>null))}):(delete r.webpack,delete r.modules,o(n,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},57604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=n(43219)._(n(2784)).default.createContext(null)},84204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return p}});let r=n(43219)._(n(2784)),i=n(57604),a=[],o=[],s=!1;function l(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),a=null;function l(){if(!a){let t=new d(e,n);a={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return a.promise()}if(!s){let e=n.webpack?n.webpack():n.modules;e&&o.push(t=>{for(let n of e)if(t.includes(n))return l()})}function c(e,t){!function(){l();let e=r.default.useContext(i.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach(t=>{e(t)})}();let o=r.default.useSyncExternalStore(a.subscribe,a.getCurrentValue,a.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:a.retry}),[]),r.default.useMemo(()=>{var t;return o.loading||o.error?r.default.createElement(n.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:a.retry}):o.loaded?r.default.createElement((t=o.loaded)&&t.default?t.default:t,e):null},[e,o])}return c.preload=()=>l(),c.displayName="LoadableComponent",r.default.forwardRef(c)}(l,e)}function u(e,t){let n=[];for(;e.length;){let r=e.pop();n.push(r(t))}return Promise.all(n).then(()=>{if(e.length)return u(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{u(a).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(s=!0,t());u(o,e).then(n,n)})),window.__NEXT_PRELOADREADY=c.preloadReady;let p=c},14568:function(e,t,n){"use strict";let r;n.d(t,{z:function(){return eU}});var i=n(52322);n(56414);var a=n(55671),o=n(62202),s=n(78360),l=n(81674),d=n(64253),c=n(97729),u=n.n(c),p=n(5632),h=n(2784),g=n(43997),f=n(95405),m=n(12483),_=n(69971),v=n(49414);let y=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class b extends h.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===f.v.APPLICATION_ENVIRONMENT)throw e;m.Tb(e,{extra:{info:null==t?void 0:t.componentStack}})}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===f.v.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){if(this.props.unhandledRejectionFilter(e)){var t;let n=(null===(t=e.reason)||void 0===t?void 0:t.message)||"";this.setState({hasError:!0,errMessage:n})}}render(){let e=!0===y(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,i.jsxs)(i.Fragment,{children:[this.state.hasError&&(0,i.jsx)(v.q,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}b.defaultProps={unhandledRejectionFilter:e=>{var t;return!!y((null===(t=e.reason)||void 0===t?void 0:t.message)||"")||e.reason instanceof _.YBv&&!1===document.hidden||e.reason instanceof _.R5s}},n(61036),n(62376),n(6991),n(76298),n(4466),n(43839),n(40917);var w=n(14625),C=n(69962),E=n(60094),I=n(54901),S=n(58974),x=n(16202),A=n(71383);let P=e=>{console.debug("%c[useApiRefetch] Refetching due to ".concat(e),"background-color: aqua"),(0,I.WQ)().reFetchObservableQueries()},k=()=>{let e=(0,A.qr)(),t=(0,h.useRef)(!1),n=(0,h.useRef)(null),r=(0,h.useCallback)(e=>{n.current&&(clearTimeout(n.current),n.current=null),n.current=setTimeout(()=>{P(e),n.current=null},3e3)},[]),i=(0,h.useCallback)(()=>(0,x.aF)(e.getState()).backgrounded,[e]);(0,S.js)("online",(0,h.useCallback)(()=>{if(i()){t.current=!0;return}r("online")},[r,i])),(0,S.js)("wakeup",(0,h.useCallback)(()=>{if(i()){t.current=!0;return}r("wakeup")},[r,i])),(0,S.js)("foreground",(0,h.useCallback)(()=>{t.current&&(r("foreground"),t.current=!1)},[r]))},T=Number(new URLSearchParams(f.v.IS_CLIENT_SIDE?window.location.search:"").get("MAX_BACKGROUND_TIME_ALLOWED"))||432e5,O=()=>{let e=(0,h.useRef)(!1),t=(0,h.useCallback)(t=>{t.timeInBackground&&!e.current&&t.timeInBackground>T&&(e.current=!0,window.location.reload())},[]);(0,S.js)("foreground",t)},j=(0,h.memo)(()=>((0,S.i6)(),k(),O(),null));j.displayName="ConnectionMonitor";var D=n(3892),N=n(52138),L=n(30240),R=n(70212),U=n(99092),M=n(31601),H=n(97134);let F=(e,t)=>{U.H.init(f.v.HIGHLIGHT_PROJECT_ID,{environment:f.v.APPLICATION_ENVIRONMENT,sessionShortcut:!!t&&"shift+command+0",enableStrictPrivacy:e,enableSegmentIntegration:!0,networkRecording:{enabled:!0,recordHeadersAndBody:!0}}),M.co.loadSdkPromise.then(e=>{e&&e.addSourceMiddleware(U.LZ)})},G=e=>{let{children:t}=e,{user:n,anonymousUser:r,isGammaOrgUser:a,isUserLoading:o}=(0,H.SE)(),{enabled:s,enableStrictPrivacy:l}=(0,L.ye)("highlight");return(0,h.useEffect)(()=>{s&&!o&&n&&F(l,a)},[l,s,a,o,n]),(0,h.useEffect)(()=>{if(!o){if(n){let{id:e,displayName:t,email:r,profileImageUrl:i}=n;U.H.identify(e,{highlightDisplayName:t,email:r,avatar:i})}else if(null==r?void 0:r.id){let{id:e,displayName:t}=r;U.H.identify("",{anonDisplayName:t||"",anonId:e})}}},[n,r,o]),(0,i.jsx)(i.Fragment,{children:t})};var B=n(36660),q=n(87254),Y=n(5879),K=n(78316),V=n(66576),W=n(29469);let z=e=>{let{children:t}=e;return(0,V.K)(),(0,K.b)(),(0,W.U)(),(0,i.jsx)(Y.bd,{i18n:q.ag,children:t})};var X=n(83639),Q=n(53650),J=n(69341),Z=n(89328),$=n(9010),ee=n(49803),et=n(30733),en=n.n(et),er=n(12753);class ei{async enable(){try{await window.serwist.register()}catch(e){console.error("Error registering Serwist service worker:",e)}}async disable(){try{for(let e of(await navigator.serviceWorker.getRegistrations()))console.log("Unregistering service worker:",e),await e.unregister()}catch(e){console.error("Error unregistering Serwist service worker:",e)}try{await this.clearCaches()}catch(e){console.error("Error clearing caches",e)}this.store.dispatch((0,er.Dz)())}async debug(){let e=await window.caches.keys();return{cache:(await Promise.all(e.map(async e=>{let t=await window.caches.open(e).then(e=>e.matchAll());return[e,t]}))).reduce((e,t)=>(e[t[0]]=t[1],e),{})}}async gc(e){}async clearCaches(){try{if(!window.caches)return;for(let e of(await window.caches.keys()))await window.caches.delete(e);console.log("Serwist caches cleared successfully")}catch(e){console.error("Error clearing caches",e)}}constructor(){this.store=(0,A.bh)()}}let ea=en()(()=>new ei);var eo=n(43848),es=n(31240),el=n(54073),ed=n.n(el),ec=n(18149),eu=n.n(ec);let ep="offline-state-v1",eh=e=>{let t=eg(),n=null;t&&(console.log("[Offline] LOADING PERSISTED STATE",t),e.dispatch((0,er.m0)(t)),n=t);let r=ed()(e=>{ef(e)},500);return e.subscribe(()=>{let t=(0,er.S_)(e.getState());if(n!==t){if(performance.now(),eu()(n,t)){n=t,performance.now();return}n=t,console.log("[Offline] PERSISTING STATE",t),r(t)}})},eg=()=>{try{let e=localStorage.getItem(ep);return JSON.parse(e)}catch(e){return null}},ef=async e=>{try{let t=JSON.stringify(e);localStorage.setItem(ep,t)}catch(e){console.error("Error persisting state",e)}},em="undefined"!=typeof navigator&&"serviceWorker"in navigator&&"indexedDB"in window&&"localStorage"in window&&es.p;class e_{get enabled(){return(0,er.aL)(this.store.getState())}async init(){if(!em){console.log("Offline mode is not supported");return}this.cleanupFns.push(eh(this.store)),await this.notifyCaches(this.enabled),console.log("OfflineManager caches initialized",this.enabled),this.setupFeatureFlagSubscription(),this.setupConnectionListener(),console.log("OfflineManager subscriptions initialized")}setupConnectionListener(){let e=Z.L.on("offline",()=>{this.apolloOfflineCache.useOfflineCache()}),t=Z.L.on("online",()=>{this.apolloOfflineCache.backOnline()});this.cleanupFns.push(t),this.cleanupFns.push(e)}setupFeatureFlagSubscription(){L.VH.initializePromise.then(()=>{let e=L.VH.get("offline");e!==this.enabled&&(e?this.enable():this.disable()),this.cleanupFns.push(L.VH.subscribe("offline",e=>{e?this.enable():this.disable()}))})}async enable(){if(!em){console.log("Offline mode is not supported");return}if(this.enabled){console.warn("Offline mode already enabled");return}let{user:e,status:t}=await (0,$.r)({returnOfflineUser:!1});if("loggedIn"!==t){console.warn("Offline mode user not logged in");return}await this.notifyCaches(!0),this.store.dispatch((0,er.RB)({user:e,lastSynced:new Date().toISOString()}))}async disable(){if(!em){console.log("Offline mode is not supported");return}if(!this.enabled){console.warn("Offline mode already disabled");return}await this.notifyCaches(!1),this.store.dispatch((0,er.Iq)())}async notifyCaches(e){return Promise.all(e?this.caches.map(e=>e.enable()):this.caches.map(e=>e.disable()))}cleanup(){for(;this.cleanupFns.length>0;){var e;null===(e=this.cleanupFns.pop())||void 0===e||e()}}constructor(){this.store=(0,A.bh)(),this.serwistOfflineCache=ea(),this.ydocOfflineCache=(0,eo.H)(),this.apolloOfflineCache=(0,ee.a)(),this.caches=[this.serwistOfflineCache,this.ydocOfflineCache,this.apolloOfflineCache],this.cleanupFns=[]}}let ev=async()=>{if(r)throw Error("OfflineManager already initialized");try{r=new e_,await r.init()}catch(e){console.error("Error initializing OfflineManager",e)}};window.getOfflineManagerState=()=>(0,A.bh)().getState().OfflineManager,window.getOfflineManager=()=>r;var ey=n(44007),eb=n(1384),ew=n(55516);let eC="no_org_id",eE=e=>{let{children:t}=e;(0,eb.iZ)();let{user:n,anonymousUser:r,currentWorkspace:a,isUserLoading:o}=(0,H.SE)();return(0,h.useEffect)(()=>{let e=(0,ew.K)();(0,ey.$n)(e.get()),e.fetch().then(ey.$n).catch(()=>{})},[]),(0,h.useEffect)(()=>{let e;if(!o){if(n){let{id:t,email:r}=n,i=!!r&&r.endsWith("@gamma.app");e={userId:t,isGammaUser:i,userOrgId:(null==a?void 0:a.id)||eC,anonymousUser:!1,gammaUserFirstName:i?n.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:eC,anonymousUser:!0,gammaUserFirstName:""};(0,ey.$n)(e)}},[o,n,r,a]),(0,i.jsx)(i.Fragment,{children:t})};var eI=n(87345),eS=n(29243),ex=n(76009),eA=n(69876),eP=n(26073),ek=n(92035),eT=n(28817),eO=n(19358),ej=n(69465);l.vc.autoAddCss=!1;let eD=(0,A.bh)();ev();let eN=(0,_.RqP)({supportOfflineMode:!0}),eL=(0,_.PGq)(),eR=(0,o.B1)(d.qZ,{styles:{global:{".ProseMirror":{outline:"0 none"}}}});(0,eI.s)(window,eR),(0,eT.Lq)(),Q.F7.initialize(),(0,B.lt)(),M.co.init(),D.fy.init({clientToken:f.v.DATADOG_CLIENT_TOKEN,service:"gamma-client",env:f.v.APPLICATION_ENVIRONMENT.replace("production","prod"),site:"datadoghq.com",forwardErrorsToLogs:!1,forwardConsoleLogs:[],sessionSampleRate:100}),(0,X.S1)(),(0,N.u7)(),(0,eA.a)("appMainBundleLoaded"),L.VH.get("debugLogging")||(window.console.debug=()=>{});let eU=e=>function(t){return(0,i.jsx)(eM,{children:(0,i.jsx)(e,{...t})})},eM=e=>{let{children:t}=e,n=(0,p.useRouter)();(0,eS.l)(),(0,eO.k)(),(0,w.U)(),(0,h.useEffect)(()=>{let e=(e,t)=>{let{shallow:n}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(n?"with":"without"," shallow routing"))};return n.events.on("routeChangeStart",e),()=>{n.events.off("routeChangeStart",e)}},[n]);let r=(0,eP.aY)();return(0,i.jsx)(g.zt,{store:eD,children:(0,i.jsx)(z,{children:(0,i.jsx)(s.x,{theme:eR,resetCSS:!0,children:(0,i.jsx)(b,{children:(0,i.jsx)(a.e,{client:eN,children:(0,i.jsxs)(_.mdV,{client:eL,children:[(0,i.jsx)(eF,{}),(0,i.jsx)(C.H6,{}),(0,i.jsx)(X.GQ,{}),(0,i.jsx)(E.S,{}),(0,i.jsx)(j,{}),(0,i.jsxs)(H.fS,{children:[(0,i.jsx)(ex.qA,{children:(0,i.jsx)(L.dF,{children:(0,i.jsx)(J.S,{children:(0,i.jsx)(eE,{children:(0,i.jsx)(G,{children:(0,i.jsx)(eP.dv,{value:r,children:(0,i.jsx)(R.u,{children:t})})})})})})}),(0,i.jsx)(L.MG,{})]})]})})})})})})},eH="A new medium for presenting ideas, powered by AI. Beautiful, engaging content with none of the formatting and design work.",eF=()=>{let e=f.v.APPLICATION_ENVIRONMENT;return(0,i.jsxs)(u(),{children:[(0,i.jsx)("title",{children:"Gamma"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,i.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,i.jsx)("link",{rel:"shortcut icon",href:"production"===e?"/favicons/favicon-192.svg":"staging"===e?"/favicons/favicon_staging.jpg":"/favicons/favicon_local.jpg"}),(0,i.jsx)("meta",{content:eH,name:"description"},"description"),(0,i.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,i.jsx)("meta",{content:eH,property:"og:description"},"og:description"),(0,i.jsx)("meta",{content:f.v.OG_IMAGE_URL,property:"og:image"},"og:image"),(0,i.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,i.jsx)("meta",{content:eH,property:"twitter:description"},"twitter:description"),(0,i.jsx)("meta",{content:f.v.OG_IMAGE_URL,property:"twitter:image"},"twitter:image"),(0,i.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,i.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,i.jsx)("meta",{name:"google",content:"notranslate"}),(0,i.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,i.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,ek.l6)()&&!(0,ej.wg)()&&(0,i.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,i.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},49414:function(e,t,n){"use strict";n.d(t,{q:function(){return C}});var r=n(52322),i=n(38035),a=n(77533),o=n(49259),s=n(87436),l=n(95897),d=n(28535),c=n(89511),u=n(11121),p=n(44438),h=n(42822),g=n(62614),f=n(75009),m=n(64253),_=n(5879),v=n(23491),y=n(50476);let b=(0,r.jsx)(_.cC,{id:"HiX9QN"}),w={bgImage:"radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 130px 80px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 160px 120px, #ddd, rgba(0,0,0,0))",bgRepeat:"repeat",bgSize:"200px 200px",transform:"translate(-50%,-50%)",borderRadius:{base:0,lg:"100px"},pos:"relative",maxW:"8xl",maxH:"5xl",minH:{base:0,lg:"5xl"}},C=e=>{let{errMessage:t=b,showDisclosure:n=!1,opacity:C=1,starOverlay:E=!0,backgroundColor:I=m.qZ.colors.trueblue[900],...S}=e;return(0,r.jsx)(i.k,{"data-error-component":!0,w:"100vw",h:"100vh",overflow:"hidden",zIndex:99999,backgroundColor:(0,v.tT)(I,C),...S,children:(0,r.jsx)(i.k,{...E?w:{},justifyContent:"center",alignItems:"center",flex:1,p:[4,16],left:"50%",top:"50%",children:(0,r.jsxs)(y.qX,{lede:"",title:(0,r.jsx)(_.cC,{id:"HbR60U"}),stackProps:{shadow:"lg-dark",position:"relative"},children:[(0,r.jsx)(a.x,{children:(0,r.jsx)(_.cC,{id:"1gm+lP"})}),n&&(0,r.jsx)(o.U,{allowToggle:!0,pt:4,children:(0,r.jsxs)(s.Q,{children:[(0,r.jsxs)(l.K,{px:0,_hover:{bgColor:"none"},borderStyle:"none",children:[(0,r.jsx)(d.xu,{flex:"1",textAlign:"left",children:(0,r.jsx)(_.cC,{id:"qug3k/"})}),(0,r.jsx)(c.X,{})]}),(0,r.jsx)(u.H,{pb:4,children:(0,r.jsx)(p.E,{colorScheme:"red",children:t})})]})}),(0,r.jsx)(h.M,{children:(0,r.jsx)(g.z,{variant:"solid",size:"lg",m:6,onClick:()=>{window.location.reload()},children:(0,r.jsx)(_.cC,{id:"C6f2hU"})})}),(0,r.jsx)(f.E,{pos:"absolute",w:36,bottom:"calc(-100% + 120px)",right:-12,src:"/_next/static/media/Sal-Asteroid-Parachute.ad317576.png",pointerEvents:"none",opacity:{base:0,md:1}})]})})})}},14625:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(2784),i=n(95405),a=n(31601),o=n(47211);let s=()=>{let e=(0,r.useRef)(!1),t=(0,r.useRef)(new Map);(0,r.useEffect)(()=>{if("production"!==i.v.APPLICATION_ENVIRONMENT)return;let n=()=>{if(e.current)return;let n=t.current.get("total"),r=t.current.get("notTrusted");r/n>.5&&n>5&&(e.current=!0,o.c.track(a.xW.NOT_TRUSTED_EVENTS_DETECTED,{totalEvents:n,notTrustedEvents:r}))},r=e=>{e.isTrusted||t.current.set("notTrusted",(t.current.get("notTrusted")||0)+1),t.current.set("total",(t.current.get("total")||0)+1),n()};return document.addEventListener("paste",r,{capture:!0}),document.addEventListener("mousedown",r,{capture:!0}),document.addEventListener("keydown",r,{capture:!0}),()=>{document.removeEventListener("paste",r,{capture:!0}),document.removeEventListener("mousedown",r,{capture:!0}),document.removeEventListener("keydown",r,{capture:!0})}},[])}},69962:function(e,t,n){"use strict";n.d(t,{$C:function(){return p},H6:function(){return u},Uj:function(){return h}});var r=n(52322),i=n(5632),a=n(73534),o=n.n(a),s=n(95405),l=n(40382),d=n(63331);let c=["/signin","/signup","/invitations/workspaces/[workspaceId]"],u=()=>{let e=(0,i.useRouter)().pathname;return!(0,l.gF)()||c.includes(e)?null:(0,r.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},p=()=>(0,r.jsx)(o(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(s.v.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),h=async e=>(await (0,d.X)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,n)=>{grecaptcha.enterprise.ready(async()=>{try{let n=await grecaptcha.enterprise.execute(s.v.RECAPTCHA_SCORING_KEY,{action:e});t(n)}catch(e){console.log(e),n(e)}})}))},86506:function(e,t,n){"use strict";n.d(t,{R:function(){return m},c:function(){return _}});var r=n(52322),i=n(70065),a=n(5879),o=n(5632),s=n(2784),l=n(69971),d=n(30240),c=n(5361),u=n(65158),p=n(7715),h=n(97875),g=n(80180),f=n(97134);let m={example_deck_clone_toast:l.L17.DuplicateInspiration,import_google_doc:l.L17.ImportGoogleDoc,import_google_slides:l.L17.ImportGoogleSlides,import_docx:l.L17.ImportDocx,import_pptx:l.L17.ImportPptx,import_webpage:l.L17.ImportWebpage,import_pdf:l.L17.ImportPdf,blank:l.L17.Blank,template_browser:l.L17.DuplicateTemplate,get_started_modal:l.L17.Blank,template_modal_griditem:l.L17.DuplicateTemplate,template_dashboard_griditem:l.L17.DuplicateTemplate,template_modal_preview:l.L17.DuplicateTemplate,template_modal_preview_create_theme:l.L17.DuplicateTemplate,"slash-new":l.L17.SlashNew,editor_toolbar_doc_menu_duplicate:l.L17.DuplicateDoc,dashboard_docs_view_duplicate:l.L17.DuplicateDoc,ai_generated:l.L17.AiGenerated,ai_generated_advanced:l.L17.AiGenerated,sites_add_page:l.L17.SitesAddPage,sites_copy_to_site:l.L17.SitesCopyToSite,sites_duplicate_page:l.L17.SitesDuplicatePage},_=()=>{let{user:e,currentWorkspace:t}=(0,f.SE)(),n=(0,d.ye)("cardLayoutsEnabled"),[_,{data:v,loading:y}]=(0,l.CsQ)(),{push:b,replace:w}=(0,o.useRouter)(),C=(0,i.p)();return[(0,s.useCallback)(i=>{var o;let s=null==e?void 0:null===(o=e.settings)||void 0===o?void 0:o.needsEditorOnboarding,l=i.source,d=null==i?void 0:i.channelId,f=(null==i?void 0:i.historyFn)==="replace"?w:b;if(!(null==t?void 0:t.id)){console.error("[createDocAndNavigate] No currentWorkspace found");return}let v={cardLayoutsEnabled:n},y=(null==i?void 0:i.document)?i.document:"empty"==(s?"quickstart":"empty")?(0,u.bx)(e,{docFlags:v,settings:(0,p.Y)()}):(0,u.VK)(e,{docFlags:v,settings:(0,p.Y)()}),E=(0,g.qI)(y);return console.debug("[createDocAndNavigate] Creating doc",{document:y,encodedDocument:E}),_({variables:{workspaceId:null==t?void 0:t.id,title:(null==i?void 0:i.title)||"",source:m[i.source],initialContent:{ydoc:E,schemaVersion:h.bI,editors:[null==e?void 0:e.id]},...d?{channels:[{channelId:d}]}:{}}}).then(async e=>{let{data:t}=e;(0,c.Q)({doc_id:null==t?void 0:t.createDoc.id,source:l,channel:d||null}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==t?void 0:t.createDoc.id),f("/docs/".concat(null==t?void 0:t.createDoc.id).concat(s?"?tour=true":""))}).catch(e=>{console.error("[createDocAndNavigate]",e),C({title:(0,r.jsx)(a.cC,{id:"0jT1fA"}),description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[n,_,null==t?void 0:t.id,b,w,C,e]),{data:v,loading:y}]}},60094:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var r=n(92035),i=n(40382),a=n(69465);let o=()=>{let e=!(0,r.l6)()&&!(0,a.wg)();return(0,i.GE)(e,'\n!function(w,d,i,s){function l(){if(!d.getElementById(i)){var f=d.getElementsByTagName(s)[0],e=d.createElement(s);e.type="text/javascript",e.async=!0,e.src="https://canny.io/sdk.js",f.parentNode.insertBefore(e,f)}}if("function"!=typeof w.Canny){var c=function(){c.q.push(arguments)};c.q=[],w.Canny=c,"complete"===d.readyState?l():w.attachEvent?w.attachEvent("onload",l):w.addEventListener("load",l,!1)}}(window,document,"canny-jssdk","script");\n'),null}},53250:function(e,t,n){"use strict";n.d(t,{S1:function(){return w},B_:function(){return I},ET:function(){return C}});var r=n(2784),i=n(95405),a=n(41638),o=n(30240),s=n(80615),l=n(82528),d=n(2529),c=n(31601),u=n(97134),p=n(92035),h=n(3158),g=n(69465),f=n(87254),m=n(82108),_=n.n(m),v=n(23691);let y=(e,t)=>{let n=_()(t);return{[e]:{next:f.ag._({id:"hXzOVo"}),back:f.ag._({id:"iH8pgl"}),nevermind:f.ag._({id:"CKyk7Q"}),goToAccount:f.ag._({id:"C9yTHG",values:{GAMMA_PROPER_NOUN:v.N6}}),getHelp:f.ag._({id:"pWsyuL"}),declineOffer:f.ag._({id:"aIFikE"}),confirmAndCancel:f.ag._({id:"G9nPRC"}),pauseSubscription:f.ag._({id:"2RgEmU"}),cancelSubscription:f.ag._({id:"dEgA5A"}),discountSubscription:f.ag._({id:"qG4Wa/"}),claimOffer:f.ag._({id:"/Gl/RK"}),discountOff:f.ag._({id:"Bdtwnw"}),discountFor:f.ag._({id:"sQv06Y"}),discountForever:f.ag._({id:"FsOOWf"}),discountOneTime:f.ag._({id:"HpXCa4"}),day:f.ag._({id:"5YWExy"}),month:f.ag._({id:"obrMay"}),year:f.ag._({id:"/Tw548"}),error:f.ag._({id:"wTrpxV"}),genericErrorDescription:f.ag._({id:"PUjJ3A"}),cancelNow:f.ag._({id:"EiakwV"}),applyingDiscount:f.ag._({id:"8kSYjw"}),applyingCancel:f.ag._({id:"VpuvNv"}),applyingResume:f.ag._({id:"eIoGiX"}),applyingPause:f.ag._({id:"UD7gOq"}),discountApplied:f.ag._({id:"jdYyiz"}),discountAppliedMessage:f.ag._({id:"DhHX6G"}),pauseApplied:f.ag._({id:"eeITvj"}),pauseAppliedMessage:f.ag._({id:"nm0VaE"}),pauseAppliedResumeMessage:f.ag._({id:"qOe0SS"}),pauseScheduledMessage:f.ag._({id:"mqRc6d"}),until:f.ag._({id:"C51N+0"}),cancelApplied:f.ag._({id:"Wcg6zu"}),cancelAppliedMessage:f.ag._({id:"8vN97Y"}),cancelAppliedDateMessage:f.ag._({id:"BS/SGu"}),howLongToPausePrompt:f.ag._({id:"HLyJ9n"}),whatCouldWeHaveDone:f.ag._({id:"fcbm8H"}),weReadEveryAnswer:f.ag._({id:"nkuKRd"}),applyingCustomerAction:f.ag._({id:"PXwF+s"}),loading:f.ag._({id:"Z3FXyt"}),pauseWallCardPunch:f.ag._({id:"iL2TQ6"}),pauseWallCta:f.ag._({id:"TvXj47"}),pauseWallCardHeading:f.ag._({id:"kHm8Fg"}),scheduledToReactivate:f.ag._({id:"aH7vi8"}),resumeApplied:f.ag._({id:"diOgYK"}),resumeAppliedMessage:f.ag._({id:"YqFvUY"}),resumeNextChargeMessage:f.ag._({id:"VDqPUf"}),resumeNextChargeMessageWithoutAmount:f.ag._({id:"RrvVAn"}),resumeAccountDataInfo:f.ag._({id:"dJCJXA"}),subscriptionPauseNotice:f.ag._({id:"fpxliT"}),failedPaymentNotice:f.ag._({id:"Vxg5vO"}),chargedMultipleTimeNotice:f.ag._({id:"lAlv46"}),failedPaymentCardPunch:f.ag._({id:"KEZrHg",values:{GAMMA_PROPER_NOUN:v.N6,productName:n}}),resumeHey:f.ag._({id:"hdOctW"}),invoicePaidTitle:f.ag._({id:"aJGfDL"}),logout:f.ag._({id:"W+3RJN"}),note:f.ag._({id:"ycCSuD"}),discount:f.ag._({id:"HmpVeZ"}),discountNoticeHeadline:f.ag._({id:"5P1dmt"}),discountNoticePrepend:f.ag._({id:"yjadEY"}),discountOverride:f.ag._({id:"JfBDWL"}),discountValidUntil:f.ag._({id:"uXxNua"}),updateBilling:f.ag._({id:"tQilrI"}),extendTrialCTA:f.ag._({id:"m3l7VI"}),extendTrialPunch:f.ag._({id:"s5pINo"}),extendTrialOfferTitle:f.ag._({id:"SyzXYh"}),trialExtended:f.ag._({id:"fezME2"}),trialExtendedMessage:f.ag._({id:"QE4mUs"}),applyingTrialExtension:f.ag._({id:"vI2q9R"}),switchPlanCTA:f.ag._({id:"P2mx2L"}),changePlanHighlights:f.ag._({id:"qbgW+C"}),changePlanOfferPunch:f.ag._({id:"MRkiFP"}),planChanged:f.ag._({id:"ByFtyh"}),planChangedMessage:f.ag._({id:"Pf5z1G"}),applyingPlanChange:f.ag._({id:"9vKKLI"}),surveyStepTag:f.ag._({id:"cSUBI1"}),freeFormStepTag:f.ag._({id:"cSUBI1"}),finalConfirmation:f.ag._({id:"1/oP/N"}),offerDiscountTag:f.ag._({id:"LTgtxG"}),offerChangePlanTag:f.ag._({id:"ENMJv2"}),offerExtendTrialTag:f.ag._({id:"MWKntz"}),offerRedirectTag:f.ag._({id:"cvpAvL"}),offerContactTag:f.ag._({id:"cvpAvL"}),offerPauseTag:f.ag._({id:"+T6DGl"}),completeTag:f.ag._({id:"K5c1e7"}),errorTag:f.ag._({id:"EuvbIW"}),offerAccepted:f.ag._({id:"ZU0opP"})}}},b="\n!function(){  \n    if (!window.churnkey || !window.churnkey.created) {\n      window.churnkey = { created: true };\n      const a = document.createElement('script');\n      a.src = 'https://assets.churnkey.co/js/app.js?appId=".concat(i.v.CHURNKEY_APP_ID,"';\n      a.async = true;\n      const b = document.getElementsByTagName('script')[0];\n      b.parentNode.insertBefore(a, b);\n    }\n  }();\n"),w=()=>{let e=!(0,p.l6)()&&!(0,g.wg)();return(0,h.G)(e,b),null},C=e=>{var t;let{subscription:n,workspace:c,autoLaunch:p=!0}=e,{user:h}=(0,u.SE)(),g=(0,o.ye)("churnkeyFailedPaymentWallEnabled"),f=(0,s.l)(),m=(0,d.K9)(c),_=(0,l.G)(),v=g&&(null==h?void 0:h.id)===(null==n?void 0:null===(t=n.createdByUser)||void 0===t?void 0:t.id),y=(0,r.useCallback)(async()=>{if(n&&m&&v)return(0,a.d6)("churnkey").then(e=>{var t,r;if(!e||!n.billingSubscriptionId||!(null===(t=n.createdByUser)||void 0===t?void 0:t.billingCustomerId)){console.error("[Churnkey] launchFailedPayment Missing hmac or subscription data",{hmac:e,subscription:n});return}console.debug("[Churnkey] launchFailedPayment - launching churnkey with:",{hmac:e,appId:i.v.CHURNKEY_APP_ID,subscriptionId:n.billingSubscriptionId,customerId:null===(r=n.createdByUser)||void 0===r?void 0:r.billingCustomerId}),E({authHash:e,subscription:n,localeKey:f,productKey:m,launchIntercomUI:_})})},[n,m,v,f,_]);return(0,r.useEffect)(()=>{p&&y()},[y,p]),{launchFailedPaymentFlow:y,failedPaymentFlowEnabled:v}},E=async e=>{var t,n;let{authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l}=e;null===(n=window.churnkey)||void 0===n||n.check("failed-payment",{subscriptionId:a.billingSubscriptionId,customerId:null===(t=a.createdByUser)||void 0===t?void 0:t.billingCustomerId,authHash:r,customerAttributes:{language:o},i18n:{lang:o,messages:y(o,s)},appId:i.v.CHURNKEY_APP_ID,mode:i.v.CHURNKEY_MODE,provider:"stripe",softWall:!0,forceCheck:!1,gracePeriodDays:3,ignoreInvoicesWithoutAttempt:!1,handleSupportRequest(){var e;l(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},async handleCancel(e){var t,n;return c.co.track(c.AA.CANCEL_SUBSCRIPTION_CLICK,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(t=a.createdByUser)||void 0===t?void 0:t.billingCustomerId}),console.debug("[launchChurnkeyFailedPayment.handleCancel]",{subscriptionId:a.billingSubscriptionId,customerId:null===(n=a.createdByUser)||void 0===n?void 0:n.billingCustomerId,customer:e}),S({authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l,customerAttributes:{viaFailedPayment:!0}}).catch(e=>E({authHash:r,subscription:a,localeKey:o,productKey:s,launchIntercomUI:l}))},onFailedPaymentWallActivated(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_SHOWN,{subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onUpdatePaymentInformation(){var e;c.co.track(c.AA.CHURNKEY_PAYMENT_METHOD_UPDATED,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onFailedPaymentWallClose(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_CLOSED,{subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(){var e;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"failed-payment-wall",subscriptionId:a.billingSubscriptionId,customerId:null===(e=a.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onError(e,t){console.warn('Churnkey check("failed-payment", ...) error',e,t)}})},I=(e,t)=>{let n=(0,o.ye)("churnkeyCancelFlowEnabled"),i=(0,s.l)(),c=(0,d.K9)(t),u=(0,l.G)();return{launchCancelFlow:(0,r.useCallback)(()=>{if(e&&c&&n)return(0,a.d6)("churnkey").then(t=>{var n;if(!t||!e.billingSubscriptionId||!(null===(n=e.createdByUser)||void 0===n?void 0:n.billingCustomerId)){console.debug("[Churnkey] handleCancel - Missing hmac or subscription data",{hmac:t,subscription:e});return}return S({authHash:t,subscription:e,localeKey:i,productKey:c,launchIntercomUI:u})})},[n,i,c,e,u]),cancelFlowEnabled:n}},S=async e=>{let{authHash:t,subscription:n,localeKey:r,productKey:a,customerAttributes:o={},launchIntercomUI:s}=e;return new Promise((e,l)=>{var u,p,h;null===(h=window.churnkey)||void 0===h||h.init("show",{subscriptionId:n.billingSubscriptionId,customerId:null===(u=n.createdByUser)||void 0===u?void 0:u.billingCustomerId,authHash:t,customerAttributes:{language:r,frequency:null===(p=(0,d.OJ)(n))||void 0===p?void 0:p.frequencyUnit,productKey:a,...o},i18n:{lang:r,messages:y(r,a)},appId:i.v.CHURNKEY_APP_ID,mode:i.v.CHURNKEY_MODE,provider:"stripe",record:!0,handleSupportRequest(){var e;s(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"cancel-flow",subscriptionId:n.billingSubscriptionId,customerId:null===(e=n.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(e,t,r){var i;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"cancel-flow",subscriptionId:n.billingSubscriptionId,customerId:null===(i=n.createdByUser)||void 0===i?void 0:i.billingCustomerId,surveyResponse:t,freeformFeedback:r}),console.debug("[launchChurnkeyCancelFlow.onCancel]",{surveyResponse:t,freeformFeedback:r})},onGoToAccount(t){console.debug("[launchChurnkeyCancelFlow.onGoToAccount]",{sessionResults:t}),e({sessionResults:t})},onClose(t){if(console.debug("[launchChurnkeyCancelFlow.onClose]",{sessionResults:t}),!t||t.aborted){l("Churnkey cancel flow aborted");return}e({sessionResults:t})},onError(e){console.warn("[launchChurnkeyCancelFlow.onError]",{message:e}),l({message:e})}})})}},29469:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var r=n(2784),i=n(80615);let a=()=>{let e=(0,i.l)();(0,r.useEffect)(()=>{document.documentElement.setAttribute("lang",e)},[e])}},83639:function(e,t,n){"use strict";n.d(t,{GQ:function(){return p},S1:function(){return r.S}});var r=n(82004),i=n(52322),a=n(95405),o=n(71383),s=n(92035),l=n(40382),d=n(69465),c=n(69423);let u="\n(function(){var w=window;var ic=w.Intercom;if(typeof ic===\"function\"){ic('reattach_activator');ic('update',w.intercomSettings);}else{var d=document;var i=function(){i.c(arguments);};i.q=[];i.c=function(args){i.q.push(args);};w.Intercom=i;var l=function(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/".concat(a.v.INTERCOM_APP_ID,"';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);};if(document.readyState==='complete'){l();}else if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})();\n"),p=()=>{let e=!(0,s.l6)()&&!(0,d.wg)();(0,l.GE)(e,u);let t=(0,o.CG)(c.Dm);return(0,l.gF)()&&e?(0,i.jsx)("style",{children:"\n       #intercom-container > div {\n         display: ".concat(t?"block":"none"," !important;\n       }\n       div.intercom-app .intercom-borderless-frame,\n       div.intercom-app .intercom-messenger-frame  {\n         transform: translateY(calc(").concat(t?"0px":"100% + 20px",")) !important;\n       }\n     ")}):null}},69341:function(e,t,n){"use strict";n.d(t,{S:function(){return _}});var r=n(52322),i=n(55478),a=n(2784),o=n(8940),s=n(53250),l=n(30240),d=n(36660),c=n(76009),u=n(91076),p=n(33279),h=n(552),g=n(2529),f=n(16720);let m="get-gamma-pro",_=e=>{var t,n;let{children:_}=e,{currentWorkspace:v,isUserLoading:y}=(0,u.SE)(),[b,w]=(0,a.useState)(!1),C=(0,c.z$)(),E=(0,l.ye)("upsellUXEnabled_Pro"),{data:I,refetch:S}=(0,o.FaU)({variables:{workspaceId:null==v?void 0:v.id,includeExpired:!0},skip:!(null==v?void 0:v.id)}),x=null==I?void 0:I.subscription;(0,s.ET)({subscription:x,workspace:v,autoLaunch:!0});let{data:A}=(0,o.kNl)({variables:{workspaceId:null==v?void 0:v.id},skip:!v}),P=null==A?void 0:null===(t=A.products)||void 0===t?void 0:t.find(e=>"pro"===e.key),k=null==P?void 0:null===(n=P.prices)||void 0===n?void 0:n.find(e=>e.frequencyUnit===o.C_B.Year),T=(0,g.K9)(v),{isOpen:O,onOpen:j,onClose:D}=(0,i.q)({id:"upsell-modal"}),N=(0,a.useRef)(null),L=(0,a.useCallback)(e=>{let{onOpenCallback:t,onCloseCallback:n,insufficientCreditsWarning:r,segmentEvent:i}=e;E&&(w(!!r),null==t||t(),j(),null==C||C.track(i),N.current=n||null)},[C,j,E]),R=(0,a.useCallback)(()=>{var e;null==N||null===(e=N.current)||void 0===e||e.call(N),D(),N.current=null,w(!1)},[D]),[U,M]=(0,a.useState)({openUpsellModal:L,product:T,subscription:x,proYearlyProductPrice:k});return(0,a.useEffect)(()=>{"true"!==(0,p.SJ)()[m]||y||!v||(j(),(0,d.lO)({query:{...(0,p.SJ)(),[m]:void 0},emitChange:!1}))},[j,v,y]),(0,a.useEffect)(()=>{M({openUpsellModal:L,refetchSubscription:S,product:T,subscription:x,proYearlyProductPrice:k})},[L,T,x,k,S]),(0,r.jsxs)(f.P.Provider,{value:U,children:[_,O&&(0,r.jsx)(h.b,{insufficientCreditsWarning:b,isUpsellModalOpen:O,closeUpsellModal:R}),(0,r.jsx)(s.S1,{})]})}},43848:function(e,t,n){"use strict";n.d(t,{H:function(){return E}});var r=n(30733),i=n.n(r),a=n(54073),o=n.n(a),s=n(67304),l=n.n(s),d=n(71383),c=n(60589),u=n(6092),p=n(69180);let h="custom",g="updates",f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},[n]=c.ay(e.db,[g]);return c.go(n,c.sc(e._dbref,!1)).then(r=>{t(n),p.ay(e.doc,()=>{r.forEach(t=>p.NG(e.doc,t))},e,!1)}).then(()=>c.S_(n).then(t=>{e._dbref=t+1})).then(()=>c.QX(n).then(t=>{e._dbsize=t})).then(()=>n)},m=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return f(e).then(n=>{(t||e._dbsize>=500)&&c.yP(n,p.D$(e.doc)).then(()=>c.IV(n,c.UE(e._dbref,!0))).then(()=>c.QX(n).then(t=>{e._dbsize=t}))})},_=e=>c.Lj(e);class v extends u.y{destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{c.Lj(this.name)})}get(e){return this._db.then(t=>{let[n]=c.ay(t,[h],"readonly");return c.U2(n,e)})}set(e,t){return this._db.then(n=>{let[r]=c.ay(n,[h]);return c.gz(r,t,e)})}del(e){return this._db.then(t=>{let[n]=c.ay(t,[h]);return c.IV(n,e)})}constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=c.X3(e,e=>c._w(e,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=this._db.then(e=>(this.db=e,f(this,e=>c.yP(e,p.D$(t))).then(()=>(this._destroyed||(this.emit("synced",[this]),this.synced=!0),this)))),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(e,t)=>{if(this.db&&t!==this){let[t]=c.ay(this.db,[g]);c.yP(t,e),++this._dbsize>=500&&(null!==this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{m(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}}var y=n(78112),b=n(8037),w=n(12753);class C{async enable(){}async disable(){}get enabled(){return(0,w.aL)(this.store.getState())}async loadYDoc(e,t){return this.enabled?!!(0,w.pG)(this.store.getState())[e]&&(this.setup(e,t),!0):(console.warn("Cannot setupForDocLoad when it is not enabled"),!1)}async syncYDoc(e,t){if(!this.enabled){console.warn("Cannot setup IndexedDB for doc as it is not enabled");return}await this.setup(e,t),this.store.dispatch((0,w.fz)({docId:e,lastSynced:new Date().toISOString()}))}setup(e,t){return new Promise(n=>{let r=new v(e,t),i=o()(()=>{let e=t.getMap("SCHEMA_VERSION").get("REQUIRED_VERSION");r.set("lastUpdated",new Date().toISOString()),r.set("schemaVersion",e||"")},1e3);t.on("update",i),r.on("synced",()=>{n()})})}async gc(){let e=Date.now(),t=Object.values(this.syncedYDocs).filter(t=>!!t.lastSynced&&e-new Date(t.lastSynced).getTime()>b.c).map(e=>e.docId),n=(0,y.yU)(this.store.getState());n?this.removeDocs(l()(t,n)):this.removeDocs(t)}async removeDocs(e){if(0===e.length)return;this.store.dispatch((0,w.h_)({docIds:e}));let t=e.map(e=>_(e));await Promise.all(t)}async debug(){return{syncedYdocs:this.syncedYDocs}}get syncedYDocs(){return(0,w.pG)(this.store.getState())}constructor(){this.store=(0,d.bh)()}}let E=i()(()=>new C)},1384:function(e,t,n){"use strict";n.d(t,{bf:function(){return f},iZ:function(){return h},lh:function(){return p},wK:function(){return g}});var r=n(2784),i=n(30240),a=n(71383),o=n(78112),s=n(33945),l=n(21562),d=n(44007);let c=e=>Math.random()<=1/e;class u{setupProvider(){this.t1SetupProvider||(this.t1SetupProvider=performance.now())}downloadDoc(){this.t2DownloadDoc||(this.t2DownloadDoc=performance.now())}onCreate(){this.t3OnCreate||(this.t3OnCreate=performance.now())}report(){return null===this.t1SetupProvider||null===this.t2DownloadDoc||null===this.t3OnCreate?null:{downloadDoc:this.t2DownloadDoc-this.t1SetupProvider,onCreate:this.t3OnCreate-this.t2DownloadDoc}}constructor(){this.t1SetupProvider=null,this.t2DownloadDoc=null,this.t3OnCreate=null}}let p=(e,t)=>{let n=(0,a.CG)(o.Pw),i=(0,r.useRef)(n);(0,r.useEffect)(()=>{i.current=n},[n]),(0,r.useEffect)(()=>{if(e)return window.addEventListener("keydown",n,!0),()=>{window.removeEventListener("keydown",n,!0)};function n(e){if(!e.target.closest(".ProseMirror")||!i.current||!c(t))return;let n=performance.now();requestAnimationFrame(()=>{let t=e.key;" "===t&&(t="Space");let r=performance.now()-n;(0,d.EF)({...(0,l.H)(),key:t,duration:r})})}},[e,i,t])},h=()=>{let e=(0,i.ye)("rumSampleRate");(0,r.useEffect)(()=>{(0,d._k)(e)},[e])},g=e=>{let t=(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,d.gG)({...(0,l.H)(),toMode:s.q.SLIDE_VIEW,duration:e,isFullscreen:n})})})},[e]);return{recordExitSlideModePerformance:(0,r.useCallback)(t=>{let{isFullscreen:n=!1}=t;if(!e)return;let r=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-r;(0,d.gG)({...(0,l.H)(),toMode:s.q.DOC_VIEW,duration:e,isFullscreen:n})})})},[e]),recordEnterSlideModePerformance:t}},f=()=>{let[e]=(0,r.useState)(()=>new u),t=(0,r.useCallback)(()=>{e.setupProvider()},[e]),n=(0,r.useCallback)(()=>{e.downloadDoc()},[e]);return{timeOnCreate:(0,r.useCallback)(()=>{e.onCreate();let t=e.report();if(null===t){console.warn("[HoneycombDocLoadTimer] failed to generate doc timings");return}(0,d.Py)({...(0,l.H)(),duration:t.onCreate}),(0,d.aZ)({...(0,l.H)(),duration:t.downloadDoc})},[e]),timeOnSetupProvider:t,timeOnDownloadDoc:n}}},87345:function(e,t,n){"use strict";n.d(t,{s:function(){return i}});var r=n(54839);let i=(e,t)=>{if(e.globalToast)return;let n=(0,r.I)({theme:t});e.globalToast=n}},29243:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var r=n(5632),i=n(2784),a=n(19210),o=n(18960);let s=()=>{let{pathname:e,isReady:t}=(0,r.useRouter)(),n=(0,i.useRef)(!1),[s,l]=(0,a.X)(o.H.lastHomeUrl,"/");(0,i.useEffect)(()=>{!n.current&&t&&(l("/inspiration"===e||"/templates"===e?e:"/"),n.current=!0)},[l,t,e])}},5361:function(e,t,n){"use strict";n.d(t,{J:function(){return o},Q:function(){return a}});var r=n(31601),i=n(81363);let a=e=>{let{doc_id:t,source:n,source_doc_id:a,channel:o,extra:s}=e;null===r.co||void 0===r.co||r.co.track(i.AA.DOC_CREATED,{doc_id:t,source_doc_id:a,source:n,channel:o,extra:s})},o=e=>{let{docId:t,type:n,source:a}=e;if(!t){console.debug("[trackDocShareLinkCopiedEvent]: doc_id is required");return}null===r.co||void 0===r.co||r.co.track(i.AA.DOC_SHARELINK_COPIED,{doc_id:t,source:a,type:n})}},7715:function(e,t,n){"use strict";n.d(t,{C:function(){return i},Y:function(){return a}});var r=n(30240);let i=e=>(null==e?void 0:e.animationsEnabled)===!0,a=()=>{let e=r.VH.get("editorAnimationsDefault"),t={};return e&&(t.animationsEnabled=!0),t}},19210:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var r=n(2784),i=n(92744);function a(e,t){let[n,a]=(0,r.useState)(()=>{try{let n=i.Q.getItem(e);if(null===n)return t;return JSON.parse(n)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}});return[n,(0,r.useCallback)(t=>{try{i.Q.setItem(e,JSON.stringify(t)),a(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e])]}},62376:function(){},6991:function(){},76298:function(){},4466:function(){},43839:function(){},25237:function(e,t,n){e.exports=n(59246)}}]);
//# sourceMappingURL=6749-0518409c37b7c3ab.js.map